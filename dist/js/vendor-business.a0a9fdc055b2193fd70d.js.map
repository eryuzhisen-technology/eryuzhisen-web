{"version":3,"sources":["webpack:///js/vendor-business.a0a9fdc055b2193fd70d.js","webpack:///header.vue","webpack:///./src/component/header.vue?200d","webpack:///./src/component/author.hot.vue?6c42","webpack:///article.list.vue","webpack:///./src/component/chapter.list.vue?6f44","webpack:///./src/component/feedback.vue?4305","webpack:///./src/component/content.empty.vue?bb8d","webpack:///./src/component/menu.left.vue?1f25","webpack:///./src/component/comment.info.vue?bbab","webpack:///./src/lib/upload/plupload.dev.js","webpack:///./src/server/modules/opus.js","webpack:///./src/server/modules/message.js","webpack:///feedback.vue","webpack:///author.header.vue","webpack:///article.hot.vue","webpack:///./src/component/uploadImg.vue?40e4","webpack:///./src/server/data/message.js","webpack:///author.list.vue","webpack:///./src/server/config.js","webpack:///./src/component/footer.vue?177e","webpack:///./src/lib/vue.cache.js","webpack:///article.better.vue","webpack:///./src/component/feedback.vue?dc82","webpack:///./src/component/comment.info.vue?5f97","webpack:///./src/component/sideMenu.vue?4355","webpack:///comment.list.vue","webpack:///./src/component/uploadImg.vue?86cb","webpack:///./src/component/comment.list.vue?f2b6","webpack:///./src/component/bubble.vue?7eea","webpack:///./src/component/article.comment.vue?0c78","webpack:///content.empty.vue","webpack:///./src/component/article.list.vue?9afc","webpack:///./src/lib/upload/moxie.js","webpack:///uploadImg.vue","webpack:///chapter.edit.vue","webpack:///./src/component/chapter.edit.vue?33be","webpack:///./src/component/menu.left.vue?33c5","webpack:///./src/component/article.hot.vue?0563","webpack:///chapter.list.vue","webpack:///article.comment.vue","webpack:///footer.vue","webpack:///./src/server/version.js","webpack:///./src/component/author.list.vue?621f","webpack:///./src/component/comment.list.vue?53d1","webpack:///./src/component/article.better.vue?954a","webpack:///./src/component/edit.vue?2ce5","webpack:///./src/component/article.header.vue?d126","webpack:///./src/component/chapter.edit.vue?b592","webpack:///./src/component/content.empty.vue?5d81","webpack:///./src/server/data/opus.js","webpack:///./src/lib/edit/edit.js","webpack:///./src/component/header.vue?4060","webpack:///comment.info.vue","webpack:///./src/component/author.header.vue?abd3","webpack:///sideMenu.vue","webpack:///./src/component/footer.vue?c047","webpack:///./src/server/modules/user.js","webpack:///./src/component/edit.vue?f132","webpack:///./src/component/article.header.vue?f788","webpack:///./src/server/modules/auth.js","webpack:///./src/component/author.header.vue?a8f7","webpack:///./src/component/bubble.vue?e072","webpack:///./src/component/chapter.list.vue?c270","webpack:///./src/lib/vue.eventHub.js","webpack:///page.fenye.vue","webpack:///./src/server/data/auth.js","webpack:///article.header.vue","webpack:///edit.vue","webpack:///./src/component/article.list.vue?d9d4","webpack:///./src/component/page.fenye.vue?03c8","webpack:///./src/server/data/common.js","webpack:///./src/server/store.js","webpack:///./src/component/article.hot.vue?eabd","webpack:///./src/component/author.list.vue?bbc1","webpack:///./src/server/modules/bubble.js","webpack:///./src/component/author.hot.vue?7cd0","webpack:///./src/component/sideMenu.vue?0882","webpack:///menu.left.vue","webpack:///./src/lib/vue.url.js","webpack:///author.hot.vue","webpack:///./src/server/modules/common.js","webpack:///./src/component/article.better.vue?99fe","webpack:///./src/component/article.comment.vue?6d37","webpack:///bubble.vue","webpack:///./src/server/data/user.js"],"names":["webpackJsonp","+1mQ","module","exports","__webpack_require__","Object","defineProperty","value","_vuex","_avatar","_avatar2","obj","__esModule","default","name","data","avatar","hasMessage","search_value","props","computed","mapState","user","state","info","search","location","pathname","indexOf","this","url","index","mark","app","login","register","center","$store","uid","setting","better","comment","infomation","edit","encodeURIComponent","window","href","unread","list","message","i","len","length","message_type","unread_count","message1","message2","message0","methods","seachGo","resType","$eventHub","$emit","query","getUserInfo","_this","cache_userInfo","$version","userInfo","$cache","getStore","key","version","dispatch","then","res","setStore","time","catch","err","ourlogin","centerShow","removeStore","feedbackOpen","getUnreadMessage","_this2","mounted","_this3","$on","option","decodeURIComponent","$url","getUrlParam","+GE4","+l+3","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","class","z-on","pageIndex","directives","rawName","expression","type","placeholder","domProps","on","keyup","$event","_k","keyCode","input","target","composing","click","_e","isLogin","_s","style","background-image","avatar_url","staticRenderFns","0CNv","Component","1nOS","$","labelTag","subMoreShow","pageSize","article","opus","tag","category","pageSwitch","getList","subMoreSwitch","remove","catalogId","that","show","warn","title","content","comfireFn","delCatalog","getCatalogList","loadType","params","pagination","page","body","label","catalog_type","user_id","userType","fuzzy_query","count","getMyCatalogList","console","log","getFavoritesList","getMore","_this4","cache_history","history","lists","slice","delFavorites","e","_this5","currentTarget","parents","_this6","delHistory","catalog_id","splice","created","_this7","_this8","top","scrollTop","height","offset","$watch","newVal","oldVal","status","msg","call","1na0","_l","chapter","chapter_id","chapter_title","publish_date","owner","chapter_status","praise_count","comment_count","page_switch","28R+","z-error","content_reg","content_reg_con","contact_reg","contact_reg_con","contact","close","send","2Gq5","_m","src","2mP8","item","isActive","number","36Po","sender","nick_name","create_time","387H","__webpack_exports__","install","_Vue","Vue","error","prototype","$plupload","plupload","o","undef","normalizeCaps","settings","resolve","feature","strict","map","chunks","jpgresize","pngresize","progress","multi_selection","dragdrop","drop_element","headers","urlstream_upload","canSendBinary","triggerDialog","caps","features","required_features","each","split","chunk_size","slice_blob","resize","enabled","multipart","send_binary_string","delay","setTimeout","fileFilters","VERSION","STOPPED","STARTED","QUEUED","UPLOADING","FAILED","DONE","GENERIC_ERROR","HTTP_ERROR","IO_ERROR","SECURITY_ERROR","INIT_ERROR","FILE_SIZE_ERROR","FILE_EXTENSION_ERROR","FILE_DUPLICATE_ERROR","IMAGE_FORMAT_ERROR","MEMORY_ERROR","IMAGE_DIMENSIONS_ERROR","mimeTypes","mimes","ua","typeOf","extend","guid","get","ids","el","els","push","getPos","getSize","xmlEncode","str","xmlEncodeChars","<",">","&","\"","'","xmlEncodeRegExp","replace","chr","toArray","inArray","addI18n","translate","isEmptyObj","hasClass","addClass","removeClass","getStyle","addEvent","removeEvent","removeAllEvents","cleanName","lookup","buildUrl","items","formatSize","size","round","num","precision","Math","pow","test","boundary","parseSize","parseSizeStr","predictRuntime","config","runtimes","up","runtime","Uploader","Runtime","thatCan","getOption","destroy","addFileFilter","cb","filters","file","regexp","trigger","code","maxSize","ii","files","options","uploadNext","calcFile","percent","ceil","loaded","calc","total","reset","origSize","uploaded","failed","queued","bytesPerSec","Date","startTime","getRUID","ctrl","fileInputs","fileDrops","getRuntime","runtimeCan","cap","ruid","getInfo","can","bindEventListeners","bind","refresh","onCancelUpload","onBeforeUpload","onUploadFile","onUploadProgress","onStateChanged","onError","onFileUploaded","onDestroy","initControls","self","inited","queue","runtime_order","required_caps","preferred_caps","swf_url","flash_swf_url","xap_url","silverlight_xap_url","browse_button","fileInput","FileInput","accept","mime_types","file_data_name","multiple","container","onready","onchange","addFile","disabled","browse_button_hover","browse_button_active","init","fileDrop","FileDrop","drop_zone","ondrop","inSeries","resizeImage","blob","img","Image","onload","width","quality","preserve_headers","crop","downsize","onresize","getAsBlob","onerror","load","ex","setOption","_setOption","oldValue","max_file_size","send_file_name","extensionsRegExp","filter","extensions","ext","RegExp","join","prevent_duplicates","reinitRequired","unique_names","matches","match","target_name","id","handleError","retries","uploadNextChunk","response","xhr","responseText","responseHeaders","getAllResponseHeaders","chunkBlob","formData","curChunkSize","args","chunkSize","min","send_chunk_number","chunk","XMLHttpRequest","upload","onprogress","max_retries","Env","browser","onloadend","open","setRequestHeader","FormData","multipart_params","append","floor","getSource","resizedBlob","abort","stop","order","QueueProgress","preinit","func","start","disableBrowse","arguments","disable","getFile","fileName","filterFile","rule","resolveFile","File","isDetached","connectRuntime","Blob","filesAdded","removeFile","removed","restartRequired","scope","apply","unbindAll","EventTarget","instance","PluploadFile","fileSize","lastModifiedDate","toLocaleString","getNative","filepool","mOxie","3Tyq","_promise","_promise2","_opus","newObj","hasOwnProperty","more","hot","category_desc","category_id","category_title","laberSubnode","tags","catalog","statusArr","audit_status","text","levelArr","level_id","mutations","opus_setArticle","payload","opus_setCategory","opus_setChapterList","opus_setCatalog_info","opus_setCatalog","opus_setChapter","opus_setComment","opus_setCommentList","replayIndex","opus_setHot","actions","context","commit","opus_setTagIndex","opus_setChapterInfo","opus_getCatalogList","reject","ret","concat","page_info","total_count","opus_getChapterList","getChapterList","reverse","Number","opus_getCategoryList","getCategoryList","sub_node","opus_getFavoritesList","opus_delFavorites","opus_addFavorites","addFavorites","opus_getCommentList","getCommentList","opus_getReplyCommentList","commentId","getReplyCommentList","comment_id","reply_page_info","reply_more","replys","opus_addComment","addComment","opus_addCatalog","addCatalog","level","catalog_title","catalog_desc","catalog_cover_url","catalog_status","catalog_label","authorize","reprint","opus_updateCatalog","updateCatalog","opus_getCatalogDetail","getCatalogDetail","opus_addChapter","addChapter","chapter_desc","chapter_content","opus_addCommentPraise","addCommentPraise","opus_addPraise","chapterId","addPraise","opus_getLabelList","getLabelList","opus_updateChapter","updateChapter","opus_getChapterDetail","getChapterDetail","opus_getHotList","opus_deleteChapter","delChapter","opus_delCatalog","opus_getMyCatalogList","3jmG","_message","detail","message_setMessage","message_setUnread","message_setDetail","message_getMessageList","getMessageList","message_getUnreadMessage","message_getMessageDetail","msgId","getMessageDetail","rejectObj","message_markMessage","msgType","markMessage","3u21","common","trim","contact_info","4IqS","fileUrl","isAgain","filename","getAuthorInfo","userId","follow","relation","addBlackDialog","addBlack","black","addReport","report","content_id","content_type","node","subMoreMoreShow","subShareMoreShow","4k6S","hot_isCan","move","hot_number","hotSwitch","getHotList","5hbK","88zL","9AVj","_interopRequireDefault","_config","baseUrl","_axios2","method","token","_reject","_rejectObj","delMessage","_header","undefined","_axios","_jsCookie","_jsCookie2","9a/S","auth","delBlack","addFollow","tthis","delFollow","getUserList","getFollowList","getFansList","getBlackList","AEPM","errcode","distUrl","imgBaseUrl","isdebug","ApeN","about","B0wf","B6An","global","factory","Cache","memStoreMap","cacheTime","localStorage","d","dataVersion","getTime","parseInt","JSON","stringify","setItem","forceLocal","getItem","parse","removeItem","BCRs","_img","_img2","fabulous","messageType","BFCG","BGNd","Bhe8","CPmu","D3lx","DMxe","DfkF","recordIndex","recordSwitch","msg_id","read","to_comment_id","to_reply_comment_id","emitComment","EB0Y","EPsp","EPvs","Eion","FG6U","_index","data-uid","data-comment_id","replayCommit","publish_time","hasFabulous","comment_con","sendComment","reply","data-index","reply_to_user","sendReplyComment","getSubCommentMore","FhuJ","HFHI","HvkJ","require","callback","defs","modules","define","dependencies","definition","fragments","fi","nodeType","toString","toLowerCase","arg","prop","callNext","inParallel","cbArgs","Array","fn","shift","unshift","needle","array","arrayDiff","needles","diff","arrayIntersect","array1","array2","result","arr","counter","prefix","random","String","mul","muls","t","g","m","k","exec","Basic","i18n","pack","_","sprintf","I18n","Mime","addMimeType","mimeData","extList2mimes","addMissingExtensions","mimes2exts","exts","mime","mimes2extList","getFileExtension","getFileMime","version_compare","v1","v2","operator","x","compare","vm","dev","alpha","a","beta","b","RC","rc","#","p","pl","prepVersion","v","numVersion","isNaN","max","UAParser","MAJOR","NAME","util","has","str1","str2","lowerize","mapper","rgx","j","q","regex","getUA","maps","oldsafari","major","1","2","?","1.0","1.2","1.3","2.0","2.0.2","2.0.3","2.0.4","device","sprint","model","Evo Shift 4G","vendor","HTC","Sprint","os","windows","ME","NT 3.11","NT 4.0","2000","XP","Vista","7","8","8.1","RT","regexes","engine","uastring","navigator","userAgent","getBrowser","getEngine","getOS","getResult","setUA","define_property","create_canvas","document","createElement","getContext","return_response_type","responseType","use_data_uri","du","use_data_uri_over32kb","use_data_uri_of","bytes","use_fileinput","setAttribute","parseFloat","osVersion","verComp","global_event_dispatcher","OS","getElementById","className","regExp","$0","$1","$2","currentStyle","getComputedStyle","root","getIEPos","bodyElm","rect","y","getBoundingClientRect","doc","compatMode","documentElement","left","scrollLeft","parent","nodeRect","rootRect","documentMode","offsetLeft","offsetTop","offsetParent","parentNode","w","offsetWidth","clientWidth","h","offsetHeight","clientHeight","_findKey","RuntimeError","namecodes","NOT_INIT_ERR","NOT_SUPPORTED_ERR","JS_ERR","Error","OperationNotAllowedException","NOT_ALLOWED_ERR","ImageError","WRONG_FORMAT","MAX_RESOLUTION_ERR","FileException","NOT_FOUND_ERR","SECURITY_ERR","ABORT_ERR","NOT_READABLE_ERR","ENCODING_ERR","NO_MODIFICATION_ALLOWED_ERR","INVALID_STATE_ERR","SYNTAX_ERR","DOMException","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","INUSE_ATTRIBUTE_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","VALIDATION_ERR","TYPE_MISMATCH_ERR","NETWORK_ERR","URL_MISMATCH_ERR","QUOTA_EXCEEDED_ERR","TIMEOUT_ERR","INVALID_NODE_TYPE_ERR","DATA_CLONE_ERR","EventException","UNSPECIFIED_EVENT_TYPE_ERR","eventpool","addEventListener","priority","hasEventListener","removeEventListener","removeAllEventListeners","dispatchEvent","tmpEvt","evt","async","sort","handler","unbind","convertEventPropsToHandlers","handlers","utf8_encode","unescape","utf8_decode","str_data","escape","atob","utf8","o1","o2","o3","h1","h2","h3","h4","bits","b64","ac","dec","tmp_arr","charAt","fromCharCode","btoa","enc","charCodeAt","r","Dom","modeCaps","preferredMode","_shim","_uid","defaultMode","access_binary","access_image_binary","display_media","do_cors","drag_and_drop","filter_by_extension","resize_image","report_upload_progress","return_response_headers","return_status_code","send_custom_headers","select_file","select_folder","select_multiple","send_browser_cookies","send_multipart","stream_upload","summon_file_dialog","upload_filesize","use_http_method","getMode","objpool","comp","removeInstance","removeAllInstances","initialized","mode","shimid","clients","refCaps","parseCaps","getShimContainer","shimContainer","position","overflow","appendChild","getShim","shimExec","component","action","removeChild","runtimeConstructors","addConstructor","constructor","getConstructor","capStr","capObj","runtimeOrder","types","requiredCaps","capMode","capTrue","capFalse","capTest","expr","initialize","disconnectRuntime","Encode","RuntimeClient","_sliceDetached","end","blobpool","detach","substr","substring","lastIndexOf","browseButton","defaults","dispatches","pos","RuntimeTarget","FileReader","_read","op","readyState","loadEnd","_fr","LOADING","EMPTY","readAsBinaryString","readAsDataURL","readAsText","parseUrl","currentUrl","ports","http","https","uri","scheme","host","port","path","source","resolveUrl","urlp","hasSameOrigin","origin","txt","_blob","_fields","valueType","hasBlob","getBlob","getBlobName","field","Url","FileReaderSync","XMLHttpRequestUpload","_p","_doXHR","_xhr","_upload_events_flag","lengthComputable","httpCode","_responseHeaders","_error_flag","_upload_complete_flag","_url","_method","_async","_user","password","_password","_headers","mimeType","_mimeType","encoding","_encoding","withCredentials","_options","_start_time","_same_origin_flag","_reset","_timeoutset_time","_responseHeadersBag","timeout","UNSENT","statusText","responseXML","_sync_flag","_send_flag","_finalMime","_finalCharset","toUpperCase","pass","OPENED","header","uaHeaders","getResponseHeader","line","pair","overrideMimeType","charset","100","101","102","200","201","202","203","204","205","206","207","226","300","301","302","303","304","305","306","307","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","422","423","424","426","500","501","502","503","504","505","506","507","510","HEADERS_RECEIVED","Transporter","_size","_pos","_data","_run","_runtime","IDLE","_transport","BUSY","bytesLeft","_chunk_size","mod","transport","_updateInfo","meta","_load","srcType","_loadFromImage","_loadFromBlob","_loadFromUrl","nodeName","exact","clone","opts","preserveHeaders","MAX_RESIZE_WIDTH","MAX_RESIZE_HEIGHT","getAsCanvas","getAsDataURL","getAsBinaryString","dataUrl","embed","onResize","canvas","imgCopy","innerHTML","tr","dimensions","Html5Runtime","I","Test","True","div","sendAsBinary","Uint8Array","ArrayBuffer","mozSlice","webkitSlice","HTML5Blob","w3cBlobSlice","blobSlice","preventDefault","returnValue","stopPropagation","cancelBubble","eventhash","events","attachEvent","event","srcElement","orig","detachEvent","Events","_files","zIndex","directory","onChange","cloneNode","replaceChild","getFiles","shim","_hasFiles","dataTransfer","_extractExts","_isAcceptable","_allowedExts","_readItems","entries","entry","webkitGetAsEntry","isFile","getAsFile","_readEntries","cbcb","_readEntry","isDirectory","_readDirEntry","dirEntry","getEntries","dirReader","readEntries","moreEntries","createReader","dropZone","dropEffect","_toBinary","_convertToBinary","_preloadAndSend","fr","_getNativeXHR","progIDs","ActiveXObject","_getDocument","rXML","rText","validateOnParse","loadXML","parseError","tagName","_prepareMultipart","fd","crlf","_filename","isGecko2_5_6","isAndroidBrowser","mustSendAsBinary","onreadystatechange","ui8a","buffer","getStatus","getResponse","disposition","idx","mv","II","sum","bin","abs","putstr","segment","write","binData","SEGMENT","BYTE","SHORT","LONG","SLONG","STRING","BinaryReader","JPEGHeaders","marker","hex","restore","strip","jpegHeaders","purge","set","extractTags","IFD_offset","tags2extract","values","hash","offsets","tiffHeader","tagDescs","getIFDOffsets","IFD0","Tiff","tiff","exifIFD","ExifIFDPointer","gpsIFD","GPSInfoIFDPointer","setTag","ifd","tagOffset","valueOffset","tmpTags","274","270","271","272","34665","34853","exif","36864","40961","40962","40963","36867","33434","33437","34855","37377","37378","37383","37384","37385","37386","41986","41987","41990","41988","41992","41993","41994","gps","0","3","4","ColorSpace","MeteringMode","5","6","255","LightSource","9","10","11","12","13","14","15","17","18","19","20","21","22","23","24","Flash","16","25","29","31","32","65","69","71","73","77","79","89","93","95","ExposureMode","WhiteBalance","SceneCaptureType","Contrast","Saturation","Sharpness","GPSLatitudeRef","N","S","GPSLongitudeRef","E","W","TIFF","EXIF","Exif","ExifVersion","exifVersion","GPS","GPSVersionID","setExif","getBinary","ExifParser","JPEG","binstr","_getDimensions","_binstr","_br","_purge","_ep","_hm","_info","hasExif","writeHeaders","stripHeaders","PNG","_getChunkAt","CRC","signature","_cs","renderImageToCanvas","iw","naturalWidth","ih","naturalHeight","ctx","detectSubsampling","tmpCanvas","tmpCtx","vertSquashRatio","detectVerticalSquash","sy","sh","sx","sw","clearRect","drawImage","dx","dw","dy","dh","getImageData","ey","py","ratio","isSubsampled","renderTo","ImageInfo","MegaPixel","HTML5Image","_getImg","_canvas","_toDataUrl","_preload","_readAsDataUrl","_downsize","scale","destWidth","destHeight","orientation","_preserveHeaders","Orientation","tmp","_rotateToOrientaion","_drawToCanvas","_modified","rotate","PI","_imgInfo","_binStr","me","loadFromBlob","asBinary","loadFromImage","toDataURL","PixelXDimension","PixelYDimension","getShimVersion","plugins","description","e1","GetVariable","e2","FlashRuntime","initTimer","html","outerHTML","clearTimeout","FlashBlob","_formatData","_result","appendBlob","attachBlob","blobField","attachedBlob","frs","upload_complete_flag","srcBlob","isInstalled","actualVer","actualVerArray","reqVerArray","requiredVersionPart","actualVersionPart","isVersionSupported","control","IsVersionSupported","plugin","pop","SilverlightRuntime","Moxie","dragEnter","dragDrop","grps","rawInfo","grp","keys","Html4Runtime","addInput","currForm","form","_mimes","fontSize","opacity","cleanup","inputs","hasFile","_iframe","getElementsByTagName","getAttribute","children","_status","_response","hidden","insertBefore","temp","firstChild","contentWindow","contentDocument","frames","submit","execCommand","moxie","core","utils","addAlias","ns","itemType","Exceptions","L5uX","LFXr","accessid","policyBase64","expire","uploadfilename","getParam","policy","dir","random_string","chars","maxPos","pwd","imgURL","URL","createObjectURL","reader","send_request","suffix","uploader","OSSAccessKeyId","success_action_status","select","PostInit","FilesAdded","now","BeforeUpload","UploadProgress","FileUploaded","LJ/l","_catalog","_catalog2","tagsshow","create","image","articlename","control_id","oldname","oldimg","oldurl","oldauthor","share","share_id","articletype","tagsVal","intro","agree","reg_img","reg_name","reg_type","reg_control","reg_old_name","reg_old_url","reg_old_author","reg_old_img","reg_share","reg_status","reg_level","reg_tag","reg_intro","reg_img_con","reg_name_con","reg_control_con","reg_old_name_con","reg_old_url_con","reg_old_img_con","reg_old_author_con","reg_share_con","reg_type_con","reg_status_con","reg_level_con","reg_tag_con","reg_intro_con","focus","blur","cancel","agreeSwitch","selctEnter","selctOut","typeShowValue","attr","statusShowValue","levelShowValue","controlShowValue","shareShowValue","tagsshowOpen","find","deleteTag","dataset","enter","tagsSelect","old_uploaded","save","original_title","original_url","original_img_url","original_author","refreshCatalog","watch","updated","css","labels","typeShow","statusShow","My/L","uploadImg_uploaded","z-limit","mouseover","mouseout","data-control_id","data-share_id","data-id","data-audit_status","data-level_id","z-select","NEzH","Nza8","OTwL","PCXR","deleteChapter","POwH","commentIndex","commentSize","subPageSize","reply_comment_id","PSXG","PoJi","banner","chapaterEdit","chapaterEdit_edit","PwTI","QZz9","z-unread","avatar_utl","cite","RS2Z","V9fN","VANs","VHTH","VVx8","W0Us","Wbri","_stringify2","_stringify","YW4o","amd","cmd","jQuery","wangEditor","alert","elem","$elem","valueNodeName","$valueContainer","$prev","prev","$parent","$body","$document","$window","w3cRange","createRange","hostname","websiteHost","isOnWebsite","docsite","_plugins","initDefaultConfig","addEditorContainer","addTxt","addMenuContainer","menus","commandHooks","ready","readyFns","readyHeadler","fns","updateValue","editor","$txt","val","getInitValue","currentValue","updateMenuStyle","menu","updateSelected","enableMenusExcept","menuIds","_disabled","disableMenusExcept","hideDropPanelAndModal","dropPanel","dropList","modal","hide","emptyFn","ieRange","currentRange","cr","_rangeData","collapseRange","range","opt","collapse","getRangeText","getRangeElem","dom","commonAncestorContainer","isRangeEmpty","startContainer","endContainer","startOffset","endOffset","saveSelection","_parentElem","selection","getSelection","getRangeAt","rangeCount","contains","restoreSelection","removeAllRanges","addRange","restoreSelectionByElem","setRangeByElem","initSelection","$firstChild","first","txtElem","firstTextNode","lastTextNode","lastChild","setStart","setEnd","textContent","parentElement","setEndPoint","insertHtml","targetElem","rangeElem","getLegalTags","after","command","commandName","commandValue","commandFn","queryCommandSupported","hooks","customCommand","commandForElem","elemOpt","selector","check","getSelfOrParentByName","hidePanelAndModal","undoRecord","insertEmptyP","wrapImgAndText","queryCommandValue","queryCommandState","_matchesSelectorForIE","$elems","matchesSelector","legalTags","webkitMatchesSelector","mozMatchesSelector","oMatchesSelector","_getRedoList","_redoList","_getUndoList","_undoList","_handle","redo","undo","undoList","redoList","addMenus","renderMenus","renderMenuContainer","renderTxt","renderEditorContainer","eventMenus","eventMenuContainer","eventTxt","removeAttr","enable","$editorContainer","undestroy","$menuContainer","menuContainer","clear","MenuContainer","changeShadow","appendMenu","groupIdx","_addGroup","_addOneMenu","$menuGroup","$currentGroup","currentGroupIdx","$menuNormal","$domNormal","$menuSelected","$domSelected","$item","_id","Menu","commandNameSelected","commandValueSelected","initUI","uiConfig","UI","menuId","menuUI","normal","selected","$menuItem","onRender","_renderTip","$tip","$tempDiv","$triangle","tipWidth","titleWidth","outerWidth","currentWidth","currentMarginLeft","margin-left","timeoutId","active","bindEvent","clickEvent","clickEventCustom","dropObj","isShowing","clickEventSelected","updateSelectedEvent","changeSelectedState","_activeState","activeStyle","$dom","DropList","tpl","selectorForELemCommand","beforeEvent","afterEvent","initDOM","initHideEvent","itemContent","$list","thisList","menuDom","scroll","_render","rendered","_position","$menuDom","menuPosition","menuTop","menuLeft","menuHeight","menuWidth","listWidth","txtWidth","marginLeft","valWithTxt","_isMenufixed","outerHeight","DropPanel","$content","$panel","thisPanle","panelWidth","marginLeft2","focusFirstInput","$input","placeholderForIE8","Modal","initDom","$modal","$close","zindex","marginTop","sTop","margin-top","Txt","contentEmptyHandle","bindEnterForDiv","bindEnterForText","bindTabEvent","bindPasteFilter","bindFormatText","bindHtml","$p","txtHtml","divHandler","$keydownDivElem","$pElem","$targetElem","handle","childNodesClone","childNodes","legalTagArr","resultHtml","removeAttrs","htmlForP","htmlForLi","$li","attributes","attrNames","exception","removeAttribute","pasteFilter","currentNodeName","pasteHtml","$paste","docSplitHtml","clipboardData","originalEvent","ieData","pasteText","getData","link","clearEmptyOrNestP","regArr","reg","formatText","$temp","matchStr","c","change","txtChangeEventNames","initHeight","valueContainerHeight","txtHeight","initMaxHeight","$wrap","maxHeight","fullscreen","useMaxHeight","max-height","overflow-y","min-height","wrap","saveSelectionEvent","saveSync","dt","saveAync","off","updateValueEvent","doOnchange","updateMenuStyleEvent","$children","last","childNode","$imgs","childrenLength","showHeightOnHover","addAndShowTip","$target","isTipInTxt","paddingTop","marginBottom","paddingBottom","removeTip","valueOf","printLog","$container","langs","bold","underline","italic","forecolor","bgcolor","strikethrough","eraser","quote","fontfamily","fontsize","head","orderlist","unorderlist","alignleft","aligncenter","alignright","unlink","table","emotion","uploadImg","linkImg","video","loading","searchlocation","dynamicMap","clearLocation","langDynamicOneLocation","insertcode","openLink","en","menuFixed","jsFilter","lang","colors","#880000","#800080","#ff0000","#ff00ff","#000080","#0000ff","#00ffff","#008080","#008000","#808000","#00ff00","#ffcc00","#808080","#c0c0c0","#000000","#ffffff","familys","fontsizes","emotionsShow","emotions","weibo","icon","mapAk","uploadImgUrl","uploadTimeout","uploadImgFns","customUpload","uploadParams","uploadHeaders","hideLinkImg","codeDefaultLang","createMenuFns","createMenu","createMenuFn","$code","$codeTextarea","isShowCode","txtOuterHeight","prepend","indent","$edit","Yh7g","YmXF","dibP","e1CJ","hasScroll","e4Z7","eBru","_typeof2","_typeof3","invite_code","repasswrd","newpassword","renewpassword","pwd_err_times","phone","c_age","fans_count","opus_count","gender","pic_code","pic_vid","pic_vcode","phone_vcode","isCodeCan","isPhoneCan","isReset","isUpdate","isRegister","isUnboundPhone","isreBindPhone","user_setState","_key","user_setTime","user_setUserInfo","user_getPicVerifyCode","getPicVerifyCode","user_getPhoneVerifyCode","getPhoneVerifyCode","verifyType","phoneNum","picVcode","picVid","timer","setInterval","clearInterval","user_sigin","sigin","phone_num","device_no","expires","isSave","user_sigup","sigup","user_backPwd","resetPwd","user_resetPwd","user_updateUserInfo","updateUserInfo","user_getUserInfo","user_ourlogin","user_unboundPhone","unboundPhone","user_reBindPhone","reBindPhone","eemp","euaV","uploadImg_error","gnCm","z-man","z-wen","data-catalog_id","is_collected","hyrZ","_auth","auth_setState","auth_setLists","auth_setCode","auth_getFollowList","auth_getFansList","auth_getUserList","auth_getBlackList","auth_delBlack","auth_addBlack","auth_addFollow","auth_delFollow","auth_getRecommendUserList","getRecommendUserList","auth_getActiveUserList","getActiveUserList","auth_getInviteCode","getInviteCode","iK2G","z-width","iyE5","cpm_hide","data-type","radioSwitch","comfire","complete","comfireAll","jZOH","jz42","kZEp","EventHub","kfRd","pages","dist","_arr","isloadmore","right","lI/H","lqD5","m127","level0","level1","level2","isHas","catalog_history","mxKd","edit_init","imgHtml","update","publish","scan","group","nFjh","nL7d","z-active","nTmf","oIMG","getHomeBanner","getPolicyAndAccess","addFeedback","oZeH","or+c","_vue","_vue2","_vuex2","_bubble","_bubble2","_user2","_auth2","_opus2","_common","_common2","_message2","use","store","Store","bubble","prCX","transform","r28Z","rGUt","_default","timeClose","dialog","align","btn","adv","copy","other","outlogin","bubble_setState","bubble_showBubble","bubble_closeBubble","bubble_success","bubble_fail","attach","popup","rgvm","s/ku","authorSwitch","sEEq","sUpd","siit","t/6I","tftU","vvc1","whrU","setHash","getHash","u","getHashModelName","getHashActionName","getHashParam","getParams","param","paramArr","l","decodeUrl","urlObj","decodedParam","protocol","s","seg","relative","segments","replaceParam","forceReplace","replaceParams","urlStr","orginUrl","paramData","keyVal","getHashObj","theRequest","getParamsObj","getUrlObj","makeUrl","keepOld","paramStr","hashStr","paramObj","hashObj","addUrlParam","addDebugParam","mdebug","xTQR","xbkL","banner_images","access","common_setBannerList","common_switch","common_access","common_getHomeBanner","common_getPolicyAndAccess","common_addFeedback","img_url","common_addReport","report_reason","add_reason","xyAH","yStd","yfst","zgUS","zlOF","ztWJ"],"mappings":"AAAAA,cAAc,IAERC,OACA,SAAUC,EAAQC,EAASC,GAEjC,YAGAC,QAAOC,eAAeH,EAAS,cAC3BI,OAAO,GCodX,IAAAC,GAAAJ,EAAA,QAEAK,EAAAL,EAAA,QD/cIM,EAEJ,SAAgCC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,IAFjDF,EAItCN,GAAQU,SACJC,KC4cJ,SD3cIC,KAAM,WACF,OC6cRC,OAAAN,EAAAG,QD3cYI,YC4cZ,ED3cYC,aC6cZ,KDzcIC,OAAQ,YC2cZ,WD1cIC,UAAU,EAAIZ,EAAMa,WAChBC,KAAM,SAAcC,GAChB,MAAOA,GAAMD,KC0czBE,MDxcQC,OAAQ,WAEJ,MAAO,MADIC,SAASC,SAASC,QAAQ,uBAAyB,EAAI,qBCyc9E,uBDxciC,UAAYC,KCyc7CX,cDvcQY,IAAK,WACD,OACIC,MCychB,eDxcgBC,KCychB,cDxcgBC,ICychB,aDxcgBC,MCychB,eDxcgBC,SCychB,kBDxcgBC,OAAQ,8BAAgCP,KAAKQ,OAAOd,MAAMD,KAAKE,KCyc/Ec,IDxcgBC,QCychB,0BDxcgBC,OCychB,wBDxcgBC,QCychB,yBDxcgBC,WCychB,4BDxcgBC,KAAM,4BAA8BC,mBAAmBC,OAAOnB,SC0c9EoB,QDvcQC,OAAQ,WAGJ,IAAK,GAFDA,MACAC,EAAOnB,KAAKQ,OAAOd,MAAM0B,QAAQF,OCycjDC,KDxcqBE,EAAI,EAAGC,EAAMH,EAAKI,OAAQF,EAAIC,EAAKD,IACxCH,EAAO,UAAYC,EAAKE,GAAGG,cAAgBL,EAAKE,GCychEI,YDpcY,QAHIP,EAAOQ,SAAW,GAAKR,EAAOS,SAAW,GAAKT,EAAOU,SAAW,KAChE5B,KAAKZ,YCycrB,GAEA8B,KDtcIW,SACIC,QAAS,WACe,UAAhB9B,KAAK+B,QACL/B,KAAKgC,UAAUC,MAAM,iBACjBC,MAAOlC,KC0c3BX,eDvcgBQ,SAASoB,KAAOjB,KCychCJ,QDtcQuC,YAAa,WC0crB,GAAAC,GAAApC,KDvcgBqC,EAAiBrC,KAAKsC,SCwctCC,SDvcgB5C,EAAOK,KAAKwC,OAAOC,SAASJ,EAAeK,IAAKL,ECwchEM,QDvcY,IAAIhD,EAIA,MAHAK,MAAKQ,OAAOoC,SAAS,mBAAoBjD,GAAMkD,KAAK,SAAUC,GAC1DV,EAAMnC,IAAIM,OAAS,8BAAgC6B,EAAM3C,KCwc7EgB,OAEA,CDtcYT,MAAKQ,OAAOoC,SAAS,uBCycjCC,KAAA,SAAAC,GDxcgBV,EAAMnC,IAAIM,OAAS,8BAAgC6B,EAAM3C,KC4czEgB,ID1cgB2B,EAAMI,OAAOO,SAASV,EAAeK,IAAKI,EAAKT,EAAeM,QAASN,EC4cvFW,MD1cgBZ,EAAM5B,OAAOoC,SAAS,iBC2ctCE,KD1ceG,MAAM,SAAUC,GACfd,EAAM5B,OAAOoC,SAAS,cC2ctCM,MDxcQC,SAAU,WACNnD,KAAKoD,YC4cjB,ED3cYpD,KAAKwC,OAAOa,YAAYrD,KAAKsC,SAASC,SC4clDG,KD3cY1C,KAAKQ,OAAOoC,SC4cxB,kBD1cQU,aAAc,WACVtD,KAAKoD,YC6cjB,ED5cYpD,KAAKQ,OAAOoC,SAAS,iBC6cjC,ID3cQW,iBAAkB,WC8c1B,GAAAC,GAAAxD,ID3cYA,MAAKQ,OAAOoC,SAAS,+BC6cjCC,KAAA,SAAAC,GD5cgBU,EAAOhD,OAAOoC,SAAS,iBC8cvCE,KD7ceG,MAAM,SAAUC,GACfM,EAAOhD,OAAOoC,SAAS,cC8cvCM,OD1cIO,QAAS,WC8cb,GAAAC,GAAA1D,ID3cQA,MAAKgC,UAAU2B,IAAI,mBAAoB,SAAUC,GAC7CF,EC6cZH,qBD1cQvD,KAAKX,aAAewE,mBAAmB7D,KAAK8D,KAAKC,YAAY,WCgdrE,GD9cQ/D,KCidRmC,cD/cQnC,KCgdRuD,sBD1cMS,OACA,SAAU3F,EAAQC,KAMlB2F,OACA,SAAU5F,EAAQC,GE7IxBD,EAAAC,SAAgB4F,OAAA,WAAmB,GAAAC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OACAE,YAAA,aACGF,EAAA,OACHE,YAAA,qBACGF,EAAA,OACHE,YAAA,SACGF,EAAA,KACHG,OACAxD,KAAAkD,EAAAlE,IAAAC,WAEGiE,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,SACGF,EAAA,KACHE,YAAA,OACAG,OACAC,OAAA,SAAAT,EAAAU,WAEAJ,OACAxD,KAAAkD,EAAAlE,IAAAC,SAEGiE,EAAAO,GAAA,QAAAP,EAAAO,GAAA,KAAAJ,EAAA,KACHE,YAAA,OACAG,OACAC,OAAA,QAAAT,EAAAU,WAEAJ,OACAxD,KAAAkD,EAAAlE,IAAAE,QAEGgE,EAAAO,GAAA,UAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,WACGF,EAAA,SACHQ,aACA7F,KAAA,QACA8F,QAAA,UACArG,MAAAyF,EAAA,aACAa,WAAA,iBAEAP,OACAQ,KAAA,OACAC,YAAA,MAEAC,UACAzG,MAAAyF,EAAA,cAEAiB,IACAC,MAAA,SAAAC,GACA,eAAAA,KAAAnB,EAAAoB,GAAAD,EAAAE,QAAA,YAA2E,WAC3ErB,GAAArC,QAAAwD,IAEAG,MAAA,SAAAH,GACAA,EAAAI,OAAAC,YACAxB,EAAA9E,aAAAiG,EAAAI,OAAAhH,WAGGyF,EAAAO,GAAA,KAAAJ,EAAA,KACHG,OACAxD,KAAA,sBAEAmE,IACAQ,MAAAzB,EAAArC,WAEGwC,EAAA,YAAAH,EAAAO,GAAA,KAAAP,EAAA1E,KAAA,QAAA6E,EAAA,OACHE,YAAA,YACGF,EAAA,KACHE,YAAA,8BACAC,OACAxD,KAAAkD,EAAAlE,IAAAa,QAEGqD,EAAAO,GAAA,UAAAP,EAAA0B,KAAA1B,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,SACGL,EAAA1E,KAAAqG,QAUAxB,EAAA,OACHE,YAAA,WACGF,EAAA,OACHE,YAAA,wCACGF,EAAA,OACHE,YAAA,2BACGL,EAAAO,GAAA,KAAAP,EAAA,WAAAG,EAAA,OACHE,YAAA,8BACGL,EAAA0B,KAAA1B,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,8BACGF,EAAA,MACHE,YAAA,wBACGF,EAAA,MACHE,YAAA,uBACGF,EAAA,KACHG,OACAxD,KAAAkD,EAAAlE,IAAAU,UAEG2D,EAAA,QACHE,YAAA,sDACGL,EAAAO,GAAA,KAAAJ,EAAA,QACHE,YAAA,sDACGL,EAAAO,GAAA,QAAAP,EAAAO,GAAA,KAAAP,EAAAjD,OAAAQ,UAAA,GAAAyC,EAAAjD,OAAAQ,SAAA4C,EAAA,QACHE,YAAA,wDACGL,EAAAO,GAAA,IAAAP,EAAA4B,GAAA5B,EAAAjD,OAAAQ,aAAAyC,EAAA0B,SAAA1B,EAAAO,GAAA,KAAAJ,EAAA,MACHE,YAAA,uBACGF,EAAA,KACHG,OACAxD,KAAAkD,EAAAlE,IAAAW,WAEG0D,EAAA,QACHE,YAAA,sDACGL,EAAAO,GAAA,KAAAJ,EAAA,QACHE,YAAA,sDACGL,EAAAO,GAAA,SAAAP,EAAAO,GAAA,KAAAP,EAAAjD,OAAAS,UAAA,GAAAwC,EAAAjD,OAAAS,SAAA2C,EAAA,QACHE,YAAA,wDACGL,EAAAO,GAAA,IAAAP,EAAA4B,GAAA5B,EAAAjD,OAAAS,aAAAwC,EAAA0B,SAAA1B,EAAAO,GAAA,KAAAJ,EAAA,MACHE,YAAA,uBACGF,EAAA,KACHG,OACAxD,KAAAkD,EAAAlE,IAAAY,cAEGyD,EAAA,QACHE,YAAA,sDACGL,EAAAO,GAAA,KAAAJ,EAAA,QACHE,YAAA,sDACGL,EAAAO,GAAA,UAAAP,EAAAO,GAAA,KAAAP,EAAAjD,OAAAU,UAAA,GAAAuC,EAAAjD,OAAAU,SAAA0C,EAAA,QACHE,YAAA,wDACGL,EAAAO,GAAA,IAAAP,EAAA4B,GAAA5B,EAAAjD,OAAAU,aAAAuC,EAAA0B,eAAA1B,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,wCACGF,EAAA,OACHE,YAAA,yBACAwB,OACAC,mBAAA,QAAA9B,EAAA1E,KAAAyG,WAAA/B,EAAA1E,KAAAyG,WAAA/B,EAAAhF,QAAA,OAEGgF,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,8BACGF,EAAA,MACHE,YAAA,wBACGF,EAAA,MACHE,YAAA,uBACGF,EAAA,KACHG,OACAxD,KAAAkD,EAAAlE,IAAAM,UAEG+D,EAAA,QACHE,YAAA,sDACGL,EAAAO,GAAA,KAAAJ,EAAA,QACHE,YAAA,sDACGL,EAAAO,GAAA,cAAAP,EAAAO,GAAA,KAAAJ,EAAA,MACHE,YAAA,uBACGF,EAAA,KACHG,OACAxD,KAAAkD,EAAAlE,IAAAS,WAEG4D,EAAA,QACHE,YAAA,sDACGL,EAAAO,GAAA,KAAAJ,EAAA,QACHE,YAAA,sDACGL,EAAAO,GAAA,cAAAP,EAAAO,GAAA,KAAAJ,EAAA,MACHE,YAAA,qBACAY,IACAQ,MAAAzB,EAAAb,gBAEGgB,EAAA,KACHG,OACAxD,KAAA,yBAEGqD,EAAA,QACHE,YAAA,sDACGL,EAAAO,GAAA,KAAAJ,EAAA,QACHE,YAAA,sDACGL,EAAAO,GAAA,cAAAP,EAAAO,GAAA,KAAAJ,EAAA,MACHE,YAAA,qBACAY,IACAQ,MAAAzB,EAAAhB,YAEGmB,EAAA,KACHG,OACAxD,KAAA,yBAEGqD,EAAA,QACHE,YAAA,sDACGL,EAAAO,GAAA,KAAAJ,EAAA,QACHE,YAAA,sDACGL,EAAAO,GAAA,sBAnHAJ,EAAA,OACHE,YAAA,QACGF,EAAA,KACHG,OACAxD,KAAAkD,EAAAlE,IAAAK,YAEG6D,EAAAO,GAAA,QAAAJ,EAAA,QAAAH,EAAAO,GAAA,OAAAJ,EAAA,KACHG,OACAxD,KAAAkD,EAAAlE,IAAAI,SAEG8D,EAAAO,GAAA,cAyGAP,EAAAO,GAAA,KAAAJ,EAAA,iBACF6B,qBFmJKC,OACA,SAAU/H,EAAQC,EAASC,GG7UjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,SHsVMgI,OACA,SAAUjI,EAAQC,EAASC,GAEjC,cAC4B,SAASgI,GAErC/H,OAAOC,eAAeH,EAAS,cAC3BI,OAAO,GInGX,IAAAC,GAAAJ,EAAA,QAEAK,EAAAL,EAAA,QJwGIM,EAEJ,SAAgCC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,IAFjDF,EAItCN,GAAQU,SACJE,KAAM,WACF,OI1GRC,OAAAN,EAAAG,QJ4GYwH,SI3GZ,GJ4GYC,aI3GZ,EJ4GYvE,MI3GZ,GJ4GY2C,UI3GZ,EJ4GY6B,SI1GZ,IJ6GIpH,OAAQ,UAAW,WAAY,WI3GnC,gBJ4GIC,UAAU,EAAIZ,EAAMa,WAChBmH,QAAS,SAAiBjH,GACtB,MAAOA,GAAMkH,KI5GzBD,SJ8GQE,IAAK,SAAanH,GACd,MAAOA,GAAMkH,KI9GzBE,UJgHQrH,KAAM,SAAcC,GAChB,MAAOA,GAAMD,KI/GzBE,QJkHIkC,SACIkF,WAAY,SAAoBlC,GAC5B,GAAI7E,KAAK6E,WAAaA,EAClB,OIjHhB,CJmHY7E,MAAK6E,UIjHjBA,EJkHY7E,KIjHZgH,WJmHQC,cAAe,WACXjH,KAAKyG,aAAezG,KIjHhCyG,aJmHQS,OAAQ,SAAgBC,GACpB,GAAIC,GIjHhBpH,IJkHYA,MAAKQ,OAAOoC,SAAS,qBACjByE,MIjHhB,EJkHgBpC,KIjHhB,OJkHgBqC,MACIC,MIjHpB,SJkHoBC,QIjHpB,iBJkHoBC,UAAW,WACPL,EAAKM,WIjH7BP,QJsHQQ,eAAgB,SAAwB1C,GI5GhD,GAAA7C,GAAApC,IJ+GYA,MAAKQ,OAAOoC,SAAS,uBACjBqC,KAAQA,GAAQjF,KAAK4H,UI9GrC,GJ+GgBC,QACIC,WI9GpB,IJ+GoBC,KAAQ/H,KI9G5B6E,UJ+GoB6B,SAAY1G,KI7GhC0G,UJ8GgBsB,MACIC,MAAyB,QAAhBjI,KAAK+B,QAAoB/B,KAAKwG,SI7G3D,GJ8GoB0B,aAAgBlI,KI7GpCkI,aJ8GoBC,QAA4B,WAAjBnI,KAAKoI,SAAwBpI,KAAKmI,QI7GjE,GJ8GoBE,YAAerI,KAAKkC,OI5GxC,MAZAW,KAAA,SAAAC,GJ0HgBV,EAAMH,MAAM,gBAAiBG,EAAMuE,QI3GnD2B,OJ6GgBlG,EAAM5B,OAAOoC,SAAS,iBI5GtCE,KJ6GeG,MAAM,SAAUC,GACfd,EAAM5B,OAAOoC,SAAS,cI5GtCM,MJ+GQqF,iBAAkB,WI3G1B,GAAA/E,GAAAxD,IJ8GY,KAAKA,KAAKP,KAAKqG,SAA2B,SAAhB9F,KAAK+B,QAE3B,MADAyG,SAAQC,II7GxB,0CACA,CJ+GYzI,MAAKQ,OAAOoC,SAAS,yBACjBkF,WI7GhB,IJ8GgBC,KAAQ/H,KI7GxB6E,UJ8GgB6B,SAAY1G,KI7G5B0G,WAAA7D,KAAA,SAAAC,GJ8GgBU,EAAOvB,MAAM,gBAAiBuB,EAAOmD,QI3GrD2B,OJ6GgB9E,EAAOhD,OAAOoC,SAAS,iBI5GvCE,KJ6GeG,MAAM,SAAUC,GACfM,EAAOhD,OAAOoC,SAAS,cI5GvCM,MJ+GQwF,iBAAkB,WI5G1B,GAAAhF,GAAA1D,IJ+GYA,MAAKQ,OAAOoC,SAAS,yBACjBkF,WI9GhB,IJ+GgBC,KAAQ/H,KI9GxB6E,UJ+GgB6B,SAAY1G,KI9G5B0G,WAAA7D,KAAA,SAAAC,GJgHgBY,EAAOlD,OAAOoC,SAAS,iBI5GvCE,KJ6GeG,MAAM,SAAUC,GACfQ,EAAOlD,OAAOoC,SAAS,cI5GvCM,MJ+GQyF,QAAS,WACL3I,KI5GZ6E,YJ6GY7E,KI5GZgH,WJ8GQA,QAAS,WI5GjB,GAAA4B,GAAA5I,IJ+GY,IAAoB,QAAhBA,KAAK+B,QACL/B,KI9GhB0I,uBJ+GmB,IAAoB,WAAhB1I,KAAK+B,QI7G5B,CJ8GgB,GAAI8G,GAAgB7I,KAAKsC,SI7GzCwG,QJ8GoBA,EAAU9I,KAAKwC,OAAOC,SAASoG,EAAcnG,IAAKmG,EI7GtElG,SJ8GoBoG,EAAQD,EAAQE,OAAOhJ,KAAK6E,UAAY,GAAK7E,KAAK0G,SAAU1G,KAAK0G,SAAW1G,KI7GhG6E,UJ8GgB7E,MAAKQ,OAAOoC,SAAS,mBACjBmG,MI7GpBA,EJ8GoBT,MAAOQ,EI7G3BvH,SAFAsB,KAAA,SAAAC,GJiHoB8F,EAAO3G,MAAM,gBAAiB2G,EAAOjC,QI7GzD2B,aJ+GuBtI,MAAKP,KAAKgB,KAAOT,KAAKP,KAAKgB,KAAOT,KAAKmI,QAC9CnI,KI7GhBuI,mBJ+GgBvI,KI7GhB2H,kBJgHQsB,aAAc,SAAsBC,GI7G5C,GAAAC,GAAAnJ,KJgHgBmH,EAAYZ,EAAE2C,EAAEE,eAAeC,QAAQ,uBAAuBnK,KI/G9E,aJgHYc,MAAKQ,OAAOoC,SAAS,qBACjBuE,UI/GhBA,IADAtE,KAAA,SAAAC,GJkHgBqG,EI9GhBnC,UJgHgBmC,EAAO3I,OAAOoC,SAAS,iBI/GvCE,KJgHeG,MAAM,SAAUC,GACfiG,EAAO3I,OAAOoC,SAAS,cI/GvCM,MJkHQwE,WAAY,SAAoBP,GI/GxC,GAAAmC,GAAAtJ,IJkHYA,MAAKQ,OAAOoC,SAAS,mBACjBuE,UIjHhBA,IADAtE,KAAA,SAAAC,GJoHgBwG,EIhHhB3B,iBJkHgB2B,EAAO9I,OAAOoC,SAAS,iBIjHvCE,KJkHeG,MAAM,SAAUC,GACfoG,EAAO9I,OAAOoC,SAAS,cIjHvCM,MJoHQqG,WAAY,SAAoBC,GAG5B,IAAK,GAFDX,GAAgB7I,KAAKsC,SIjHrCwG,QJkHgBC,EAAQ/I,KAAKwC,OAAOC,SAASoG,EAAcnG,IAAKmG,EIjHhElG,SJkHqBtB,EAAI,EAAGC,EAAMyH,EAAMxH,OAAQF,EAAIC,EAAKD,IACzC,GAAI0H,EAAM1H,GAAGmI,YAAcA,EIjH3C,CJkHoBT,EAAMU,OAAOpI,EIjHjC,EACA,OJoHYrB,KAAKwC,OAAOO,SAAS8F,EAAcnG,IAAKqG,EAAOF,EAAclG,QAASkG,EIjHlF7F,MJkHYhD,KIjHZgH,YJoHI0C,QAAS,WIjHb,GAAAC,GAAA3J,IJoHQA,MAAKgC,UAAU2B,IAAI,gBAAiB,SAAUC,GAC1C,GAAI+F,EAAOzH,OAAS0B,EAAO1B,MACvB,OInHhB,CJqHYyH,GAAOzH,MAAQ0B,EInH3B1B,MJoHYyH,EInHZ3C,YJsHQhH,KAAKgC,UAAU2B,IAAI,8BAA+B,SAAUC,GACxD+F,EInHZ3C,aJsHIvD,QAAS,WIlHb,GAAAmG,GAAA5J,IJ0IQ,IArBAuG,EAAEvF,QAAQoE,GAAG,SAAU,SAAU8D,GAC7B,GAAI3C,EAAE,oBAAoBhF,QAAU,EAChC,OIpHhB,CJsHY,IAAIsI,GAAMtD,EAAEvF,QIpHxB8I,YJqHgBC,EAASxD,EAAEvF,QIpH3B+I,QJqHuBxD,GAAE,oBAAoByD,SIpH7CH,IJqHuB,IAAMA,EAAME,GACnBH,EIpHhBjB,YJwHQ3I,KAAKkC,MAAQ2B,mBAAmB7D,KAAK8D,KAAKC,YInHlD,UJoHQ/D,KAAKmI,QAAUnI,KAAK8D,KAAKC,YInHjC,WJoHQ/D,KAAKwG,SAAWxG,KAAK8D,KAAKC,YIjHlC,YJmHQ/D,KAAKiK,OAAO,YAAa,SAAUC,EAAQC,GACvCnK,KAAK6E,UIlHjB,EJmHY7E,KAAK2H,eIlHjB,WJqHa3H,KAAKwG,UAA4B,QAAhBxG,KAAK+B,QASvB,MARA/B,MAAKQ,OAAOoC,SAAS,qBACjByE,MIjHhB,EJkHgBpC,KIjHhB,MJkHgB4E,KACIO,OIjHpB,SJkHoBC,II/GpB,WACA,CJoHQrK,MIjHRgH,cJoH6BsD,KAAKhM,EAASC,EAAoB,UAIzDgM,OACA,SAAUlM,EAAQC,GKxlBxBD,EAAAC,SAAgB4F,OAAA,WAAmB,GAAAC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OACAE,YAAA,mBACGF,EAAA,OACHE,YAAA,wBACGL,EAAAqG,GAAArG,EAAAsG,QAAA,eAAAvL,EAAAgB,GACH,MAAAoE,GAAA,OACAE,YAAA,wBACKF,EAAA,KACLE,YAAA,OACAC,OACAxD,KAAA,kCAAAkD,EAAAqF,WAAA,eAAAtK,EAAAwL,cAEKpG,EAAA,OACLE,YAAA,wBACKF,EAAA,OACLE,YAAA,cACKL,EAAAO,GAAAP,EAAA4B,GAAA7G,EAAAyL,kBAAAxG,EAAAO,GAAA,KAAAxF,EAAA,MAAAoF,EAAA,OACLE,YAAA,YACKL,EAAAO,GAAA,UAAAP,EAAA0B,OAAA1B,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,2BACKF,EAAA,OACLE,YAAA,gBACKL,EAAAO,GAAAP,EAAA4B,GAAA7G,EAAA0L,iBAAAzG,EAAAO,GAAA,QAAAxF,EAAA2L,OAAA,GAAA3L,EAAA4L,eAAAxG,EAAA,KACLE,YAAA,wCACAC,OACAxD,KAAA,kCAAAkD,EAAAqF,WAAA,eAAAtK,EAAAwL,cAEKvG,EAAAO,GAAA,UAAAP,EAAA0B,KAAA1B,EAAAO,GAAA,QAAAxF,EAAA2L,MAAAvG,EAAA,KACLE,YAAA,0CACAC,OACAxD,KAAA,uBAEAmE,IACAQ,MAAA,SAAAN,GACAnB,EAAA+C,OAAAhI,EAAAwL,gBAGKvG,EAAAO,GAAA,UAAAP,EAAA0B,KAAA1B,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,kBACKF,EAAA,MAAAA,EAAA,QAAAH,EAAAO,GAAAP,EAAA4B,GAAA7G,EAAA6L,mBAAA5G,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,mBACKF,EAAA,MAAAA,EAAA,QAAAH,EAAAO,GAAAP,EAAA4B,GAAA7G,EAAA8L,sBAAA7G,EAAAO,GAAA,KAAAxF,EAAA,WAAAoF,EAAA,OACLE,YAAA,4BACKF,EAAA,KACLG,OACAxD,KAAA,aAEKkD,EAAA0B,KAAA1B,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,iBAEGL,EAAAO,GAAA,KAAAP,EAAAsG,QAAAnC,OAAA,EAAAhE,EAAA,SAAAH,EAAA0B,MAAA,GAAA1B,EAAAO,GAAA,KAAAJ,EAAA,QACHG,OACA6D,MAAAnE,EAAAsG,QAAAnC,MACA/G,OAAA4C,EAAAuC,SACAxG,MAAAiE,EAAAU,WAEAO,IACA6F,YAAA9G,EAAA4C,eAEG,IACFZ,qBL8lBK+E,OACA,SAAU7M,EAAQC,GM5pBxBD,EAAAC,SAAgB4F,OAAA,WAAmB,GAAAC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAD,GAAAjF,KAAA,KAAAoF,EAAA,OACAE,YAAA,eACGF,EAAA,OACHE,YAAA,oBACGF,EAAA,OACHE,YAAA,iBACGF,EAAA,OACHE,YAAA,mBACAG,OACAwG,WAAAhH,EAAAiH,eAEGjH,EAAAiH,YAMAjH,EAAA0B,KANAvB,EAAA,OACHE,YAAA,kBACGF,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,aACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAAkH,sBAAAlH,EAAAO,GAAA,KAAAJ,EAAA,YACHQ,aACA7F,KAAA,QACA8F,QAAA,UACArG,MAAAyF,EAAA,QACAa,WAAA,YAEAP,OACAS,YAAA,eAEAC,UACAzG,MAAAyF,EAAA,SAEAiB,IACAK,MAAA,SAAAH,GACAA,EAAAI,OAAAC,YACAxB,EAAAqD,QAAAlC,EAAAI,OAAAhH,aAGGyF,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,gBACAG,OACAwG,WAAAhH,EAAAmH,eAEGnH,EAAAmH,YAMAnH,EAAA0B,KANAvB,EAAA,OACHE,YAAA,kBACGF,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,aACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAAoH,sBAAApH,EAAAO,GAAA,KAAAJ,EAAA,SACHQ,aACA7F,KAAA,QACA8F,QAAA,UACArG,MAAAyF,EAAA,QACAa,WAAA,YAEAP,OACAQ,KAAA,OACAC,YAAA,eAEAC,UACAzG,MAAAyF,EAAA,SAEAiB,IACAK,MAAA,SAAAH,GACAA,EAAAI,OAAAC,YACAxB,EAAAqH,QAAAlG,EAAAI,OAAAhH,eAGGyF,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,gBACGF,EAAA,OACHE,YAAA,sCACAY,IACAQ,MAAAzB,EAAAsH,SAEGtH,EAAAO,GAAA,QAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,sCACAY,IACAQ,MAAAzB,EAAAuH,QAEGvH,EAAAO,GAAA,cAAAP,EAAA0B,MACFM,qBNkqBKwF,OACA,SAAUtN,EAAQC,EAASC,GOpvBjCF,EAAAC,SAAgB4F,OAAA,WAAmB,GAAAC,GAAAnE,KAAaoE,EAAAD,EAAAE,cAA0BF,GAAAI,MAAAD,EAC1E,OAAAH,GAAAyH,GAAA,IACCzF,iBAAA,WAA+B,GAAAhC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CACvE,OAAAE,GAAA,OACAE,YAAA,YACGF,EAAA,OACHE,YAAA,gBACGF,EAAA,OACHG,OACAoH,IAAAtN,EAAA,aAEG4F,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,iBACGL,EAAAO,GAAA,kBP2vBGoH,OACA,SAAUzN,EAAQC,GQzwBxBD,EAAAC,SAAgB4F,OAAA,WAAmB,GAAAC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OACAE,YAAA,eACGL,EAAAqG,GAAArG,EAAA,cAAA4H,GACH,MAAAzH,GAAA,OACAE,YAAA,OACAG,OACAC,OAAAmH,EAAAC,YAEK1H,EAAA,KACLG,OACAxD,KAAA8K,EAAA9L,KAAA,yBAEKqE,EAAA,QACLE,YAAA,eACKL,EAAAO,GAAA,KAAAJ,EAAA,QACLE,YAAA,gBACKL,EAAAO,GAAAP,EAAA4B,GAAAgG,EAAAxE,OAAApD,EAAA4B,GAAAgG,EAAAE,OAAA,IAAAF,EAAAE,OAAA,eAEJ9F,qBR+wBK+F,OACA,SAAU7N,EAAQC,GSnyBxBD,EAAAC,SAAgB4F,OAAA,WAAmB,GAAAC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OACAE,YAAA,mBACGF,EAAA,OACHE,YAAA,wBACGL,EAAAqG,GAAArG,EAAA/C,QAAA,cAAAlC,GACH,MAAAoF,GAAA,OACAE,YAAA,wBACKF,EAAA,OACLE,YAAA,wBACKF,EAAA,OACLE,YAAA,aACKF,EAAA,OACLG,OACAoH,IAAA3M,EAAAkC,QAAA+K,OAAAjG,YAAA/B,EAAAhF,YAEKgF,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,cACKL,EAAAO,GAAAP,EAAA4B,GAAA7G,EAAAkC,QAAA+K,OAAAC,cAAAjI,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,cACKL,EAAAO,GAAAP,EAAA4B,GAAA7G,EAAAmN,kBAAAlI,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,4BACKL,EAAAO,GAAA,iBAAAP,EAAA4B,GAAA7G,EAAAkC,QAAAoG,iBAAA,oBACFrD,EAAAO,GAAA,KAAAP,EAAA/C,QAAAkH,OAAA,EAAAhE,EAAA,SACHE,YAAA,kBACGL,EAAA0B,MAAA,GAAA1B,EAAAO,GAAA,KAAAJ,EAAA,QACHG,OACA6D,MAAAnE,EAAA/C,QAAAkH,MACA/G,OAAA4C,EAAAuC,SACAxG,MAAAiE,EAAAU,WAEAO,IACA6F,YAAA9G,EAAA4C,eAEG,IACFZ,qBTyyBKmG,OACA,SAAUjO,EAAQkO,EAAqBhO,GAE7C,YU+7CA,SAAAiO,GAAAC,GACA,GAAAC,EAIA,WAHAlE,SAAAmE,MACA,8EAIAD,GAAAD,EACAC,EAAAE,UAAAC,UAAAC,SAtxEAvO,EAAA,SAwBC,SAAAyC,EAAA+L,EAAAC,GAOD,QAAAC,GAAAC,GAGA,QAAAC,GAAAC,EAAA1O,EAAA2O,GAEA,GAAAC,IACAC,OAAA,aACAC,UAAA,qBACAC,UAAA,qBACAC,SAAA,yBACAC,gBAAA,kBACAC,SAAA,gBACAC,aAAA,gBACAC,QAAA,sBACAC,iBAAA,qBACAC,cAAA,cACAC,cAAA,qBAGAX,GAAAF,GACAc,EAAAZ,EAAAF,IAAA1O,EACG2O,IACHa,EAAAd,GAAA1O,GArBA,GAAAyP,GAAAjB,EAAAkB,kBAAAF,IAgDA,OAvBA,mBACApB,EAAAuB,KAAAF,EAAAG,MAAA,oBAAAlB,GACAD,EAAAC,GAAA,KAEE,mBACFN,EAAAuB,KAAAF,EAAA,SAAAzP,EAAA0O,GACAD,EAAAC,EAAA1O,MAEE,IAAAyP,IAEFjB,EAAAqB,WAAA,IACAL,EAAAM,YAAA,IAGAtB,EAAAuB,OAAAC,SAAAxB,EAAAyB,YACAT,EAAAU,oBAAA,GAGA9B,EAAAuB,KAAAnB,EAAA,SAAAxO,EAAA0O,GACAD,EAAAC,IAAA1O,GAAA,MAIAwP,EAtDA,GAAAW,GAAA7N,EAAA8N,WACAC,KA4DAjC,GASAkC,QAAA,QASAC,QAAA,EASAC,QAAA,EASAC,OAAA,EASAC,UAAA,EASAC,OAAA,EASAC,KAAA,EAWAC,eAAA,IASAC,YAAA,IASAC,UAAA,IAOAC,gBAAA,IASAC,YAAA,IASAC,iBAAA,IASAC,sBAAA,IASAC,sBAAA,IASAC,oBAAA,IAUAC,cAAA,IASAC,wBAAA,IASAC,UAAAnD,EAAAoD,MAKAC,GAAArD,EAAAqD,GAWAC,OAAAtD,EAAAsD,OAWAC,OAAAvD,EAAAuD,OAaAC,KAAAxD,EAAAwD,KAUAC,IAAA,SAAAC,GACA,GAAAC,GAAAC,IAEA,WAAA5D,EAAAsD,OAAAI,KACAA,MAIA,KADA,GAAApP,GAAAoP,EAAAlP,OACAF,MACAqP,EAAA3D,EAAAyD,IAAAC,EAAApP,MAEAsP,EAAAC,KAAAF,EAIA,OAAAC,GAAApP,OAAAoP,EAAA,MAYAtC,KAAAtB,EAAAsB,KAWAwC,OAAA9D,EAAA8D,OAUAC,QAAA/D,EAAA+D,QAUAC,UAAA,SAAAC,GACA,GAAAC,IAAwBC,IAAA,KAAAC,IAAA,KAAAC,IAAA,MAAAC,IAAA,OAAAC,IAAA,OAAgEC,EAAA,YAExF,OAAAP,IAAA,GAAAA,GAAAQ,QAAAD,EAAA,SAAAE,GACA,MAAAR,GAAAQ,GAAA,IAAAR,EAAAQ,GAAA,IAA8DA,IAC3DT,GAWHU,QAAA3E,EAAA2E,QAWAC,QAAA5E,EAAA4E,QAUAC,QAAA7E,EAAA6E,QAUAC,UAAA9E,EAAA8E,UAUAC,WAAA/E,EAAA+E,WAUAC,SAAAhF,EAAAgF,SAUAC,SAAAjF,EAAAiF,SAUAC,YAAAlF,EAAAkF,YAUAC,SAAAnF,EAAAmF,SAaAC,SAAApF,EAAAoF,SAYAC,YAAArF,EAAAqF,YAUAC,gBAAAtF,EAAAsF,gBAUAC,UAAA,SAAArT,GACA,GAAAoC,GAAAkR,CAaA,KAVAA,GACA,sCACA,wBACA,sCACA,sCACA,wBACA,sCACA,uCAGAlR,EAAA,EAAaA,EAAAkR,EAAAhR,OAAmBF,GAAA,EAChCpC,IAAAuS,QAAAe,EAAAlR,GAAAkR,EAAAlR,EAAA,GASA,OALApC,KAAAuS,QAAA,YAGAvS,IAAAuS,QAAA,yBAcAgB,SAAA,SAAAvS,EAAAwS,GACA,GAAAvQ,GAAA,EAUA,OARA4K,GAAAuB,KAAAoE,EAAA,SAAA/T,EAAAO,GACAiD,MAAA,QAAAnB,mBAAA9B,GAAA,IAAA8B,mBAAArC,KAGAwD,IACAjC,MAAAF,QAAA,gBAAAmC,GAGAjC,GAWAyS,WAAA,SAAAC,GAMA,QAAAC,GAAAC,EAAAC,GACA,MAAAC,MAAAH,MAAAC,EAAAE,KAAAC,IAAA,GAAAF,IAAAC,KAAAC,IAAA,GAAAF,GALA,GAAAH,IAAA3F,GAAA,KAAAiG,KAAAN,GACA,MAAA7F,GAAA+E,UAAA,MAOA,IAAAqB,GAAAH,KAAAC,IAAA,OAGA,OAAAL,GAAAO,EACAN,EAAAD,EAAAO,EAAA,OAAApG,EAAA+E,UAAA,MAIAc,GAAAO,GAAA,MACAN,EAAAD,EAAAO,EAAA,OAAApG,EAAA+E,UAAA,MAIAc,GAAAO,GAAA,MACAN,EAAAD,EAAAO,EAAA,OAAApG,EAAA+E,UAAA,MAIAc,EAAA,KACAI,KAAAH,MAAAD,EAAA,UAAA7F,EAAA+E,UAAA,MAGAc,EAAA,IAAA7F,EAAA+E,UAAA,MAYAsB,UAAApG,EAAAqG,aAaAC,eAAA,SAAAC,EAAAC,GACA,GAAAC,GAAAC,CAKA,OAHAD,GAAA,GAAA1G,GAAA4G,SAAAJ,GACAG,EAAA1G,EAAA4G,QAAAC,QAAAJ,EAAAK,YAAAzF,kBAAAmF,GAAAD,EAAAC,UACAC,EAAAM,UACAL,GAeAM,cAAA,SAAA9U,EAAA+U,GACAjF,EAAA9P,GAAA+U,GAKAlH,GAAAiH,cAAA,sBAAAE,EAAAC,EAAAF,GACAC,EAAA1S,SAAA0S,EAAAE,OAAAlB,KAAAiB,EAAAjV,OACAe,KAAAoU,QAAA,SACAC,KAAAvH,EAAA+C,qBACAzO,QAAA0L,EAAA+E,UAAA,yBACAqC,SAEAF,GAAA,IAEAA,GAAA,KAKAlH,EAAAiH,cAAA,yBAAAO,EAAAJ,EAAAF,GAGAM,EAAAxH,EAAAqG,UAAAmB,OAFAtH,KAKAkH,EAAAvB,MAAA2B,GAAAJ,EAAAvB,KAAA2B,GACAtU,KAAAoU,QAAA,SACAC,KAAAvH,EAAA8C,gBACAxO,QAAA0L,EAAA+E,UAAA,oBACAqC,SAEAF,GAAA,IAEAA,GAAA,KAKAlH,EAAAiH,cAAA,8BAAArV,EAAAwV,EAAAF,GACA,GAAAtV,EAEA,IADA,GAAA6V,GAAAvU,KAAAwU,MAAAjT,OACAgT,KAEA,GAAAL,EAAAjV,OAAAe,KAAAwU,MAAAD,GAAAtV,MAAAiV,EAAAvB,OAAA3S,KAAAwU,MAAAD,GAAA5B,KAOA,MANA3S,MAAAoU,QAAA,SACAC,KAAAvH,EAAAgD,qBACA1O,QAAA0L,EAAA+E,UAAA,yBACAqC,aAEAF,IAAA,EAKAA,IAAA,KAqCAlH,EAAA4G,SAAA,SAAAe,GA+JA,QAAAC,KACA,GAAAR,GAAA7S,EAAAiH,EAAA,CAEA,IAAAtI,KAAAN,OAAAoN,EAAAoC,QAAA,CAEA,IAAA7N,EAAA,EAAcA,EAAAmT,EAAAjT,OAAkBF,IAChC6S,GAAAM,EAAAnT,GAAA+I,QAAA0C,EAAAqC,OAOA7G,KANA4L,EAAAM,EAAAnT,GACArB,KAAAoU,QAAA,eAAAF,KACAA,EAAA9J,OAAA0C,EAAAsC,UACApP,KAAAoU,QAAA,aAAAF,IAQA5L,IAAAkM,EAAAjT,SACAvB,KAAAN,QAAAoN,EAAAmC,UACAjP,KAAAN,MAAAoN,EAAAmC,QACAjP,KAAAoU,QAAA,iBAEApU,KAAAoU,QAAA,iBAAAI,KAMA,QAAAG,GAAAT,GACAA,EAAAU,QAAAV,EAAAvB,KAAA,EAAAI,KAAA8B,KAAAX,EAAAY,OAAAZ,EAAAvB,KAAA,SACAoC,IAIA,QAAAA,KACA,GAAA1T,GAAA6S,CAMA,KAHAc,EAAAC,QAGA5T,EAAA,EAAaA,EAAAmT,EAAAjT,OAAkBF,IAC/B6S,EAAAM,EAAAnT,GAEA6S,EAAAvB,OAAA3F,GAEAgI,EAAArC,MAAAuB,EAAAgB,SAIAF,EAAAF,QAAAZ,EAAAY,OAAAZ,EAAAgB,SAAAhB,EAAAvB,MAEAqC,EAAArC,KAAA3F,EAGAkH,EAAA9J,QAAA0C,EAAAwC,KACA0F,EAAAG,WACIjB,EAAA9J,QAAA0C,EAAAuC,OACJ2F,EAAAI,SAEAJ,EAAAK,QAKAL,GAAArC,OAAA3F,EACAgI,EAAAJ,QAAAJ,EAAAjT,OAAA,EAAAwR,KAAA8B,KAAAG,EAAAG,SAAAX,EAAAjT,OAAA,QAEAyT,EAAAM,YAAAvC,KAAA8B,KAAAG,EAAAF,UAAA,GAAAS,MAAAC,GAAA,SACAR,EAAAJ,QAAAI,EAAArC,KAAA,EAAAI,KAAA8B,KAAAG,EAAAF,OAAAE,EAAArC,KAAA,QAKA,QAAA8C,KACA,GAAAC,GAAAC,EAAA,IAAAC,EAAA,EACA,SAAAF,GACAA,EAAAG,aAAApV,IAMA,QAAAqV,GAAA5B,EAAA6B,GACA,GAAA7B,EAAA8B,KAAA,CACA,GAAArW,GAAAoN,EAAA4G,QAAAsC,QAAA/B,EAAA8B,KACA,IAAArW,EACA,MAAAA,GAAAuW,IAAAH,GAGA,SAIA,QAAAI,KACAnW,KAAAoW,KAAA,mCAAA5C,GACAA,EAAAY,QAAA,gBACAZ,EAAA6C,YAGArW,KAAAoW,KAAA,eAAAE,GAEAtW,KAAAoW,KAAA,eAAAG,GAEAvW,KAAAoW,KAAA,aAAAI,GAEAxW,KAAAoW,KAAA,iBAAAK,GAEAzW,KAAAoW,KAAA,eAAAM,GAEA1W,KAAAoW,KAAA,eAAArB,GAEA/U,KAAAoW,KAAA,QAAAO,GAEA3W,KAAAoW,KAAA,eAAAQ,GAEA5W,KAAAoW,KAAA,UAAAS,GAIA,QAAAC,GAAA5J,EAAA8G,GACA,GAAA+C,GAAA/W,KAAAgX,EAAA,EAAAC,KAGAxC,GACAyC,cAAAhK,EAAAqG,SACA4D,cAAAjK,EAAAkB,kBACAgJ,iBACAC,QAAAnK,EAAAoK,cACAC,QAAArK,EAAAsK,oBAIA1K,GAAAuB,KAAAnB,EAAAqG,SAAAjF,MAAA,oBAAAmF,GACAvG,EAAAuG,KACAgB,EAAAhB,GAAAvG,EAAAuG,MAKAvG,EAAAuK,eACA3K,EAAAuB,KAAAnB,EAAAuK,cAAA,SAAA/G,GACAuG,EAAArG,KAAA,SAAAoD,GACA,GAAA0D,GAAA,GAAA3K,GAAA4K,UAAA7K,EAAAwD,UAAuDmE,GACvDmD,OAAA1K,EAAA+G,QAAA4D,WACA5Y,KAAAiO,EAAA4K,eACAC,SAAA7K,EAAAS,gBACAqK,UAAA9K,EAAA8K,UACAP,cAAA/G,IAGAgH,GAAAO,QAAA,WACA,GAAAtY,GAAAoN,EAAA4G,QAAAsC,QAAAjW,KAAAgW,KAGAjJ,GAAAuD,OAAAyG,EAAA5I,UACAZ,OAAA5N,EAAAuW,IAAA,cACAvH,UAAAhP,EAAAuW,IAAA,kBACAvI,gBAAAhO,EAAAuW,IAAA,qBAGAc,IACArB,EAAA/E,KAAA5Q,MACAgU,KAGA0D,EAAAQ,SAAA,WACAnB,EAAAoB,QAAAnY,KAAAwU,QAGAkD,EAAAtB,KAAA,mDAAAlN,GACAkP,IACAlL,EAAAmL,sBACA,eAAAnP,EAAAjE,KACA8H,EAAAiF,SAAAtB,EAAAxD,EAAAmL,qBACS,eAAAnP,EAAAjE,MACT8H,EAAAkF,YAAAvB,EAAAxD,EAAAmL,sBAIAnL,EAAAoL,uBACA,cAAApP,EAAAjE,KACA8H,EAAAiF,SAAAtB,EAAAxD,EAAAoL,sBACS,YAAApP,EAAAjE,MACT8H,EAAAkF,YAAAvB,EAAAxD,EAAAoL,0BAMAZ,EAAAtB,KAAA,uBACAW,EAAA3C,QAAA,YAGAsD,EAAAtB,KAAA,gCACAsB,EAAA,KACA1D,MAGA0D,EAAAa,WAMArL,EAAAW,cACAf,EAAAuB,KAAAnB,EAAAW,aAAA,SAAA6C,GACAuG,EAAArG,KAAA,SAAAoD,GACA,GAAAwE,GAAA,GAAAzL,GAAA0L,SAAA3L,EAAAwD,UAAqDmE,GACrDiE,UAAAhI,IAGA8H,GAAAP,QAAA,WACA,GAAAtY,GAAAoN,EAAA4G,QAAAsC,QAAAjW,KAAAgW,KAEAe,GAAA5I,SAAAP,SAAAjO,EAAAuW,IAAA,iBAEAc,IACApB,EAAAhF,KAAA5Q,MACAgU,KAGAwE,EAAAG,OAAA,WACA5B,EAAAoB,QAAAnY,KAAAwU,QAGAgE,EAAApC,KAAA,gCACAoC,EAAA,KACAxE,MAGAwE,EAAAD,WAMAxL,EAAA6L,SAAA3B,EAAA,WACA,sBACAjD,EAAAgD,KAMA,QAAA6B,GAAAC,EAAAjR,EAAAmM,GACA,GAAA+E,GAAA,GAAAhM,GAAAiM,KAEA,KACAD,EAAAE,OAAA,WAEA,GAAApR,EAAAqR,MAAAlZ,KAAAkZ,OACArR,EAAAkC,OAAA/J,KAAA+J,QACAlC,EAAAsR,UAAAnM,GACAnF,EAAAuR,mBACAvR,EAAAwR,KAGA,MADArZ,MAAA8T,UACAE,EAAA8E,EAGAC,GAAAO,SAAAzR,EAAAqR,MAAArR,EAAAkC,OAAAlC,EAAAwR,KAAAxR,EAAAuR,mBAGAL,EAAAQ,SAAA,WACAvF,EAAAhU,KAAAwZ,UAAAV,EAAA7T,KAAA4C,EAAAsR,UACAnZ,KAAA8T,WAGAiF,EAAAU,QAAA,WACAzF,EAAA8E,IAGAC,EAAAW,KAAAZ,GACG,MAAAa,GACH3F,EAAA8E,IAKA,QAAAc,GAAAhW,EAAAlF,EAAA6Z,GAGA,QAAAsB,GAAAjW,EAAAlF,EAAA6Z,GACA,GAAAuB,GAAA5M,EAAAtJ,EAEA,QAAAA,GACA,oBACA,kBAAAA,IACAsJ,EAAA6M,cAAA7M,EAAA+G,QAAA8F,cAAArb,EAEA,MAEA,mBACAA,EAAAoO,EAAAqG,UAAAzU,MACAwO,EAAAtJ,GAAAlF,EACAwO,EAAA8M,gBAAA,EAEA,MAEA,iBACA9M,EAAAtJ,GAAAlF,EACAA,IACAwO,EAAA8M,gBAAA,EAEA,MAEA,oBACA9M,EAAAtJ,GAAAlF,EACAA,IACAwO,EAAA8M,gBAAA,EAEA,MAEA,eAEA,UAAAlN,EAAAuD,OAAA3R,KACAA,GACAmZ,WAAAnZ,IAIA6Z,EACAzL,EAAAwD,OAAApD,EAAA+G,QAAAvV,GAEAwO,EAAA+G,QAAAvV,EAIAA,EAAAmZ,aACA3K,EAAA+G,QAAA4D,WAAA1D,OAAA,SAAAF,GACA,GAAAgG,KAYA,OAVAnN,GAAAuB,KAAA4F,EAAA,SAAAiG,GACApN,EAAAuB,KAAA6L,EAAAC,WAAA7L,MAAA,cAAA8L,GACA,aAAAnH,KAAAmH,GACAH,EAAArJ,KAAA,QAEAqJ,EAAArJ,KAAA,MAAAwJ,EAAA5I,QAAA,GAAA6I,QAAA,uBAAqF7I,QAAA,mCAKrF,GAAA6I,QAAA,IAAAJ,EAAAK,KAAA,gBACOpN,EAAA+G,QAAA4D,YAEP,MAEA,cACAU,EACAzL,EAAAwD,OAAApD,EAAAuB,OAAA/P,GACAgQ,SAAA,IAGAxB,EAAAuB,OAAA/P,CAEA,MAEA,0BACAwO,EAAAqN,mBAAArN,EAAA+G,QAAAsG,qBAAA7b,CACA,MAEA,qBACA,mBACAA,EAAAoO,EAAA0D,IAAA9R,EAEA,iBACA,eACA,sBACA,oBACA,0BACAwO,EAAAtJ,GAAAlF,EACA6Z,IACAiC,GAAA,EAEA,MAEA,SACAtN,EAAAtJ,GAAAlF,EAGA6Z,GACAxB,EAAA3C,QAAA,gBAAAxQ,EAAAlF,EAAAob,GArGA,GAAA/C,GAAA/W,KAAAwa,GAAA,CAyGA,oBACA1N,EAAAuB,KAAAzK,EAAA,SAAAlF,EAAAkF,GACAiW,EAAAjW,EAAAlF,EAAA6Z,KAGAsB,EAAAjW,EAAAlF,EAAA6Z,GAGAA,GAEArL,EAAAkB,kBAAAnB,EAAAH,EAAAwD,UAAgEpD,IAGhEkK,EAAAnK,EAAAH,EAAAwD,UAAoDpD,GACpDkB,mBAAA,MAEGoM,IACHzD,EAAA3C,QAAA,WAEA0C,EAAAxM,KAAAyM,EAAA7J,EAAA,SAAA8J,GACAA,GACAD,EAAAtD,QAAA1G,EAAA4G,QAAAsC,QAAAR,KAAAxQ,KACA8R,EAAA3C,QAAA,QAA2BX,QAAAsD,EAAAtD,UAC3BsD,EAAA3C,QAAA,aAEA2C,EAAA3C,QAAA,SACAC,KAAAvH,EAAA6C,WACAvO,QAAA0L,EAAA+E,UAAA,oBASA,QAAA0E,GAAA/C,EAAAU,GAEA,GAAAV,EAAAtG,SAAAuN,aAAA,CACA,GAAAC,GAAAxG,EAAAjV,KAAA0b,MAAA,cAAAP,EAAA,MACAM,KACAN,EAAAM,EAAA,IAEAxG,EAAA0G,YAAA1G,EAAA2G,GAAA,IAAAT,GAKA,QAAA5D,GAAAhD,EAAAU,GAcA,QAAA4G,KACAC,KAAA,EACAlM,EAAAmM,EAAA,MAEA9G,EAAAY,OAAA9K,EAEAwJ,EAAAY,QAAA,SACAC,KAAAvH,EAAA0C,WACApO,QAAA0L,EAAA+E,UAAA,eACAqC,OACA+G,SAAAC,EAAAC,aACA/Q,OAAA8Q,EAAA9Q,OACAgR,gBAAAF,EAAAG,2BAKA,QAAAL,KACA,GAAAM,GAAAC,EAAqCC,EAArCC,IAGAvH,GAAA9J,SAAA0C,EAAAsC,WAAAoE,EAAA9T,QAAAoN,EAAAmC,UAKAuE,EAAAtG,SAAA8M,iBACAyB,EAAAxc,KAAAiV,EAAA0G,aAAA1G,EAAAjV,MAGAyc,GAAAvN,EAAAZ,QAAAuL,EAAAnG,KAAA+I,GACAF,EAAAzI,KAAA4I,IAAAD,EAAA5C,EAAAnG,KAAA3I,GACAsR,EAAAxC,EAAA9P,MAAAgB,IAAAwR,KAEAA,EAAA1C,EAAAnG,KACA2I,EAAAxC,GAIA4C,GAAAvN,EAAAZ,SAEAiG,EAAAtG,SAAA0O,mBACAH,EAAAI,MAAA9I,KAAA8B,KAAA7K,EAAA0R,GACAD,EAAAlO,OAAAwF,KAAA8B,KAAAiE,EAAAnG,KAAA+I,KAEAD,EAAAzR,SACAyR,EAAAzG,MAAA8D,EAAAnG,OAIAuI,EAAA,GAAAnO,GAAA+O,eAGAZ,EAAAa,SACAb,EAAAa,OAAAC,WAAA,SAAA9S,GACAgL,EAAAY,OAAA/B,KAAA4I,IAAAzH,EAAAvB,KAAA3I,EAAAd,EAAA4L,QACAtB,EAAAY,QAAA,iBAAAF,KAIAgH,EAAAjC,OAAA,WAEA,GAAAiC,EAAA9Q,QAAA,IAEA,WADA0Q,IAIAC,GAAAvH,EAAAtG,SAAA+O,YAGAT,EAAA1C,EAAAnG,MACA2I,EAAAxH,UAEA9J,GAAAwR,EACAtH,EAAAY,OAAA/B,KAAA4I,IAAA3R,EAAA8O,EAAAnG,MAEAa,EAAAY,QAAA,gBAAAF,GACAlK,OAAAkK,EAAAY,OACAE,MAAA8D,EAAAnG,KACAsI,SAAAC,EAAAC,aACA/Q,OAAA8Q,EAAA9Q,OACAgR,gBAAAF,EAAAG,0BAIA,oBAAAtO,EAAAmP,IAAAC,SAEA3I,EAAAY,QAAA,iBAAAF,IAGAA,EAAAY,OAAAZ,EAAAvB,KAGA2I,EAAAC,EAAA,MAGAvR,MAAA8O,EAAAnG,MAEAuB,EAAAvB,MAAAuB,EAAAgB,WACA4D,EAAAhF,UACAgF,EAAA,MAGAtF,EAAAY,QAAA,iBAAAF,GAEAA,EAAA9J,OAAA0C,EAAAwC,KAEAkE,EAAAY,QAAA,eAAAF,GACA+G,SAAAC,EAAAC,aACA/Q,OAAA8Q,EAAA9Q,OACAgR,gBAAAF,EAAAG,2BAIAxM,EAAAmM,EAAA,IAIAE,EAAAzB,QAAA,WACAqB,KAGAI,EAAAkB,UAAA,WACApc,KAAA8T,UACAoH,EAAA,MAIA1H,EAAAtG,SAAAyB,WAAAR,EAAAQ,WACAuM,EAAAmB,KAAA,OAAApc,GAAA,GAGA6M,EAAAuB,KAAAmF,EAAAtG,SAAAY,QAAA,SAAApP,EAAAO,GACAic,EAAAoB,iBAAArd,EAAAP,KAGA6c,EAAA,GAAAxO,GAAAwP,SAGAzP,EAAAuB,KAAAvB,EAAAwD,OAAAmL,EAAAjI,EAAAtG,SAAAsP,kBAAA,SAAA9d,EAAAO,GACAsc,EAAAkB,OAAAxd,EAAAP,KAIA6c,EAAAkB,OAAAjJ,EAAAtG,SAAA4K,eAAAwD,GACAJ,EAAAxP,KAAA6P,GACArE,cAAA1D,EAAAtG,SAAAqG,SACA4D,cAAA3D,EAAAtG,SAAAkB,kBACAgJ,iBACAC,QAAA7D,EAAAtG,SAAAoK,cACAC,QAAA/D,EAAAtG,SAAAsK,wBAIAvX,EAAA6M,EAAA0F,SAAAgB,EAAAtG,SAAAjN,IAAA6M,EAAAwD,OAAAmL,EAAAjI,EAAAtG,SAAAsP,mBAEAtB,EAAAmB,KAAA,OAAApc,GAAA,GAEAib,EAAAoB,iBAAA,2CAGAxP,EAAAuB,KAAAmF,EAAAtG,SAAAY,QAAA,SAAApP,EAAAO,GACAic,EAAAoB,iBAAArd,EAAAP,KAGAwc,EAAAxP,KAAA4P,GACApE,cAAA1D,EAAAtG,SAAAqG,SACA4D,cAAA3D,EAAAtG,SAAAkB,kBACAgJ,iBACAC,QAAA7D,EAAAtG,SAAAoK,cACAC,QAAA/D,EAAAtG,SAAAsK,wBAvLA,GAKAsB,GALA7Y,EAAAuT,EAAAtG,SAAAjN,IACAyb,EAAAlI,EAAAtG,SAAAqB,WACAwM,EAAAvH,EAAAtG,SAAA+O,YACA9N,EAAAqF,EAAArF,SACAnE,EAAA,CAKAkK,GAAAY,SACA9K,EAAAkK,EAAAY,OAAA4G,IAAA3I,KAAA2J,MAAAxI,EAAAY,OAAA4G,GAAA,GAkLA5C,EAAA5E,EAAAyI,YAGAnJ,EAAAtG,SAAAuB,OAAAC,SAAAoH,EAAAgD,EAAA,wBAAA/L,EAAA4E,QAAAmH,EAAA7T,MAAA,2BAEA4T,EAAAvO,KAAAtK,KAAA8Y,EAAAtF,EAAAtG,SAAAuB,OAAA,SAAAmO,GACA9D,EAAA8D,EACA1I,EAAAvB,KAAAiK,EAAAjK,KACAqI,MAGAA,IAKA,QAAAvE,GAAAjD,EAAAU,GACAS,EAAAT,GAIA,QAAAwC,GAAAlD,GACA,GAAAA,EAAA9T,OAAAoN,EAAAoC,QAEAsG,GAAA,GAAAD,UACG,IAAA/B,EAAA9T,OAAAoN,EAAAmC,QAEH,OAAA5N,GAAAmS,EAAAgB,MAAAjT,OAAA,EAAoCF,GAAA,EAAQA,IAC5CmS,EAAAgB,MAAAnT,GAAA+I,QAAA0C,EAAAsC,YACAoE,EAAAgB,MAAAnT,GAAA+I,OAAA0C,EAAAqC,OACA4F,KAOA,QAAAuB,KACA4E,GACAA,EAAA2B,QAKA,QAAAjG,GAAApD,GACAuB,IAIAlG,EAAA,WACA6F,EAAApK,KAAAkJ,IACG,GAIH,QAAAmD,GAAAnD,EAAAtQ,GACAA,EAAAmR,OAAAvH,EAAA6C,WACA6D,EAAAM,UAGA5Q,EAAAgR,OACAhR,EAAAgR,KAAA9J,OAAA0C,EAAAuC,OACAsF,EAAAzR,EAAAgR,MAIAV,EAAA9T,OAAAoN,EAAAoC,UACAsE,EAAAY,QAAA,gBACAvF,EAAA,WACA6F,EAAApK,KAAAkJ,IACK,KAML,QAAAqD,GAAArD,GACAA,EAAAsJ,OAGAhQ,EAAAuB,KAAAmG,EAAA,SAAAN,GACAA,EAAAJ,YAEAU,KAEAmB,EAAApU,SACAuL,EAAAuB,KAAAsH,EAAA,SAAA+B,GACAA,EAAA5D,YAEA6B,MAGAC,EAAArU,SACAuL,EAAAuB,KAAAuH,EAAA,SAAA4C,GACAA,EAAA1E,YAEA8B,MAGAwB,KACAgB,GAAA,EACA5C,EAAA0F,EAAA,KACAlG,EAAAC,QApuBA,GACA/H,GAKAsI,EACAR,EAEAkG,EATAza,EAAAqM,EAAAyD,OAEAiE,KACA4C,KACAzB,KACAC,KAGAwC,GAAA,CAiuBAlL,IACAqG,SAAAxG,EAAA4G,QAAAoJ,MACAd,YAAA,EACA1N,WAAA,EACAI,WAAA,EACAhB,iBAAA,EACAmK,eAAA,OACAR,cAAA,eACAE,oBAAA,eACAvD,SACA4D,cACA0C,oBAAA,EACAR,cAAA,GAEAtL,QACAC,SAAA,EACA0K,kBAAA,EACAC,MAAA,GAEAW,gBAAA,EACA4B,mBAAA,GAIAhC,EAAAtP,KAAAtK,KAAAyU,EAAA,SAGAO,EAAA,GAAAlI,GAAAkQ,cAGAlQ,EAAAwD,OAAAtQ,MAQA6a,GAAApa,EACAA,MASAf,MAAAoN,EAAAmC,QAUAd,YAQAsF,QAAA,KASAe,QAQAtH,WAQA8H,QAQAuD,KAAA,WACA,GAAAxB,GAAA/W,IAaA,IAXA,kBAAAkN,GAAA,QACAA,EAAA+P,QAAAlG,GAEAjK,EAAAuB,KAAAnB,EAAA+P,QAAA,SAAAC,EAAAje,GACA8X,EAAAX,KAAAnX,EAAAie,KAIA/G,EAAA7L,KAAAtK,OAGAkN,EAAAuK,gBAAAvK,EAAAjN,IAKA,WAJAD,MAAAoU,QAAA,SACAC,KAAAvH,EAAA6C,WACAvO,QAAA0L,EAAA+E,UAAA,gBAKAiF,GAAAxM,KAAAtK,KAAAkN,EAAA,SAAA8J,GACA,kBAAA9J,GAAA,KACAA,EAAAqL,KAAAxB,GAEAjK,EAAAuB,KAAAnB,EAAAqL,KAAA,SAAA2E,EAAAje,GACA8X,EAAAX,KAAAnX,EAAAie,KAIAlG,GACAD,EAAAtD,QAAA1G,EAAA4G,QAAAsC,QAAAR,KAAAxQ,KACA8R,EAAA3C,QAAA,QAA2BX,QAAAsD,EAAAtD,UAC3BsD,EAAA3C,QAAA,aAEA2C,EAAA3C,QAAA,SACAC,KAAAvH,EAAA6C,WACAvO,QAAA0L,EAAA+E,UAAA,oBAcA+H,UAAA,SAAAhW,EAAAlF,GACAkb,EAAAtP,KAAAtK,KAAA4D,EAAAlF,GAAAsB,KAAAyT,UAWAI,UAAA,SAAAjQ,GACA,MAAAA,GAGAsJ,EAAAtJ,GAFAsJ,GAWAmJ,QAAA,WACAV,EAAApU,QACAuL,EAAAuB,KAAAsH,EAAA,SAAA+B,GACAA,EAAAtD,QAAA,aAGApU,KAAAoU,QAAA,YAQA+I,MAAA,WACAnd,KAAAN,OAAAoN,EAAAoC,UACAlP,KAAAN,MAAAoN,EAAAoC,QACAlP,KAAAoU,QAAA,gBAEAM,EAAApK,KAAAtK,QASA8c,KAAA,WACA9c,KAAAN,OAAAoN,EAAAmC,UACAjP,KAAAN,MAAAoN,EAAAmC,QACAjP,KAAAoU,QAAA,gBACApU,KAAAoU,QAAA,kBAWAgJ,cAAA,WACAhF,EAAAiF,UAAA,KAAArQ,GAAAqQ,UAAA,GAEA1H,EAAApU,QACAuL,EAAAuB,KAAAsH,EAAA,SAAA+B,GACAA,EAAA4F,QAAAlF,KAIApY,KAAAoU,QAAA,gBAAAgE,IAUAmF,QAAA,SAAA1C,GACA,GAAAxZ,EACA,KAAAA,EAAAmT,EAAAjT,OAAA,EAA6BF,GAAA,EAAQA,IACrC,GAAAmT,EAAAnT,GAAAwZ,OACA,MAAArG,GAAAnT,IAeA8W,QAAA,SAAAjE,EAAAsJ,GAOA,QAAAC,GAAAvJ,EAAAF,GACA,GAAAiD,KACAlK,GAAAsB,KAAA0I,EAAA7J,SAAA+G,QAAA,SAAAyJ,EAAAze,GACA8P,EAAA9P,IACAgY,EAAArG,KAAA,SAAAoD,GACAjF,EAAA9P,GAAAqL,KAAAyM,EAAA2G,EAAAxJ,EAAA,SAAApR,GACAkR,GAAAlR,SAKAiK,EAAA6L,SAAA3B,EAAAjD,GAQA,QAAA2J,GAAAzJ,GACA,GAAAjP,GAAA8H,EAAAsD,OAAA6D,EAGA,IAAAA,YAAAnH,GAAA6Q,KAAA,CACA,IAAA1J,EAAA8B,OAAA9B,EAAA2J,aAAA,CACA,IAAA7H,EACA,QAEA9B,GAAA8B,OACA9B,EAAA4J,eAAA9H,GAEA2H,EAAA,GAAA7Q,GAAA8Q,KAAA1J,QAGAA,aAAAnH,GAAAgR,MACAJ,EAAAzJ,EAAAyI,aACAzI,EAAAJ,WAGAI,YAAApH,GAAA8Q,MACAJ,IACAtJ,EAAAjV,KAAAue,GAGAvG,EAAArG,KAAA,SAAAoD,GAEAyJ,EAAAvJ,EAAA,SAAAhR,GACAA,IAEAsR,EAAA5D,KAAAsD,GAEA8J,EAAApN,KAAAsD,GAEA6C,EAAA3C,QAAA,eAAAF,IAEArF,EAAAmF,EAAA,SAKA,IAAAjH,EAAA4E,QAAA1M,GAAA,gBACA0Y,EAAA,GAAA5Q,GAAA6Q,KAAA,KAAA1J,IAGA,SAAAjP,GAAA,aAAA8H,EAAAsD,OAAA6D,EAAAM,OAEAzH,EAAAsB,KAAA6F,EAAAM,MAAAmJ,GAGA,UAAA1Y,IACAuY,EAAA,KACAzQ,EAAAsB,KAAA6F,EAAAyJ,IA7EA,GAGA3H,GAHAe,EAAA/W,KACAiX,KACA+G,IA+EAhI,GAAAP,IAEAkI,EAAAzJ,GAEA+C,EAAA1V,QACAwL,EAAA6L,SAAA3B,EAAA,WAEA+G,EAAAzc,QACAwV,EAAA3C,QAAA,aAAA4J,MAYAC,WAAA,SAAA/J,GAGA,OAFA2G,GAAA,mBAAA3G,IAAA2G,GAEAxZ,EAAAmT,EAAAjT,OAAA,EAAiCF,GAAA,EAAQA,IACzC,GAAAmT,EAAAnT,GAAAwZ,OACA,MAAA7a,MAAAyJ,OAAApI,EAAA,OAaAoI,OAAA,SAAA0T,EAAA5b,GAEA,GAAA2c,GAAA1J,EAAA/K,OAAA0T,IAAAnQ,EAAA,EAAAmQ,EAAA5b,IAAAyL,EAAAwH,EAAAjT,UAGA4c,GAAA,CAyBA,OAxBAne,MAAAN,OAAAoN,EAAAoC,UACApC,EAAAuB,KAAA6P,EAAA,SAAAhK,GACA,GAAAA,EAAA9J,SAAA0C,EAAAsC,UAEA,MADA+O,IAAA,GACA,IAIAA,GACAne,KAAA8c,QAIA9c,KAAAoU,QAAA,eAAA8J,GAGApR,EAAAuB,KAAA6P,EAAA,SAAAhK,GACAA,EAAAJ,YAGAqK,GACAne,KAAAmd,QAGAe,GA4BA9H,KAAA,SAAAnX,EAAAie,EAAAkB,GACA,GAAArH,GAAA/W,IAEA8M,GAAA4G,SAAA9G,UAAAwJ,KAAA9L,KAAAtK,KAAAf,EAAA,WACA,GAAAwc,MAAAzS,MAAAsB,KAAA+S,UAEA,OADA5B,GAAAhS,OAAA,IAAAsN,GACAmG,EAAAmB,MAAAre,KAAAyb,IACI,EAAA2C,IAuBJtK,QAAA,WACA9T,KAAAoU,QAAA,WACAlH,EAAA8H,EAAA,KACAhV,KAAAse,gBAKAxR,EAAA4G,SAAA9G,UAAAG,EAAAwR,YAAAC,SAYA1R,EAAA8Q,KAAA,WAGA,QAAAa,GAAAvK,GAEApH,EAAAwD,OAAAtQ,MAQA6a,GAAA/N,EAAAyD,OAQAtR,KAAAiV,EAAAjV,MAAAiV,EAAAsJ,SAQAvY,KAAAiP,EAAAjP,MAAA,GAQA0N,KAAAuB,EAAAvB,MAAAuB,EAAAwK,SAQAxJ,SAAAhB,EAAAvB,MAAAuB,EAAAwK,SAQA5J,OAAA,EAQAF,QAAA,EASAxK,OAAA0C,EAAAqC,OAQAwP,iBAAAzK,EAAAyK,mBAAA,GAAApJ,OAAAqJ,iBAQAC,UAAA,WACA,GAAA3K,GAAAlU,KAAA2c,uBACA,YAAA5P,EAAA4E,QAAA5E,EAAAsD,OAAA6D,IAAA,gBAAAA,EAAA,MASAyI,UAAA,WACA,MAAAmC,GAAA9e,KAAA6a,IAGAiE,EAAA9e,KAAA6a,IAFA,MAUA/G,QAAA,WACA,GAAAjI,GAAA7L,KAAA2c,WACA9Q,KACAA,EAAAiI,gBACAgL,GAAA9e,KAAA6a,QAKAiE,EAAA9e,KAAA6a,IAAA3G,EArHA,GAAA4K,KAwHA,OAAAL,MAUA3R,EAAAkQ,cAAA,WACA,GAAAjG,GAAA/W,IAQA+W,GAAApE,KAAA,EAQAoE,EAAAjC,OAAA,EAQAiC,EAAA5B,SAAA,EAQA4B,EAAA3B,OAAA,EAQA2B,EAAA1B,OAAA,EAQA0B,EAAAnC,QAAA,EAQAmC,EAAAzB,YAAA,EAOAyB,EAAA9B,MAAA,WACA8B,EAAApE,KAAAoE,EAAAjC,OAAAiC,EAAA5B,SAAA4B,EAAA3B,OAAA2B,EAAA1B,OAAA0B,EAAAnC,QAAAmC,EAAAzB,YAAA,IAIAtU,EAAA8L,YAEC9L,OAAA+d,MAGD,IAAArS,EAYAH,GAAA,GACAC,UACA7J,QAAA,UVs1BMqc,OACA,SAAU3gB,EAAQC,EAASC,GAEjC,YWlnGAC,QAAAC,eAAAH,EAAA,cACAI,OAAA,GAGA,IAAAugB,GAAA1gB,EAAA,QAEA2gB,EAQA,SAAApgB,GAAsC,MAAAA,MAAAC,WAAAD,GAAuCE,QAAAF,IAR7EmgB,GAEAE,EAAA5gB,EAAA,QAEAqI,EAEA,SAAA9H,GAAuC,GAAAA,KAAAC,WAA6B,MAAAD,EAAqB,IAAAsgB,KAAiB,UAAAtgB,EAAmB,OAAA4D,KAAA5D,GAAuBN,OAAAoO,UAAAyS,eAAA/U,KAAAxL,EAAA4D,KAAA0c,EAAA1c,GAAA5D,EAAA4D,GAAsG,OAAtB0c,GAAApgB,QAAAF,EAAsBsgB,GAF1PD,EAMA7gB,GAAAU,SACAU,OACAiH,SACA2B,MAAA,EACAS,SACA2Q,KAAA,EACA4F,KAAA,GAGAC,KACAjX,MAAA,EACAS,SACAuW,KAAA,GAGAxY,UACAmB,QACAuX,cAAA,KACAC,YAAA,IACAC,eAAA,OAEAC,gBACAzf,MAAA,EACA0f,QACAlG,KAAA,GAGAmG,SACArW,WAAA,GACAsW,YACAC,aAAA,EACAC,KAAA,QAEAD,aAAA,EACAC,KAAA,QAEAC,WACAD,KAAA,KACAE,SAAA,IAEAF,KAAA,KACAE,SAAA,IAEAF,KAAA,KACAE,SAAA,IAEAvgB,SAGA8K,SACAnC,MAAA,EACAS,SACAuW,KAAA,EACA3f,QACA+K,WAAA,IAGA9J,SACAO,QACAmH,MAAA,IAGA6X,WACAC,gBAAA,SAAA1gB,EAAA2gB,GACA,OAAA3d,KAAA2d,GACA3gB,EAAAiH,QAAAjE,GAAA2d,EAAA3d,IAGA4d,iBAAA,SAAA5gB,EAAA2gB,GACA,OAAA3d,KAAA2d,GACA3gB,EAAAoH,SAAApE,GAAA2d,EAAA3d,IAGA6d,oBAAA,SAAA7gB,EAAA2gB,GACA3gB,EAAA+K,QAAAnC,MAAA+X,EAAA/X,MACA5I,EAAA+K,QAAA1B,MAAAsX,EAAAtX,MACArJ,EAAA+K,QAAA6U,KAAAe,EAAAf,MAEAkB,qBAAA,SAAA9gB,EAAA2gB,GACA,OAAA3d,KAAA2d,GACA3gB,EAAAmgB,QAAAlgB,KAAA+C,GAAA2d,EAAA3d,IAGA+d,gBAAA,SAAA/gB,EAAA2gB,GACA,OAAA3d,KAAA2d,GACA3gB,EAAAmgB,QAAAnd,GAAA2d,EAAA3d,IAGAge,gBAAA,SAAAhhB,EAAA2gB,GACA,OAAA3d,KAAA2d,GACA3gB,EAAA+K,QAAA/H,GAAA2d,EAAA3d,IAGAie,gBAAA,SAAAjhB,EAAA2gB,GACA,OAAA3d,KAAA2d,GACA3gB,EAAAkB,QAAA8B,GAAA2d,EAAA3d,IAGAke,oBAAA,SAAAlhB,EAAA2gB,GACA3gB,EAAAkB,QAAAO,KAAAkf,EAAAngB,OAAA2gB,YAAAR,EAAAQ,aAEAC,YAAA,SAAAphB,EAAA2gB,GACA,OAAA3d,KAAA2d,GACA3gB,EAAA6f,IAAA7c,GAAA2d,EAAA3d,KAIAqe,SACAX,gBAAA,SAAAY,EAAAX,GAEA,MADAW,GAAAC,OAAA,kBAAAZ,GACAnB,EAAAlgB,QAAAmO,QAAA,IAEAqT,qBAAA,SAAAQ,EAAAX,GAEA,MADAW,GAAAC,OAAA,uBAAAZ,GACAnB,EAAAlgB,QAAAmO,QAAA,IAEA+T,iBAAA,SAAAF,EAAAX,GAIA,MAHAW,GAAAC,OAAA,oBACA/gB,MAAAmgB,IAEAnB,EAAAlgB,QAAAmO,QAAA,IAEAyT,oBAAA,SAAAI,EAAAX,GAEA,MADAW,GAAAC,OAAA,sBAAAZ,GACAnB,EAAAlgB,QAAAmO,QAAA,IAEAgU,oBAAA,SAAAH,EAAAX,GAIA,MAHAW,GAAAC,OAAA,mBACAthB,KAAA0gB,IAEAnB,EAAAlgB,QAAAmO,QAAA,IAEAiU,oBAAA,SAAAJ,EAAAX,GACA,MAAAW,GAAAthB,MAAAmgB,QAAAnG,KACAwF,EAAAlgB,QAAAqiB,QACAC,KAAA,GACAjX,IAAA,SAGA2W,EAAAC,OAAA,mBACAvH,KAAA,IAGAsH,EAAAthB,MAAAoH,SAAA5G,QACAmgB,EAAArY,KAAAyX,YAAAuB,EAAAthB,MAAAoH,SAAA5G,OAGA0G,EAAAe,eAAA0Y,GAAAxd,KAAA,SAAAC,GACA,GAAAiG,GAAAiY,EAAAthB,MAAAiH,QAAAoC,KAYA,OAVAA,GADA,QAAAsX,EAAApb,KACA8D,EAAAwY,OAAAze,EAAA3B,MAEA2B,EAAA3B,KAEA6f,EAAAC,OAAA,mBACA3Y,MAAAxF,EAAA0e,UAAAC,YACA1Y,QACAuW,KAAAxc,EAAAwc,KACA5F,KAAA,IAEAwF,EAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GAIJ,MAHA8d,GAAAC,OAAA,mBACAvH,KAAA,IAEAwF,EAAAlgB,QAAAqiB,OAAAne,OAKAwe,oBAAA,SAAAV,EAAAX,GAaA,MAZAzZ,GAAA+a,eAAAtB,GAAAxd,KAAA,SAAAC,GAOA,MANAA,GAAA3B,KAAA2B,EAAA3B,KAAAygB,UACAZ,EAAAC,OAAA,uBACA3Y,MAAAuZ,OAAA/e,EAAA0e,UAAAC,aACA1Y,MAAAjG,EAAA3B,KACAme,KAAAxc,EAAAwc,OAEAJ,EAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,MAKA4e,qBAAA,SAAAd,EAAAX,GACA,MAAAW,GAAAthB,MAAAoH,SAAA4S,KACAwF,EAAAlgB,QAAAqiB,QACAC,KAAA,GACAjX,IAAA,SAGA2W,EAAAC,OAAA,oBACAvH,KAAA,IAGAsH,EAAAthB,MAAAoH,SAAAmB,MAAA1G,OAAA,EACA2d,EAAAlgB,QAAAmO,QAAA6T,EAAAthB,MAAAoH,UAGAF,EAAAmb,gBAAA1B,GAAAxd,KAAA,SAAAC,GACA,GAAA6c,MACA1X,EAAA+Y,EAAAthB,MAAAoH,SAAAmB,MAAAsZ,OAAAze,EAAA3B,KASA,OARA2B,GAAA3B,KAAAmM,IAAA,SAAAvB,EAAA7L,GACAyf,IAAA4B,OAAAxV,EAAAiW,YAEAhB,EAAAC,OAAA,oBACAhZ,QACA0X,eACAjG,KAAA,IAEAwF,EAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GAIJ,MAHA8d,GAAAC,OAAA,oBACAvH,KAAA,IAEAwF,EAAAlgB,QAAAqiB,OAAAne,OAIA+e,sBAAA,SAAAjB,EAAAX,GAWA,MAVAzZ,GAAA8B,iBAAA2X,GAAAxd,KAAA,SAAAC,GAMA,MALAke,GAAAC,OAAA,mBACA3Y,MAAAxF,EAAA0e,UAAAC,YACA1Y,MAAAjG,EAAA3B,KACAme,KAAAxc,EAAAwc,OAEAJ,EAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,MAIAgf,kBAAA,SAAAlB,EAAAX,GACA,MAAAA,GAAAlZ,UAOAP,EAAAqC,aAAAoX,GAAAxd,KAAA,SAAAC,GACA,MAAAoc,GAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,KATAgc,EAAAlgB,QAAAqiB,QACAC,KAAA,GACAjX,IAAA,YAWA8X,kBAAA,SAAAnB,EAAAX,GACA,MAAAA,GAAAlZ,UAOAP,EAAAwb,aAAA/B,GAAAxd,KAAA,SAAAC,GACA,MAAAoc,GAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,KATAgc,EAAAlgB,QAAAqiB,QACAC,KAAA,GACAjX,IAAA,YAWAgY,oBAAA,SAAArB,EAAAX,GACA,MAAAA,GAAAlZ,UAOAP,EAAA0b,eAAAjC,GAAAxd,KAAA,SAAAC,GACA,OAAAzB,GAAA,EAAAC,EAAAwB,EAAA3B,KAAAI,OAA0CF,EAAAC,EAASD,IACnDyB,EAAA3B,KAAAE,GAAAwf,aAAA,CAOA,OALAG,GAAAC,OAAA,mBACA3Y,MAAAxF,EAAA0e,UAAAC,YACAtgB,KAAA2B,EAAA3B,KACAme,KAAAxc,EAAAwc,OAEAJ,EAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,KAjBAgc,EAAAlgB,QAAAqiB,QACAC,KAAA,GACAjX,IAAA,YAmBAkY,yBAAA,SAAAvB,EAAAX,GACA,MAAAA,GAAAmC,UAMA5b,EAAA6b,oBAAApC,GAAAxd,KAAA,SAAAC,GAEA,OADA3B,GAAA6f,EAAAthB,MAAAkB,QAAAO,KACAE,EAAA,EAAAC,EAAAH,EAAAI,OAAsCF,EAAAC,EAASD,IAC/CF,EAAAE,GAAAqhB,YAAArC,EAAAmC,YACArhB,EAAAE,GAAAshB,gBAAA7f,EAAA0e,UACArgB,EAAAE,GAAAuhB,WAAA9f,EAAAwc,KACAne,EAAAE,GAAAwhB,OAAA1hB,EAAAE,GAAAwhB,OAAAtB,OAAAze,EAAA3B,MAMA,OAHA6f,GAAAC,OAAA,mBACA9f,SAEA+d,EAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,KAnBAgc,EAAAlgB,QAAAqiB,QACAC,KAAA,GACAjX,IAAA,YAqBAyY,gBAAA,SAAA9B,EAAAX,GACA,MAAAA,GAAA7W,WAOA5C,EAAAmc,WAAA1C,GAAAxd,KAAA,SAAAC,GACA,MAAAoc,GAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,KATAgc,EAAAlgB,QAAAqiB,QACAC,KAAA,GACAjX,IAAA,YAWA2Y,gBAAA,SAAAhC,EAAAX,GAqBA,MApBAzZ,GAAAqc,YACAC,MAAA7C,EAAA6C,MACAzD,YAAAY,EAAAZ,YACA0D,cAAA9C,EAAA8C,cACAC,aAAA/C,EAAA+C,aACAC,kBAAAhD,EAAAgD,kBACAC,eAAAjD,EAAAiD,eACAC,cAAAlD,EAAAkD,cACA1R,UAAAwO,EAAAxO,UACA2R,UAAAnD,EAAAmD,UACAC,QAAApD,EAAAoD,UAAgC5gB,KAAA,SAAAC,GAKhC,MAJAke,GAAAC,OAAA,mBACAzX,WAAA1G,EAAA0G,aAGA0V,EAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,MAKAwgB,mBAAA,SAAA1C,EAAAX,GAsBA,MArBAzZ,GAAA+c,eACAT,MAAA7C,EAAA6C,MACAzD,YAAAY,EAAAZ,YACAjW,WAAA6W,EAAA7W,WACA2Z,cAAA9C,EAAA8C,cACAC,aAAA/C,EAAA+C,aACAC,kBAAAhD,EAAAgD,kBACAC,eAAAjD,EAAAiD,eACAC,cAAAlD,EAAAkD,cACA1R,UAAAwO,EAAAxO,UACA2R,UAAAnD,EAAAmD,UACAC,QAAApD,EAAAoD,UAAgC5gB,KAAA,SAAAC,GAKhC,MAJAke,GAAAC,OAAA,mBACAzX,WAAA1G,EAAA0G,aAGA0V,EAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,MAKA0gB,sBAAA,SAAA5C,EAAAX,GACA,MAAAA,GAAAlZ,UAOAP,EAAAid,iBAAAxD,GAAAxd,KAAA,SAAAC,GAIA,MAHAke,GAAAC,OAAA,mBACAthB,KAAAmD,EAAAnD,OAEAuf,EAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,KAZAgc,EAAAlgB,QAAAqiB,QACAC,KAAA,GACAjX,IAAA,YAcAyZ,gBAAA,SAAA9C,EAAAX,GAgBA,MAfAzZ,GAAAmd,YACAva,WAAA6W,EAAA7W,WACAmB,cAAA0V,EAAA1V,cACAqZ,aAAA3D,EAAA2D,aACAC,gBAAA5D,EAAA4D,gBACAnZ,eAAAuV,EAAAvV,iBAA8CjI,KAAA,SAAAC,GAK9C,MAJAke,GAAAC,OAAA,mBACAvW,WAAA5H,EAAA4H,aAGAwU,EAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,MAKAghB,sBAAA,SAAAlD,EAAAX,GACA,MAAAA,GAAAmC,UAMA5b,EAAAud,kBACA3B,UAAAnC,EAAAmC,YACI3f,KAAA,SAAAC,GACJ,MAAAoc,GAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,KAVAgc,EAAAlgB,QAAAqiB,QACAC,KAAA,GACAjX,IAAA,YAaA+Z,eAAA,SAAApD,EAAAX,GACA,MAAAA,GAAAlZ,WAAAkZ,EAAAgE,UAMAzd,EAAA0d,WACAnd,UAAAkZ,EAAAlZ,UACAkd,UAAAhE,EAAAgE,YACIxhB,KAAA,SAAAC,GACJ,MAAAoc,GAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,KAXAgc,EAAAlgB,QAAAqiB,QACAC,KAAA,GACAjX,IAAA,YAcAka,kBAAA,SAAAvD,EAAAX,GAaA,MAZAzZ,GAAA4d,cACAlc,MAAA+X,EAAA/X,QACIzF,KAAA,SAAAC,GAKJ,MAJAke,GAAAC,OAAA,oBACArB,KAAA9c,EAAA3B,OAGA+d,EAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,MAKAuhB,mBAAA,SAAAzD,EAAAX,GA0BA,MAzBAzZ,GAAA8d,eACAha,WAAA2V,EAAA3V,WACAC,cAAA0V,EAAA1V,cACAqZ,aAAA3D,EAAA2D,aACAC,gBAAA5D,EAAA4D,gBACAnZ,eAAAuV,EAAAvV,iBAA8CjI,KAAA,SAAAC,GAC9Cke,EAAAC,OAAA,mBACAvW,WAAA5H,EAAA4H,YAGA,QADA3B,GAAAiY,EAAAthB,MAAA+K,QAAA1B,MACA1H,EAAA,EAAAC,EAAAyH,EAAAxH,OAAuCF,EAAAC,EAASD,IAChD0H,EAAA1H,GAAAqJ,YAAA2V,EAAA3V,aACA3B,EAAA1H,GAAAsJ,cAAA0V,EAAA1V,cACA5B,EAAA1H,GAAA2iB,aAAA3D,EAAA2D,aACAjb,EAAA1H,GAAA4iB,gBAAA5D,EAAA4D,gBAMA,OAHAjD,GAAAC,OAAA,uBACAlY,UAEAmW,EAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,MAKAyhB,sBAAA,SAAA3D,EAAAX,GACA,MAAAA,GAAAgE,UAOAzd,EAAAge,iBAAAvE,GAAAxd,KAAA,SAAAC,GAIA,MAHAke,GAAAC,OAAA,mBACAthB,KAAAmD,EAAAnD,OAEAuf,EAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,KAZAgc,EAAAlgB,QAAAqiB,QACAC,KAAA,GACAjX,IAAA,YAcAwa,gBAAA,SAAA7D,EAAAX,GACAW,EAAAthB,MAAAoH,SAAA5G,QACAmgB,EAAArY,KAAAyX,YAAAuB,EAAAthB,MAAAoH,SAAA5G,MAEA0G,GAAAe,eAAA0Y,GAAAxd,KAAA,SAAAC,GAMA,MALAke,GAAAC,OAAA,eACA3Y,MAAAxF,EAAA0e,UAAAC,YACA1Y,MAAAjG,EAAA3B,KACAme,KAAAxc,EAAAwc,OAEAJ,EAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,MAGA4hB,mBAAA,SAAA9D,EAAAX,GACA,MAAAA,GAAAgE,UAMAzd,EAAAme,WAAA1E,GAAAxd,KAAA,SAAAC,GACA,MAAAoc,GAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,KARAgc,EAAAlgB,QAAAqiB,QACAC,KAAA,GACAjX,IAAA,YAUA2a,gBAAA,SAAAhE,EAAAX,GACA,MAAAA,GAAAlZ,UAMAP,EAAAc,WAAA2Y,GAAAxd,KAAA,SAAAC,GACA,MAAAoc,GAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,KARAgc,EAAAlgB,QAAAqiB,QACAC,KAAA,GACAjX,IAAA,YAUA4a,sBAAA,SAAAjE,EAAAX,GAYA,MAXAzZ,GAAA2B,iBAAA8X,GAAAxd,KAAA,SAAAC,GAMA,MALAke,GAAAC,OAAA,mBACA3Y,MAAAxF,EAAA0e,UAAAC,YACA1Y,MAAAjG,EAAA3B,KACAme,KAAAxc,EAAAwc,OAEAJ,EAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,SX+nGMgiB,OACA,SAAU7mB,EAAQC,EAASC,GAEjC,YAGAC,QAAOC,eAAeH,EAAS,cAC9BI,OAAO,GAGR,IAAIugB,GAAW1gB,EAAoB,QAE/B2gB,EAQJ,SAAgCpgB,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,IARhDmgB,GY1sHvCkG,EAAA5mB,EAAA,QAAY6C,EZgtHZ,SAAiCtC,GAAO,GAAIA,GAAOA,EAAIC,WAAc,MAAOD,EAAc,IAAIsgB,KAAa,IAAW,MAAPtgB,EAAe,IAAK,GAAI4D,KAAO5D,GAAWN,OAAOoO,UAAUyS,eAAe/U,KAAKxL,EAAK4D,KAAM0c,EAAO1c,GAAO5D,EAAI4D,GAAgC,OAAtB0c,GAAOpgB,QAAUF,EAAYsgB,GAF5N+F,EAmBtC7mB,GAAQU,SY/sHPU,MAhBD,WACC,OACC0B,SACCD,QACAmH,MAAO,GAERpH,QACCC,SAEDikB,cAQDjF,WACCkF,mBADU,SACU3lB,EAAO2gB,GAC1B,IAAK,GAAI3d,KAAO2d,GACf3gB,EAAM0B,QAAQsB,GAAO2d,EAAQ3d,IAG/B4iB,kBANU,SAMS5lB,EAAO2gB,GACzB,IAAK,GAAI3d,KAAO2d,GACf3gB,EAAMwB,OAAOwB,GAAO2d,EAAQ3d,IAG9B6iB,kBAXU,SAWS7lB,EAAO2gB,GACzB,IAAK,GAAI3d,KAAO2d,GACf3gB,EAAM0lB,OAAO1iB,GAAO2d,EAAQ3d,KAI/Bqe,SACCyE,uBADQ,SACgBxE,EAASX,GAWhC,MAVcjf,GAAQqkB,eAAepF,GAASxd,KAAM,SAAAC,GAMnD,MALAke,GAAQC,OAAO,sBACd9f,KAAM2B,EAAI3B,KACVme,KAAMxc,EAAIwc,KACVhX,MAAOxF,EAAI0e,UAAUC,cAEfvC,EAAAlgB,QAAQmO,QAAQrK,KACrBG,MAAO,SAAAC,GACT,MAAOgc,GAAAlgB,QAAQqiB,OAAOne,MAIxBwiB,yBAdQ,SAckB1E,EAASX,GASlC,MARcjf,GAAQmC,mBAAmBV,KAAM,SAAAC,GAI9C,MAHAke,GAAQC,OAAO,qBACd9f,KAAM2B,EAAI3B,OAEJ+d,EAAAlgB,QAAQmO,QAAQrK,KACrBG,MAAO,SAAAC,GACT,MAAOgc,GAAAlgB,QAAQqiB,OAAOne,MAIxByiB,yBAzBQ,SAyBkB3E,EAASX,GAClC,MAAKA,GAAQuF,MAGCxkB,EAAQykB,iBAAiBxF,GAASxd,KAAM,SAAAC,GAIrD,MAHAke,GAAQC,OAAO,qBACd9f,KAAM2B,EAAI3B,OAEJ+d,EAAAlgB,QAAQmO,QAAQrK,KACrBG,MAAO,SAAAC,GACT,MAAOgc,GAAAlgB,QAAQqiB,OAAOne,KARfgc,EAAAlgB,QAAQ8mB,aAYjBC,oBAvCQ,SAuCa/E,EAASX,GAC7B,MAAKA,GAAQ2F,SAAY3F,EAAQuF,MAGnBxkB,EAAQ6kB,YAAY5F,GAASxd,KAAM,SAAAC,GAChD,MAAOoc,GAAAlgB,QAAQmO,QAAQrK,KACrBG,MAAO,SAAAC,GACT,MAAOgc,GAAAlgB,QAAQqiB,OAAOne,KALfgc,EAAAlgB,QAAQ8mB,gBZ8tHbI,OACA,SAAU7nB,EAAQC,EAASC,GAEjC,cAC4B,SAASgI,GAErC/H,OAAOC,eAAeH,EAAS,cAC3BI,OAAO,GalsHX,IAAAC,GAAAJ,EAAA,ObusHAD,GAAQU,SACJE,KAAM,WACF,OACIsI,QatsHZ,GbusHYgE,QatsHZ,GbusHYJ,aatsHZ,EbusHYC,gBatsHZ,GbusHYC,aatsHZ,EbusHYC,gBarsHZ,KbysHIhM,UAAU,EAAIZ,EAAMa,WAChBN,KAAM,SAAcQ,GAChB,MAAOA,GavsHnBymB,Ub0sHItkB,SACI4J,MAAO,WACHzL,KAAKQ,OAAOoC,SAAS,iBazsHjC,Ib2sHQ8I,KAAM,WazsHd,GAAAtJ,GAAApC,Ib4sHY,OAAKuG,GAAE6f,KAAKpmB,KAAKwH,UAKbxH,KAAKoL,aa3sHrB,Eb4sHgBpL,KAAKqL,gBa3sHrB,Gb8sHiB9E,EAAE6f,KAAKpmB,KAAKwL,UAKbxL,KAAKsL,aa3sHrB,Eb4sHgBtL,KAAKuL,gBa3sHrB,Ob8sHYvL,MAAKQ,OAAOoC,SAAS,sBACjB4E,QAAWxH,Ka3sH3BwH,Qb4sHgB6e,aAAgBrmB,Ka3sHhCwL,UAAA3I,KAAA,SAAAC,Gb4sHgBV,EAAM5B,OAAOoC,SAAS,iBa1sHtC,Gb2sHgBR,EAAM5B,OAAOoC,SAAS,kBAClB0e,Ia1sHpB,Eb2sHoBrc,Ka1sHpB,Mb2sHoBoF,IazsHpB,Wb2sHepH,MAAM,SAAUC,GACfd,EAAM5B,OAAOoC,SAAS,ca1sHtCM,ObwrHgBlD,KAAKsL,aa3sHrB,Eb4sHgBtL,KAAKuL,gBa3sHrB,YACA,KbgsHgBvL,KAAKoL,aa3sHrB,Eb4sHgBpL,KAAKqL,gBa3sHrB,UACA,QbyuH6Bf,KAAKhM,EAASC,EAAoB,UAIzD+nB,OACA,SAAUjoB,EAAQC,EAASC,GAEjC,cAC4B,SAASgI,GAErC/H,OAAOC,eAAeH,EAAS,cAC3BI,OAAO,Gc5qHX,IAAAC,GAAAJ,EAAA,QAEAK,EAAAL,EAAA,QdirHIM,EAEJ,SAAgCC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,IAFjDF,EAItCN,GAAQU,SACJE,KAAM,WACF,OcnrHRC,OAAAN,EAAAG,QdqrHYmJ,QcprHZ,GdqrHY1I,UAIRF,UAAU,EAAIZ,EAAMa,WAChB+C,SAAU,SAAkB7C,GACxB,MAAOA,GAAMD,KcrrHzBE,QdwrHIkC,SACIsT,SAAU,SAAkBoR,EAASC,GcvrH7C,GAAApkB,GAAApC,Id0rHY,IAAIwmB,EACA,OczrHhB,Cd4rHYxmB,MAAKQ,OAAOoC,SAAS,oBACjBsD,WcxrHhBqgB,IADA1jB,KAAA,SAAA4jB,Gd2rHgBrkB,EAAM5B,OAAOoC,SAAS,0BcvrHtCC,KAAA,WdwrHoBT,EAAM5B,OAAOoC,SAAS,kBAClB0e,IctrHxB,EdurHwBrc,KctrHxB,MdurHwBoF,IcnrHxB,SdsrHoB,IAAIhI,GAAiBD,EAAME,ScrrH/CC,QdsrHoBH,GAAMI,OAAOO,SAASV,EAAeK,IAAKN,EAAMG,SAAUF,EAAeM,QAASN,EcrrHtGW,QdsrHmBC,MAAM,SAAUC,GACfd,EAAM5B,OAAOoC,SAAS,ccrrH1CM,QdyrHQwjB,cAAe,WcrrHvB,GAAAljB,GAAAxD,IdwrHY,KAAKA,KAAKmI,QACN,OcvrHhB,CdyrHYnI,MAAKQ,OAAOoC,SAAS,oBACjB+jB,OAAQ3mB,KcvrHxBmI,UADAtF,KAAA,SAAAlD,Gd0rHgB6D,EAAO/D,KctrHvBE,EdwrHgB6D,EAAOhD,OAAOoC,SAAS,iBcvrHvCjD,KdwrHesD,MAAM,SAAUC,GACfM,EAAOhD,OAAOoC,SAAS,ccvrHvCM,Md0rHQ0jB,OAAQ,SAAgB1d,GctrHhC,GAAAxF,GAAA1D,IdyrHY,KAAKA,KAAKuC,SAASuD,QACf,MAAO9F,MAAKQ,OAAOoC,SAAS,eACxB0e,KcxrHpB,GdyrHoBjX,IcvrHpB,cd0rH6C,IAAtBrK,KAAKP,KAAKonB,UAAuC,GAAtB7mB,KAAKP,KAAKonB,SAC5C7mB,KAAKQ,OAAOoC,SAAS,kBACjB+jB,OAAQ3mB,KAAKP,KcxrHjCgB,MADAoC,KAAA,SAAAC,Gd2rHoBY,EcvrHpBgjB,gBdyrHoBhjB,EAAOlD,OAAOoC,SAAS,iBcxrH3CE,KdyrHmBG,MAAM,SAAUC,GACfQ,EAAOlD,OAAOoC,SAAS,ccxrH3CM,Kd2rHgBlD,KAAKQ,OAAOoC,SAAS,kBACjB+jB,OAAQ3mB,KAAKP,KcxrHjCgB,MADAoC,KAAA,SAAAC,Gd2rHoBY,EcvrHpBgjB,gBdyrHoBhjB,EAAOlD,OAAOoC,SAAS,iBcxrH3CE,KdyrHmBG,MAAM,SAAUH,GACfY,EAAOlD,OAAOoC,SAAS,ccxrH3CM,Qd4rHQ4jB,eAAgB,WACZ,GAAI1f,GctrHhBpH,IdwrHY,KAAKA,KAAKuC,SAASuD,QACf,MAAO9F,MAAKQ,OAAOoC,SAAS,eACxB0e,KcvrHpB,GdwrHoBjX,IctrHpB,cd0rHYrK,MAAKQ,OAAOoC,SAAS,qBACjByE,McvrHhB,EdwrHgBpC,KcvrHhB,OdwrHgBqC,MACIC,McvrHpB,cdwrHoBC,QcvrHpB,2CdwrHoBC,UAAW,WACPL,EcvrHxB2f,gBd4rHQA,SAAU,WctrHlB,GAAAne,GAAA5I,IdyrHY,IAAuB,GAAnBA,KAAKP,KAAKunB,MAKV,MAJAhnB,MAAKQ,OAAOoC,SAAS,eACjB0e,KcxrHpB,GdyrHoBjX,IcvrHpB,aACA,Cd2rHYrK,MAAKQ,OAAOoC,SAAS,iBACjB+jB,OAAQ3mB,KAAKP,KcxrH7BgB,MADAoC,KAAA,SAAAC,Gd2rHgB8F,EAAOpI,OAAOoC,SAAS,kBACnB0e,IcxrHpB,EdyrHoBrc,KcxrHpB,MdyrHoBoF,IcvrHpB,WdyrHepH,MAAM,SAAUC,GACf0F,EAAOpI,OAAOoC,SAAS,ccxrHvCM,Md2rHQ+jB,UAAW,WACP,IAAKjnB,KAAKuC,SAASuD,QACf,MAAO9F,MAAKQ,OAAOoC,SAAS,eACxB0e,KctrHpB,GdurHoBjX,IcrrHpB,cdyrHYrK,MAAKQ,OAAOoC,SAAS,qBACjByE,MctrHhB,EdurHgBpC,KctrHhB,SdurHgBiiB,QACIC,WAAYnnB,KAAKP,KctrHrCgB,IdurHoB2mB,acprHpB,OdyrHI3jB,QAAS,WctrHb,GAAA0F,GAAAnJ,IdyrHQuG,GAAE,QAAQnB,GAAG,QAAS,SAAU8D,GAC5B,GAAIme,GAAO9gB,EAAE2C,EcxrHzBxD,OdyrHiB2hB,GAAKtV,SAAS,cAAqD,GAArCsV,EAAKhe,QAAQ,cAAc9H,SAC1D4H,EAAOme,iBcxrHvB,EdyrHgBne,EAAOoe,kBcxrHvB,Kd4rHQvnB,KAAKmI,QAAUnI,KAAK8D,KAAKC,YcrrHjC,WdurHQ/D,KctrHR0mB,oBdyrH6Bpc,KAAKhM,EAASC,EAAoB,UAIzDipB,OACA,SAAUnpB,EAAQC,EAASC,GAEjC,YAGAC,QAAOC,eAAeH,EAAS,cAC3BI,OAAO,Ge/zHX,IAAAC,GAAAJ,EAAA,QAEAK,EAAAL,EAAA,Qfo0HIM,EAEJ,SAAgCC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,IAFjDF,EAItCN,GAAQU,SACJE,KAAM,WACF,Oer0HRC,OAAAN,EAAAG,Qfw0HYyoB,Wev0HZ,Efw0HY5iB,Uev0HZ,Efw0HY6B,Sev0HZ,Gfw0HYghB,Ket0HZ,If00HIpoB,SACAC,UAAU,EAAIZ,EAAMa,WAChB+f,IAAK,SAAa7f,GACd,MAAOA,GAAMkH,Kez0HzB2Y,Kf20HQoI,WAAY,WACR,MAAO5U,MAAK8B,KAAK7U,KAAKQ,OAAOd,MAAMkH,KAAK2Y,IAAIjX,Me10HxD,If60HQ7I,KAAM,SAAcC,GAChB,MAAOA,GAAMD,Ke50HzBE,Mf80HQkH,IAAK,SAAanH,GACd,MAAOA,GAAMkH,Ke70HzBE,Yfg1HIjF,SACI+lB,UAAW,SAAmB3iB,Ge/0HtC,GAAA7C,GAAApC,Ifk1HY,SAAKA,KAAK2nB,cAGE,QAAR1iB,GAAoC,GAAlBjF,KAAK6E,cAGf,SAARI,GAAmBjF,KAAK6E,WAAa7E,KAAK2nB,gBAGzC3nB,KAAKynB,YAGVznB,KAAK2nB,Yeh1HjB,Efk1HwB,QAAR1iB,EACAjF,Kej1HhB6E,Yfm1HgB7E,Kej1HhB6E,Yfo1HwB,QAARI,EACAjF,KAAK0nB,Kej1HrB,Kfi1H6B1nB,KAAK6E,UAAY,GAET,EAAjB7E,KAAK6E,UAAgB,GAAK7E,KAAK2nB,WAC/B3nB,KAAK0nB,Kej1HzB,Kfi1HiC1nB,KAAK6E,UAAY,GAE9B7E,KAAK0nB,KAA+B,IAAxB1nB,KAAKuf,IAAIxW,MAAMxH,OAAe,Gej1H9D,Qfq1HYuN,YAAW,SAAUhM,GACjBV,EAAMqlB,Wej1HtB,GACA,Ufm1HQI,WAAY,We30HpB,GAAArkB,GAAAxD,If80HYA,MAAKQ,OAAOoC,SAAS,mBACjBiF,QACIC,We70HpB,If80HoBC,KAAQ/H,Ke70H5B6E,Uf80HoB6B,SAAY1G,Ke50HhC0G,Uf60HgBsB,MACIE,ae30HpB,OARArF,KAAA,SAAAC,Gfq1HoBA,GAASA,EAAI3B,MAAU2B,EAAI3B,KAAKI,SAChCiC,EAAOqB,Ue10H3B,Gf60HgBrB,EAAOhD,OAAOoC,SAAS,iBe10HvCE,Kf20HeG,MAAM,SAAUC,GACfM,EAAOhD,OAAOoC,SAAS,ce10HvCM,Of80HIO,QAAS,WACLzD,KAAKiK,OAAO,YAAa,SAAUC,EAAQC,GACvCnK,KAAK6E,Uez0HjB,Ef00HY7E,Kez0HZ6nB,ef40HQ7nB,Kez0HR6nB,gBf+0HMC,OACA,SAAUzpB,EAAQC,EAASC,GgBnqIjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,ShB4qIMypB,OACA,SAAU1pB,EAAQC,KAMlB0pB,OACA,SAAU3pB,EAAQC,EAASC,GAEjC,YAkBA,SAAS0pB,GAAuBnpB,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GiBrqIvF,QAAS2mB,GAAe7hB,GACvB,GAAI3D,GAAMioB,EAAAC,QAAU,qBAiBpB,QAhBc,EAAAC,EAAAppB,UACbqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,EACRkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KA2BpB,QAASkZ,GAAiBjiB,GACzB,GAAI3D,GAAMioB,EAAAC,QAAU,uBAiBpB,QAhBc,EAAAC,EAAAppB,UACbqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,EACRkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KAoBpB,QAAS8b,GAAW7kB,GACnB,GAAI3D,GAAMioB,EAAAC,QAAU,mBAAoBvkB,EAAOgiB,KAG/C,OAAK0C,UAOE1kB,GAAO8kB,SACP,EAAAN,EAAAppB,UACNqpB,OAAQ,SACRpoB,IAAKA,EACL6N,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GACf,OAAO,EAAAub,EAAAM,YAAW7b,OAnBd,EAAAub,EAAAM,aACNlH,KAAM,GACNjX,IAAK,QAqCR,QAAS4b,GAAYriB,GACpB,GAAI3D,GAAMioB,EAAAC,QAAU,oBAAqBvkB,EAAOoiB,QAAS,IAAKpiB,EAAOgiB,KAGrE,OAAK0C,UAOE1kB,GAAO8kB,SACP,EAAAN,EAAAppB,UACNqpB,OAAQ,MACRpoB,IAAKA,EACL6N,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GACf,OAAO,EAAAub,EAAAM,YAAW7b,OAnBd,EAAAub,EAAAM,aACNlH,KAAM,GACNjX,IAAK,QA0CR,QAAS9G,GAAiBK,GACzB,GAAI3D,GAAMioB,EAAAC,QAAU,uBAGpB,OAAKG,IAOS,EAAAF,EAAAppB,UACbqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,EACRkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,MAnBX,EAAAub,EAAAM,aACNlH,KAAM,GACNjX,IAAK,QjBq+HR7L,OAAOC,eAAeH,EAAS,cAC9BI,OAAO,IAERJ,EAAQkqB,WAAalqB,EAAQiqB,QAAUjqB,EAAQiF,iBAAmBjF,EAAQ2nB,YAAc3nB,EAAQmqB,WAAanqB,EAAQunB,iBAAmBvnB,EAAQmnB,mBAAiBkD,EiB3sIjK,IAAAC,GAAArqB,EAAA,QjB+sII6pB,EAAUH,EAAuBW,GiB9sIrCV,EAAA3pB,EAAA,QACAsqB,EAAAtqB,EAAA,QjBmtIIuqB,EAAab,EAAuBY,GiBltIpCP,EAAQQ,EAAA9pB,QAAQwR,IAAI,QjBq1IxBlS,GiB7lICmnB,iBjB8lIDnnB,EiB7lICunB,mBjB8lIDvnB,EiB7lICmqB,ajB8lIDnqB,EiB7lIC2nB,cjB8lID3nB,EiB7lICiF,mBjB8lIDjF,EiB5lICiqB,QjB4lIiBL,EAAQK,QAC1BjqB,EiB5lICkqB,WjB4lIoBN,EAAQM,YAIvBO,OACA,SAAU1qB,EAAQC,EAASC,GAEjC,YAGAC,QAAOC,eAAeH,EAAS,cAC3BI,OAAO,GkBpuIX,IAAAC,GAAAJ,EAAA,QAEAK,EAAAL,EAAA,QlByuIIM,EAEJ,SAAgCC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,IAFjDF,EAItCN,GAAQU,SACJE,KAAM,WACF,OkB3uIRC,OAAAN,EAAAG,QlB6uIY6F,UkB5uIZ,ElB6uIY6B,SkB5uIZ,ElB6uIYxE,MkB3uIZ,KlB+uII5C,OkB7uIJ,WlB8uIIC,UAAU,EAAIZ,EAAMa,WAChB8I,MAAO,SAAe5I,GAClB,MAAOA,GAAMspB,KkB9uIzB1gB,OlBgvIQ7I,KAAM,SAAcC,GAChB,MAAOA,GAAMD,KkBhvIzBE,MlBkvIQoJ,MAAO,SAAerJ,GAClB,MAAOA,GAAMspB,KkBlvIzBjgB,OlBovIQgO,KAAM,WACF,MAAuB,aAAhB/W,KAAK+B,SAA0B/B,KAAKmI,SAAWnI,KAAKP,KkBnvIvEgB,OlBsvIIoB,SACIkF,WAAY,SAAoBlC,GAC5B,GAAI7E,KAAK6E,WAAaA,EAClB,OkBnvIhB,ClBqvIY7E,MAAK6E,UkBnvIjBA,ElBovIY7E,KkBnvIZgH,WlBqvIQiiB,SAAU,SAAkBxoB,GkBnvIpC,GAAA2B,GAAApC,IlBsvIYA,MAAKQ,OAAOoC,SAAS,iBACjB+jB,OkBrvIhBlmB,IADAoC,KAAA,SAAAC,GlBwvIgBV,EkBpvIhB4E,UlBsvIgB5E,EAAM5B,OAAOoC,SAAS,iBkBrvItCE,KlBsvIeG,MAAM,SAAUC,GACfd,EAAM5B,OAAOoC,SAAS,ckBrvItCM,MlBwvIQgmB,UAAW,SAAmBzoB,GkBrvItC,GAAA+C,GAAAxD,IlBwvIYA,MAAKQ,OAAOoC,SAAS,kBACjB+jB,OkBvvIhBlmB,IADAoC,KAAA,SAAAC,GlB0vIgBU,EkBtvIhBwD,UlBwvIgBxD,EAAOhD,OAAOoC,SAAS,iBkBvvIvCE,KlBwvIeG,MAAM,SAAUC,GACfimB,MAAM3oB,OAAOoC,SAAS,ckBvvItCM,MlB0vIQkmB,UAAW,SAAmB3oB,GkBvvItC,GAAAiD,GAAA1D,IlB0vIYA,MAAKQ,OAAOoC,SAAS,kBACjB+jB,OkBzvIhBlmB,IADAoC,KAAA,SAAAC,GlB4vIgBY,EkBxvIhBsD,UlB0vIgBtD,EAAOlD,OAAOoC,SAAS,iBkBzvIvCE,KlB0vIeG,MAAM,SAAUC,GACfQ,EAAOlD,OAAOoC,SAAS,ckBzvIvCM,MlB4vIQmmB,YAAa,WkBzvIrB,GAAAzgB,GAAA5I,IlB4vIYA,MAAKQ,OAAOoC,SAAS,oBACjBkF,WkB3vIhB,IlB4vIgB5F,MAASlC,KAAKkC,OkB3vI9B,GlB4vIgB6F,KAAQ/H,KkB3vIxB6E,UlB4vIgB6B,SAAY1G,KkB3vI5B0G,WAAA7D,KAAA,SAAAC,GlB4vIgB8F,EAAO3G,MAAM,eAAgB2G,EkBzvI7CN,OlB2vIgBM,EAAOpI,OAAOoC,SAAS,iBkB1vIvCE,KlB2vIeG,MAAM,SAAUC,GACf0F,EAAOpI,OAAOoC,SAAS,ckB1vIvCM,MlB6vIQomB,cAAe,WkB1vIvB,GAAAngB,GAAAnJ,IlB6vIYA,MAAKQ,OAAOoC,SAAS,sBACjB+jB,OAAU3mB,KAAKmI,QAAUnI,KAAKmI,QkB5vI9C,GlB6vIgBL,WkB5vIhB,IlB6vIgBC,KAAQ/H,KkB5vIxB6E,UlB6vIgB6B,SAAY1G,KkB5vI5B0G,WAAA7D,KAAA,SAAAC,GlB6vIgBqG,EAAOlH,MAAM,eAAgBkH,EkB1vI7Cb,OlB4vIgBa,EAAO3I,OAAOoC,SAAS,iBkB3vIvCE,KlB4vIeG,MAAM,SAAUC,GACfiG,EAAO3I,OAAOoC,SAAS,ckB3vIvCM,MlB8vIQqmB,YAAa,WkB3vIrB,GAAAjgB,GAAAtJ,IlB8vIYA,MAAKQ,OAAOoC,SAAS,oBACjB+jB,OAAU3mB,KAAKmI,QAAUnI,KAAKmI,QkB7vI9C,GlB8vIgBL,WkB7vIhB,IlB8vIgBC,KAAQ/H,KkB7vIxB6E,UlB8vIgB6B,SAAY1G,KkB7vI5B0G,WAAA7D,KAAA,SAAAC,GlB8vIgBwG,EAAOrH,MAAM,eAAgBqH,EkB3vI7ChB,OlB6vIgBgB,EAAO9I,OAAOoC,SAAS,iBkB5vIvCE,KlB6vIeG,MAAM,SAAUC,GACfoG,EAAO9I,OAAOoC,SAAS,ckB5vIvCM,MlB+vIQsmB,aAAc,WkB5vItB,GAAA7f,GAAA3J,IlB+vIYA,MAAKQ,OAAOoC,SAAS,qBACjB8D,SAAU1G,KkB9vI1B0G,SlB+vIgB7B,UAAW7E,KkB9vI3B6E,YAFAhC,KAAA,SAAAC,GlBkwIgB6G,EAAO1H,MAAM,eAAgB0H,EkB7vI7CrB,OlB+vIgBqB,EAAOnJ,OAAOoC,SAAS,iBkB9vIvCE,KlB+vIeG,MAAM,SAAUH,GACf6G,EAAOnJ,OAAOoC,SAAS,ckB9vIvCM,QlBiwIQ8D,QAAS,WACe,UAAhBhH,KAAK+B,QACL/B,KkB7vIhBqpB,clB8vIuC,aAAhBrpB,KAAK+B,QACZ/B,KkB5vIhBwpB,elB6vIuC,cAAhBxpB,KAAK+B,QACZ/B,KkB3vIhBspB,gBlB4vIuC,YAAhBtpB,KAAK+B,SACZ/B,KkB3vIhBupB,gBlB+vII7f,QAAS,WkB3vIb,GAAAE,GAAA5J,IlB8vIQA,MAAKgC,UAAU2B,IAAI,gBAAiB,SAAUC,GAC1C,GAAIgG,EAAO1H,OAAS0B,EAAO1B,MACvB,OkB7vIhB,ClB+vIY0H,GAAO1H,MAAQ0B,EkB7vI3B1B,MlB8vIY0H,EkB7vIZ5C,alBgwIIvD,QAAS,WACLzD,KAAKkC,MAAQlC,KAAK8D,KAAKC,YkB5vI/B,SlB6vIQ/D,KAAKmI,QAAUnI,KAAK8D,KAAKC,YkB1vIjC,WlB4vIQ/D,KkB3vIRgH,alBiwIMyiB,KACA,SAAUprB,EAAQC,EAASC,GAEjC,YmBtgJA,SAASgqB,GAAStN,GAKjB,MAHIA,GAASyO,QAGNxK,EAAAlgB,QAAQqiB,OAAOpG,GAGvB,QAASuN,GAAW7b,GACnB,MACQ4b,GADF5b,GAAWA,EAAM2U,KAAO3U,EAAM2U,IAAM,EAC1B3U,GAGZ2U,IAAK3U,GAASA,EAAM2U,MAAQ,EAC/BjX,IAAKsC,GAASA,EAAMtC,KAAO,OAC3BsC,MAAOA,InB0/ITnO,OAAOC,eAAeH,EAAS,cAC9BI,OAAO,IAERJ,EAAQkqB,WAAalqB,EAAQiqB,QAAUjqB,EAAQqrB,QAAUrrB,EAAQsrB,WAAatrB,EAAQ6pB,QAAU7pB,EAAQurB,YAAUlB,EAElH,ImB7hJIR,GnB6hJAlJ,EAAW1gB,EAAoB,QAE/B2gB,EAEJ,SAAgCpgB,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,IAFhDmgB,GmB9hJnC2K,EAAa,GACbD,EAAU,GACVE,EAAU7oB,OAAOnB,SAASoB,KAAKlB,QAAQ,aAAe,CAOzDzB,GA0BA6pB,QA1BAA,EAAU,2BACV7pB,EA2BAqrB,QA3BAA,EAAU,IACVrrB,EAyBAsrB,WAzBAA,EAAa,GnBsjJdtrB,EmB/hJCurB,UnBgiJDvrB,EmB/hJC6pB,UnBgiJD7pB,EmB/hJCsrB,anBgiJDtrB,EmB/hJCqrB,UnBgiJDrrB,EmB/hJCiqB,UnBgiJDjqB,EmB/hJCkqB,cnBmiJKsB,KACA,SAAUzrB,EAAQC,EAASC,GoBllJjCF,EAAAC,SAAgB4F,OAAA,WAAmB,GAAAC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OACAE,YAAA,aACGF,EAAA,OACHE,YAAA,qBACGF,EAAA,OACHE,YAAA,gBACGF,EAAA,OACHE,YAAA,SACGF,EAAA,KACHG,OACAxD,KAAAkD,EAAAlE,IAAA8pB,SAEG5lB,EAAAO,GAAA,UAAAP,EAAAO,GAAA,uBAAAJ,EAAA,KACHG,OACAxD,KAAAkD,EAAAlE,IAAA8pB,SAEG5lB,EAAAO,GAAA,UAAAP,EAAAO,GAAA,uBAAAJ,EAAA,KACHG,OACAxD,KAAAkD,EAAAlE,IAAA8pB,SAEG5lB,EAAAO,GAAA,UAAAP,EAAAO,GAAA,uBAAAJ,EAAA,KACHG,OACAxD,KAAAkD,EAAAlE,IAAA8pB,SAEG5lB,EAAAO,GAAA,UAAAP,EAAAO,GAAA,uBAAAJ,EAAA,KACHG,OACAxD,KAAAkD,EAAAlE,IAAA8pB,SAEG5lB,EAAAO,GAAA,UAAAP,EAAAO,GAAA,uBAAAJ,EAAA,KACHG,OACAxD,KAAAkD,EAAAlE,IAAA8pB,SAEG5lB,EAAAO,GAAA,UAAAP,EAAAO,GAAA,uBAAAJ,EAAA,KACHG,OACAxD,KAAAkD,EAAAlE,IAAAuL,WAEGrH,EAAAO,GAAA,YAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,SACGL,EAAAO,GAAA,8DAAAP,EAAAO,GAAA,KAAAP,EAAAyH,GAAA,QACFzF,iBAAA,WAA+B,GAAAhC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CACvE,OAAAE,GAAA,OACAE,YAAA,iBACGF,EAAA,OACHE,YAAA,SACGF,EAAA,OACHE,YAAA,cACGF,EAAA,OACHE,YAAA,OACGF,EAAA,OACHG,OACAoH,IAAAtN,EAAA,eAEG4F,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,sBpB0lJMwlB,KACA,SAAU3rB,EAAQC,KAMlB2rB,KACA,SAAU5rB,EAAQC,EAASC;;;;CqBppJjC,SAAA2rB,EAAAC,GAGA9rB,EAAAC,QAAA6rB,KAICnqB,EAAA,WACD,YAIA,SAAAwM,GAAAC,GACA,GAAAC,EAIA,WAHAlE,SAAAmE,MACA,wEAIAD,GAAAD,EACAC,EAAAE,UAAApK,OAAA,GAAA4nB,GAIA,QAAAA,KACApqB,KAAAqqB,eAfA,GAAA3d,EAmHA,OAjGA0d,GAAAxd,WAKA7J,SAAA,SAAAL,EAAAhE,EAAAiE,EAAA2nB,GACA,IACA,IAAAtpB,OAAAupB,aACA,MAAAvqB,MAGA,MAAAkJ,GACA,MAAAlJ,MAEA,GAAAwH,GAAA,EAEA,KAAA8iB,EACA,MAAAtqB,KAGA,IAAAwqB,KACAA,GAAA7nB,QAAA,eACA6nB,EAAAC,YAAA9nB,EACA6nB,EAAAF,WAAA,GAAA/U,OAAAmV,WAAAJ,EAAAK,SAAAL,EAAA,OACAE,EAAAhjB,QAAA9I,EACA8I,EAAAojB,KAAAC,UAAAL,EAEA,KACAxqB,KAAAqqB,YAAA3nB,GAAA8E,EACA+iB,aAAAO,QAAApoB,EAAA8E,GAEA,MAAA0B,GACA,MAAAlJ,MAEA,MAAAA,OAKAyC,SAAA,SAAAC,EAAAC,EAAAooB,GACA,IACA,IAAA/pB,OAAAupB,aACA,SAGA,MAAArhB,GACA,SAGA,GAAA1B,GAAA,EAMA,MAJAA,EADAujB,EACAR,aAAAS,QAAAtoB,GAEA1C,KAAAqqB,YAAA3nB,IAAA6nB,aAAAS,QAAAtoB,IAEyB,QACzB,IAAA8E,EAAAzH,QAAA,oBACA,GAAAyqB,GAAAI,KAAAK,MAAAzjB,EAEA,OAAAgjB,GAAAC,aAAA9nB,EACA,GAGA6nB,EAAAF,YAAA,GAAA/U,OAAAmV,UACAF,EAAAhjB,SAEAxH,KAAAqD,YAAAX,GACA,IAGA,MAAA8E,IAMAnE,YAAA,SAAAX,GACA,IACA,IAAA1B,OAAAupB,aACA,MAAAvqB,MAGA,MAAAkJ,GACA,MAAAlJ,MAKA,MAHAuqB,cAAAW,WAAAxoB,GACA1C,KAAAqqB,YAAA3nB,OAAAimB,SACA3oB,MAAAqqB,YAAA3nB,GACA1C,QAKAwM,UACA7J,QAAA,YrBiqJMwoB,KACA,SAAU9sB,EAAQC,EAASC,GAEjC,YAGAC,QAAOC,eAAeH,EAAS,cAC3BI,OAAO,GsBltJX,IAAA0sB,GAAA7sB,EAAA,QtButJI8sB,EAEJ,SAAgCvsB,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,IAFpDssB,EAInC9sB,GAAQU,SACJE,KAAM,WACF,OACIoJ,MsB1tJZ,EtB2tJYS,QACI9J,KsBztJhB,QtB0tJgB+D,KsBztJhB,MACA+V,IAAAsS,EAAArsB,QtB0tJgBuI,MsBztJhB,UtB0tJgByY,KsBxtJhB,oFtB0tJgB/gB,KsBxtJhB,QtBytJgB+D,KsBxtJhB,MACA+V,IAAAsS,EAAArsB,QtBytJgBuI,MsBxtJhB,UtBytJgByY,KsBxtJhB,kFtBytJgBJ,MsBxtJhB,MtBytJgB0L,SsBxtJhB,ItBytJgB1qB,QsBvtJhB,OtBytJgB3B,KsBvtJhB,QtBwtJgB+D,KsBvtJhB,MACA+V,IAAAsS,EAAArsB,QtBwtJgBuI,MsBvtJhB,UtBwtJgByY,KsBvtJhB,kFtBwtJgBJ,MsBvtJhB,MtBwtJgB0L,SsBvtJhB,ItBwtJgB1qB,QsBptJhB,OtButJYiE,UsBttJZ,EtButJY6B,SsBttJZ,EtButJY6kB,YsBrtJZ,ItBytJI1pB,SACIkF,WAAY,SAAoBlC,GAC5B,GAAI7E,KAAK+G,YAAclC,EACnB,OsBvtJhB,CtBytJY7E,MAAK+G,WsBvtJjBlC,GtBytJQ4gB,eAAgB,WsBvtJxB,GAAArjB,GAAApC,ItB0tJYA,MAAKQ,OAAOoC,SAAS,0BACjBmF,KAAQ/H,KsBztJxB6E,UtB0tJgB6B,SAAY1G,KsBztJ5B0G,StB0tJgBoB,WsBztJhB,EtB0tJgByjB,YAAevrB,KsBztJ/BurB,cAJA1oB,KAAA,SAAAlD,GtB+tJgByC,EAAM5B,OAAOoC,SAAS,iBsBztJtCjD,KtB0tJesD,MAAM,SAAUC,GACfd,EAAM5B,OAAOoC,SAAS,csBztJtCM,OtB6tJIO,QAAS,WACLzD,KsBxtJRylB,oBtB8tJM+F,KACA,SAAUntB,EAAQC,EAASC,GuB/2JjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,SvBw3JMmtB,KACA,SAAUptB,EAAQC,KAMlBotB,KACA,SAAUrtB,EAAQC,KAMlBqtB,KACA,SAAUttB,EAAQC,KAMlBstB,KACA,SAAUvtB,EAAQC,EAASC,GwB35JjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,SxBo6JMutB,KACA,SAAUxtB,EAAQC,GyBp7JxBD,EAAAC,SAAgB4F,OAAA,WAAmB,GAAAC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OACAQ,aACA7F,KAAA,OACA8F,QAAA,SACArG,MAAAyF,EAAA,UACAa,WAAA,cAEAR,YAAA,cACAY,IACAQ,MAAAzB,EAAA0F,OAEGvF,EAAA,QAAAH,EAAAO,GAAA,KAAAJ,EAAA,QAAAH,EAAAO,GAAA,KAAAP,EAAAyH,GAAA,MACFzF,iBAAA,WAA+B,GAAAhC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CACvE,OAAAE,GAAA,OACAE,YAAA,kBACGF,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,aACGL,EAAAO,GAAA,czB27JGonB,KACA,SAAUztB,EAAQC,EAASC,GAEjC,YAGAC,QAAOC,eAAeH,EAAS,cAC3BI,OAAO,G0B/xJX,IAAAC,GAAAJ,EAAA,O1BoyJAD,GAAQU,SACJE,KAAM,WACF,OACI6sB,a0BnyJZ,E1BoyJYlnB,U0BnyJZ,E1BoyJY6B,S0BlyJZ,E1BoyJY9F,Q0BnyJZ,G1BoyJY2qB,Y0BlyJZ,I1BsyJIhsB,UAAU,EAAIZ,EAAMa,WAChB4B,QAAS,SAAiB1B,GACtB,MAAOA,GAAM0B,Q0BpyJzBA,W1BuyJIS,SACImqB,aAAc,SAAsB9rB,EAAO+rB,EAAQC,G0BtyJ3D,GAAA9pB,GAAApC,I1ByyJgBE,IAASF,KAAK+rB,YACd/rB,KAAK+rB,a0BxyJrB,E1B0yJgB/rB,KAAK+rB,Y0BxyJrB7rB,E1B2yJwB,GAARgsB,GACAlsB,KAAKQ,OAAOoC,SAAS,uBACjBojB,QAAShmB,K0BvyJ7BurB,Y1BwyJoB3F,M0BvyJpBqG,IAFAppB,KAAA,SAAAC,G1B2yJoBV,EAAMJ,UAAUC,M0BvyJpC,oB1BwyJoBG,E0BtyJpBqjB,iB1BwyJoBrjB,EAAM5B,OAAOoC,SAAS,iB0BvyJ1CE,K1BwyJmBG,MAAM,SAAUC,GACfd,EAAM5B,OAAOoC,SAAS,c0BvyJ1CM,M1B2yJQuiB,eAAgB,W0BvyJxB,GAAAjiB,GAAAxD,I1B0yJYA,MAAKQ,OAAOoC,SAAS,0BACjBmF,KAAQ/H,K0BzyJxB6E,U1B0yJgB6B,SAAY1G,K0BzyJ5B0G,S1B0yJgBoB,W0BzyJhB,E1B0yJgByjB,YAAevrB,K0BzyJ/BurB,cAJA1oB,KAAA,SAAAC,G1B+yJgBU,EAAOhD,OAAOoC,SAAS,iB0BzyJvCE,K1B0yJeG,MAAM,SAAUC,GACfM,EAAOhD,OAAOoC,SAAS,c0BzyJvCM,M1B4yJQ6D,WAAY,SAAoBlC,GAC5B,GAAI7E,KAAK6E,WAAaA,EAClB,O0BzyJhB,C1B2yJY7E,MAAK6E,U0BzyJjBA,E1B0yJY7E,K0BzyJZylB,kB1B2yJQwB,UAAW,SAAmBE,GAC1BnnB,KAAKQ,OAAOoC,SAAS,qBACjByE,M0BxyJhB,E1ByyJgBpC,K0BxyJhB,S1ByyJgBiiB,QACIC,W0BxyJpBA,E1ByyJoBC,a0BtyJpB,M1B0yJQvB,iBAAkB,SAA0BD,G0BvyJpD,GAAAliB,GAAA1D,I1B0yJYA,MAAKQ,OAAOoC,SAAS,4BACjBgjB,M0BzyJhBA,IADA/iB,KAAA,SAAAC,G1B4yJgBY,EAAOlD,OAAOoC,SAAS,iB0BzyJvCE,K1B0yJeG,MAAM,SAAUC,GACfQ,EAAOlD,OAAOoC,SAAS,c0BzyJvCM,M1B4yJQ6f,WAAY,SAAoB1C,G0BxyJxC,GAAAzX,GAAA5I,I1B2yJYA,MAAKQ,OAAOoC,SAAS,mBACjBupB,cAAiB9L,E0B1yJjC8L,c1B2yJgBC,oBAAuB/L,E0B1yJvC+L,oB1B2yJgBxrB,QAAWZ,K0B1yJ3BY,Q1B2yJgB4I,WAAc6W,E0B1yJ9B7W,W1B2yJgBkB,WAAc2V,E0B1yJ9B3V,aAAA7H,KAAA,SAAAC,G1B2yJgB8F,EAAOhI,Q0BzyJvB,G1B0yJgBgI,EAAOmjB,a0BzyJvB,E1B0yJgBnjB,E0BxyJhB6c,iB1B0yJgB7c,EAAOpI,OAAOoC,SAAS,iB0BzyJvCE,K1B0yJeG,MAAM,SAAUC,GACf0F,EAAOpI,OAAOoC,SAAS,c0BzyJvCM,M1B4yJQmpB,YAAa,SAAqBzoB,GAC9B,IAAKA,EACD,O0BxyJhB,C1B0yJY5D,MAAK+iB,YACDqJ,oBAAuBxoB,E0BxyJvCuoB,c1ByyJgBvrB,QAAWZ,K0BxyJ3BY,Q1ByyJgB4I,WAAc5F,E0BxyJ9B4F,W1ByyJgBkB,WAAc9G,E0BvyJ9B8G,e1B0yJIjH,QAAS,WACLzD,K0BtyJRylB,oB1B4yJM6G,KACA,SAAUjuB,EAAQC,KAMlBiuB,KACA,SAAUluB,EAAQC,G2B1lKxBD,EAAAC,SAAgB4F,OAAA,WAAmB,GAAAC,GAAAnE,KAAaoE,EAAAD,EAAAE,cAChD,QAD0EF,EAAAI,MAAAD,IAAAF,GAC1E,OACAI,YAAA,WACAC,OACAoW,GAAA1W,EAAA6T,cAGC7R,qB3BgmKKqmB,KACA,SAAUnuB,EAAQC,EAASC,G4BtmKjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,S5B+mKMmuB,KACA,SAAUpuB,EAAQC,EAASC,G6B7nKjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,S7BsoKMouB,KACA,SAAUruB,EAAQC,G8BtpKxBD,EAAAC,SAAgB4F,OAAA,WAAmB,GAAAC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OACAE,YAAA,qBACGF,EAAA,OACHE,YAAA,0BACGL,EAAAqG,GAAArG,EAAAvD,QAAA,cAAA1B,EAAAytB,GACH,MAAAroB,GAAA,OACAE,YAAA,wBACAC,OACAmoB,WAAA1tB,EAAAO,KAAAgB,IACAosB,kBAAA3tB,EAAAwjB,cAEKpe,EAAA,OACLE,YAAA,qBACKF,EAAA,OACLE,YAAA,iBACKF,EAAA,OACLE,YAAA,YACKF,EAAA,OACLG,OACAoH,IAAA3M,EAAAO,KAAAyG,YAAA/B,EAAAhF,YAEKgF,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,aACKL,EAAAO,GAAAP,EAAA4B,GAAA7G,EAAAO,KAAA2M,gBAAAjI,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,kBACKL,EAAAO,GAAAP,EAAA4B,GAAA7G,EAAA0B,YAAAuD,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,oBACKF,EAAA,OACLE,YAAA,eACAY,IACAQ,MAAAzB,EAAA8iB,aAEK9iB,EAAAO,GAAA,QAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,gBACAY,IACAQ,MAAA,SAAAN,GACAnB,EAAA2oB,aAAAH,GAAA,OAGKxoB,EAAAO,GAAA,QAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,gBACKL,EAAAO,GAAAP,EAAA4B,GAAA7G,EAAA6tB,iBAAA5oB,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,kBACAY,IACAQ,MAAAzB,EAAAggB,oBAEK7f,EAAA,QACLK,MAAAzF,EAAA8tB,YAAA,YACK1oB,EAAA,UAAAH,EAAAO,GAAAP,EAAA4B,GAAA7G,EAAA6L,uBAAA5G,EAAAO,GAAA,SAAAxF,EAAA2hB,YAAAvc,EAAA,OACLE,YAAA,yBACKF,EAAA,OACLE,YAAA,wBACKF,EAAA,SACLQ,aACA7F,KAAA,QACA8F,QAAA,UACArG,MAAAyF,EAAA,YACAa,WAAA,gBAEAP,OACAQ,KAAA,OACAC,YAAA,WAEAC,UACAzG,MAAAyF,EAAA,aAEAiB,IACAK,MAAA,SAAAH,GACAA,EAAAI,OAAAC,YACAxB,EAAA8oB,YAAA3nB,EAAAI,OAAAhH,aAGKyF,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,qBACAY,IACAQ,MAAA,SAAAN,GACAnB,EAAA+oB,YAAAhuB,EAAAwjB,gBAGKve,EAAAO,GAAA,UAAAP,EAAA0B,KAAA1B,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,oBACKL,EAAAqG,GAAAtL,EAAA,gBAAAiuB,EAAAjtB,GACL,MAAAoE,GAAA,OACAE,YAAA,eACAC,OACAmoB,WAAAO,EAAA1tB,KAAAgB,IACAosB,kBAAAM,EAAAzK,WACA0K,aAAAltB,KAEOoE,EAAA,OACPE,YAAA,yBACOF,EAAA,OACPE,YAAA,cACOF,EAAA,KAAAA,EAAA,UAAAH,EAAAO,GAAAP,EAAA4B,GAAAonB,EAAA1tB,KAAA2M,cAAAjI,EAAAO,GAAA,KAAAyoB,EAAA,cAAA7oB,EAAA,MAAAH,EAAAO,GAAA,QAAAJ,EAAA,UAAAH,EAAAO,GAAAP,EAAA4B,GAAAonB,EAAAE,cAAAjhB,gBAAAjI,EAAA0B,KAAA1B,EAAAO,GAAA,kCAAAP,EAAA4B,GAAAonB,EAAAvsB,SAAA,kCAAAuD,EAAAO,GAAA,KAAAJ,EAAA,OACPE,YAAA,gBACOF,EAAA,OACPE,YAAA,oBACAY,IACAQ,MAAAzB,EAAA8iB,aAEO9iB,EAAAO,GAAA,QAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACPE,YAAA,qBACAY,IACAQ,MAAA,SAAAN,GACAnB,EAAA2oB,aAAAH,EAAAzsB,OAGOiE,EAAAO,GAAA,QAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACPE,YAAA,qBACOL,EAAAO,GAAAP,EAAA4B,GAAAonB,EAAAJ,qBAAA5oB,EAAAO,GAAA,KAAAxE,GAAAhB,EAAA2hB,YAAAvc,EAAA,OACPE,YAAA,mBACOF,EAAA,OACPE,YAAA,wBACOF,EAAA,SACPQ,aACA7F,KAAA,QACA8F,QAAA,UACArG,MAAAyF,EAAA,YACAa,WAAA,gBAEAP,OACAQ,KAAA,OACAC,YAAA,WAEAC,UACAzG,MAAAyF,EAAA,aAEAiB,IACAK,MAAA,SAAAH,GACAA,EAAAI,OAAAC,YACAxB,EAAA8oB,YAAA3nB,EAAAI,OAAAhH,aAGOyF,EAAAO,GAAA,KAAAJ,EAAA,OACPE,YAAA,qBACAY,IACAQ,MAAA,SAAAN,GACAnB,EAAAmpB,iBAAApuB,EAAAwjB,WAAAyK,EAAAzK,gBAGOve,EAAAO,GAAA,UAAAP,EAAA0B,SACF1B,EAAAO,GAAA,KAAAxF,EAAA2jB,QAAA3jB,EAAAyjB,gBAAAlB,YAAAviB,EAAA2jB,OAAAthB,OAAA,EAAA+C,EAAA,OACLE,YAAA,iBACKL,EAAAO,GAAA,wBAAAJ,EAAA,QAAAH,EAAAO,GAAAP,EAAA4B,GAAA7G,EAAAyjB,gBAAAlB,YAAAviB,EAAA2jB,OAAAthB,WAAA4C,EAAAO,GAAA,QAAAJ,EAAA,UACLc,IACAQ,MAAA,SAAAN,GACAnB,EAAAopB,kBAAAruB,OAGKiF,EAAAO,GAAA,cAAAP,EAAA0B,MAAA,OACF1B,EAAAO,GAAA,QAAAP,EAAAvD,QAAA0H,MAAAhE,EAAA,SAAAH,EAAA0B,MAAA,GAAA1B,EAAAO,GAAA,KAAAJ,EAAA,QACHG,OACA6D,MAAAnE,EAAAvD,QAAA0H,MACA/G,OAAA4C,EAAAuC,SACAxG,MAAAiE,EAAAU,WAEAO,IACA6F,YAAA9G,EAAA4C,eAEG,IACFZ,qB9B4pKKqnB,KACA,SAAUnvB,EAAQC,EAASC,GAEjC,YAGAC,QAAOC,eAAeH,EAAS,cAC3BI,OAAO,IAEXJ,EAAQU,SACJM,O+BnyKJ,U/BwyKMmuB,KACA,SAAUpvB,EAAQC,EAASC,GgC30KjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,ShCo1KMovB,KACA,SAAUrvB,EAAQkO,EAAqBhO,GAE7C,ciCn1KA,SAAAD,EAAAqqB,GAKA,QAAAgF,GAAAld,EAAAmd,GAGA,OAFAvvB,GAAAwvB,KAEAxsB,EAAA,EAAiBA,EAAAoP,EAAAlP,SAAgBF,EAAA,CAEjC,KADAhD,EAAAyvB,EAAArd,EAAApP,KAAA8L,EAAAsD,EAAApP,KAEA,+CAAAoP,EAAApP,EAGAwsB,GAAAjd,KAAAvS,GAGAuvB,EAAAvP,MAAA,KAAAwP,GAGA,QAAAE,GAAAlT,EAAAmT,EAAAC,GACA,mBAAApT,GACA,2EAGA,IAAAmT,IAAArF,EACA,gEAGA,IAAAsF,IAAAtF,EACA,uEAGAgF,GAAAK,EAAA,WACAF,EAAAjT,GAAAoT,EAAA5P,MAAA,KAAAhB,aAQA,QAAAlQ,GAAA0N,GAIA,OAHAnV,GAAApH,EACA4vB,EAAArT,EAAAvM,MAAA,SAEA6f,EAAA,EAAkBA,EAAAD,EAAA3sB,SAAuB4sB,EAAA,CACzC,IAAAzoB,EAAAwoB,EAAAC,IACA,MAGAzoB,KAAAwoB,EAAAC,IAGA,MAAAzoB,GAnDA,GAAAooB,KAoFAC,GAAA,uCAWA,GAAA1d,GAAA,SAAAtD,GAGA,WAFAC,KAEAD,EACA,YACG,OAAAA,EACH,OACGA,EAAAqhB,SACH,UAIYC,SAAA/jB,KAAAyC,GAAA4N,MAAA,qBAAA2T,eAYZhe,EAAA,SAAA5K,GAgBA,MAbA2I,GAAAgP,UAAA,SAAAkR,EAAAltB,GACAA,EAAA,GACAgN,EAAAkgB,EAAA,SAAA7vB,EAAAgE,OAJAsK,KAKAtO,IACA2R,EAAA3K,EAAAhD,MAAA2N,EAAA3R,KAAAiT,EAAAtB,EAAA3R,IAAA,mBACA4R,EAAA5K,EAAAhD,GAAAhE,GAEAgH,EAAAhD,GAAAhE,OAMAgH,GAYA2I,EAAA,SAAAvP,EAAA8uB,GACA,GAAArsB,GAAAmB,EAAArB,CAEA,IAAAvC,EAAA,CACA,IACAyC,EAAAzC,EAAAyC,OACI,MAAAoY,GACJpY,MANAyL,GASA,OATAA,KASAzL,GAEA,IAAAmB,IAAA5D,GACA,GAAAA,EAAAugB,eAAA3c,KACA,IAAAkrB,EAAA9uB,EAAA4D,MACA,WAMA,KAAArB,EAAA,EAAeA,EAAAE,EAAYF,IAC3B,QAAAusB,EAAA9uB,EAAAuC,MACA,SAeAyQ,EAAA,SAAAhT,GACA,GAAA0vB,EAEA,KAAA1vB,GAAA,WAAAuR,EAAAvR,GACA,QAGA,KAAA0vB,IAAA1vB,GACA,QAGA,WAeA8Z,EAAA,SAAA3B,EAAAjD,GAWA,QAAAya,GAAAptB,GACA,aAAAgP,EAAA4G,EAAA5V,KACA4V,EAAA5V,GAAA,SAAAsL,KAEAtL,EAAAE,IAAAoL,EAAA8hB,EAAAptB,GAAA2S,EAAArH,KAdA,GAAApL,GAAA0V,EAAA1V,MAEA,cAAA8O,EAAA2D,KACAA,EAAA,cAGAiD,KAAA1V,QACAyS,IAWAya,EAlBA,IAkCAC,EAAA,SAAAzX,EAAAjD,GACA,GAAA1L,GAAA,EAAAuK,EAAAoE,EAAA1V,OAAAotB,EAAA,GAAAC,OAAA/b,EAEAxE,GAAA4I,EAAA,SAAA4X,EAAAxtB,GACAwtB,EAAA,SAAAliB,GACA,GAAAA,EACA,MAAAqH,GAAArH,EAGA,IAAA8O,MAAAzS,MAAAsB,KAAA+S,UACA5B,GAAAqT,QAEAH,EAAAttB,GAAAoa,IACAnT,IAEAuK,IACA8b,EAAAI,QAAA,MACA/a,EAAAqK,MAAAre,KAAA2uB,SAgBAhd,EAAA,SAAAqd,EAAAC,GACA,GAAAA,EAAA,CACA,GAAAL,MAAAhiB,UAAA7M,QACA,MAAA6uB,OAAAhiB,UAAA7M,QAAAuK,KAAA2kB,EAAAD,EAGA,QAAA3tB,GAAA,EAAAE,EAAA0tB,EAAA1tB,OAAyCF,EAAAE,EAAYF,IACrD,GAAA4tB,EAAA5tB,KAAA2tB,EACA,MAAA3tB,GAIA,UAaA6tB,EAAA,SAAAC,EAAAF,GACA,GAAAG,KAEA,WAAA/e,EAAA8e,KACAA,OAGA,UAAA9e,EAAA4e,KACAA,MAGA,QAAA5tB,KAAA8tB,IACA,IAAAxd,EAAAwd,EAAA9tB,GAAA4tB,IACAG,EAAAxe,KAAAue,EAAA9tB,GAGA,SAAA+tB,EAAA7tB,QAAA6tB,GAaAC,EAAA,SAAAC,EAAAC,GACA,GAAAC,KAMA,OALAnhB,GAAAihB,EAAA,SAAAvjB,IACA,IAAA4F,EAAA5F,EAAAwjB,IACAC,EAAA5e,KAAA7E,KAGAyjB,EAAAjuB,OAAAiuB,EAAA,MAYA9d,EAAA,SAAA5S,GACA,GAAAuC,GAAAouB,IAEA,KAAApuB,EAAA,EAAaA,EAAAvC,EAAAyC,OAAgBF,IAC7BouB,EAAApuB,GAAAvC,EAAAuC,EAGA,OAAAouB,GA+EA,QACAlf,KAhEA,WACA,GAAAmf,GAAA,CAEA,iBAAAC,GACA,GAAAtuB,GAAAkP,GAAA,GAAAgF,OAAAmV,UAAA2D,SAAA,GAEA,KAAAhtB,EAAA,EAAcA,EAAA,EAAOA,IACrBkP,GAAAwC,KAAA2J,MAAA,MAAA3J,KAAA6c,UAAAvB,SAAA,GAGA,QAAAsB,GAAA,MAAApf,GAAAmf,KAAArB,SAAA,QAuDAhe,SACAC,SACAjC,OACAyD,aACA8G,WACA8V,aACA/c,UACAud,YACAG,iBACA3d,UACA0U,KApDA,SAAApV,GACA,MAAAA,GAGA6e,OAAAjjB,UAAAwZ,KAAAyJ,OAAAjjB,UAAAwZ,KAAA9b,KAAA0G,KAAAqd,WAAA7c,QAAA,WAAAA,QAAA,WAFAR,GAmDAoC,aArCA,SAAAT,GACA,sBACA,MAAAA,EAGA,IAMAmd,GANAC,GACAC,EAAA,cACAC,EAAA,WACAC,EAAA,QACAC,EAAA,KAWA,OAPAxd,GAAA,qBAAAyd,KAAAzd,EAAA2b,cAAA9c,QAAA,kBACAse,EAAAnd,EAAA,GACAA,KAAA,GAEAod,EAAA1Q,eAAAyQ,KACAnd,GAAAod,EAAAD,IAEAnd,MAiCAob,EAAA,mBACA,0BACA,SAAAsC,GACA,GAAAC,KAEA,QAOA1e,QAAA,SAAA2e,GACA,MAAAF,GAAA/f,OAAAggB,EAAAC,IASA1e,UAAA,SAAAb,GACA,MAAAsf,GAAAtf,OASAwf,EAAA,SAAAxf,GACA,MAAAhR,MAAA6R,UAAAb,IASAyf,QAAA,SAAAzf,GACA,GAAAyK,MAAAzS,MAAAsB,KAAA+S,UAAA,EAEA,OAAArM,GAAAQ,QAAA,qBACA,GAAA9S,GAAA+c,EAAAqT,OACA,qBAAAuB,EAAAhgB,OAAA3R,KAAA,SAkBAqvB,EAAA,yBACA,yBACA,mBACA,SAAAsC,EAAAK,GAEA,GAwDAC,IAEAxgB,SAEAgK,cAGAyW,YAAA,SAAAC,GACA,GAAAxvB,GAAAkT,EAAA6F,EAAA3H,EAAAoe,EAAAviB,MAAA,IAEA,KAAAjN,EAAA,EAAcA,EAAAoR,EAAAlR,OAAkBF,GAAA,GAIhC,IAHA+Y,EAAA3H,EAAApR,EAAA,GAAAiN,MAAA,KAGAiG,EAAA,EAAgBA,EAAA6F,EAAA7Y,OAAiBgT,IACjCvU,KAAAmQ,MAAAiK,EAAA7F,IAAA9B,EAAApR,EAGArB,MAAAma,WAAA1H,EAAApR,IAAA+Y,IAKA0W,cAAA,SAAA7c,EAAA8c,GACA,GAAA3W,GAAA/Y,EAAAkT,EAAAtP,EAAA8R,EAAA/W,KAAAmQ,IAGA,KAAA9O,EAAA,EAAcA,EAAA4S,EAAA1S,OAAoBF,IAGlC,IAFA+Y,EAAAnG,EAAA5S,GAAA8Y,WAAA7L,MAAA,WAEAiG,EAAA,EAAgBA,EAAA6F,EAAA7Y,OAAiBgT,IAAA,CAGjC,SAAA6F,EAAA7F,GACA,QAIA,IADAtP,EAAA8R,EAAA5G,MAAAiK,EAAA7F,KAOM,IAAA8b,EAAA1e,QAAA1M,EAAAkL,IACNA,EAAAS,KAAA3L,OAPA,CACA,IAAA8rB,IAAA,QAAA9d,KAAAmH,EAAA7F,IAGA,QAFApE,GAAAS,KAAA,IAAAwJ,EAAA7F,KASA,MAAApE,IAIA6gB,WAAA,SAAA7gB,GACA,GAAA4G,GAAA/W,KAAAixB,IAuBA,OArBAZ,GAAAhiB,KAAA8B,EAAA,SAAA+gB,GACA,SAAAA,EAEA,MADAD,OACA,CAIA,IAAAf,GAAAgB,EAAAvW,MAAA,oBACAuV,KACA,MAAAA,EAAA,GAEAG,EAAAhiB,KAAA0I,EAAAoD,WAAA,SAAAsV,EAAAyB,GACA,GAAA7W,QAAA,IAAA6V,EAAA,QAAAjd,KAAAie,OACAtgB,KAAAyN,MAAA4S,EAAAla,EAAAoD,WAAA+W,MAGMna,EAAAoD,WAAA+W,OACNtgB,KAAAyN,MAAA4S,EAAAla,EAAAoD,WAAA+W,OAIAD,GAIAE,cAAA,SAAAhhB,GACA,GAAAyH,MAAAqZ,IAgBA,OAdA,WAAAZ,EAAAhgB,OAAAF,KACAA,EAAAkgB,EAAAjK,KAAAjW,GAAA7B,MAAA,YAGA2iB,EAAAjxB,KAAAgxB,WAAA7gB,GAEAyH,EAAAhH,MACArJ,MAAAmpB,EAAA7e,UAAA,SACAsI,WAAA8W,EAAA1vB,OAAA0vB,EAAA3W,KAAA,WAIA1C,EAAAzH,QAEAyH,GAIAwZ,iBAAA,SAAA5T,GACA,GAAA9C,GAAA8C,KAAA7C,MAAA,aACA,OAAAD,GACAA,EAAA,GAAA4T,cAEA,IAGA+C,YAAA,SAAA7T,GACA,MAAAxd,MAAAmQ,MAAAnQ,KAAAoxB,iBAAA5T,KAAA,IAMA,OAFAmT,GAAAC,YA3KA,i9CA6KAD,IAeA5C,EAAA,wBACA,0BACA,SAAAsC,GAgZA,QAAAiB,GAAAC,EAAAC,EAAAC,GAkBA,GAAApwB,GAAA,EACAqwB,EAAA,EACAC,EAAA,EAQAC,GACAC,KAAA,EACAC,OAAA,EACAC,GAAA,EACAC,MAAA,EACAC,GAAA,EACAC,IAAA,EACAC,IAAA,EACAC,KAAA,EACAC,EAAA,EACAC,GAAA,GAWAC,EAAA,SAAAC,GAGA,MAFAA,IAAA,GAAAA,GAAAhhB,QAAA,eACAghB,IAAAhhB,QAAA,qBAAAA,QAAA,UAA0D,KAC1DghB,EAAAjxB,OAAAixB,EAAAlkB,MAAA,WAMAmkB,EAAA,SAAAD,GACA,MAAAA,GAAAE,MAAAF,GAAAZ,EAAAY,KAAA,EAAA7H,SAAA6H,EAAA,MAMA,KAHAjB,EAAAgB,EAAAhB,GACAC,EAAAe,EAAAf,GACAE,EAAA3e,KAAA4f,IAAApB,EAAAhwB,OAAAiwB,EAAAjwB,QACAF,EAAA,EAAcA,EAAAqwB,EAAOrwB,IACrB,GAAAkwB,EAAAlwB,IAAAmwB,EAAAnwB,GAAA,CAKA,GAFAkwB,EAAAlwB,GAAAoxB,EAAAlB,EAAAlwB,IACAmwB,EAAAnwB,GAAAoxB,EAAAjB,EAAAnwB,IACAkwB,EAAAlwB,GAAAmwB,EAAAnwB,GAAA,CACAswB,GAAA,CACA,OACM,GAAAJ,EAAAlwB,GAAAmwB,EAAAnwB,GAAA,CACNswB,EAAA,CACA,QAGA,IAAAF,EACA,MAAAE,EAMA,QAAAF,GACA,QACA,SACA,MAAAE,GAAA,CACA,UACA,SACA,MAAAA,IAAA,CACA,UACA,SACA,MAAAA,IAAA,CACA,UACA,QACA,SACA,WAAAA,CACA,UACA,SACA,SACA,WAAAA,CACA,QACA,QACA,SACA,MAAAA,GAAA,CACA,SACA,aApfA,GAAAiB,GAAA,SAAAjK,GAOA,GAKAkK,GAAA,QAEAC,EAAA,OAGA9jB,EAAA,UAYA+jB,GACAC,IAAA,SAAAC,EAAAC,GACA,WAAAA,EAAA5E,cAAAvuB,QAAAkzB,EAAA3E,gBAEA6E,SAAA,SAAAniB,GACA,MAAAA,GAAAsd,gBAUA8E,GAEAC,IAAA,WAGA,OAAA7D,GAAA8D,EAAAnD,EAAAkC,EAAAkB,EAAA7Y,EAAAC,EAAAtZ,EAAA,EAAAoa,EAAA4B,UAAkFhc,EAAAoa,EAAAla,OAAiBF,GAAA,GAEnG,GAAAmyB,GAAA/X,EAAApa,GACA/B,EAAAmc,EAAApa,EAAA,EAGA,QA7CA,KA6CA,GACAmuB,IACA,KAAA6C,IAAA/yB,GACAi0B,EAAAj0B,EAAA+yB,GA/CA,gBAgDA,GACA7C,EAAA+D,EAAA,QA5DA,GA8DA/D,EAAA+D,OA9DA,GAoEA,IAAAD,EAAAnD,EAAA,EAAgCmD,EAAAE,EAAAjyB,OAAkB+xB,IAElD,GADA5Y,EAAA8Y,EAAAF,GAAAlD,KAAApwB,KAAAyzB,SACA,CACA,IAAApB,EAAA,EAAoCA,EAAA/yB,EAAAiC,OAAkB8wB,IACtD1X,EAAAD,IAAAyV,GACAoD,EAAAj0B,EAAA+yB,GA9DA,gBAgEA,IAAAkB,EAAAhyB,OAAA,EACA,GAAAgyB,EAAAhyB,OAnEA,kBAoEAgyB,GAAA,GAEA/D,EAAA+D,EAAA,IAAAA,EAAA,GAAAjpB,KAAAtK,KAAA2a,GAGA6U,EAAA+D,EAAA,IAAAA,EAAA,GAEkC,GAAAA,EAAAhyB,OA3ElC,kBA6EAgyB,GAAA,IAAAA,EAAA,GAAAnD,MAAAmD,EAAA,GAAAtgB,KAKAuc,EAAA+D,EAAA,IAAA5Y,IAAAnJ,QAAA+hB,EAAA,GAAAA,EAAA,QA3FA,GAwFA/D,EAAA+D,EAAA,IAAA5Y,EAAA4Y,EAAA,GAAAjpB,KAAAtK,KAAA2a,EAAA4Y,EAAA,QAxFA,GA6FkC,GAAAA,EAAAhyB,SAClCiuB,EAAA+D,EAAA,IAAA5Y,EAAA4Y,EAAA,GAAAjpB,KAAAtK,KAAA2a,EAAAnJ,QAAA+hB,EAAA,GAAAA,EAAA,SA9FA,IAiGA/D,EAAA+D,GAAA5Y,OAjGA,EAoGA,OAIA,GAAAD,EAAA,MAEA,MAAA8U,IAGAxe,IAAA,SAAAA,EAAA1D,GAEA,OAAAjM,KAAAiM,GAEA,GAtGA,gBAsGAA,GAAAjM,IAAAiM,EAAAjM,GAAAE,OAAA,GACA,OAAA+xB,GAAA,EAAoCA,EAAAhmB,EAAAjM,GAAAE,OAAmB+xB,IACvD,GAAAP,EAAAC,IAAA1lB,EAAAjM,GAAAiyB,GAAAtiB,GACA,MA5GA,MA4GA3P,MApHA,GAoHAA,MAGkB,IAAA0xB,EAAAC,IAAA1lB,EAAAjM,GAAA2P,GAClB,MAhHA,MAgHA3P,MAxHA,GAwHAA,CAGA,OAAA2P,KAUA0iB,GAEAvX,SACAwX,WACAC,OACAC,GAAA,gBACAC,EAAA,KACAC,IAAA,KAEApxB,SACAqxB,MAAA,KACAC,IAAA,KACAC,IAAA,KACAC,MAAA,OACAC,QAAA,OACAC,QAAA,OACAC,QAAA,OACAP,IAAA,OAKAQ,QACAC,QACAC,OACAC,eAAA,UAEAC,QACAC,IAAA,MACAC,OAAA,YAKAC,IACAC,SACApyB,SACAqyB,GAAA,OACAC,UAAA,SACAC,SAAA,QACAC,KAAA,SACAC,IAAA,mBACAC,MAAA,SACAC,EAAA,SACAC,EAAA,SACAC,IAAA,SACAC,GAAA,UAYAC,GAEAvZ,UAGA,mCACA,oDACA,qCACA,mCAEA2W,EAAA9jB,EAAA6jB,IAEA,+BACAC,EAAA,SAAA9jB,EAAA6jB,IAGA,6BACA,sEAIA,mEAEA,kCAGA,4BACA,mGAEAC,EAAA9jB,EAAA6jB,IAEA,qDACAC,EAAA,MAAA9jB,EAAA6jB,IAEA,mCACAC,EAAA,UAAA9jB,EAAA6jB,IAEA,uCACAC,EAAA,UAAA9jB,EAAA6jB,IAEA,uEAEAC,EAAA9jB,EAAA6jB,IAEA,gCACAC,EAAA,WAAA9jB,EAAA6jB,IAEA,iDACAC,EAAA,UAAA9jB,EAAA6jB,IAEA,8DACAC,EAAA,mBAAA9jB,EAAA6jB,IAEA,sDACA7jB,EAAA6jB,GAAAC,EAAA,mBAEA,yDACA9jB,EAAA6jB,EAAAC,IAEA,oDACAA,GAAAD,EAAAO,EAAApiB,IAAA0iB,EAAAvX,QAAAwX,UAAAC,QAAA5kB,EAAAokB,EAAApiB,IAAA0iB,EAAAvX,QAAAwX,UAAAhxB,WAEA,gCACA,qCACAmwB,EAAA9jB,EAAA6jB,IAGA,6CACAC,EAAA,YAAA9jB,EAAA6jB,IACA,cACA,sGAEA,iFAEA,gDAGA,kGAEA,8BACA,kCACA,uCACA,mCACAC,EAAA9jB,EAAA6jB,IAGA8C,SAEA,uBACA,+DACA,0CACA,iCACA7C,EAAA9jB,IAEA,4BACAA,EAAA8jB,IAGAgC,KAGA,+BACA,+EACAhC,GAAA9jB,EAAAokB,EAAApiB,IAAA0iB,EAAAoB,GAAAC,QAAApyB,WACA,0CACAmwB,EAAA,YAAA9jB,EAAAokB,EAAApiB,IAAA0iB,EAAAoB,GAAAC,QAAApyB,WAGA,kBACAmwB,EAAA,cAAA9jB,IACA,gCACA,sBACA,8EAEA8jB,EAAA9jB,IACA,uDACA8jB,EAAA,WAAA9jB,IACA,yCACA8jB,EAAA,cAAA9jB,IAGA,gDAGA,yBACA,oIAGA,6BACA,wBACA8jB,EAAA9jB,IAEA,iCACA8jB,EAAA,eAAA9jB,IAGA,6BACA8jB,EAAA,WAAA9jB,IAGA,oDACA8jB,EAAA9jB,IAEA,2DACA8jB,EAAA,QAAA9jB,EAAA,YAEA,mCACA8jB,GAAA9jB,EAAA,YAGA,kBACA,qCACA,iFAEA,yBACA8jB,EAAA9jB,IAyCA,WA/BA,UAAA4mB,GAEA,GAAAxlB,GAAAwlB,IAAA50B,eAAA60B,WAAA70B,OAAA60B,UAAAC,UAAA90B,OAAA60B,UAAAC,UA/VA,GAiWA91B,MAAA+1B,WAAA,WACA,MAAA3C,GAAAC,IAAAhV,MAAAre,KAAA01B,EAAAvZ,UAEAnc,KAAAg2B,UAAA,WACA,MAAA5C,GAAAC,IAAAhV,MAAAre,KAAA01B,EAAAC,SAEA31B,KAAAi2B,MAAA,WACA,MAAA7C,GAAAC,IAAAhV,MAAAre,KAAA01B,EAAAZ,KAEA90B,KAAAk2B,UAAA,WACA,OACA9lB,GAAApQ,KAAAyzB,QACAtX,QAAAnc,KAAA+1B,aACAJ,OAAA31B,KAAAg2B,YACAlB,GAAA90B,KAAAi2B,UAGAj2B,KAAAyzB,MAAA,WACA,MAAArjB,IAEApQ,KAAAm2B,MAAA,SAAAP,GAEA,MADAxlB,GAAAwlB,EACA51B,MAEAA,KAAAm2B,MAAA/lB,KAGA8lB,eAsHAhgB,EAAA,WACA,GAAAhI,IACAkoB,iBAgBA,EAGAC,cAAA,WAIA,GAAA3lB,GAAA4lB,SAAAC,cAAA,SACA,UAAA7lB,EAAA8lB,aAAA9lB,EAAA8lB,WAAA,UAGAC,qBAAA,SAAAC,GACA,IACA,QAAArG,EAAA1e,QAAA+kB,GAAA,uBACA,QACO,IAAA11B,OAAA8a,eAAA,CACP,GAAAZ,GAAA,GAAAY,eAEA,IADAZ,EAAAmB,KAAA,WACA,gBAAAnB,GAGA,MAFAA,GAAAwb,eAEAxb,EAAAwb,kBAMM,MAAA/c,IACN,UAIAgd,aAAA,WACA,GAAAC,GAAA,GAAA5d,MASA,OAPA4d,GAAA3d,OAAA,WACA/K,EAAAyoB,aAAA,IAAAC,EAAA1d,OAAA,IAAA0d,EAAA7sB,QAGA+E,WAAA,WACA8nB,EAAA/qB,IAAA,sFACM,IACN,KAGAgrB,sBAAA,WACA,MAAA3oB,GAAAyoB,eAAA,OAAAza,EAAAC,SAAAD,EAAAvZ,SAAA,IAGAm0B,gBAAA,SAAAC,GACA,MAAA7oB,GAAAyoB,cAAAI,EAAA,MAAA7oB,EAAA2oB,yBAGAG,cAAA,WACA,GAAAtmB,GAAA4lB,SAAAC,cAAA,QAEA,OADA7lB,GAAAumB,aAAA,gBACAvmB,EAAA0H,UAIA,iBAAArC,GACA,GAAA0F,MAAAzS,MAAAsB,KAAA+S,UAEA,OADA5B,GAAAqT,QACA,aAAAuB,EAAAhgB,OAAAnC,EAAA6H,IAAA7H,EAAA6H,GAAAsI,MAAAre,KAAAyb,KAAAvN,EAAA6H,OAKAmG,GACAhG,MAEAiG,QAAAyW,EAAAzW,QAAAld,KACA0D,QAAAu0B,WAAAtE,EAAAzW,QAAAyX,OACAkB,GAAAlC,EAAAkC,GAAA71B,KACAk4B,UAAAvE,EAAAkC,GAAAnyB,QAEAy0B,QAAA9F,EAEAja,QAAA,qBACAE,QAAA,2BACA8f,wBAAA,gDAOA,OAFAnb,GAAAob,GAAApb,EAAA4Y,GAEA5Y,IAeA6R,EAAA,yDAAA7R,GAUA,GAAA1L,GAAA,SAAAqK,GACA,sBAAAA,GACAA,EAEAyb,SAAAiB,eAAA1c,IAWA9I,EAAA,SAAAjT,EAAAG,GACA,QAAAH,EAAA04B,WAIA,GAAAnd,QAAA,WAAApb,EAAA,YACAgU,KAAAnU,EAAA04B,WAiIA,QACAhnB,MACAuB,WACAC,SAzHA,SAAAlT,EAAAG,GACA8S,EAAAjT,EAAAG,KACAH,EAAA04B,UAAA14B,EAAA04B,UAAA14B,EAAA04B,UAAAhmB,QAAA,eAAAvS,MAwHAgT,YA5GA,SAAAnT,EAAAG,GACA,GAAAH,EAAA04B,UAAA,CACA,GAAAC,GAAA,GAAApd,QAAA,WAAApb,EAAA,WACAH,GAAA04B,UAAA14B,EAAA04B,UAAAhmB,QAAAimB,EAAA,SAAAC,EAAAC,EAAAC,GACA,YAAAD,GAAA,MAAAC,EAAA,WAyGA1lB,SA5FA,SAAApT,EAAAG,GACA,MAAAH,GAAA+4B,aACA/4B,EAAA+4B,aAAA54B,GACG+B,OAAA82B,iBACH92B,OAAA82B,iBAAAh5B,EAAA,MAAAG,OADG,IA0FH4R,OA3EA,SAAAwW,EAAA0Q,GAOA,QAAAC,GAAA3Q,GACA,GAAA4Q,GAAAC,EAAAxG,EAAA,EAAAyG,EAAA,CASA,OAPA9Q,KACA6Q,EAAA7Q,EAAA+Q,wBACAH,EAAA,eAAAI,EAAAC,WAAAD,EAAAE,gBAAAF,EAAArwB,KACA0pB,EAAAwG,EAAAM,KAAAP,EAAAQ,WACAN,EAAAD,EAAAruB,IAAAouB,EAAAnuB,YAIA4nB,IACAyG,KAlBA,GAAAO,GAAAC,EAAAC,EAAAlH,EAAA,EAAAyG,EAAA,EAAAE,EAAA/B,QAuBA,IArBAjP,IACA0Q,KAAAM,EAAArwB,KAoBAqf,KAAA+Q,uBAAA,OAAAlc,EAAAC,WAAAkc,EAAAQ,cAAAR,EAAAQ,aAAA,GAIA,MAHAF,GAAAX,EAAA3Q,GACAuR,EAAAZ,EAAAD,IAGArG,EAAAiH,EAAAjH,EAAAkH,EAAAlH,EACAyG,EAAAQ,EAAAR,EAAAS,EAAAT,EAKA,KADAO,EAAArR,EACAqR,MAAAX,GAAAW,EAAAtK,UACAsD,GAAAgH,EAAAI,YAAA,EACAX,GAAAO,EAAAK,WAAA,EACAL,IAAAM,YAIA,KADAN,EAAArR,EAAA4R,WACAP,MAAAX,GAAAW,EAAAtK,UACAsD,GAAAgH,EAAAD,YAAA,EACAN,GAAAO,EAAA5uB,WAAA,EACA4uB,IAAAO,UAGA,QACAvH,IACAyG,MA0BArnB,QAdA,SAAAuW,GACA,OACA6R,EAAA7R,EAAA8R,aAAA9R,EAAA+R,YACAC,EAAAhS,EAAAiS,cAAAjS,EAAAkS,kBA2BAxL,EAAA,yBACA,0BACA,SAAAsC,GACA,QAAAmJ,GAAA16B,EAAAJ,GACA,GAAAgE,EACA,KAAAA,IAAA5D,GACA,GAAAA,EAAA4D,KAAAhE,EACA,MAAAgE,EAGA,aAGA,OACA+2B,aAAA,WAOA,QAAAA,GAAAplB,GACArU,KAAAqU,OACArU,KAAAf,KAAAu6B,EAAAE,EAAArlB,GACArU,KAAAoB,QAAApB,KAAAf,KAAA,kBAAAe,KAAAqU,KATA,GAAAqlB,IACAC,aAAA,EACAC,kBAAA,EACAC,OAAA,EAWA,OAFAxJ,GAAA/f,OAAAmpB,EAAAC,GACAD,EAAA7sB,UAAAktB,MAAAltB,UACA6sB,KAGAM,6BAAA,WAEA,QAAAA,GAAA1lB,GACArU,KAAAqU,OACArU,KAAAf,KAAA,+BASA,MANAoxB,GAAA/f,OAAAypB,GACAC,gBAAA,IAGAD,EAAAntB,UAAAktB,MAAAltB,UAEAmtB,KAGAE,WAAA,WAMA,QAAAA,GAAA5lB,GACArU,KAAAqU,OACArU,KAAAf,KAAAu6B,EAAAE,EAAArlB,GACArU,KAAAoB,QAAApB,KAAAf,KAAA,gBAAAe,KAAAqU,KARA,GAAAqlB,IACAQ,aAAA,EACAC,mBAAA,EAYA,OAHA9J,GAAA/f,OAAA2pB,EAAAP,GACAO,EAAArtB,UAAAktB,MAAAltB,UAEAqtB,KAGAG,cAAA,WAYA,QAAAA,GAAA/lB,GACArU,KAAAqU,OACArU,KAAAf,KAAAu6B,EAAAE,EAAArlB,GACArU,KAAAoB,QAAApB,KAAAf,KAAA,mBAAAe,KAAAqU,KAdA,GAAAqlB,IACAW,cAAA,EACAC,aAAA,EACAC,UAAA,EACAC,iBAAA,EACAC,aAAA,EACAC,4BAAA,EACAC,kBAAA,EACAC,WAAA,EAWA,OAFAvK,GAAA/f,OAAA8pB,EAAAV,GACAU,EAAAxtB,UAAAktB,MAAAltB,UACAwtB,KAGAS,aAAA,WA6BA,QAAAA,GAAAxmB,GACArU,KAAAqU,OACArU,KAAAf,KAAAu6B,EAAAE,EAAArlB,GACArU,KAAAoB,QAAApB,KAAAf,KAAA,kBAAAe,KAAAqU,KA/BA,GAAAqlB,IACAoB,eAAA,EACAC,mBAAA,EACAC,sBAAA,EACAC,mBAAA,EACAC,sBAAA,EACAC,oBAAA,EACAT,4BAAA,EACAL,cAAA,EACAT,kBAAA,EACAwB,oBAAA,GACAT,kBAAA,GACAC,WAAA,GACAS,yBAAA,GACAC,cAAA,GACAC,mBAAA,GACAC,eAAA,GACAC,kBAAA,GACAnB,aAAA,GACAoB,YAAA,GACAnB,UAAA,GACAoB,iBAAA,GACAC,mBAAA,GACAC,YAAA,GACAC,sBAAA,GACAC,eAAA,GAWA,OAFA1L,GAAA/f,OAAAuqB,EAAAnB,GACAmB,EAAAjuB,UAAAktB,MAAAltB,UACAiuB,KAGAmB,eAAA,WACA,QAAAA,GAAA3nB,GACArU,KAAAqU,OACArU,KAAAf,KAAA,iBASA,MANAoxB,GAAA/f,OAAA0rB,GACAC,2BAAA,IAGAD,EAAApvB,UAAAktB,MAAAltB,UAEAovB,QAiBAjO,EAAA,0BACA,wBACA,0BACA,SAAA2D,EAAArB,GAOA,QAAA9R,KAEA,GAAA2d,KAEA7L,GAAA/f,OAAAtQ,MAQAS,IAAA,KAOA8X,KAAA,WACAvY,KAAAS,MACAT,KAAAS,IAAA4vB,EAAA9f,KAAA,UAaA4rB,iBAAA,SAAAl3B,EAAA4pB,EAAAuN,EAAAhe,GACA,GAAAjd,GAAA4V,EAAA/W,IAIA,IAFAiF,EAAAorB,EAAAjK,KAAAnhB,GAEA,KAAAgO,KAAAhO,GAKA,WAHAorB,GAAAhiB,KAAApJ,EAAAqJ,MAAA,gBAAArJ,GACA8R,EAAAolB,iBAAAl3B,EAAA4pB,EAAAuN,EAAAhe,IAKAnZ,KAAAqpB,cACA8N,EAAAzR,SAAAyR,EAAA,OAEAj7B,EAAA+6B,EAAAl8B,KAAAS,MAAAy7B,EAAAl8B,KAAAS,KAAAwE,OACA9D,EAAAyP,MAAeie,KAAAuN,WAAAhe,SAAApe,OAEfk8B,EAAAl8B,KAAAS,OACAy7B,EAAAl8B,KAAAS,SAEAy7B,EAAAl8B,KAAAS,KAAAwE,GAAA9D,GAUAk7B,iBAAA,SAAAp3B,GACA,MAAAA,MAAAi3B,EAAAl8B,KAAAS,OAAAy7B,EAAAl8B,KAAAS,KAAAwE,MAAAi3B,EAAAl8B,KAAAS,MAUA67B,oBAAA,SAAAr3B,EAAA4pB,GACA5pB,IAAAqpB,aAEA,IAAAjtB,GAAAF,EAAA+6B,EAAAl8B,KAAAS,MAAAy7B,EAAAl8B,KAAAS,KAAAwE,EAEA,IAAA9D,EAAA,CACA,GAAA0tB,GACA,IAAAxtB,EAAAF,EAAAI,OAAA,EAA+BF,GAAA,EAAQA,IACvC,GAAAF,EAAAE,GAAAwtB,OAAA,CACA1tB,EAAAsI,OAAApI,EAAA,EACA,YAIAF,KAIAA,GAAAI,eACA26B,GAAAl8B,KAAAS,KAAAwE,GAGAorB,EAAAve,WAAAoqB,EAAAl8B,KAAAS,aACAy7B,GAAAl8B,KAAAS,QAWA87B,wBAAA,WACAL,EAAAl8B,KAAAS,YACAy7B,GAAAl8B,KAAAS,MAYA+7B,cAAA,SAAAv3B,GACA,GAAAxE,GAAAU,EAAAsa,EAAAghB,EAAAC,KAAyClN,GAAA,CAEzC,eAAAa,EAAAhgB,OAAApL,GAAA,CAIA,GAFAw3B,EAAAx3B,EAEA,WAAAorB,EAAAhgB,OAAAosB,EAAAx3B,MASA,SAAAysB,GAAAsK,eAAAtK,EAAAsK,eAAAC,2BARAh3B,GAAAw3B,EAAAx3B,SAPyC+H,KASzCyvB,EAAAznB,WATyChI,KASzCyvB,EAAA3nB,SACA4nB,EAAA1nB,MAAAynB,EAAAznB,MACA0nB,EAAA5nB,OAAA2nB,EAAA3nB,QAEA4nB,EAAAC,MAAAF,EAAAE,QAAA,EAoBA,IAbA,IAAA13B,EAAAlF,QAAA,MACA,SAAA0vB,GACAhvB,EAAAgvB,EAAA,GACAxqB,EAAAwqB,EAAA,IACMxqB,EAAAqJ,MAAA,OAEN7N,EAAAT,KAAAS,IAGAwE,IAAAqpB,cAEAntB,EAAA+6B,EAAAz7B,IAAAy7B,EAAAz7B,GAAAwE,GAEA,CAEA9D,EAAAy7B,KAAA,SAAA7K,EAAAE,GAA+B,MAAAA,GAAAmK,SAAArK,EAAAqK,WAE/B3gB,KAAAzS,MAAAsB,KAAA+S,WAGA5B,EAAAqT,QACA4N,EAAAz3B,OACAwW,EAAAsT,QAAA2N,EAGA,IAAAzlB,KACAoZ,GAAAhiB,KAAAlN,EAAA,SAAA07B,GAEAphB,EAAA,GAAA/V,OAAAm3B,EAAAze,MAEAse,EAAAC,MACA1lB,EAAArG,KAAA,SAAAoD,GACAlF,WAAA,WACAkF,GAAA,IAAA6oB,EAAAhO,GAAAxQ,MAAAwe,EAAAze,MAAA3C,KACS,KAGTxE,EAAArG,KAAA,SAAAoD,GACAA,GAAA,IAAA6oB,EAAAhO,GAAAxQ,MAAAwe,EAAAze,MAAA3C,QAIAxE,EAAA1V,QACA8uB,EAAAzX,SAAA3B,EAAA,SAAA/T,GACAssB,GAAAtsB,IAIA,MAAAssB,IASApZ,KAAA,WACApW,KAAAm8B,iBAAA9d,MAAAre,KAAAqd,YASAyf,OAAA,WACA98B,KAAAs8B,oBAAAje,MAAAre,KAAAqd,YASAiB,UAAA,WACAte,KAAAu8B,wBAAAle,MAAAre,KAAAqd,YASAjJ,QAAA,WACA,MAAApU,MAAAw8B,cAAAne,MAAAre,KAAAqd,YAWA0f,4BAAA,SAAAC,GACA,GAAA3D,EAEA,WAAAhJ,EAAAhgB,OAAA2sB,KACAA,MAGA,QAAA37B,GAAA,EAAmBA,EAAA27B,EAAAz7B,OAAqBF,IACxCg4B,EAAA,KAAA2D,EAAA37B,GAEA,aAAAgvB,EAAAhgB,OAAArQ,KAAAq5B,IACAr5B,KAAAm8B,iBAAAa,EAAA37B,GAAArB,KAAAq5B,IACM,cAAAhJ,EAAAhgB,OAAArQ,KAAAq5B,MACNr5B,KAAAq5B,GAAA,SAUA,MAFA9a,GAAAC,SAAA,GAAAD,GAEAA,IAeAwP,EAAA,wCAWA,GAAAkP,GAAA,SAAAjsB,GACA,MAAAksB,UAAAn8B,mBAAAiQ,KAWAmsB,EAAA,SAAAC,GACA,MAAAv5B,oBAAAw5B,OAAAD,IAwIA,QACAH,cACAE,cACAG,KA/HA,SAAAp+B,EAAAq+B,GACA,qBAAAv8B,QAAA,KACA,MAAAu8B,GAAAJ,EAAAn8B,OAAAs8B,KAAAp+B,IAAA8B,OAAAs8B,KAAAp+B,EAoBA,IACAs+B,GAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EADAC,EAAA,oEACA38B,EAAA,EACA48B,EAAA,EACAC,EAAA,GACAC,IAEA,KAAAj/B,EACA,MAAAA,EAGAA,IAAA,EAEA,IACAy+B,EAAAK,EAAAj+B,QAAAb,EAAAk/B,OAAA/8B,MACAu8B,EAAAI,EAAAj+B,QAAAb,EAAAk/B,OAAA/8B,MACAw8B,EAAAG,EAAAj+B,QAAAb,EAAAk/B,OAAA/8B,MACAy8B,EAAAE,EAAAj+B,QAAAb,EAAAk/B,OAAA/8B,MAEA08B,EAAAJ,GAAA,GAAAC,GAAA,GAAAC,GAAA,EAAAC,EAEAN,EAAAO,GAAA,OACAN,EAAAM,GAAA,MACAL,EAAA,IAAAK,EAGAI,EAAAF,KADA,IAAAJ,EACAhO,OAAAwO,aAAAb,GACI,IAAAM,EACJjO,OAAAwO,aAAAb,EAAAC,GAEA5N,OAAAwO,aAAAb,EAAAC,EAAAC,SAEGr8B,EAAAnC,EAAAqC,OAIH,OAFA28B,GAAAC,EAAA7jB,KAAA,IAEAijB,EAAAJ,EAAAe,MAuEAI,KA3DA,SAAAp/B,EAAAq+B,GAKA,GAJAA,GACAN,EAAA/9B,GAGA,kBAAA8B,QAAA,KACA,MAAAA,QAAAs9B,KAAAp/B,EAeA,IACAs+B,GAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EADAC,EAAA,oEACA38B,EAAA,EACA48B,EAAA,EACAM,EAAA,GACAJ,IAEA,KAAAj/B,EACA,MAAAA,EAGA,IACAs+B,EAAAt+B,EAAAs/B,WAAAn9B,KACAo8B,EAAAv+B,EAAAs/B,WAAAn9B,KACAq8B,EAAAx+B,EAAAs/B,WAAAn9B,KAEA08B,EAAAP,GAAA,GAAAC,GAAA,EAAAC,EAEAC,EAAAI,GAAA,MACAH,EAAAG,GAAA,MACAF,EAAAE,GAAA,KACAD,EAAA,GAAAC,EAGAI,EAAAF,KAAAD,EAAAI,OAAAT,GAAAK,EAAAI,OAAAR,GAAAI,EAAAI,OAAAP,GAAAG,EAAAI,OAAAN,SACGz8B,EAAAnC,EAAAqC,OAEHg9B,GAAAJ,EAAA7jB,KAAA,GAEA,IAAAmkB,GAAAv/B,EAAAqC,OAAA,CAEA,QAAAk9B,EAAAF,EAAAv1B,MAAA,EAAAy1B,EAAA,GAAAF,GAAA,MAAAv1B,MAAAy1B,GAAA,OAwBA1Q,EAAA,yBACA,yBACA,uBACA,0BACA,SAAAsC,EAAAqO,EAAAngB,GAcA,QAAA5K,GAAAc,EAAAxP,EAAAiJ,EAAAywB,EAAAC,GAeA,GACAC,GADA9nB,EAAA/W,KAEA8+B,EAAAzO,EAAA9f,KAAAtL,EAAA,KACA85B,EAAAH,GAAA,SAGAnqB,SAGAlB,EAAAurB,GAAA9+B,KASAkO,EAAAmiB,EAAA/f,QAGA0uB,eAAA,EAEAC,qBAAA,EAEAC,eAAA,EAEAC,SAAA,EAEAC,eAAA,EAEAC,qBAAA,EAEAC,cAAA,EAEAC,wBAAA,EAEAC,yBAAA,EAGA/I,sBAAA,EAEAgJ,oBAAA,EAEAC,qBAAA,EAEAC,aAAA,EAEAC,eAAA,EAEAC,iBAAA,EAEAjxB,oBAAA,EAEAkxB,sBAAA,EAEAC,gBAAA,EAEAvxB,YAAA,EAEAwxB,eAAA,EAEAC,oBAAA,EAGAC,iBAAA,EAGAC,iBAAA,GACGjyB,GAIHuG,EAAA2C,iBACA2nB,EAAAprB,EAAAysB,QAAAzB,EAAAlqB,EAAA2C,eAAA2nB,IAIAF,EAAA,WACA,GAAAwB,KACA,QACAjQ,KAAA,SAAA3vB,EAAA6/B,EAAAzR,EAAApT,GACA,GAAAojB,EAAAyB,KACAD,EAAA5/B,KACA4/B,EAAA5/B,IACAugB,QAAAhhB,KACAwe,SAAA,GAAAqgB,GAAAyB,KAGAD,EAAA5/B,GAAA+d,SAAAqQ,IACA,MAAAwR,GAAA5/B,GAAA+d,SAAAqQ,GAAAxQ,MAAAre,KAAAyb,IAKA8kB,eAAA,SAAA9/B,SACA4/B,GAAA5/B,IAGA+/B,mBAAA,WACA,GAAAzpB,GAAA/W,IACAqwB,GAAAhiB,KAAAgyB,EAAA,SAAAvhC,EAAA2B,GACA,aAAA4vB,EAAAhgB,OAAAvR,EAAA0f,SAAA1K,UACAhV,EAAA0f,SAAA1K,QAAAxJ,KAAAxL,EAAAkiB,SAEAjK,EAAAwpB,eAAA9/B,UAQA4vB,EAAA/f,OAAAtQ,MAQAygC,aAAA,EAQAhgC,IAAAq+B,EAQA75B,OASAy7B,KAAA/sB,EAAAysB,QAAAzB,EAAAlqB,EAAA,cAAAsqB,GAQA4B,OAAA7B,EAAA,aAQA8B,QAAA,EAQAnsB,UAWAyB,IAAA,SAAAH,EAAArX,GACA,GAAAmiC,GAAAxjB,UAAA,IAAAnP,CAOA,IAJA,WAAAmiB,EAAAhgB,OAAA0F,IAAA,cAAAsa,EAAAhgB,OAAA3R,KACAqX,EAAApC,EAAAmtB,UAAA/qB,IAGA,WAAAsa,EAAAhgB,OAAA0F,GAAA,CACA,OAAArT,KAAAqT,GACA,IAAA/V,KAAAkW,IAAAxT,EAAAqT,EAAArT,GAAAm+B,GACA,QAGA,UAIA,mBAAAxQ,EAAAhgB,OAAAwwB,EAAA9qB,IACA8qB,EAAA9qB,GAAAzL,KAAAtK,KAAAtB,GAEAA,IAAAmiC,EAAA9qB,IAUAgrB,iBAAA,WACA,GAAA/oB,GAAAgpB,EAAAtC,EAAAluB,IAAAxQ,KAAA2gC,OAwBA,OArBAK,KACAhpB,EAAAhY,KAAAyU,QAAAuD,UAAA0mB,EAAAluB,IAAAxQ,KAAAyU,QAAAuD,WAAAse,SAAAtuB,KAGAg5B,EAAA1K,SAAAC,cAAA,OACAyK,EAAAnmB,GAAA7a,KAAA2gC,OACAK,EAAAxJ,UAAA,yBAAAx3B,KAAAiF,KAEAorB,EAAA/f,OAAA0wB,EAAAh7B,OACAi7B,SAAA,WACAp3B,IAAA,MACA2uB,KAAA,MACAtf,MAAA,MACAnP,OAAA,MACAm3B,SAAA,WAGAlpB,EAAAmpB,YAAAH,GACAhpB,EAAA,MAGAgpB,GASAI,QAAA,WACA,MAAAvC,IAWAwC,SAAA,SAAAC,EAAAC,GACA,GAAA9lB,MAAAzS,MAAAsB,KAAA+S,UAAA,EACA,OAAAtG,GAAAqqB,UAAAhR,KAAA9lB,KAAAtK,UAAAS,IAAA6gC,EAAAC,EAAA9lB,IAYA2U,KAAA,SAAAkR,EAAAC,GACA,GAAA9lB,MAAAzS,MAAAsB,KAAA+S,UAAA,EAEA,OAAAtG,GAAAuqB,IAAAvqB,EAAAuqB,GAAAC,GACAxqB,EAAAuqB,GAAAC,GAAAljB,MAAAre,KAAAyb,GAEA1E,EAAAsqB,SAAAhjB,MAAAre,KAAAqd,YAQAvJ,QAAA,WACA,GAAAiD,EAAA,CAIA,GAAAiqB,GAAAtC,EAAAluB,IAAAxQ,KAAA2gC,OACAK,IACAA,EAAA/H,WAAAuI,YAAAR,GAGAnC,GACAA,EAAA2B,qBAGAxgC,KAAAse,kBACA/K,GAAAvT,KAAAS,KACAT,KAAAS,IAAA,KACAq+B,EAAA/nB,EAAA8nB,EAAAmC,EAAA,SAKAhhC,KAAA0gC,MAAAjsB,EAAA0C,gBAAAnX,KAAAkW,IAAAzB,EAAA0C,iBACAnX,KAAA0gC,MAAA,GAjVA,GAAAe,MAA6BluB,IAyjB7B,OA5NAI,GAAAoJ,MAAA,gCAYApJ,EAAAkC,WAAA,SAAApV,GACA,QAAA8S,EAAA9S,IAAA8S,EAAA9S,IAYAkT,EAAA+tB,eAAA,SAAAz8B,EAAA08B,GACAA,EAAA/0B,UAAA2R,EAAAC,SACAijB,EAAAx8B,GAAA08B,GAYAhuB,EAAAiuB,eAAA,SAAA38B,GACA,MAAAw8B,GAAAx8B,IAAA,MAYA0O,EAAAsC,QAAA,SAAAxV,GACA,GAAAgT,GAAAE,EAAAkC,WAAApV,EAEA,OAAAgT,IAEAhT,IAAAgT,EAAAhT,IACAwE,KAAAwO,EAAAxO,KACAy7B,KAAAjtB,EAAAitB,KACAxqB,IAAA,WACA,MAAAzC,GAAAyC,IAAAmI,MAAA5K,EAAA4J,aAIA,MAYA1J,EAAAmtB,UAAA,SAAAe,GACA,GAAAC,KAEA,kBAAAzR,EAAAhgB,OAAAwxB,GACAA,OAGAxR,EAAAhiB,KAAAwzB,EAAAvzB,MAAA,cAAA5L,GACAo/B,EAAAp/B,IAAA,IAGAo/B,IAYAnuB,EAAAuC,IAAA,SAAAjR,EAAAiJ,GACA,GAAAuF,GAEAitB,EADAiB,EAAAhuB,EAAAiuB,eAAA38B,EAGA,SAAA08B,IACAluB,EAAA,GAAAkuB,IACAxqB,cAAAjJ,IAEAwyB,EAAAjtB,EAAAitB,KACAjtB,EAAAK,YACA4sB,IAeA/sB,EAAAC,QAAA,SAAA1F,EAAA6zB,GACA,GAAAC,IAAAD,GAAApuB,EAAAoJ,OAAAzO,MAAA,UACA,QAAAjN,KAAA2gC,GACA,GAAAruB,EAAAuC,IAAA8rB,EAAA3gC,GAAA6M,GACA,MAAA8zB,GAAA3gC,EAGA,cAcAsS,EAAAysB,QAAA,SAAAzB,EAAAsD,EAAAlD,GACA,GAAA2B,GAAA,IAMA,IAJA,cAAArQ,EAAAhgB,OAAA0uB,KACAA,EAAA,WAGAkD,IAAA5R,EAAAve,WAAA6sB,GAAA,CAoBA,GAlBAtO,EAAAhiB,KAAA4zB,EAAA,SAAAvjC,EAAAqX,GACA,GAAA4oB,EAAAtf,eAAAtJ,GAAA,CACA,GAAAmsB,GAAAvD,EAAA5oB,GAAArX,EAOA,IAJA,qBACAwjC,OAGAxB,GAEM,KAAAA,EAAArQ,EAAAhB,eAAAqR,EAAAwB,IAEN,MAAAxB,IAAA,MAHAA,GAAAwB,KAQAxB,EACA,WAAArQ,EAAA1e,QAAAotB,EAAA2B,GAAA3B,EAAA2B,EAAA,EACI,SAAAA,EACJ,SAGA,MAAA3B,IAWAprB,EAAAwuB,QAAA,WACA,UAUAxuB,EAAAyuB,SAAA,WACA,UAWAzuB,EAAA0uB,QAAA,SAAAC,GACA,kBACA,QAAAA,IAIA3uB,IAeAoa,EAAA,+BACA,wBACA,yBACA,yBACA,SAAA2D,EAAArB,EAAA1c,GAMA,kBACA,GAAAF,EAEA4c,GAAA/f,OAAAtQ,MAQA8d,eAAA,SAAArJ,GAGA,QAAA8tB,GAAA9vB,GACA,GAAAxN,GAAA08B,CAGA,OAAAlvB,GAAAlR,QAMA0D,EAAAwN,EAAAqc,SACA6S,EAAAhuB,EAAAiuB,eAAA38B,KAOAwO,EAAA,GAAAkuB,GAAAltB,GAEAhB,EAAA2C,KAAA,kBAEA3C,EAAAgtB,aAAA,EAGA3xB,WAAA,WACA2E,EAAAmtB,UAEAN,EAAAlsB,QAAA,cAAAX,IACO,KAGPA,EAAA2C,KAAA,mBACA3C,EAAAK,UACAyuB,EAAA9vB,KAMAgB,EAAAitB,SAKAjtB,GAAA8E,WAJA9E,GAAAW,QAAA,cA5BAmuB,GAAA9vB,KARA6tB,EAAAlsB,QAAA,kBAAAsd,GAAA+H,aAAA/H,EAAA+H,aAAAE,oBACAlmB,EAAA,OARA,GAAAuC,GAAAsqB,EAAAtgC,IAyDA,IANA,WAAAqwB,EAAAhgB,OAAAoE,GACAuB,EAAAvB,EACK,WAAA4b,EAAAhgB,OAAAoE,EAAAuB,QACLA,EAAAvB,EAAAuB,MAGAA,EAAA,CAEA,GADAvC,EAAAE,EAAAkC,WAAAG,GAGA,MADAvC,GAAAmtB,UACAntB,CAGA,UAAAie,GAAA+H,aAAA/H,EAAA+H,aAAAE,cAKA4I,GAAA9tB,EAAAyC,eAAAvD,EAAAoJ,OAAAzO,MAAA,aASAuH,WAAA,WACA,MAAApC,MAAAhT,IACAgT,GAEAA,EAAA,KACA,OAQA+uB,kBAAA,WACA/uB,OAAAmtB,SAAA,IACAntB,EAAAK,UACAL,EAAA,YAsBAsa,EAAA,mBACA,yBACA,0BACA,+BACA,SAAAsC,EAAAoS,EAAAC,GAUA,QAAA3kB,GAAA/H,EAAA8C,GAEA,QAAA6pB,GAAAxlB,EAAAylB,EAAA39B,GACA,GAAA6T,GAAA5Z,EAAA2jC,EAAA7iC,KAAAS,IAEA,kBAAA4vB,EAAAhgB,OAAAnR,MAAAqC,QAIAuX,EAAA,GAAAiF,GAAA,MACA9Y,OACA0N,KAAAiwB,EAAAzlB,IAEArE,EAAAgqB,OAAA5jC,EAAA6jC,OAAA5lB,EAAArE,EAAAnG,OAEAmG,GATA,KAYA4pB,EAAAp4B,KAAAtK,MAEAgW,GACAhW,KAAA8d,eAAA9H,GAGA8C,EAEG,WAAAuX,EAAAhgB,OAAAyI,KACHA,GAAW5Z,KAAA4Z,IAFXA,KAKAuX,EAAA/f,OAAAtQ,MAQAS,IAAAqY,EAAArY,KAAA4vB,EAAA9f,KAAA,QASAyF,OASArD,KAAAmG,EAAAnG,MAAA,EASA1N,KAAA6T,EAAA7T,MAAA,GAMA+D,MAAA,SAAAmU,EAAAylB,EAAA39B,GACA,MAAAjF,MAAA6d,aACA8kB,EAAAtkB,MAAAre,KAAAqd,WAEArd,KAAA6V,aAAAua,KAAA9lB,KAAAtK,KAAA,eAAAA,KAAA2c,YAAAQ,EAAAylB,EAAA39B,IASA0X,UAAA,WACA,MAAAkmB,GAAA7iC,KAAAS,KAGAoiC,EAAA7iC,KAAAS,KAFA,MAYAqiC,OAAA,SAAA5jC,GACAc,KAAAgW,OACAhW,KAAA6V,aAAAua,KAAA9lB,KAAAtK,KAAA,kBACAA,KAAAwiC,oBACAxiC,KAAAgW,KAAA,MAGA9W,KAAA,EAGA,IAAAwb,GAAAxb,EAAAyb,MAAA,wBACAD,KACA1a,KAAAiF,KAAAyV,EAAA,GACAxb,EAAAujC,EAAAnF,KAAAp+B,EAAA8jC,UAAA9jC,EAAAa,QAAA,gBAGAC,KAAA2S,KAAAzT,EAAAqC,OAEAshC,EAAA7iC,KAAAS,KAAAvB,GAUA2e,WAAA,WACA,OAAA7d,KAAAgW,MAAA,WAAAqa,EAAAhgB,OAAAwyB,EAAA7iC,KAAAS,OAQAqT,QAAA,WACA9T,KAAA8iC,eACAD,GAAA7iC,KAAAS,QAKAqY,EAAA5Z,KACAc,KAAA8iC,OAAAhqB,EAAA5Z,MAEA2jC,EAAA7iC,KAAAS,KAAAqY,EAzJA,GAAA+pB,KA6JA,OAAA9kB,KAeAgQ,EAAA,mBACA,yBACA,wBACA,mBACA,SAAAsC,EAAAM,EAAA5S,GAQA,QAAAH,GAAA5H,EAAA9B,GACA,GAAAjV,GAAAgG,CAcA,IAZAiP,IACAA,MAKAjP,EADAiP,EAAAjP,MAAA,KAAAiP,EAAAjP,KACAiP,EAAAjP,KAEA0rB,EAAAU,YAAAnd,EAAAjV,MAIAiV,EAAAjV,KACAA,EAAAiV,EAAAjV,KAAAuS,QAAA,WACAvS,IAAA8jC,OAAA9jC,EAAAgkC,YAAA,YACG,CACH,GAAAtT,GAAA1qB,EAAAqJ,MAAA,OACArP,GAAAoxB,EAAA9f,MAAA,KAAAof,IAAA,aAEAgB,EAAAxW,WAAAlV,KACAhG,GAAA,IAAA0xB,EAAAxW,WAAAlV,GAAA,IAIA8Y,EAAAM,MAAAre,KAAAqd,WAEAgT,EAAA/f,OAAAtQ,MAQAiF,QAAA,GASAhG,QAAAoxB,EAAA9f,KAAA,SASAoO,iBAAAzK,EAAAyK,mBAAA,GAAApJ,OAAAqJ,mBAMA,MAFAhB,GAAAhR,UAAAmR,EAAAnR,UAEAgR,IAeAmQ,EAAA,wBACA,yBACA,wBACA,uBACA,wBACA,yBACA,kBACA,kBACA,wBACA,+BACA,SAAAsC,EAAAM,EAAA+N,EAAAhN,EAAAnT,EAAAmS,EAAA9S,EAAAjK,EAAA+uB,GAyGA,QAAA/qB,GAAAlD,GACA,GACAuD,GAAAkrB,EAAAC,EADApsB,EAAA/W,IAUA,KANA,IAAAqwB,EAAA1e,QAAA0e,EAAAhgB,OAAAoE,IAAA,oBACAA,GAAcgD,cAAAhD,MAIdyuB,EAAAxE,EAAAluB,IAAAiE,EAAAgD,gBAGA,SAAAia,GAAAmJ,aAAAnJ,EAAAmJ,aAAAR,cAIA8I,IACAvrB,SACArQ,MAAAmpB,EAAA7e,UAAA,aACAsI,WAAA,MAEAlb,KAAA,OACA8Y,UAAA,EACAZ,eAAA,EACAa,UAAAkrB,EAAAjK,YAAA3C,SAAAtuB,MAGAyM,EAAA4b,EAAA/f,UAA2B6yB,EAAA1uB,GAG3B,gBAAAA,GAAA,gBACAA,EAAA0C,cAAAxD,EAAAmtB,UAAArsB,EAAA0C,gBAIA,gBAAA1C,GAAA,SACAA,EAAAmD,OAAA+Y,EAAAQ,cAAA1c,EAAAmD,SAGAI,EAAA0mB,EAAAluB,IAAAiE,EAAAuD,WAEAA,IACAA,EAAAse,SAAAtuB,MAIA,WAAA02B,EAAAxsB,SAAA8F,EAAA,cACAA,EAAAhS,MAAAi7B,SAAA,YAGAjpB,EAAAkrB,EAAA,KAEAR,EAAAp4B,KAAAyM,GAEAsZ,EAAA/f,OAAAyG,GAUAtW,IAAA4vB,EAAA9f,KAAA,QASAyF,KAAA,KASA2qB,OAAA,KASAnsB,MAAA,KAOA+D,KAAA,WACAxB,EAAAgmB,4BAAAqG,GAEArsB,EAAAX,KAAA,uBAAAlN,EAAAuK,GACAsD,EAAAf,KAAAvC,EAAAhT,IACAsW,EAAA4pB,OAAAltB,EAAAktB,OAEA5pB,EAAAX,KAAA,mBACAW,EAAA3C,QAAA,YACM,KAEN2C,EAAAX,KAAA,oBACA,GAAA5B,GAAAf,EAAA2c,KAAA9lB,KAAAyM,EAAA,uBAEAA,GAAAvC,SAEA6b,EAAAhiB,KAAAmG,EAAA,SAAAN,GAEA,OAAAA,EAAAvB,KACA,QAEAoE,GAAAvC,MAAA5D,KAAA,GAAAgN,GAAA7G,EAAAf,KAAA9B,OAEM,KAGN6C,EAAAX,KAAA,qBACA,GAAAitB,GAAA1wB,EAAAuwB,EAAAlC,CAEAkC,GAAAxE,EAAAluB,IAAAiE,EAAAgD,eACAupB,EAAAtC,EAAAluB,IAAAiD,EAAAktB,QAEAuC,IACAG,EAAA3E,EAAA7tB,OAAAqyB,EAAAxE,EAAAluB,IAAAiE,EAAAuD,YACArF,EAAA+rB,EAAA5tB,QAAAoyB,GAEAlC,GACA3Q,EAAA/f,OAAA0wB,EAAAh7B,OACA6D,IAAAw5B,EAAAlL,EAAA,KACAK,KAAA6K,EAAA3R,EAAA,KACAxY,MAAAvG,EAAAumB,EAAA,KACAnvB,OAAA4I,EAAA0mB,EAAA,QAIA2H,EAAAkC,EAAA,OAGAzvB,EAAA2c,KAAA9lB,KAAAyM,EAAA,mBAAAtC,KAIAsC,EAAA+G,eAAAuS,EAAA/f,UAAuCmE,GACvC0C,eACAwoB,aAAA,OAWAriB,QAAA,SAAA5d,GACA,GAAA+T,GAAAzT,KAAA6V,YACApC,IACAA,EAAA2c,KAAA9lB,KAAAtK,KAAA,oCAAAqwB,EAAAhgB,OAAA3Q,QAUA2W,QAAA,WACAU,EAAA3C,QAAA,YASAN,QAAA,WACA,GAAAL,GAAAzT,KAAA6V,YACApC,KACAA,EAAA2c,KAAA9lB,KAAAtK,KAAA,uBACAA,KAAAwiC,qBAGA,UAAAnS,EAAAhgB,OAAArQ,KAAAwU,QAEA6b,EAAAhiB,KAAArO,KAAAwU,MAAA,SAAAN,GACAA,EAAAJ,YAGA9T,KAAAwU,MAAA,QAtQA,GAAA4uB,IAOA,QAgBA,SAEA,SASA,aASA,aAQA,YAQA,UAkNA,OAFAzrB,GAAA/K,UAAA2R,EAAAC,SAEA7G,IAeAoW,EAAA,uBACA,kBACA,uBACA,wBACA,yBACA,kBACA,8BACA,yBACA,yBACA,SAAA2C,EAAAgO,EAAAhN,EAAArB,EAAAzS,EAAA8kB,EAAAnkB,EAAAoS,GA4EA,QAAAlY,GAAAhE,GACA,GAAA0uB,GAAApsB,EAAA/W,IAGA,sBACAyU,GAAciE,UAAAjE,IAId0uB,GACAvrB,SACArQ,MAAAmpB,EAAA7e,UAAA,aACAsI,WAAA,MAEAhD,eACAioB,eAAA,IAIA3qB,EAAA,mBAAA4b,EAAA/f,UAA0D6yB,EAAA1uB,GAAA0uB,EAG1D1uB,EAAAuD,UAAA0mB,EAAAluB,IAAAiE,EAAAiE,YAAA4d,SAAAtuB,KAGA,WAAA02B,EAAAxsB,SAAAuC,EAAAuD,UAAA,cACAvD,EAAAuD,UAAAhS,MAAAi7B,SAAA,YAIA,gBAAAxsB,GAAA,SACAA,EAAAmD,OAAA+Y,EAAAQ,cAAA1c,EAAAmD,SAGA8qB,EAAAp4B,KAAAyM,GAEAsZ,EAAA/f,OAAAyG,GACAtW,IAAA4vB,EAAA9f,KAAA,QAEAyF,KAAA,KAEAxB,MAAA,KAEA+D,KAAA,WAEAxB,EAAAgmB,4BAAAqG,GAEArsB,EAAAX,KAAA,uBAAAlN,EAAAuK,GACAsD,EAAAf,KAAAvC,EAAAhT,IAEAsW,EAAAX,KAAA,kBACA,GAAA5B,GAAAf,EAAA2c,KAAA9lB,KAAAyM,EAAA,sBAEAA,GAAAvC,SAEA6b,EAAAhiB,KAAAmG,EAAA,SAAAN,GACA6C,EAAAvC,MAAA5D,KAAA,GAAAgN,GAAA7G,EAAAf,KAAA9B,OAEM,KAENT,EAAA2c,KAAA9lB,KAAAyM,EAAA,kBAAAtC,GAEAsC,EAAAylB,cAAA,WAIAzlB,EAAA+G,eAAArJ,IAGAX,QAAA,WACA,GAAAL,GAAAzT,KAAA6V,YACApC,KACAA,EAAA2c,KAAA9lB,KAAAtK,KAAA,sBACAA,KAAAwiC,qBAEAxiC,KAAAwU,MAAA,QArHA,GAAA4uB,IAOA,QAQA,YAQA,YAQA,OAQA,QAqFA,OAFA3qB,GAAA7L,UAAA2R,EAAAC,SAEA/F,IAeAsV,EAAA,+BACA,yBACA,8BACA,0BACA,SAAAsC,EAAAqS,EAAAnkB,GAUA,QAAA+kB,KACAtjC,KAAAS,IAAA4vB,EAAA9f,KAAA,QAEAmyB,EAAAp4B,KAAAtK,MAEAA,KAAA8T,QAAA,WACA9T,KAAAwiC,oBACAxiC,KAAAse,aAMA,MAFAglB,GAAA12B,UAAA2R,EAAAC,SAEA8kB,IAeAvV,EAAA,yBACA,yBACA,0BACA,wBACA,yBACA,kBACA,kBACA,+BACA,SAAAsC,EAAAoS,EAAA/Q,EAAAnT,EAAAR,EAAAH,EAAA0lB,GA6DA,QAAAC,KA4GA,QAAAC,GAAAC,EAAA3qB,GAGA,QAAAnM,GAAAzJ,GACA6T,EAAA2sB,WAAAH,EAAAj0B,KACAyH,EAAApK,MAAAzJ,EACA6T,EAAA3C,QAAA,SACAuvB,IAGA,QAAAA,KACAC,EAAA9vB,UACA8vB,EAAA,KACA7sB,EAAA3C,QAAA,WAyBA,GArCAwvB,EAAA,GAAAN,GAmCAtjC,KAAA+8B,4BAAAqG,GAEApjC,KAAA0jC,aAAAH,EAAAM,QACA,MAAAl3B,GAAA,GAAA+kB,GAAAmJ,aAAAnJ,EAAAmJ,aAAAF,mBAOA,IAJA36B,KAAA0jC,WAAAH,EAAAM,QACA7jC,KAAAoU,QAAA,aAGA0E,YAAAiF,GACA,GAAAjF,EAAA+E,aAAA,CACA,GAAAhS,GAAAiN,EAAA6D,WACA,QAAA8mB,GACA,iBACA,yBACAzjC,KAAAwvB,OAAA3jB,CACA,MACA,qBACA7L,KAAAwvB,OAAA,QAAA1W,EAAA7T,KAAA,WAA6Cw9B,EAAAnE,KAAAzyB,GAG7C7L,KAAA0jC,WAAAH,EAAAj0B,KACAtP,KAAAoU,QAAA,QACAuvB,SA5CA,SAAAlwB,GACAmwB,EAAAxtB,KAAA,iBAAAlN,EAAAhG,GACAyJ,EAAAzJ,KAGA0gC,EAAAxtB,KAAA,oBAAAlN,GACA6N,EAAAyY,OAAA/b,EAAA2c,KAAA9lB,KAAAs5B,EAAA,0BACA7sB,EAAA3C,QAAAlL,KAGA06B,EAAAxtB,KAAA,gBAAAlN,GACA6N,EAAA2sB,WAAAH,EAAAj0B,KACAyH,EAAAyY,OAAA/b,EAAA2c,KAAA9lB,KAAAs5B,EAAA,0BACA7sB,EAAA3C,QAAAlL,GACAy6B,MAGAlwB,EAAA2c,KAAA9lB,KAAAs5B,EAAA,oBAAAH,EAAA3qB,IA6BA8qB,EAAA9lB,eAAAhF,EAAA9C,WAGArJ,GAAA,GAAA+kB,GAAAmJ,aAAAnJ,EAAAmJ,aAAAR,gBA5KA,GAAAuJ,GAAA7sB,EAAA/W,IAEAqwB,GAAA/f,OAAAtQ,MAOAS,IAAA4vB,EAAA9f,KAAA,QAUAmzB,WAAAH,EAAAO,MAQAtU,OAAA,KAQA7iB,MAAA,KAQAo3B,mBAAA,SAAAjrB,GACA0qB,EAAAl5B,KAAAtK,KAAA,qBAAA8Y,IASAkrB,cAAA,SAAAlrB,GACA0qB,EAAAl5B,KAAAtK,KAAA,gBAAA8Y,IASAmrB,WAAA,SAAAnrB,GACA0qB,EAAAl5B,KAAAtK,KAAA,aAAA8Y,IAQA+D,MAAA,WACA7c,KAAAwvB,OAAA,MAEA,IAAAa,EAAA1e,QAAA3R,KAAA0jC,YAAAH,EAAAO,MAAAP,EAAAj0B,SAEKtP,KAAA0jC,aAAAH,EAAAM,UACL7jC,KAAA0jC,WAAAH,EAAAj0B,MAGAs0B,GACAA,EAAA/tB,aAAAua,KAAA9lB,KAAAtK,KAAA,sBAGAA,KAAAoU,QAAA,SACApU,KAAAoU,QAAA,aAQAN,QAAA,WACA9T,KAAA6c,QAEA+mB,IACAA,EAAA/tB,aAAAua,KAAA9lB,KAAAtK,KAAA,wBACA4jC,EAAApB,qBAGAzrB,EAAA6sB,EAAA,QA1JA,GAAAR,IAQA,YAQA,WAQA,OAQA,QAQA,QAQA,UAwNA,OA1BAG,GAAAO,MAAA,EAWAP,EAAAM,QAAA,EAWAN,EAAAj0B,KAAA,EAEAi0B,EAAA32B,UAAA2R,EAAAC,SAEA+kB,IAeAxV,EAAA,qCAWA,GAAAmW,GAAA,SAAAjkC,EAAAkkC,GAYA,IAXA,GAAAzhC,IAAA,8HACArB,EAAAqB,EAAAnB,OACA6iC,GACAC,KAAA,GACAC,MAAA,KAEAC,KACA/Q,EAAA,2JACAtD,EAAAsD,EAAApD,KAAAnwB,GAAA,IAGAoB,KACA6uB,EAAA7uB,KACAkjC,EAAA7hC,EAAArB,IAAA6uB,EAAA7uB,GAKA,KAAAkjC,EAAAC,OAAA,CAEAL,GAAA,qBACAA,EAAAD,EAAAC,GAAA7N,SAAAz2B,SAAAoB,OAGAsjC,EAAAC,OAAAL,EAAAK,OACAD,EAAAE,KAAAN,EAAAM,KACAF,EAAAG,KAAAP,EAAAO,IAEA,IAAAC,GAAA,EAEA,UAAA1xB,KAAAsxB,EAAAI,QACAA,EAAAR,EAAAQ,KAEA,iBAAA1xB,KAAA0xB,GAGAA,GAAA,IAFAA,IAAAnzB,QAAA,kBAKA+yB,EAAAI,QAAAJ,EAAAI,MAAA,IAeA,MAZAJ,GAAAG,OACAH,EAAAG,KAAAN,EAAAG,EAAAC,SAAA,IAGAD,EAAAG,KAAA/Z,SAAA4Z,EAAAG,KAAA,IAEAH,EAAAI,OACAJ,EAAAI,KAAA,WAGAJ,GAAAK,OAEAL,EAyCA,QACAL,WACAW,WAhCA,SAAA5kC,GACA,GAAAmkC,IACAC,KAAA,GACAC,MAAA,KAEAQ,EAAAZ,EAAAjkC,EAGA,OAAA6kC,GAAAN,OAAA,MAAAM,EAAAL,MAAAK,EAAAJ,OAAAN,EAAAU,EAAAN,QAAA,IAAAM,EAAAJ,KAAA,IAAAI,EAAAH,MAAAG,EAAA5iC,MAAA4iC,EAAA5iC,MAAA,KAyBA6iC,cAfA,SAAA9kC,GACA,QAAA+kC,GAAA/kC,GACA,OAAAA,EAAAukC,OAAAvkC,EAAAwkC,KAAAxkC,EAAAykC,MAAApqB,KAAA,KAOA,MAJA,gBAAAra,KACAA,EAAAikC,EAAAjkC,IAGA+kC,EAAAd,OAAAc,EAAA/kC,OAsBA8tB,EAAA,6BACA,yBACA,8BACA,2BACA,SAAAsC,EAAAqS,EAAAD,GAUA,kBAuBA,QAAAe,GAAAC,EAAA3qB,GACA,IAAAA,EAAA+E,aAcI,CACJ,GAAA2R,GAAAxvB,KAAA8d,eAAAhF,EAAA9C,MAAAoa,KAAA9lB,KAAAtK,KAAA,wBAAAyjC,EAAA3qB,EAEA,OADA9Y,MAAAwiC,oBACAhT,EAhBA,GAAA3jB,GAAAiN,EAAA6D,WACA,QAAA8mB,GACA,yBACA,MAAA53B,EACA,qBACA,cAAAiN,EAAA7T,KAAA,WAAqCw9B,EAAAnE,KAAAzyB,EACrC,kBAEA,OADAo5B,GAAA,GACA5jC,EAAA,EAAAE,EAAAsK,EAAAtK,OAA0CF,EAAAE,EAAYF,IACtD4jC,GAAApV,OAAAwO,aAAAxyB,EAAAxK,GAEA,OAAA4jC,IAnCAvC,EAAAp4B,KAAAtK,MAEAqwB,EAAA/f,OAAAtQ,MACAS,IAAA4vB,EAAA9f,KAAA,QAEAwzB,mBAAA,SAAAjrB,GACA,MAAA0qB,GAAAl5B,KAAAtK,KAAA,qBAAA8Y,IAGAkrB,cAAA,SAAAlrB,GACA,MAAA0qB,GAAAl5B,KAAAtK,KAAA,gBAAA8Y,IAOAmrB,WAAA,SAAAnrB,GACA,MAAA0qB,GAAAl5B,KAAAtK,KAAA,aAAA8Y,SAwCAiV,EAAA,sBACA,wBACA,yBACA,mBACA,SAAA2D,EAAArB,EAAAtS,GAOA,QAAAxB,KACA,GAAA2oB,GAAAC,IAEA9U,GAAA/f,OAAAtQ,MAQAyc,OAAA,SAAAxd,EAAAP,GACA,GAAAqY,GAAA/W,KAAAolC,EAAA/U,EAAAhgB,OAAA3R,EAGAA,aAAAqf,GACAmnB,GACAjmC,OACAP,SAEK,UAAA0mC,GACLnmC,GAAA,KAEAoxB,EAAAhiB,KAAA3P,EAAA,SAAAA,GACAqY,EAAA0F,OAAAxd,EAAAP,MAEK,WAAA0mC,EACL/U,EAAAhiB,KAAA3P,EAAA,SAAAA,EAAAgE,GACAqU,EAAA0F,OAAAxd,EAAA,IAAAyD,EAAA,IAAAhE,KAEK,SAAA0mC,GAAA,cAAAA,GAAA,WAAAA,GAAA1S,MAAAh0B,GACLqY,EAAA0F,OAAAxd,EAAA,SAEAkmC,EAAAv0B,MACA3R,OACAP,QAAA2vB,cAWAgX,QAAA,WACA,QAAArlC,KAAAslC,WASAA,QAAA,WACA,MAAAJ,MAAAxmC,OAAA,MASA6mC,YAAA,WACA,MAAAL,MAAAjmC,MAAA,MASAoP,KAAA,SAAA2F,GACAqc,EAAAhiB,KAAA82B,EAAA,SAAAK,GACAxxB,EAAAwxB,EAAA9mC,MAAA8mC,EAAAvmC,QAGAimC,GACAlxB,EAAAkxB,EAAAxmC,MAAAwmC,EAAAjmC,OAIA6U,QAAA,WACAoxB,EAAA,KACAC,QAKA,MAAA5oB,KAeAwR,EAAA,4BACA,yBACA,wBACA,yBACA,0BACA,uBACA,wBACA,8BACA,kBACA,4BACA,qBACA,uBACA,yBACA,SAAAsC,EAAAqB,EAAAnT,EAAAkkB,EAAAgD,EAAA9xB,EAAA2vB,EAAAvlB,EAAA2nB,EAAAnpB,EAAAL,EAAAyU,GA4DA,QAAAgV,KACA3lC,KAAAS,IAAA4vB,EAAA9f,KAAA,QAiBA,QAAAuL,KA4pBA,QAAA8pB,GAAApX,EAAA9vB,GACA,GAAAY,EAAA+f,eAAAmP,GAGA,WAAAnR,UAAA9b,OACA2a,EAAAhG,IAAA,mBAAA5W,EAAAkvB,GAAAzX,EAAAyX,QAEAtS,EAAAhG,IAAA,mBACA5W,EAAAkvB,GAAA9vB,EAEAqY,EAAAyX,GAAA9vB,GAaA,QAAAmnC,GAAA3mC,GAOA,QAAAykC,KACAmC,IACAA,EAAAhyB,UACAgyB,EAAA,MAEA/uB,EAAAylB,cAAA,WACAzlB,EAAA,KAGA,QAAAqZ,GAAA3c,GACAqyB,EAAA1vB,KAAA,qBAAAlN,GACA08B,EAAA,aAAA9pB,EAAA+nB,SACA9sB,EAAAylB,cAAA,oBAEAzlB,EAAAylB,cAAAtzB,GAEA68B,GACAhvB,EAAAgF,OAAAygB,cAAAtzB,KAIA48B,EAAA1vB,KAAA,oBAAAlN,GACA08B,EAAA,gBAAA9pB,EAAA+nB,UACA+B,EAAA,aAAA9pB,EAAA+nB,SACA9sB,EAAAylB,cAAA,qBAEAzlB,EAAAylB,cAAAtzB,KAGA48B,EAAA1vB,KAAA,0BAAAlN,GACA68B,GACAhvB,EAAAgF,OAAAygB,eACAv3B,KAAA,WACA+gC,kBAAA,EACAhxB,MAAA9L,EAAA8L,MACAF,OAAA5L,EAAA4L,WAKAgxB,EAAA1vB,KAAA,gBAAAlN,GACA08B,EAAA,aAAA9pB,EAAAxM,MACAs2B,EAAA,SAAA/jB,OAAApO,EAAA2c,KAAA9lB,KAAAw7B,EAAA,mCACAF,EAAA,aAAAK,EAAAL,EAAA,gBAEAA,EAAA,WAAAnyB,EAAA2c,KAAA9lB,KAAAw7B,EAAA,+BAAAF,EAAA,mBAEAvV,EAAA1e,QAAAi0B,EAAA,6BACAA,EAAA,eAAAA,EAAA,aACM,aAAAA,EAAA,iBACNA,EAAA,cAAAA,EAAA,aAGAM,EAAAzyB,EAAA2c,KAAA9lB,KAAAw7B,EAAA,0CAEA/uB,EAAAylB,cAAA,oBAEAoJ,EAAA,aACAG,GACAhvB,EAAAgF,OAAAygB,cAAAtzB,GAEA6N,EAAAylB,cAAAtzB,KAEAi9B,GAAA,EACApvB,EAAAylB,cAAA,UAEAmH,MAGAmC,EAAA1vB,KAAA,iBAAAlN,GACA6N,EAAAylB,cAAAtzB,GACAy6B,MAGAmC,EAAA1vB,KAAA,iBAAAlN,GACAi9B,GAAA,EACAP,EAAA,aAAA9pB,EAAAxM,MACAyH,EAAAylB,cAAA,oBACA4J,GAAA,EACArvB,EAAAylB,cAAAtzB,GACAy6B,MAGAlwB,EAAA2c,KAAA9lB,KAAAw7B,EAAA,yBACA7lC,IAAAomC,EACAhe,OAAAie,EACA3J,MAAA4J,EACA9mC,KAAA+mC,EACAC,SAAAC,EACA54B,QAAA64B,EACAC,SAAAC,EACAC,SAAAC,EACArQ,aAAA3f,EAAA2f,aACAsQ,gBAAAjwB,EAAAiwB,gBACAvyB,QAAAwyB,GACK/nC,GArGL,GAAA6X,GAAA/W,IAEAknC,IAAA,GAAA3xB,OAAAmV,UAEAob,EAAA,GAAAxC,GAqGA,gBAAA2D,GAAA,gBACAA,EAAA9vB,cAAAxD,EAAAmtB,UAAAmG,EAAA9vB,gBAGA8vB,EAAA9vB,cAAAkZ,EAAA/f,UAA2C22B,EAAA9vB,eAC3Csf,qBAAA1f,EAAA2f,eAGAx3B,YAAAqd,KACA0qB,EAAA9vB,cAAA4oB,gBAAA,GAGAoH,IACAF,EAAA9vB,cAAAgoB,SAAA,GAIA8H,EAAAjxB,KACAoa,EAAA0V,EAAAhoB,eAAAmpB,KAEAnB,EAAA1vB,KAAA,uBAAAlN,EAAAuK,GACA2c,EAAA3c,KAEAqyB,EAAA1vB,KAAA,wBAAAlN,EAAAhG,GACA6T,EAAAylB,cAAA,eAAAt5B,KAEA4iC,EAAAhoB,eAAAmpB,IAKA,QAAAG,KACAxB,EAAA,mBACAA,EAAA,oBACAA,EAAA,iBACAA,EAAA,YACAA,EAAA,iBACAsB,EAAAG,EAAA,KAj0BA,GAqGAhB,GACAC,EAEAE,EACAE,EAaAQ,EACAG,EAMAvB,EAEAwB,EA/HAvwB,EAAA/W,KAEAV,GAQAioC,QAAA,EAsBA7D,WAAA5nB,EAAA0rB,OAUAR,iBAAA,EASA58B,OAAA,EAQAq9B,WAAA,GASA/Q,aAAA,GAUAgR,YAAA,KAUAvsB,aAAA,KASAF,SAAA,MAGAsrB,GAAA,EAGAI,KAGAI,EAAA,KACAF,EAAA,KAGAc,GAAA,EACAC,GAAA,EACA7B,GAAA,EACAK,GAAA,EACAD,GAAA,EACAgB,GAAA,EAMAU,EAAA,KACAC,EAAA,KAEAb,KAEAf,EAAA,EAKA7V,GAAA/f,OAAAtQ,KAAAV,GAOAmB,IAAA4vB,EAAA9f,KAAA,QAQAwL,OAAA,GAAA4pB,GA2BAtpB,KAAA,SAAAgM,EAAApoB,EAAA08B,EAAAl9B,EAAAgnC,GACA,GAAA3B,EAGA,KAAAzc,IAAApoB,EACA,SAAAyxB,GAAAmJ,aAAAnJ,EAAAmJ,aAAAD,WAIA,sBAAA3nB,KAAAoV,IAAAoa,EAAAxF,YAAA5U,OACA,SAAAqJ,GAAAmJ,aAAAnJ,EAAAmJ,aAAAD,WAUA,KANAvK,EAAA1e,QAAA0W,EAAA0f,eAAA,2EACAzB,EAAAje,EAAA0f,gBAKA1X,EAAA1e,QAAA20B,GAAA,4BACA,SAAA5U,GAAAmJ,aAAAnJ,EAAAmJ,aAAAP,aAeA,IAXAr6B,EAAAwiC,EAAAxF,YAAAh9B,GAGA6kC,EAAAW,EAAAvB,SAAAjkC,GAEAknC,EAAA1B,EAAAV,cAAAD,GAGAuB,EAAAZ,EAAAZ,WAAA5kC,IAGAR,GAAAgnC,KAAAU,EACA,SAAAzV,GAAAmJ,aAAAnJ,EAAAmJ,aAAAU,mBASA,IANAiL,EAAA/mC,GAAAqlC,EAAArlC,KACAinC,EAAAD,GAAA3B,EAAAkD,MAKA,KAFAzB,EAAA5J,IAAA,KAEAiJ,EAAA,YAAAA,EAAA,yBAAAA,EAAA,iBACA,SAAAlU,GAAAmJ,aAAAnJ,EAAAmJ,aAAAU,mBAQAoM,IAAApB,EACAqB,GAAA,EACAjB,KACAS,EAAA98B,KAAAtK,MAGA4lC,EAAA,aAAA9pB,EAAAmsB,QAGAjoC,KAAA+8B,6BAAA,qBACA/8B,KAAAw8B,cAAA,qBAeAlgB,iBAAA,SAAA4rB,EAAAxpC,GACA,GAAAypC,IACA,iBACA,kBACA,iCACA,gCACA,aACA,iBACA,SACA,UACA,4BACA,OACA,SACA,OACA,aACA,SACA,UACA,KACA,UACA,oBACA,UACA,aACA,MAIA,IAAAvC,EAAA,gBAAA9pB,EAAAmsB,QAAAL,EACA,SAAAlW,GAAAmJ,aAAAnJ,EAAAmJ,aAAAF,kBAIA,sBAAA1nB,KAAAi1B,IAAAzF,EAAAxF,YAAAiL,OACA,SAAAxW,GAAAmJ,aAAAnJ,EAAAmJ,aAAAD,WAYA,OAHAsN,GAAA7X,EAAAjK,KAAA8hB,GAAA5Z,gBAGA+B,EAAA1e,QAAAu2B,EAAAC,KAAA,mBAAAl1B,KAAAi1B,KAQAvB,EAAAuB,GAIAvB,EAAAuB,IAAA,KAAAxpC,EAHAioC,EAAAuB,GAAAxpC,GAKA,IASA2c,sBAAA,WACA,MAAA6qB,IAAA,IAWAkC,kBAAA,SAAAF,GAGA,MAFAA,KAAA5Z,cAEA6X,IAAA9V,EAAA1e,QAAAu2B,GAAA,6BACA,KAGAhC,GAAA,KAAAA,IAEAoB,IACAA,KACAjX,EAAAhiB,KAAA63B,EAAA53B,MAAA,iBAAA+5B,GACA,GAAAC,GAAAD,EAAA/5B,MAAA,OACA,KAAAg6B,EAAA/mC,SACA+mC,EAAA,GAAAjY,EAAAjK,KAAAkiB,EAAA,IACAhB,EAAAgB,EAAA,GAAAha,gBACA4Z,OAAAI,EAAA,GACA5pC,MAAA2xB,EAAAjK,KAAAkiB,EAAA,SAKAhB,EAAAjoB,eAAA6oB,IACAZ,EAAAY,UAAA,KAAAZ,EAAAY,GAAAxpC,MAGA,MAWA6pC,iBAAA,SAAArX,GACA,GAAAxW,GAAA8tB,CAGA,KAAAnY,EAAA1e,QAAAi0B,EAAA,eAAA9pB,EAAA+nB,QAAA/nB,EAAAxM,OACA,SAAAoiB,GAAAmJ,aAAAnJ,EAAAmJ,aAAAF,kBAaA,IATAzJ,EAAAb,EAAAjK,KAAA8K,EAAA5C,eAEA,IAAUrb,KAAAie,KAAAxW,EAAAwW,EAAAvW,MAAA,qCACVuW,EAAAxW,EAAA,GACAA,EAAA,KACA8tB,EAAA9tB,EAAA,MAIAiW,EAAAxgB,MAAA+gB,GACA,SAAAQ,GAAAmJ,aAAAnJ,EAAAmJ,aAAAD,WAIAiN,GAAA3W,EACA4W,EAAAU,GAaA98B,KAAA,SAAAxM,EAAAuV,GAaA,GAXAwyB,EADA,WAAA5W,EAAAhgB,OAAAoE,IACiBuB,KAAAvB,GACZA,MAMLzU,KAAA+8B,4BAAAqG,GACApjC,KAAA+b,OAAAghB,4BAAAqG,GAGApjC,KAAA0jC,aAAA5nB,EAAAmsB,QAAAL,EACA,SAAAlW,GAAAmJ,aAAAnJ,EAAAmJ,aAAAF,kBAKA,IAAAz7B,YAAA6e,GACAkpB,EAAAjxB,KAAA9W,EAAA8W,KACA6wB,EAAA3nC,EAAA+F,MAAA,+BAIA,IAAA/F,YAAAqd,IACA,GAAArd,EAAAmmC,UAAA,CACA,GAAAvsB,GAAA5Z,EAAAomC,SACA2B,GAAAjxB,KAAA8C,EAAA9C,KACA6wB,EAAA/tB,EAAA7T,MAAA,gCAKA,gBAAA/F,KACA6nC,EAAA,QACAF,EAAA,2BAGA3nC,EAAAujC,EAAAxF,YAAA/9B,GAIAc,MAAAgnC,kBACAhnC,KAAAgnC,gBAAAC,EAAA9vB,eAAA8vB,EAAA9vB,cAAA2oB,uBAAAqH,GAKApB,GAAA4B,GAAA3nC,KAAA+b,OAAAsgB,mBAEA8J,GAAA,EAEAC,GAAAlnC,EAEAyoC,IAEAC,GAAA,GASA/B,EAAAv7B,KAAAtK,KAAAd,IAQA2d,MAAA,WAIA,GAHAspB,GAAA,EACAwB,GAAA,GAEAtX,EAAA1e,QAAAi0B,EAAA,eAAA9pB,EAAA0rB,OAAA1rB,EAAAmsB,OAAAnsB,EAAAxM,OAYAs2B,EAAA,aAAA9pB,EAAA0rB,YAZA,CAIA,GAHA5B,EAAA,aAAA9pB,EAAAxM,MACAs4B,GAAA,GAEA9B,EAGA,SAAApU,GAAAmJ,aAAAnJ,EAAAmJ,aAAAF,kBAFAmL,GAAAjwB,aAAAua,KAAA9lB,KAAAw7B,EAAA,yBAAAM,GAKAA,GAAA,IAMAtyB,QAAA,WACAgyB,IACA,aAAAzV,EAAAhgB,OAAAy1B,EAAAhyB,UACAgyB,EAAAhyB,UAEAgyB,EAAA,MAGA9lC,KAAAse,YAEAte,KAAA+b,SACA/b,KAAA+b,OAAAuC,YACAte,KAAA+b,OAAA,SA7kBA,GAAAkqB,IACAwC,IAAA,WACAC,IAAA,sBACAC,IAAA,aAEAC,IAAA,KACAC,IAAA,UACAC,IAAA,WACAC,IAAA,gCACAC,IAAA,aACAC,IAAA,gBACAC,IAAA,kBACAC,IAAA,eACAC,IAAA,UAEAC,IAAA,mBACAC,IAAA,oBACAC,IAAA,QACAC,IAAA,YACAC,IAAA,eACAC,IAAA,YACAC,IAAA,WACAC,IAAA,qBAEAC,IAAA,cACAC,IAAA,eACAC,IAAA,mBACAC,IAAA,YACAC,IAAA,YACAC,IAAA,qBACAC,IAAA,iBACAC,IAAA,gCACAC,IAAA,kBACAC,IAAA,WACAC,IAAA,OACAC,IAAA,kBACAC,IAAA,sBACAC,IAAA,2BACAC,IAAA,uBACAC,IAAA,yBACAC,IAAA,kCACAC,IAAA,qBACAC,IAAA,uBACAC,IAAA,SACAC,IAAA,oBACAC,IAAA,mBAEAC,IAAA,wBACAC,IAAA,kBACAC,IAAA,cACAC,IAAA,sBACAC,IAAA,kBACAC,IAAA,6BACAC,IAAA,0BACAC,IAAA,uBACAC,IAAA,eAOAhG,GAAA/4B,UAAA2R,EAAAC,QAUA,IAAA4kB,IAAA,kEAk1BA,OARAtnB,GAAA0rB,OAAA,EACA1rB,EAAAmsB,OAAA,EACAnsB,EAAA8vB,iBAAA,EACA9vB,EAAA+nB,QAAA,EACA/nB,EAAAxM,KAAA,EAEAwM,EAAAlP,UAAA2R,EAAAC,SAEA1C,IAeAiS,EAAA,6BACA,yBACA,0BACA,8BACA,0BACA,SAAAsC,EAAAoS,EAAAC,EAAAnkB,GACA,QAAAstB,KAgEA,QAAAzE,KACA0E,EAAAC,EAAA,EACAC,EAAAhsC,KAAAwvB,OAAA,KAGA,QAAAyc,GAAAhnC,EAAAwO,GACA,GAAAsD,GAAA/W,IAEAksC,GAAAz4B,EAIAsD,EAAAX,KAAA,gCAAAlN,IACA6iC,EAAA7iC,EAAA4L,QAEAg3B,IAAA,IAAAzb,EAAA1e,QAAAoF,EAAArX,OAAAmsC,EAAAM,KAAAN,EAAAv8B,QACA88B,EAAA9hC,KAAAyM,IAEI,KAEJA,EAAAX,KAAA,kCACA21B,EAAAD,EACA/0B,EAAArX,MAAAmsC,EAAAv8B,KACA08B,EAAA,KACAj1B,EAAAyY,OAAA0c,EAAA9b,KAAA9lB,KAAAyM,EAAA,0BAAA9R,GAAA,KACI,KAEJ8R,EAAArX,MAAAmsC,EAAAQ,KACAt1B,EAAA3C,QAAA,uBACAg4B,EAAA9hC,KAAAyM,GAGA,QAAAq1B,KACA,GACAvwB,GADA9E,EAAA/W,KAEAssC,EAAAR,EAAAC,CAEAQ,GAAAD,IACAC,EAAAD,GAGAzwB,EAAA4mB,EAAAnE,KAAA0N,EAAAjJ,OAAAgJ,EAAAQ,IACAL,EAAA9b,KAAA9lB,KAAAyM,EAAA,wBAAA8E,EAAAiwB,GAzGA,GAAAU,GAAAN,EAAAF,EAAAF,EAAAC,EAAAQ,CAEA7J,GAAAp4B,KAAAtK,MAEAqwB,EAAA/f,OAAAtQ,MACAS,IAAA4vB,EAAA9f,KAAA,QAEA7Q,MAAAmsC,EAAAM,KAEA3c,OAAA,KAEAid,UAAA,SAAAvtC,EAAA+F,EAAAwP,GACA,GAAAsC,GAAA/W,IAiBA,IAfAyU,EAAA4b,EAAA/f,QACA/B,WAAA,QACKkG,IAGL+3B,EAAA/3B,EAAAlG,WAAA,KACAkG,EAAAlG,YAAA,EAAAi+B,GAGAD,EAAA93B,EAAAlG,WAEA64B,EAAA98B,KAAAtK,MACAgsC,EAAA9sC,EACA4sC,EAAA5sC,EAAAqC,OAEA,WAAA8uB,EAAAhgB,OAAAoE,MAAAuB,KACAi2B,EAAA3hC,KAAAyM,EAAA9R,EAAAjF,KAAA8d,eAAArJ,QACK,CAEL,GAAAT,GAAA,SAAA9K,EAAAuK,GACAsD,EAAA+lB,OAAA,cAAA9oB,GACAi4B,EAAA3hC,KAAAyM,EAAA9R,EAAAwO,GAEAzT,MAAAoW,KAAA,cAAApC,GACAhU,KAAA8d,eAAArJ,KAIAoI,MAAA,WACA,GAAA9F,GAAA/W,IAEA+W,GAAArX,MAAAmsC,EAAAM,KACAD,IACAA,EAAA9b,KAAA9lB,KAAAyM,EAAA,uBACAA,EAAA3C,QAAA,wBAGAgzB,EAAA98B,KAAAyM,IAIAjD,QAAA,WACA9T,KAAAse,YACA4tB,EAAA,KACAlsC,KAAAwiC,oBACA4E,EAAA98B,KAAAtK,SAwDA,MANA6rC,GAAAM,KAAA,EACAN,EAAAQ,KAAA,EACAR,EAAAv8B,KAAA,EAEAu8B,EAAAj/B,UAAA2R,EAAAC,SAEAqtB,IAeA9d,EAAA,qBACA,yBACA,uBACA,wBACA,4BACA,2BACA,wBACA,8BACA,4BACA,uBACA,yBACA,kBACA,kBACA,2BACA,SAAAsC,EAAAqO,EAAAhN,EAAAgU,EAAA5pB,EAAAnI,EAAA+uB,EAAAmJ,EAAA3vB,EAAAqC,EAAAR,EAAAH,EAAA6kB,GAuCA,QAAAzpB,KA4YA,QAAA0zB,GAAA/sC,GACAA,IACAA,EAAAK,KAAA6V,aAAAua,KAAA9lB,KAAAtK,KAAA,oBAGAA,KAAA2S,KAAAhT,EAAAgT,KACA3S,KAAAkZ,MAAAvZ,EAAAuZ,MACAlZ,KAAA+J,OAAApK,EAAAoK,OACA/J,KAAAiF,KAAAtF,EAAAsF,KACAjF,KAAA2sC,KAAAhtC,EAAAgtC,KAGA,KAAA3sC,KAAAf,OACAe,KAAAf,KAAAU,EAAAV,MAKA,QAAA2tC,GAAA/gC,GACA,GAAAghC,GAAAxc,EAAAhgB,OAAAxE,EAEA,KAEA,GAAAA,YAAAmN,GAAA,CACA,IAAAnN,EAAA8G,KACA,SAAA+e,GAAAmJ,aAAAnJ,EAAAmJ,aAAAF,kBAEAmS,GAAAzuB,MAAAre,KAAAqd,eAGA,IAAAxR,YAAAkS,GAAA,CACA,KAAAsS,EAAA1e,QAAA9F,EAAA5G,MAAA,2BACA,SAAAysB,GAAAuI,WAAAvI,EAAAuI,WAAAC,aAEA6S,GAAA1uB,MAAAre,KAAAqd,eAGA,SAAAgT,EAAA1e,QAAAk7B,GAAA,gBACAD,EAAAtiC,KAAAtK,KAAA,GAAA4d,GAAA,KAAA/R,GAAAwR,UAAA,QAGA,eAAAwvB,EAEA,sBAAsB55B,KAAApH,GACtB+gC,EAAAtiC,KAAAtK,KAAA,GAAA+d,GAAA,MAAuC7e,KAAA2M,IAAYwR,UAAA,IAInD2vB,EAAA3uB,MAAAre,KAAAqd,eAIA,aAAAwvB,GAAA,QAAAhhC,EAAAohC,SAAA3e,cAIA,SAAAoD,GAAAmJ,aAAAnJ,EAAAmJ,aAAAY,kBAHAmR,GAAAtiC,KAAAtK,KAAA6L,MAAAwR,UAAA,KAKI,MAAA1D,GAEJ3Z,KAAAoU,QAAA,QAAAuF,EAAAtF,OAKA,QAAAy4B,GAAA/zB,EAAAm0B,GACA,GAAAz5B,GAAAzT,KAAA8d,eAAA/E,EAAA/C,KACAhW,MAAAgW,KAAAvC,EAAAhT,IACAgT,EAAA2c,KAAA9lB,KAAAtK,KAAA,wBAAA+Y,EAAA,cAAAsX,EAAAhgB,OAAA68B,OAIA,QAAAH,GAAAj0B,EAAArE,GAKA,QAAA2b,GAAA3c,GACAsD,EAAAf,KAAAvC,EAAAhT,IACAgT,EAAA2c,KAAA9lB,KAAAyM,EAAA,uBAAA+B,GANA,GAAA/B,GAAA/W,IAEA+W,GAAA9X,KAAA6Z,EAAA7Z,MAAA,GAOA6Z,EAAA+E,cACA7d,KAAAoW,KAAA,uBAAAlN,EAAAuK,GACA2c,EAAA3c,KAIAgB,GAAA,gBAAAA,GAAA,gBACAA,EAAA0C,cAAAxD,EAAAmtB,UAAArsB,EAAA0C,gBAGAnX,KAAA8d,eAAAuS,EAAA/f,QACA6G,eACA8nB,qBAAA,EACAK,cAAA,IAEK7qB,KAEL2b,EAAApwB,KAAA8d,eAAAhF,EAAA9C,OAKA,QAAAg3B,GAAA/sC,EAAAwU,GACA,GAAAyG,GAAAnE,EAAA/W,IAEAkb,GAAA,GAAAY,GAEAZ,EAAAmB,KAAA,MAAApc,GACAib,EAAAwb,aAAA,OAEAxb,EAAAc,WAAA,SAAA9S,GACA6N,EAAA3C,QAAAlL,IAGAgS,EAAAjC,OAAA,WACA8zB,EAAAziC,KAAAyM,EAAAmE,EAAAD,UAAA,IAGAC,EAAAzB,QAAA,SAAAvQ,GACA6N,EAAA3C,QAAAlL,IAGAgS,EAAAkB,UAAA,WACAlB,EAAApH,WAGAoH,EAAA9E,KAAA,wBAAAlN,EAAAhG,GACA6T,EAAA3C,QAAA,eAAAlR,KAGAgY,EAAAxP,KAAA,KAAA+I,GA/gBAiuB,EAAAp4B,KAAAtK,MAEAqwB,EAAA/f,OAAAtQ,MAOAS,IAAA4vB,EAAA9f,KAAA,QAQAyF,KAAA,KASA/W,KAAA,GASA0T,KAAA,EASAuG,MAAA,EASAnP,OAAA,EASA9E,KAAA,GASA0nC,QASAQ,MAAA,WACAntC,KAAA0Z,KAAA2E,MAAAre,KAAAqd,YA8BA3D,KAAA,WAEA1Z,KAAAoW,KAAA,yBACAs2B,EAAApiC,KAAAtK,OACK,KAELA,KAAA+8B,4BAAAqG,GAEAwJ,EAAAvuB,MAAAre,KAAAqd,YAYA/D,SAAA,SAAA8zB,GACA,GAAAjK,IACAjqB,MAAAlZ,KAAAkZ,MACAnP,OAAA/J,KAAA+J,OACAsP,MAAA,EACAg0B,iBAAA,EAIAD,GADA,mBACA/c,EAAA/f,OAAA6yB,EAAAiK,GAEA/c,EAAA/f,OAAA6yB,GACAjqB,MAAAmE,UAAA,GACAtT,OAAAsT,UAAA,GACAhE,KAAAgE,UAAA,GACAgwB,gBAAAhwB,UAAA,IAIA,KACA,IAAArd,KAAA2S,KACA,SAAA+e,GAAAmJ,aAAAnJ,EAAAmJ,aAAAF,kBAIA,IAAA36B,KAAAkZ,MAAAF,EAAAs0B,kBAAAttC,KAAA+J,OAAAiP,EAAAu0B,kBACA,SAAA7b,GAAAuI,WAAAvI,EAAAuI,WAAAE,mBAGAn6B,MAAA6V,aAAAua,KAAA9lB,KAAAtK,KAAA,mBAAAotC,EAAAl0B,MAAAk0B,EAAArjC,OAAAqjC,EAAA/zB,KAAA+zB,EAAAC,iBACK,MAAA1zB,GAEL3Z,KAAAoU,QAAA,QAAAuF,EAAAtF,QAYAgF,KAAA,SAAAH,EAAAnP,EAAAsjC,GACArtC,KAAAsZ,SAAAJ,EAAAnP,GAAA,EAAAsjC,IAGAG,YAAA,WACA,IAAAtxB,EAAAhG,IAAA,iBACA,SAAAwb,GAAA+H,aAAA/H,EAAA+H,aAAAG,kBAIA,OADA55B,MAAA8d,eAAA9d,KAAAgW,MACAoa,KAAA9lB,KAAAtK,KAAA,wBAYAwZ,UAAA,SAAAvU,EAAAkU,GACA,IAAAnZ,KAAA2S,KACA,SAAA+e,GAAAmJ,aAAAnJ,EAAAmJ,aAAAF,kBAWA,OARA11B,KACAA,EAAA,cAGA,eAAAA,GAAAkU,IACAA,EAAA,IAGAnZ,KAAA6V,aAAAua,KAAA9lB,KAAAtK,KAAA,oBAAAiF,EAAAkU,IAYAs0B,aAAA,SAAAxoC,EAAAkU,GACA,IAAAnZ,KAAA2S,KACA,SAAA+e,GAAAmJ,aAAAnJ,EAAAmJ,aAAAF,kBAEA,OAAA36B,MAAA6V,aAAAua,KAAA9lB,KAAAtK,KAAA,uBAAAiF,EAAAkU,IAYAu0B,kBAAA,SAAAzoC,EAAAkU,GACA,GAAAw0B,GAAA3tC,KAAAytC,aAAAxoC,EAAAkU,EACA,OAAAspB,GAAAnF,KAAAqQ,EAAA3K,UAAA2K,EAAA5tC,QAAA,gBAiBA6tC,MAAA,SAAAl9B,GAUA,QAAAm9B,KAEA,GAAA3xB,EAAAhG,IAAA,kBACA,GAAA43B,GAAAC,EAAAP,aACA,IAAAM,EAKA,MAJAp9B,GAAAywB,YAAA2M,GACAA,EAAA,KACAC,EAAAj6B,cACAiD,GAAA3C,QAAA,YAKA,GAAAu5B,GAAAI,EAAAN,aAAAxoC,EAAAkU,EACA,KAAAw0B,EACA,SAAAjc,GAAAuI,WAAAvI,EAAAuI,WAAAC,aAGA,IAAAhe,EAAAhG,IAAA,kBAAAy3B,EAAApsC,QACAmP,EAAAs9B,UAAA,aAAAL,EAAA,YAAAI,EAAA70B,MAAA,aAAA60B,EAAAhkC,OAAA,OACAgkC,EAAAj6B,UACAiD,EAAA3C,QAAA,gBACM,CACN,GAAA65B,GAAA,GAAApC,EAEAoC,GAAA73B,KAAA,kCACA3C,EAAAsD,EAAA+G,eAAA9d,KAAAwvB,OAAAxZ,MAEAe,EAAAX,KAAA,sBAEAia,EAAA/f,OAAAmD,EAAAstB,mBAAA/6B,OAEA6D,IAAA,MACA2uB,KAAA,MACAtf,MAAA60B,EAAA70B,MAAA,KACAnP,OAAAgkC,EAAAhkC,OAAA,OAYA0J,EAAA,MACQ,KAERA,EAAA2c,KAAA9lB,KAAAyM,EAAA,sBAAA/W,KAAAwvB,OAAA/uB,IAAAyY,EAAAnP,GACAgkC,EAAAj6B,YAGAm6B,EAAAxB,UAAAhK,EAAAnF,KAAAqQ,EAAA3K,UAAA2K,EAAA5tC,QAAA,eAAAkF,EAAAorB,EAAA/f,UAAwGmE,GACxG0C,eACA+nB,eAAA,GAEAhoB,cAAA,oBACAc,UAAAtH,MApEA,GACAq9B,GACA9oC,EAAAkU,EAAAE,EAIA5F,EANAsD,EAAA/W,KAGAyU,EAAA4I,UAAA,OACAnE,EAAAlZ,KAAAkZ,MACAnP,EAAA/J,KAAA+J,MAoEA,KACA,KAAA2G,EAAAguB,EAAAluB,IAAAE,IACA,SAAAghB,GAAAmJ,aAAAnJ,EAAAmJ,aAAAiB,sBAGA,KAAA97B,KAAA2S,KACA,SAAA+e,GAAAmJ,aAAAnJ,EAAAmJ,aAAAF,kBAGA,IAAA36B,KAAAkZ,MAAAF,EAAAs0B,kBAAAttC,KAAA+J,OAAAiP,EAAAu0B,kBACA,SAAA7b,GAAAuI,WAAAvI,EAAAuI,WAAAE,mBAQA,IALAl1B,EAAAwP,EAAAxP,MAAAjF,KAAAiF,MAAA,aACAkU,EAAA1E,EAAA0E,SAAA,GACAE,EAAA,cAAAgX,EAAAhgB,OAAAoE,EAAA4E,OAAA5E,EAAA4E,KAGA5E,EAAAyE,MACAA,EAAAzE,EAAAyE,MACAnP,EAAA0K,EAAA1K,QAAAmP,MACM,CAEN,GAAAg1B,GAAAxP,EAAA5tB,QAAAJ,EACAw9B,GAAAhV,GAAAgV,EAAA7U,IACAngB,EAAAg1B,EAAAhV,EACAnvB,EAAAmkC,EAAA7U,GAgBA,MAZA0U,GAAA,GAAA/0B,GAEA+0B,EAAA33B,KAAA,oBACAy3B,EAAAvjC,KAAAyM,KAGAg3B,EAAA33B,KAAA,kBACA23B,EAAAz0B,SAAAJ,EAAAnP,EAAAsP,GAAA,KAGA00B,EAAAZ,MAAAntC,MAAA,GAEA+tC,EACK,MAAAp0B,GAEL3Z,KAAAoU,QAAA,QAAAuF,EAAAtF,QASAP,QAAA,WACA9T,KAAAgW,OACAhW,KAAA6V,aAAAua,KAAA9lB,KAAAtK,KAAA,mBACAA,KAAAwiC,qBAEAxiC,KAAAse,eAtaA,GAAA8kB,IACA,WAQA,OAEA,QAQA,SASA,WA6hBA,OALApqB,GAAAs0B,iBAAA,KACAt0B,EAAAu0B,kBAAA,KAEAv0B,EAAApM,UAAA2R,EAAAC,SAEAxF,IAuBA+U,EAAA,+BACA,yBACA,wBACA,wBACA,wBACA,SAAAsC,EAAAqB,EAAA/d,EAAAuI,GAIA,QAAAiyB,GAAA15B,GACA,GAAA25B,GAAApuC,KACAquC,EAAA16B,EAAA0uB,QACAiM,EAAA36B,EAAAwuB,QAGAj0B,EAAAmiB,EAAA/f,QACA0uB,cAAAqP,EAAArtC,OAAAuiC,YAAAviC,OAAA4c,MAAA5c,OAAA4c,KAAA6vB,cACAxO,oBAAA,WACA,MAAAmP,GAAAl4B,IAAA,oBAAAiE,EAAAnB,OAEAkmB,cAAAmP,EAAAnyB,EAAAhG,IAAA,kBAAAgG,EAAAhG,IAAA,0BACAipB,QAAAkP,EAAArtC,OAAA8a,gBAAA,uBAAAA,iBACAsjB,cAAAiP,EAAA,WAEA,GAAAE,GAAAjY,SAAAC,cAAA,MAEA,qBAAAgY,IAAA,eAAAA,IAAA,UAAAA,MAAA,OAAAryB,EAAAC,SAAAD,EAAAvZ,QAAA,OAEA08B,oBAAAgP,EAAA,WACA,iBAAAnyB,EAAAC,SAAAD,EAAAvZ,SAAA,WAAAuZ,EAAAC,SAAAD,EAAAvZ,SAAA,OAEA68B,wBAAA8O,EACA7X,qBAAA,SAAAC,GACA,iBAAAA,IAAA11B,OAAA4pB,OAGA1O,EAAAhG,IAAA,uBAAAwgB,IAEA+I,mBAAA6O,EACA/O,uBAAA8O,EAAArtC,OAAA8a,iBAAA,GAAAA,iBAAAC,QACAujB,aAAA,WACA,MAAA8O,GAAAl4B,IAAA,kBAAAgG,EAAAhG,IAAA,kBAEAypB,YAAA,WACA,MAAAzjB,GAAAhG,IAAA,kBAAAlV,OAAA4c,MAEAgiB,cAAA,WACA,MAAAwO,GAAAl4B,IAAA,2BAAAgG,EAAAC,SAAAD,EAAAvZ,SAAA,IAEAk9B,gBAAA,WAEA,MAAAuO,GAAAl4B,IAAA,kBACA,WAAAgG,EAAAC,SAAA,YAAAD,EAAA4Y,OACA,QAAA5Y,EAAA4Y,IAAA5Y,EAAAkb,QAAAlb,EAAAib,UAAA,eAEAvoB,mBAAAy/B,EAAArtC,OAAA8a,kBAAA,GAAAA,iBAAA0yB,cAAAxtC,OAAAytC,YAAAztC,OAAA0tC,cACAhP,oBAAA2O,EAAArtC,OAAA8a,gBACAikB,eAAA,WACA,SAAA/+B,OAAA8a,iBAAA,GAAAA,iBAAAC,QAAA/a,OAAAub,WAAA6xB,EAAAl4B,IAAA,uBAEA1H,WAAA6/B,EAAArtC,OAAA4c,YAAAhR,UAAA+hC,UAAA/wB,KAAAhR,UAAAgiC,aAAAhxB,KAAAhR,UAAA5D,QACAg3B,cAAA,WACA,MAAAoO,GAAAl4B,IAAA,eAAAk4B,EAAAl4B,IAAA,mBAEA+pB,mBAAAoO,EAAA,WACA,kBAAAnyB,EAAAC,SAAAD,EAAAvZ,SAAA,GACA,UAAAuZ,EAAAC,SAAAD,EAAAvZ,SAAA,IACA,OAAAuZ,EAAAC,SAAAD,EAAAvZ,SAAA,OACA0tB,EAAA1e,QAAAuK,EAAAC,SAAA,wBAEA+jB,gBAAAoO,GAEAjxB,UAAA,GAGA1J,GAAArJ,KAAAtK,KAAAyU,EAAA4I,UAAA,IAAApY,EAAAiJ,GAGAmiB,EAAA/f,OAAAtQ,MAEAuY,KAAA,WACAvY,KAAAoU,QAAA,SAGAN,QAAA,SAAAA,GACA,kBACAA,EAAAxJ,KAAA8jC,GACAt6B,EAAAs6B,EAAA,OAEIpuC,KAAA8T,WAGJuc,EAAA/f,OAAAtQ,KAAAohC,UAAAjnB,GArFA,GAAAlV,GAAA,QAAAkV,IA0FA,OAFAxG,GAAA+tB,eAAAz8B,EAAAkpC,GAEAh0B,IAmBA4T,EAAA,iCACA,8BACA,mBACA,SAAA5T,EAAA4D,GAEA,QAAA8wB,KACA,QAAAC,GAAAh2B,EAAAqE,EAAAylB,GACA,GAAAmM,EAEA,KAAA/tC,OAAA4c,KAAAhR,UAAA5D,MASI,OAAA+lC,EAAA/tC,OAAA4c,KAAAhR,UAAAgiC,aAAA5tC,OAAA4c,KAAAhR,UAAA+hC,UACJI,EAAAzkC,KAAAwO,EAAAqE,EAAAylB,GAEA,IAXA,KAEA,MADA9pB,GAAA9P,QACA8P,EAAA9P,MAAAmU,EAAAylB,GACK,MAAA15B,GAEL,MAAA4P,GAAA9P,MAAAmU,EAAAylB,EAAAzlB,IAUAnd,KAAAgJ,MAAA,WACA,UAAA+U,GAAA/d,KAAA6V,aAAApV,IAAAquC,EAAAzwB,MAAAre,KAAAqd,aAIA,MAAAlD,GAAA4D,KAAA8wB,IAeA9gB,EAAA,2BACA,0BACA,SAAAsC,GAIA,QAAA2e,KACAhvC,KAAAivC,aAAA,EAGA,QAAAC,KACAlvC,KAAAmvC,cAAA,EARA,GAAAC,MAAmB3uC,EAAA,SAAA4vB,EAAA9f,OAuBnB4B,EAAA,SAAArT,EAAAG,EAAA2uB,EAAAlrB,GACA,GAAAwa,GAAAmyB,CAEApwC,KAAAqvB,cAGAxvB,EAAAq9B,kBACAjf,EAAA0Q,EAEA9uB,EAAAq9B,iBAAAl9B,EAAAie,GAAA,IACGpe,EAAAwwC,cACHpyB,EAAA,WACA,GAAAwf,GAAA17B,OAAAuuC,KAEA7S,GAAAh3B,SACAg3B,EAAAh3B,OAAAg3B,EAAA8S,YAGA9S,EAAAsS,iBACAtS,EAAAwS,kBAEAthB,EAAA8O,IAGA59B,EAAAwwC,YAAA,KAAArwC,EAAAie,IAIApe,EAAA2B,KACA3B,EAAA2B,GAAA4vB,EAAA9f,QAGA6+B,EAAA/vB,eAAAvgB,EAAA2B,MACA2uC,EAAAtwC,EAAA2B,QAGA4uC,EAAAD,EAAAtwC,EAAA2B,IAEA4uC,EAAAhwB,eAAApgB,KACAowC,EAAApwC,OAGAowC,EAAApwC,GAAA2R,MACAsM,OACAuyB,KAAA7hB,EACAlrB,SAeA0P,EAAA,SAAAtT,EAAAG,EAAA2uB,GACA,GAAA3oB,EAIA,IAFAhG,IAAAqvB,cAEAxvB,EAAA2B,IAAA2uC,EAAAtwC,EAAA2B,KAAA2uC,EAAAtwC,EAAA2B,IAAAxB,GAAA,CACAgG,EAAAmqC,EAAAtwC,EAAA2B,IAAAxB,EAKA,QAAAoC,GAAA4D,EAAA1D,OAAA,EAA+BF,GAAA,IAE/B4D,EAAA5D,GAAAouC,OAAA7hB,GAAA3oB,EAAA5D,GAAAqB,MAAAkrB,IACA9uB,EAAAw9B,oBACAx9B,EAAAw9B,oBAAAr9B,EAAAgG,EAAA5D,GAAA6b,MAAA,GACKpe,EAAA4wC,aACL5wC,EAAA4wC,YAAA,KAAAzwC,EAAAgG,EAAA5D,GAAA6b,MAGAjY,EAAA5D,GAAAouC,KAAA,KACAxqC,EAAA5D,GAAA6b,KAAA,KACAjY,EAAAwE,OAAApI,EAAA,OArBA2L,KAwBA4gB,IAduCvsB,KA0BvC,GALA4D,EAAA1D,cACA6tC,GAAAtwC,EAAA2B,IAAAxB,GAIAoxB,EAAAve,WAAAs9B,EAAAtwC,EAAA2B,KAAA,OACA2uC,GAAAtwC,EAAA2B,GAGA,WACA3B,GAAA2B,GACI,MAAAyI,GACJpK,EAAA2B,OA3CAuM,MAmEA,QACAmF,WACAC,cACAC,gBAbA,SAAAvT,EAAA4D,GACA5D,KAAA2B,IAIA4vB,EAAAhiB,KAAA+gC,EAAAtwC,EAAA2B,IAAA,SAAA4uC,EAAApwC,GACAmT,EAAAtT,EAAAG,EAAAyD,SA2BAqrB,EAAA,sCACA,8BACA,yBACA,uBACA,0BACA,wBACA,wBACA,SAAA5T,EAAAkW,EAAAqO,EAAAiR,EAAAhf,EAAAzU,GAEA,QAAAvE,KACA,GAAAsvB,GAAA2I,IAEAvf,GAAA/f,OAAAtQ,MACAuY,KAAA,SAAA9D,GACA,GAAAhP,GAAAu7B,EAAA7wB,EAAA+yB,EAAA2M,EAAAhmC,EAAAy2B,EAAAtgC,KAAAouC,EAAA9N,EAAAzqB,YAEAoxB,GAAAxyB,EACAm7B,KAGAz/B,EAAA82B,EAAArvB,OAAAzH,OAAAwgB,EAAAG,cAAAmW,EAAArvB,OAAAw2B,EAAAl4B,IAAA,wBAEA8qB,EAAAoN,EAAArN,mBAEAC,EAAAgN,UAAA,cAAAI,EAAA3tC,IAAA,oDACAwmC,EAAAlvB,UAAAq2B,EAAAl4B,IAAA,mCACA+wB,EAAA6I,WAAA1B,EAAAl4B,IAAA,kDACA/F,EAAA,YAAAA,EAAAmK,KAAA,mBAEA7U,EAAAi5B,EAAAluB,IAAA49B,EAAA3tC,KAGA4vB,EAAA/f,OAAA7K,EAAAO,OACAi7B,SAAA,WACAp3B,IAAA,EACA2uB,KAAA,EACAtf,MAAA,OACAnP,OAAA,SAIAm5B,EAAAxE,EAAAluB,IAAAy2B,EAAAxvB,eAGA22B,EAAAl4B,IAAA,wBACA,WAAAwoB,EAAAxsB,SAAAgxB,EAAA,cACAA,EAAAl9B,MAAAi7B,SAAA,YAGA4O,EAAAllB,SAAA+T,EAAAxsB,SAAAgxB,EAAA,kBAEAA,EAAAl9B,MAAA6pC,SACA7O,EAAAh7B,MAAA6pC,SAAA,EAEAF,EAAAx9B,SAAA+wB,EAAA,iBAAAh6B,GACA,GAAAzD,GAAAi5B,EAAAluB,IAAA49B,EAAA3tC,IACAgF,OAAA2S,UACA3S,EAAAG,QAEAsD,EAAA8lC,kBACM1O,EAAA7/B,MAKNoJ,EAAAukC,EAAAl4B,IAAA,sBAAAgtB,EAAAlC,EAEA2O,EAAAx9B,SAAAtI,EAAA,uBACAy2B,EAAAlsB,QAAA,eACKksB,EAAA7/B,KAELkvC,EAAAx9B,SAAAtI,EAAA,sBACAy2B,EAAAlsB,QAAA,eACKksB,EAAA7/B,KAELkvC,EAAAx9B,SAAAtI,EAAA,uBACAy2B,EAAAlsB,QAAA,cACKksB,EAAA7/B,KAELkvC,EAAAx9B,SAAAusB,EAAAluB,IAAAy2B,EAAAjvB,WAAA,qBACAsoB,EAAAlsB,QAAA,YACKksB,EAAA7/B,KAGLgF,EAAAyS,SAAA,QAAA63B,KAeA,GAdAH,KAEA3I,EAAA6I,UAEAzf,EAAAhiB,KAAArO,KAAAwU,MAAA,SAAAN,GACA,MAAAA,EAAAjV,MACA2wC,EAAAh/B,KAAAsD,KAIA07B,KAAA5mC,MAAAsB,KAAAtK,KAAAwU,OAIA,OAAA0H,EAAAC,SAAA,aAAAD,EAAAC,QACAnc,KAAAtB,MAAA,OACM,CAEN,GAAAyuC,GAAAntC,KAAAgwC,WAAA,EACAhwC,MAAAi5B,WAAAgX,aAAA9C,EAAAntC,MACAmtC,EAAAj1B,SAAA63B,EAEAzP,EAAAlsB,QAAA,WAIAksB,EAAAlsB,SACAnP,KAAA,QACA03B,OAAA,IAGAqE,EAAA,MAGAkP,SAAA,WACA,MAAAN,IAGAtyB,QAAA,SAAA5d,GACA,GAAA+F,GAAA2oC,EAAApuC,KAAA6V,cAEApQ,EAAAi5B,EAAAluB,IAAA49B,EAAA3tC,QACAgF,EAAA2S,WAAA1Y,IAIAoU,QAAA,WACA,GAAAs6B,GAAApuC,KAAA6V,aACAs6B,EAAA/B,EAAAhN,UACAJ,EAAAoN,EAAArN,kBAGA4O,GAAAt9B,gBAAA2uB,EAAAhhC,KAAAS,KACAkvC,EAAAt9B,gBAAA40B,GAAAvI,EAAAluB,IAAAy2B,EAAAjvB,WAAAhY,KAAAS,KACAkvC,EAAAt9B,gBAAA40B,GAAAvI,EAAAluB,IAAAy2B,EAAAxvB,eAAAzX,KAAAS,KAEAugC,IACAA,EAAAgN,UAAA,IAGAmC,EAAA5P,eAAAvgC,KAAAS,KAEAmvC,EAAA3I,EAAAjG,EAAAmP,EAAA,QAKA,MAAAh2B,GAAAxC,cAmBAoW,EAAA,qCACA,8BACA,yBACA,uBACA,0BACA,yBACA,SAAA5T,EAAAkW,EAAAqO,EAAAiR,EAAAhf,GAEA,QAAAlY,KA8DA,QAAA23B,GAAAlnC,GACA,IAAAA,EAAAmnC,eAAAnnC,EAAAmnC,aAAArO,MACA,QAGA,IAAAA,GAAA3R,EAAA3e,QAAAxI,EAAAmnC,aAAArO,UAEA,YAAA3R,EAAA1e,QAAA,QAAAqwB,KACA,IAAA3R,EAAA1e,QAAA,kBAAAqwB,KACA,IAAA3R,EAAA1e,QAAA,yBAAAqwB,GAKA,QAAAsO,GAAA14B,GAEA,OADAqZ,MACA5vB,EAAA,EAAkBA,EAAAuW,EAAArW,OAAmBF,OACrCuP,KAAAyN,MAAA4S,EAAArZ,EAAAvW,GAAA8Y,WAAA7L,MAAA,WAEA,YAAA+hB,EAAA1e,QAAA,IAAAsf,QAIA,QAAAsf,GAAAr8B,GACA,IAAAs8B,EAAAjvC,OACA,QAEA,IAAA6Y,GAAAuW,EAAAS,iBAAAld,EAAAjV,KACA,QAAAmb,IAAA,IAAAiW,EAAA1e,QAAAyI,EAAAo2B,GAIA,QAAAC,GAAAh+B,EAAAuB,GACA,GAAA08B,KACArgB,GAAAhiB,KAAAoE,EAAA,SAAA1G,GACA,GAAA4kC,GAAA5kC,EAAA6kC,kBAEA,IAAAD,EAEA,GAAAA,EAAAE,OAAA,CACA,GAAA38B,GAAAnI,EAAA+kC,WACAP,GAAAr8B,IACA07B,EAAAh/B,KAAAsD,OAGAw8B,GAAA9/B,KAAA+/B,KAKAD,EAAAnvC,OACAwvC,EAAAL,EAAA18B,GAEAA,IAKA,QAAA+8B,GAAAL,EAAA18B,GACA,GAAAiD,KACAoZ,GAAAhiB,KAAAqiC,EAAA,SAAAC,GACA15B,EAAArG,KAAA,SAAAogC,GACAC,EAAAN,EAAAK,OAGA3gB,EAAAzX,SAAA3B,EAAA,WACAjD,MAKA,QAAAi9B,GAAAN,EAAA38B,GACA28B,EAAAE,OACAF,EAAAz8B,KAAA,SAAAA,GACAq8B,EAAAr8B,IACA07B,EAAAh/B,KAAAsD,GAEAF,KACK,WAELA,MAEI28B,EAAAO,YACJC,EAAAR,EAAA38B,GAEAA,IAKA,QAAAm9B,GAAAC,EAAAp9B,GAIA,QAAAq9B,GAAAL,GACAM,EAAAC,YAAA,SAAAC,GACAA,EAAAjwC,WACAqP,KAAAyN,MAAAqyB,EAAAc,GACAH,EAAAL,IAEAA,KAEKA,GAXL,GAAAN,MAAAY,EAAAF,EAAAK,cAeAJ,GAAA,WACAN,EAAAL,EAAA18B,KAxKA,GAAAizB,GAAA2I,KAAAY,IAEAngB,GAAA/f,OAAAtQ,MACAuY,KAAA,SAAA9D,GACA,GAAAi9B,GAAApR,EAAAtgC,IAEAinC,GAAAxyB,EACA+7B,EAAAF,EAAArJ,EAAArvB,QACA85B,EAAAzK,EAAAjvB,UAEA23B,EAAAx9B,SAAAu/B,EAAA,oBAAAxoC,GACAknC,EAAAlnC,KAGAA,EAAA8lC,iBACA9lC,EAAAmnC,aAAAsB,WAAA,SACKrR,EAAA7/B,KAELkvC,EAAAx9B,SAAAu/B,EAAA,gBAAAxoC,GACAknC,EAAAlnC,KAGAA,EAAA8lC,iBAEAY,KAGA1mC,EAAAmnC,aAAA59B,OAAAvJ,EAAAmnC,aAAA59B,MAAA,GAAAm+B,iBACAH,EAAAvnC,EAAAmnC,aAAA59B,MAAA,WACA6tB,EAAAlsB,QAAA,WAGAic,EAAAhiB,KAAAnF,EAAAmnC,aAAA77B,MAAA,SAAAN,GACAq8B,EAAAr8B,IACA07B,EAAAh/B,KAAAsD,KAGAosB,EAAAlsB,QAAA,WAEKksB,EAAA7/B,KAELkvC,EAAAx9B,SAAAu/B,EAAA,qBAAAxoC,GACAo3B,EAAAlsB,QAAA,cACKksB,EAAA7/B,KAELkvC,EAAAx9B,SAAAu/B,EAAA,qBAAAxoC,GACAo3B,EAAAlsB,QAAA,cACKksB,EAAA7/B,MAGLyvC,SAAA,WACA,MAAAN,IAGA97B,QAAA,WACA67B,EAAAt9B,gBAAA40B,GAAAvI,EAAAluB,IAAAy2B,EAAAjvB,WAAAhY,KAAAS,KACAmvC,EAAAY,EAAAvJ,EAAA,QAqHA,MAAA9sB,GAAA1B,aAmBAsV,EAAA,uCACA,8BACA,0BACA,0BACA,SAAA5T,EAAAsoB,EAAApS,GAEA,QAAAkT,KAkDA,QAAAqO,GAAA5gC,GACA,MAAAyxB,GAAAnF,KAAAtsB,EAAAgyB,UAAAhyB,EAAAjR,QAAA,eAlDA,GAAA6jC,GAAAiO,GAAA,CAEAxhB,GAAA/f,OAAAtQ,MAEAksB,KAAA,SAAAuX,EAAA3qB,GACA,GAAApT,GAAA1F,IAEA4jC,GAAA,GAAA5iC,QAAAuiC,WAEAK,EAAAzH,iBAAA,oBAAAjzB,GACAxD,EAAA0O,QAAAlL,KAGA06B,EAAAzH,iBAAA,gBAAAjzB,GACAxD,EAAA0O,QAAAlL,KAGA06B,EAAAzH,iBAAA,iBAAAjzB,GACAxD,EAAA0O,QAAAlL,EAAA06B,EAAAj3B,SAGAi3B,EAAAzH,iBAAA,qBACAyH,EAAA,OAGA,aAAAvT,EAAAhgB,OAAAuzB,EAAAH,KACAoO,GAAA,EACAjO,EAAAH,GAAA3qB,EAAA6D,cACK,uBAAA8mB,IACLoO,GAAA,EACAjO,EAAAI,cAAAlrB,EAAA6D,eAIAuZ,UAAA,WACA,MAAA0N,MAAApU,OAAAqiB,EAAAD,EAAAhO,EAAApU,QAAAoU,EAAApU,OAAA,MAGA3S,MAAA,WACA+mB,GACAA,EAAA/mB,SAIA/I,QAAA,WACA8vB,EAAA,QASA,MAAAzpB,GAAAopB,eAqBAxV,EAAA,0CACA,8BACA,yBACA,wBACA,uBACA,kBACA,kBACA,qBACA,wBACA,wBACA,SAAA5T,EAAAkW,EAAAM,EAAA8U,EAAA7nB,EAAAG,EAAAxB,EAAAmV,EAAAxV,GAEA,QAAAJ,KAsPA,QAAAg2B,GAAAnF,EAAAztC,GACA,GAAA4Z,GAAAi5B,EAAArsC,EAAA1F,IAGA8Y,GAAA5Z,EAAAomC,UAAA3oB,YAGAo1B,EAAA,GAAA/wC,QAAAuiC,WACAwO,EAAA94B,OAAA,WAEA/Z,EAAAud,OAAAvd,EAAAqmC,cAAA,GAAAxnB,GAAA,MACA9Y,KAAA6T,EAAA7T,KACA/F,KAAA6yC,EAAAviB,UAGAzY,EAAArL,KAAApB,KAAA5E,EAAAinC,EAAAztC,IAEA6yC,EAAAhO,mBAAAjrB,GAIA,QAAAk5B,KACA,OAAAhxC,OAAA8a,gBAAA,OAAAI,EAAAC,SAAAD,EAAAvZ,QAAA,EAGA,WAEA,OADAsvC,IAAA,0CACA5wC,EAAA,EAAoBA,EAAA4wC,EAAA1wC,OAAoBF,IACxC,IACA,UAAA6wC,eAAAD,EAAA5wC,IACO,MAAAsY,QAPP,GAAA3Y,QAAA8a,eAcA,QAAAq2B,GAAAj3B,GACA,GAAAk3B,GAAAl3B,EAAAwsB,YACA2K,EAAAn3B,EAAAC,YAWA,OARA,OAAAe,EAAAC,SAAAk2B,GAAAD,MAAA7Z,iBAAA,sBAAAtlB,KAAAiI,EAAAktB,kBAAA,mBACAgK,EAAA,GAAApxC,QAAAkxC,cAAA,oBACAE,EAAAzV,OAAA,EACAyV,EAAAE,iBAAA,EACAF,EAAAG,QAAAF,IAIAD,IACA,OAAAl2B,EAAAC,SAAA,IAAAi2B,EAAAI,aAAAJ,EAAA7Z,iBAAA,gBAAA6Z,EAAA7Z,gBAAAka,SACA,KAGAL,EAIA,QAAAM,GAAAC,GACA,GAAAz/B,GAAA,wBAAAqC,OAAAmV,UAEAkoB,EAAA,OACAjkC,EAAA,EAIA,KAHA3O,KAAA6V,aAGAK,IAAA,sBACA,SAAAwb,GAAA+H,aAAA/H,EAAA+H,aAAAG,kBAwBA,OArBAkM,GAAAxpB,iBAAA,gDAA8DpJ,GAG9Dy/B,EAAAtkC,KAAA,SAAA3P,EAAAO,GAKA0P,GAFAjQ,YAAAqf,GAhBA,KAkBA7K,EAAA0/B,EACA,yCAAsC3zC,EAAA,gBAAqBi+B,SAAAn8B,mBAAArC,EAAAO,MAAA,aAAA2zC,EAC3D,kBAAAl0C,EAAAuG,MAAA,4BAAA2tC,IACAl0C,EAAAie,YAAAi2B,EArBA,KAuBA1/B,EAAA0/B,EACA,yCAAsC3zC,EAAA,IAAA2zC,IACtC1V,SAAAn8B,mBAAArC,IAAAk0C,IAIAjkC,GA7BA,KA6BAuE,EA7BA,KA6BA0/B,EA/UA,GACA9M,GACA+M,EAFA97B,EAAA/W,IAKAqwB,GAAA/f,OAAAtQ,MACA0L,KAAA,SAAAihC,EAAAztC,GACA,GAAAwG,GAAA1F,KACA8yC,EAAA,YAAA52B,EAAAC,SAAAD,EAAAvZ,SAAA,GAAAuZ,EAAAvZ,QAAA,EACAowC,EAAA,oBAAA72B,EAAAC,QACA62B,GAAA,CAWA,IAPAH,EAAAlG,EAAA1sC,IAAAuR,QAAA,2BAAA8c,cAEAwX,EAAAkM,IACAlM,EAAAzpB,KAAAswB,EAAAtkB,OAAAskB,EAAA1sC,IAAA0sC,EAAAhQ,MAAAgQ,EAAAltC,KAAAktC,EAAAlG,UAIAvnC,YAAA6e,GACA7e,EAAA2e,eACAm1B,GAAA,GAEA9zC,IAAAyd,gBACK,IAAAzd,YAAAqd,GAAA,CAEL,GAAArd,EAAAmmC,UACA,GAAAnmC,EAAAomC,UAAAznB,aACA3e,EAAAwzC,EAAApoC,KAAA5E,EAAAxG,GACA8zC,GAAA,MACO,KAAAF,GAAAC,IAAA,SAAA1iB,EAAAhgB,OAAAnR,EAAAomC,UAAA3oB,cAAA3b,OAAAuiC,WAIP,WADAuO,GAAAxnC,KAAA5E,EAAAinC,EAAAztC,EAMA,IAAAA,YAAAqd,GAAA,CACA,GAAAo2B,GAAA,GAAA3xC,QAAAub,QACArd,GAAAmP,KAAA,SAAA3P,EAAAO,GACAP,YAAAqf,GACA40B,EAAAl2B,OAAAxd,EAAAP,EAAAie,aAEAg2B,EAAAl2B,OAAAxd,EAAAP,KAGAQ,EAAAyzC,GAMA7M,EAAA/pB,QACA4wB,EAAA3F,kBACAlB,EAAAkB,iBAAA,GAGAlB,EAAA3J,iBAAA,gBAAAjzB,GACAxD,EAAA0O,QAAAlL,KAGA48B,EAAA3J,iBAAA,iBAAAjzB,GACAxD,EAAA0O,QAAAlL,KAIA48B,EAAA3J,iBAAA,oBAAAjzB,GACAxD,EAAA0O,QAAAlL,KAGA48B,EAAA/pB,OAAAogB,iBAAA,oBAAAjzB,GACAxD,EAAA0O,SACAnP,KAAA,iBACA6P,OAAA5L,EAAA4L,OACAE,MAAA9L,EAAA8L,WAKA8wB,EAAAmN,mBAAA,WAGA,OAAAnN,EAAApC,YAEA,OAKA,OACA,KAEA,QAEA,GAAA1uB,GAAAF,CAEA,KACA2wB,EAAAV,cAAA4H,EAAA1sC,OACA+U,EAAA8wB,EAAAsC,kBAAA,sBAGAtC,EAAA3qB,eACArG,EAAAgxB,EAAA3qB,aAAA5Z,QAES,MAAAoY,GACT3E,EAAAF,EAAA,EAGApP,EAAA0O,SACAnP,KAAA,WACA+gC,mBAAAhxB,EACAA,MAAA2V,SAAA3V,EAAA,IACAF,UAEA,MAEA,QAEAgxB,EAAAmN,mBAAA,aAGA,IAAAnN,EAAA17B,OACA1E,EAAA0O,QAAA,SAEA1O,EAAA0O,QAAA,UASAic,EAAAve,WAAA66B,EAAA7+B,UACAuiB,EAAAhiB,KAAAs+B,EAAA7+B,QAAA,SAAApP,EAAAwpC,GACApC,EAAAxpB,iBAAA4rB,EAAAxpC,KAKA,KAAAiuC,EAAAjW,cAAA,gBAAAoP,KACA,SAAA6G,EAAAjW,cAAAxa,EAAAhG,IAAA,+BAGA4vB,EAAApP,aAAAiW,EAAAjW,aAFAoP,EAAApP,aAAA,QAOAsc,EAGAlN,EAAA0I,aACA1I,EAAA0I,aAAAtvC,GAEA,WAGA,OADAg0C,GAAA,GAAAzE,YAAAvvC,EAAAqC,QACAF,EAAA,EAAsBA,EAAAnC,EAAAqC,OAAiBF,IACvC6xC,EAAA7xC,GAAA,IAAAnC,EAAAs/B,WAAAn9B,EAEAykC,GAAAp6B,KAAAwnC,EAAAC,WAXArN,EAAAp6B,KAAAxM,GAgBAwG,EAAA0O,QAAA,cAGAg/B,UAAA,WAEA,IACA,GAAAtN,EACA,MAAAA,GAAA17B,OAEK,MAAAuP,IACL,UAGA05B,YAAA,SAAA3c,GACA,GAAA0X,GAAApuC,KAAA6V,YAEA,KACA,OAAA6gB,GACA,WACA,GAAAxiB,GAAA,GAAA0J,GAAAwwB,EAAA3tC,IAAAqlC,EAAA7qB,UAGAq4B,EAAAxN,EAAAsC,kBAAA,sBACA,IAAAkL,EAAA,CAEA,GAAA34B,GAAA24B,EAAA34B,MAAA,+BACAA,KACAk4B,EAAAl4B,EAAA,IASA,MANAzG,GAAAjV,KAAA4zC,EAGA3+B,EAAAjP,OACAiP,EAAAjP,KAAA0rB,EAAAU,YAAAwhB,IAEA3+B,CAEA,YACA,MAAAgI,GAAAhG,IAAA,+BAGA4vB,EAAA7qB,SAFA,MAAA6qB,EAAA17B,QAAApJ,OAAA4pB,UAAAK,MAAA6a,EAAA3qB,cAAA,IAIA,gBACA,MAAAg3B,GAAArM,EAEA,SACA,WAAAA,EAAA3qB,aAAA2qB,EAAA3qB,aAAA,MAEK,MAAAxB,GACL,cAIA0B,sBAAA,WACA,IACA,MAAAyqB,GAAAzqB,wBACK,MAAA1B,IACL,UAGAkD,MAAA,WACAipB,GACAA,EAAAjpB,SAIA/I,QAAA,WACAiD,EAAA87B,EAAA,QAsGA,MAAA14B,GAAA2B,mBAmBAiS,EAAA,uDACA,kBAIA,QAAA7B,GAAAqnB,EAAA5gC,GACA,GAAAtR,GAAAmyC,EAAAC,EAAA,MAAA9gC,EAAA,GAAA+gC,EAAA,CAEA,KAAAryC,EAAA,EAAcA,EAAAsR,EAAUtR,IACxBqyC,GAAAC,EAAAnV,WAAA+U,EAAAlyC,IAAA0R,KAAA6gC,IAAAJ,EAAA,EAAAnyC,EAGA,OAAAqyC,GAGA,QAAAG,GAAAC,EAAAP,EAAAhyC,GACAA,EAAA,IAAA8b,UAAA9b,SAAAoyC,EAAApyC,OAAAgyC,EAAA,EACAI,IAAA5Q,OAAA,EAAAwQ,GAAAO,EAAAH,EAAA5Q,OAAAxhC,EAAAgyC,GAGA,QAAAQ,GAAAR,EAAA1gC,EAAAF,GACA,GAAAtR,GAAA2P,EAAA,GAAAwiC,EAAAC,EAAA,MAAA9gC,EAAA,EAEA,KAAAtR,EAAA,EAAcA,EAAAsR,EAAUtR,IACxB2P,GAAA6e,OAAAwO,aAAAxrB,GAAAE,KAAA6gC,IAAAJ,EAAA,EAAAnyC,GAAA,IAGAwyC,GAAA7iC,EAAAuiC,EAAA5gC,GAzBA,GAAAghC,GAAAF,GAAA,CA6BA,QACAA,GAAA,SAAA12B,GACA,GAAAA,IAAA4L,EACA,MAAA8qB,EAEAA,GAAA12B,GAIAxE,KAAA,SAAAy7B,GACAP,GAAA,EACAE,EAAAK,GAGAC,QAAA,SAAAV,EAAAhyC,EAAAuyC,GACA,OAAAz2B,UAAA9b,QACA,OACA,MAAAoyC,GAAA5Q,OAAAwQ,EAAAI,EAAApyC,OAAAgyC,EAAA,EACA,QACA,MAAAI,GAAA5Q,OAAAwQ,EAAAhyC,EACA,QACAsyC,EAAAC,EAAAP,EAAAhyC,EACA,MACA,eAAAoyC,KAIAO,KAAA,SAAAX,GACA,MAAArnB,GAAAqnB,EAAA,IAGAY,MAAA,SAAAZ,GACA,MAAArnB,GAAAqnB,EAAA,IAGAa,KAAA,SAAAb,EAAA1gC,GACA,GAAAA,IAAA8V,EACA,MAAAuD,GAAAqnB,EAAA,EAEAQ,GAAAR,EAAA1gC,EAAA,IAIAwhC,MAAA,SAAAd,GACA,GAAA1gC,GAAAqZ,EAAAqnB,EAAA,EAEA,OAAA1gC,GAAA,WAAAA,EAAA,WAAAA,GAGAyhC,OAAA,SAAAf,EAAA5gC,GACA,GAAA3B,GAAA,EAEA,KAAA2B,GAAA4gC,EAAqBA,EAAA5gC,EAAY4gC,IACjCviC,GAAA6e,OAAAwO,aAAAnS,EAAAqnB,EAAA,GAGA,OAAAviC,QAsBA+c,EAAA,yCACA,0CACA,SAAAwmB,GAEA,eAAAC,GAAAt1C,GACA,GAAAgtB,GAAAqnB,EAAAkB,EAAA3mC,KAAAvM,EAAA,CAMA,IAJA2qB,EAAA,GAAAqoB,GACAroB,EAAA3T,KAAArZ,GAGA,QAAAgtB,EAAAioB,MAAA,IAMA,IAFAZ,EAAA,EAEAA,GAAAr0C,EAAAqC,QAIA,IAHAkzC,EAAAvoB,EAAAioB,MAAAZ,KAGA,OAAAkB,GAAA,MACAlB,GAAA,MADA,CAMA,WAAAkB,GAAA,QAAAA,EACA,KAGAlzC,GAAA2qB,EAAAioB,MAAAZ,EAAA,KAGAkB,GAAA,OAAAA,GAAA,OACA3mC,EAAA8C,MACA8jC,IAAAD,EACAx1C,KAAA,UAAAw1C,GACAt3B,MAAAo2B,EACAhyC,SACAuyC,QAAA5nB,EAAA+nB,QAAAV,EAAAhyC,KAIAgyC,GAAAhyC,EAKA,MAFA2qB,GAAA3T,KAAA,OAGAzK,UAEA6mC,QAAA,SAAAz1C,GACA,GAAAyzB,GAAAtxB,CAMA,KAJA6qB,EAAA3T,KAAArZ,GAEAq0C,EAAA,OAAArnB,EAAAioB,MAAA,KAAAjoB,EAAAioB,MAAA,KAEA9yC,EAAA,EAAAsxB,EAAA7kB,EAAAvM,OAAqCF,EAAAsxB,EAAStxB,IAC9C6qB,EAAA+nB,QAAAV,EAAA,EAAAzlC,EAAAzM,GAAAyyC,SACAP,GAAAzlC,EAAAzM,GAAAE,MAKA,OAFArC,GAAAgtB,EAAA+nB,UACA/nB,EAAA3T,KAAA,MACArZ,GAGA01C,MAAA,SAAA11C,GACA,GAAA4O,GAAA+mC,EAAAxzC,CASA,KAPAwzC,EAAA,GAAAL,GAAAt1C,GACA4O,EAAA+mC,EAAA/mC,QACA+mC,EAAAC,QAEA5oB,EAAA3T,KAAArZ,GAEAmC,EAAAyM,EAAAvM,OACAF,KACA6qB,EAAA+nB,QAAAnmC,EAAAzM,GAAA8b,MAAArP,EAAAzM,GAAAE,OAAA,GAKA,OAFArC,GAAAgtB,EAAA+nB,UACA/nB,EAAA3T,KAAA,MACArZ,GAGAsR,IAAA,SAAAvR,GAGA,OAFAgwB,MAEA5tB,EAAA,EAAAsxB,EAAA7kB,EAAAvM,OAAyCF,EAAAsxB,EAAStxB,IAClDyM,EAAAzM,GAAApC,SAAA8oC,eACA9Y,EAAAre,KAAA9C,EAAAzM,GAAAyyC,QAGA,OAAA7kB,IAGA8lB,IAAA,SAAA91C,EAAA60C,GACA,GAAAzyC,GAAAkT,EAAAoe,EAAA1D,IAQA,KANA,mBACAA,EAAAre,KAAAkjC,GAEA7kB,EAAA6kB,EAGAzyC,EAAAkT,EAAA,EAAAoe,EAAA7kB,EAAAvM,OAA0CF,EAAAsxB,IAC1C7kB,EAAAzM,GAAApC,SAAA8oC,gBACAj6B,EAAAzM,GAAAyyC,QAAA7kB,EAAA1a,GACAzG,EAAAzM,GAAAE,OAAA0tB,EAAA1a,GAAAhT,OACAgT,OAEAA,GAAA0a,EAAA1tB,SANmDF,OAYnDyzC,MAAA,WACAhnC,KACAoe,EAAA3T,KAAA,MACA2T,EAAA,WAsBA6B,EAAA,wCACA,yBACA,0CACA,SAAAsC,EAAAkkB,GAEA,kBA6KA,QAAAS,GAAAC,EAAAC,GACA,GAAA7zC,GAAAkT,EACA1N,EAAA5B,EAAAqD,EAAA0B,EAAAtL,EADA6C,EAAArC,EAAAi1C,MAAAc,GACAE,KAAAC,IAEA,KAAA/zC,EAAA,EAAcA,EAAAE,EAAYF,IAM1B,GAJA2I,EAAAirC,EAAA,GAAA5zC,EAAA,GAEAwF,EAAAquC,EAAAh2C,EAAAi1C,MAAAnqC,OAEA2e,EAAA,CAUA,OANA1jB,EAAA/F,EAAAi1C,MAAAnqC,GAAA,GACA1B,EAAApJ,EAAAk1C,KAAApqC,GAAA,GAEAA,GAAA,EACAmrC,KAEAlwC,GACA,OACA,OAKA,IAJAqD,EAAA,IACA0B,EAAA9K,EAAAk1C,KAAApqC,GAAAqrC,EAAAC,YAGA/gC,EAAA,EAAkBA,EAAAjM,EAAYiM,IAC9B4gC,EAAA5gC,GAAArV,EAAAg1C,KAAAlqC,EAAAuK,EAGA,MAEA,QACAjM,EAAA,IACA0B,EAAA9K,EAAAk1C,KAAApqC,GAAAqrC,EAAAC,YAGAF,EAAAvuC,GAAA3H,EAAAo1C,OAAAtqC,EAAA1B,EAAA,EAEA,SAEA,QAKA,IAJAA,EAAA,IACA0B,EAAA9K,EAAAk1C,KAAApqC,GAAAqrC,EAAAC,YAGA/gC,EAAA,EAAkBA,EAAAjM,EAAYiM,IAC9B4gC,EAAA5gC,GAAArV,EAAAi1C,MAAAnqC,EAAA,EAAAuK,EAGA,MAEA,QAKA,IAJAjM,EAAA,IACA0B,EAAA9K,EAAAk1C,KAAApqC,GAAAqrC,EAAAC,YAGA/gC,EAAA,EAAkBA,EAAAjM,EAAYiM,IAC9B4gC,EAAA5gC,GAAArV,EAAAk1C,KAAApqC,EAAA,EAAAuK,EAGA,MAEA,QAGA,IAFAvK,EAAA9K,EAAAk1C,KAAApqC,GAAAqrC,EAAAC,WAEA/gC,EAAA,EAAkBA,EAAAjM,EAAYiM,IAC9B4gC,EAAA5gC,GAAArV,EAAAk1C,KAAApqC,EAAA,EAAAuK,GAAArV,EAAAk1C,KAAApqC,EAAA,EAAAuK,EAAA,EAGA,MAEA,QAGA,IAFAvK,EAAA9K,EAAAk1C,KAAApqC,GAAAqrC,EAAAC,WAEA/gC,EAAA,EAAkBA,EAAAjM,EAAYiM,IAC9B4gC,EAAA5gC,GAAArV,EAAAm1C,MAAArqC,EAAA,EAAAuK,EAGA,MAEA,SAGA,IAFAvK,EAAA9K,EAAAk1C,KAAApqC,GAAAqrC,EAAAC,WAEA/gC,EAAA,EAAkBA,EAAAjM,EAAYiM,IAC9B4gC,EAAA5gC,GAAArV,EAAAm1C,MAAArqC,EAAA,EAAAuK,GAAArV,EAAAm1C,MAAArqC,EAAA,EAAAuK,EAAA,EAGA,MAEA,SACA,SAGA7V,EAAA,GAAA4J,EAAA6sC,EAAA,GAAAA,EAEAI,EAAAl2B,eAAAxY,IAAA,gBAAAnI,GACA02C,EAAAvuC,GAAA0uC,EAAA1uC,GAAAnI,GAEA02C,EAAAvuC,GAAAnI,EAIA,MAAA02C,GAGA,QAAAI,KACA,GAAAjC,GAAA8B,EAAAC,UAMA,OAHAp2C,GAAAu0C,GAAA,OAAAv0C,EAAAi1C,MAAAZ,IAGA,KAAAr0C,EAAAi1C,MAAAZ,GAAA,KAIA8B,EAAAI,KAAAJ,EAAAC,WAAAp2C,EAAAk1C,KAAAb,GAAA,GACAmC,EAAAV,EAAAK,EAAAI,KAAA71B,EAAA+1B,MAEA,kBAAAD,KACAL,EAAAO,QAAAP,EAAAC,WAAAI,EAAAG,qBACAH,GAAAG,gBAGA,qBAAAH,KACAL,EAAAS,OAAAT,EAAAC,WAAAI,EAAAK,wBACAL,GAAAK,oBAEA,GAIA,QAAAC,GAAAC,EAAApvC,EAAAnI,GACA,GAAAsL,GAAAzI,EAAA20C,EAAAC,EAAA,CAGA,wBACA,GAAAC,GAAAx2B,EAAAq2B,EAAA3nB,cACA,QAAAomB,KAAA0B,GACA,GAAAA,EAAA1B,KAAA7tC,EAAA,CACAA,EAAA6tC,CACA,QAIA1qC,EAAAqrC,EAAAY,EAAA3nB,cAAA,OACA/sB,EAAArC,EAAAi1C,MAAAnqC,EAEA,QAAA3I,GAAA,EAAkBA,EAAAE,EAAYF,IAG9B,GAFA60C,EAAAlsC,EAAA,GAAA3I,EAAA,EAEAnC,EAAAi1C,MAAA+B,IAAArvC,EAAA,CACAsvC,EAAAD,EAAA,CACA,OAIA,QAAAC,IAIAj3C,EAAAk1C,KAAA+B,EAAAz3C,IACA,GA/UA,GAAAQ,GAAA0gB,EAAA81B,EAAoCH,EAApCF,IAoVA,OAlVAn2C,GAAA,GAAAq1C,GAEA30B,GACA+1B,MAaAU,IAAA,cACAC,IAAA,mBACAC,IAAA,OACAC,IAAA,QACA9M,IAAA,WACA+M,MAAA,iBACAC,MAAA,qBAEAC,MACAC,MAAA,cACAC,MAAA,aACAC,MAAA,kBACAC,MAAA,kBACAC,MAAA,mBACAC,MAAA,eACAC,MAAA,UACAC,MAAA,kBACAC,MAAA,oBACAC,MAAA,gBACAC,MAAA,eACAC,MAAA,cACAC,MAAA,QACAC,MAAA,cACAC,MAAA,eACAC,MAAA,eACAC,MAAA,mBACAC,MAAA,mBACAC,MAAA,WACAC,MAAA,aACAC,MAAA,aAEAC,KACAC,EAAA,eACArkB,EAAA,iBACAC,EAAA,cACAqkB,EAAA,kBACAC,EAAA,iBAIA7C,GACA8C,YACAxkB,EAAA,OACAqkB,EAAA,gBAGAI,cACAJ,EAAA,UACArkB,EAAA,UACAC,EAAA,wBACAqkB,EAAA,OACAC,EAAA,YACAG,EAAA,UACAC,EAAA,UACAC,IAAA,SAGAC,aACA7kB,EAAA,WACAC,EAAA,cACAqkB,EAAA,WACAC,EAAA,QACAO,EAAA,eACAC,GAAA,iBACAC,GAAA,QACAC,GAAA,wCACAC,GAAA,wCACAC,GAAA,0CACAC,GAAA,sCACAC,GAAA,mBACAC,GAAA,mBACAC,GAAA,mBACAC,GAAA,MACAC,GAAA,MACAC,GAAA,MACAC,GAAA,MACAC,GAAA,sBACAhB,IAAA,SAGAiB,OACAxB,EAAA,sBACArkB,EAAA,eACA0kB,EAAA,oCACAjjB,EAAA,gCACAqjB,EAAA,qCACAI,GAAA,gEACAE,GAAA,4DACAU,GAAA,4CACAF,GAAA,gCACAG,GAAA,yBACAC,GAAA,oDACAC,GAAA,gDACAC,GAAA,oBACAC,GAAA,sCACAC,GAAA,iEACAC,GAAA,6DACAC,GAAA,6DACAC,GAAA,wFACAC,GAAA,oFACAC,GAAA,iDACAC,GAAA,4EACAC,GAAA,yEAGAC,cACAvC,EAAA,gBACArkB,EAAA,kBACAC,EAAA,gBAGA4mB,cACAxC,EAAA,qBACArkB,EAAA,wBAGA8mB,kBACAzC,EAAA,WACArkB,EAAA,YACAC,EAAA,WACAqkB,EAAA,eAGAyC,UACA1C,EAAA,SACArkB,EAAA,OACAC,EAAA,QAGA+mB,YACA3C,EAAA,SACArkB,EAAA,iBACAC,EAAA,mBAGAgnB,WACA5C,EAAA,SACArkB,EAAA,OACAC,EAAA,QAIAinB,gBACAC,EAAA,iBACAC,EAAA,kBAGAC,iBACAC,EAAA,iBACAC,EAAA,oBA8KA7iC,KAAA,SAAAu7B,GAMA,MAJAuB,IACAC,WAAA,MAGAxB,IAAAnrB,IAAAmrB,EAAAvyC,UAIArC,EAAAqZ,KAAAu7B,GAGA,QAAA50C,EAAAi1C,MAAA,eAAAj1C,EAAAo1C,OAAA,KAAAvM,eACAyN,MAKA6F,KAAA,WACA,MAAA3F,IAGA4F,KAAA,WACA,GAAAC,EAMA,IAHAA,EAAAvG,EAAAK,EAAAO,QAAAh2B,EAAA+2B,MAGA4E,EAAAC,aAAA,UAAAnrB,EAAAhgB,OAAAkrC,EAAAC,aAAA,CACA,OAAAn6C,GAAA,EAAAo6C,EAAA,GAAsCp6C,EAAAk6C,EAAAC,YAAAj6C,OAA6BF,IACnEo6C,GAAA5rB,OAAAwO,aAAAkd,EAAAC,YAAAn6C,GAEAk6C,GAAAC,YAAAC,EAGA,MAAAF,IAGAG,IAAA,WACA,GAAAA,EASA,OAPAA,GAAA1G,EAAAK,EAAAS,OAAAl2B,EAAAq4B,KAGAyD,EAAAC,cAAA,UAAAtrB,EAAAhgB,OAAAqrC,EAAAC,gBACAD,EAAAC,aAAAD,EAAAC,aAAArhC,KAAA,MAGAohC,GAGAE,QAAA,SAAA/0C,EAAAnI,GAEA,2BAAAmI,GAAA,oBAAAA,IAEAmvC,EAAA,OAAAnvC,EAAAnI,IAIAm9C,UAAA,WACA,MAAA38C,GAAA+0C,WAGAa,MAAA,WACA51C,EAAAqZ,KAAA,MACArZ,EAAAw2C,EAAA,KACAL,UAsBAtnB,EAAA,kCACA,yBACA,wBACA,wCACA,yCACA,wCACA,SAAAsC,EAAAqB,EAAA8iB,EAAAD,EAAAuH,GAEA,QAAAC,GAAAC,GAGA,QAAAC,KAIA,IAHA,GAAAxH,GAAAlzC,EAAAgyC,EAAA,EAGAA,GAAA2I,EAAA36C,QAAA,CAGA,IAFAkzC,EAAA0H,EAAAhI,MAAAZ,GAAA,KAEA,OAAAkB,GAAA,MAEA,MADAlB,IAAA,GAEAxpC,OAAAoyC,EAAAhI,MAAAZ,GACAr6B,MAAAijC,EAAAhI,MAAAZ,GAAA,GAGAhyC,GAAA46C,EAAAhI,MAAAZ,GAAA,GACAA,GAAAhyC,EAAA,EAEA,YA0EA,QAAA66C,KACAC,GAAAC,GAAAH,IAGAE,EAAAvH,QACAwH,EAAAxH,QACAqH,EAAA5jC,KAAA,MACA2jC,EAAAK,EAAAD,EAAAD,EAAAF,EAAA,MApGA,GAAAD,GAAAC,EAAAG,EAAAD,EAAAE,EAAAC,CA4BA,IANAN,EAAAF,EAEAG,EAAA,GAAA5H,GACA4H,EAAA5jC,KAAA2jC,GAGA,QAAAC,EAAAhI,MAAA,GACA,SAAAziB,GAAAuI,WAAAvI,EAAAuI,WAAAC,aAIAoiB,GAAA,GAAA9H,GAAAwH,GAGAK,EAAA,GAAAP,GACAU,IAAAH,EAAA9jC,KAAA+jC,EAAA9rC,IAAA,YAGA+rC,EAAAN,EAAA3xC,KAAAtK,MAEAqwB,EAAA/f,OAAAtQ,MACAiF,KAAA,aAEA0N,KAAAupC,EAAA36C,OAEA2X,MAAAqjC,KAAArjC,OAAA,EAEAnP,OAAAwyC,KAAAxyC,QAAA,EAEA6xC,QAAA,SAAA/0C,EAAAnI,GACA,IAAA89C,EACA,QAGA,YAAAnsB,EAAAhgB,OAAAxJ,GACAwpB,EAAAhiB,KAAAxH,EAAA,SAAAnI,EAAAmI,GACAw1C,EAAAT,QAAA/0C,EAAAnI,KAGA29C,EAAAT,QAAA/0C,EAAAnI,GAIA49C,EAAAvH,IAAA,OAAAsH,EAAAR,cAGAY,aAAA,WACA,MAAAp/B,WAAA9b,OAIA+6C,EAAA3H,QAAAt3B,UAAA,IAFA6+B,EAAAI,EAAA3H,QAAAuH,IAKAQ,aAAA,SAAAV,GACA,MAAAM,GAAA1H,MAAAoH,IAGAlH,MAAA,WACAsH,EAAA9xC,KAAAtK,SAIAw8C,IACAx8C,KAAA2sC,MACAgJ,KAAA0G,EAAAhB,OACA1E,KAAA0F,EAAAf,OACArD,IAAAoE,EAAAX,QAeA,MAAAK,KAmBAhuB,EAAA,iCACA,wBACA,yBACA,0CACA,SAAA2D,EAAArB,EAAAkkB,GAEA,QAAAoI,GAAAX,GAqBA,QAAAC,KACA,GAAApgC,GAAA03B,CAIA,OAFA13B,GAAA+gC,EAAAtyC,KAAAtK,KAAA,GAEA,QAAA6b,EAAA5W,MACAsuC,EAAA13B,EAAAsB,OAEAjE,MAAAijC,EAAA/H,KAAAb,GACAxpC,OAAAoyC,EAAA/H,KAAAb,GAAA,KAGA,KAGA,QAAA6I,KACAD,IAGAA,EAAA5jC,KAAA,MACA2jC,EAAAK,EAAAD,EAAAD,EAAAF,EAAA,MAsBA,QAAAS,GAAArJ,GACA,GAAAhyC,GAAA0D,EAAAkY,EAAA0/B,CAOA,OALAt7C,GAAA46C,EAAA/H,KAAAb,GACAtuC,EAAAk3C,EAAA7H,OAAAf,GAAA,KACAp2B,EAAAo2B,GAAA,EACAsJ,EAAAV,EAAA/H,KAAAb,EAAAhyC,IAGAA,SACA0D,OACAkY,QACA0/B,OA1EA,GAAAX,GAAAC,EAAAG,EAAAD,EAAAE,CAEAL,GAAAF,EAEAG,EAAA,GAAA5H,GACA4H,EAAA5jC,KAAA2jC,GAGA,WACA,GAAA3I,GAAA,EAAAlyC,EAAA,EACAy7C,GAAA,sBAGA,KAAAz7C,EAAA,EAAcA,EAAAy7C,EAAAv7C,OAAsBF,IAAAkyC,GAAA,EACpC,GAAAuJ,EAAAz7C,IAAA86C,EAAAhI,MAAAZ,GACA,SAAA7hB,GAAAuI,WAAAvI,EAAAuI,WAAAC,iBA4BAqiB,EAAAN,EAAA3xC,KAAAtK,MAEAqwB,EAAA/f,OAAAtQ,MACAiF,KAAA,YAEA0N,KAAAupC,EAAA36C,OAEA2X,MAAAqjC,EAAArjC,MAEAnP,OAAAwyC,EAAAxyC,OAEA+qC,MAAA,WACAsH,EAAA9xC,KAAAtK,SAKAo8C,EAAA9xC,KAAAtK,MAmBA,MAAA28C,KAmBA5uB,EAAA,uCACA,yBACA,wBACA,iCACA,iCACA,SAAAsC,EAAAqB,EAAAqqB,EAAAY,GAaA,gBAAAX,GACA,GAAA5wB,GAAA2xB,GAAAhB,EAAAY,EAGAvxB,GAAA,WACA,OAAA/pB,GAAA,EAAkBA,EAAA07C,EAAAx7C,OAAgBF,IAClC,IACA,UAAA07C,GAAA17C,GAAA26C,GACK,MAAAriC,IAIL,SAAA+X,GAAAuI,WAAAvI,EAAAuI,WAAAC,iBAGA7J,EAAA/f,OAAAtQ,MAQAiF,KAAA,GASA0N,KAAA,EASAuG,MAAA,EASAnP,OAAA,EASA6xC,QAAA,aASAa,aAAA,SAAAv9C,GACA,MAAAA,IAUAw9C,aAAA,SAAAx9C,GACA,MAAAA,IAQA41C,MAAA,eAGAzkB,EAAA/f,OAAAtQ,KAAAorB,GAEAprB,KAAA80C,MAAA,WACA1pB,EAAA0pB,QACA1pB,EAAA,SA+CA2C,EAAA,oDAKA,QAAAivB,GAAAjkC,EAAA+0B,EAAAr5B,GACA,GAAAwoC,GAAAlkC,EAAAmkC,aAAAC,EAAApkC,EAAAqkC,cACAlkC,EAAAzE,EAAAyE,MAAAnP,EAAA0K,EAAA1K,OACA2nB,EAAAjd,EAAAid,GAAA,EAAAyG,EAAA1jB,EAAA0jB,GAAA,EACAklB,EAAAvP,EAAAtX,WAAA,KACA8mB,GAAAvkC,KACAkkC,GAAA,EACAE,GAAA,EAEA,IAAA3yB,GAAA,KACA+yB,EAAAjnB,SAAAC,cAAA,SACAgnB,GAAArkC,MAAAqkC,EAAAxzC,OAAAygB,CAIA,KAHA,GAAAgzB,GAAAD,EAAA/mB,WAAA,MACAinB,EAAAC,EAAA3kC,EAAAkkC,EAAAE,GACAQ,EAAA,EACAA,EAAAR,GAAA,CAGA,IAFA,GAAAS,GAAAD,EAAAnzB,EAAA2yB,IAAAQ,EAAAnzB,EACAqzB,EAAA,EACAA,EAAAZ,GAAA,CACA,GAAAa,GAAAD,EAAArzB,EAAAyyB,IAAAY,EAAArzB,CACAgzB,GAAAO,UAAA,IAAAvzB,KACAgzB,EAAAQ,UAAAjlC,GAAA8kC,GAAAF,EACA,IAAAM,GAAAJ,EAAA3kC,EAAA+jC,EAAAvrB,GAAA,EACAwsB,EAAAnrC,KAAA8B,KAAAipC,EAAA5kC,EAAA+jC,GACAkB,EAAAR,EAAA5zC,EAAAozC,EAAAM,EAAAtlB,GAAA,EACAimB,EAAArrC,KAAA8B,KAAA+oC,EAAA7zC,EAAAozC,EAAAM,EACAJ,GAAAW,UAAAT,EAAA,IAAAO,EAAAF,EAAAK,EAAAE,EAAAD,EAAAE,GACAP,GAAArzB,EAEAmzB,GAAAnzB,EAEA+yB,EAAAC,EAAA,KAOA,QAAAF,GAAAvkC,GACA,GAAAkkC,GAAAlkC,EAAAmkC,YACA,IAAAD,EADAlkC,EAAAqkC,cACA,SACA,GAAAtP,GAAAxX,SAAAC,cAAA,SACAuX,GAAA50B,MAAA40B,EAAA/jC,OAAA,CACA,IAAAszC,GAAAvP,EAAAtX,WAAA,KAKA,OAJA6mB,GAAAW,UAAAjlC,EAAA,EAAAkkC,EAAA,GAIA,IAAAI,EAAAgB,aAAA,SAAAn/C,KAAA,GAEA,SASA,QAAAw+C,GAAA3kC,EAAAkkC,EAAAE,GACA,GAAArP,GAAAxX,SAAAC,cAAA,SACAuX,GAAA50B,MAAA,EACA40B,EAAA/jC,OAAAozC,CACA,IAAAE,GAAAvP,EAAAtX,WAAA,KACA6mB,GAAAW,UAAAjlC,EAAA,IAMA,KALA,GAAA7Z,GAAAm+C,EAAAgB,aAAA,MAAAlB,GAAAj+C,KAEAy+C,EAAA,EACAW,EAAAnB,EACAoB,EAAApB,EACAoB,EAAAZ,GAAA,CAEA,IADAz+C,EAAA,GAAAq/C,EAAA,MAEAD,EAAAC,EAEAZ,EAAAY,EAEAA,EAAAD,EAAAX,GAAA,EAEA7P,EAAA,IACA,IAAA0Q,GAAAD,EAAApB,CACA,YAAAqB,EAAA,EAAAA,EAGA,OACAC,aAAAnB,EACAoB,SAAA1B,KAoBAjvB,EAAA,mCACA,8BACA,yBACA,wBACA,0BACA,kBACA,sCACA,sCACA,wBACA,wBACA,SAAA5T,EAAAkW,EAAAqB,EAAA+Q,EAAA7kB,EAAA+gC,EAAAC,EAAAjuB,EAAAzU,GAEA,QAAA2iC,KA2KA,QAAAC,KACA,IAAAC,IAAA3zB,EACA,SAAAsG,GAAAuI,WAAAvI,EAAAmJ,aAAAF,kBAEA,OAAAokB,IAAA3zB,EAIA,QAAAwmB,GAAA5gC,GACA,MAAAyxB,GAAAnF,KAAAtsB,EAAAgyB,UAAAhyB,EAAAjR,QAAA,eAIA,QAAAi/C,GAAAhuC,EAAA/L,GACA,eAAAA,GAAA,eAAqCw9B,EAAAnE,KAAAttB,GAIrC,QAAAiuC,GAAAjuC,GACA,GAAAsvB,GAAAtgC,IAEAorB,GAAA,GAAApS,OACAoS,EAAA3R,QAAA,WACA2iC,EAAA9xC,KAAAtK,MACAsgC,EAAAlsB,QAAA,QAAAsd,EAAAuI,WAAAC,eAEA9O,EAAAnS,OAAA,WACAqnB,EAAAlsB,QAAA,SAGAgX,EAAAvf,IAAA,sBAA2BoH,KAAAjC,KAAAguC,EAAAhuC,EAAAk0B,EAAAjgC,MAI3B,QAAAi6C,GAAAhrC,EAAA0Z,GACA,GAAAmkB,GAAAzR,EAAAtgC,IAGA,KAAAgB,OAAAuiC,WAUA,MAAA3V,GAAA1Z,EAAAu5B,eATAsE,GAAA,GAAAxO,YACAwO,EAAA94B,OAAA,WACA2U,EAAA5tB,KAAAwvB,SAEAuiB,EAAAt4B,QAAA,WACA6mB,EAAAlsB,QAAA,QAAAsd,EAAAuI,WAAAC,eAEA6X,EAAA/N,cAAA9vB,GAMA,QAAAirC,GAAAjmC,EAAAnP,EAAAsP,EAAAg0B,GACA,GACA+R,GAIArmC,EACAsmC,EACAC,EACAC,EARAxoC,EAAA/W,KAGA0xB,EAAA,EACAyG,EAAA,CAYA,IALAqnB,EAAAnS,EAGAkS,EAAAv/C,KAAA2sC,MAAA3sC,KAAA2sC,KAAAgJ,MAAA31C,KAAA2sC,KAAAgJ,KAAA8J,aAAA,GAEA,IAAApvB,EAAA1e,QAAA4tC,GAAA,WAEA,GAAAG,GAAAxmC,CACAA,GAAAnP,EACAA,EAAA21C,EAiBA,GAdA3mC,EAAA+lC,IAGAzlC,GAIAH,EAAAnG,KAAA4I,IAAAzC,EAAAH,EAAAG,OACAnP,EAAAgJ,KAAA4I,IAAA5R,EAAAgP,EAAAhP,QAEAq1C,EAAArsC,KAAA4f,IAAAzZ,EAAAH,EAAAG,MAAAnP,EAAAgP,EAAAhP,SANAq1C,EAAArsC,KAAA4I,IAAAzC,EAAAH,EAAAG,MAAAnP,EAAAgP,EAAAhP,QAUAq1C,EAAA,IAAA/lC,GAAAg0B,EAEA,WADArtC,MAAAoU,QAAA,SAKA2qC,KACAA,EAAAzoB,SAAAC,cAAA,WAIA8oB,EAAAtsC,KAAAH,MAAAmG,EAAAG,MAAAkmC,GACAE,EAAAvsC,KAAAH,MAAAmG,EAAAhP,OAAAq1C,GAGA/lC,GACA0lC,EAAA7lC,QACA6lC,EAAAh1C,SAGAs1C,EAAAnmC,IACAwY,EAAA3e,KAAAH,OAAAysC,EAAAnmC,GAAA,IAGAomC,EAAAv1C,IACAouB,EAAAplB,KAAAH,OAAA0sC,EAAAv1C,GAAA,MAGAg1C,EAAA7lC,MAAAmmC,EACAN,EAAAh1C,OAAAu1C,GAIAE,GACAG,EAAAZ,EAAA7lC,MAAA6lC,EAAAh1C,OAAAw1C,GAGAK,EAAAt1C,KAAAtK,KAAA+Y,EAAAgmC,GAAArtB,GAAAyG,EAAAknB,EAAAC,GAEAt/C,KAAAkZ,MAAA6lC,EAAA7lC,MACAlZ,KAAA+J,OAAAg1C,EAAAh1C,OAEA81C,GAAA,EACA9oC,EAAA3C,QAAA,UAIA,QAAAwrC,GAAA7mC,EAAA+0B,EAAApc,EAAAyG,EAAAe,EAAAG,GACA,WAAAnd,EAAAob,GAEAsnB,EAAAF,SAAA3lC,EAAA+0B,GAAqC50B,MAAAggB,EAAAnvB,OAAAsvB,EAAA3H,IAAAyG,UACjC,CACJ2V,EAAAtX,WAAA,MACAwnB,UAAAjlC,EAAA2Y,EAAAyG,EAAAe,EAAAG,IAUA,QAAAsmB,GAAAzmC,EAAAnP,EAAAw1C,GACA,OAAAA,GACA,OACA,OACA,OACA,OACAR,EAAA7lC,MAAAnP,EACAg1C,EAAAh1C,OAAAmP,CACA,MACA,SACA6lC,EAAA7lC,QACA6lC,EAAAh1C,SAcA,GAAAszC,GAAA0B,EAAAvoB,WAAA,KACA,QAAA+oB,GACA,OAEAlC,EAAAxrC,UAAAqH,EAAA,GACAmkC,EAAA+B,OAAA,IACA,MACA,QAEA/B,EAAAxrC,UAAAqH,EAAAnP,GACAszC,EAAAyC,OAAA/sC,KAAAgtC,GACA,MACA,QAEA1C,EAAAxrC,UAAA,EAAA9H,GACAszC,EAAA+B,MAAA,KACA,MACA,QAEA/B,EAAAyC,OAAA,GAAA/sC,KAAAgtC,IACA1C,EAAA+B,MAAA,KACA,MACA,QAEA/B,EAAAyC,OAAA,GAAA/sC,KAAAgtC,IACA1C,EAAAxrC,UAAA,GAAA9H,EACA,MACA,QAEAszC,EAAAyC,OAAA,GAAA/sC,KAAAgtC,IACA1C,EAAAxrC,UAAAqH,GAAAnP,GACAszC,EAAA+B,OAAA,IACA,MACA,QAEA/B,EAAAyC,QAAA,GAAA/sC,KAAAgtC,IACA1C,EAAAxrC,WAAAqH,EAAA,IAMA,QAAAkjC,KACA4D,IACAA,EAAAlL,QACAkL,EAAA,MAEAC,EAAA70B,EAAA2zB,EAAA7Z,EAAA,KACA2a,GAAA,EA5YA,GACAz0B,GAAA40B,EAAAjB,EAAAkB,EAAA/a,EADAgb,EAAAlgD,KAEA6/C,GAAA,EACAL,GAAA,CAGAnvB,GAAA/f,OAAAtQ,MACAmgD,aAAA,SAAArnC,GACA,GAAAwnB,GAAAtgC,KAAAouC,EAAA9N,EAAAzqB,aACAuqC,IAAA/iC,UAAA9b,OAAA,IAAA8b,UAAA,EAGA,KAAA+wB,EAAAl4B,IAAA,iBACA,SAAAwb,GAAA+H,aAAA/H,EAAA+H,aAAAG,kBAKA,IAFAsL,EAAApsB,EAEAA,EAAA+E,aAGA,MAFAoiC,GAAAnnC,EAAA6D,gBACAsiC,GAAA30C,KAAAtK,KAAAigD,EAGAf,GAAA50C,KAAAtK,KAAA8Y,EAAA6D,YAAA,SAAAgxB,GACAyS,IACAH,EAAArO,EAAAjE,IAEAsR,EAAA30C,KAAAg2B,EAAAqN,MAKA0S,cAAA,SAAAtnC,EAAAm0B,GACAltC,KAAA2sC,KAAA5zB,EAAA4zB,KAEAzH,EAAA,GAAAtnB,GAAA,MACA3e,KAAA8Z,EAAA9Z,KACA0T,KAAAoG,EAAApG,KACA1N,KAAA8T,EAAA9T,OAGAg6C,EAAA30C,KAAAtK,KAAAktC,EAAA+S,EAAAlnC,EAAA20B,oBAAA30B,EAAA00B,iBAGAx3B,QAAA,WACA,GAAAm4B,GAAApuC,KAAA6V,YAeA,QAbAmqC,GAAAC,GAAA7R,EAAAl4B,IAAA,yBACA8pC,EAAA,GAAArB,GAAAsB,KAIA/mC,MAAA4lC,IAAA5lC,OAAA,EACAnP,OAAA+0C,IAAA/0C,QAAA,EACA9E,KAAAigC,EAAAjgC,MAAA0rB,EAAAU,YAAA6T,EAAAjmC,MACA0T,KAAAstC,KAAA1+C,QAAA2jC,EAAAvyB,MAAA,EACA1T,KAAAimC,EAAAjmC,MAAA,GACA0tC,KAAAqT,KAAArT,MAAA3sC,KAAA2sC,WAMArzB,SAAA,WACA6lC,EAAA9gC,MAAAre,KAAAqd,YAGAmwB,YAAA,WAIA,MAHAuR,KACAA,EAAAlkC,GAAA7a,KAAAS,IAAA,WAEAs+C,GAGAvlC,UAAA,SAAAvU,EAAAkU,GAKA,MAJAlU,KAAAjF,KAAAiF,MAEAk6C,EAAA70C,KAAAtK,UAAAkZ,MAAAlZ,KAAA+J,QAAA,GAEA,GAAA6T,GAAA,MACA3e,KAAAimC,EAAAjmC,MAAA,GACAgG,OACA/F,KAAAghD,EAAAxS,kBAAApjC,KAAAtK,KAAAiF,EAAAkU,MAIAs0B,aAAA,SAAAxoC,GACA,GAAAkU,GAAAkE,UAAA,MAGA,KAAAwiC,EACA,MAAAz0B,GAAAvf,GAGA,mBAAA5G,EACA,MAAA85C,GAAAuB,UAAA,YAEA,KAEA,MAAAvB,GAAAuB,UAAA,aAAAnnC,EAAA,KACM,MAAAQ,GACN,MAAAolC,GAAAuB,UAAA,gBAKA5S,kBAAA,SAAAzoC,EAAAkU,GAEA,IAAA0mC,EAKA,MAHAI,KACAA,EAAArO,EAAAsO,EAAAzS,aAAAxoC,EAAAkU,KAEA8mC,CAGA,mBAAAh7C,EACAg7C,EAAArO,EAAAsO,EAAAzS,aAAAxoC,EAAAkU,QACK,CACL,GAAAw0B,EAGAx0B,KACAA,EAAA,GAGA,KAEAw0B,EAAAoR,EAAAuB,UAAA,aAAAnnC,EAAA,KACM,MAAAQ,GACNg0B,EAAAoR,EAAAuB,UAAA,cAGAL,EAAArO,EAAAjE,GAEAqS,IACAC,EAAAD,EAAAtD,aAAAuD,GAEAT,IAEAQ,EAAArT,MAAAqT,EAAArT,KAAAgK,MACAqJ,EAAApE,SACA2E,gBAAAvgD,KAAAkZ,MACAsnC,gBAAAxgD,KAAA+J,SAKAk2C,EAAAD,EAAAvD,aAAAwD,IAIAD,EAAAlL,QACAkL,EAAA,MAMA,MAFAH,IAAA,EAEAI,GAGAnsC,QAAA,WACAosC,EAAA,KACA9D,EAAA9xC,KAAAtK,MACAA,KAAA6V,aAAAurB,UAAAb,eAAAvgC,KAAAS,QA2OA,MAAA0Z,GAAAnB,MAAA6lC,IAuBA9wB,EAAA,+BACA,yBACA,uBACA,uBACA,wBACA,yBACA,SAAAsC,EAAAnU,EAAAwiB,EAAAhN,EAAA/d,GAWA,QAAA8sC,KACA,GAAA99C,EAEA,KACAA,EAAAkzB,UAAA6qB,QAAA,mBACA/9C,IAAAg+C,YACG,MAAAC,GACH,IACAj+C,EAAA,GAAAuvC,eAAA,iCAAA2O,YAAA,YACI,MAAAC,GACJn+C,EAAA,OAIA,MADAA,KAAAgY,MAAA,QACAuc,WAAAv0B,EAAA,OAAAA,EAAA,IASA,QAAAo+C,GAAAtsC,GACA,GAAAusC,GAAA5S,EAAApuC,IAEAyU,GAAA4b,EAAA/f,QAA0B+G,QAAA6E,EAAA7E,SAAuB5C,GAEjDd,EAAArJ,KAAAtK,KAAAyU,EAAAxP,GACA+5B,cAAA,SAAAtgC,GACA,MAAAA,IAAA,YAAA0vC,EAAA1N,MAEAzB,oBAAA,SAAAvgC,GACA,MAAAA,IAAA,YAAA0vC,EAAA1N,MAEAxB,cAAAvrB,EAAAwuB,QACAhD,QAAAxrB,EAAAwuB,QACA/C,eAAA,EACAG,uBAAA,WACA,iBAAA6O,EAAA1N,MAEApB,aAAA3rB,EAAAwuB,QACA3C,yBAAA,EACA/I,qBAAA,SAAAC,GACA,iBAAAA,IAAA11B,OAAA4pB,SAGAyF,EAAAnB,UAAAwH,GAAA,oCAAA0X,EAAA1N,OAEAjB,mBAAA,SAAAprB,GACA,kBAAA+5B,EAAA1N,OAAArQ,EAAAnB,UAAA7a,GAAA,WAEAsrB,YAAAhsB,EAAAwuB,QACAtC,gBAAAlsB,EAAAwuB,QACAvzB,mBAAA,SAAAlQ,GACA,MAAAA,IAAA,YAAA0vC,EAAA1N,MAEAZ,qBAAA,SAAAphC,GACA,MAAAA,IAAA,YAAA0vC,EAAA1N,MAEAhB,oBAAA,SAAAhhC,GACA,MAAAA,IAAA,YAAA0vC,EAAA1N,MAEAX,eAAApsB,EAAAwuB,QACA3zB,WAAA,SAAA9P,GACA,MAAAA,IAAA,YAAA0vC,EAAA1N,MAEAV,cAAA,SAAAthC,GACA,MAAAA,IAAA,YAAA0vC,EAAA1N,MAEAT,oBAAA,EACAC,gBAAA,SAAAvtB,GACA,MAAA0d,GAAAjd,aAAAT,IAAA,oBAAAy7B,EAAA1N,MAEAP,gBAAA,SAAAt+B,GACA,OAAAwuB,EAAAnB,UAAArtB,GAAA,kBAIAm9B,cAAA,SAAAtgC,GACA,MAAAA,GAAA,oBAEAugC,oBAAA,SAAAvgC,GACA,MAAAA,GAAA,oBAEA6gC,uBAAA,SAAA7gC,GACA,MAAAA,GAAA,oBAEA+3B,qBAAA,SAAAC,GACA,MAAArG,GAAAnB,UAAAwH,GAAA,8DAEA+I,mBAAA,SAAAprB,GACA,MAAAgc,GAAAnB,UAAA7a,GAAA,0CAEAzF,mBAAA,SAAAlQ,GACA,MAAAA,GAAA,oBAEAohC,qBAAA,SAAAphC,GACA,MAAAA,GAAA,oBAEAghC,oBAAA,SAAAhhC,GACA,MAAAA,GAAA,oBAEAshC,cAAA,SAAAthC,GACA,MAAAA,GAAA,oBAEAwhC,gBAAA,SAAAvtB,GACA,MAAA0d,GAAAjd,aAAAT,IAAA,6BAEG,UAIH8tC,IAAA,KACAzgD,KAAA0gC,MAAA,GAIArQ,EAAA/f,OAAAtQ,MAEAohC,QAAA,WACA,MAAA1C,GAAAluB,IAAAxQ,KAAAS,MAGA4gC,SAAA,SAAAC,EAAAC,GACA,GAAA9lB,MAAAzS,MAAAsB,KAAA+S,UAAA,EACA,OAAA+wB,GAAAhN,UAAAhR,KAAApwB,KAAAS,IAAA6gC,EAAAC,EAAA9lB,IAGAlD,KAAA,WACA,GAAA0oC,GAAAvwC,EAAAsH,CAEAA,GAAAhY,KAAA+gC,mBAGA1Q,EAAA/f,OAAA0H,EAAAhS,OACAi7B,SAAA,WACAp3B,IAAA,OACA2uB,KAAA,OACAtf,MAAA,MACAnP,OAAA,MACAm3B,SAAA,WAIA+f,EAAA,eAAAjhD,KAAAS,IAAA,gDAAAgU,EAAA4C,QAAA,KAEA,OAAA6E,EAAAC,UACA8kC,GAAA,yDAGAA,GAAA,2EACAxsC,EAAA4C,QAAA,0CACAgmB,OAAAr9B,KAAAS,KAAA,WAAAyb,EAAAmb,wBAAA,2GAKA,OAAAnb,EAAAC,SACAzL,EAAA4lB,SAAAC,cAAA,OACAve,EAAAmpB,YAAAzwB,GACAA,EAAAwwC,UAAAD,EACAvwC,EAAAsH,EAAA,MAEAA,EAAAg2B,UAAAiT,EAIAD,EAAAlyC,WAAA,WACAs/B,MAAA3N,aACA2N,EAAAh6B,QAAA,WAAAsd,GAAA+H,aAAA/H,EAAA+H,aAAAE,gBAEK,MAGL7lB,QAAA,SAAAA,GACA,kBACAA,EAAAxJ,KAAA8jC,GACA+S,aAAAH,GACAvsC,EAAAusC,EAAAltC,EAAAs6B,EAAA,OAEIpuC,KAAA8T,UAEDqG,GAhMH,GAAAlV,GAAA,QAAAkV,IAqMA,OAFAxG,GAAA+tB,eAAAz8B,EAAA87C,GAEA5mC,IAmBA4T,EAAA,iCACA,8BACA,mBACA,SAAA5T,EAAA4D,GAEA,GAAAqjC,IACAp4C,MAAA,SAAA8P,EAAAqE,EAAAylB,EAAA39B,GACA,GAAA8R,GAAA/W,KAAA6V,YAmBA,OAjBAsH,GAAA,EACAA,EAAApK,KAAA4f,IAAA7Z,EAAAnG,KAAAwK,EAAA,GACIA,EAAA,IACJA,EAAApK,KAAA4I,IAAAwB,EAAArE,EAAAnG,OAGAiwB,EAAA,EACAA,EAAA7vB,KAAA4f,IAAA7Z,EAAAnG,KAAAiwB,EAAA,GACIA,EAAA,IACJA,EAAA7vB,KAAA4I,IAAAinB,EAAA9pB,EAAAnG,OAGAmG,EAAA/B,EAAAsqB,SAAA/2B,KAAAtK,KAAA,eAAAmd,EAAAylB,EAAA39B,GAAA,IAEA6T,IACAA,EAAA,GAAAiF,GAAAhH,EAAAtW,IAAAqY,IAEAA,GAIA,OAAAqB,GAAA4D,KAAAqjC,IAmBArzB,EAAA,sCACA,+BACA,SAAA5T,GAEA,GAAAxC,IACAY,KAAA,SAAA9D,GACAzU,KAAA6V,aAAAwrB,SAAA/2B,KAAAtK,KAAA,oBACAf,KAAAwV,EAAAxV,KACA2Y,OAAAnD,EAAAmD,OACAG,SAAAtD,EAAAsD,WAEA/X,KAAAoU,QAAA,UAIA,OAAA+F,GAAAxC,cAmBAoW,EAAA,uCACA,8BACA,2BACA,SAAA5T,EAAAsoB,GAIA,QAAA4e,GAAAniD,EAAAukC,GACA,OAAAA,GACA,iBACA,MAAAhB,GAAAnF,KAAAp+B,EAAA,OACA,0BACA,MAAAujC,GAAAnF,KAAAp+B,EACA,qBACA,MAAAA,GAEA,YAXA,GAAAoiD,GAAA,GAcA/d,GACArX,KAAA,SAAAuX,EAAA3qB,GACA,GAAApT,GAAA1F,KAAA+W,EAAArR,EAAAmQ,YAaA,OAVA,kBAAA4tB,IACA6d,EAAA,SAAAxoC,EAAA7T,MAAA,gBAGAS,EAAA0Q,KAAA,oBAAAlN,EAAAhK,GACAA,IACAoiD,GAAAD,EAAAniD,EAAAukC,MAIA1sB,EAAAsqB,SAAA/2B,KAAAtK,KAAA,4BAAA8Y,EAAArY,MAGAy1B,UAAA,WACA,MAAAorB,IAGAxtC,QAAA,WACAwtC,EAAA,MAIA,OAAAnnC,GAAAopB,eAmBAxV,EAAA,2CACA,8BACA,2BACA,SAAA5T,EAAAsoB,GAEA,QAAA4e,GAAAniD,EAAAukC,GACA,OAAAA,GACA,iBACA,MAAAhB,GAAAnF,KAAAp+B,EAAA,OACA,0BACA,MAAAujC,GAAAnF,KAAAp+B,EACA,qBACA,MAAAA,GAEA,YAGA,GAAAwmC,IACAxZ,KAAA,SAAAuX,EAAA3qB,GACA,GAAA0W,EAGA,QADAA,EAFAxvB,KAAA6V,aAEAwrB,SAAA/2B,KAAAtK,KAAA,gCAAA8Y,EAAArY,OAMA,kBAAAgjC,IACAjU,EAAA,SAAA1W,EAAA7T,MAAA,eAA6CuqB,GAG7C6xB,EAAA7xB,EAAAiU,EAAA3qB,EAAA7T,OARA,MAYA,OAAAkV,GAAAurB,mBAmBA3X,EAAA,0CACA,8BACA,yBACA,kBACA,kBACA,4BACA,qBACA,6BACA,SAAA5T,EAAAkW,EAAAtS,EAAAH,EAAA8nB,EAAAnpB,EAAAsvB,GAEA,GAAA/vB,IAEApQ,KAAA,SAAAihC,EAAAztC,GAGA,QAAAwM,KACAihC,EAAAF,UAAA11B,EAAA2pB,KACA3pB,EAAAsqB,SAAA/2B,KAAA5E,EAAA,wBAAAinC,EAAAztC,GAIA,QAAAqiD,GAAAtiD,EAAA6Z,GACA/B,EAAAsqB,SAAA/2B,KAAA5E,EAAA,8BAAAzG,EAAA6Z,EAAArY,KACAvB,EAAA,KACAwM,IAIA,QAAA81C,GAAA1oC,EAAA9E,GACA,GAAAi6B,GAAA,GAAApC,EAEAoC,GAAA73B,KAAA,kCACApC,EAAAhU,KAAAwvB,UAGAye,EAAAxB,UAAA3zB,EAAA6D,YAAA7D,EAAA7T,MACA+Q,KAAAe,EAAAtW,MAvBA,GAAAiF,GAAA1F,KAAA+W,EAAArR,EAAAmQ,YAmCA,IAPAwa,EAAAve,WAAA66B,EAAA7+B,UACAuiB,EAAAhiB,KAAAs+B,EAAA7+B,QAAA,SAAApP,EAAAwpC,GACAnxB,EAAAsqB,SAAA/2B,KAAA5E,EAAA,oCAAAwiC,EAAAxpC,EAAA2vB,cAKAnvB,YAAAqd,GAAA,CACA,GAAAklC,EASA,IARAviD,EAAAmP,KAAA,SAAA3P,EAAAO,GACAP,YAAAqf,GACA0jC,EAAAxiD,EAEA8X,EAAAsqB,SAAA/2B,KAAA5E,EAAA,0BAAAzG,EAAAP,KAIAQ,EAAAmmC,UAGK,CACL,GAAAvsB,GAAA5Z,EAAAomC,SACAxsB,GAAA+E,aACA2jC,EAAA1oC,EAAA,SAAA4oC,GACA5oC,EAAAhF,UACAytC,EAAAE,EAAAC,KAGAH,EAAAE,EAAA3oC,OAVA5Z,GAAA,KACAwM,QAYIxM,aAAA6e,GACJ7e,EAAA2e,aACA2jC,EAAAtiD,EAAA,SAAAwiD,GACAxiD,EAAA4U,UACA5U,EAAAwiD,EAAAjhD,IACAiL,OAGAxM,IAAAuB,IACAiL,KAGAA,KAIA2nC,YAAA,SAAA3c,GACA,GAAAirB,GAAA7oC,EAAA/B,EAAA/W,KAAA6V,YAIA,IAFAiD,EAAA/B,EAAAsqB,SAAA/2B,KAAAtK,KAAA,sCAEA,CAGA,GAFA8Y,EAAA,GAAA8E,GAAA7G,EAAAtW,IAAAqY,GAEA,SAAA4d,EACA,MAAA5d,EAGA,KAGA,GAFA6oC,EAAA,GAAAjc,IAEArV,EAAA1e,QAAA+kB,GAAA,YACA,MAAAirB,GAAA1d,WAAAnrB,EACM,aAAA4d,GAAA11B,OAAA4pB,KACN,MAAAA,MAAAK,MAAA02B,EAAA1d,WAAAnrB,IAEK,QACLA,EAAAhF,WAGA,aAGA+I,MAAA,SAAA+kC,GACA5hD,KAAA6V,aAEAwrB,SAAA/2B,KAAAtK,KAAA,0BAEAA,KAAAw8B,cAAA,oBAEAx8B,KAAAw8B,cAAA,UAQA,OAAAriB,GAAA2B,mBAmBAiS,EAAA,2CACA,8BACA,mBACA,SAAA5T,EAAA4D,GAEA,GAAA8tB,IACAryB,UAAA,SAAAvU,GACA,GAAA8R,GAAA/W,KAAA6V,aACAiD,EAAA/B,EAAAsqB,SAAA/2B,KAAAtK,KAAA,0BAAAiF,EAEA,OAAA6T,GACA,GAAAiF,GAAAhH,EAAAtW,IAAAqY,GAEA,MAIA,OAAAqB,GAAA0xB,gBAmBA9d,EAAA,mCACA,8BACA,yBACA,4BACA,kBACA,6BACA,SAAA5T,EAAAkW,EAAAwb,EAAA9tB,EAAA2nB,GAEA,GAAA1sB,IACAmnC,aAAA,SAAArnC,GAGA,QAAAsX,GAAAyxB,GACA9qC,EAAAsqB,SAAA/2B,KAAAg2B,EAAA,uBAAAuhB,EAAAphD,KACA6/B,EAAAvpB,EAAA,KAJA,GAAAupB,GAAAtgC,KAAA+W,EAAAupB,EAAAzqB,YAOA,IAAAiD,EAAA+E,aAAA,CACA,GAAAowB,GAAA,GAAApC,EACAoC,GAAA73B,KAAA,kCACAga,EAAA6d,EAAAze,OAAA7S,eAEAsxB,EAAAxB,UAAA3zB,EAAA6D,YAAA7D,EAAA7T,MAA+C+Q,KAAAe,EAAAtW,UAE/C2vB,GAAAtX,EAAA6D,cAIA0jC,cAAA,SAAAtnC,GAEA,MADA/Y,MAAA6V,aACAwrB,SAAA/2B,KAAAtK,KAAA,wBAAA+Y,EAAAtY,MAGA+Y,UAAA,SAAAvU,EAAAkU,GACA,GAAApC,GAAA/W,KAAA6V,aACAiD,EAAA/B,EAAAsqB,SAAA/2B,KAAAtK,KAAA,oBAAAiF,EAAAkU,EAEA,OAAAL,GACA,GAAAiF,GAAAhH,EAAAtW,IAAAqY,GAEA,MAGA20B,aAAA,WACA,GAEAkU,GAFA5qC,EAAA/W,KAAA6V,aACAiD,EAAA/B,EAAAiC,MAAAQ,UAAA6E,MAAAre,KAAAqd,UAGA,OAAAvE,IAGA6oC,EAAA,GAAAjc,GACAic,EAAA3d,cAAAlrB,IAHA,MAOA,OAAAqB,GAAAnB,UAuBA+U,EAAA,qCACA,yBACA,uBACA,uBACA,wBACA,yBACA,SAAAsC,EAAAnU,EAAAwiB,EAAAhN,EAAA/d,GAIA,QAAAmuC,GAAAn/C,GACA,GAAAo/C,GACAC,EAAAC,EAAAC,EAAAC,EADAC,GAAA,EAAAC,EAAA,KACAniD,EAAA,CAEA,KACA,IACAmiD,EAAA,GAAAnQ,eAAA,uBAEAmQ,EAAAC,mBAAA3/C,KACAy/C,GAAA,GAGAC,EAAA,KACI,MAAAn5C,GACJ,GAAAq5C,GAAA1sB,UAAA6qB,QAAA,sBAEA,IAAA6B,EAAA,CASA,IARAR,EAAAQ,EAAA5B,YAEA,gBAAAoB,IACAA,EAAA,eAGAC,EAAAD,EAAAzzC,MAAA,KAEA0zC,EAAAzgD,OAAA,GACAygD,EAAAQ,KAGA,MAAAR,EAAAzgD,OAAA,GACAygD,EAAApxC,KAAA,EAKA,KAFAqxC,EAAAt/C,EAAA2L,MAAA,KAEA2zC,EAAA1gD,OAAA,GACA0gD,EAAAO,KAGA,IACAN,EAAAv3B,SAAAs3B,EAAA/hD,GAAA,IACAiiD,EAAAx3B,SAAAq3B,EAAA9hD,GAAA,IACAA,UACMA,EAAA+hD,EAAA1gD,QAAA2gD,IAAAC,EAEND,IAAAC,IAAAzvB,MAAAwvB,KACAE,GAAA,KAIG,MAAAtB,GACHsB,GAAA,EAGA,MAAAA,GASA,QAAAK,GAAAhuC,GACA,GAAAusC,GAAA5S,EAAApuC,IAEAyU,GAAA4b,EAAA/f,QAA0BiH,QAAA2E,EAAA3E,SAAuB9C,GAEjDd,EAAArJ,KAAAtK,KAAAyU,EAAAxP,GACA+5B,cAAArrB,EAAAwuB,QACAlD,oBAAAtrB,EAAAwuB,QACAjD,cAAAvrB,EAAAwuB,QACAhD,QAAAxrB,EAAAwuB,QACA/C,eAAA,EACAG,uBAAA5rB,EAAAwuB,QACA7C,aAAA3rB,EAAAwuB,QACA3C,wBAAA,SAAA9gC,GACA,MAAAA,IAAA,WAAA0vC,EAAA1N,MAEAjK,qBAAA,SAAAC,GACA,eAAAA,KAGA11B,OAAA4pB,MAGA6U,mBAAA,SAAAprB,GACA,iBAAA+5B,EAAA1N,OAAArQ,EAAAnB,UAAA7a,GAAA,WAEAsrB,YAAAhsB,EAAAwuB,QACAtC,gBAAAlsB,EAAAwuB,QACAvzB,mBAAA+E,EAAAwuB,QACArC,qBAAA,SAAAphC,GACA,MAAAA,IAAA,YAAA0vC,EAAA1N,MAEAhB,oBAAA,SAAAhhC,GACA,MAAAA,IAAA,WAAA0vC,EAAA1N,MAEAX,eAAApsB,EAAAwuB,QACA3zB,WAAAmF,EAAAwuB,QACAnC,eAAA,EACAC,oBAAA,EACAC,gBAAAvsB,EAAAwuB,QACAhC,gBAAA,SAAAt+B,GACA,iBAAAusC,EAAA1N,OAAArQ,EAAAnB,UAAArtB,GAAA,kBAIA29B,wBAAA,SAAA9gC,GACA,MAAAA,GAAA,oBAEA+gC,mBAAA,SAAAprB,GACA,MAAAgc,GAAAnB,UAAA7a,GAAA,yCAEAyrB,qBAAA,SAAAphC,GACA,MAAAA,GAAA,oBAEAghC,oBAAA,SAAAhhC,GACA,MAAAA,GAAA,oBAEAyhC,gBAAA,SAAAt+B,GACA,MAAAwuB,GAAAnB,UAAArtB,GAAA,gDAMAigD,EAAA,0BAAA5lC,EAAAC,UACAnc,KAAA0gC,MAAA,GAIArQ,EAAA/f,OAAAtQ,MACAohC,QAAA,WACA,MAAA1C,GAAAluB,IAAAxQ,KAAAS,KAAA+G,QAAAk7C,OAGArhB,SAAA,SAAAC,EAAAC,GACA,GAAA9lB,MAAAzS,MAAAsB,KAAA+S,UAAA,EACA,OAAA+wB,GAAAhN,UAAAhR,KAAApwB,KAAAS,IAAA6gC,EAAAC,EAAA9lB,IAGAlD,KAAA,WACA,GAAAP,EAEAA,GAAAhY,KAAA+gC,mBAEA/oB,EAAAg2B,UAAA,eAAAhuC,KAAAS,IAAA,4JACAgU,EAAA8C,QAAA,4KAIAvX,KAAAS,IAAA,WAAAyb,EAAAmb,wBAAA,eAIA2pB,EAAAlyC,WAAA,WACAs/B,MAAA3N,aACA2N,EAAAh6B,QAAA,WAAAsd,GAAA+H,aAAA/H,EAAA+H,aAAAE,gBAEK,YAAAzd,EAAAob,GAAA,UAGLxjB,QAAA,SAAAA,GACA,kBACAA,EAAAxJ,KAAA8jC,GACA+S,aAAAH,GACAvsC,EAAAusC,EAAAltC,EAAAs6B,EAAA,OAEIpuC,KAAA8T,UAEDqG,GA7KH,GAAAlV,GAAA,cAAAkV,IAkLA,OAFAxG,GAAA+tB,eAAAz8B,EAAAw9C,GAEAtoC,IAmBA4T,EAAA,uCACA,oCACA,yBACA,iCACA,SAAA5T,EAAAkW,EAAAtS,GACA,MAAA5D,GAAA4D,KAAAsS,EAAA/f,UAA0CyN,KAmB1CgQ,EAAA,4CACA,qCACA,SAAA5T,GAEA,GAAAxC,IACAY,KAAA,SAAA9D,GAUAzU,KAAA6V,aAAAwrB,SAAA/2B,KAAAtK,KAAA,mBARA,SAAA4X,GAEA,OADAsC,GAAA,GACA7Y,EAAA,EAAmBA,EAAAuW,EAAArW,OAAmBF,IACtC6Y,IAAA,KAAAA,EAAA,QAAAtC,EAAAvW,GAAAkG,MAAA,QAAAqQ,EAAAvW,GAAA8Y,WAAA3I,QAAA,WAEA,OAAA0I,IAGAzF,EAAAmD,QAAAnD,EAAAxV,KAAAwV,EAAAsD,UACA/X,KAAAoU,QAAA,UAIA,OAAA+F,GAAAxC,cAmBAoW,EAAA,2CACA,oCACA,uBACA,2BACA,SAAA5T,EAAAukB,EAAAiR,GAGA,GAAAl3B,IACAF,KAAA,WACA,GAAAm5B,GAAApR,EAAAtgC,KAAA+W,EAAAupB,EAAAzqB,YA4BA,OA1BA67B,GAAA36B,EAAAgqB,mBAEA4O,EAAAx9B,SAAAu/B,EAAA,oBAAAxoC,GACAA,EAAA8lC,iBACA9lC,EAAAgmC,kBACAhmC,EAAAmnC,aAAAsB,WAAA,QACIrR,EAAA7/B,KAEJkvC,EAAAx9B,SAAAu/B,EAAA,qBAAAxoC,GACAA,EAAA8lC,iBACAtQ,EAAAluB,IAAAuG,EAAAtW,KAAAkiD,UAAAz5C,IAGAA,EAAAgmC,mBAEI5O,EAAA7/B,KAEJkvC,EAAAx9B,SAAAu/B,EAAA,gBAAAxoC,GACAA,EAAA8lC,iBACAtQ,EAAAluB,IAAAuG,EAAAtW,KAAAmiD,SAAA15C,IAGAA,EAAAgmC,mBAEI5O,EAAA7/B,KAEJsW,EAAAsqB,SAAA/2B,KAAAtK,KAAA,oBAIA,OAAAma,GAAA1B,aAmBAsV,EAAA,6CACA,oCACA,yBACA,uCACA,SAAA5T,EAAAkW,EAAAkT,GACA,MAAAppB,GAAAopB,WAAAlT,EAAA/f,UAAgDizB,KAmBhDxV,EAAA,iDACA,oCACA,yBACA,2CACA,SAAA5T,EAAAkW,EAAAqV,GACA,MAAAvrB,GAAAurB,eAAArV,EAAA/f,UAAoDo1B,KAmBpD3X,EAAA,gDACA,oCACA,yBACA,0CACA,SAAA5T,EAAAkW,EAAAvU,GACA,MAAA3B,GAAA2B,eAAAuU,EAAA/f,UAAoDwL,KAmBpDiS,EAAA,iDACA,oCACA,yBACA,2CACA,SAAA5T,EAAAkW,EAAAwb,GACA,MAAA1xB,GAAA0xB,YAAAxb,EAAA/f,UAAiDu7B,KAmBjD9d,EAAA,yCACA,oCACA,yBACA,mCACA,SAAA5T,EAAAkW,EAAArX,GACA,MAAAmB,GAAAnB,MAAAqX,EAAA/f,UAA2C0I,GAE3C/C,QAAA,WACA,GAAAc,GAAA/W,KAAA6V,aACAgtC,GAAA,qBACAljD,GAAagtC,SACbmW,EAAA/rC,EAAAsqB,SAAA/2B,KAAAtK,KAAA,kBAoCA,OAjCA8iD,GAAAnW,MACAtc,EAAAhiB,KAAAw0C,EAAA,SAAAE,GACA,GACAl8C,GACAxF,EACAE,EACA7C,EAJAiuC,EAAAmW,EAAAnW,KAAAoW,EAMA,IAAApW,KAAAqW,KAEA,IADArjD,EAAAgtC,KAAAoW,MACA1hD,EAAA,EAAAE,EAAAorC,EAAAqW,KAAAzhD,OAA4CF,EAAAE,EAAYF,IACxDwF,EAAA8lC,EAAAqW,KAAA3hD,IACA3C,EAAAiuC,EAAA9lC,MAGA,kBAAAoM,KAAAvU,GACAA,EAAAisB,SAAAjsB,EAAA,IACS,aAAAuU,KAAAvU,KACTA,EAAAw4B,WAAAx4B,IAEAiB,EAAAgtC,KAAAoW,GAAAl8C,GAAAnI,KAOAiB,EAAAuZ,MAAAyR,SAAAm4B,EAAA5pC,MAAA,IACAvZ,EAAAoK,OAAA4gB,SAAAm4B,EAAA/4C,OAAA,IACApK,EAAAgT,KAAAgY,SAAAm4B,EAAAnwC,KAAA,IACAhT,EAAAsF,KAAA69C,EAAA79C,KACAtF,EAAAV,KAAA6jD,EAAA7jD,KAEAU,OAyBAouB,EAAA,+BACA,yBACA,wBACA,wBACA,wBACA,SAAAsC,EAAAqB,EAAA/d,EAAAuI,GAIA,QAAA+mC,GAAAxuC,GACA,GAAA25B,GAAApuC,KACAquC,EAAA16B,EAAA0uB,QACAiM,EAAA36B,EAAAwuB,OAGAxuB,GAAArJ,KAAAtK,KAAAyU,EAAAxP,GACA+5B,cAAAqP,EAAArtC,OAAAuiC,YAAAviC,OAAA4c,WAAA6vB,cACAxO,qBAAA,EACAC,cAAAmP,EAAAl0B,EAAAnB,QAAAkD,EAAAhG,IAAA,kBAAAgG,EAAAhG,IAAA,2BACAipB,SAAA,EACAC,eAAA,EACAC,oBAAAgP,EAAA,WACA,iBAAAnyB,EAAAC,SAAAD,EAAAvZ,SAAA,WAAAuZ,EAAAC,SAAAD,EAAAvZ,SAAA,OAEA28B,aAAA,WACA,MAAAnlB,GAAAnB,OAAAo1B,EAAAl4B,IAAA,kBAAAgG,EAAAhG,IAAA,kBAEAqpB,wBAAA,EACAC,yBAAA,EACA/I,qBAAA,SAAAC,GACA,iBAAAA,IAAA11B,OAAA4pB,UAGAyF,EAAA1e,QAAA+kB,GAAA,wBAEA+I,mBAAA,SAAAprB,GACA,OAAAgc,EAAAnB,UAAA7a,GAAA,WAEAsrB,YAAA,WACA,MAAAzjB,GAAAhG,IAAA,kBAEA2pB,iBAAA,EACAjxB,oBAAA,EACA8wB,qBAAA,EACAK,gBAAA,EACAvxB,YAAA,EACAwxB,cAAA,WACA,MAAAoO,GAAAl4B,IAAA,gBAEA+pB,mBAAAoO,EAAA,WACA,kBAAAnyB,EAAAC,SAAAD,EAAAvZ,SAAA,GACA,UAAAuZ,EAAAC,SAAAD,EAAAvZ,SAAA,OACA0tB,EAAA1e,QAAAuK,EAAAC,SAAA,wBAEA+jB,gBAAAoO,EACAnO,gBAAA,SAAAt+B,GACA,OAAAwuB,EAAAnB,UAAArtB,GAAA,kBAKAwuB,EAAA/f,OAAAtQ,MACAuY,KAAA,WACAvY,KAAAoU,QAAA,SAGAN,QAAA,SAAAA,GACA,kBACAA,EAAAxJ,KAAA8jC,GACAt6B,EAAAs6B,EAAA,OAEIpuC,KAAA8T,WAGJuc,EAAA/f,OAAAtQ,KAAAohC,UAAAjnB,GAnEA,GAAAlV,GAAA,QAAAkV,IAwEA,OAFAxG,GAAA+tB,eAAAz8B,EAAAg+C,GAEA9oC,IAmBA4T,EAAA,sCACA,8BACA,yBACA,uBACA,0BACA,wBACA,wBACA,SAAA5T,EAAAkW,EAAAqO,EAAAiR,EAAAhf,EAAAzU,GAEA,QAAAvE,KAGA,QAAAurC,KACA,GAAAliB,GAAAkC,EAAAigB,EAAAC,EAAA39C,EAAAhF,EAAA6/B,EAAAtgC,KAAAouC,EAAA9N,EAAAzqB,YAEApV,GAAA4vB,EAAA9f,KAAA,QAEAywB,EAAAoN,EAAArN,mBAEAjC,IACAqkB,EAAAzkB,EAAAluB,IAAAsuB,EAAA,WAEAzO,EAAA/f,OAAA6yC,EAAAn9C,OAAmC6D,IAAA,SAKnCu5C,EAAA9sB,SAAAC,cAAA,QACA6sB,EAAAnsB,aAAA,KAAAx2B,EAAA,SACA2iD,EAAAnsB,aAAA,iBACAmsB,EAAAnsB,aAAA,iCACAmsB,EAAAnsB,aAAA,kCAEA5G,EAAA/f,OAAA8yC,EAAAp9C,OACAk7B,SAAA,SACAD,SAAA,WACAp3B,IAAA,EACA2uB,KAAA,EACAtf,MAAA,OACAnP,OAAA,SAGAtE,EAAA6wB,SAAAC,cAAA,SACA9wB,EAAAwxB,aAAA,KAAAx2B,GACAgF,EAAAwxB,aAAA,eACAxxB,EAAAwxB,aAAA,OAAAgQ,EAAAhoC,MAAA,YACAwG,EAAAwxB,aAAA,SAAAosB,EAAA/oC,KAAA,MAEA+V,EAAA/f,OAAA7K,EAAAO,OACAs9C,SAAA,QACAC,QAAA,IAGAH,EAAAjiB,YAAA17B,GACAu7B,EAAAG,YAAAiiB,GAGA/yB,EAAA/f,OAAA7K,EAAAO,OACAi7B,SAAA,WACAp3B,IAAA,EACA2uB,KAAA,EACAtf,MAAA,OACAnP,OAAA,SAGA,OAAAmS,EAAAC,SAAAD,EAAAvZ,QAAA,IACA0tB,EAAA/f,OAAA7K,EAAAO,OACAkU,OAAA,uDAIAzU,EAAAyS,SAAA,WACA,GAAAhE,EAEAlU,MAAAtB,QAKAwV,EADAlU,KAAAwU,MACAxU,KAAAwU,MAAA,IAGAvV,KAAAe,KAAAtB,OAIAkxC,GAAA17B,GAEAlU,KAAAkY,SAAA,aACAgrC,EAAA54C,KAAAg2B,GAGAA,EAAAlqB,KAAA,iBAAA25B,KACA,GAAA77B,GAAAzO,EAAAi5B,EAAAluB,IAAA/P,GAAA2iD,EAAA1kB,EAAAluB,IAAA/P,EAAA,QAEA6/B,GAAAxD,OAAA,SAAAiT,GAEAzP,EAAA9rB,MAAAjT,QAAAkE,GAAA29C,IACAlvC,EAAAosB,EAAA9rB,MAAA,GAEA/O,EAAAwxB,aAAA,KAAA/iB,EAAAzT,KACA2iD,EAAAnsB,aAAA,KAAA/iB,EAAAzT,IAAA,SAGA2iD,EAAAnsB,aAAA,SAAA/iB,EAAAzT,IAAA,YAEAgF,EAAA29C,EAAA,MACK,KAEL39C,EAAA29C,EAAA,KACA9iB,EAAAlsB,QAAA,YAKAg6B,EAAAl4B,IAAA,wBACAgtB,EAAAxE,EAAAluB,IAAAy2B,EAAAxvB,eACAk4B,EAAAv9B,YAAA8wB,EAAA,QAAA5C,EAAA7/B,KACAkvC,EAAAx9B,SAAA+wB,EAAA,iBAAAh6B,GACAzD,MAAA2S,UACA3S,EAAAG,QAEAsD,EAAA8lC,kBACK1O,EAAA7/B,MAGLq+B,EAAAr+B,EAEAugC,EAAAmiB,EAAAjgB,EAAA,KAtHA,GAAApE,GAAAmI,EAAA2I,KAAAyT,IAyHAhzB,GAAA/f,OAAAtQ,MACAuY,KAAA,SAAA9D,GACA,GAAAusB,GAAAV,EAAAtgC,KAAAouC,EAAA9N,EAAAzqB,YAGAoxB,GAAAxyB,EACA4uC,EAAA5uC,EAAAmD,OAAAzH,OAAAwgB,EAAAG,cAAArc,EAAAmD,OAAAw2B,EAAAl4B,IAAA,wBAEA8qB,EAAAoN,EAAArN,mBAEA,WACA,GAAAmC,GAAA2M,EAAAhmC,CAEAq5B,GAAAxE,EAAAluB,IAAAiE,EAAAgD,eAGA22B,EAAAl4B,IAAA,wBACA,WAAAwoB,EAAAxsB,SAAAgxB,EAAA,cACAA,EAAAl9B,MAAAi7B,SAAA,YAGA4O,EAAAllB,SAAA+T,EAAAxsB,SAAAgxB,EAAA,kBAEAA,EAAAl9B,MAAA6pC,SACA7O,EAAAh7B,MAAA6pC,SAAA,GAKAhmC,EAAAukC,EAAAl4B,IAAA,sBAAAgtB,EAAAlC,EAEA2O,EAAAx9B,SAAAtI,EAAA,uBACAy2B,EAAAlsB,QAAA,eACMksB,EAAA7/B,KAENkvC,EAAAx9B,SAAAtI,EAAA,sBACAy2B,EAAAlsB,QAAA,eACMksB,EAAA7/B,KAENkvC,EAAAx9B,SAAAtI,EAAA,uBACAy2B,EAAAlsB,QAAA,cACMksB,EAAA7/B,KAENkvC,EAAAx9B,SAAAusB,EAAAluB,IAAAiE,EAAAuD,WAAA,qBACAsoB,EAAAlsB,QAAA,YACMksB,EAAA7/B,KAENyiC,EAAA,QAGAggB,EAAA54C,KAAAtK,MAEAghC,EAAA,KAGAV,EAAAlsB,SACAnP,KAAA,QACA03B,OAAA,KAIAuT,SAAA,WACA,MAAAN,IAGAtyB,QAAA,SAAA5d,GACA,GAAA+F,IAEAA,EAAAi5B,EAAAluB,IAAAsuB,MACAr5B,EAAA2S,WAAA1Y,IAIAoU,QAAA,WACA,GAAAs6B,GAAApuC,KAAA6V,aACAs6B,EAAA/B,EAAAhN,UACAJ,EAAAoN,EAAArN,kBAGA4O,GAAAt9B,gBAAA2uB,EAAAhhC,KAAAS,KACAkvC,EAAAt9B,gBAAA40B,GAAAvI,EAAAluB,IAAAy2B,EAAAjvB,WAAAhY,KAAAS,KACAkvC,EAAAt9B,gBAAA40B,GAAAvI,EAAAluB,IAAAy2B,EAAAxvB,eAAAzX,KAAAS,KAEAugC,IACAA,EAAAgN,UAAA,IAGAmC,EAAA5P,eAAAvgC,KAAAS,KAEAq+B,EAAA8Q,EAAAyT,EAAApc,EAAAjG,EAAAmP,EAAA,QAKA,MAAAh2B,GAAAxC,cAmBAoW,EAAA,uCACA,8BACA,uCACA,SAAA5T,EAAAopB,GACA,MAAAppB,GAAAopB,eAmBAxV,EAAA,0CACA,8BACA,yBACA,uBACA,uBACA,wBACA,0BACA,kBACA,sBACA,SAAA5T,EAAAkW,EAAAqO,EAAA+G,EAAA/T,EAAAie,EAAA5xB,EAAAxB,GAEA,QAAAT,KAGA,QAAA0nC,GAAAxvC,GACA,GAAAvT,GAAA2iD,EAAAK,EAAApiD,EAAAqE,EAAA1F,KAAA0jD,GAAA,CAEA,IAAAC,EAAA,CAOA,GAHAljD,EAAAkjD,EAAA9oC,GAAArJ,QAAA,eAEA4xC,EAAA1kB,EAAAluB,IAAA/P,EAAA,SACA,CAIA,IAHAgjD,EAAAL,EAAAQ,qBAAA,SACAviD,EAAAoiD,EAAAliD,OAEAF,KACA,OAAAoiD,EAAApiD,GAAAwiD,aAAA,SACA,aACAJ,EAAApiD,GAAA43B,WAAAuI,YAAAiiB,EAAApiD,GACA,MACA,YACAqiD,GAAA,EAIAD,KAEAC,GACAN,EAAAnqB,WAAAuI,YAAA4hB,GAEAA,EAAA,KAIAt0C,WAAA,WACA6gC,EAAAv9B,YAAAuxC,EAAA,OAAAj+C,EAAAjF,KACAkjD,EAAA1qB,YACA0qB,EAAA1qB,WAAAuI,YAAAmiB,EAIA,IAAA3iB,GAAAt7B,EAAAmQ,aAAAkrB,kBACAC,GAAA8iB,SAAAviD,QACAy/B,EAAA/H,WAAAuI,YAAAR,GAGAA,EAAA2iB,EAAA,KACA3vC,KACI,IAjDJ,GAAA+vC,GAAAC,EAAAL,CAoDAtzB,GAAA/f,OAAAtQ,MACA0L,KAAA,SAAAihC,EAAAztC,GACA,GAAAuB,GAAA2iD,EAAA39C,EAAAqT,EAAApT,EAAA1F,KAAAouC,EAAA1oC,EAAAmQ,YAmEA,IAjEAkuC,EAAAC,EAAA,KAiEA9kD,YAAAqd,IAAArd,EAAAmmC,WAKA,GAJAvsB,EAAA5Z,EAAAomC,UACA7kC,EAAAqY,EAAArY,IACAgF,EAAAi5B,EAAAluB,IAAA/P,KACA2iD,EAAA1kB,EAAAluB,IAAA/P,EAAA,UAEA,SAAAixB,GAAAmJ,aAAAnJ,EAAAmJ,aAAAR,mBAGA55B,GAAA4vB,EAAA9f,KAAA,QAEA6yC,EAAA9sB,SAAAC,cAAA,QACA6sB,EAAAnsB,aAAA,KAAAx2B,EAAA,SACA2iD,EAAAnsB,aAAA,SAAA0V,EAAAtkB,QACA+6B,EAAAnsB,aAAA,iCACAmsB,EAAAnsB,aAAA,kCACAmsB,EAAAnsB,aAAA,SAAAx2B,EAAA,WAEA2tC,EAAArN,mBAAAI,YAAAiiB,EAGAlkD,aAAAqd,IACArd,EAAAmP,KAAA,SAAA3P,EAAAO,GACA,GAAAP,YAAAqf,GACAtY,GACAA,EAAAwxB,aAAA,OAAAh4B,OAEO,CACP,GAAAglD,GAAA3tB,SAAAC,cAAA,QAEAlG,GAAA/f,OAAA2zC,GACAh/C,KAAA,SACAhG,OACAP,UAIA+G,EACA29C,EAAAc,aAAAD,EAAAx+C,GAEA29C,EAAAjiB,YAAA8iB,MAOAb,EAAAnsB,aAAA,SAAA0V,EAAA1sC,KA9GA,WACA,GAAA+X,GAAAo2B,EAAArN,oBAAAzK,SAAAtuB,KACAm8C,EAAA7tB,SAAAC,cAAA,MAIA4tB,GAAAnW,UAAA,eAAAvtC,EAAA,kBAAAA,EAAA,wEACAkjD,EAAAQ,EAAAC,WACApsC,EAAAmpB,YAAAwiB,GAMAhU,EAAAx9B,SAAAwxC,EAAA,kBACA,GAAAjzC,EAEA,KACAA,EAAAizC,EAAAU,cAAA/tB,UAAAqtB,EAAAW,iBAAAtjD,OAAAujD,OAAAZ,EAAA9oC,IAAAyb,SAGA,8BAAArjB,KAAAvC,EAAAnJ,OACAw8C,EAAArzC,EAAAnJ,MAAAiK,QAAA,mBAEAuyC,EAAA,IAEAC,EAAA3zB,EAAAjK,KAAA1V,EAAA1I,KAAAgmC,WAGAtoC,EAAA0O,SACAnP,KAAA,WACA6P,OAAAkvC,EAAAziD,OACAyT,MAAAgvC,EAAAziD,SAGAuX,GACApT,EAAA0O,SACAnP,KAAA,iBACA6P,OAAAgE,EAAAnG,MAAA,KACAqC,MAAA8D,EAAAnG,MAAA,QAIO,MAAAgH,GACP,IAAA8rB,EAAAV,cAAA4H,EAAA1sC,KAQA,WAHAujD,GAAAl5C,KAAA5E,EAAA,WACAA,EAAA0O,QAAA,UAHA2vC,GAAA,IASAP,EAAAl5C,KAAA5E,EAAA,WACAA,EAAA0O,QAAA,WAEM1O,EAAAjF,QAsDN2iD,EAAAoB,SACA9+C,EAAA0O,QAAA,cAGAg/B,UAAA,WACA,MAAA2Q,IAGA1Q,YAAA,SAAA3c,GACA,YAAAA,GAEA,WAAArG,EAAAhgB,OAAA2zC,IAAAhjD,OAAA4pB,KACA,IACA,MAAAA,MAAAK,MAAA+4B,EAAAxyC,QAAA,qBAAAA,QAAA,mBACO,MAAAmI,GACP,YAMA,MAAAqqC,IAGAnnC,MAAA,WACA,GAAAnX,GAAA1F,IAEA2jD,MAAAU,gBACAV,EAAAU,cAAAvnC,KACA6mC,EAAAU,cAAAvnC,OACM6mC,EAAAU,cAAA/tB,SAAAmuB,YACNd,EAAAU,cAAA/tB,SAAAmuB,YAAA,QAEAd,EAAA93C,IAAA,eAIA23C,EAAAl5C,KAAAtK,KAAA,WAEA0F,EAAA82B,cAAA,cAMA,MAAAriB,GAAA2B,mBAmBAiS,EAAA,mCACA,8BACA,mCACA,SAAA5T,EAAAnB,GACA,MAAAmB,GAAAnB,UAp2UA,SAAAvI,GACA,OAAApP,GAAA,EAAiBA,EAAAoP,EAAAlP,OAAgBF,IAAA,CAKjC,OAJAqE,GAAApH,EACAuc,EAAApK,EAAApP,GACA6sB,EAAArT,EAAAvM,MAAA,SAEA6f,EAAA,EAAmBA,EAAAD,EAAA3sB,OAAA,IAA2B4sB,EAC9CzoB,EAAAwoB,EAAAC,MAAAxF,IACAjjB,EAAAwoB,EAAAC,QAGAzoB,IAAAwoB,EAAAC,GAGAzoB,GAAAwoB,IAAA3sB,OAAA,IAAAusB,EAAAjT,MAy1UA,yiBACC7Z,QAmBD,SAAA1C,GAGA,GAAAyO,MAAW4E,EAAArT,EAAAomD,MAAAC,KAAAC,MAAAv0B,MAAA1e,SAIX,QAAAkzC,GAAAC,GACA,GAAA7lD,GAAA8lD,CACA,KAAA9lD,IAAA6lD,GACAC,QAAAD,GAAA7lD,GACA,WAAA8lD,IAAApzC,EAAA1S,GAAA,4BAEI,aAAA8lD,IACJh4C,EAAA9N,GAAA6lD,EAAA7lD,IAFA4lD,EAAAC,EAAA7lD,MAKEX,EAAAomD,OAGF33C,EAAAmP,IAAA5d,EAAAomD,MAAAC,KAAAC,MAAA1oC,IACAnP,EAAA4jB,KAAAryB,EAAAomD,MAAAC,KAAAC,MAAAj0B,KACA5jB,EAAAi4C,WAAA1mD,EAAAomD,MAAAC,KAAAK,WAGA1mD,EAAAygB,MAAAhS,EACAzO,EAAAyO,IACAzO,EAAAyO,MAGC/L,OAED,QjC22KMikD,KACA,SAAU5mD,EAAQC,KAMlB4mD,KACA,SAAU7mD,EAAQC,EAASC,GAEjC,YAGAC,QAAOC,eAAeH,EAAS,cAC3BI,OAAO,IAEXJ,EAAQU,SACJC,KkC/0fJ,YlCg1fIC,KAAM,WACF,OACIimD,SkC/0fZ,GlCg1fY1gB,KkC/0fZ,GlCg1fY2gB,akC/0fZ,GlCg1fYtI,UkC/0fZ,GlCg1fYp6C,IkC/0fZ,GlCg1fY2iD,OkC/0fZ,ElCg1fYC,oBAIRhmD,OAAQ,OAAQ,SkCh1fpB,alCi1fIuC,SACI0jD,SAAU,SAAkBvxC,GkCh1fpC,GAAA5R,GAAApC,IlCm1fYA,MAAKQ,OAAOoC,SAAS,6BACjBqC,KAAMjF,KAAKiF,MkCl1f3B,IADApC,KAAA,SAAAC,GlCq1fgBV,EAAMqiC,KAAO3hC,EkCj1f7B2hC,KlCk1fgBriC,EAAMgjD,aAAetiD,EkCj1frC0iD,OlCk1fgBpjD,EAAM+iD,SAAWriD,EkCj1fjCqiD,SlCk1fgB/iD,EAAM06C,UAAYh6C,EkCj1flCg6C,UlCk1fgB16C,EAAMijD,OAAS16B,SAAS7nB,EkCj1fxCuiD,QlCk1fgBjjD,EAAMM,IAAMI,EkCh1f5B2iD,IlCk1fgBzxC,GkCj1fhBA,IlCk1fgB5R,EAAM5B,OAAOoC,SAAS,iBkCj1ftCE,KlCk1feG,MAAM,SAAUC,GACfd,EAAM5B,OAAOoC,SAAS,ckCj1ftCM,MlCo1fQwiD,cAAe,SAAuBpkD,GAKlC,IAAK,GAJDA,GAAMA,GkCj1ftB,GlCk1fgBqkD,EkCj1fhB,mDlCk1fgBC,EAASD,EkCj1fzBpkD,OlCk1fgBskD,EkCj1fhB,GlCk1fqBxkD,EAAI,EAAGA,EAAIC,EAAKD,IACrBwkD,GAAOF,EAAMvnB,OAAOrrB,KAAK2J,MAAM3J,KAAK6c,SkCj1fpDg2B,GlCm1fY,OkCj1fZC,IlCm1fQ9pC,OAAQ,SAAgB7H,GACpB,GkCj1fZ4xC,ElCk1fY,KACI,IACIA,EAAS5xC,EkCh1f7Bu5B,elCi1fkB,MAAOvkC,GACL48C,EAAS9kD,OAAO+kD,IAAIC,gBkCh1fxC9xC,IlCk1fc,MAAOhL,GACL,GAAI+8C,GAAS,GkCh1f7B1iB,WlCi1fgB0iB,GAAOhtC,OAAS,SAAU/P,GACtB48C,EAAS58C,EAAExD,OkCh1f/B8pB,QlCk1fgBy2B,EAAOjiB,ckCh1fvB9vB,GlCk1fY,MkCh1fZ4xC,IlCk1fQI,aAAc,SAAsBz/B,GAChC,GAAI4c,GAAM5c,EAASwc,YkC/0f/B,KlCg1fgBkjB,EAAS1/B,EAASuc,UkC/0flCK,GlCg1fgBiiB,EAAiBtlD,KAAK0C,IAAM1C,KAAK0lD,cAAc,IkC/0f/DS,ClCg1fYnmD,MAAKslD,eAAe7+B,IAChB5a,IAAK7L,KAAKykC,KAAO,IkC/0fjC6gB,ElCg1fgB5rC,KkC70fhB,GlCg1fY1Z,KAAKomD,SAASxsC,WACV3Z,IAAOD,KkC/0fvBykC,KlCg1fgBjoB,kBACI9Z,IkC/0fpB4iD,ElCg1foBE,OAAUxlD,KkC/0f9BolD,alCg1foBiB,eAAkBrmD,KkC/0ftCmlD,SlCg1foBrI,UAAa98C,KkC/0fjC88C,UlCg1foBwJ,sBkC70fpB,SlC+0fYtmD,KAAKomD,SkC90fjBjpC,UlCi1fI1Z,QAAS,WkC90fb,GAAAD,GAAAxD,KlCi1fYoH,EkCh1fZpH,IlCi1fQA,MkCh1fRulD,WlCi1fQvlD,KAAKomD,SAAW,GAAIpmD,MAAK6M,UAAU6G,UAC/BH,SkCh1fZ,mClCi1fYkE,cAAezX,KkCh1f3BumD,OlCi1fYvuC,UAAWse,SAASiB,eAAev3B,KkCh1f/CgY,WlCi1fYV,ckCh1fZ,kClCi1fYE,oBkCh1fZ,kClCi1fYvX,IkCh1fZ,2BlCi1fYgU,SACI4D,aACItQ,MkC/0fpB,clCg1foB4S,WkC70fpB,oBlC+0fgBJ,ckC90fhB,OlC+0fgBQ,oBkC70fhB,GlC80fYhC,MACIiuC,SAAU,aAEVC,WAAY,SAAoBjzC,EAAIgB,GAChC,GAAIkyC,GAAMnxC,KAAK0V,MAAM,GAAI1V,OkC10f7C,GlC20fwB/R,GAAO6hD,OAASqB,EAAM,EACtBljD,EAAO+hD,SAAS,SAAUziD,GACtBU,EAAO4iD,SkC10fnCjpC,UlC60fwB3Z,EAAO4iD,SkC10f/BjpC,SlC80fgBwpC,aAAc,SAAsBnzC,EAAIU,GACpC9M,EAAK8+C,aAAahyC,EkC10ftCjV,OlC60fgB2nD,eAAgB,SAAwBpzC,EAAIU,KAE5C2yC,aAAc,SAAsBrzC,EAAIU,EAAMvU,GAC1C,GAAI4mB,GAAU/iB,EAAO8hD,eAAepxC,EAAKjV,MkCx0f7D4M,GlCy0foBrI,GAAO8hD,eAAepxC,EAAKjV,MAAMya,KkCx0frD,ElCy0foBlW,EAAOvB,MAAM,qBkCx0fjCskB,IlC20fgBuT,MAAO,SAAetmB,EAAItQ,GACtB,IAAiB,KAAbA,EAAImR,KkCx0f5B,ClCy0fwB,GAAIkS,GAAU/iB,EAAO8hD,eAAepiD,EAAIgR,KAAKjV,MkCx0frE4M,GlCy0fwBrI,GAAOvB,MAAM,qBkCx0frCskB,OlC00fwB/iB,GAAOvB,MAAM,kBkCx0frCiB,OlC60fQlD,KAAKomD,SkCx0fb7tC,UlC80fMuuC,OACA,SAAUzoD,EAAQC,EAASC,GAEjC,cAC4B,SAASgI,GAErC/H,OAAOC,eAAeH,EAAS,cAC3BI,OAAO,GmCx8eX,IAAAC,GAAAJ,EAAA,QAEAwoD,EAAAxoD,EAAA,QnC68eIyoD,EAEJ,SAAgCloD,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,IAFhDioD,EAIvCzoD,GAAQU,SACJE,KAAM,WACF,OACImI,MmCh9eZ,EnCi9eY4/C,UmCh9eZ,EnCi9eYC,QmC/8eZ,EACAC,MAAAH,EAAAhoD,QnCi9eYooD,YmCh9eZ,GnCi9eY/E,QmCh9eZ,OnCi9eYgF,YmCh9eZ,EnCi9eYC,QmCh9eZ,GnCi9eYC,OmCh9eZ,GnCi9eYC,OmCh9eZ,GnCi9eYC,UmCh9eZ,GnCi9eYC,MmCh9eZ,OnCi9eYC,UmCh9eZ,EnCi9eYC,YmCh9eZ,KnCi9eYx9C,OmCh9eZ,KnCi9eY8Y,MmCh9eZ,KnCi9eYzD,amCh9eZ,EnCi9eYM,cmCh9eZ,EnCi9eYG,UmCh9eZ,EnCi9eYN,QACAioC,QmCh9eZ,GnCi9eYC,MmCh9eZ,GnCi9eYC,OmC/8eZ,EnCi9eYC,SmCh9eZ,EnCi9eYC,UmCh9eZ,EnCi9eYC,UmCh9eZ,EnCi9eYC,amCh9eZ,EnCi9eYC,cmCh9eZ,EnCi9eYC,amCh9eZ,EnCi9eYC,gBmCh9eZ,EnCi9eYC,amCh9eZ,EnCi9eYC,WmCh9eZ,EnCi9eYC,YmCh9eZ,EnCi9eYC,WmCh9eZ,EnCi9eYC,SmCh9eZ,EnCi9eYC,WmCh9eZ,EnCi9eYC,YmCh9eZ,GnCi9eYC,amCh9eZ,GnCi9eYC,gBmCh9eZ,GnCi9eYC,iBmCh9eZ,GnCi9eYC,gBmCh9eZ,GnCi9eYC,gBmCh9eZ,GnCi9eYC,mBmCh9eZ,GnCi9eYC,cmCh9eZ,GnCi9eYC,amCh9eZ,GnCi9eYC,emCh9eZ,GnCi9eYC,cmCh9eZ,GnCi9eYC,YmCh9eZ,GnCi9eYC,cmC98eZ,GnCg9eYnhD,MmC98eZ,InCk9eIhJ,OmCh9eJ,WnCi9eIC,UAAU,EAAIZ,EAAMa,WAChBqgB,QAAS,SAAiBngB,GACtB,MAAOA,GAAMkH,KmCj9ezBiZ,SnCm9eQ/Y,SAAU,SAAkBpH,GACxB,MAAOA,GAAMkH,KmCl9ezBE,YnCq9eIjF,SACI6nD,MAAO,SAAexgD,GAClB3C,EAAE2C,EAAEE,eAAeC,QAAQ,oBAAoB2I,SmCp9e3D,anCs9eQ23C,KAAM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iBmC98erB,GnCi9e0C,IAA1BziD,EAAE6f,KAAKpmB,KAAKynD,YAAuC,GAAnBznD,KAAKqnD,WAGrC,MAFArnD,MAAKsoD,gBmC78erB,EnC88egBtoD,KAAKmpD,mBmC78erB,SACA,CnCm9eY,IAJInpD,KAAKsoD,gBmC78erB,EnC88egBtoD,KAAKmpD,mBmC78erB,GnCg9euC,IAAvB5iD,EAAE6f,KAAKpmB,KAAKwnD,SAAoC,GAAnBxnD,KAAKqnD,WAGlC,MAFArnD,MAAKqoD,amC58erB,EnC68egBroD,KAAKipD,gBmC58erB,WACA,CnCk9eY,IAJIjpD,KAAKqoD,amC58erB,EnC68egBroD,KAAKipD,gBmC58erB,GnC+8euC,IAAvB1iD,EAAE6f,KAAKpmB,KAAKunD,SAAoC,GAAnBvnD,KAAKqnD,WAGlC,MAFArnD,MAAKuoD,amC38erB,EnC48egBvoD,KAAKkpD,gBmC38erB,cACA,CnCi9eY,IAJIlpD,KAAKuoD,amC38erB,EnC48egBvoD,KAAKkpD,gBmC38erB,InC88e0C,GAA1B3iD,EAAE6f,KAAKpmB,KAAK2nD,UAGZ,MAFA3nD,MAAKwoD,WmC18erB,EnC28egBxoD,KAAKopD,cmC18erB,eACA,CnCg9eY,IAJIppD,KAAKwoD,WmC18erB,EnC28egBxoD,KAAKopD,cmC18erB,InC68e6C,GAA7B7iD,EAAE6f,KAAKpmB,KAAKyf,aAGZ,MAFAzf,MAAKkoD,UmCz8erB,EnC08egBloD,KAAKqpD,amCz8erB,YACA,CnC+8eY,IAJIrpD,KAAKkoD,UmCz8erB,EnC08egBloD,KAAKqpD,amCz8erB,InC48e8C,GAA9B9iD,EAAE6f,KAAKpmB,KAAK+f,cAGZ,MAFA/f,MAAKyoD,YmCx8erB,EnCy8egBzoD,KAAKspD,emCx8erB,gBACA,CnC88eY,IAJItpD,KAAKyoD,YmCx8erB,EnCy8egBzoD,KAAKspD,emCx8erB,InC28e0C,GAA1B/iD,EAAE6f,KAAKpmB,KAAKkgB,UAGZ,MAFAlgB,MAAK0oD,WmCv8erB,EnCw8egB1oD,KAAKupD,cmCv8erB,iBACA,CnC68eY,IAJIvpD,KAAK0oD,WmCv8erB,EnCw8egB1oD,KAAKupD,cmCv8erB,InC08eiBvpD,KAAK4f,KAAKre,OAGX,MAFAvB,MAAK2oD,SmCt8erB,EnCu8egB3oD,KAAKwpD,YmCt8erB,eACA,CnCu8emB,IAAIxpD,KAAK4f,KAAKre,OAAS,EAG1B,MAFAvB,MAAK2oD,SmCt8erB,EnCu8egB3oD,KAAKwpD,YmCt8erB,YACA,CnC48eY,IAJIxpD,KAAK2oD,SmCt8erB,EnCu8egB3oD,KAAKwpD,YmCt8erB,InCy8eiBjjD,EAAE6f,KAAKpmB,KAAK8nD,OAGb,MAFA9nD,MAAK4oD,WmCr8erB,EnCs8egB5oD,KAAKypD,cmCr8erB,iBACA,CnCs8emB,IAAIljD,EAAE6f,KAAKpmB,KAAK8nD,OAAOvmD,OAAS,IAGnC,MAFAvB,MAAK4oD,WmCr8erB,EnCs8egB5oD,KAAKypD,cmCr8erB,eACA,CnC28eY,IAJIzpD,KAAK4oD,WmCr8erB,EnCs8egB5oD,KAAKypD,cmCr8erB,InCw8eiBzpD,KAAK+nD,MASN,MARA/nD,MAAKQ,OAAOoC,SAAS,qBACjByE,MmCp8epB,EnCq8eoBpC,KmCp8epB,MnCq8eoB4E,KACIO,OmCp8exB,SnCq8ewBC,ImCl8exB,YACA,CnCu8eY,IAAIjD,GmCp8ehBpH,InCq8eYA,MAAKQ,OAAOoC,SAAS,qBACjByE,MmCp8ehB,EnCq8egBpC,KmCp8ehB,OnCq8egBqC,MACIC,MmCp8epB,YnCq8eoB05C,KmCp8epB,8KnCq8eoBx5C,UAAW,WACPL,EmCn8exB6b,kBnCw8eQA,WAAY,WmCl8epB,GAAA7gB,GAAApC,KnCq8egB4D,GACAsf,MAASljB,KmCp8ezBkgB,SnCq8egBrO,UAAa7R,KmCp8e7BqnD,WnCq8egB5jC,QAAWzjB,KmCp8e3B2nD,SnCq8egBloC,YAAezf,KmCp8e/Byf,YnCq8egBjW,WAAcxJ,KmCp8e9BwJ,WnCq8egB2Z,cAAiBnjB,KmCp8ejConD,YnCq8egBhkC,aAAgBpjB,KmCp8ehC8nD,MnCq8egBzkC,kBAAqBrjB,KmCp8erCmnD,MnCq8egB7jC,eAAkBtjB,KmCp8elC+f,anCq8egBwD,cAAiBvjB,KAAK4f,KAAKtF,KmCl8e3C,KnCo8emC,IAAnBta,KAAKqnD,aACLzjD,EAAO4f,WACHsnC,eAAkB9qD,KmCn8etCsnD,QnCo8eoByD,aAAgB/qD,KmCn8epCwnD,OnCo8eoBwD,iBAAoBhrD,KmCn8exCunD,OnCo8eoB0D,gBAAmBjrD,KmCl8evCynD,YnCo8eYznD,KAAKQ,OAAOoC,SAAS5C,KAAKknD,OAAS,qBAAuB,kBAAmBtjD,GAAQf,KAAK,SAAUC,GAChG,GmCl8ehBuH,EnCo8eoBA,GADAjI,EAAM8kD,OmCh8e1B,QAEA,iBnCm8egB9kD,EAAMJ,UAAUC,MmCj8ehC,yBnCk8egBG,EAAMiF,MmC/7etB,EnCi8egBjF,EAAM5B,OAAOoC,SAAS,uBmC/7etCgB,GnCi8egBxB,EAAM5B,OAAOoC,SAAS,kBAClB0e,ImCh8epB,EnCi8eoBrc,KmCh8epB,MnCi8eoBoF,ImC97epBA,InCi8eqC,UAAjBjI,EAAML,SACNK,EmCh8epB8oD,mBnCk8eejoD,MAAM,SAAUC,GACfd,EAAM5B,OAAOoC,SAAS,cmCh8etCM,MnCm8eQ6e,gBAAiB,WmC97ezB,GAAAve,GAAAxD,InCi8eYA,MAAKQ,OAAOoC,SAAS,2BAA4BC,KAAK,SAAUC,GAE5DU,EAAOhD,OAAOoC,SAAS,iBmC/7evCE,KnCg8eeG,MAAM,SAAUC,GACfM,EAAOhD,OAAOoC,SAAS,cmC/7evCM,MnCk8eQshB,aAAc,SAAsBvY,GmC97e5C,GAAAvI,GAAA1D,InCi8eYA,MAAKQ,OAAOoC,SAAS,qBACjB0F,MAAO2D,GAAUjM,KmC/7ejCsI,QADAzF,KAAA,SAAAC,GnCm8egBY,EAAOlD,OAAOoC,SAAS,iBmC97evCE,KnC+7eeG,MAAM,SAAUC,GACfQ,EAAOlD,OAAOoC,SAAS,cmC97evCM,MnCi8eQmT,QAAS,WACLrW,KmC97eZwkB,gBnCg8eQ0mC,eAAgB,WACZlrD,KAAKgC,UAAUC,MmC97e3B,iCnCi8eIkpD,OACI9jD,KAAM,SAAc6C,GACZA,IACAlK,KmC37ehB+hB,kBnC67egB/hB,KmC57ehBwkB,kBnCg8eI4mC,QAAS,WACL,GAAIlyB,GmC57eZ,CnC67eQ3yB,GAAE,aAAa8H,KAAK,WAChB6qB,GAAK3yB,EAAEvG,MAAMkZ,QmC57ezB,KnC87eQ3S,EAAE,aAAa8kD,IAAI,eAAgBnyB,EmC57e3C,KnC87eIz1B,QAAS,WmC57eb,GAAAmF,GAAA5I,InC+7eQA,MAAKgC,UAAU2B,IAAI,eAAgB,SAAUC,GACzCgF,EAAO4b,aAAa5gB,EmC97ehCqI,UnCi8eQjM,KAAKgC,UAAU2B,IAAI,yBAA0B,SAAUC,GAGnD,GAFAgF,EAAOvB,KAAOzD,EmC77e1ByD,KnC+7egBzD,EAAOic,QmC97evB,CnC+7egBjX,EAAOs+C,QmC97evB,EnC+7egBt+C,EAAOu+C,MAAQvjD,EAAOic,QmC97etCwD,kBnC+7egBza,EAAOw+C,YAAcxjD,EAAOic,QmC97e5CsD,cnC+7egBva,EAAO6W,YAAc7b,EAAOic,QmC97e5CJ,YnC+7egB7W,EAAOY,WAAa5F,EAAOic,QmC97e3CrW,WnC+7egBZ,EAAOg/C,YAAchkD,EAAOic,QmC97e5CH,enC+7egB9W,EAAOmX,aAAenc,EAAOic,QmC97e7CE,anC+7egBnX,EAAOsX,SAAWtc,EAAOic,QmC97ezCqD,MnC+7egBta,EAAOk/C,MAAQlkD,EAAOic,QmC97etCuD,anC+7egBxa,EAAO++C,SAAW/jD,EAAOic,QmC97ezC4D,QnC+7egB7a,EAAO8+C,MAAkC,GAA1B9jD,EAAOic,QAAQ4D,QAAe,ImC97e7D,InC+7egB7a,EAAOy+C,WAAazjD,EAAOic,QmC97e3ChO,UnC+7egBjJ,EAAOy5C,QAAsC,GAA5Bz+C,EAAOic,QAAQhO,UAAiB,ImC97ejE,InC+7eoBjO,EAAOic,QAAQ2D,YACf5a,EAAO0+C,QAAU1jD,EAAOic,QAAQ2D,UmC97epDsnC,enC+7eoBliD,EAAO6+C,UAAY7jD,EAAOic,QAAQ2D,UmC97etDynC,gBnC+7eoBriD,EAAO2+C,OAAS3jD,EAAOic,QAAQ2D,UmC97enDwnC,iBnC+7eoBpiD,EAAO4+C,OAAS5jD,EAAOic,QAAQ2D,UmC97enDunC,cnCi8egBniD,EAAOgX,QACPhc,EAAOic,QAAQyrC,OAAOh+C,IAAI,SAAUvB,EAAM7L,GACtC0I,EAAOgX,KAAKhP,KmC77ehC7E,InCg8egB,KAAK,GAAI1K,GAAI,EAAGC,EAAMsH,EAAOiX,QAAQC,UAAUve,OAAQF,EAAIC,EAAKD,ImC57ehF,CnC67eoB,GAAI0K,GAAOnD,EAAOiX,QAAQC,UmC57e9Cze,EnC67ewBuH,GAAOmX,cAAgBhU,EAAKgU,eAC5BnX,EAAOwB,OAAS2B,EmC57exCiU,MnCg8egB,IAAK,GAAI3e,GAAI,EAAGC,EAAMsH,EAAOiX,QAAQI,SAAS1e,OAAQF,EAAIC,EAAKD,ImC37e/E,CnC47eoB,GAAI0K,GAAOnD,EAAOiX,QAAQI,SmC37e9C5e,EnC47ewBuH,GAAOsX,UAAYnU,EAAKmU,WACxBtX,EAAOsa,MAAQnX,EmC37evCiU,WnC+7egBpX,GAAOs+C,QmC37evB,EnC47egBt+C,EmC37ehBu+C,MAAAH,EAAAhoD,QnC47egB4J,EAAOw+C,YmC37evB,GnC47egBx+C,EAAO6W,amC37evB,EnC47egB7W,EAAOmX,cmC37evB,EnC47egBnX,EAAOsX,UmC37evB,EnC47egBtX,EAAOk/C,MmC37evB,GnC47egBl/C,EAAOg/C,YmC37evB,KnC47egBh/C,EAAOwB,OmC37evB,KnC47egBxB,EAAOsa,MmC37evB,KnC47egBta,EAAOgX,QAEPhX,EAAOy5C,QmC37evB,OnC47egBz5C,EAAOy+C,YmC37evB,EnC47egBz+C,EAAO0+C,QmC37evB,GnC47egB1+C,EAAO2+C,OmC37evB,GnC47egB3+C,EAAO4+C,OmC37evB,GnC47egB5+C,EAAO6+C,UmC37evB,GnC47egB7+C,EAAO8+C,MmC37evB,OnC47egB9+C,EAAO++C,UmC37evB,InC+7eQphD,EAAE,QAAQnB,GAAG,QAAS,SAAU8D,GAC5B,GAAIme,GAAO9gB,EAAE2C,EmC37ezBxD,OnC47eiB2hB,GAAKtV,SAAS,cAAqD,GAArCsV,EAAKhe,QAAQ,cAAc9H,SAC1DqH,EAAO2iD,UmC37evB,EnC47egB3iD,EAAO4iD,YmC37evB,GnC67eiBnkC,EAAKtV,SAAS,cAAqD,GAArCsV,EAAKhe,QAAQ,cAAc9H,SAC1DqH,EAAOq+C,UmC37evB,EnC47e0C,GAAtBr+C,EAAOgX,KAAKre,OACZgF,EAAE,cAAcgkD,KAAK,aAAavqC,KmC37etD,sBnC67eoBzZ,EAAE,cAAcgkD,KAAK,aAAavqC,KmC37etD,WnCi8e6B1V,KAAKhM,EAASC,EAAoB,UAIzDktD,OACA,SAAUptD,EAAQC,GoCxhhBxBD,EAAAC,SAAgB4F,OAAA,WAAmB,GAAAC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAD,GAAA,KAAAG,EAAA,OACAE,YAAA,kBACGF,EAAA,OACHE,YAAA,uBACGF,EAAA,OACHE,YAAA,uBACGF,EAAA,OACHE,YAAA,0BACGF,EAAA,OACHE,YAAA,eACGF,EAAA,OACHE,YAAA,oBACGF,EAAA,OACHE,YAAA,wBACGL,EAAA6jD,QAMA7jD,EAAA0B,KANAvB,EAAA,OACHE,YAAA,kBACGF,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,aACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAA0kD,kBAAA1kD,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,QACGF,EAAA,OACHE,YAAA,OACAC,OACAoW,GAAA,iCAEG1W,EAAAO,GAAA,UAAAP,EAAAO,GAAA,KAAAP,EAAA,MAAAG,EAAA,OACHG,OACAoH,IAAA1H,EAAAgjD,SAEGhjD,EAAA0B,OAAA1B,EAAAO,GAAA,KAAAJ,EAAA,aACHG,OACAQ,KAAA,IACAshD,OAAA,8BACAvuC,UAAA,qBAEA5S,IACAsmD,mBAAAvnD,EAAAgR,aAEG,GAAAhR,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,yBACGL,EAAAO,GAAA,wBAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,qBACGF,EAAA,OACHE,YAAA,kEACAG,OACAgnD,UAAAxnD,EAAAijD,YAAA7lD,OAAA,MAEG4C,EAAA8jD,SAMA9jD,EAAA0B,KANAvB,EAAA,OACHE,YAAA,0BACGF,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,aACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAA2kD,mBAAA3kD,EAAAO,GAAA,KAAAJ,EAAA,SACHQ,aACA7F,KAAA,QACA8F,QAAA,UACArG,MAAAyF,EAAA,YACAa,WAAA,gBAEAP,OACAQ,KAAA,OACAC,YAAA,QAEAC,UACAzG,MAAAyF,EAAA,aAEAiB,IACAskD,MAAAvlD,EAAAulD,MACAC,KAAAxlD,EAAAwlD,KACAlkD,MAAA,SAAAH,GACAA,EAAAI,OAAAC,YACAxB,EAAAijD,YAAA9hD,EAAAI,OAAAhH,aAGGyF,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,2BACGF,EAAA,OACHE,YAAA,yDACAY,IACAwmD,UAAAznD,EAAA2lD,WACA+B,SAAA1nD,EAAA4lD,YAEG5lD,EAAAgkD,YAMAhkD,EAAA0B,KANAvB,EAAA,OACHE,YAAA,kBACGF,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,aACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAA4kD,sBAAA5kD,EAAAO,GAAA,KAAAJ,EAAA,QAAAH,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAAk+C,YAAAl+C,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,4BACGF,EAAA,OACHE,YAAA,OACAC,OACAqnD,kBAAA,KAEA1mD,IACAQ,MAAAzB,EAAAimD,oBAEGjmD,EAAAO,GAAA,OAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,OACAC,OACAqnD,kBAAA,KAEA1mD,IACAQ,MAAAzB,EAAAimD,oBAEGjmD,EAAAO,GAAA,WAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,uDACAY,IACAwmD,UAAAznD,EAAA2lD,WACA+B,SAAA1nD,EAAA4lD,YAEG5lD,EAAAqkD,UAMArkD,EAAA0B,KANAvB,EAAA,OACHE,YAAA,0BACGF,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,aACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAAilD,oBAAAjlD,EAAAO,GAAA,KAAAJ,EAAA,QAAAH,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAAujD,UAAAvjD,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,4BACGF,EAAA,OACHE,YAAA,OACAC,OACAsnD,gBAAA,KAEA3mD,IACAQ,MAAAzB,EAAAkmD,kBAEGlmD,EAAAO,GAAA,OAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,OACAC,OACAsnD,gBAAA,KAEA3mD,IACAQ,MAAAzB,EAAAkmD,kBAEGlmD,EAAAO,GAAA,aAAAP,EAAAO,GAAA,QAAAP,EAAAkjD,WAAA/iD,EAAA,OACHE,YAAA,sFACGL,EAAAikD,aAMAjkD,EAAA0B,KANAvB,EAAA,OACHE,YAAA,0BACGF,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,aACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAA6kD,uBAAA7kD,EAAAO,GAAA,KAAAJ,EAAA,SACHQ,aACA7F,KAAA,QACA8F,QAAA,UACArG,MAAAyF,EAAA,QACAa,WAAA,YAEAP,OACAQ,KAAA,OACAC,YAAA,WAEAC,UACAzG,MAAAyF,EAAA,SAEAiB,IACAskD,MAAAvlD,EAAAulD,MACAC,KAAAxlD,EAAAwlD,KACAlkD,MAAA,SAAAH,GACAA,EAAAI,OAAAC,YACAxB,EAAAmjD,QAAAhiD,EAAAI,OAAAhH,aAGGyF,EAAA0B,KAAA1B,EAAAO,GAAA,QAAAP,EAAAkjD,WAAA/iD,EAAA,OACHE,YAAA,wFACGL,EAAAmkD,eAMAnkD,EAAA0B,KANAvB,EAAA,OACHE,YAAA,0BACGF,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,aACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAAglD,yBAAAhlD,EAAAO,GAAA,KAAAJ,EAAA,SACHQ,aACA7F,KAAA,QACA8F,QAAA,UACArG,MAAAyF,EAAA,UACAa,WAAA,cAEAP,OACAQ,KAAA,OACAC,YAAA,OAEAC,UACAzG,MAAAyF,EAAA,WAEAiB,IACAskD,MAAAvlD,EAAAulD,MACAC,KAAAxlD,EAAAwlD,KACAlkD,MAAA,SAAAH,GACAA,EAAAI,OAAAC,YACAxB,EAAAsjD,UAAAniD,EAAAI,OAAAhH,aAGGyF,EAAA0B,KAAA1B,EAAAO,GAAA,QAAAP,EAAAkjD,WAAA/iD,EAAA,OACHE,YAAA,qFACGL,EAAAkkD,YAMAlkD,EAAA0B,KANAvB,EAAA,OACHE,YAAA,0BACGF,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,aACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAA8kD,sBAAA9kD,EAAAO,GAAA,KAAAJ,EAAA,SACHQ,aACA7F,KAAA,QACA8F,QAAA,UACArG,MAAAyF,EAAA,OACAa,WAAA,WAEAP,OACAQ,KAAA,OACAC,YAAA,SAEAC,UACAzG,MAAAyF,EAAA,QAEAiB,IACAskD,MAAAvlD,EAAAulD,MACAC,KAAAxlD,EAAAwlD,KACAlkD,MAAA,SAAAH,GACAA,EAAAI,OAAAC,YACAxB,EAAAqjD,OAAAliD,EAAAI,OAAAhH,aAGGyF,EAAA0B,KAAA1B,EAAAO,GAAA,QAAAP,EAAAkjD,WAAA/iD,EAAA,OACHE,YAAA,sEACGL,EAAAokD,YAMApkD,EAAA0B,KANAvB,EAAA,OACHE,YAAA,0BACGF,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,aACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAA+kD,sBAAA/kD,EAAAO,GAAA,KAAAJ,EAAA,QACHG,OACAoW,GAAA,6BAEG1W,EAAAO,GAAA,KAAAJ,EAAA,SACHQ,aACA7F,KAAA,QACA8F,QAAA,UACArG,MAAAyF,EAAA,OACAa,WAAA,WAEAP,OACAQ,KAAA,OACAmT,SAAA,GACAlT,YAAA,cAEAC,UACAzG,MAAAyF,EAAA,QAEAiB,IACAK,MAAA,SAAAH,GACAA,EAAAI,OAAAC,YACAxB,EAAAojD,OAAAjiD,EAAAI,OAAAhH,WAGGyF,EAAAO,GAAA,KAAAJ,EAAA,aACHG,OACAQ,KAAA,IACAshD,OAAA,0BACAvuC,UAAA,iBAEA5S,IACAsmD,mBAAAvnD,EAAAymD,iBAEG,GAAAzmD,EAAA0B,KAAA1B,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,2BACGF,EAAA,OACHE,YAAA,8CACAY,IACAwmD,UAAAznD,EAAA2lD,WACA+B,SAAA1nD,EAAA4lD,YAEG5lD,EAAA+jD,SAMA/jD,EAAA0B,KANAvB,EAAA,OACHE,YAAA,kBACGF,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,aACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAAklD,mBAAAllD,EAAAO,GAAA,KAAAJ,EAAA,QAAAH,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAAyjD,gBAAAzjD,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,2BACGL,EAAAqG,GAAArG,EAAA2C,SAAA,sBAAAiF,GACH,MAAAzH,GAAA,OACAE,YAAA,OACAC,OACAunD,UAAAjgD,EAAA0T,aAEAra,IACAQ,MAAAzB,EAAA6lD,iBAEK7lD,EAAAO,GAAAP,EAAA4B,GAAAgG,EAAA2T,wBACFvb,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,gDACAY,IACAwmD,UAAAznD,EAAA2lD,WACA+B,SAAA1nD,EAAA4lD,YAEG5lD,EAAAskD,WAMAtkD,EAAA0B,KANAvB,EAAA,OACHE,YAAA,wBACGF,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,aACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAAmlD,qBAAAnlD,EAAAO,GAAA,KAAAJ,EAAA,QAAAH,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAAiG,WAAAjG,EAAAO,GAAA,KAAAP,EAAA0b,QAAAC,UAAA,OAAAxb,EAAA,OACHE,YAAA,2BACGL,EAAAqG,GAAArG,EAAA0b,QAAA,mBAAA9T,GACH,MAAAzH,GAAA,OACAE,YAAA,OACAC,OACAwnD,oBAAAlgD,EAAAgU,cAEA3a,IACAQ,MAAAzB,EAAA+lD,mBAEK/lD,EAAAO,GAAAP,EAAA4B,GAAAgG,EAAAiU,YACF7b,EAAA0B,OAAA1B,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,+CACAY,IACAwmD,UAAAznD,EAAA2lD,WACA+B,SAAA1nD,EAAA4lD,YAEG5lD,EAAAukD,UAMAvkD,EAAA0B,KANAvB,EAAA,OACHE,YAAA,0BACGF,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,aACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAAolD,oBAAAplD,EAAAO,GAAA,KAAAJ,EAAA,QAAAH,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAA+e,UAAA/e,EAAAO,GAAA,KAAAP,EAAA0b,QAAAI,SAAA,OAAA3b,EAAA,OACHE,YAAA,2BACGL,EAAAqG,GAAArG,EAAA0b,QAAA,kBAAA9T,GACH,MAAAzH,GAAA,OACAE,YAAA,OACAC,OACAynD,gBAAAngD,EAAAmU,UAEA9a,IACAQ,MAAAzB,EAAAgmD,kBAEKhmD,EAAAO,GAAAP,EAAA4B,GAAAgG,EAAAiU,YACF7b,EAAA0B,SAAA1B,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,iDACAY,IACAQ,MAAAzB,EAAAmmD,gBAEGnmD,EAAAwkD,QAMAxkD,EAAA0B,KANAvB,EAAA,OACHE,YAAA,0BACGF,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,aACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAAqlD,kBAAArlD,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,0BACAG,OACAgnD,UAAAxnD,EAAAyb,KAAAre,OAAA,EAAA4J,UAAAhH,EAAA8iD,YAEG3iD,EAAA,OACHE,YAAA,YACGL,EAAAqG,GAAArG,EAAA,cAAA4H,EAAA7L,GACH,MAAAoE,GAAA,OACAE,YAAA,aACKF,EAAA,OACLE,YAAA,kBACKL,EAAAO,GAAAP,EAAA4B,GAAAgG,MAAAzH,EAAA,MACLG,OACA2oB,aAAAltB,GAEAkF,IACAQ,MAAA,SAAAN,GACAA,EAAA4pC,kBACA/qC,EAAAqmD,UAAAllD,YAIGnB,EAAAO,GAAA,KAAAJ,EAAA,SACHQ,aACA7F,KAAA,QACA8F,QAAA,UACArG,MAAAyF,EAAA,QACAa,WAAA,YAEAR,YAAA,WACAC,OACAQ,KAAA,OACAC,YAAAf,EAAAyb,KAAAre,OAAA,gBAEA4D,UACAzG,MAAAyF,EAAA,SAEAiB,IACAC,OAAA,SAAAC,GACA,eAAAA,KAAAnB,EAAAoB,GAAAD,EAAAE,QAAA,YAA2E,WAC3EF,GAAA4pC,kBACA5pC,EAAA0pC,iBACA7qC,EAAAumD,MAAAplD,IACO,SAAAA,GACP,eAAAA,KAAAnB,EAAAoB,GAAAD,EAAAE,QAAA,YAA2E,WAC3EF,GAAA4pC,kBACA5pC,EAAA0pC,iBACA7qC,EAAAumD,MAAAplD,KAEAG,MAAA,SAAAH,GACAA,EAAAI,OAAAC,YACAxB,EAAA0jD,QAAAviD,EAAAI,OAAAhH,aAGGyF,EAAAO,GAAA,KAAAP,EAAA,SAAAG,EAAA,OACHE,YAAA,uBACGF,EAAA,OACHE,YAAA,6BACGF,EAAA,QAAAH,EAAAO,GAAA,UAAAP,EAAAO,GAAA,KAAAJ,EAAA,MACHc,IACAQ,MAAAzB,EAAAkS,aAEGlS,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,2BACGL,EAAAqG,GAAArG,EAAA2C,SAAA,cAAAiF,GACH,MAAAzH,GAAA,OACAE,YAAA,YACAG,OACAwnD,WAAAhoD,EAAAyb,KAAA7f,QAAAgM,IAAA,GAEA3G,IACAQ,MAAAzB,EAAAwmD,cAEKxmD,EAAAO,GAAAP,EAAA4B,GAAAgG,WACF5H,EAAA0B,OAAA1B,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,oDACAG,OACAgnD,UAAAxnD,EAAA2jD,MAAAvmD,OAAA,OAEG4C,EAAAykD,UAMAzkD,EAAA0B,KANAvB,EAAA,OACHE,YAAA,0BACGF,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,aACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAAslD,oBAAAtlD,EAAAO,GAAA,KAAAJ,EAAA,YACHQ,aACA7F,KAAA,QACA8F,QAAA,UACArG,MAAAyF,EAAA,MACAa,WAAA,UAEAP,OACAS,YAAA,aAEAC,UACAzG,MAAAyF,EAAA,OAEAiB,IACAskD,MAAAvlD,EAAAulD,MACAC,KAAAxlD,EAAAwlD,KACAlkD,MAAA,SAAAH,GACAA,EAAAI,OAAAC,YACAxB,EAAA2jD,MAAAxiD,EAAAI,OAAAhH,eAGGyF,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,mBACAG,OACAC,OAAAT,EAAA4jD,OAEA3iD,IACAQ,MAAAzB,EAAA0lD,eAEGvlD,EAAA,MAAAH,EAAAO,GAAA,KAAAP,EAAAyH,GAAA,OAAAzH,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,kBACGF,EAAA,OACHE,YAAA,2BACGF,EAAA,OACHE,YAAA,0CACAY,IACAQ,MAAAzB,EAAAylD,UAEGzlD,EAAAO,GAAA,QAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,0CACAY,IACAQ,MAAAzB,EAAA0mD,QAEGvmD,EAAA,QAAAH,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAA+iD,OAAA,iCAAA/iD,EAAA0B,MACFM,iBAAA,WAA+B,GAAAhC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CACvE,OAAAE,GAAA,KAAAH,EAAAO,GAAA,cAAAJ,EAAA,KACAG,OACAxD,KAAA,kBAEGkD,EAAAO,GAAA,gCpC+hhBG0nD,KACA,SAAU/tD,EAAQC,EAASC,GqC5giBjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,SrCqhiBM+tD,KACA,SAAUhuD,EAAQC,EAASC,GsCniiBjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,StC4iiBMguD,KACA,SAAUjuD,EAAQC,KAMlBiuD,KACA,SAAUluD,EAAQC,EAASC,GAEjC,YAGAC,QAAOC,eAAeH,EAAS,cAC3BI,OAAO,GuCr6hBX,IAAAC,GAAAJ,EAAA,OvC06hBAD,GAAQU,SACJE,KAAM,WACF,OACIuH,auCz6hBZ,EvC06hBYvH,QACAgB,MuCx6hBZ,EvC06hBYwG,SuCz6hBZ,EvC06hBY7B,UuCx6hBZ,IvC46hBItF,UAAU,EAAIZ,EAAMa,WAChBiL,QAAS,SAAiB/K,GACtB,MAAOA,GAAMkH,KuC16hBzB6D,WvC66hBI5I,SACIoF,cAAe,WACXjH,KAAKyG,aAAezG,KuC56hBhCyG,avC86hBQM,WAAY,SAAoBlC,GAC5B,GAAIA,GAAa7E,KAAK6E,UAClB,OuC56hBhB,CvC86hBY7E,MAAK6E,UuC56hBjBA,EvC66hBY7E,KuC56hBZ2hB,kBvC86hBQA,eAAgB,WuC56hBxB,GAAAvf,GAAApC,IvC+6hBYA,MAAKQ,OAAOoC,SAAS,uBACjBuE,UAAanH,KuC96hB7BwJ,WvC+6hBgB1B,WuC96hBhB,IvC+6hBgBC,KAAQ/H,KuC96hBxB6E,UvC+6hBgB6B,SAAY1G,KuC96hB5B0G,WAAA7D,KAAA,SAAAC,GvC+6hBgBV,EAAM5B,OAAOoC,SAAS,iBuC76hBtCE,KvC86hBeG,MAAM,SAAUC,GACfd,EAAM5B,OAAOoC,SAAS,cuC76hBtCM,MvCg7hBQgE,OAAQ,SAAgBmd,GACpB,GAAIjd,GuC76hBhBpH,IvC86hBYA,MAAKQ,OAAOoC,SAAS,qBACjByE,MuC76hBhB,EvC86hBgBpC,KuC76hBhB,OvC86hBgBqC,MACIC,MuC76hBpB,QvC86hBoBC,QuC76hBpB,iBvC86hBoBC,UAAW,WACPL,EAAKolD,cuC76hB7BnoC,QvCk7hBQmoC,cAAe,SAAuBnoC,GuC76hB9C,GAAA7gB,GAAAxD,IvCg7hBYA,MAAKQ,OAAOoC,SAAS,sBACjByhB,UuC/6hBhBA,IADAxhB,KAAA,SAAAC,GvCk7hBgBU,EuC96hBhBme,iBvCg7hBgBne,EAAOhD,OAAOoC,SAAS,iBuC/6hBvCE,KvCg7hBeG,MAAM,SAAUC,GACfM,EAAOhD,OAAOoC,SAAS,cuC/6hBvCM,OvCm7hBIO,QAAS,WACLzD,KAAKwJ,WAAaxJ,KAAK8D,KAAKC,YuC56hBpC,cvC86hBQ/D,KuC76hBR2hB,oBvCm7hBM8qC,KACA,SAAUpuD,EAAQC,EAASC,GAEjC,cAC4B,SAASgI,GAErC/H,OAAOC,eAAeH,EAAS,cAC3BI,OAAO,GwC14hBX,IAAAC,GAAAJ,EAAA,QAEAK,EAAAL,EAAA,QxC+4hBIM,EAEJ,SAAgCC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,IAFjDF,EAItCN,GAAQU,SACJE,KAAM,WACF,OwCh5hBRC,OAAAN,EAAAG,QxCm5hBY6F,UwCl5hBZ,ExCm5hBY6B,SwCj5hBZ,ExCm5hBYgmD,awCl5hBZ,ExCm5hBYC,YwCj5hBZ,ExCm5hBY1/B,YwCj5hBZ,KxCq5hBI1tB,UAAU,EAAIZ,EAAMa,WAChB+C,SAAU,SAAkB7C,GACxB,MAAOA,GAAMD,KwCp5hBzBE,MxCs5hBQiB,QAAS,SAAiBlB,GACtB,MAAOA,GAAMkH,KwCt5hBzBhG,SxCw5hBQif,QAAS,SAAiBngB,GACtB,MAAOA,GAAMkH,KAAKiZ,QwCr5hB9BlgB,QxCw5hBIL,OwCv5hBJ,QxCw5hBIuC,SACIirB,aAAc,SAAsBH,EAAQ9L,GACxC7gB,KAAKQ,OAAOoC,SAAS,uBACjB1C,MwCt5hBhBysB,ExCu5hBgB9L,YwCr5hBhBA,KxCw5hBQ9Z,WAAY,SAAoBlC,GAC5B,GAAI7E,KAAK6E,WAAaA,EAClB,OwCr5hBhB,CxCu5hBY7E,MAAK6E,UwCr5hBjBA,ExCs5hBY7E,KwCr5hBZsiB,kBxCu5hBQA,eAAgB,WwCn5hBxB,GAAAlgB,GAAApC,IxCs5hBYA,MAAKQ,OAAOoC,SAAS,uBACjBmF,KAAQ/H,KwCr5hBxB6E,UxCs5hBgB6B,SAAY1G,KwCr5hB5B0G,SxCs5hBgBoB,WwCr5hBhB,ExCs5hBgBX,UAAanH,KwCr5hB7BwJ,WxCs5hBgBvE,KAAQjF,KAAKiF,MwCr5hB7B,ExCs5hBgBof,UAAarkB,KwCr5hB7B0K,WxCs5hBgBkiD,YAAe5sD,KwCr5hB/B2sD,cAAA9pD,KAAA,SAAAC,GxCs5hBgBV,EAAM5B,OAAOoC,SAAS,iBwCp5hBtCE,KxCq5hBeG,MAAM,SAAUC,GACfd,EAAM5B,OAAOoC,SAAS,cwCp5hBtCM,MxCu5hBQ6f,WAAY,SAAoB1C,GwCl5hBxC,GAAA7c,GAAAxD,IxCq5hBY,KAAKA,KAAKuC,SAASuD,QACf,MAAO9F,MAAKQ,OAAOoC,SAAS,eACxB0e,KwCp5hBpB,GxCq5hBoBjX,IwCn5hBpB,cxCw5hBYrK,MAAKQ,OAAOoC,SAAS,mBACjBupB,cAAiB9L,EwCp5hBjC8L,cxCq5hBgBC,oBAAuB/L,EwCp5hBvC+L,oBxCq5hBgBxrB,QAAWyf,EwCp5hB3Bzf,QxCq5hBgB4I,WAAcxJ,KwCp5hB9BwJ,WxCq5hBgBkB,WAAc2V,EwCp5hB9B3V,aAAA7H,KAAA,SAAAC,GxCq5hBgBU,EAAOxB,UAAUC,MwCn5hBjC,2BxCo5hBgBuB,EAAOypB,YwCn5hBvB,GxCo5hBgBzpB,EAAOqd,awCn5hBvB,ExCo5hBgBrd,EwCl5hBhB8e,iBxCo5hBgB9e,EAAOhD,OAAOoC,SAAS,iBwCn5hBvCE,KxCo5hBeG,MAAM,SAAUC,GACfM,EAAOhD,OAAOoC,SAAS,cwCn5hBvCM,MxCs5hBQihB,iBAAkB,SAA0Bjb,GwCj5hBpD,GAAAxF,GAAA1D,IxCo5hBY,KAAKA,KAAKuC,SAASuD,QACf,MAAO9F,MAAKQ,OAAOoC,SAAS,eACxB0e,KwCn5hBpB,GxCo5hBoBjX,IwCl5hBpB,cxCu5hBY,IAAIqY,GAAanc,EAAE2C,EAAEE,eAAeC,QAAQ,0BAA0B4gD,KwCn5hBlF,kBxCo5hBYjqD,MAAKQ,OAAOoC,SAAS,yBACjB4f,UwCn5hBhBE,IADA7f,KAAA,SAAAC,GxCs5hBgBY,EAAOlD,OAAOoC,SAAS,iBwCn5hBvCE,KxCo5hBeG,MAAM,SAAUC,GACfQ,EAAOlD,OAAOoC,SAAS,cwCn5hBvCM,MxCs5hBQ+jB,UAAW,SAAmB/d,GAC1B,IAAKlJ,KAAKuC,SAASuD,QACf,MAAO9F,MAAKQ,OAAOoC,SAAS,eACxB0e,KwCj5hBpB,GxCk5hBoBjX,IwCh5hBpB,cxCq5hBY,IwCj5hBZqY,ExCm5hBgBA,GADAnc,EAAE2C,EAAEE,eAAeC,QAAQ,iBAAiB9H,OAAS,EACxCgF,EAAE2C,EAAEE,eAAeC,QAAQ,iBAAiBnK,KwCj5hBzE,cxCm5hB6BqH,EAAE2C,EAAEE,eAAeC,QAAQ,0BAA0BnK,KwCj5hBlF,cxCm5hBYc,KAAKQ,OAAOoC,SAAS,qBACjByE,MwCj5hBhB,ExCk5hBgBpC,KwCj5hBhB,SxCk5hBgBiiB,QACIC,WwCj5hBpBzE,ExCk5hBoB0E,awC/4hBpB,MxCm5hBQ8F,YAAa,SAAqBrS,GAC9B7a,KAAK+iB,YACDniB,QAASZ,KwCh5hBzBitB,YxCi5hBgBd,cwC/4hBhBtR,KxCk5hBQyS,iBAAkB,SAA0B5K,EAAYmqC,GACpD7sD,KAAK+iB,YACDniB,QAASZ,KwC/4hBzBitB,YxCg5hBgBd,cwC/4hBhBzJ,ExCg5hBgB0J,oBwC94hBhBygC,KxCi5hBQt/B,kBAAmB,SAA2BruB,GwC94hBtD,GAAA0J,GAAA5I,IxCi5hBYA,MwCh5hBZ0sD,exCi5hBY1sD,KAAKQ,OAAOoC,SAAS,4BACjBmF,KAAQ/H,KwCh5hBxB0sD,axCi5hBgBhmD,SAAY1G,KwCh5hB5B2sD,YxCi5hBgB7kD,WwCh5hBhB,ExCi5hBgB0a,UAAatjB,EwCh5hB7BwjB,aAAA7f,KAAA,SAAAC,GxCi5hBgB8F,EAAOpI,OAAOoC,SAAS,iBwC/4hBvCE,KxCg5hBeG,MAAM,SAAUC,GACf0F,EAAOpI,OAAOoC,SAAS,cwC/4hBvCM,OxCm5hBIwG,QAAS,WwC/4hBb,GAAAP,GAAAnJ,IxCk5hBQA,MAAKgC,UAAU2B,IAAI,6BAA8B,SAAU0c,GACvDlX,EAAO4Z,WwCj5hBnB1C,MxCo5hBI5c,QAAS,WACLzD,KAAKwJ,WAAaxJ,KAAK8D,KAAKC,YwCh5hBpC,cxCi5hBQ/D,KAAK0K,WAAa1K,KAAK8D,KAAKC,YwC94hBpC,cxCg5hBQ/D,KwC/4hBRsiB,qBxCk5hB6BhY,KAAKhM,EAASC,EAAoB,UAIzDuuD,KACA,SAAUzuD,EAAQC,EAASC,GAEjC,YAGAC,QAAOC,eAAeH,EAAS,cAC3BI,OAAO,GyC5uiBX,IAAAwpB,GAAA3pB,EAAA,OzCiviBAD,GAAQU,SACJC,KyChviBJ,SzCiviBIC,KAAM,WACF,OACIe,KACI8pB,MAAO7B,EAAQyB,QyChviB/B,azCiviBgBne,QAAS0c,EAAQyB,QyC9uiBjC,kBzCmviBI9nB,aAKEkrD,KACA,SAAU1uD,EAAQC,EAASC,GAEjC,Y0Cp3iBA,SAAAiO,GAAAC,GACA,GAAAC,EAEA,WADAlE,SAAAmE,MAAA,wEAGAD,GAAAD,EACAC,EAAAE,UAAAtK,SAAAK,EAXAnE,OAAAC,eAAAH,EAAA,cACAI,OAAA,GAEA,IAAAgO,GAWA/J,GACAqqD,QACAtqD,IAAA,yBACAC,QAAA,MACAK,KAAA,KAGA8F,SACApG,IAAA,6BACAC,QAAA,MACAK,KAAA,SAGAT,UACAG,IAAA,sBACAC,QAAA,MACAK,KAAA,MAGAiqD,cACAvqD,IAAA,0BACAC,QAAA,MACAK,KAAA,KAGAkqD,mBACAxqD,IAAA,+BACAC,QAAA,MACAK,KAAA,KAIA1E,GAAAU,SACAwN,Y1Ci4iBM2gD,KACA,SAAU9uD,EAAQC,EAASC,G2Cj7iBjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,S3C07iBM8uD,KACA,SAAU/uD,EAAQC,G4C18iBxBD,EAAAC,SAAgB4F,OAAA,WAAmB,GAAAC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OACAE,YAAA,mBACGF,EAAA,OACHE,YAAA,wBACGL,EAAAqG,GAAArG,EAAA/C,QAAA,cAAAlC,EAAAgB,GACH,MAAAoE,GAAA,OACAE,YAAA,sBACAG,OACA0oD,WAAA,GAAAnuD,EAAAgtB,QAEK5nB,EAAA,OACLE,YAAA,wBACKF,EAAA,OACLE,YAAA,aACKL,EAAAO,GAAA,qBAAAP,EAAA4B,GAAA7G,EAAAkC,QAAA+K,OAAAmhD,YAAA,oBAAAnpD,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,cACKL,EAAAO,GAAAP,EAAA4B,GAAA7G,EAAAkC,QAAA+K,OAAAC,gBAAAjI,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,4BACKF,EAAA,OACLE,YAAA,eACAW,UACA6oC,UAAA7pC,EAAA4B,GAAA7G,EAAAkC,QAAAoG,QAAAD,UAEKpD,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,kBACKL,EAAAO,GAAAP,EAAA4B,GAAA7G,EAAAkC,QAAAoG,oBAAArD,EAAAO,GAAA,KAAAxF,EAAAkC,QAAAoG,QAAA,KAAAlD,EAAA,OACLE,YAAA,oBACKL,EAAAO,GAAAP,EAAA4B,GAAA7G,EAAAkC,QAAAoG,QAAA+lD,SAAAppD,EAAA0B,OAAA1B,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,yBACKF,EAAA,OACLE,YAAA,cACKF,EAAA,OACLE,YAAA,mBACAY,IACAQ,MAAA,SAAAN,GACAnB,EAAA8iB,UAAA/nB,EAAAkC,QAAA+K,OAAAhE,aAGKhE,EAAAO,GAAA,QAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,oBACAY,IACAQ,MAAA,SAAAN,GACAnB,EAAA6nB,aAAA9rB,EAAAhB,EAAA+sB,OAAA/sB,EAAAgtB,UAGK/nB,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAA4nB,aAAA7rB,EAAA,kBAAAiE,EAAAO,GAAA,KAAAP,EAAA4nB,aAAA7rB,EAAAoE,EAAA,OACLE,YAAA,eACKF,EAAA,OACLE,YAAA,sBACKF,EAAA,SACLQ,aACA7F,KAAA,QACA8F,QAAA,UACArG,MAAAyF,EAAA,QACAa,WAAA,YAEAP,OACAQ,KAAA,OACAC,YAAA,WAEAC,UACAzG,MAAAyF,EAAA,SAEAiB,IACAK,MAAA,SAAAH,GACAA,EAAAI,OAAAC,YACAxB,EAAAvD,QAAA0E,EAAAI,OAAAhH,aAGKyF,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,oBACAY,IACAQ,MAAA,SAAAN,GACAnB,EAAAkoB,YAAAntB,EAAAkC,QAAAic,eAGKlZ,EAAAO,GAAA,UAAAP,EAAA0B,WACF1B,EAAAO,GAAA,KAAAP,EAAA/C,QAAAkH,OAAA,EAAAhE,EAAA,SACHE,YAAA,kBACGL,EAAA0B,MAAA,GAAA1B,EAAAO,GAAA,KAAAJ,EAAA,QACHG,OACA6D,MAAAnE,EAAA/C,QAAAkH,MACA/G,OAAA4C,EAAAuC,SACAxG,MAAAiE,EAAAU,WAEAO,IACA6F,YAAA9G,EAAA4C,eAEG,IACFZ,qB5Cg9iBKqnD,KACA,SAAUnvD,EAAQC,EAASC,G6CzijBjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,S7CkjjBMmvD,KACA,SAAUpvD,EAAQC,EAASC,G8ChkjBjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,S9CykjBMovD,KACA,SAAUrvD,EAAQC,EAASC,G+CvljBjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,S/CgmjBMqvD,KACA,SAAUtvD,EAAQC,KAMlBsvD,KACA,SAAUvvD,EAAQC,EAASC,GgDrnjBjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,ShD8njBMuvD,KACA,SAAUxvD,EAAQC,EAASC,GiD5ojBjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,SjDqpjBMwvD,KACA,SAAUzvD,EAAQC,EAASC,GAEjC,YAsBA,SAAS0pB,GAAuBnpB,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GkDnqjBvF,QAAS0lB,GAAa5gB,GACrB,GAAI3D,GAAMioB,EAAAC,QAAU,mBAcpB,QAbc,EAAAC,EAAAppB,UACbqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,IACNf,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KAoCpB,QAASoV,GAAgBne,GACxB,GAAI3D,GAAMioB,EAAAC,QAAU,sBAcpB,QAbc,EAAAC,EAAAppB,UACbqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,IACNf,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KAwDpB,QAAShF,GAAe/D,GACvB,GAAI3D,GAAMioB,EAAAC,QAAU,qBAkBpB,QAjBc,EAAAC,EAAAppB,UACbqpB,OAAQ,OACRpoB,IAAKA,EACL4H,OAAQjE,EAAOiE,OACf3I,KAAM0E,EAAOoE,KACb8F,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KAgDpB,QAASjE,GAAiB9E,GACzB,GAAI3D,GAAMioB,EAAAC,QAAU,uBAGpB,OAAKG,IAOS,EAAAF,EAAAppB,UACbqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,EACRkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,MAnBX,EAAAub,EAAAM,aACNlH,KAAM,GACNjX,IAAK,QAsCR,QAASpB,GAAarF,GACrB,GAAI3D,GAAMioB,EAAAC,QAAU,qBAAuBvkB,EAAOuD,SAgBlD,QAfc,EAAAihB,EAAAppB,UACbqpB,OAAQ,SACRpoB,IAAKA,EACL6N,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KAoBpB,QAASyV,GAAaxe,GACrB,GAAI3D,GAAMioB,EAAAC,QAAU,qBAAuBvkB,EAAOuD,SAgBlD,QAfc,EAAAihB,EAAAppB,UACbqpB,OAAQ,MACRpoB,IAAKA,EACL6N,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KAqCpB,QAASkX,GAAiBjgB,GACzB,GAAI3D,GAAMioB,EAAAC,QAAU,uBAiBpB,QAhBc,EAAAC,EAAAppB,UACbqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,EACRkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KAmCpB,QAASiY,GAAiBhhB,GACzB,GAAI3D,GAAMioB,EAAAC,QAAU,uBAiBpB,QAhBc,EAAAC,EAAAppB,UACbqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,EACRkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KA8CpB,QAASgV,GAAe/d,GACvB,GAAI3D,GAAMioB,EAAAC,QAAU,qBAiBpB,QAhBc,EAAAC,EAAAppB,UACbqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,EACRkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KAmDpB,QAAS2V,GAAe1e,GACvB,GAAI3D,GAAMioB,EAAAC,QAAU,qBAiBpB,QAhBc,EAAAC,EAAAppB,UACbqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,EACRkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KAwCpB,QAAS8V,GAAoB7e,GAC5B,GAAI3D,GAAMioB,EAAAC,QAAU,0BAiBpB,QAhBc,EAAAC,EAAAppB,UACbqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,EACRkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KA+BpB,QAASoW,GAAWnf,GACnB,GAAI3D,GAAMioB,EAAAC,QAAU,iBAGpB,OAAKG,IAOS,EAAAF,EAAAppB,UACbqpB,OAAQ,OACRpoB,IAAKA,EACLf,KAAM0E,EACNkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,MAnBX,EAAAub,EAAAM,aACNlH,KAAM,GACNjX,IAAK,QA+CR,QAAS4Y,GAAWrf,GACnB,GAAI3D,GAAMioB,EAAAC,QAAU,iBACNvkB,GAAO8kB,OAErB,cADO9kB,GAAO8kB,SACP,EAAAN,EAAAppB,UACNqpB,OAAQ,OACRpoB,IAAKA,EACLf,MAAM,EAAA6uD,EAAA/uD,SAAe4E,GACrBkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KA2BpB,QAASoX,GAAWngB,GACnB,GAAI3D,GAAMioB,EAAAC,QAAU,iBACNvkB,GAAO8kB,OAErB,cADO9kB,GAAO8kB,SACP,EAAAN,EAAAppB,UACNqpB,OAAQ,OACRpoB,IAAKA,EACLf,MAAM,EAAA6uD,EAAA/uD,SAAe4E,GACrBkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KAiBpB,QAASwX,GAAiBvgB,GACzB,GAAI3D,GAAMioB,EAAAC,QAAU,yBAA2BvkB,EAAO4e,SACxC5e,GAAO8kB,OAErB,cADO9kB,GAAO8kB,SACP,EAAAN,EAAAppB,UACNqpB,OAAQ,MACRpoB,IAAKA,EACL6N,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACV,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAElB+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KAiBpB,QAAS2X,GAAU1gB,GAClB,GAAI3D,GAAMioB,EAAAC,QAAU,kBAAoBvkB,EAAOuD,UAAY,IAAMvD,EAAOygB,SAC1DzgB,GAAO8kB,OAErB,cADO9kB,GAAO8kB,SACP,EAAAN,EAAAppB,UACNqpB,OAAQ,MACRpoB,IAAKA,EACL6N,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACV,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAElB+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KA4BpB,QAASgX,GAAc/f,GACtB,GAAI3D,GAAMioB,EAAAC,QAAU,oBACNvkB,GAAO8kB,OAErB,cADO9kB,GAAO8kB,SACP,EAAAN,EAAAppB,UACNqpB,OAAQ,OACRpoB,IAAKA,EACLf,MAAM,EAAA6uD,EAAA/uD,SAAe4E,GACrBkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACV,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAElB+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KA2BpB,QAAS+X,GAAc9gB,GACtB,GAAI3D,GAAMioB,EAAAC,QAAU,oBAiBpB,QAhBc,EAAAC,EAAAppB,UACbqpB,OAAQ,OACRpoB,IAAKA,EACLf,KAAM0E,EACNkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACV,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAElB+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KAmBpB,QAASoY,GAAWnhB,GACnB,GAAI3D,GAAMioB,EAAAC,QAAU,mBAAqBvkB,EAAOygB,SAgBhD,QAfc,EAAA+D,EAAAppB,UACbqpB,OAAQ,SACRpoB,IAAKA,EACL6N,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACV,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAElB+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KAoBpB,QAASjF,GAAW9D,GACnB,GAAI3D,GAAMioB,EAAAC,QAAU,mBAAqBvkB,EAAOuD,SAgBhD,QAfc,EAAAihB,EAAAppB,UACbqpB,OAAQ,SACRpoB,IAAKA,EACL6N,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACV,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAElB+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KAuDpB,QAASpE,GAAiB3E,GACzB,GAAI3D,GAAMioB,EAAAC,QAAU,uBAGpB,OAAKG,IAOS,EAAAF,EAAAppB,UACbqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,EACRkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,MAnBX,EAAAub,EAAAM,aACNlH,KAAM,GACNjX,IAAK,QlDurhBR7L,OAAOC,eAAeH,EAAS,cAC9BI,OAAO,IAERJ,EAAQkqB,WAAalqB,EAAQiqB,QAAUjqB,EAAQiK,iBAAmBjK,EAAQoJ,WAAapJ,EAAQymB,WAAazmB,EAAQomB,cAAgBpmB,EAAQqlB,cAAgBrlB,EAAQgmB,UAAYhmB,EAAQ6lB,iBAAmB7lB,EAAQylB,WAAazlB,EAAQ2kB,WAAa3kB,EAAQykB,WAAazkB,EAAQmkB,oBAAsBnkB,EAAQgkB,eAAiBhkB,EAAQqjB,eAAiBrjB,EAAQsmB,iBAAmBtmB,EAAQulB,iBAAmBvlB,EAAQ8jB,aAAe9jB,EAAQ2K,aAAe3K,EAAQoK,iBAAmBpK,EAAQqJ,eAAiBrJ,EAAQyjB,gBAAkBzjB,EAAQkmB,iBAAemE,EAEniB,IAAIqlC,GAAazvD,EAAoB,QAEjCwvD,EAAc9lC,EAAuB+lC,GkDjrjBzC9lC,EAAA3pB,EAAA,QACAsqB,EAAAtqB,EAAA,QlDsrjBIuqB,EAAab,EAAuBY,GkDprjBxCD,EAAArqB,EAAA,QlDwrjBI6pB,EAAUH,EAAuBW,EkDvrjBrCR,GAAAppB,QAAMmkC,SAASr1B,QAAQ0C,IAAI,gBAAkB,oCAC7C4X,EAAAppB,QAAMmkC,SAASr1B,QAAQ0C,IAAI,oBAAsB,gBACjD,IAAI8X,GAAQQ,EAAA9pB,QAAQwR,IAAI,QlDmokBxBlS,GkD9niBCkmB,elD+niBDlmB,EkD9niBCyjB,kBlD+niBDzjB,EkD9niBCqJ,iBlD+niBDrJ,EkD9niBCoK,mBlD+niBDpK,EkD9niBC2K,elD+niBD3K,EkD9niBC8jB,elD+niBD9jB,EkD9niBCulB,mBlD+niBDvlB,EkD9niBCsmB,mBlD+niBDtmB,EkD9niBCqjB,iBlD+niBDrjB,EkD9niBCgkB,iBlD+niBDhkB,EkD9niBCmkB,sBlD+niBDnkB,EkD9niBCykB,alD+niBDzkB,EkD9niBC2kB,alD+niBD3kB,EkD9niBCylB,alD+niBDzlB,EkD9niBC6lB,mBlD+niBD7lB,EkD9niBCgmB,YlD+niBDhmB,EkD9niBCqlB,gBlD+niBDrlB,EkD9niBComB,gBlD+niBDpmB,EkD9niBCymB,alD+niBDzmB,EkD9niBCoJ,alD+niBDpJ,EkD9niBCiK,mBlD+niBDjK,EkD9niBCiqB,QlD8niBiBL,EAAQK,QAC1BjqB,EkD9niBCkqB,WlD8niBoBN,EAAQM,YAIvBylC,KACA,SAAU5vD,EAAQC,EAASC,ImDpqkBjC,SAAAgI,IAAA,SAAA4jB,GACA,kBAAAnpB,QAAA+sB,OACA/sB,OAAA+sB,OAAAmgC,IAEAltD,OAAA+sB,OAAA,wBAAA5D,GACSnpB,OAAA+sB,OAAAogC,IAETntD,OAAA+sB,OAAA,SAAAJ,EAAArvB,EAAAD,GACA,MAAA8rB,KAIAA,EAAAnpB,OAAAotD,QAEK,gBAAA/vD,IAAA,gBAAAA,GAAAC,QAELD,EAAAC,QAAA6rB,EAAA5jB,GAGA4jB,EAAA5jB,IAEC,SAAAA,GACD,YAGA,IAAAV,GAAA,SAAAgpB,GACA,GAAAssB,GAAAn6C,OAAAqtD,UACAlT,IAEAtsB,EAAAssB,EAAA50C,GAooQA,OAhoQA,UAAAvF,EAAAuF,GACA,GAAAvF,EAAAqtD,WAGA,WADAC,OAAA,mDAKA,IAAAnT,GAAA,SAAAoT,GAEA,gBAAAA,KACAA,EAAA,IAAAA,EAIA,IAAAC,GAAAjoD,EAAAgoD,EACA,QAAAC,EAAAjtD,OAAA,CAGA,GAAA0rC,GAAAuhB,EAAA,GAAAvhB,QACA,cAAAA,GAAA,QAAAA,IAIAjtC,KAAAyuD,cAAAxhB,EAAA3e,cACAtuB,KAAA0uD,gBAAAF,EAGAxuD,KAAA2uD,MAAAH,EAAAI,OACA5uD,KAAA6uD,QAAAL,EAAA91B,SAGA14B,KAAAuY,SAGA4iC,GAAAtsB,GAAAssB,EAAAvuC,UAEAuuC,EAAA2T,MAAAvoD,EAAA,QACA40C,EAAA4T,UAAAxoD,EAAA+vB,UACA6kB,EAAA6T,QAAAzoD,EAAAvF,GACAm6C,EAAArlB,UAAAD,UAAAC,UACAqlB,EAAArjB,iBAAA92B,EAAA82B,iBACAqjB,EAAA8T,SAAA,kBAAA34B,UAAA44B,YACA/T,EAAAgU,SAAAtvD,SAAAsvD,SAAA7gC,cACA6sB,EAAAiU,YAAA,+DACAjU,EAAAkU,YAAAlU,EAAAiU,YAAArvD,QAAAo7C,EAAAgU,WAAA,EACAhU,EAAAmU,QAAA,uDAGAtuD,EAAAqtD,WAAAlT,EAKAA,EAAAoH,OAAA,SAAA1zB,GACAssB,EAAAoU,WACApU,EAAAoU,aAGA,kBAAA1gC,IACAssB,EAAAoU,SAAA3+C,KAAAie,KAGC7tB,OAAAuF,GAEDV,EAAA,SAAAs1C,EAAA50C,GAEA40C,EAAAtsB,GAAAtW,KAAA,WAGAvY,KAAAwvD,oBAGAxvD,KAAAyvD,qBAGAzvD,KAAA0vD,SAGA1vD,KAAA2vD,mBAGA3vD,KAAA4vD,SAGA5vD,KAAA6vD,kBAKAhqD,EAAA,SAAAs1C,EAAA50C,GAGA40C,EAAAtsB,GAAAihC,MAAA,SAAAjhC,GAEA7uB,KAAA+vD,WACA/vD,KAAA+vD,aAGA/vD,KAAA+vD,SAAAn/C,KAAAie,IAIAssB,EAAAtsB,GAAAmhC,aAAA,WAGA,IAFA,GAAAC,GAAAjwD,KAAA+vD,SAEAE,EAAA1uD,QACA0uD,EAAAnhC,QAAAxkB,KAAAtK,OAKAm7C,EAAAtsB,GAAAqhC,YAAA,WACA,GAAAC,GAAAnwD,KACA0uD,EAAAyB,EAAAzB,gBACA0B,EAAAD,EAAAlrB,IAAAmrB,IAEA,IAAA1B,IAAA0B,EAAA,CAKA,GAAA1xD,GAAA0xD,EAAAnP,MACAyN,GAAA2B,IAAA3xD,KAIAy8C,EAAAtsB,GAAAyhC,aAAA,WACA,GAAAH,GAAAnwD,KACA0uD,EAAAyB,EAAAzB,gBACA6B,EAAA,GACAtjB,EAAAkjB,EAAA1B,aAOA,OANA,QAAAxhB,EACAsjB,EAAA7B,EAAAzN,OACS,aAAAhU,IACTsjB,EAAA7B,EAAA2B,OAGAE,GAIApV,EAAAtsB,GAAA2hC,gBAAA,WACA,GAAAZ,GAAA5vD,KAAA4vD,KAEArpD,GAAA8H,KAAAuhD,EAAA,SAAAz/B,EAAAsgC,GACAA,EAAAC,oBAKAvV,EAAAtsB,GAAA8hC,kBAAA,SAAAC,GACA5wD,KAAA6wD,YAKAD,QACA,gBAAAA,KACAA,OAGArqD,EAAA8H,KAAArO,KAAA4vD,MAAA,SAAAz/B,EAAAsgC,GACAG,EAAA7wD,QAAAowB,IAAA,GAGAsgC,EAAAr4C,UAAA,OAKA+iC,EAAAtsB,GAAAiiC,mBAAA,SAAAF,GACA5wD,KAAA6wD,YAKAD,QACA,gBAAAA,KACAA,OAGArqD,EAAA8H,KAAArO,KAAA4vD,MAAA,SAAAz/B,EAAAsgC,GACAG,EAAA7wD,QAAAowB,IAAA,GAGAsgC,EAAAr4C,UAAA,OAKA+iC,EAAAtsB,GAAAkiC,sBAAA,WACA,GAAAnB,GAAA5vD,KAAA4vD,KAEArpD,GAAA8H,KAAAuhD,EAAA,SAAAz/B,EAAAsgC,GACA,GAAAvgC,GAAAugC,EAAAO,WAAAP,EAAAQ,UAAAR,EAAAS,KACAhhC,MAAAihC,MACAjhC,EAAAihC,YAMAtrD,EAAA,SAAAs1C,EAAA50C,GAIA,QAAA6qD,MADA,GAAAC,IAAAlW,EAAA8T,QAIA9T,GAAAtsB,GAAAyiC,aAAA,SAAAC,GACA,IAAAA,EAGA,MAAAvxD,MAAAwxD,UAFAxxD,MAAAwxD,WAAAD,GAOApW,EAAAtsB,GAAA4iC,cAAA,SAAAC,EAAAC,GAEAA,KAAA,MACAA,EAAA,UAAAA,GAEAD,KAAA1xD,KAAAsxD,kBAIAI,EAAAE,SAAAD,GACA3xD,KAAAsxD,aAAAI,KAKAvW,EAAAtsB,GAAAgjC,aAAAR,EAAAD,EAAA,SAAAM,GAEA,GADAA,KAAA1xD,KAAAsxD,eAIA,MAAAI,GAAArjC,YAIA8sB,EAAAtsB,GAAAijC,aAAAT,EAAAD,EAAA,SAAAM,GACAA,KAAA1xD,KAAAsxD,cACA,IAAAS,GAAAL,EAAAM,uBAEA,YAAAD,EAAA3jC,SACA2jC,EAEAA,EAAA94B,YAKAkiB,EAAAtsB,GAAAojC,aAAAZ,EAAAD,EAAA,SAAAM,GAGA,UAFAA,KAAA1xD,KAAAsxD,kBAEAI,EAAAQ,gBACAR,EAAAQ,iBAAAR,EAAAS,cACAT,EAAAU,cAAAV,EAAAW,YAUAlX,EAAAtsB,GAAAyjC,cAAAjB,EAAAD,EAAA,SAAAM,GACA,GACAa,GACAC,EAFAz7C,EAAA/W,KAGAilC,EAAAluB,EAAAkuB,IAAAmrB,KAAA5/C,IAAA,EAEAkhD,GACAa,EAAAb,EAAAM,yBAEAQ,EAAAl8B,SAAAm8B,eACAD,EAAAE,YAAAF,EAAAG,aACAjB,EAAAp7B,SAAAm8B,eAAAC,WAAA,GACAH,EAAAb,EAAAM,0BAIAO,IAAAhsD,EAAAqsD,SAAA3tB,EAAAstB,IAAAttB,IAAAstB,IAEAx7C,EAAAu6C,aAAAI,IAKAvW,EAAAtsB,GAAAgkC,iBAAAxB,EAAAD,EAAA,SAAAM,GACA,GAAAc,EAIA,IAFAd,KAAA1xD,KAAAsxD,eAOA,IACAkB,EAAAl8B,SAAAm8B,eACAD,EAAAM,kBACAN,EAAAO,SAAArB,GACS,MAAA/3C,GACTwhC,EAAAxuC,MAAA,iDAKAwuC,EAAAtsB,GAAAmkC,uBAAA3B,EAAAD,EAAA,SAAA7C,EAAAoD,GAEApD,IAGAoD,KAAA,MAGA3xD,KAAAizD,eAAA1E,GAGA,UAAAoD,GACA3xD,KAAAyxD,cAAAzxD,KAAAsxD,eAAA,SAEA,QAAAK,GACA3xD,KAAAyxD,cAAAzxD,KAAAsxD,eAAA,OAIAtxD,KAAA6yD,qBAIA1X,EAAAtsB,GAAAqkC,cAAA7B,EAAAD,EAAA,WACA,GAAAjB,GAAAnwD,IACA,KAAAmwD,EAAAmB,eAAA,CAKA,GACAlB,GAAAD,EAAAlrB,IAAAmrB,KACA+C,EAAA/C,EAAAtM,WAAAsP,OAEAD,GAAA5xD,QACA4uD,EAAA6C,uBAAAG,EAAA3iD,IAAA,MAKA2qC,EAAAtsB,GAAAokC,eAAA5B,EAAAD,EAAA,SAAA7C,GACA,GAAA4B,GAAAnwD,KACAqzD,EAAAlD,EAAAlrB,IAAAmrB,KAAA5/C,IAAA,EACA,IAAA+9C,GAAAhoD,EAAAqsD,SAAAS,EAAA9E,GAAA,CAMA,IADA,GAAA+E,GAAA/E,EAAAnK,WACAkP,GACA,IAAAA,EAAAllC,UAIAklC,IAAAlP,UAGA,KADA,GAAAmP,GAAAhF,EAAAiF,UACAD,GACA,IAAAA,EAAAnlC,UAIAmlC,IAAAC,SAGA,IAAA9B,GAAAp7B,SAAA44B,aACAoE,IAAAC,GAEA7B,EAAA+B,SAAAH,EAAA,GACA5B,EAAAgC,OAAAH,IAAAI,YAAApyD,UAGAmwD,EAAA+B,SAAAlF,EAAA,GACAmD,EAAAgC,OAAAnF,EAAA,IAIA4B,EAAAmC,cAAAZ,OAIA7rD,EAAA,SAAAs1C,EAAA50C,GAEA40C,EAAA8T,WAQA9T,EAAAtsB,GAAAgjC,aAAA,SAAAH,GAEA,GADAA,KAAA1xD,KAAAsxD,eAIA,MAAAI,GAAA1xC,MAIAm7B,EAAAtsB,GAAAijC,aAAA,SAAAJ,GAEA,GADAA,KAAA1xD,KAAAsxD,eACA,CAGA,GAAAS,GAAAL,EAAAkC,eAEA,YAAA7B,EAAA3jC,SACA2jC,EAEAA,EAAA94B,aAKAkiB,EAAAtsB,GAAAojC,aAAA,SAAAP,GAGA,QAFAA,KAAA1xD,KAAAsxD,kBAEAI,EAAA1xC,MAQAm7B,EAAAtsB,GAAAyjC,cAAA,SAAAZ,GACA,GACAa,GADAx7C,EAAA/W,KAGAilC,EAAAluB,EAAAkuB,IAAAmrB,KAAA5/C,IAAA,EAEAkhD,GACAa,EAAAb,EAAAkC,iBAEAlC,EAAAp7B,SAAAk8B,UAAAtD,cAIAqD,MAHA,KAAAb,EAAAkC,cAGA,KAEAlC,EAAAkC,iBAKArB,IAAAhsD,EAAAqsD,SAAA3tB,EAAAstB,IAAAttB,IAAAstB,IAEAx7C,EAAAu6C,aAAAI,IAKAvW,EAAAtsB,GAAAgkC,iBAAA,SAAAvB,GACA,GAEAI,GAFAvB,EAAAnwD,IAKA,IADAsxD,KAAAnB,EAAAmB,eACA,CAIAI,EAAAp7B,SAAAk8B,UAAAtD,aACA,KAEAwC,EAAAmC,YAAA,WAAAvC,GACS,MAAA33C,IAIT,OAAA23C,EAAAtxC,KAAAze,OACA,IAEAmwD,EAAAE,UAAA,GACa,MAAAj4C,QAKb+3C,GAAAmC,YAAA,eAAAvC,EAEAI,GAAAnL,cAIA1gD,EAAA,SAAAs1C,EAAA50C,GAEA40C,EAAAtsB,GAAAghC,aAAA,WACA,GAAAM,GAAAnwD,KACA6vD,IAGAA,GAAAiE,WAAA,SAAA7S,GACA,GAEA8S,GAFAvF,EAAAjoD,EAAA06C,GACA+S,EAAA7D,EAAA2B,gBAGAiC,EAAA5D,EAAA8D,aAAAD,KAKAztD,EAAAwtD,GAAAG,MAAA1F,IAIA2B,EAAAN,kBAIAhqD,EAAA,SAAAs1C,EAAA50C,GAGA40C,EAAAtsB,GAAAslC,QAAA,SAAAjrD,EAAAkrD,EAAAC,EAAAzmC,GAIA,QAAA0mC,KACAF,IAGAjE,EAAAoE,sBAAAH,GAEA99B,SAAAmuB,YAAA2P,GAAA,EAAAC,IAGAG,EAAArE,EAAAN,aACAuE,IAAAI,IACAA,EAAAJ,GAAAC,KAdA,GACAG,GADArE,EAAAnwD,IAmBAA,MAAAy0D,cAAAvrD,EAAAorD,EAAA1mC,IAIAutB,EAAAtsB,GAAA6lC,eAAA,SAAAC,EAAAzrD,EAAAkrD,EAAAC,EAAAzmC,GAEA,GAAAgnC,GACAC,CACA,iBAAAF,GACAC,EAAAD,GAEAC,EAAAD,EAAAC,SACAC,EAAAF,EAAAE,MAIA,IAAAb,GAAAh0D,KAAA8xD,cACAkC,GAAAh0D,KAAA80D,sBAAAd,EAAAY,EAAAC,GAGAb,GACAh0D,KAAAizD,eAAAe,GAIAh0D,KAAAm0D,QAAAjrD,EAAAkrD,EAAAC,EAAAzmC,IAIAutB,EAAAtsB,GAAA4lC,cAAA,SAAAvrD,EAAAorD,EAAA1mC,GAyCA,QAAAmnC,KACA5E,EAAAY,wBAzCA,GAAAZ,GAAAnwD,KACA0xD,EAAAvB,EAAAmB,cAEA,KAAAI,EAGA,YADAxoD,KAAA8lC,iBAIAmhB,GAAA6E,aAGAh1D,KAAA6yD,iBAAAnB,GAGA4C,EAAAhqD,KAAA6lD,GAGAnwD,KAAAsyD,gBAEAtyD,KAAA6yD,mBAGAjlC,GAAA,kBAAAA,IACAA,EAAAtjB,KAAA6lD,GAIAA,EAAAlrB,IAAAgwB,eAGA9E,EAAAlrB,IAAAiwB,iBAGA/E,EAAAD,cAGAC,EAAAK,kBAMA1hD,WAAAimD,EAAA,KAEA7rD,GACAA,EAAA8lC,kBAMAmM,EAAAtsB,GAAAsmC,kBAAA,SAAAf,GACA,GAAA5kC,GAAA,EACA,KACAA,EAAA8G,SAAA6+B,kBAAAf,GACS,MAAAz6C,IAGT,MAAA6V,IAKA2rB,EAAAtsB,GAAAumC,kBAAA,SAAAhB,GACA,GAAA5kC,IAAA,CACA,KACAA,EAAA8G,SAAA8+B,kBAAAhB,GACS,MAAAz6C,IAGT,MAAA6V,IAIA2rB,EAAAtsB,GAAA0lC,sBAAA,SAAAH,GACA,GAAA5kC,IAAA,CACA,KACAA,EAAA8G,SAAAi+B,sBAAAH,GACS,MAAAz6C,IAGT,MAAA6V,MAIA3pB,EAAA,SAAAs1C,EAAA50C,GAKA,QAAA8uD,GAAAT,GACA,GAAArG,GAAAvuD,KACAs1D,EAAA/uD,EAAAquD,GACAplC,GAAA,CAUA,OAPA8lC,GAAAjnD,KAAA,WACA,GAAArO,OAAAuuD,EAEA,MADA/+B,IAAA,GACA,IAIAA,EAhBA,GAAA+lC,EAoBApa,GAAAtsB,GAAAolC,aAAA,SAAA1F,GACA,GAAAiH,GAAAx1D,KAAAsT,OAAAkiD,SACA,OAAAA,GAIAx1D,KAAA80D,sBAAAvG,EAAAiH,OAHAra,GAAAxuC,MAAA,yBAOAwuC,EAAAtsB,GAAAimC,sBAAA,SAAAvG,EAAAqG,EAAAC,GAEA,GAAAtG,GAAAqG,EAAA,CAIAW,IAEAA,EAAAhH,EAAAkH,uBACAlH,EAAAmH,oBACAnH,EAAAoH,kBACApH,EAAAgH,iBAEAA,IAEAA,EAAAF,EAKA,KAFA,GAAApwB,GAAAjlC,KAAAilC,IAAAmrB,KAAA5/C,IAAA,GAEA+9C,GAAAtpB,IAAAspB,GAAAhoD,EAAAqsD,SAAA3tB,EAAAspB,IAAA,CACA,GAAAgH,EAAAjrD,KAAAikD,EAAAqG,GAAA,CAGA,IAAAC,EAEA,MAAAtG,EAGA,IAAAsG,EAAAtG,GAEA,MAAAA,GAKAA,IAAAt1B,gBAOApzB,EAAA,SAAAs1C,EAAA50C,GAGA,QAAAqvD,GAAAzF,GAIA,MAHA,OAAAA,EAAA0F,YACA1F,EAAA0F,cAEA1F,EAAA0F,UAEA,QAAAC,GAAA3F,GAIA,MAHA,OAAAA,EAAA4F,YACA5F,EAAA4F,cAEA5F,EAAA4F,UAIA,QAAAC,GAAA7F,EAAAjxD,EAAA+F,GAGA,GAAAorD,GAAAnxD,EAAAmxD,IACApP,EAAAkP,EAAAlrB,IAAAmrB,KAAAnP,MAEA,UAAAoP,EAAA,CAIA,GAAAA,IAAApP,EACA,eAAAh8C,MACAkrD,GAAA8F,OAEa,SAAAhxD,MACbkrD,GAAA+F,WAGA,EAKA/F,GAAAlrB,IAAAmrB,KAAAnP,KAAAoP,GAEAF,EAAAD,cAGAC,EAAAj4C,UAAA,kBAAAi4C,GAAAj4C,UACAi4C,EAAAj4C,SAAA5N,KAAA6lD,IAYAhV,EAAAtsB,GAAAmmC,WAAA,WACA,GAAA7E,GAAAnwD,KACAowD,EAAAD,EAAAlrB,IAAAmrB,KACAC,EAAAD,EAAAnP,OACAkV,EAAAL,EAAA3F,GACAiG,EAAAR,EAAAzF,EAGAE,MAFA8F,EAAA50D,OAAA40D,EAAA,OAEA9F,MAKA+F,EAAA70D,SACA60D,MAIAD,EAAApnC,SACA2iC,MAAAvB,EAAAmB,eACAjB,QAIA8F,EAAA50D,OAhFA,IAiFA40D,EAAA3T,QAKArH,EAAAtsB,GAAAqnC,KAAA,WACA,GAAA/F,GAAAnwD,KACAm2D,EAAAL,EAAA3F,GACAiG,EAAAR,EAAAzF,EAEA,IAAAgG,EAAA50D,OAAA,CAKA,GAAArC,GAAAi3D,EAAArnC,OACAsnC,GAAArnC,QAAA7vB,GAGA82D,EAAAh2D,KAAAd,EAAA,UAIAi8C,EAAAtsB,GAAAonC,KAAA,WACA,GAAA9F,GAAAnwD,KACAm2D,EAAAL,EAAA3F,GACAiG,EAAAR,EAAAzF,EACA,IAAAiG,EAAA70D,OAAA,CAKA,GAAArC,GAAAk3D,EAAAtnC,OACAqnC,GAAApnC,QAAA7vB,GAGA82D,EAAAh2D,KAAAd,EAAA,YAIA2G,EAAA,SAAAs1C,EAAA50C,GAGA40C,EAAAtsB,GAAAq4B,OAAA,WACA,GAAAiJ,GAAAnwD,IAIAm7C,GAAA2T,OAAA,IAAA3T,EAAA2T,MAAAvtD,SACA45C,EAAA2T,MAAAvoD,EAAA,QACA40C,EAAA4T,UAAAxoD,EAAA+vB,UACA6kB,EAAA6T,QAAAzoD,EAAAvF,SAOAmvD,EAAAkG,WAGAlG,EAAAmG,cACAnG,EAAAoG,sBACApG,EAAAqG,YACArG,EAAAsG,wBAGAtG,EAAAuG,aACAvG,EAAAwG,qBACAxG,EAAAyG,WAGAzG,EAAAH,eAGAG,EAAA+C,gBAGA/C,EAAAC,KAAAD,EAAAlrB,IAAAmrB,IAGA,IAAAb,GAAApU,EAAAoU,QACAA,MAAAhuD,QACAgF,EAAA8H,KAAAkhD,EAAA,SAAAp/B,EAAAkgC,GACAA,EAAA/lD,KAAA6lD,MAMAhV,EAAAtsB,GAAAvR,QAAA,WACAtd,KAAAilC,IAAAmrB,KAAAyG,WAAA,mBACA72D,KAAA8wD,qBAGA9wD,KAAA6wD,WAAA,GAGA1V,EAAAtsB,GAAAioC,OAAA,WAEA92D,KAAA6wD,WAAA,EACA7wD,KAAAilC,IAAAmrB,KAAAnG,KAAA,0BACAjqD,KAAA2wD,qBAGAxV,EAAAtsB,GAAA/a,QAAA,WACA,GAAAiD,GAAA/W,KACA0uD,EAAA33C,EAAA23C,gBACAqI,EAAAhgD,EAAAggD,gBAGA,SAFAhgD,EAAA03C,eAIAC,EAAAmI,WAAA,mBACAE,EAAA7C,MAAAxF,GACAqI,EAAA5F,SAGAzC,EAAArnD,OACA0vD,EAAA5F,SAIAhW,EAAAtsB,GAAAmoC,UAAA,WACA,GAAAjgD,GAAA/W,KACA0uD,EAAA33C,EAAA23C,gBACAqI,EAAAhgD,EAAAggD,iBACAE,EAAAlgD,EAAAmgD,cAAAD,cAGA,SAFAlgD,EAAA03C,eAIAC,EAAAzE,KAAA,0BACAgN,EAAA/C,MAAAxF,GACAqI,EAAA1vD,SAGAqnD,EAAAyC,OACA4F,EAAA1vD,SAIA8zC,EAAAtsB,GAAAsoC,MAAA,WACA,GAAAhH,GAAAnwD,KACAowD,EAAAD,EAAAlrB,IAAAmrB,IACAA,GAAAnP,KAAA,eACAkP,EAAA6C,uBAAA5C,EAAA7F,KAAA,KAAA/5C,IAAA,OAIA3K,EAAA,SAAAs1C,EAAA50C,GAGA,GAAA6wD,GAAA,SAAAjH,GACAnwD,KAAAmwD,SACAnwD,KAAAuY,OAGA6+C,GAAAvoC,GAAAuoC,EAAAxqD,UAGAuuC,EAAAic,kBAGAvxD,EAAA,SAAAs1C,EAAA50C,GAEA,GAAA6wD,GAAAjc,EAAAic,aAGAA,GAAAvoC,GAAAtW,KAAA,WACA,GAAAxB,GAAA/W,KACAi3D,EAAA1wD,EAAA,yDAEAwQ,GAAAkgD,iBAGAlgD,EAAAsgD,gBAIAD,EAAAvoC,GAAAwoC,aAAA,WACA,GAAAJ,GAAAj3D,KAAAi3D,eACA9G,EAAAnwD,KAAAmwD,OACAC,EAAAD,EAAAlrB,IAAAmrB,IAEAA,GAAAhrD,GAAA,oBACAgrD,EAAAtmD,YAAA,GACAmtD,EAAAjlD,SAAA,0BAEAilD,EAAAhlD,YAAA,+BAMApM,EAAA,SAAAs1C,EAAA50C,GAEA,GAAA6wD,GAAAjc,EAAAic,aAEAA,GAAAvoC,GAAA3qB,OAAA,WACA,GAAA+yD,GAAAj3D,KAAAi3D,cACAj3D,MAAAmwD,OAAA4G,iBAEAt6C,OAAAw6C,IAIAG,EAAAvoC,GAAA9kB,OAAA,WAEA,MADA/J,MAAAi3D,eACAltD,UAIAqtD,EAAAvoC,GAAAyoC,WAAA,SAAAC,EAAA9G,GAIA,MAFAzwD,MAAAw3D,UAAAD,GAEAv3D,KAAAy3D,YAAAhH,IAEA2G,EAAAvoC,GAAA2oC,UAAA,SAAAD,GACA,GACAG,GADAT,EAAAj3D,KAAAi3D,cAEAj3D,MAAA23D,eAAA33D,KAAA43D,kBAAAL,IACAG,EAAAnxD,EAAA,2CACA0wD,EAAAx6C,OAAAi7C,GAEA13D,KAAA23D,cAAAD,EACA13D,KAAA43D,gBAAAL,IAGAH,EAAAvoC,GAAA4oC,YAAA,SAAAhH,GACA,GAAAoH,GAAApH,EAAAqH,WACAC,EAAAtH,EAAAuH,aAEAN,EAAA13D,KAAA23D,cACAM,EAAA1xD,EAAA,yCAMA,OALA0xD,GAAAhO,KAAA,KAAAwG,EAAAyH,KACAH,EAAA5G,OACA8G,EAAAx7C,OAAAo7C,GAAAp7C,OAAAs7C,GACAL,EAAAj7C,OAAAw7C,GAEAA,KAIApyD,EAAA,SAAAs1C,EAAA50C,GAGA,GAAA4xD,GAAA,SAAAxG,GACA3xD,KAAAmwD,OAAAwB,EAAAxB,OACAnwD,KAAA6a,GAAA82C,EAAA92C,GACA7a,KAAAk4D,IAAAvG,EAAAuG,IACAl4D,KAAAuH,MAAAoqD,EAAApqD,MACAvH,KAAA83D,WAAAnG,EAAAmG,WACA93D,KAAAg4D,aAAArG,EAAAqG,cAAArG,EAAAmG,WAGA93D,KAAAo0D,YAAAzC,EAAAyC,YACAp0D,KAAAq0D,aAAA1C,EAAA0C,aACAr0D,KAAAo4D,oBAAAzG,EAAAyG,qBAAAzG,EAAAyC,YACAp0D,KAAAq4D,qBAAA1G,EAAA0G,sBAAA1G,EAAA0C,aAGA8D,GAAAtpC,GAAAspC,EAAAvrD,UAGAuuC,EAAAgd,SAGAtyD,EAAA,SAAAs1C,EAAA50C,GAEA40C,EAAAgd,KAGAtpC,GAAAypC,OAAA,WACA,GAAAnI,GAAAnwD,KAAAmwD,OACAoI,EAAApI,EAAAqI,GAAA5I,MACA6I,EAAAz4D,KAAA6a,GACA69C,EAAAH,EAAAE,EAEAz4D,MAAA83D,YAAA93D,KAAAg4D,eAKA,MAAAU,IACAvd,EAAA7zC,KAAA,sBAAAmxD,EAAA,kBAIAC,EAAAH,EAAA,SAIAv4D,KAAA83D,WAAAvxD,EAAAmyD,EAAAC,QAGA,MAAA1lD,KAAAylD,EAAAE,UAEA54D,KAAAg4D,aAAAh4D,KAAA83D,WAAA3qB,QAAAn7B,SAAA0mD,EAAAE,SAAA5vD,MAAA,IAGAhJ,KAAAg4D,aAAAzxD,EAAAmyD,EAAAE,cAKA/yD,EAAA,SAAAs1C,EAAA50C,GAEA,GAAA4xD,GAAAhd,EAAAgd,IAGAA,GAAAtpC,GAAA3qB,OAAA,SAAAqzD,GAEAv3D,KAAAs4D,QAEA,IAAAnI,GAAAnwD,KAAAmwD,OACA+G,EAAA/G,EAAA+G,cACA2B,EAAA3B,EAAAI,WAAAC,EAAAv3D,MACA84D,EAAA94D,KAAA84D,QAGA94D,MAAA+4D,WAAAF,GAGAC,GAAA,kBAAAA,IACAA,EAAAxuD,KAAAtK,OAGAm4D,EAAAtpC,GAAAkqC,WAAA,SAAAF,GAuCA,QAAAxxD,KACA2xD,EAAA3xD,OAEA,QAAA8pD,KACA6H,EAAA7H,OA1CA,GAOA8H,GAPAliD,EAAA/W,KACAmwD,EAAAp5C,EAAAo5C,OACA5oD,EAAAwP,EAAAxP,MACAyxD,EAAAzyD,EAAA,gCACA2yD,EAAA3yD,EAAA,+BAIAwQ,GAAAoiD,WAGAF,EAAA1yD,EAAA,kFAAuGgB,EAAA,QAEvG4zC,EAAA2T,MAAAryC,OAAAw8C,GACA9I,EAAAL,MAAA,WACA,GACAsJ,GAAAH,EAAAI,aAAA,EACAC,EAAAN,EAAAK,aACAE,EAAAriC,WAAA8hC,EAAA3N,IAAA,kBAEA4N,GAAA/xD,SACA+xD,EAAA,KAGAD,EAAA3N,KACAnyC,MAAAkgD,EACAI,cAAAD,GAAAD,EAAAF,GAAA,IAIAriD,EAAAoiD,SAAAC,KAIAJ,EAAAv8C,OAAAy8C,GACAF,EAAAv8C,OAAAlV,GACAsxD,EAAAp8C,OAAAu8C,EASA,IAAAS,EACAZ,GAAAtO,KAAA,KAAAnlD,GAAA,sBAAA8D,GACA6N,EAAA2iD,UAAA3iD,EAAAqB,aACAqhD,EAAA3qD,WAAAzH,EAAA,QAESjC,GAAA,sBAAA8D,GACTuwD,GAAAtY,aAAAsY,GACAtI,MACS/rD,GAAA,QAAA+rD,IAITgH,EAAAtpC,GAAA8qC,UAAA,WACA,GAAA5iD,GAAA/W,KAEA83D,EAAA/gD,EAAA+gD,WACAE,EAAAjhD,EAAAihD,aAGA4B,EAAA7iD,EAAA6iD,UACA,IAAA7iD,EAAA8iD,iBAEA,WADA9iD,GAAA8iD,kBAGAD,KACAA,EAAA,SAAA1wD,GAEA,GAAA4wD,GAAA/iD,EAAAi6C,WAAAj6C,EAAAk6C,UAAAl6C,EAAAm6C,KACA,IAAA4I,KAAAzyD,KAMA,YALAyyD,EAAAC,UACAD,EAAA3I,OAEA2I,EAAAzyD,OAMA,IACA+sD,GACAC,EAFAlE,EAAAp5C,EAAAo5C,MAIAp5C,GAAA6hD,UAEAxE,EAAAr9C,EAAAqhD,oBACA/D,EAAAt9C,EAAAshD,uBAEAjE,EAAAr9C,EAAAq9C,YACAC,EAAAt9C,EAAAs9C,cAGAD,EAEAjE,EAAAgE,QAAAjrD,EAAAkrD,EAAAC,IAGAlZ,EAAA7zC,KAAA,OAAAyP,EAAA8D,GAAA,gBACA3R,EAAA8lC,mBAKA,IAAAgrB,GAAAjjD,EAAAijD,oBAAAJ,CAGA9B,GAAAlyD,MAAA,SAAAsD,GACA6N,EAAAqB,aACAwhD,EAAAtvD,KAAAyM,EAAA7N,GACA6N,EAAA25C,kBAEAxnD,EAAA8lC,mBAEAgpB,EAAApyD,MAAA,SAAAsD,GACA6N,EAAAqB,aACA4hD,EAAA1vD,KAAAyM,EAAA7N,GACA6N,EAAA25C,kBAEAxnD,EAAA8lC,oBAKAmpB,EAAAtpC,GAAA6hC,eAAA,WACA,GAAA35C,GAAA/W,KAIAi6D,GAHAljD,EAAAo5C,OAGAp5C,EAAAkjD,oBACAA,KAEAA,EAAA,WACA,GAAAljD,GAAA/W,KACAmwD,EAAAp5C,EAAAo5C,OACAiE,EAAAr9C,EAAAq9C,YACAC,EAAAt9C,EAAAs9C,YAEA,IAAAA,GACA,GAAAlE,EAAAgF,kBAAAf,GAAA9lC,gBAAA+lC,EAAA/lC,cACA,aAEiB,IAAA6hC,EAAAiF,kBAAAhB,GACjB,QAGA,WAKA,IAAA5kC,GAAAyqC,EAAA3vD,KAAAyM,EACAyY,OAGAzY,EAAAmjD,oBAAA1qC,IAIA2oC,EAAAtpC,GAAAqrC,oBAAA,SAAAx6D,GACA,GAAAqX,GAAA/W,KACA44D,EAAA7hD,EAAA6hD,QAEA,UAAAl5D,GAAA,iBAAAA,GAAA,CACA,GAAAk5D,IAAAl5D,EAEA,MAGAqX,GAAA6hD,SAAAl5D,EAGAA,GAEAqX,EAAA+gD,WAAA3G,OACAp6C,EAAAihD,aAAA3wD,SAGA0P,EAAA+gD,WAAAzwD,OACA0P,EAAAihD,aAAA7G,UAMAgH,EAAAtpC,GAAA6qC,OAAA,SAAAA,GACA,SAAAA,EACA,MAAA15D,MAAAm6D,YAEAn6D,MAAAm6D,aAAAT,GAEAvB,EAAAtpC,GAAAurC,YAAA,SAAAV,GACA,GACAW,IADAr6D,KAAA44D,SACA54D,KAAA83D,YACAE,EAAAh4D,KAAAg4D,YAEA0B,IACAW,EAAAroD,SAAA,UACAgmD,EAAAhmD,SAAA,YAEAqoD,EAAApoD,YAAA,UACA+lD,EAAA/lD,YAAA,WAIAjS,KAAA05D,WAIAvB,EAAAtpC,GAAAzW,SAAA,SAAAu5C,GAEA,SAAAA,EACA,QAAA3xD,KAAA6wD,SAGA,IAAA7wD,KAAA6wD,YAAAc,EAAA,CAKA,GAAA0I,GAAAr6D,KAAA83D,WACAE,EAAAh4D,KAAAg4D,YAGArG,IACA0I,EAAAroD,SAAA,WACAgmD,EAAAhmD,SAAA,aAEAqoD,EAAApoD,YAAA,WACA+lD,EAAA/lD,YAAA,YAIAjS,KAAA6wD,UAAAc,MAIA9rD,EAAA,SAAAs1C,EAAA50C,GAGA,GAAA+zD,GAAA,SAAAnK,EAAAM,EAAAkB,GACA3xD,KAAAmwD,SACAnwD,KAAAywD,OAGAzwD,KAAAd,KAAAyyD,EAAAzyD,KAEAc,KAAAu6D,IAAA5I,EAAA4I,IAEAv6D,KAAAw6D,uBAAA7I,EAAA6I,uBAGAx6D,KAAAy6D,YAAA9I,EAAA8I,YACAz6D,KAAA06D,WAAA/I,EAAA+I,WAGA16D,KAAAuY,OAGA+hD,GAAAzrC,GAAAyrC,EAAA1tD,UAGAuuC,EAAAmf,aAGAz0D,EAAA,SAAAs1C,EAAA50C,GAEA,GAAA+zD,GAAAnf,EAAAmf,QAGAA,GAAAzrC,GAAAtW,KAAA,WACA,GAAAxB,GAAA/W,IAGA+W,GAAA4jD,UAGA5jD,EAAA4iD,YAGA5iD,EAAA6jD,iBAIAN,EAAAzrC,GAAA8rC,QAAA,WACA,GAKAE,GACA5C,EANAlhD,EAAA/W,KACAd,EAAA6X,EAAA7X,KACAq7D,EAAAxjD,EAAAwjD,KAAA,wBACAO,EAAAv0D,EAAA,oDAIAA,GAAA8H,KAAAnP,EAAA,SAAAm1D,EAAA9sD,GACAszD,EAAAN,EAAA/oD,QAAA,oBAAsD6iD,GAAA7iD,QAAA,aAAoCjK,GAC1F0wD,EAAA1xD,EAAA,6BAAA8tD,EAAA,UACA4D,EAAAx7C,OAAAo+C,GACAC,EAAAr+C,OAAAw7C,KAGAlhD,EAAA+jD,SAIAR,EAAAzrC,GAAA8qC,UAAA,WACA,GAAA5iD,GAAA/W,KACAmwD,EAAAp5C,EAAAo5C,OACAM,EAAA15C,EAAA05C,KACA2D,EAAA3D,EAAA2D,YACAoG,EAAAzjD,EAAAyjD,uBACAM,EAAA/jD,EAAA+jD,MAGAL,EAAA1jD,EAAA0jD,YACAC,EAAA3jD,EAAA2jD,UAEAI,GAAA11D,GAAA,mCAAA8D,GAEAuxD,GAAA,kBAAAA,IACAA,EAAAnwD,KAAApB,EAIA,IAAAmrD,GAAA9tD,EAAA2C,EAAAE,eAAA6gD,KAAA,eACAwG,GAAAmI,UAAAzI,EAAA8B,gBAAAuI,EAEArK,EAAAuE,eAAA8F,EAAAtxD,EAAAkrD,EAAAC,GAGAlE,EAAAgE,QAAAjrD,EAAAkrD,EAAAC,GAIAqG,GAAA,kBAAAA,IACAA,EAAApwD,KAAApB,MAMAoxD,EAAAzrC,GAAA+rC,cAAA,WACA,GAAA7jD,GAAA/W,KAGA+6D,EAAAhkD,EAAA+jD,MAAAtqD,IAAA,EAEA2qC,GAAA2T,MAAA1pD,GAAA,iBAAA8D,GACA,GAAA6N,EAAAgjD,UAAA,CAGA,GAIAiB,GAJA5mD,EAAAlL,EAAAxD,OAGA+qD,EAAA15C,EAAA05C,IAGAuK,GADAvK,EAAAmI,SACAnI,EAAAuH,aAAAxnD,IAAA,GAEAigD,EAAAqH,WAAAtnD,IAAA,GAGAwqD,IAAA5mD,GAAA7N,EAAAqsD,SAAAoI,EAAA5mD,IAKA2mD,IAAA3mD,GAAA7N,EAAAqsD,SAAAmI,EAAA3mD,IAMA2C,EAAAo6C,UAGAhW,EAAA6T,QAAAiM,OAAA,WACAlkD,EAAAo6C,SAGAhW,EAAA6T,QAAA5pD,GAAA,oBACA2R,EAAAo6C,YAKAtrD,EAAA,SAAAs1C,EAAA50C,GAEA,GAAA+zD,GAAAnf,EAAAmf,QAGAA,GAAAzrC,GAAAqsC,QAAA,WACA,GAAAnkD,GAAA/W,KACAmwD,EAAAp5C,EAAAo5C,OACA2K,EAAA/jD,EAAA+jD,KAGA3K,GAAA4G,iBAAAt6C,OAAAq+C,GAGA/jD,EAAAokD,UAAA,GAIAb,EAAAzrC,GAAAusC,UAAA,WACA,GAAArkD,GAAA/W,KACA86D,EAAA/jD,EAAA+jD,MACA3K,EAAAp5C,EAAAo5C,OACAM,EAAA15C,EAAA05C,KACAwG,EAAA9G,EAAA+G,cAAAD,eACAoE,EAAA5K,EAAAmI,SAAAnI,EAAAuH,aAAAvH,EAAAqH,WAGAwD,EAAAD,EAAAriC,eAAAiI,WAGAs6B,EAAAD,EAAAzxD,IACA2xD,EAAAF,EAAA9iC,KACAijC,EAAAJ,EAAAriC,eAAAjvB,SACA2xD,EAAAL,EAAAriC,eAAA9f,QAGAyiD,EAAAb,EAAAzB,aAIAuC,EAAAzL,EAAAlrB,IAAAmrB,KAAAiJ,aAKAxvD,EAAA0xD,EAAAE,EACAjjC,EAAAgjC,EAAAE,EAAA,EACAG,EAAA,EAAAH,EAAA,EAGAI,EAAAtjC,EAAAmjC,EAAAC,CACAE,IAAA,KACAD,IAAAC,EAAA,IAGAhB,EAAAzP,KACAxhD,MACA2uB,OACAghC,cAAAqC,IAIA1L,EAAA4L,eACAlyD,GAAAotD,EAAAjtD,SAAAH,IAAAotD,EAAA+E,cAAAlB,EAAA9wD,SAAAH,IAGAixD,EAAAzP,KACAxhD,UAMAywD,EAAAzrC,GAAAxnB,KAAA,WACA,GAAA0P,GAAA/W,KACAywD,EAAA15C,EAAA05C,IAMA,IALA15C,EAAAokD,UAEApkD,EAAAmkD,WAGAnkD,EAAAgjD,UAAA,CAIAhjD,EAAA+jD,MACAzzD,OAGA0P,EAAAqkD,YAGArkD,EAAAgjD,WAAA,EAGAtJ,EAAA2J,aAAA,KAIAE,EAAAzrC,GAAAsiC,KAAA,WACA,GAAAp6C,GAAA/W,KACAywD,EAAA15C,EAAA05C,IACA,IAAA15C,EAAAgjD,UAAA,CAIAhjD,EAAA+jD,MACA3J,OAGAp6C,EAAAgjD,WAAA,EAGAtJ,EAAA2J,aAAA,OAIAv0D,EAAA,SAAAs1C,EAAA50C,GAGA,GAAA01D,GAAA,SAAA9L,EAAAM,EAAAkB,GACA3xD,KAAAmwD,SACAnwD,KAAAywD,OACAzwD,KAAAk8D,SAAAvK,EAAAuK,SACAl8D,KAAAkZ,MAAAy4C,EAAAz4C,OAAA,IACAlZ,KAAA+J,OAAA4nD,EAAA5nD,OACA/J,KAAA84D,SAAAnH,EAAAmH,SAGA94D,KAAAuY,OAGA0jD,GAAAptC,GAAAotC,EAAArvD,UAGAuuC,EAAA8gB,cAGAp2D,EAAA,SAAAs1C,EAAA50C,GAEA,GAAA01D,GAAA9gB,EAAA8gB,SAGAA,GAAAptC,GAAAtW,KAAA,WACA,GAAAxB,GAAA/W,IAGA+W,GAAA4jD,UAGA5jD,EAAA6jD,iBAIAqB,EAAAptC,GAAA8rC,QAAA,WACA,GAAA5jD,GAAA/W,KACAk8D,EAAAnlD,EAAAmlD,SACAhjD,EAAAnC,EAAAmC,MACAnP,EAAAgN,EAAAhN,OACAoyD,EAAA51D,EAAA,sDACA2yD,EAAA3yD,EAAA,mCAEA41D,GAAA9Q,KACAnyC,QACAnP,UAAA,SAEAoyD,EAAA1/C,OAAAy8C,GACAiD,EAAA1/C,OAAAy/C,GAGAnlD,EAAAolD,SACAplD,EAAAmiD,aAIA+C,EAAAptC,GAAA+rC,cAAA,WACA,GAAA7jD,GAAA/W,KAGAo8D,EAAArlD,EAAAolD,OAAA3rD,IAAA,EAEA2qC,GAAA2T,MAAA1pD,GAAA,iBAAA8D,GACA,GAAA6N,EAAAgjD,UAAA,CAGA,GAIAiB,GAJA5mD,EAAAlL,EAAAxD,OAGA+qD,EAAA15C,EAAA05C,IAGAuK,GADAvK,EAAAmI,SACAnI,EAAAuH,aAAAxnD,IAAA,GAEAigD,EAAAqH,WAAAtnD,IAAA,GAGAwqD,IAAA5mD,GAAA7N,EAAAqsD,SAAAoI,EAAA5mD,IAKAgoD,IAAAhoD,GAAA7N,EAAAqsD,SAAAwJ,EAAAhoD,IAMA2C,EAAAo6C,UAGAhW,EAAA6T,QAAAiM,OAAA,SAAA/xD,GACA6N,EAAAo6C,SAGAhW,EAAA6T,QAAA5pD,GAAA,oBACA2R,EAAAo6C,YAKAtrD,EAAA,SAAAs1C,EAAA50C,GAEA,GAAA01D,GAAA9gB,EAAA8gB,SAGAA,GAAAptC,GAAAqsC,QAAA,WACA,GAAAnkD,GAAA/W,KACA84D,EAAA/hD,EAAA+hD,SACA3I,EAAAp5C,EAAAo5C,OACAgM,EAAAplD,EAAAolD,MAGAhM,GAAA4G,iBAAAt6C,OAAA0/C,GAGArD,KAAAxuD,KAAAyM,GAGAA,EAAAokD,UAAA,GAIAc,EAAAptC,GAAAusC,UAAA,WACA,GAAArkD,GAAA/W,KACAm8D,EAAAplD,EAAAolD,OACAjD,EAAAniD,EAAAmiD,UACA/I,EAAAp5C,EAAAo5C,OACA8G,EAAA9G,EAAA+G,cAAAD,eACAxG,EAAA15C,EAAA05C,KACA4K,EAAA5K,EAAAmI,SAAAnI,EAAAuH,aAAAvH,EAAAqH,WAGAwD,EAAAD,EAAAriC,eAAAiI,WAGAs6B,EAAAD,EAAAzxD,IACA2xD,EAAAF,EAAA9iC,KACAijC,EAAAJ,EAAAriC,eAAAjvB,SACA2xD,EAAAL,EAAAriC,eAAA9f,QAGAmjD,EAAAF,EAAA9C,aAIAuC,EAAAzL,EAAAlrB,IAAAmrB,KAAAiJ,aAKAxvD,EAAA0xD,EAAAE,EACAjjC,EAAAgjC,EAAAE,EAAA,EACAG,EAAA,EAAAQ,EAAA,EACAC,EAAAT,CAGA,GAAAA,EAAArjC,EAAA,KACAqjC,EAAA,GAAArjC,EAAA,IAIA,IAAAsjC,GAAAtjC,EAAA6jC,EAAAR,EAAAD,CACAE,IAAA,KACAD,IAAAC,EAAA,IAIAK,EAAA9Q,KACAxhD,MACA2uB,OACAghC,cAAAqC,IAIA1L,EAAA4L,eACAlyD,GAAAotD,EAAAjtD,SAAAH,IAAAotD,EAAA+E,cAAAG,EAAAnyD,SAAAH,IAGAsyD,EAAA9Q,KACAxhD,SAKAqvD,EAAA7N,KACAmO,cAAA8C,EAAAT,EAAA,KAKAI,EAAAptC,GAAA0tC,gBAAA,WACAv8D,KACAm8D,OACA5R,KAAA,6BAAAl8C,KAAA,WACA,GAAAmuD,GAAAj2D,EAAAvG,KACA,UAAAw8D,EAAAvS,KAAA,YAEA,MADAuS,GAAA9S,SACA,KAMAuS,EAAAptC,GAAAxnB,KAAA,WACA,GAAA0P,GAAA/W,KACAywD,EAAA15C,EAAA05C,IAMA,IALA15C,EAAAokD,UAEApkD,EAAAmkD,WAGAnkD,EAAAgjD,UAAA,CAIA,GAAAoC,GAAAplD,EAAAolD,MACAA,GAAA90D,OAGA0P,EAAAqkD,YAGArkD,EAAAgjD,WAAA,EAGAtJ,EAAA2J,aAAA,GAEAjf,EAAA8T,SAEAl4C,EAAAwlD,kBAGAphB,EAAAshB,kBAAAN,KAKAF,EAAAptC,GAAAsiC,KAAA,WACA,GAAAp6C,GAAA/W,KACAywD,EAAA15C,EAAA05C,IACA,IAAA15C,EAAAgjD,UAAA,CAIAhjD,EAAAolD,OACAhL,OAGAp6C,EAAAgjD,WAAA,EAGAtJ,EAAA2J,aAAA,OAIAv0D,EAAA,SAAAs1C,EAAA50C,GAGA,GAAAm2D,GAAA,SAAAvM,EAAAM,EAAAkB,GACA3xD,KAAAmwD,SACAnwD,KAAAywD,OACAzwD,KAAAk8D,SAAAvK,EAAAuK,SAEAl8D,KAAAuY,OAGAmkD,GAAA7tC,GAAA6tC,EAAA9vD,UAGAuuC,EAAAuhB,UAGA72D,EAAA,SAAAs1C,EAAA50C,GAEA,GAAAm2D,GAAAvhB,EAAAuhB,KAEAA,GAAA7tC,GAAAtW,KAAA,WACA,GAAAxB,GAAA/W,IAGA+W,GAAA4lD,UAGA5lD,EAAA6jD,iBAIA8B,EAAA7tC,GAAA8tC,QAAA,WACA,GAAA5lD,GAAA/W,KACAk8D,EAAAnlD,EAAAmlD,SACAU,EAAAr2D,EAAA,wCACAs2D,EAAAt2D,EAAA,8FAEAq2D,GAAAngD,OAAAogD,GACAD,EAAAngD,OAAAy/C,GAGAnlD,EAAA6lD,SACA7lD,EAAA8lD,UAIAH,EAAA7tC,GAAA+rC,cAAA,WACA,GAAA7jD,GAAA/W,KACA68D,EAAA9lD,EAAA8lD,OACA3L,EAAAn6C,EAAA6lD,OAAApsD,IAAA,EAGAqsD,GAAAj3D,MAAA,WACAmR,EAAAo6C,SAIAhW,EAAA2T,MAAA1pD,GAAA,iBAAA8D,GACA,GAAA6N,EAAAgjD,UAAA,CAGA,GAIAiB,GAJA5mD,EAAAlL,EAAAxD,OAGA+qD,EAAA15C,EAAA05C,IAEAA,MAEAuK,EADAvK,EAAAmI,SACAnI,EAAAuH,aAAAxnD,IAAA,GAEAigD,EAAAqH,WAAAtnD,IAAA,MAGA4D,GAAA7N,EAAAqsD,SAAAoI,EAAA5mD,KAMA88C,IAAA98C,GAAA7N,EAAAqsD,SAAA1B,EAAA98C,IAMA2C,EAAAo6C,aAKAtrD,EAAA,SAAAs1C,EAAA50C,GAEA,GAAAm2D,GAAAvhB,EAAAuhB,KAGAA,GAAA7tC,GAAAqsC,QAAA,WACA,GAAAnkD,GAAA/W,KACAmwD,EAAAp5C,EAAAo5C,OACAyM,EAAA7lD,EAAA6lD,MAGAA,GAAAvR,IAAA,UAAA8E,EAAA78C,OAAAwpD,OAAA,OAGA3hB,EAAA2T,MAAAryC,OAAAmgD,GAGA7lD,EAAAokD,UAAA,GAIAuB,EAAA7tC,GAAAusC,UAAA,WACA,GAAArkD,GAAA/W,KACA48D,EAAA7lD,EAAA6lD,OACA/yD,EAAA+yD,EAAA5yD,SAAAH,IACAqP,EAAA0jD,EAAAvD,aACAtvD,EAAA6yD,EAAAZ,cACAH,EAAA,EAAA3iD,EAAA,EACA6jD,EAAA,EAAAhzD,EAAA,EACAizD,EAAA7hB,EAAA6T,QAAAllD,WAGAC,GAAA,EAAAF,IACAkzD,EAAA,EAAAlzD,GAGA+yD,EAAAvR,KACAmO,cAAAqC,EAAA,KACAoB,aAAAF,EAAAC,EAAA,QAKAN,EAAA7tC,GAAAxnB,KAAA,WACA,GAAA0P,GAAA/W,KACAywD,EAAA15C,EAAA05C,IAMA,IALA15C,EAAAokD,UAEApkD,EAAAmkD,WAGAnkD,EAAAgjD,UAAA,CAIAhjD,EAAAgjD,WAAA,CAEAhjD,GAAA6lD,OACAv1D,OAGA0P,EAAAqkD,YAGA3K,KAAA2J,aAAA,KAIAsC,EAAA7tC,GAAAsiC,KAAA,WACA,GAAAp6C,GAAA/W,KACAywD,EAAA15C,EAAA05C,IACA,IAAA15C,EAAAgjD,UAAA,CAIAhjD,EAAAgjD,WAAA,CAGAhjD,GAAA6lD,OACAzL,OAGAV,KAAA2J,aAAA,OAIAv0D,EAAA,SAAAs1C,EAAA50C,GAGA,GAAA22D,GAAA,SAAA/M,GACAnwD,KAAAmwD,SAGAnwD,KAAAuY,OAGA2kD,GAAAruC,GAAAquC,EAAAtwD,UAGAuuC,EAAA+hB,QAGAr3D,EAAA,SAAAs1C,EAAA50C,GAEA,GAAA22D,GAAA/hB,EAAA+hB,GAGAA,GAAAruC,GAAAtW,KAAA,WACA,GAIA63C,GAJAr5C,EAAA/W,KACAmwD,EAAAp5C,EAAAo5C,OACAzB,EAAAyB,EAAAzB,gBACA6B,EAAAJ,EAAAG,cAGA,SAAA5B,EAAAl+C,IAAA,GAAAy8B,UAEAmjB,EAAA1B,EACA0B,EAAAp+C,SAAA,kBACAo+C,EAAAnG,KAAA,2BAGAmG,EAAA7pD,EACA,sDACAgqD,EACA,UAKAJ,EAAAL,MAAA,WACA/4C,EAAAk+C,iBAGAl+C,EAAAq5C,OAGAr5C,EAAAomD,qBAGApmD,EAAAqmD,kBAGArmD,EAAAsmD,mBAGAtmD,EAAAumD,eAGAvmD,EAAAwmD,kBAGAxmD,EAAAymD,iBAGAzmD,EAAA0mD,YAIAP,EAAAruC,GAAAsuC,mBAAA,WACA,GAGAO,GAHA3mD,EAAA/W,KACAmwD,EAAAp5C,EAAAo5C,OACAC,EAAAr5C,EAAAq5C,IAGAA,GAAAhrD,GAAA,mBAAA8D,GACA,OAAAA,EAAA1D,QAAA,CAIA,sBADAe,EAAA6f,KAAAgqC,EAAAnP,OAAA3yB,mBAGAplB,GAAA8lC,qBAFA,MAOAohB,EAAAhrD,GAAA,iBAAA8D,GACA,OAAAA,EAAA1D,QAAA,CAGA,GAAAm4D,GAAAp3D,EAAA6f,KAAAgqC,EAAAnP,OAAA3yB,cAEAqvC,IAAA,SAAAA,IAEAD,EAAAn3D,EAAA,gBACA6pD,EAAAnP,KAAA,IACAmP,EAAA3zC,OAAAihD,GACAvN,EAAA6C,uBAAA0K,EAAAltD,IAAA,SAMA0sD,EAAAruC,GAAAuuC,gBAAA,WAOA,QAAAQ,KACA,GAAAC,EAAA,CAIA,GAAAC,GAAAv3D,EAAA,MAAAs3D,EAAA5c,OAAA,OACA4c,GAAA3J,MAAA4J,GACAD,EAAA32D,UAbA,GAKA22D,GAJA9mD,GADAokC,EAAA7nC,OAAAkiD,UACAx1D,MACAmwD,EAAAp5C,EAAAo5C,OACAC,EAAAr5C,EAAAq5C,IAaAA,GAAAhrD,GAAA,yBAAA8D,GACA,QAAAA,EAAA1D,QAAA,CAIA,GAEAu4D,GACAD,EAHA9J,EAAA7D,EAAA2B,eACAiC,EAAA5D,EAAA8D,aAAAD,EAIA,KAAAD,EAAA,CAGA,KADAA,EAAA5D,EAAA2E,sBAAAd,EAAA,QAEA,MAEA+J,GAAAx3D,EAAAwtD,GAEA,YAAA7qD,EAAAjE,OAEA44D,EAAAE,EACAjvD,WAAA8uD,EAAA,IAGA,UAAA10D,EAAAjE,OAEA64D,EAAAv3D,EAAA,MAAAw3D,EAAA9c,OAAA,QACA8c,EAAA7J,MAAA4J,GACAC,EAAA72D,SAGAipD,EAAA6C,uBAAA8K,EAAAttD,IAAA,kBAOA0sD,EAAAruC,GAAAwuC,iBAAA,WACA,GAEAW,GAFAjnD,EAAA/W,KACAowD,EAAAr5C,EAAAq5C,IAEAA,GAAAhrD,GAAA,iBAAA8D,GACA,KAAAA,EAAA1D,UAGAw4D,IACAA,EAAA,WACAjnD,EAAAm+C,mBAGApmD,WAAAkvD,OAKAd,EAAAruC,GAAAyuC,aAAA,WACA,GAAAvmD,GAAA/W,KACAmwD,EAAAp5C,EAAAo5C,MACAp5C,GAAAq5C,KAEAhrD,GAAA,mBAAA8D,GACA,IAAAA,EAAA1D,SAKA2qD,EAAAoE,sBAAA,eACApE,EAAAgE,QAAAjrD,EAAA,4CAMAg0D,EAAAruC,GAAA0uC,gBAAA,WA6GA,QAAAS,GAAAzP,GACA,GAAAA,KAAAngC,UAAAmgC,EAAAthB,SAAA,CAGA,GAAAuhB,GAGAyP,EAFAhxB,EAAAshB,EAAAthB,SAAA3e,cACAF,EAAAmgC,EAAAngC,QAIA,QAAAA,GAAA,IAAAA,EAAA,CAOA,GAHAogC,EAAAjoD,EAAAgoD,GAGA,QAAAthB,EAWA,MAVAgxB,MACA13D,EAAA8H,KAAAkgD,EAAA2P,WAAA,SAAAh+D,EAAA6L,GAGAkyD,EAAArtD,KAAA7E,SAGAxF,GAAA8H,KAAA4vD,EAAA,WACAD,EAAAh+D,OAKA,IAAAm+D,EAAAp+D,QAAAktC,IAAA,EAEAmxB,GAAAloC,EAAAq4B,OACa,QAAAngC,EAEbgwC,GAAA,MAAA7P,EAAAoF,YAAA,WACa,WAAA1mB,EAEbmxB,GAAA,YAEA,CAEA,2DAAAr+D,QAAAktC,IAAA,EACA,MAGAuhB,GAAAjoD,EAAA83D,EAAA9P,IAEA6P,GAAA73D,EAAA,SAAAkW,OAAA+xC,EAAArhB,SAAA8T,UAKA,QAAA/qB,GAAAq4B,GACA,GACAC,GADAvhB,EAAAshB,EAAAthB,SAAA3e,cAEAgwC,EAAA,GACAC,EAAA,EAEA,sBAAAx+D,QAAAktC,IAAA,GAGAuhB,EAAAjoD,EAAAgoD,GACA,IAAAthB,EAAA,IAAAuhB,EAAAxuC,OAAA,KAAAitB,EAAA,MAEa,8BAAAltC,QAAAktC,IAAA,GAGbshB,EAAA8P,EAAA9P,GACAC,EAAAjoD,EAAAgoD,GACA+P,EAAA9P,EAAAvN,OAGAqd,IAAA9sD,QAAA,mBAAA3K,GACA,eAAAA,GAAA,IAAAA,EAAA9G,QAAA,YAAA8G,EAAA9G,QAAA,SACA8G,EAEA,KAIA,IAAAomC,EAAA,IAAAqxB,EAAA,KAAArxB,EAAA,MAEa,WAAAltC,QAAAktC,IAAA,GAGbuhB,EAAAjoD,EAAAgoD,GACAC,EAAA1K,WAAAz1C,KAAA,WACA,GAAAmwD,GAAAj4D,EAAA83D,EAAAr+D,OACAihD,EAAAud,EAAAvd,MAEAA,KAAAzvC,QAAA,mBAAA3K,GACA,eAAAA,GAAA,IAAAA,EAAA9G,QAAA,YAAA8G,EAAA9G,QAAA,SACA8G,EAEA,KAIA03D,GAAA,OAAAtd,EAAA,UAEA,IAAAhU,EAAA,IAAAsxB,EAAA,KAAAtxB,EAAA,MAKAuhB,EAAAjoD,EAAA83D,EAAA9P,IACAhoD,EAAA,SAAAkW,OAAA+xC,GAAAvN,QAKA,QAAAod,GAAA9P,GACA,GAAA9pD,GAAA8pD,EAAAkQ,eACAC,KACAC,GAAA,gDAGAp4D,GAAA8H,KAAA5J,EAAA,SAAA/B,EAAAunD,GACAA,GAAA,IAAAA,EAAA77B,UACAswC,EAAA9tD,KAAAq5C,EAAAhd,YAIA1mC,EAAA8H,KAAAqwD,EAAA,SAAAh8D,EAAAunD,GACA0U,EAAA5+D,QAAAkqD,GAAA,GAEAsE,EAAAqQ,gBAAA3U,IAMA,IAAAnG,GAAAyK,EAAA2P,UAOA,OANApa,GAAAviD,QACAgF,EAAA8H,KAAAy1C,EAAA,SAAAphD,EAAAhE,GACA2/D,EAAA3/D,KAIA6vD,EAzPA,GAAAx3C,GAAA/W,KACAmwD,EAAAp5C,EAAAo5C,OACAiO,EAAA,GACAhO,EAAAr5C,EAAAq5C,KACAoF,EAAArF,EAAA78C,OAAAkiD,UACA2I,EAAA3I,EAAAlnD,MAAA,IAEA8hD,GAAAhrD,GAAA,iBAAA8D,GACA,GAAAinD,EAAA78C,OAAAurD,YAAA,CAKA,GAAAC,GAAA3O,EAAA2B,eAAA7kB,QACA,WAAA6xB,GAAA,OAAAA,EAAA,CAKAV,EAAA,EAEA,IAAAW,GAAAC,EAAAC,EACA//D,EAAAgK,EAAAg2D,eAAAh2D,EAAAi2D,cAAAD,cACAE,EAAAp+D,OAAAk+D,aAEA,IAAA/O,EAAA78C,OAAA+rD,UAAA,CAGA,GAAAngE,KAAAogE,QAEAP,EAAA7/D,EAAAogE,QAAA,kBACiB,KAAAF,MAAAE,QAKjB,MAHAP,GAAAK,EAAAE,QAAA,QAOAP,IACAX,EAAA,MAAAW,EAAA,YAMA,IAAA7/D,KAAAogE,QAIAP,EAAA7/D,EAAAogE,QAAA,aAGAL,EAAAF,EAAAzwD,MAAA,WACA,IAAA2wD,EAAA19D,SACAw9D,EAAAE,EAAA,IAGAF,GAEAC,EAAAz4D,EAAA,QAAAw4D,EAAA,UAEAf,EAAAgB,EAAAxuD,IAAA,MAGAuuD,EAAA7/D,EAAAogE,QAAA,iBAGAP,IAAAvtD,QAAA,iBACAA,QAAA,aACAA,QAAA,aACAA,QAAA,iBAEA4sD,EAAA,MAAAW,EAAA,OAGAX,IAAA5sD,QAAA,sCAAAmJ,EAAA4kD,GACA,qBAAAA,EAAA,qBAAAA,EAAA,cAKiB,KAAAH,MAAAE,QAWjB,MARA,MADAlB,EAAAgB,EAAAE,QAAA,SAEA,MAGAlB,GAAA,MAAAA,EAAA,OACAA,IAAA5sD,QAAA,GAAA6I,QAAA,qBAQA+jD,IACAjO,EAAAgE,QAAAjrD,EAAA,aAAAk1D,GAGArnD,EAAAyoD,0BAuJAtC,EAAAruC,GAAA2uC,eAAA,WACA,GAAAzmD,GAAA/W,KAEAowD,GADAr5C,EAAAo5C,OACAp5C,EAAAq5C,MACAoF,EAAAra,EAAA7nC,OAAAkiD,UACA2I,EAAA3I,EAAAlnD,MAAA,KAEAmxD,GADAtB,EAAA58D,UAIAgF,GAAA8H,KAAA8vD,EAAA,SAAAhuC,EAAAtpB,GACA,GAAA64D,GAAA,UAAA74D,EAAA,IACA44D,GAAA7uD,KAAA,GAAAyJ,QAAAqlD,EAAA,SAIAD,EAAA7uD,KAAA,GAAAyJ,QAAA,qBAGAolD,EAAA7uD,KAAA,GAAAyJ,QAAA,qBAGAolD,EAAA7uD,KAAA,GAAAyJ,QAAA,uBAGA+1C,EAAAuP,WAAA,WACA,GAAAC,GAAAr5D,EAAA,SACA06C,EAAAmP,EAAAnP,MAgBA,OAbAA,KAAAzvC,QAAA,cAGAjL,EAAA8H,KAAAoxD,EAAA,SAAAtvC,EAAAuvC,GACAA,EAAAzsD,KAAAguC,KAGAA,IAAAzvC,QAAAkuD,EAAA,SAAAG,EAAAh5D,GACA,aAAAA,EAAA,SAIA+4D,EAAA3e,QACA2e,EAAA5/C,SAKAk9C,EAAAruC,GAAA4uC,SAAA,WACA,GAAA1mD,GAAA/W,KACAmwD,EAAAp5C,EAAAo5C,OACAC,EAAAr5C,EAAAq5C,KACA1B,EAAAyB,EAAAzB,gBACAD,EAAA0B,EAAA1B,aAEA2B,GAAAnP,KAAA,SAAAA,GACA,GAAAzxB,EAwBA,IAtBA,QAAAi/B,IAEAj/B,EAAAjpB,EAAAsoB,GAAAoyB,KAAA32C,KAAA8lD,EAAAnP,QAKAt4B,KAAAs4B,GAEAzxB,EAAAjpB,EAAAsoB,GAAAoyB,KAAA32C,KAAA8lD,GAIA5gC,IAAAhe,QAAA,mCAAAugB,EAAAE,EAAA6tC,GACA,MAAA7tC,GAAA,KAAA6tC,EAAAtuD,QAAA,QAAsD,aAItDge,EAAAjpB,EAAAsoB,GAAAoyB,KAAA32C,KAAA8lD,EAAAnP,GACAyN,EAAA2B,IAAApP,QAGAt4B,KAAAs4B,EACA,MAAAzxB,EAGA4gC,GAAA2P,aAMAl6D,EAAA,SAAAs1C,EAAA50C,GAEA,GAAA22D,GAAA/hB,EAAA+hB,IAEA8C,EAAA,+CAGA9C,GAAAruC,GAAA3qB,OAAA,WACA,GAAAksD,GAAApwD,KAAAowD,IACApwD,MAAAmwD,OAAA4G,iBACAt6C,OAAA2zC,IAIA8M,EAAAruC,GAAAoxC,WAAA,WACA,GAAA9P,GAAAnwD,KAAAmwD,OACAC,EAAApwD,KAAAowD,KACA8P,EAAA/P,EAAAzB,gBAAA3kD,SACA0xD,EAAAtL,EAAA+G,cAAAntD,SACAo2D,EAAAD,EAAAzE,CAGA0E,KAAA,MAAAA,EAEA/P,EAAArmD,OAAAo2D,GAGAhQ,EAAA+P,uBAGAlgE,KAAAogE,cAAAD,EAAA1E,IAIAyB,EAAAruC,GAAAuxC,cAAA,SAAAD,EAAA1E,GACA,GAAAtL,GAAAnwD,KAAAmwD,OACA8G,EAAA9G,EAAA+G,cAAAD,eACA7G,EAAApwD,KAAAowD,KACAiQ,EAAA95D,EAAA,QAGA,IAAAvF,OAAA82B,kBAAA,cAAA92B,QAAA82B,iBAAAs4B,EAAA5/C,IAAA,KAEA,GAAA8vD,GAAA31C,SAAAwlC,EAAAzB,gBAAArD,IAAA,cACA,IAAA34B,MAAA4tC,GACA,MAIA,IAAAnQ,EAAAP,MAAA2Q,WAEA,WADAplB,GAAA7zC,KAAA,gDAKA6oD,GAAAqQ,cAAA,EAGAH,EAAAhV,KACAoV,aAAAH,EAAA7E,EAAA,KACAiF,aAAA,SAEAtQ,EAAA/E,KACAthD,OAAA,OACA22D,aAAA,UACAC,aAAAR,EAAA,OAIAE,EAAAj7D,GAAA,oBACAgrD,EAAA13B,SAAA5uB,YAAA,GACAmtD,EAAAjlD,SAAA,0BAEAilD,EAAAhlD,YAAA,4BAKAm+C,EAAAwQ,KAAAP,KAKAnD,EAAAruC,GAAAgyC,mBAAA,WAMA,QAAAhW,KACAsF,EAAAmC,gBAIA,QAAAwO,KAEAvrD,KAAAmxC,MAAAqa,EAAA,MAIAA,EAAAxrD,KAAAmxC,MACAmE,KAIA,QAAAmW,KAEAvH,GACAtY,aAAAsY,GAEAA,EAAA3qD,WAAA+7C,EAAA,KA1BA,GAEA4O,GAFArJ,EAAApwD,KAAAowD,KACAD,EAAAnwD,KAAAmwD,OAEA4Q,EAAAxrD,KAAAmxC,KA2BA0J,GAAAhrD,GAAA46D,EAAA,uBAAA92D,GAGA43D,IAGAE,MAIA5Q,EAAAhrD,GAAA,uBACAgrD,EAAAhrD,GAAA,oCAAA8D,GAEA43D,IACAE,IAGA7Q,EAAAK,sBAESprD,GAAA,qBACTgrD,EAAA6Q,IAAA,+BAMA/D,EAAAruC,GAAAqyC,iBAAA,WAMA,QAAAC,KACA,GAAA9Q,GAAAD,EAAAnP,MACAnnC,KAAAu2C,IAMAF,EAAAj4C,UAAA,kBAAAi4C,GAAAj4C,UACAi4C,EAAAj4C,SAAA5N,KAAA6lD,GAIAA,EAAAD,cAGAp2C,EAAAu2C,GArBA,GAEAoJ,GAAA3/C,EAFAs2C,EAAApwD,KAAAowD,KACAD,EAAAnwD,KAAAmwD,MAwBAC,GAAAhrD,GAAA46D,EAAA,SAAA92D,GAEA,MAAA4Q,IACAA,EAAAs2C,EAAAnP,QAIAwY,GACAtY,aAAAsY,GAEAA,EAAA3qD,WAAAqyD,EAAA,QAKAjE,EAAAruC,GAAAuyC,qBAAA,WACA,GAAAhR,GAAApwD,KAAAowD,KACAD,EAAAnwD,KAAAmwD,MAGAC,GAAAhrD,GAAA46D,EAAA,SAAA92D,GACAinD,EAAAK,qBAKA0M,EAAAruC,GAAAomC,aAAA,WACA,GAAA7E,GAAApwD,KAAAowD,KACAiR,EAAAjR,EAAAtM,UAEA,QAAAud,EAAA9/D,OAEA,WADA6uD,GAAA3zC,OAAAlW,EAAA,eAIA,UAAAA,EAAA6f,KAAAi7C,EAAAC,OAAArgB,QAAA3yB,eACA8hC,EAAA3zC,OAAAlW,EAAA,iBAKA22D,EAAAruC,GAAAqmC,eAAA,WACA,GAKA7zD,GAAAkgE,EALAnR,EAAApwD,KAAAowD,KACAoR,EAAApR,EAAAtM,SAAA,OACA7e,EAAAmrB,EAAA,GACA8N,EAAAj5B,EAAAi5B,WACAuD,EAAAvD,EAAA38D,MASA,KALAigE,EAAAjgE,QAAAigE,EAAAnzD,KAAA,WACA9H,EAAAvG,MAAA4gE,KAAA,SAIAv/D,EAAA,EAAmBA,EAAAogE,EAAoBpgE,IACvCkgE,EAAArD,EAAA78D,GACA,IAAAkgE,EAAAnzC,UAAAmzC,EAAA5N,aAAAptD,EAAA6f,KAAAm7C,EAAA5N,cACAptD,EAAAg7D,GAAAX,KAAA,QAMA1D,EAAAruC,GAAA2wC,kBAAA,WACAx/D,KAAAowD,KACA7F,KAAA,KAEAl8C,KAAA,WACA,GAGA8kD,GAHAuK,EAAAn3D,EAAAvG,MACAqhE,EAAA3D,EAAA5Z,WACA2d,EAAAJ,EAAA9/D,MAKA,KAHAgF,EAAA6f,KAAAs3C,EAAAzc,QAKA,WADAyc,GAAAx2D,QAKA,KAAAu6D,IACAtO,EAAAkO,EAAAjO,QACAD,EAAA3iD,IAAA,UAAA2iD,EAAA3iD,IAAA,GAAAy8B,UACAywB,EAAAzc,KAAAkS,EAAAlS,YAOAic,EAAAruC,GAAA/kB,UAAA,SAAAumD,GACA,GAAAt5C,GAAA/W,KACAmwD,EAAAp5C,EAAAo5C,OACAC,EAAAr5C,EAAAq5C,IAEA,OAAAD,GAAAqQ,aACApQ,EAAA13B,SAAA5uB,UAAAumD,GAEAD,EAAAtmD,UAAAumD,IAKA6M,EAAAruC,GAAA6yC,kBAAA,WAQA,QAAAC,GAAAC,GACAC,IACA9K,EAAAt6C,OAAAu8C,GACA6I,GAAA,EAGA,IAGA93D,IAHAqmD,EAAAnvB,WAAAp3B,IACAumD,EAAA4L,cAEA4F,EAAA73D,UACAF,EAAA+3D,EAAA3gC,WAAAp3B,IACAkzD,EAAApyC,SAAAi3C,EAAAvW,IAAA,kBACAyW,EAAAn3C,SAAAi3C,EAAAvW,IAAA,mBACA0W,EAAAp3C,SAAAi3C,EAAAvW,IAAA,qBACA2W,EAAAr3C,SAAAi3C,EAAAvW,IAAA,qBAIA6L,GAAAntD,QAkBAivD,GAAA3N,KACAthD,SAAA+3D,EAAA/E,EAAAiF,EAAAD,EACAl4D,MAAAqtD,EAAAntD,WAGA,QAAAk4D,KACAJ,IAGA7I,EAAA9xD,SACA26D,GAAA,GArDA,GAAA1R,GAAAnwD,KAAAmwD,OACA4G,EAAA5G,EAAA4G,iBACAG,EAAA/G,EAAA+G,cACA9G,EAAApwD,KAAAowD,KACA4I,EAAAzyD,EAAA,6BACAs7D,GAAA,CAmDAzR,GAAAhrD,GAAA,oEAAA8D,GACAy4D,EAAAp7D,EAAA2C,EAAAE,kBACShE,GAAA,wBACT68D,SAKAp8D,EAAA,SAAAs1C,EAAA50C,GAGAqoB,MAAAhiB,UAAA7M,UAEA6uB,MAAAhiB,UAAA7M,QAAA,SAAAwuD,GAGA,IAFA,GAAAltD,GAAA,EACAE,EAAAvB,KAAAuB,OACiBF,EAAAE,EAAUF,IAC3B,GAAArB,KAAAqB,KAAAktD,EACA,MAAAltD,EAGA,WAGAutB,MAAAhiB,UAAAq2B,YAAA,SAAAsrB,GACA,GAAAhtD,GAAAvB,KAAAuB,MACA,KAAAA,GAAA,EAAoCA,GAAA,EAAaA,IACjD,GAAAvB,KAAAuB,KAAAgtD,EACA,MAAAhtD,EAGA,YAKAgU,KAAAmxC,MACAnxC,KAAAmxC,IAAA,WACA,UAAAnxC,OAAA2sD,WAKA,IAAA15D,GAAAxH,OAAAwH,QACA4oD,EAAA,YACA7qD,GAAA8H,MAAA,sCAAA3L,EAAAhE,GAEAy8C,EAAAz8C,GADA,MAAA8J,EACA4oD,EAEA,SAAAzxD,GAEAw7C,EAAA7nC,QAAA6nC,EAAA7nC,OAAA6uD,UACA35D,EAAA9J,GAAA,iBAAAiB,MAOAw7C,EAAAvrB,OAAA,WACA,MAAA7c,MAAA6c,SAAAvB,WAAArlB,MAAA,IAIAmyC,EAAAj2C,YAAA,eAAAoxB,UAAAC,cAAA,SAGA4kB,EAAAshB,kBAAA,SAAA2F,GACAjnB,EAAAj2C,aAGAk9D,EAAA7X,KAAA,sBAAAl8C,KAAA,WACA,GAAAmuD,GAAAj2D,EAAAvG,MACAkF,EAAAs3D,EAAAvS,KAAA,cAEA,MAAAuS,EAAAnM,QACAmM,EAAAnR,IAAA,gBACAmR,EAAAnM,IAAAnrD,GAEAs3D,EAAAp3D,GAAA,iDACAo3D,EAAAnM,IAAA,IACAmM,EAAAnR,IAAA,gBACAmR,EAAAyE,IAAA,+CAOAp7D,EAAA,SAAAs1C,EAAA50C,GACA40C,EAAAknB,SAGAlnB,EAAAknB,MAAA,UACAC,KAAA,KACAC,UAAA,MACAC,OAAA,KACAC,UAAA,OACAC,QAAA,MACAC,cAAA,MACAC,OAAA,OACAh+B,OAAA,KACAi+B,MAAA,KACAC,WAAA,KACAC,SAAA,KACAC,KAAA,KACAC,UAAA,OACAC,YAAA,OACAC,UAAA,MACAC,YAAA,KACAC,WAAA,MACA9D,KAAA,KACAv/C,KAAA,KACAwkC,OAAA,KACAoF,OAAA,KACA0Z,OAAA,OACAC,MAAA,KACAC,QAAA,KACAzqD,IAAA,KACA0qD,UAAA,OACAC,QAAA,OACAC,MAAA,KACAzqD,MAAA,IACAnP,OAAA,IACAlK,SAAA,KACA+jE,QAAA,MACAC,eAAA,OACAC,WAAA,OACAC,cAAA,OACAC,uBAAA,eACAC,WAAA,OACA/N,KAAA,KACAD,KAAA,KACAsK,WAAA,KACA2D,SAAA,QAIA/oB,EAAAknB,MAAA8B,IACA7B,KAAA,OACAC,UAAA,YACAC,OAAA,SACAC,UAAA,QACAC,QAAA,YACAC,cAAA,gBACAC,OAAA,SACAh+B,OAAA,WACAi+B,MAAA,QACAC,WAAA,cACAC,SAAA,YACAC,KAAA,OACAC,UAAA,eACAC,YAAA,iBACAC,UAAA,aACAC,YAAA,eACAC,WAAA,cACA9D,KAAA,cACAv/C,KAAA,OACAwkC,OAAA,SACAoF,OAAA,SACA0Z,OAAA,SACAC,MAAA,QACAC,QAAA,WACAzqD,IAAA,QACA0qD,UAAA,SACAC,QAAA,OACAC,MAAA,QACAzqD,MAAA,QACAnP,OAAA,SACAlK,SAAA,WACA+jE,QAAA,UACAC,eAAA,SACAC,WAAA,UACAC,cAAA,QACAC,uBAAA,mCACAC,WAAA,cACA/N,KAAA,OACAD,KAAA,OACAsK,WAAA,cACA2D,SAAA,eAIAr+D,EAAA,SAAAs1C,EAAA50C,GAEA40C,EAAA7nC,UAGA6nC,EAAA7nC,OAAAwpD,OAAA,IAGA3hB,EAAA7nC,OAAA6uD,UAAA,EAGAhnB,EAAA7nC,OAAA8wD,UAAA,EAGAjpB,EAAA7nC,OAAA+wD,UAAA,EAGAlpB,EAAA7nC,OAAAkiD,UAAA,iDAGAra,EAAA7nC,OAAAgxD,KAAAnpB,EAAAknB,MAAA,SAGAlnB,EAAA7nC,OAAAs8C,OAEA,SAEA,OAEA,SACA,gBAoBA,OAWAzU,EAAA7nC,OAAAixD,QAEAC,UAAA,MACAC,UAAA,KACAC,UAAA,KACAC,UAAA,MACAC,UAAA,MACAC,UAAA,KACAC,UAAA,MACAC,UAAA,MACAC,UAAA,KACAC,UAAA,MACAC,UAAA,MACAC,UAAA,MACAC,UAAA,KACAC,UAAA,KACAC,UAAA,KACAC,UAAA,MAIApqB,EAAA7nC,OAAAkyD,SACA,sBACA,4BACA,uCACA,kEAIArqB,EAAA7nC,OAAAmyD,WAEA5xC,EAAA,OACAC,EAAA,OACAqkB,EAAA,OACAC,EAAA,OACAG,EAAA,OACAC,EAAA,OACAljB,EAAA,QAIA6lB,EAAA7nC,OAAAoyD,aAAA,OACAvqB,EAAA7nC,OAAAqyD,UAKAC,OACAr+D,MAAA,OACArI,OAEA2mE,KAAA,uFACAnnE,MAAA,UAGAmnE,KAAA,qFACAnnE,MAAA,SAGAmnE,KAAA,oFACAnnE,MAAA,SAGAmnE,KAAA,oFACAnnE,MAAA,SAGAmnE,KAAA,iFACAnnE,MAAA,SAGAmnE,KAAA,iFACAnnE,MAAA,SAGAmnE,KAAA,oFACAnnE,MAAA,SAGAmnE,KAAA,qFACAnnE,MAAA,SAGAmnE,KAAA,kFACAnnE,MAAA,UAGAmnE,KAAA,gFACAnnE,MAAA,QAGAmnE,KAAA,oFACAnnE,MAAA,SAGAmnE,KAAA,mFACAnnE,MAAA,SAGAmnE,KAAA,qFACAnnE,MAAA,SAGAmnE,KAAA,qFACAnnE,MAAA,WAOAy8C,EAAA7nC,OAAAwyD,MAAA,2BAIA3qB,EAAA7nC,OAAAyyD,cAAA,EAEA5qB,EAAA7nC,OAAA0yD,cAAA,IAEA7qB,EAAA7nC,OAAA2yD,gBAKA9qB,EAAA7nC,OAAA4yD,cAAA,EAKA/qB,EAAA7nC,OAAA6yD,gBAKAhrB,EAAA7nC,OAAA8yD,iBAKAjrB,EAAA7nC,OAAA0zB,iBAAA,EAGAmU,EAAA7nC,OAAA+yD,aAAA,EAGAlrB,EAAA7nC,OAAAurD,aAAA,EAGA1jB,EAAA7nC,OAAA+rD,WAAA,EAGAlkB,EAAA7nC,OAAAgzD,gBAAA,eAGAzgE,EAAA,SAAAs1C,EAAA50C,GAEA40C,EAAAqd,MAGArd,EAAAqd,GAAA5I,OAEA5wD,SACA25D,OAAA,4EACAC,SAAA,aAEA0J,MACA3J,OAAA,yEACAC,SAAA,aAEA2J,WACA5J,OAAA,8EACAC,SAAA,aAEA4J,QACA7J,OAAA,2EACAC,SAAA,aAEA6J,WACA9J,OAAA,2EACAC,SAAA,aAEA8J,SACA/J,OAAA,0EACAC,SAAA,aAEA+J,eACAhK,OAAA,kFACAC,SAAA,aAEAgK,QACAjK,OAAA,2EACAC,SAAA,aAEAiK,OACAlK,OAAA,gFACAC,SAAA,aAEAh0B,QACA+zB,OAAA,yEACAC,SAAA,aAEAkK,YACAnK,OAAA,0EACAC,SAAA,aAEAmK,UACApK,OAAA,gFACAC,SAAA,aAEAoK,MACArK,OAAA,2EACAC,SAAA,aAEAqK,WACAtK,OAAA,kFACAC,SAAA,aAEAsK,aACAvK,OAAA,gFACAC,SAAA,aAEAuK,WACAxK,OAAA,+EACAC,SAAA,aAEAwK,aACAzK,OAAA,iFACAC,SAAA,aAEAyK,YACA1K,OAAA,gFACAC,SAAA,aAEA2G,MACA5G,OAAA,yEACAC,SAAA,aAEA0K,QACA3K,OAAA,2EACAC,SAAA,aAEA2K,OACA5K,OAAA,0EACAC,SAAA,aAEA4K,SACA7K,OAAA,0EACAC,SAAA,aAEA7/C,KACA4/C,OAAA,4EACAC,SAAA,aAEA+K,OACAhL,OAAA,yEACAC,SAAA,aAEA/4D,UACA84D,OAAA,6EACAC,SAAA,aAEAqL,YACAtL,OAAA,6EACAC,SAAA,aAEA1C,MACAyC,OAAA,wEACAC,SAAA,aAEA3C,MACA0C,OAAA,uEACAC,SAAA,aAEA2H,YACA5H,OAAA,6EACAC,SAAA,iGAKA/yD,EAAA,SAAAs1C,EAAA50C,GAEA40C,EAAAtsB,GAAA2gC,kBAAA,WACA,GAAAW,GAAAnwD,IACAmwD,GAAA78C,OAAA/M,EAAA+J,UAAmC6qC,EAAA7nC,QACnC68C,EAAAqI,GAAAjyD,EAAA+J,UAA+B6qC,EAAAqd,OAI/B3yD,EAAA,SAAAs1C,EAAA50C,GAEA40C,EAAAtsB,GAAA4gC,mBAAA,WACAzvD,KAAA+2D,iBAAAxwD,EAAA,+CAIAV,EAAA,SAAAs1C,EAAA50C,GAEA40C,EAAAtsB,GAAA6gC,OAAA,WACA,GAAAS,GAAAnwD,KACAilC,EAAA,GAAAkW,GAAA+hB,IAAA/M,EAEAA,GAAAlrB,SAIAp/B,EAAA,SAAAs1C,EAAA50C,GAEA40C,EAAAtsB,GAAA8gC,iBAAA,WACA,GAAAQ,GAAAnwD,IACAmwD,GAAA+G,cAAA,GAAA/b,GAAAic,cAAAjH,MAIAtqD,EAAA,SAAAs1C,EAAA50C,GAGA40C,EAAAorB,iBACAprB,EAAAqrB,WAAA,SAAA33C,GACAssB,EAAAorB,cAAA31D,KAAAie,IAGAssB,EAAAtsB,GAAAwnC,SAAA,WAKA,QAAAxB,GAAA4D,GACA,MAAA7H,GAAA7wD,QAAA04D,IAAA,EALA,GAAAtI,GAAAnwD,KACA4wD,EAAAT,EAAA78C,OAAAs8C,KAWArpD,GAAA8H,KAAA8sC,EAAAorB,cAAA,SAAAp2C,EAAAs2C,GACAA,EAAAn8D,KAAA6lD,EAAA0E,QAKAhvD,EAAA,SAAAs1C,EAAA50C,GAEA40C,EAAAqrB,WAAA,SAAA3R,GAEA,GAAAA,EADA,QACA,CAIA,GAAA1E,GAAAnwD,KACAskE,EAAAnU,EAAA78C,OAAAgxD,KAGA7T,EAAA,GAAAtV,GAAAgd,MACAhI,SACAt1C,GAXA,OAYAtT,MAAA+8D,EAAAhC,KACAlO,YAAA,QAIA3D,GAAAuJ,mBAAA,SAAA9wD,GACAinD,EAAA8B,eAMA9B,EAAAuE,eAAA,0BAAAxrD,EAAA,QAHAinD,EAAAgE,QAAAjrD,EAAA,SAQAinD,EAAAP,MAAA,KAAAa,OAwCA5qD,EAAA,SAAAs1C,EAAA50C,GAEA40C,EAAAqrB,WAAA,SAAA3R,GAEA,GAAAA,EADA,UACA,CAGA,GAAA1E,GAAAnwD,KACAskE,EAAAnU,EAAA78C,OAAAgxD,KAGA7T,EAAA,GAAAtV,GAAAgd,MACAhI,SACAt1C,GAVA,SAWAtT,MAAA+8D,EAAA9B,OACApO,YAAA,UAIA3D,GAAAuJ,mBAAA,SAAA9wD,GACAinD,EAAA8B,eAMA9B,EAAAuE,eAAA,IAAAxrD,EAAA,UAHAinD,EAAAgE,QAAAjrD,EAAA,WAQAinD,EAAAP,MAAA,OAAAa,OAmJA5qD,EAAA,SAAAs1C,EAAA50C,GAEA40C,EAAAqrB,WAAA,SAAA3R,GACA,GAAA4D,GAAA,eACA,IAAA5D,EAAA4D,GAAA,CAGA,GAAAtI,GAAAnwD,KACAskE,EAAAnU,EAAA78C,OAAAgxD,KAGA7T,EAAA,GAAAtV,GAAAgd,MACAhI,SACAt1C,GAAA49C,EACAlxD,MAAA+8D,EAAA3B,cACAvO,YAAA,iBAIA3D,GAAAuJ,mBAAA,SAAA9wD,GACAinD,EAAA8B,eAMA9B,EAAAuE,eAAA,SAAAxrD,EAAA,iBAHAinD,EAAAgE,QAAAjrD,EAAA,kBAQAinD,EAAAP,MAAA6I,GAAAhI,OAqFA5qD,EAAA,SAAAs1C,EAAA50C,GAEA40C,EAAAqrB,WAAA,SAAA3R,GAmBA,QAAA3E,KACA,GAAAwW,GAAAjW,EAAAkW,cACAvW,EAAAD,EAAAlrB,IAAAmrB,KACA1xD,EAAA6H,EAAA6f,KAAAsgD,EAAArW,MAEA3xD,KACAA,EAAA,eAIAyxD,EAAA78C,OAAA+wD,WAEA3lE,IAAA8S,QAAA,kCAGA,KACA4+C,EAAAnP,KAAAviD,GACa,MAAAib,KAlCb,GAAAk7C,EADA,UACA,CAGA,GAEA8I,GAFAxN,EAAAnwD,KACAskE,EAAAnU,EAAA78C,OAAAgxD,KAIA7T,EAAA,GAAAtV,GAAAgd,MACAhI,SACAt1C,GAXA,SAYAtT,MAAA+8D,EAAA1/B,QAGA6rB,GAAAmW,YAAA,EA0BAnW,EAAAmJ,WAAA,SAAA1wD,GACA,GAAA6N,GAAA/W,KACAmwD,EAAAp5C,EAAAo5C,OACAC,EAAAD,EAAAlrB,IAAAmrB,KACAyW,EAAAzW,EAAA4L,cACAmE,EAAA/P,EAAArmD,QAEAgN,GAAA4vD,gBACA5vD,EAAA4vD,cAAApgE,EAAA,+CAEA,IAAAmgE,GAAA3vD,EAAA4vD,aACAD,GAAArb,KACAthD,OAAAo2D,EACAlD,aAAA4J,EAAA1G,IAIAuG,EAAArW,IAAAD,EAAAnP,QAGAylB,EAAAthE,GAAA,kBAAA8D,GACAgnD,MAIAE,EAAA8D,MAAAwS,GAAAvV,OACAuV,EAAAr/D,OAGAopD,EAAAmW,YAAA,EAGA5mE,KAAA0wD,iBAGAP,EAAAW,mBAAA,UAGA6M,EAAAvN,EAAAnP,QAIAwP,EAAAuJ,mBAAA,SAAA9wD,GACA,GAAA6N,GAAA/W,KACAmwD,EAAAp5C,EAAAo5C,OACAC,EAAAD,EAAAlrB,IAAAmrB,KACAsW,EAAA3vD,EAAA4vD,aAGAD,KAKAxW,IAGAwW,EAAAxS,MAAA9D,GAAAe,OACAf,EAAA/oD,OAGAopD,EAAAmW,YAAA,EAGA5mE,KAAA0wD,iBAGAP,EAAAQ,kBAAA,UAGAP,EAAAnP,SAAA0c,GACAxN,EAAAj4C,UAAA,kBAAAi4C,GAAAj4C,UACAi4C,EAAAj4C,SAAA5N,KAAA6lD,KAMAM,EAAAwJ,oBAAA,WACA,MAAAj6D,MAAA4mE,YAIAzW,EAAAP,MAAA,OAAAa,OA2jCA5qD,EAAA,SAAAs1C,EAAA50C,GAEA40C,EAAAqrB,WAAA,SAAA3R,GAEA,GAAAA,EADA,OACA,CAGA,GAAA1E,GAAAnwD,KACAskE,EAAAnU,EAAA78C,OAAAgxD,KAGA7T,EAAA,GAAAtV,GAAAgd,MACAhI,SACAt1C,GAVA,MAWAtT,MAAA+8D,EAAAvrD,IACAm/C,IAAA,4BAIA/H,GAAAP,MAAA,IAAAa,OAq+BA5qD,EAAA,SAAAs1C,EAAA50C,GAEA40C,EAAAtsB,GAAAynC,YAAA,WAEA,GAKA7F,GALAN,EAAAnwD,KACA4vD,EAAAO,EAAAP,MACAgB,EAAAT,EAAA78C,OAAAs8C,MAIA2H,GAHApH,EAAA+G,cAGA,EACA3wD,GAAA8H,KAAAuiD,EAAA,SAAAzgC,EAAAqC,GACA,SAAAA,EAEA,WADA+kC,MAIA9G,EAAAb,EAAAp9B,KAEAi+B,EAAAvsD,OAAAqzD,MAKApc,EAAAtsB,GAAA0nC,oBAAA,WAEA,GAAApG,GAAAnwD,KACAk3D,EAAA/G,EAAA+G,aACA/G,GAAA4G,gBAEAG,GAAAhzD,YAKA2B,EAAA,SAAAs1C,EAAA50C,GAEA40C,EAAAtsB,GAAA2nC,UAAA,WAEA,GAAArG,GAAAnwD,KACAilC,EAAAkrB,EAAAlrB,GAEAA,GAAA/gC,SAGAisD,EAAAL,MAAA,WACA7qB,EAAAg7B,kBAKAp6D,EAAA,SAAAs1C,EAAA50C,GAEA40C,EAAAtsB,GAAA4nC,sBAAA,WAEA,GAIA9H,GAAAE,EAJAsB,EAAAnwD,KACA0uD,EAAAyB,EAAAzB,gBACAqI,EAAA5G,EAAA4G,iBACA3G,EAAAD,EAAAlrB,IAAAmrB,IAIA1B,KAAA0B,GACAzB,EAAAwB,EAAAxB,MACAE,EAAAsB,EAAAtB,QAEAF,KAAAptD,OAEAotD,EAAAuF,MAAA6C,GAGAlI,EAAAiY,QAAA/P,KAIArI,EAAAwF,MAAA6C,GACArI,EAAAyC,WAQAtrD,EAAA,SAAAs1C,EAAA50C,GAGA40C,EAAAtsB,GAAA6nC,WAAA,WAEA,GAAA9G,GAAA5vD,KAAA4vD,KAGArpD,GAAA8H,KAAAuhD,EAAA,SAAAz/B,EAAAqC,GACAA,EAAAmnC,iBAMA9zD,EAAA,SAAAs1C,EAAA50C,GAEA40C,EAAAtsB,GAAA8nC,mBAAA,eAKA9wD,EAAA,SAAAs1C,EAAA50C,GAEA40C,EAAAtsB,GAAA+nC,SAAA,WAEA,GAAA3xB,GAAAjlC,KAAAilC,GAGAA,GAAA47B,qBAGA57B,EAAAi8B,mBAGAj8B,EAAAm8B,0BA6zDAv7D,EAAA,SAAAs1C,EAAA50C,GAGA40C,EAAAqrB,WAAA,SAAA3R,GAMA,GAAAA,EAHA,UAGA,CAKA,GAAA1E,GAAAnwD,KAGAywD,EAAA,GAAAtV,GAAAgd,MACAhI,SACAt1C,GAbA,SAcAtT,MAAA,KAGAuwD,WAAAvxD,EAAA,iFACAyxD,aAAAzxD,EAAA,mGAIAkqD,GAAAmJ,WAAA,SAAA1wD,GAYA,QAAAorD,KACAoJ,EAAArS,IAAA,qBAZA,GAEAqS,GAFAnP,EAAA4B,EAAA2B,eACAz/B,EAAA89B,EAAA2E,sBAAAvG,EAAA,IAGA,KAAAl8B,EAEA,MAAAnpB,GAAA8lC,gBAEA0uB,GAAAn3D,EAAA8rB,GAMA89B,EAAAsE,cAAAvrD,EAAAorD,IAIA7D,EAAAuJ,mBAAA,SAAA9wD,GAYA,QAAAorD,KACAoJ,EAAArS,IAAA,mBAZA,GAEAqS,GAFAnP,EAAA4B,EAAA2B,eACAz/B,EAAA89B,EAAA2E,sBAAAvG,EAAA,IAGA,KAAAl8B,EAEA,MAAAnpB,GAAA8lC,gBAEA0uB,GAAAn3D,EAAA8rB,GAMA89B,EAAAsE,cAAAvrD,EAAAorD,IAIA7D,EAAAwJ,oBAAA,WAEA,GAEAyD,GACAqJ,EAHAxY,EAAA4B,EAAA2B,eACAz/B,EAAA89B,EAAA2E,sBAAAvG,EAAA,IAIA,SAAAl8B,IAIAqrC,EAAAn3D,EAAA8rB,OACA00C,EAAArJ,EAAArS,IAAA,iBAEA,QAAA0b,KAUA5W,EAAAP,MAAA,OAAAa,OAqGA,WAEA,QAAAjkD,GAAAC,GACA,GAAAC,EAIA,WAHAlE,SAAAmE,MACA,sEAIAD,GAAAD,EACAC,EAAAE,UAAAo6D,MAAAhmE,OAAAqtD,WATA,GAAA3hD,EAYA,QACAF,UACA7J,QAAA,gBnD4qkB6B2H,KAAKhM,EAASC,EAAoB,UAIzD0oE,KACA,SAAU5oE,EAAQC,EAASC,GoD500BjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,SpDq10BM4oE,KACA,SAAU7oE,EAAQC,EAASC,GAEjC,YAGAC,QAAOC,eAAeH,EAAS,cAC3BI,OAAO,GqDtx0BX,IAAAC,GAAAJ,EAAA,QAEAK,EAAAL,EAAA,QrD2x0BIM,EAEJ,SAAgCC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,IAFjDF,EAItCN,GAAQU,SACJE,KAAM,WACF,OqD7x0BRC,OAAAN,EAAAG,QrD+x0BY6F,UqD9x0BZ,ErD+x0BY6B,SqD9x0BZ,ErD+x0BY6kB,YqD7x0BZ,IrDiy0BIhsB,UAAU,EAAIZ,EAAMa,WAChB4B,QAAS,SAAiB1B,GACtB,MAAOA,GAAM0B,QqD/x0BzBA,WrDky0BIS,SACI4jB,eAAgB,WqDjy0BxB,GAAArjB,GAAApC,IrDoy0BYA,MAAKQ,OAAOoC,SAAS,0BACjBmF,KAAQ/H,KqDny0BxB6E,UrDoy0BgB6B,SAAY1G,KqDny0B5B0G,SrDoy0BgBoB,WqDny0BhB,ErDoy0BgByjB,YAAevrB,KqDny0B/BurB,cAJA1oB,KAAA,SAAAC,GrDyy0BgBV,EAAM5B,OAAOoC,SAAS,iBqDny0BtCE,KrDoy0BeG,MAAM,SAAUC,GACfd,EAAM5B,OAAOoC,SAAS,cqDny0BtCM,MrDsy0BQ6D,WAAY,SAAoBlC,GAC5B,GAAI7E,KAAK6E,WAAaA,EAClB,OqDny0BhB,CrDqy0BY7E,MAAK6E,UqDny0BjBA,ErDoy0BY7E,KqDny0BZylB,mBrDsy0BIhiB,QAAS,WACLzD,KqDly0BRylB,oBrDwy0BM0hD,KACA,SAAU9oE,EAAQC,EAASC,GsDl60BjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,StD260BM8oE,KACA,SAAU/oE,EAAQC,EAASC,GAEjC,cAC4B,SAASgI,GAErC/H,OAAOC,eAAeH,EAAS,cAC3BI,OAAO,IAEXJ,EAAQU,SACJE,KAAM,WACF,OACImoE,WuD930BZ,IvDi40BI5jE,QAAS,WuD930Bb,GAAArB,GAAApC,IvDi40BQuG,GAAEvF,QAAQi6D,OAAO,SAAU/xD,GACP3C,EAAEvF,QuDh40B9B8I,YvDi40B4BvD,EAAEvF,QAAQ+I,SAAW,EACjC3H,EAAMilE,WuDh40BtB,EvDk40BgBjlE,EAAMilE,WuDh40BtB,KvDq40BIxlE,SACIgI,IAAK,WACDtD,EAAEvF,QAAQ8I,UuDj40BtB,QvDq40B6BQ,KAAKhM,EAASC,EAAoB,UAIzD+oE,KACA,SAAUjpE,EAAQC,EAASC,GwD/90BjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,SxDw+0BMipE,KACA,SAAUlpE,EAAQC,EAASC,GAEjC,cAC4B,SAASgI,GAwBrC,QAAS0hB,GAAuBnpB,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAtBvFN,OAAOC,eAAeH,EAAS,cAC9BI,OAAO,GAGR,IAAIugB,GAAW1gB,EAAoB,QAE/B2gB,EAAY+I,EAAuBhJ,GAEnCuoD,EAAWjpE,EAAoB,QAE/BkpE,EAAWx/C,EAAuBu/C,GyDvg1BtChhC,EAAAjoC,EAAA,QAAYkB,EzDih1BZ,SAAiCX,GAAO,GAAIA,GAAOA,EAAIC,WAAc,MAAOD,EAAc,IAAIsgB,KAAa,IAAW,MAAPtgB,EAAe,IAAK,GAAI4D,KAAO5D,GAAWN,OAAOoO,UAAUyS,eAAe/U,KAAKxL,EAAK4D,KAAM0c,EAAO1c,GAAO5D,EAAI4D,GAAgC,OAAtB0c,GAAOpgB,QAAUF,EAAYsgB,GAN/NonB,GyD1g1BnC3d,EAAAtqB,EAAA,QzD8g1BIuqB,EAAab,EAAuBY,GyD7g1BpCP,EAAQQ,EAAA9pB,QAAQwR,IAAI,QzDqh1BxBlS,GAAQU,SyDlh1BPU,OAECgoE,YAAa,GAEbjhC,SAAU,GAEVkhC,UAAW,GAEXC,YAAa,GACbC,cAAe,GAEfC,cAAe,EAEfC,MAAO,GACP/kE,KAAM,EAGNrD,MACCuG,WAAY,GACZ8gB,MAAO,GACPghD,MAAO,GACPC,WAAY,GACZ77D,UAAW,GACX87D,WAAY,GACZrhD,SAAU,GACVi2B,UAAW,GACXr8C,IAAK,GACL0nE,QAAS,EACTriE,UAAWwiB,GAIZjU,MACC+zD,SAAU,GACVC,QAAS,GACTC,UAAW,GACXC,YAAa,IAGdC,WAAW,EACXC,YAAY,EACZC,SAAS,EACT5iE,SAAS,EACT6iE,UAAU,EACVC,YAAY,EACZC,gBAAgB,EAChBC,eAAe,GAEhB3oD,WAEC4oD,cAFU,SAEIrpE,EAAO2gB,GACpB,IAAK,GAAI3d,KAAO2d,GACf,GAAIA,EAAQhB,eAAe3c,GAC1B,GAA4B,YAAxB,EAAA+kE,EAAAzoE,SAAOqhB,EAAQ3d,IAClB,IAAK,GAAIsmE,KAAQ3oD,GAAQ3d,GACxBhD,EAAMgD,GAAKsmE,GAAQ3oD,EAAQ3d,GAAKsmE,OAGjCtpE,GAAMgD,GAAO2d,EAAQ3d,IAMzBumE,aAhBU,SAgBGvpE,GACZA,EAAMsD,QAGPkmE,iBApBU,SAoBOxpE,EAAO2gB,GACvB,IAAK,GAAI3d,KAAO2d,GACf3gB,EAAMC,KAAK+C,GAAO2d,EAAQ3d,KAI7Bqe,SAECgoD,cAFQ,SAEM/nD,EAASX,GACtBW,EAAQC,OAAO,gBAAiBZ,IAGjC6oD,iBANQ,SAMSloD,EAASX,GAEzB,MADAW,GAAQC,OAAO,mBAAoBZ,GAC5BnB,EAAAlgB,QAAQmO,QAAQ,IAGxBg8D,sBAXQ,SAWcnoD,EAASX,GAC9B,MAAKA,GAAQ9H,MAASyI,EAAQthB,MAAM8oE,WAMpCxnD,EAAQC,OAAO,iBACdunD,WAAa,IAEA/oE,EAAK2pE,iBAAiB/oD,GAASxd,KAAK,SAAAC,GASjD,MARAke,GAAQC,OAAO,iBACdunD,WAAa,EACbC,YAAc,EACdp0D,MACCi0D,UAAaz4C,OAAO/sB,EAAIwlE,WACxBD,QAAWvlE,EAAIulE,WAGVnpD,EAAAlgB,QAAQmO,QAAQrK,KACrBG,MAAM,SAACC,GAKT,MAJA8d,GAAQC,OAAO,iBACdunD,WAAa,IAGPtpD,EAAAlgB,QAAQqiB,OAAOne,MAvBfgc,EAAAlgB,QAAQqiB,QACdC,KAAM,GACNjX,IAAK,SA0BRg/D,wBAzCQ,SAyCgBroD,EAASX,GAChC,MAAKW,GAAQthB,MAAM+oE,WAMLhpE,EAAK6pE,oBAClBC,WAAclpD,EAAQkpD,WACtBC,SAAYxoD,EAAQthB,MAAMqoE,MAC1B0B,SAAYzoD,EAAQthB,MAAM2U,KAAK+zD,SAC/BsB,OAAU1oD,EAAQthB,MAAM2U,KAAKg0D,UAC3BxlE,KAAK,SAAAC,GACPke,EAAQC,OAAO,iBACdwnD,YAAc,EACdzlE,KAAQ,IAET,IAAI2mE,GAAQC,YAAY,WACvB,GAAI5oD,EAAQthB,MAAMsD,MAAQ,EAKzB,MAJAge,GAAQC,OAAO,iBACdwnD,YAAc,IAEfoB,cAAcF,IACP,CAER3oD,GAAQC,OAAO,iBACb,IACH,OAAO/B,GAAAlgB,QAAQmO,QAAQrK,KACrBG,MAAM,SAAAC,GACR,MAAOgc,GAAAlgB,QAAQqiB,OAAOne,KA3Bfgc,EAAAlgB,QAAQqiB,QACdC,KAAM,GACNjX,IAAK,SA8BRy/D,WA3EQ,SA2EG9oD,EAASX,GACnB,MAAKW,GAAQthB,MAAMoG,QAMLrG,EAAKsqE,OAClBC,UAAahpD,EAAQthB,MAAMqoE,MAC3BthC,SAAYzlB,EAAQthB,MAAM+mC,SAC1B4hC,QAAWrnD,EAAQthB,MAAM2U,KAAKg0D,QAC9BC,UAAatnD,EAAQthB,MAAM2U,KAAK+zD,SAChC6B,UAAa5pD,EAAQ4pD,YACnBpnE,KAAK,SAAAC,GAUP,MATAke,GAAQC,OAAO,iBACdnb,SAAW,IAIZgjB,EAAA9pB,QAAQ+1C,IAAI,QAASjyC,EAAIwlB,OACxBqc,KAAM,IACNulC,QAAS7pD,EAAQ8pD,OAAS,EAAI,KAExBjrD,EAAAlgB,QAAQmO,QAAQrK,KACrBG,MAAM,SAAAC,GAWR,OAVIA,EAAI4kE,eAAiB,GAAoB,OAAf5kE,EAAIwmB,WACjCxmB,EAAI4kE,cAAgB,EACpB9mD,EAAQpe,SAAS,yBAChB2V,MAAM,KAGRyI,EAAQC,OAAO,iBACd6mD,cAAiB5kE,EAAI4kE,eAAiB9mD,EAAQthB,MAAMooE,cACpDhiE,SAAW,IAELoZ,EAAAlgB,QAAQqiB,OAAOne,KAjCfgc,EAAAlgB,QAAQqiB,QACdC,KAAM,GACNjX,IAAK,SAqCR+/D,WApHQ,SAoHGppD,EAASX,GACnB,MAAKW,GAAQthB,MAAMkpE,YAMnB5nD,EAAQC,OAAO,iBACd2nD,YAAc,IAEDnpE,EAAK4qE,OAClB3C,YAAe1mD,EAAQthB,MAAMgoE,YAC7BsC,UAAahpD,EAAQthB,MAAMqoE,MAC3BthC,SAAYzlB,EAAQthB,MAAM+mC,SAC1B4hC,QAAWrnD,EAAQthB,MAAM2U,KAAKg0D,QAC9BC,UAAatnD,EAAQthB,MAAM2U,KAAK+zD,SAChCG,YAAevnD,EAAQthB,MAAM2U,KAAKk0D,YAClC0B,UAAa5pD,EAAQ4pD,UACrBvhD,QAAWrI,EAAQqI,UACjB7lB,KAAK,SAAAC,GASP,MARAke,GAAQC,OAAO,iBACd2nD,YAAc,IAGf9/C,EAAA9pB,QAAQ+1C,IAAI,QAASjyC,EAAIwlB,OACxBqc,KAAM,IACNulC,QAAS,IAEHhrD,EAAAlgB,QAAQmO,QAAQrK,KACrBG,MAAM,SAAAC,GAIR,MAHA8d,GAAQC,OAAO,iBACd2nD,YAAc,IAER1pD,EAAAlgB,QAAQqiB,OAAOne,MA/Bfgc,EAAAlgB,QAAQqiB,QACdC,KAAM,GACNjX,IAAK,SAkCRigE,aA1JQ,SA0JKtpD,EAASX,GACrB,QAAKW,EAAQthB,MAAMgpE,UAGnB1nD,EAAQC,OAAO,iBACdynD,SAAW,IAEEjpE,EAAK8qE,UAClBP,UAAahpD,EAAQthB,MAAMqoE,MAC3BthC,SAAYzlB,EAAQthB,MAAM+mC,SAC1B8hC,YAAevnD,EAAQthB,MAAM2U,KAAKk0D,YAClC0B,UAAa5pD,EAAQ4pD,UACrBvhD,QAAWrI,EAAQqI,UACjB7lB,KAAK,SAAAC,GAIP,MAHAke,GAAQC,OAAO,iBACdynD,SAAW,IAELxpD,EAAAlgB,QAAQmO,QAAQrK,KACrBG,MAAM,SAACC,GAKT,MAJA8d,GAAQC,OAAO,iBACdynD,SAAW,IAGLxpD,EAAAlgB,QAAQqiB,OAAOne,OAKxBsnE,cAtLQ,SAsLMxpD,EAASX,GACtB,MAAKW,GAAQthB,MAAMgpE,SAOdniE,EAAE6f,KAAKpF,EAAQthB,MAAM+mC,WAAazlB,EAAQthB,MAAM+mC,SAASllC,OAAS,GAAKyf,EAAQthB,MAAM+mC,SAASllC,OAAS,GACpG2d,EAAAlgB,QAAQqiB,QACdC,KAAQ,EACRjX,IAAO,WAIJ9D,EAAE6f,KAAKpF,EAAQthB,MAAMkoE,cAAgB5mD,EAAQthB,MAAMkoE,YAAYrmE,OAAS,GAAKyf,EAAQthB,MAAMkoE,YAAYrmE,OAAS,GAC7G2d,EAAAlgB,QAAQqiB,QACdC,KAAQ,EACRjX,IAAO,UAIL2W,EAAQthB,MAAMkoE,aAAe5mD,EAAQthB,MAAMmoE,cACvC3oD,EAAAlgB,QAAQqiB,QACdC,KAAQ,EACRjX,IAAO,UAIJ9D,EAAE6f,KAAKpF,EAAQthB,MAAM2U,KAAKk0D,cAM/BvnD,EAAQC,OAAO,iBACdynD,SAAW,IAEEjpE,EAAK8qE,UAClBP,UAAahpD,EAAQthB,MAAMqoE,MAC3BthC,SAAYzlB,EAAQthB,MAAM+mC,SAC1B8hC,YAAevnD,EAAQthB,MAAM2U,KAAKk0D,YAClC0B,UAAa5pD,EAAQ4pD,UACrBvhD,QAAWrI,EAAQqI,UACjB7lB,KAAK,SAAAC,GAIP,MAHAke,GAAQC,OAAO,iBACdynD,SAAW,IAELxpD,EAAAlgB,QAAQmO,QAAQrK,KACrBG,MAAM,SAACC,GAKT,MAJA8d,GAAQC,OAAO,iBACdynD,SAAW,IAGLxpD,EAAAlgB,QAAQqiB,OAAOne,MAxBfgc,EAAAlgB,QAAQqiB,QACdC,KAAQ,EACRjX,IAAO,UA9BD6U,EAAAlgB,QAAQqiB,QACdC,KAAM,GACNjX,IAAK,SAuDRogE,oBAjPQ,SAiPYzpD,EAASX,GAC5B,MAAKW,GAAQthB,MAAMipE,SASdpiE,EAAE6f,KAAKpF,EAAQthB,MAAMC,KAAKwoE,SAAY5hE,EAAE6f,KAAKpF,EAAQthB,MAAMC,KAAKyM,YAAe7F,EAAE6f,KAAKpF,EAAQthB,MAAMC,KAAKuG,aAAgBK,EAAE6f,KAAKpF,EAAQthB,MAAMC,KAAKm9C,YAMxJ97B,EAAQC,OAAO,iBACd0nD,UAAY,IAGClpE,EAAKirE,gBAClBvC,OAAUnnD,EAAQthB,MAAMC,KAAKwoE,OAC7B/7D,UAAa4U,EAAQthB,MAAMC,KAAKyM,UAChClG,WAAc8a,EAAQthB,MAAMC,KAAKuG,WACjC42C,UAAa97B,EAAQthB,MAAMC,KAAKm9C,YAC9Bj6C,KAAK,SAAAC,GAIP,MAHAke,GAAQC,OAAO,iBACd0nD,UAAY,IAENzpD,EAAAlgB,QAAQmO,QAAQrK,KACrBG,MAAM,SAACC,GAKT,MAJA8d,GAAQC,OAAO,iBACd0nD,UAAY,IAGNzpD,EAAAlgB,QAAQqiB,OAAOne,MAxBfgc,EAAAlgB,QAAQqiB,QACdC,KAAQ,EACRjX,IAAO,UAXD6U,EAAAlgB,QAAQqiB,QACdC,KAAM,GACNjX,IAAK,SAoCRsgE,iBAzRQ,SAyRS3pD,EAASX,GAEzB,MAAIA,GAAQsG,QAAU3F,EAAQthB,MAAMC,KAAKc,IACjCye,EAAAlgB,QAAQmO,QAAQ6T,EAAQthB,MAAMC,MAGxBF,EAAK0C,YAAYke,GAASxd,KAAK,SAAAC,GAM5C,MAJKud,GAAQsG,QACZ3F,EAAQC,OAAO,mBAAoBne,EAAInD,MAGjCuf,EAAAlgB,QAAQmO,QAAQrK,EAAInD,QACzBsD,MAAM,SAACC,GACT,MAAOgc,GAAAlgB,QAAQqiB,OAAOne,MAKxB0nE,cA5SQ,SA4SM5pD,EAASX,GACtBW,EAAQC,OAAO,oBACd/a,WAAY,GACZ8gB,MAAO,GACPghD,MAAO,GACPC,WAAY,GACZ77D,UAAW,GACX87D,WAAY,GACZrhD,SAAU,GACVi2B,UAAW,GACXr8C,IAAK,GACLqF,QAAS,KAGVgjB,EAAA9pB,QAAQkI,OAAO,aAGhB2jE,kBA7TQ,SA6TU7pD,EAASX,GAC1B,MAAKW,GAAQthB,MAAMmpE,gBAMnB7nD,EAAQC,OAAO,iBACd4nD,gBAAkB,IAGLppE,EAAKqrE,cAClBd,UAAahpD,EAAQthB,MAAMqoE,MAC3BQ,YAAevnD,EAAQthB,MAAM2U,KAAKk0D,cAChC1lE,KAAK,SAAAC,GAYP,MAXAke,GAAQC,OAAO,iBACd8mD,MAAS,GACT1zD,MACC+zD,SAAU,GACVC,QAAS,GACTC,UAAW,GACXC,YAAa,IAEdM,gBAAkB,IAGZ3pD,EAAAlgB,QAAQmO,QAAQrK,KACrBG,MAAM,SAACC,GAKT,MAJA8d,GAAQC,OAAO,iBACd4nD,gBAAkB,IAGZ3pD,EAAAlgB,QAAQqiB,OAAOne,MA9Bfgc,EAAAlgB,QAAQqiB,QACdC,KAAM,GACNjX,IAAK,SAiCR0gE,iBAlWQ,SAkWS/pD,EAASX,GACzB,MAAKW,GAAQthB,MAAMopE,eAMnB9nD,EAAQC,OAAO,iBACd6nD,eAAiB,IAGJrpE,EAAKurE,aAClBhB,UAAahpD,EAAQthB,MAAMqoE,MAC3BQ,YAAevnD,EAAQthB,MAAM2U,KAAKk0D,cAChC1lE,KAAK,SAAAC,GAYP,MAXAke,GAAQC,OAAO,iBACd8mD,MAAS,GACT1zD,MACC+zD,SAAU,GACVC,QAAS,GACTC,UAAW,GACXC,YAAa,IAEdO,eAAiB,IAGX5pD,EAAAlgB,QAAQmO,QAAQrK,KACrBG,MAAM,SAACC,GAKT,MAJA8d,GAAQC,OAAO,iBACd6nD,eAAiB,IAGX5pD,EAAAlgB,QAAQqiB,OAAOne,MA9Bfgc,EAAAlgB,QAAQqiB,QACdC,KAAM,GACNjX,IAAK,azDyh1BmBC,KAAKhM,EAASC,EAAoB,UAIzD0sE,KACA,SAAU5sE,EAAQC,KAMlB4sE,KACA,SAAU7sE,EAAQC,G0D191BxBD,EAAAC,SAAgB4F,OAAA,WAAmB,GAAAC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OACAE,YAAA,WACGF,EAAA,OACHE,YAAA,iBACAC,OACAoW,GAAA,QAEAzV,IACAQ,MAAAzB,EAAAyB,SAEGzB,EAAAO,GAAA,KAAAP,EAAA,UAAAG,EAAA,cAAAA,EAAA,aACHG,OACAQ,KAAA,IACAshD,OAAA,2BACAvuC,UAAA,kBAEA5S,IACAsmD,mBAAAvnD,EAAAgR,SACAg2D,gBAAAhnE,EAAAwI,UAEG,GAAAxI,EAAA0B,MAAA,IACFM,qB1Dg+1BKilE,KACA,SAAU/sE,EAAQC,G2Dv/1BxBD,EAAAC,SAAgB4F,OAAA,WAAmB,GAAAC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OACAE,YAAA,qBACGF,EAAA,OACHE,YAAA,0BACGF,EAAA,OACHE,YAAA,0BACGF,EAAA,OACHE,YAAA,aACGF,EAAA,OACHG,OACAoH,IAAA1H,EAAA0b,QAAAwD,uBAEGlf,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,WACAG,OACA0mE,QAAA,MAAAlnE,EAAA0b,QAAAH,eAAA4rD,QAAA,MAAAnnE,EAAA0b,QAAAH,oBAEGvb,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,2BACGF,EAAA,OACHE,YAAA,SACGF,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAA0b,QAAAsD,kBAAAhf,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,aACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAA+e,MAAA,QAAA/e,EAAA0b,QAAAqD,aAAA/e,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,QACGF,EAAA,OACHE,YAAA,oBACAC,OACA8mE,kBAAApnE,EAAA0b,QAAArW,cAEG,GAAArF,EAAA0b,QAAAhV,MAAAvG,EAAA,QACHc,IACAQ,MAAA,SAAAN,GACAnB,EAAAhE,KAAAgE,EAAA0b,QAAArW,gBAGGrF,EAAAO,GAAAP,EAAA4B,GAAA,GAAA5B,EAAA0b,QAAA2rD,aAAA,kBAAAlnE,EAAA,QACHc,IACAQ,MAAAzB,EAAAwf,iBAEGxf,EAAAO,GAAA,cAAAP,EAAAO,GAAA,KAAAP,EAAAyH,GAAA,GAAAzH,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,sBACGF,EAAA,OACHE,YAAA,wBACGF,EAAA,OACHE,YAAA,OACAY,IACAQ,MAAAzB,EAAA8iB,aAEG3iB,EAAA,OACHE,YAAA,uBACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,gBAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,SACGF,EAAA,OACHE,YAAA,eACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAA0b,QAAAuD,iBAAAjf,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,YACGL,EAAAqG,GAAArG,EAAA0b,QAAA,gBAAA9T,GACH,MAAAzH,GAAA,KAAAH,EAAAO,GAAAP,EAAA4B,GAAAgG,SACG5H,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,gBACGF,EAAA,OACHE,YAAA,8BACGF,EAAA,QAAAH,EAAAO,GAAA,KAAAJ,EAAA,UAAAH,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAA0b,QAAA9U,mBAAA5G,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,kCACGF,EAAA,QAAAH,EAAAO,GAAA,KAAAJ,EAAA,UAAAH,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAA0b,QAAA7U,sBAAA7G,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,gBACGF,EAAA,OACHE,YAAA,qBACGF,EAAA,OACHG,OACAoH,IAAA1H,EAAA0b,QAAApgB,MAAA0E,EAAA0b,QAAApgB,KAAAyG,YAAA/B,EAAAhF,YAEGgF,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,sBACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAA0b,QAAApgB,MAAA0E,EAAA0b,QAAApgB,KAAA2M,yBACFjG,iBAAA,WAA+B,GAAAhC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CACvE,OAAAE,GAAA,OACAE,YAAA,uBACGF,EAAA,OACHE,YAAA,wBACGF,EAAA,OACHE,YAAA,SACGF,EAAA,OACHE,YAAA,mBACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,UAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,SACGF,EAAA,OACHE,YAAA,qBACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,WAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,SACGF,EAAA,OACHE,YAAA,mBACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,UAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,SACGF,EAAA,OACHE,YAAA,mBACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,aAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,SACGF,EAAA,OACHE,YAAA,qBACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,aAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,SACGF,EAAA,OACHE,YAAA,qBACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,kB3D8/1BG+mE,KACA,SAAUptE,EAAQC,EAASC,GAEjC,YAqBA,SAAS0pB,GAAuBnpB,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAlBvFN,OAAOC,eAAeH,EAAS,cAC9BI,OAAO,GAGR,IAAIugB,GAAW1gB,EAAoB,QAE/B2gB,EAAY+I,EAAuBhJ,GAEnCuoD,EAAWjpE,EAAoB,QAE/BkpE,EAAWx/C,EAAuBu/C,G4Dxo2BtCkE,EAAAntE,EAAA,QAAYyqB,E5D8o2BZ,SAAiClqB,GAAO,GAAIA,GAAOA,EAAIC,WAAc,MAAOD,EAAc,IAAIsgB,KAAa,IAAW,MAAPtgB,EAAe,IAAK,GAAI4D,KAAO5D,GAAWN,OAAOoO,UAAUyS,eAAe/U,KAAKxL,EAAK4D,KAAM0c,EAAO1c,GAAO5D,EAAI4D,GAAgC,OAAtB0c,GAAOpgB,QAAUF,EAAYsgB,GAF/NssD,EAMnCptE,GAAQU,S4D/o2BPU,OAEC4I,MAAO,EACPS,SAGAsL,KAAM,IAEP8L,WAECwrD,cAFU,SAEKjsE,EAAO2gB,GACrB,IAAK,GAAI3d,KAAO2d,GACf,GAAIA,EAAQhB,eAAe3c,GAC1B,GAA4B,YAAxB,EAAA+kE,EAAAzoE,SAAOqhB,EAAQ3d,IAClB,IAAK,GAAIsmE,KAAQ3oD,GAAQ3d,GACxBhD,EAAMgD,GAAKsmE,GAAQ3oD,EAAQ3d,GAAKsmE,OAGjCtpE,GAAMgD,GAAO2d,EAAQ3d,IAMzBkpE,cAhBU,SAgBKlsE,EAAO2gB,GACrB3gB,EAAM4I,MAAQ+X,EAAQ/X,MACtB5I,EAAMqJ,MAAQsX,EAAQtX,OAGvB8iE,aArBU,SAqBInsE,EAAO2gB,GACpB3gB,EAAM2U,KAAOgM,EAAQhM,OAGvB0M,SAEC4qD,cAFQ,SAEO3qD,EAASX,GACvBW,EAAQC,OAAO,gBAAiBZ,IAGjCyrD,mBANQ,SAMY9qD,EAASX,GAa5B,MAZc2I,GAAKM,cAAcjJ,GAASxd,KAAM,SAAAC,GAQ/C,MAPAA,GAAI3B,KAAKmM,IAAI,SAAAnM,GACTA,EAAK0lB,SAAW,IAEpB7F,EAAQC,OAAO,iBACdlY,MAASjG,EAAI3B,KACbmH,MAASxF,EAAI0e,UAAUC,cAEjBvC,EAAAlgB,QAAQmO,QAAQrK,KACrBG,MAAO,SAACH,GACV,MAAOoc,GAAAlgB,QAAQqiB,OAAOve,MAKxBipE,iBAtBQ,SAsBU/qD,EAASX,GAU1B,MATc2I,GAAKO,YAAYlJ,GAASxd,KAAM,SAAAC,GAK7C,MAJAke,GAAQC,OAAO,iBACdlY,MAASjG,EAAI3B,KACbmH,MAASxF,EAAI0e,UAAUC,cAEjBvC,EAAAlgB,QAAQmO,QAAQrK,KACrBG,MAAO,SAACH,GACV,MAAOoc,GAAAlgB,QAAQqiB,OAAOve,MAKxBkpE,iBAnCQ,SAmCUhrD,EAASX,GAU1B,MATc2I,GAAKK,YAAYhJ,GAASxd,KAAM,SAAAC,GAK7C,MAJAke,GAAQC,OAAO,iBACdlY,MAASjG,EAAI3B,KACbmH,MAASxF,EAAI0e,UAAUC,cAEjBvC,EAAAlgB,QAAQmO,QAAQrK,KACrBG,MAAO,SAACH,GACV,MAAOoc,GAAAlgB,QAAQqiB,OAAOve,MAKxBmpE,kBAhDQ,SAgDWjrD,EAASX,GAiBxB,MAhBc2I,GAAKQ,cAClB1hB,WAAc,EACdC,KAAQsY,EAAQxb,UACnB6B,SAAY2Z,EAAQ3Z,WACf7D,KAAM,SAAAC,GAQX,MAPGA,GAAI3B,KAAKmM,IAAI,SAAAnM,GACZA,EAAK0lB,SAAW,IAEpB7F,EAAQC,OAAO,iBACdlY,MAASjG,EAAI3B,KACbmH,MAASxF,EAAI0e,UAAUC,cAEjBvC,EAAAlgB,QAAQmO,QAAQrK,KAClBG,MAAO,SAACH,GACb,MAAOoc,GAAAlgB,QAAQqiB,OAAOve,MAKxBopE,cApEQ,SAoEOlrD,EAASX,GAQpB,MAPc2I,GAAKC,UAClBtC,OAAQtG,EAAQsG,SACd9jB,KAAM,SAAAC,GACX,MAAOoc,GAAAlgB,QAAQmO,QAAQrK,KAClBG,MAAO,SAACH,GACb,MAAOoc,GAAAlgB,QAAQqiB,OAAOve,MAKxBqpE,cA/EQ,SA+EOnrD,EAASX,GAQpB,MAPc2I,GAAKjC,UAClBJ,OAAQtG,EAAQsG,SACd9jB,KAAM,SAAAC,GACX,MAAOoc,GAAAlgB,QAAQmO,QAAQrK,KAClBG,MAAO,SAACH,GACb,MAAOoc,GAAAlgB,QAAQqiB,OAAOve,MAKxBspE,eA1FQ,SA0FQprD,EAASX,GAQrB,MAPc2I,GAAKE,WAClBvC,OAAQtG,EAAQsG,SACd9jB,KAAM,SAAAC,GACX,MAAOoc,GAAAlgB,QAAQmO,QAAQrK,KAClBG,MAAO,SAACH,GACb,MAAOoc,GAAAlgB,QAAQqiB,OAAOve,MAKxBupE,eArGQ,SAqGQrrD,EAASX,GAQrB,MAPc2I,GAAKI,WAClBzC,OAAQtG,EAAQsG,SACd9jB,KAAM,SAAAC,GACX,MAAOoc,GAAAlgB,QAAQmO,QAAQrK,KAClBG,MAAO,SAACH,GACb,MAAOoc,GAAAlgB,QAAQqiB,OAAOve,MAKxBwpE,0BAhHQ,SAgHmBtrD,EAASX,GAUnC,MATc2I,GAAKujD,qBAAqBlsD,GAASxd,KAAM,SAAAC,GAKtD,MAJAke,GAAQC,OAAO,iBACdlY,MAASjG,EAAI3B,KACbmH,MAASxF,EAAI3B,KAAKI,SAEZ2d,EAAAlgB,QAAQmO,QAAQrK,KACrBG,MAAO,SAACH,GACV,MAAOoc,GAAAlgB,QAAQqiB,OAAOve,MAKxB0pE,uBA7HQ,SA6HgBxrD,EAASX,GAUhC,MATc2I,GAAKyjD,kBAAkBpsD,GAASxd,KAAM,SAAAC,GAKnD,MAJAke,GAAQC,OAAO,iBACdlY,MAASjG,EAAI3B,KACbmH,MAASxF,EAAI3B,KAAKI,SAEZ2d,EAAAlgB,QAAQmO,QAAQrK,KACrBG,MAAO,SAACH,GACV,MAAOoc,GAAAlgB,QAAQqiB,OAAOve,MAKxB4pE,mBA1IQ,SA0IY1rD,EAASX,GAS5B,MARc2I,GAAK2jD,cAActsD,GAASxd,KAAM,SAAAC,GAI/C,MAHAke,GAAQC,OAAO,gBACd5M,KAAQvR,EAAI4kE,cAENxoD,EAAAlgB,QAAQmO,QAAQrK,KACrBG,MAAO,SAACH,GACV,MAAOoc,GAAAlgB,QAAQqiB,OAAOve,S5Dmo2BpB8pE,KACA,SAAUvuE,EAAQC,G6Dzz2BxBD,EAAAC,SAAgB4F,OAAA,WAAmB,GAAAC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OACAE,YAAA,oBACGF,EAAA,OACHE,YAAA,yBACGF,EAAA,OACHE,YAAA,yBACGF,EAAA,OACHE,YAAA,QACGF,EAAA,OACHG,OACAoH,IAAA1H,EAAA1E,KAAAyG,YAAA/B,EAAAhF,YAEGgF,EAAAO,GAAA,KAAAJ,EAAA,OACHQ,aACA7F,KAAA,OACA8F,QAAA,SACArG,MAAAyF,EAAA5B,SAAA9B,KAAA0D,EAAAgE,QACAnD,WAAA,4BAEAR,YAAA,OACAC,OACAoW,GAAA,gCAEG1W,EAAAO,GAAA,KAAAJ,EAAA,aACHG,OACAQ,KAAA,IACAshD,OAAA,6BACAvuC,UAAA,oBAEA5S,IACAsmD,mBAAAvnD,EAAAgR,aAEG,GAAAhR,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,0BACGF,EAAA,OACHE,YAAA,SACGF,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAA1E,KAAA2M,cAAAjI,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,SAAAJ,EAAA,QAAAH,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAA1E,KAAAuoE,cAAA7jE,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,QACGF,EAAA,OACHE,YAAA,oBACAG,QACAkoE,WAAA,GAAA1oE,EAAA1E,KAAAonB,WAEAzhB,IACAQ,MAAAzB,EAAAyiB,UAEGziB,EAAA5B,SAAA9B,KAAA0D,EAAAgE,QAAA7D,EAAA,QAAAH,EAAAO,GAAAP,EAAA4B,GAAA,GAAA5B,EAAA1E,KAAAonB,UAAA,GAAA1iB,EAAA1E,KAAAonB,SAAA,iBAAAviB,EAAA,KACHG,OACAxD,KAAA,2BAEGkD,EAAAO,GAAA,YAAAP,EAAAO,GAAA,KAAAP,EAAAyH,GAAA,GAAAzH,EAAAO,GAAA,KAAAP,EAAA5B,SAAA9B,KAAA0D,EAAAgE,QAAA7D,EAAA,OACHE,YAAA,sBACGF,EAAA,OACHE,YAAA,wBACGF,EAAA,OACHE,YAAA,OACAY,IACAQ,MAAAzB,EAAA2iB,kBAEGxiB,EAAA,OACHE,YAAA,sBACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,aAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,OACAY,IACAQ,MAAAzB,EAAA8iB,aAEG3iB,EAAA,OACHE,YAAA,uBACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,cAAAP,EAAA0B,OAAA1B,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,SACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAA1E,KAAAq9C,qBACF32C,iBAAA,WAA+B,GAAAhC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CACvE,OAAAE,GAAA,OACAE,YAAA,uBACGF,EAAA,OACHE,YAAA,wBACGF,EAAA,OACHE,YAAA,SACGF,EAAA,OACHE,YAAA,mBACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,UAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,SACGF,EAAA,OACHE,YAAA,qBACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,WAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,SACGF,EAAA,OACHE,YAAA,mBACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,UAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,SACGF,EAAA,OACHE,YAAA,mBACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,aAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,SACGF,EAAA,OACHE,YAAA,qBACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,aAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,SACGF,EAAA,OACHE,YAAA,qBACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,cACGL,EAAAO,GAAA,kB7Dg02BGooE,KACA,SAAUzuE,EAAQC,G8D172BxBD,EAAAC,SAAgB4F,OAAA,WAAmB,GAAAC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OACAE,YAAA,WACAG,OACAooE,UAAA5oE,EAAAjF,KAAAmI,MAEA5C,OACAoW,GAAA,YAEGvW,EAAA,OACHE,YAAA,gBACAY,IACAQ,MAAAzB,EAAAsH,SAEGtH,EAAAO,GAAA,YAAAP,EAAAjF,KAAA+F,KAAAX,EAAA,OACHE,YAAA,eACAG,MAAAR,EAAAjF,KAAA2K,IAAAO,SACGjG,EAAAO,GAAA,aAAAP,EAAA4B,GAAA5B,EAAAjF,KAAA2K,IAAAQ,KAAA,YAAAlG,EAAA0B,KAAA1B,EAAAO,GAAA,eAAAP,EAAAjF,KAAA+F,KAAAX,EAAA,OACHE,YAAA,oBACGF,EAAA,OACHE,YAAA,iBACGL,EAAAO,GAAA,8BAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,mBACGF,EAAA,OACHE,YAAA,mBACAC,OACAuoE,YAAA,OAEA5nE,IACAQ,MAAAzB,EAAA8oE,eAEG9oE,EAAAyH,GAAA,GAAAzH,EAAAO,GAAA,KAAAJ,EAAA,QACHE,YAAA,qBACGL,EAAAO,GAAA,gBAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,cACAC,OACAuoE,YAAA,QAEA5nE,IACAQ,MAAAzB,EAAA8oE,eAEG9oE,EAAAyH,GAAA,GAAAzH,EAAAO,GAAA,KAAAJ,EAAA,QACHE,YAAA,qBACGL,EAAAO,GAAA,gBAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,cACAC,OACAuoE,YAAA,SAEA5nE,IACAQ,MAAAzB,EAAA8oE,eAEG9oE,EAAAyH,GAAA,GAAAzH,EAAAO,GAAA,KAAAJ,EAAA,QACHE,YAAA,qBACGL,EAAAO,GAAA,YAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,iBACGF,EAAA,YACHQ,aACA7F,KAAA,QACA8F,QAAA,UACArG,MAAAyF,EAAA,QACAa,WAAA,YAEAP,OACAS,YAAA,WAEAC,UACAzG,MAAAyF,EAAA,SAEAiB,IACAK,MAAA,SAAAH,GACAA,EAAAI,OAAAC,YACAxB,EAAAqD,QAAAlC,EAAAI,OAAAhH,eAGGyF,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,kBACGF,EAAA,OACHE,YAAA,0CACAY,IACAQ,MAAAzB,EAAAsH,SAEGtH,EAAAO,GAAA,QAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,2CACAY,IACAQ,MAAAzB,EAAA8iB,aAEG9iB,EAAAO,GAAA,YAAAP,EAAA0B,KAAA1B,EAAAO,GAAA,oBAAAP,EAAAjF,KAAA+F,KAAAX,EAAA,OACHE,YAAA,yBACGF,EAAA,OACHE,YAAA,sBACGL,EAAAO,GAAA,UAAAP,EAAAO,GAAA,KAAAP,EAAAyH,GAAA,GAAAzH,EAAAO,GAAA,KAAAP,EAAAyH,GAAA,KAAAzH,EAAA0B,KAAA1B,EAAAO,GAAA,aAAAP,EAAAjF,KAAA+F,KAAAX,EAAA,OACHE,YAAA,kBACGF,EAAA,OACHE,YAAA,eACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAAjF,KAAAoI,KAAAC,UAAApD,EAAAO,GAAA,KAAAP,EAAAjF,KAAAoI,KAAA,KAAAhD,EAAA,OACHE,YAAA,eACAW,UACA6oC,UAAA7pC,EAAA4B,GAAA5B,EAAAjF,KAAAoI,KAAA25C,SAEG38C,EAAA,OACHE,YAAA,iBACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAAjF,KAAAoI,KAAAE,YAAArD,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,gBACGF,EAAA,OACHE,YAAA,sCACAY,IACAQ,MAAAzB,EAAAsH,SAEGtH,EAAAO,GAAA,QAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,uCACAY,IACAQ,MAAAzB,EAAA+oE,WAEG/oE,EAAAO,GAAA,YAAAP,EAAA0B,KAAA1B,EAAAO,GAAA,iBAAAP,EAAAjF,KAAA+F,KAAAX,EAAA,OACHE,YAAA,sBACGF,EAAA,OACHE,YAAA,mBACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAAjF,KAAAiuE,SAAA5lE,UAAApD,EAAAO,GAAA,KAAAP,EAAAyH,GAAA,GAAAzH,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,oBACGF,EAAA,OACHE,YAAA,8CACAY,IACAQ,MAAAzB,EAAAsH,SAEGtH,EAAAO,GAAA,UAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,+CACAY,IACAQ,MAAAzB,EAAAipE,cAEGjpE,EAAAO,GAAA,cAAAP,EAAA0B,QACFM,iBAAA,WAA+B,GAAAhC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CACvE,OAAAE,GAAA,QACAE,YAAA,sBACGF,EAAA,SACF,WAAa,GAAAH,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CACrD,OAAAE,GAAA,QACAE,YAAA,sBACGF,EAAA,SACF,WAAa,GAAAH,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CACrD,OAAAE,GAAA,QACAE,YAAA,sBACGF,EAAA,SACF,WAAa,GAAAH,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CACrD,OAAAE,GAAA,OACAE,YAAA,wBACGF,EAAA,MAAAH,EAAAO,GAAA,gFAAAP,EAAAO,GAAA,KAAAJ,EAAA,KAAAH,EAAAO,GAAA,uEAAAP,EAAAO,GAAA,KAAAJ,EAAA,KAAAH,EAAAO,GAAA,sBAAAP,EAAAO,GAAA,KAAAJ,EAAA,KAAAH,EAAAO,GAAA,oFAAAP,EAAAO,GAAA,KAAAJ,EAAA,KAAAH,EAAAO,GAAA,0CAAAP,EAAAO,GAAA,KAAAJ,EAAA,KAAAH,EAAAO,GAAA,iBAAAP,EAAAO,GAAA,KAAAJ,EAAA,KAAAH,EAAAO,GAAA,eAAAP,EAAAO,GAAA,KAAAJ,EAAA,KAAAH,EAAAO,GAAA,wBAAAP,EAAAO,GAAA,KAAAJ,EAAA,KAAAH,EAAAO,GAAA,yBAAAP,EAAAO,GAAA,KAAAJ,EAAA,KAAAH,EAAAO,GAAA,oFACF,WAAa,GAAAP,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CACrD,OAAAE,GAAA,OACAE,YAAA,uBACGF,EAAA,OACHE,YAAA,wDACGL,EAAAO,GAAA,QAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,4DACGL,EAAAO,GAAA,WACF,WAAa,GAAAP,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CACrD,OAAAE,GAAA,OACAE,YAAA,qBACGF,EAAA,KAAAH,EAAAO,GAAA,UAAAP,EAAAO,GAAA,KAAAJ,EAAA,KAAAH,EAAAO,GAAA,6BAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,mBACGF,EAAA,OACHE,YAAA,wBACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,0BACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,wBACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,0BACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,wBACGL,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,kC9Dk82BM6oE,KACA,SAAUhvE,EAAQC,KAMlBgvE,KACA,SAAUjvE,EAAQC,EAASC,G+Dln3BjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,S/D2n3BMivE,KACA,SAAUlvE,EAAQC,EAASC;;;;CgEvo3BjC,SAAA2rB,EAAAC,GAGA9rB,EAAAC,QAAA6rB,KAICnqB,EAAA,WACD,YAGA,SAAAwM,GAAAC,GACA,GAAAC,EAIA,WAHAlE,SAAAmE,MACA,8EAIAD,GAAAD,EACAC,EAAAE,UAAA5K,UAAA,GAAAwrE,GAIA,QAAAA,KACAxtE,KAAAmE,IAAA,GAAAuI,GAdA,GAAAA,EAgCA,OAhBA8gE,GAAA5gE,WACAjJ,IAAA,SAAA4rC,EAAA1gB,GAEA,MADA7uB,MAAAmE,IAAAR,IAAA4rC,EAAA1gB,GACA7uB,MAEAiC,MAAA,SAAAstC,EAAAlvB,GAEA,MADArgB,MAAAmE,IAAAlC,MAAAstC,EAAAlvB,GACArgB,QAKAwM,UACA7J,QAAA,YhEop3BM8qE,KACA,SAAUpvE,EAAQC,EAASC,GAEjC,YAGAC,QAAOC,eAAeH,EAAS,cAC3BI,OAAO,IAEXJ,EAAQU,SACJM,OAAQ,QAAS,SAAU,QiE9l3B/B,OjE+l3BIC,UACImuE,MAAO,WACH,MAAO36D,MAAK8B,KAAK7U,KAAKsI,MAAQtI,KiE9l3B1CuB,UjEim3BIM,SACIkF,WAAY,SAAoBmC,GAC5B,GiE5l3BZykE,GjE4l3BgBtmD,EAAOne,EiE9l3BvBxD,OjE+l3BgBxF,EAAQmnB,EAAKojC,QiE9l3B7B,KjEim3BgBkjB,GADS,QAATztE,EACOF,KAAKE,MiE9l3B5B,EjE+l3BgC,QAATA,EACAF,KAAKE,MiE9l3B5B,EjEgm3BuByqB,SiE9l3BvBzqB,GjEgm3BYF,KAAKiC,MAAM,cAAe0rE,EAAM3tE,KiE9l3B5Coa,OjEim3BIlW,OAAQ,SAAgBm1B,GAQpB,IAAK,GAPDjyB,GiE9l3BZpH,KjE+l3BYE,EAAQF,KiE9l3BpBE,MjE+l3BYwtE,EAAQ1tE,KiE9l3BpB0tE,MjE+l3BYE,KACAC,GiE9l3BZ,EjE+l3BYr1C,EiE9l3BZ,EjE+l3BYs1C,EiE9l3BZ,EjE+l3BiBzsE,EAAI,EAAGA,EAAIqsE,EAAOrsE,IACvBusE,EAAKvsE,GiE9l3BjBA,CjEgm3BQ,OAAa,IAATqsE,EiE7l3BZ,IjEgm3BqB,GAATxtE,GAAcA,GAASwtE,IACvBG,GiE9l3BZ,GjEgm3BY3tE,EAAQ,EAAI,IACZ4tE,EAAQD,EAAa,EAAI3tE,EAAQ,EiE9l3B7CA,GjEgm3BYwtE,EAAQxtE,EAAQ,IAChBs4B,EAAOq1C,EAAa,GAAKH,EAAQxtE,GAAS,GAAKwtE,EiE9l3B3DxtE,IAEAm5B,EjE+l3BY,OACE10B,MiE9l3Bd,iBjE+l3BsB,GAATzE,EAAam5B,EACV,OACE10B,MAAS,cAAeF,OAAS2oB,aAAc,QAC7ChoB,IACIQ,MAASwB,EAAKL,iBiEhm3BtC,GAAA6mE,EAAAtgE,IAAA,SAAAvB,EAAA1K,GjEqm3BgB,GAAIsrB,GAAStrB,EiEjm3B7B,CjEmm3BgB,OAAIsrB,GAAS,EAAI6L,EAAOt4B,EiEjm3BxC,GjEqm3BoBA,EAAQ,EAAI4tE,EAAQnhD,EiEhm3BxC,IAEAkhD,IACAx0C,EjEkm3BoB,OACE10B,MAAS,SAAWgoB,GAAUzsB,EAAQ,OAAS,IAAKuE,OAAS2oB,aAAcT,GACzEvnB,IACIQ,MAASwB,EAAKL,ciEnm3B1C4lB,OAGAzsB,GAAAwtE,EAAAr0C,EjEsm3BgB,OACE10B,MAAS,cAAeF,OAAS2oB,aAAc,QAC7ChoB,IACIQ,MAASwB,EAAKL,iBiEvm3BtC,GAAAsyB,EjE4m3BgB,OACE10B,MAAS,SACV,KAAgB00B,EACb,OACA,MiE/m3BpBq0C,IjEin3BmB,QACJr0C,EACC,OACE10B,MAAS,yBACV00B,EACG,SAEI50B,OAASQ,KiEvn3BjC,ejE2n3Beo0B,EACC,OACE10B,MiE1n3BlB,2BjE2n3BiB,aAQXopE,OACA,SAAU1vE,EAAQC,EAASC,GAEjC,YAkBA,SAAS0pB,GAAuBnpB,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GkE5y3BvF,QAAS0qB,GAAa5lB,GACrB,GAAI3D,GAAMioB,EAAAC,QAAU,mBAGpB,OAAKG,UAOE1kB,GAAO8kB,SACP,EAAAN,EAAAppB,UACNqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,EACRkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GACf,OAAO,EAAAub,EAAAM,YAAW7b,OApBd,EAAAub,EAAAM,aACNlH,KAAM,GACNjX,IAAK,QAoCR,QAAS4e,GAASrlB,GACjB,GAAI3D,GAAMioB,EAAAC,QAAU,iBAAiBvkB,EAAO+iB,MAG5C,OAAK2B,UAOE1kB,GAAO8kB,SACP,EAAAN,EAAAppB,UACNqpB,OAAQ,SACRpoB,IAAKA,EACL6N,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GACf,OAAO,EAAAub,EAAAM,YAAW7b,OAnBd,EAAAub,EAAAM,aACNlH,KAAM,GACNjX,IAAK,QAkCR,QAAS0c,GAASnjB,GACjB,GAAI3D,GAAMioB,EAAAC,QAAU,iBAAiBvkB,EAAO+iB,MAG5C,OAAK2B,UAOE1kB,GAAO8kB,SACP,EAAAN,EAAAppB,UACNqpB,OAAQ,MACRpoB,IAAKA,EACL6N,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GACf,OAAO,EAAAub,EAAAM,YAAW7b,OAnBd,EAAAub,EAAAM,aACNlH,KAAM,GACNjX,IAAK,QAkCR,QAAS6e,GAAUtlB,GAClB,GAAI3D,GAAMioB,EAAAC,QAAU,kBAAkBvkB,EAAO+iB,MAG7C,OAAK2B,UAOE1kB,GAAO8kB,SACP,EAAAN,EAAAppB,UACNqpB,OAAQ,MACRpoB,IAAKA,EACL6N,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GACf,OAAO,EAAAub,EAAAM,YAAW7b,OAnBd,EAAAub,EAAAM,aACNlH,KAAM,GACNjX,IAAK,QAmCR,QAAS+e,GAAUxlB,GAClB,GAAI3D,GAAMioB,EAAAC,QAAU,kBAAkBvkB,EAAO+iB,MAG7C,OAAK2B,UAOE1kB,GAAO8kB,SACP,EAAAN,EAAAppB,UACNqpB,OAAQ,SACRpoB,IAAKA,EACL6N,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GACf,OAAO,EAAAub,EAAAM,YAAW7b,OAnBd,EAAAub,EAAAM,aACNlH,KAAM,GACNjX,IAAK,QAsDR,QAASgf,GAAYzlB,GACpB,GAAI3D,GAAMioB,EAAAC,QAAU,kBAkBpB,QAhBc,EAAAC,EAAAppB,UACbqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,EACRkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KA0CpB,QAAS2c,GAAc1lB,GACtB,GAAI3D,GAAMioB,EAAAC,QAAU,oBA0BpB,QAhBc,EAAAC,EAAAppB,UACbqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,EACRkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KA0CpB,QAAS4c,GAAY3lB,GACpB,GAAI3D,GAAMioB,EAAAC,QAAU,kBA0BpB,QAhBc,EAAAC,EAAAppB,UACbqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,EACRkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KAwCpB,QAAS4/D,GAAqB3oE,GAC7B,GAAI3D,GAAMioB,EAAAC,QAAU,2BAGpB,cADOvkB,GAAO8kB,SACP,EAAAN,EAAAppB,UACNqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,EACRkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GACf,OAAO,EAAAub,EAAAM,YAAW7b,KAuCvB,QAAS8/D,GAAkB7oE,GAC1B,GAAI3D,GAAMioB,EAAAC,QAAU,wBAGpB,cADOvkB,GAAO8kB,SACP,EAAAN,EAAAppB,UACNqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,EACRkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GACf,OAAO,EAAAub,EAAAM,YAAW7b,KAIvB,QAASggE,GAAc/oE,GACtB,GAAI3D,GAAMioB,EAAAC,QAAU,oBAGpB,OAAKG,UAOE1kB,GAAO8kB,SACP,EAAAN,EAAAppB,UACNqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,EACRkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GACf,OAAO,EAAAub,EAAAM,YAAW7b,OApBd,EAAAub,EAAAM,aACNlH,KAAM,GACNjX,IAAK,QlEyy2BR7L,OAAOC,eAAeH,EAAS,cAC9BI,OAAO,IAERJ,EAAQiqB,QAAUjqB,EAAQquE,cAAgBruE,EAAQmuE,kBAAoBnuE,EAAQiuE,qBAAuBjuE,EAAQ+qB,YAAc/qB,EAAQ8qB,UAAY9qB,EAAQ4qB,UAAY5qB,EAAQyoB,SAAWzoB,EAAQ2qB,SAAW3qB,EAAQkrB,aAAelrB,EAAQgrB,cAAgBhrB,EAAQirB,gBAAcZ,EkEl03B9Q,IAAAT,GAAA3pB,EAAA,QACAsqB,EAAAtqB,EAAA,QlEu03BIuqB,EAAab,EAAuBY,GkEr03BxCD,EAAArqB,EAAA,QlEy03BI6pB,EAAUH,EAAuBW,EkEx03BrCR,GAAAppB,QAAMmkC,SAASr1B,QAAQ0C,IAAI,gBAAkB,oCAC7C4X,EAAAppB,QAAMmkC,SAASr1B,QAAQ0C,IAAI,oBAAsB,gBACjD,IAAI8X,GAAQQ,EAAA9pB,QAAQwR,IAAI,QlE8l4BxBlS,GkEvj3BCirB,clEwj3BDjrB,EkEvj3BCgrB,gBlEwj3BDhrB,EkEvj3BCkrB,elEwj3BDlrB,EkEvj3BC2qB,WlEwj3BD3qB,EkEvj3BCyoB,WlEwj3BDzoB,EkEvj3BC4qB,YlEwj3BD5qB,EkEvj3BC8qB,YlEwj3BD9qB,EkEvj3BC+qB,clEwj3BD/qB,EkEvj3BCiuE,uBlEwj3BDjuE,EkEvj3BCmuE,oBlEwj3BDnuE,EkEvj3BCquE,gBlEwj3BDruE,EkEvj3BCiqB,QlEuj3BiBL,EAAQK,SAIpBylD,KACA,SAAU3vE,EAAQC,KAMlB2vE,KACA,SAAU5vE,EAAQC,EAASC,GAEjC,YAGAC,QAAOC,eAAeH,EAAS,cAC3BI,OAAO,GmEv13BX,IAAAC,GAAAJ,EAAA,QAEAK,EAAAL,EAAA,QnE413BIM,EAEJ,SAAgCC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,IAFjDF,EAItCN,GAAQU,SACJE,KAAM,WACF,OmE913BRC,OAAAN,EAAAG,QnEg23BYkkB,OACIgrD,OmE/13BhB,KnEg23BgBC,OmE/13BhB,KnEg23BgBC,OmE913BhB,MnEg23BY5kE,WmE913BZ,KnEk23BIjK,UAAU,EAAIZ,EAAMa,WAChB+C,SAAU,SAAkB7C,GACxB,MAAOA,GAAMD,KmEj23BzBE,MnEm23BQkgB,QAAS,SAAiBngB,GACtB,MAAOA,GAAMkH,KAAKiZ,QmEl23B9BlgB,QnEq23BIkC,SACI8hB,cAAe,WACX3jB,KAAKgC,UAAUC,MAAM,0BACjBoF,MmEp23BhB,EnEq23BgBwY,QAAS7f,KmEn23BzB6f,WnEs23BQgE,iBAAkB,WmEp23B1B,GAAAzhB,GAAApC,InEu23BYA,MAAKQ,OAAOoC,SAAS,yBACjBuE,UAAWnH,KmEt23B3BwJ,aADA3G,KAAA,SAAAC,GnE423BgB,IAAK,GAHDurE,ImEr23BpB,EnEs23BoBxlE,EAAgBzG,EAAME,SmEr23B1CwG,QnEs23BoBwlE,EAAkBlsE,EAAMI,OAAOC,SAASoG,EAAcnG,IAAKmG,EAAclG,aACpEtB,EAAI,EAAGC,EAAMgtE,EAAgB/sE,OAAQF,EAAIC,EAAKD,IACnD,GAAIitE,EAAgBjtE,GAAGmI,YAAc1G,EAAInD,KAAK6J,WmEr23BlE,CnEs23BwB6kE,GmEr23BxB,CACA,QnEw23BiBA,GAASC,EAAgB19D,KAAK9N,EmEr23B/CnD,MnEs23BgByC,EAAMI,OAAOO,SAAS8F,EAAcnG,IAAK4rE,EAAiBzlE,EAAclG,QAASkG,EmEn23BjG7F,MnEq23BgBZ,EAAM5B,OAAOoC,SAAS,iBmEp23BtCE,KnEq23BeG,MAAM,SAAUC,GACfd,EAAM5B,OAAOoC,SAAS,cmEp23BtCM,MnEu23BQ+F,aAAc,SAAsB9B,GmEp23B5C,GAAA3D,GAAAxD,InEu23BYA,MAAKQ,OAAOoC,SAAS,qBACjBuE,UmEt23BhBA,IADAtE,KAAA,SAAAC,GnEy23BgBU,EmEr23BhBqgB,mBnEu23BgBrgB,EAAOhD,OAAOoC,SAAS,iBmEt23BvCE,KnEu23BeG,MAAM,SAAUC,GACfM,EAAOhD,OAAOoC,SAAS,cmEt23BvCM,MnEy23BQkf,aAAc,SAAsBjb,GmEt23B5C,GAAAzD,GAAA1D,InEy23BYA,MAAKQ,OAAOoC,SAAS,qBACjBuE,UmEx23BhBA,IADAtE,KAAA,SAAAC,GnE223BgBY,EmEv23BhBmgB,mBnEy23BgBngB,EAAOlD,OAAOoC,SAAS,iBmEx23BvCE,KnEy23BeG,MAAM,SAAUC,GACfQ,EAAOlD,OAAOoC,SAAS,cmEx23BvCM,MnE223BQ/C,KAAM,SAAcgH,GAChB,IAAKnH,KAAKuC,SAASuD,QACf,MAAO9F,MAAKQ,OAAOoC,SAAS,eACxB0e,KmEv23BpB,GnEw23BoBjX,ImEt23BpB,cnE223B6C,IAA7BrK,KAAK6f,QAAQ2rD,aACbxrE,KAAKiJ,amEv23BrB9B,GnEy23BgBnH,KAAKoiB,amEv23BrBjb,InE023BQ8f,UAAW,WACP,IAAKjnB,KAAKuC,SAASuD,QACf,MAAO9F,MAAKQ,OAAOoC,SAAS,eACxB0e,KmEr23BpB,GnEs23BoBjX,ImEp23BpB,cnEy23BYrK,MAAKQ,OAAOoC,SAAS,qBACjByE,MmEr23BhB,EnEs23BgBpC,KmEr23BhB,SnEs23BgBiiB,QACIC,WAAYnnB,KAAK6f,QmEr23BrCrW,WnEs23BoB4d,amEn23BpB,OnEw23BI3jB,QAAS,WACLzD,KAAKgC,UAAU2B,IAAI,wBAAyB,SAAUb,MAEtD9C,KAAKwJ,WAAaxJ,KAAK8D,KAAKC,YmE/13BpC,cnEi23BQ/D,KmEh23BR6jB,sBnEs23BM0qD,KACA,SAAUlwE,EAAQC,EAASC,GAEjC,cAC4B,SAASgI,GAErC/H,OAAOC,eAAeH,EAAS,cAC3BI,OAAO,IAEXJ,EAAQU,SACJC,KoEr/3BJ,OpEs/3BIC,KAAM,WACF,OACIsvE,WoEr/3BZ,EpEs/3BYre,OoEp/3BZ,OpEw/3BI7wD,OoEt/3BJ,WpEu/3BIuC,SACI+D,MAAO,WACH5F,KAAKiC,MoEt/3BjB,epEw/3BQkT,SAAU,SAAkBsR,GACxB,GAAIgoD,GAAU,wCAA0ChoD,EoEt/3BpE,SpEu/3BYzmB,MAAKmwD,OAAOgE,QAAQ,KAAM,aoEt/3BtCsa,IpEw/3BQ9hE,MAAO,SAAezJ,IACD,KAAbA,EAAImR,KACJrU,KAAKQ,OAAOoC,SAAS,qBACjByE,MoEt/3BpB,EpEu/3BoBpC,KoEt/3BpB,MpEu/3BoB4E,KACIO,OoEt/3BxB,SpEu/3BwBC,IoEp/3BxB,+CpEu/3BoC,KAAbnH,EAAImR,KACXrU,KAAKQ,OAAOoC,SAAS,qBACjByE,MoEt/3BpB,EpEu/3BoBpC,KoEt/3BpB,MpEu/3BoB4E,KACIO,OoEt/3BxB,SpEu/3BwBC,IoEp/3BxB,kDpEu/3BoC,KAAbnH,EAAImR,KACXrU,KAAKQ,OAAOoC,SAAS,qBACjByE,MoEt/3BpB,EpEu/3BoBpC,KoEt/3BpB,MpEu/3BoB4E,KACIO,OoEt/3BxB,SpEu/3BwBC,IoEp/3BxB,kBpEw/3BgBrK,KAAKQ,OAAOoC,SAAS,qBACjByE,MoEt/3BpB,EpEu/3BoBpC,KoEt/3BpB,MpEu/3BoB4E,KACIO,OoEt/3BxB,SpEu/3BwBC,IAAKnH,EoEp/3B7B+X,apEy/3BQyzD,OAAQ,WACJ,GAAIhwE,GAAQsB,KAAKmwD,OAAOC,KoEr/3BpCnP,MpEs/3BYjhD,MAAKiC,MAAM,SoEr/3BvBvD,IpEu/3BQiwE,QAAS,WACL,GAAIjwE,GAAQsB,KAAKmwD,OAAOC,KoEp/3BpCnP,MpEq/3BYjhD,MAAKiC,MAAM,UoEp/3BvBvD,IpEs/3BQkwE,KAAM,WACF,GAAIlwE,GAAQsB,KAAKmwD,OAAOC,KoEn/3BpCnP,MpEo/3BYjhD,MAAKiC,MAAM,OoEn/3BvBvD,KpEs/3BIysD,OACI3jD,QAAS,WACLxH,KAAKmwD,OAAOC,KAAKnP,KAAKjhD,KoEn/3BlCwH,WpEs/3BI/D,QAAS,WoEn/3Bb,GAAArB,GAAApC,IpEs/3BQA,MAAKmwD,OAAS,GAAInwD,MAAKgnE,MoEp/3B/B,QpEs/3BQhnE,KAAKmwD,OoEn/3BbjJ,SpEq/3BQlnD,KAAKmwD,OAAOC,KAAKnP,KAAKjhD,KoEl/3B9BwH,QpEo/3BQ,IAAIqjD,GAAOtkD,EoEn/3BnB,wGpEo/3BYqoE,EAAOroE,EoEn/3BnB,sGpEo/3BYooE,EAAUpoE,EoEn/3BtB,8EpEo/3BYsoE,EAAQtoE,EAAE,kCAAkC8kD,IAAI,QoEn/3B5D,QpEo/3BQwjB,GAAMpyD,OAAOouC,GAAMpuC,OAAOmyD,GAAMnyD,OoEn/3BxCkyD,GpEo/3BQpoE,EAAE,8BAA8BkW,OoEl/3BxCoyD,GpEo/3BQhkB,EAAKzlD,GAAG,QAAS,SAAUtC,GACvBV,EoEn/3BZssE,WpEs/3BQC,EAAQvpE,GAAG,QAAS,SAAUtC,GAC1BV,EoEn/3BZusE,YpEs/3BQC,EAAKxpE,GAAG,QAAS,SAAUtC,GACvBV,EoEn/3BZwsE,SpEs/3BQ5uE,KAAKwuE,WoEl/3Bb,EpEm/3BQxuE,KAAKiC,MAAM,YAAajC,KoEj/3BhCmwD,QpEm/3BQ5pD,EAAE,mBAAmBwD,OAAOxD,EAAEvF,QAAQ+I,SoEl/3B9C,KpEm/3BQxD,EAAEvF,QAAQoE,GAAG,SAAU,WACnBmB,EAAE,mBAAmBwD,OAAOxD,EAAEvF,QAAQ+I,SoEl/3BlD,WpEs/3B6BO,KAAKhM,EAASC,EAAoB,UAIzDuwE,KACA,SAAUzwE,EAAQC,KAMlBywE,KACA,SAAU1wE,EAAQC,GqE344BxBD,EAAAC,SAAgB4F,OAAA,WAAmB,GAAAC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OACAE,YAAA,kBACGF,EAAA,OACHE,YAAA,uBACGL,EAAAqG,GAAArG,EAAAwC,QAAA,eAAAzH,GACH,MAAAoF,GAAA,OACAE,YAAA,kBACKF,EAAA,OACLE,YAAA,qBACAC,OACA8mE,kBAAArsE,EAAAsK,cAEKlF,EAAA,KACLE,YAAA,0BACAC,OACAxD,KAAA,6BAAA/B,EAAAsK,cAEKlF,EAAA,OACLE,YAAA,cACKF,EAAA,OACLE,YAAA,mBACKF,EAAA,OACLG,OACAoH,IAAA3M,EAAAmkB,uBAEKlf,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,oBACKL,EAAAO,GAAAP,EAAA4B,GAAA7G,EAAAwgB,qBAAAvb,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,eACKF,EAAA,OACLE,YAAA,uBACKL,EAAAO,GAAAP,EAAA4B,GAAA7G,EAAAikB,kBAAAhf,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,wBACKL,EAAAO,GAAAP,EAAA4B,GAAA7G,EAAAkkB,aAAA7hB,OAAA,GAAArC,EAAAkkB,aAAA2f,OAAA,YAAA7jC,EAAAkkB,iBAAAjf,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,oBACKL,EAAAqG,GAAAtL,EAAA,gBAAA+I,GACL,MAAA3D,GAAA,KACAK,OACAqqE,WAAA7qE,EAAAqC,UAAAyB,GAEAxD,OACAxD,KAAA,wBAAAgH,KAEO9D,EAAAO,GAAAP,EAAA4B,GAAAkC,SACF9D,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,uBACK,UAAAL,EAAApC,QAAAuC,EAAA,KACLE,YAAA,kBACAC,OACAxD,KAAA,4BAAA/B,EAAAO,KAAAgB,OAEK6D,EAAA,OACLE,YAAA,oBACKF,EAAA,OACLG,OACAoH,IAAA3M,EAAAO,KAAAyG,YAAA/B,EAAAhF,YAEKgF,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,qBACKL,EAAAO,GAAAP,EAAA4B,GAAA7G,EAAAO,KAAA2M,gBAAAjI,EAAA0B,KAAA1B,EAAAO,GAAA,gBAAAP,EAAApC,QAAAuC,EAAA,OACLE,YAAA,qCACAY,IACAQ,MAAA,SAAAN,GACAA,EAAA0pC,iBACA7qC,EAAAoF,WAAArK,EAAAsK,gBAGKrF,EAAAO,GAAA,UAAAP,EAAA0B,KAAA1B,EAAAO,GAAA,aAAAP,EAAApC,SAAA,GAAA7C,EAAA2L,OAAA,GAAA3L,EAAAssE,aAAAlnE,EAAA,OACLE,YAAA,qCACAY,IACAQ,MAAA,SAAAN,GACAA,EAAA0pC,iBACA7qC,EAAA8E,aAAA3D,OAGKnB,EAAAO,GAAA,UAAAP,EAAA0B,KAAA1B,EAAAO,GAAA,eAAAP,EAAApC,SAAA,GAAA7C,EAAA2L,OAAA,GAAA3L,EAAAssE,aAAAlnE,EAAA,OACLE,YAAA,qCACKL,EAAAO,GAAA,UAAAP,EAAA0B,KAAA1B,EAAAO,GAAA,eAAAP,EAAApC,SAAA,GAAA7C,EAAA2L,MAAAvG,EAAA,KACLE,YAAA,kCACAC,OACAxD,KAAA,kCAAA/B,EAAAsK,WAAA,oBAEKrF,EAAAO,GAAA,UAAAP,EAAA0B,KAAA1B,EAAAO,GAAA,eAAAP,EAAApC,SAAA,GAAA7C,EAAA2L,MAAAvG,EAAA,OACLE,YAAA,kCACAY,IACAQ,MAAA,SAAAN,GACAA,EAAA4pC,kBACA5pC,EAAA0pC,iBACA7qC,EAAA+C,OAAAhI,EAAAsK,gBAGKrF,EAAAO,GAAA,UAAAP,EAAA0B,iBACF1B,EAAAO,GAAA,KAAAP,EAAAwC,QAAA2B,OAAA,EAAAhE,EAAA,SAAAH,EAAA0B,MAAA,GAAA1B,EAAAO,GAAA,aAAAP,EAAAyD,UAAA,GAAAzD,EAAAwC,QAAA2B,MAAAhE,EAAA,OACHE,YAAA,cACG,GAAAL,EAAAwC,QAAA2Y,MAAAnb,EAAAwC,QAAA+S,KAEA,GAAAvV,EAAAwC,QAAA2Y,KAAAhb,EAAA,OACHE,YAAA,qBACGF,EAAA,MAAAA,EAAA,QAAAH,EAAAO,GAAA,cAAAJ,EAAA,OACHE,YAAA,iBACGF,EAAA,MAAAA,EAAA,QAAAH,EAAAO,GAAA,YANAJ,EAAA,OACHE,YAAA,oBACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAA1E,KAAAqG,QAAA,sBAIA3B,EAAA0B,KAAA1B,EAAAO,GAAA,aAAAP,EAAAyD,SAAAtD,EAAA,QACHE,YAAA,aACAC,OACA6D,MAAAnE,EAAAwC,QAAA2B,MACA/G,OAAA4C,EAAAuC,SACAxG,MAAAiE,EAAAU,WAEAO,IACA6F,YAAA9G,EAAA4C,cAEG5C,EAAA0B,MAAA,IACFM,qBrEi54BK8oE,KACA,SAAU5wE,EAAQC,EAASC,GsEhg5BjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEA,KAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,StEyg5BM4wE,KACA,SAAU7wE,EAAQC,EAASC,GAEjC,YAsBA,SAAS0pB,GAAuBnpB,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GuEnh5BvF,QAASqwE,GAAcvrE,GACtB,GAAI3D,GAAMioB,EAAAC,QAAU,eAcpB,QAbc,EAAAC,EAAAppB,UACbqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,IACNf,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KA6BpB,QAASyiE,GAAmBxrE,GAC3B,GAAI3D,GAAMioB,EAAAC,QAAU,2BAGpB,OAAKG,IAOS,EAAAF,EAAAppB,UACbqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,EACRkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAOA,GAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,MAhBX,EAAAub,EAAAM,aACNlH,KAAM,GACNjX,IAAK,QAqCR,QAASglE,GAAYzrE,GACpB,GAAI3D,GAAMioB,EAAAC,QAAU,oBAGpB,OAAKG,IAOS,EAAAF,EAAAppB,UACbqpB,OAAQ,OACRpoB,IAAKA,EACLf,MAAM,EAAA6uD,EAAA/uD,SAAe4E,GACrBkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,MAnBX,EAAAub,EAAAM,aACNlH,KAAM,GACNjX,IAAK,QA2CR,QAAS4c,GAAUrjB,GAClB,GAAI3D,GAAMioB,EAAAC,QAAU,kBAGpB,OAAKG,IAOS,EAAAF,EAAAppB,UACbqpB,OAAQ,OACRpoB,IAAKA,EACLf,MAAM,EAAA6uD,EAAA/uD,SAAe4E,GACrBkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACD,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAE3B+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,MAnBX,EAAAub,EAAAM,aACNlH,KAAM,GACNjX,IAAK,QvEk34BR7L,OAAOC,eAAeH,EAAS,cAC9BI,OAAO,IAERJ,EAAQkqB,WAAalqB,EAAQiqB,QAAUjqB,EAAQ2oB,UAAY3oB,EAAQ+wE,YAAc/wE,EAAQ8wE,mBAAqB9wE,EAAQ6wE,kBAAgBxmD,EAEtI,IAAIqlC,GAAazvD,EAAoB,QAEjCwvD,EAAc9lC,EAAuB+lC,GuEri5BzCplC,EAAArqB,EAAA,QvEyi5BI6pB,EAAUH,EAAuBW,GuExi5BrCV,EAAA3pB,EAAA,QACAsqB,EAAAtqB,EAAA,QvE6i5BIuqB,EAAab,EAAuBY,GuE5i5BpCP,EAAQQ,EAAA9pB,QAAQwR,IAAI,QvEwp5BxBlS,GuEv94BC6wE,gBvEw94BD7wE,EuEv94BC8wE,qBvEw94BD9wE,EuEv94BC+wE,cvEw94BD/wE,EuEv94BC2oB,YvEw94BD3oB,EuEv94BCiqB,QvEu94BiBL,EAAQK,QAC1BjqB,EuEv94BCkqB,WvEu94BoBN,EAAQM,YAIvB8mD,KACA,SAAUjxE,EAAQC,KAMlBixE,OACA,SAAUlxE,EAAQC,EAASC,GAEjC,YAuCA,SAAS0pB,GAAuBnpB,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GApCvFN,OAAOC,eAAeH,EAAS,cAC9BI,OAAO,GwElr5BR,IAAA8wE,GAAAjxE,EAAA,QxEur5BIkxE,EAAQxnD,EAAuBunD,GwEtr5BnC7wE,EAAAJ,EAAA,QxE0r5BImxE,EAASznD,EAAuBtpB,GwEzr5BpCgxE,EAAApxE,EAAA,QxE6r5BIqxE,EAAW3nD,EAAuB0nD,GwE5r5BtCnpC,EAAAjoC,EAAA,QxEgs5BIsxE,EAAS5nD,EAAuBue,GwE/r5BpCklC,EAAAntE,EAAA,QxEms5BIuxE,EAAS7nD,EAAuByjD,GwEls5BpCvsD,EAAA5gB,EAAA,QxEss5BIwxE,EAAS9nD,EAAuB9I,GwErs5BpC6wD,EAAAzxE,EAAA,QxEys5BI0xE,EAAWhoD,EAAuB+nD,GwExs5BtC7qD,EAAA5mB,EAAA,QxE4s5BI2xE,EAAYjoD,EAAuB9C,EwE1s5BvCsqD,GAAAzwE,QAAImxE,IAAJT,EAAA1wE,QACA,IAAIoxE,GAAQ,GAAIV,GAAA1wE,QAAKqxE,OACpBviD,SACCwiD,iBACA7wE,eACAupB,eACApiB,eACAuf,iBACA/kB,mBAEDiM,QAAQ,GxEit5BT/O,GAAQU,QwE9s5BOoxE,GxEkt5BTG,KACA,SAAUlyE,EAAQC,GyEzu5BxBD,EAAAC,SAAgB4F,OAAA,WAAmB,GAAAC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OACAE,YAAA,iBACGF,EAAA,OACHE,YAAA,sBACGF,EAAA,OACHE,YAAA,YACGF,EAAA,OACHE,YAAA,kBACGF,EAAA,OACHE,YAAA,qBACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAAU,WAAA,IAAAV,EAAA4B,GAAA5B,EAAAwjB,eAAAxjB,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,0BACAY,IACAQ,MAAA,SAAAN,GACAnB,EAAAyjB,UAAA,YAGGtjB,EAAA,QAAAH,EAAAO,GAAA,KAAAJ,EAAA,UAAAH,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,2BACAY,IACAQ,MAAA,SAAAN,GACAnB,EAAAyjB,UAAA,aAGGtjB,EAAA,QAAAH,EAAAO,GAAA,KAAAJ,EAAA,cAAAH,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,WACAwB,OACAkT,MAAA,IAAA/U,EAAAob,IAAAxW,MAAAxH,OAAA,QACAivE,UAAA,cAAArsE,EAAAujB,KAAA,WAEGvjB,EAAAqG,GAAArG,EAAAob,IAAA,eAAAxT,GACH,MAAAzH,GAAA,OACAE,YAAA,kBACKF,EAAA,KACLG,OACAxD,KAAA,2BAAA8K,EAAAvC,cAEKlF,EAAA,OACLE,YAAA,iBACKF,EAAA,OACLE,YAAA,qBACKF,EAAA,OACLG,OACAoH,IAAAE,EAAAsX,uBAEKlf,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,sBACKL,EAAAO,GAAAP,EAAA4B,GAAAgG,EAAA2T,qBAAAvb,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,iBACKF,EAAA,OACLE,YAAA,oBACKL,EAAAO,GAAAP,EAAA4B,GAAAgG,EAAAoX,kBAAAhf,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,iBACKL,EAAAqG,GAAAuB,EAAA,gBAAA9D,GACL,MAAA3D,GAAA,KACAG,OACAxD,KAAA,wBAAAgH,KAEO9D,EAAAO,GAAA,iCAAAP,EAAA4B,GAAAkC,GAAA,qCACF9D,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,iBACKF,EAAA,OACLE,YAAA,qBACKF,EAAA,OACLG,OACAoH,IAAAE,EAAAtM,KAAAyG,YAAA/B,EAAAhF,YAEKgF,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,sBACKL,EAAAO,GAAAP,EAAA4B,GAAAgG,EAAAtM,KAAA2M,4BAEJjG,qBzE+u5BKsqE,KACA,SAAUpyE,EAAQC,G0Exz5BxBD,EAAAC,SAAgB4F,OAAA,WAAmB,GAAAC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OACAE,YAAA,gBACAG,MAAA,KAAAR,EAAApC,UACGuC,EAAA,OACHE,YAAA,uBACGL,EAAAqG,GAAArG,EAAA,eAAAjF,GACH,MAAAoF,GAAA,KACAE,YAAA,oBACAC,OACAxD,KAAA,4BAAA/B,EAAAuB,OAEK6D,EAAA,OACLE,YAAA,qBACKF,EAAA,OACLE,YAAA,wBACKF,EAAA,OACLG,OACAoH,IAAA3M,EAAAgH,YAAA/B,EAAAhF,cAEKgF,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,yBACKF,EAAA,OACLE,YAAA,sBACKL,EAAAO,GAAAP,EAAA4B,GAAA7G,EAAAkN,cAAAjI,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,sBACKF,EAAA,OACLE,YAAA,sBACKL,EAAAO,GAAA,MAAAP,EAAA4B,GAAA7G,EAAAgpE,eAAA/jE,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,sBACKL,EAAAO,GAAA,MAAAP,EAAA4B,GAAA7G,EAAA+oE,eAAA9jE,EAAAO,GAAA,QAAAxF,EAAA2nB,SAAAviB,EAAA,OACLE,YAAA,sCACAY,IACAQ,MAAA,SAAAN,GACAA,EAAA4pC,kBACA5pC,EAAA0pC,iBACA7qC,EAAA+kB,UAAAhqB,EAAAuB,SAGK0D,EAAAO,GAAA,QAAAP,EAAA0B,KAAA1B,EAAAO,GAAA,QAAAxF,EAAA2nB,UAAA,GAAA3nB,EAAA2nB,SAAAviB,EAAA,OACLE,YAAA,sCACAY,IACAQ,MAAA,SAAAN,GACAA,EAAA4pC,kBACA5pC,EAAA0pC,iBACA7qC,EAAAilB,UAAAlqB,EAAAuB,SAGK0D,EAAAO,GAAA,SAAAP,EAAA0B,KAAA1B,EAAAO,GAAA,QAAAxF,EAAA2nB,SAAAviB,EAAA,OACLE,YAAA,sCACAY,IACAQ,MAAA,SAAAN,GACAA,EAAA4pC,kBACA5pC,EAAA0pC,iBACA7qC,EAAA+kB,UAAAhqB,EAAAuB,SAGK0D,EAAAO,GAAA,UAAAP,EAAA0B,KAAA1B,EAAAO,GAAA,QAAAxF,EAAA8nB,MAAA1iB,EAAA,OACLE,YAAA,sCACAY,IACAQ,MAAA,SAAAN,GACAA,EAAA4pC,kBACA5pC,EAAA0pC,iBACA7qC,EAAA8kB,SAAA/pB,EAAAuB,SAGK0D,EAAAO,GAAA,UAAAP,EAAA0B,aACF1B,EAAAO,GAAA,KAAAP,EAAAmE,OAAA,EAAAhE,EAAA,SAAAH,EAAA0B,MAAA,GAAA1B,EAAAO,GAAA,KAAAJ,EAAA,QACHG,OACA6D,MAAAnE,EAAAmE,MACA/G,OAAA4C,EAAAuC,SACAxG,MAAAiE,EAAAU,WAEAO,IACA6F,YAAA9G,EAAA4C,eAEG,IACFZ,qB1E8z5BKuqE,KACA,SAAUryE,EAAQC,EAASC,GAEjC,Y2E545BA,SAASoyE,KACR,OACC1rE,KAAM,GACNoC,MAAM,EACNwC,KACCO,OAAQ,GACRC,IAAK,GACLumE,UAAW,KAEZC,QACCtpE,OACCyY,KAAM,GACN8wD,MAAO,IAERtpE,SACCD,MAAO,GACPyY,KAAM,GACNihC,KAAM,IAEP8vB,KACCnnB,QACC5pC,KAAM,KACN4N,SAAU,cAEXs/C,SACCltD,KAAM,KACN4N,SAAU,gBAIb1G,QACCjiB,KAAM,MACNuC,QAAS,GACT8F,KAIC0jE,IAAK,WACLC,KAAM,WACNC,MAAO,SAGT5pE,MACCC,MAAO,GACPC,QAAS,GACTC,UAAW,cAEZ0lE,UACU5lE,MAAO,IAEX1F,WAGAsvE,UAAU,G3E015BlB3yE,OAAOC,eAAeH,EAAS,cAC9BI,OAAO,GAGR,IAAI8oE,GAAWjpE,EAAoB,QAE/BkpE,EAIJ,SAAgC3oE,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,IAJjD0oE,G2Ev55BtCt/C,EAAA3pB,EAAA,O3Ei95BAD,GAAQU,S2Er55BPU,MAAOixE,IACPxwD,WACCixD,gBADU,SACO1xE,EAAO2gB,GACvB,IAAK,GAAI3d,KAAO2d,GACf,GAAIA,EAAQhB,eAAe3c,GAC1B,GAA4B,YAAxB,EAAA+kE,EAAAzoE,SAAOqhB,EAAQ3d,IAClB,IAAK,GAAIsmE,KAAQ3oD,GAAQ3d,GACxBhD,EAAMgD,GAAKsmE,GAAQ3oD,EAAQ3d,GAAKsmE,OAGjCtpE,GAAMgD,GAAO2d,EAAQ3d,KAM1Bqe,SACCqwD,gBADQ,SACSpwD,EAASX,GACzBW,EAAQC,OAAO,kBAAmBZ,IAEnCgxD,kBAJQ,SAIWrwD,EAASX,GAC3BW,EAAQC,OAAO,kBAAmBZ,GAClCvR,WAAW,WACV,GAA0B,OAAtBkS,EAAQthB,MAAMuF,KACjB,OAAO,CAER+b,GAAQpe,SAAS,uBACfoe,EAAQthB,MAAMmK,IAAI+mE,YAEtBU,mBAbQ,SAaYtwD,EAASX,GAC5BW,EAAQC,OAAO,kBAAmB0vD,MAInCY,eAlBQ,SAkBQvwD,EAASX,GACxB6H,EAAA2B,SAAWrhB,QAAQC,IAAI,kBAAmB4X,GAEvB,GAAfA,EAAQiB,KAA4B,OAAhBjB,EAAQpb,KAC/B+b,EAAQC,OAAO,mBACdhc,KAAM,MACNoC,MAAM,EACNwC,KACCO,OAAQ,YACRC,IAAKgW,EAAQhW,OAGHgW,EAAQiB,KAAsB,GAAfjB,EAAQiB,KACnCN,EAAQC,OAAO,mBACdhc,KAAM,MACNoC,MAAM,EACNwC,KACCO,OAAQ,SACRC,IAAK,UAKRyE,WAAW,WACV,GAA0B,OAAtBkS,EAAQthB,MAAMuF,KACjB,OAAO,CAER+b,GAAQpe,SAAS,uBACfoe,EAAQthB,MAAMmK,IAAI+mE,YAItBY,YAlDQ,SAkDKxwD,EAASX,GAIrB,GAHA6H,EAAA2B,SAAWrhB,QAAQC,IAAI,eAAgB4X,IAGnB,IAAhBA,EAAQiB,IAKX,MAHGN,GAAQC,OAAO,mBACjBkwD,UAAU,KAEJ,CAIR,KAAoB,IAAhB9wD,EAAQiB,IACX,MAAOtgB,QAAOnB,SAASoB,KAAO,qBAAqBF,mBAAmBlB,SAASoB,KAIhF,KAAoB,IAAhBof,EAAQiB,IACX,OAAO,CAgBR,KAZoB,IAAhBjB,EAAQiB,KACXN,EAAQC,OAAO,mBACdhc,KAAM,MACNoC,MAAM,EACNwC,KACCO,OAAQ,SACRC,IAAK,eAMJgW,EAAQiB,IAAM,EAAG,CAEpB,GAAuB,SAAnBjB,EAAQqJ,QAKX,MAHG1I,GAAQC,OAAO,mBACjBkwD,UAAU,KAEJ,CAGR,IAAI9mE,GAAMgW,EAAQoxD,QAAUpxD,EAAQoxD,OAAOC,MAAQrxD,EAAQoxD,OAAOC,MAAM1xD,KAAO,MAC/EgB,GAAQC,OAAO,mBACdhc,KAAM,MACNoC,MAAM,EACNwC,KACCO,OAAQ,SACRC,IAAKA,KAKRyE,WAAW,WACV,GAA0B,OAAtBkS,EAAQthB,MAAMuF,KACjB,OAAO,CAER+b,GAAQpe,SAAS,uBACfoe,EAAQthB,MAAMmK,IAAI+mE,e3Ei55BlBe,KACA,SAAUtzE,EAAQC,KAMlBszE,OACA,SAAUvzE,EAAQC,G4Epl6BxBD,EAAAC,SAAgB4F,OAAA,WAAmB,GAAAC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OACAE,YAAA,iBACGF,EAAA,OACHE,YAAA,uBACGF,EAAA,OACHE,YAAA,SACGL,EAAAO,GAAA,UAAAP,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,sBACGF,EAAA,OACHE,YAAA,qBACGL,EAAAO,GAAAP,EAAA4B,GAAA5B,EAAAjE,OAAA,IAAAiE,EAAA4B,GAAA5B,EAAAmE,UAAAnE,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,0BACAY,IACAQ,MAAA,SAAAN,GACAnB,EAAA0tE,aAAA,YAGGvtE,EAAA,QAAAH,EAAAO,GAAA,KAAAJ,EAAA,UAAAH,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,2BACAY,IACAQ,MAAA,SAAAN,GACAnB,EAAA0tE,aAAA,aAGGvtE,EAAA,QAAAH,EAAAO,GAAA,KAAAJ,EAAA,cAAAH,EAAAO,GAAA,KAAAJ,EAAA,OACHE,YAAA,qBACGL,EAAAqG,GAAArG,EAAA4E,MAAAC,MAAA,GAAA7E,EAAAjE,MAAA,MAAAiE,EAAAjE,MAAA,eAAA6L,GACH,MAAAzH,GAAA,OACAE,YAAA,sBACKF,EAAA,OACLE,YAAA,qBACKF,EAAA,OACLE,YAAA,wBACKF,EAAA,OACLG,OACAoH,IAAAE,EAAA7F,YAAA/B,EAAAhF,cAEKgF,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,yBACKF,EAAA,KACLG,OACAxD,KAAA,4BAAA8K,EAAAtL,OAEK6D,EAAA,OACLE,YAAA,sBACKL,EAAAO,GAAAP,EAAA4B,GAAAgG,EAAAK,cAAAjI,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,sBACKF,EAAA,OACLE,YAAA,sBACKL,EAAAO,GAAA,MAAAP,EAAA4B,GAAAgG,EAAAm8D,eAAA/jE,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,sBACKL,EAAAO,GAAA,MAAAP,EAAA4B,GAAAgG,EAAAk8D,eAAA9jE,EAAAO,GAAA,QAAAqH,EAAA8a,SAAAviB,EAAA,OACLE,YAAA,mBACAY,IACAQ,MAAA,SAAAN,GACAA,EAAA4pC,kBACA/qC,EAAA+kB,UAAAnd,EAAAtL,SAGK0D,EAAAO,GAAA,QAAAP,EAAA0B,KAAA1B,EAAAO,GAAA,QAAAqH,EAAA8a,UAAA,GAAA9a,EAAA8a,SAAAviB,EAAA,OACLE,YAAA,8BACKL,EAAAO,GAAA,SAAAP,EAAA0B,mBAEJM,qB5E0l6BK2rE,KACA,SAAUzzE,EAAQC,KAMlByzE,KACA,SAAU1zE,EAAQC,KAMlB0zE,KACA,SAAU3zE,EAAQC,KAMlB2zE,OACA,SAAU5zE,EAAQC,EAASC,G6E9q6BjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,S7Eur6BM4zE,KACA,SAAU7zE,EAAQC,KAMlB6zE,KACA,SAAU9zE,EAAQC,EAASC,GAEjC,YAGAC,QAAOC,eAAeH,EAAS,cAC3BI,OAAO,IAEXJ,EAAQU,SACJM,O8E/o6BJ,U9Eop6BM8yE,KACA,SAAU/zE,EAAQC,EAASC,I+E7t6BjC,SAAAgI;;;;CAIA,SAAA2jB,EAAAC,GAGA9rB,EAAAC,QAAA6rB,KAICnqB,EAAA,WACD,YAGA,SAAAwM,GAAAC,GACA,GAAAC,EAIA,WAHAlE,SAAAmE,MACA,oEAIAD,GAAAD,EACAC,EAAAE,UAAA9I,KAAA,GAAA2hC,GAIA,QAAAA,MAbA,GAAA/4B,EAoTA,OArSA+4B,GAAA74B,WAKAylE,QAAA,SAAApzE,GACA6P,WAAA,WACAjP,SAAAu1C,KAAAn2C,GACa,IAObqzE,QAAA,SAAAryE,GACA,GAAAsyE,GAAAtyE,GAAAJ,SAAAu1C,IACA,OAAAm9B,KAAA/gE,QAAA,cAKAghE,iBAAA,WACA,GAAAp9B,GAAAp1C,KAAAsyE,SACA,OAAAl9B,KAAA9mC,MAAA,QAAAA,MAAA,YAKAmkE,kBAAA,WACA,GAAAr9B,GAAAp1C,KAAAsyE,SACA,WAAAl9B,EAAA,IACAA,IAAA9mC,MAAA,YAAAA,MAAA,SAKAokE,aAAA,SAAAzzE,GACA,GAAAuwB,GAAAxvB,KAAAsyE,UAAA33D,MAAA,GAAAN,QAAA,QAAApb,EAAA,iBACA,cAAAuwB,IAAA,OAKAzrB,YAAA,SAAA9E,EAAAgB,GAEA,GAAAsyE,GAAAl1D,UAAA,IAAArc,OAAAnB,SAAAD,OACA8/D,EAAA,GAAArlD,QAAA,QAAApb,EAAA,iBACAw/B,EAAA8zC,EAAAxvC,OAAAwvC,EAAAxyE,QAAA,QAAA4a,MAAA+kD,EACA,cAAAjhC,IAAA,OAKAk0C,UAAA,WACA,GAAAC,MACAx9B,EAAAp1C,KAAAsyE,SACAO,UAAAz9B,IAAA9mC,MAAA,OACA,QAAAjN,GAAA,EAAAyxE,EAAAD,SAAAtxE,OAAgDF,EAAAyxE,EAAOzxE,IACvDuxE,EAAAhiE,KAAAiiE,SAAAxxE,GAEA,OAAAuxE,IAEAG,UAAA,SAAA9yE,GACAA,EAAA4D,mBAAA5D,EACA,IAAA+yE,GAAAhzE,KAAAkkC,SAAAjkC,GACAgzE,IAMA,OALA1sE,GAAA8H,KAAA2kE,EAAAnrE,OAAA,SAAAnF,EAAAhE,GACAA,EAAAmF,mBAAAnF,GACAu0E,EAAAriE,KAAAlO,EAAA,IAAAhE,KAEAuB,EAAAqO,MAAA,QACA,IAAA2kE,EAAA34D,KAAA,MAEA4pB,SAAA,SAAAjkC,GACA,GAAA8xB,GAAAuE,SAAAC,cAAA,IAEA,OADAxE,GAAA9wB,KAAAhB,GAEA2kC,OAAA3kC,EACAizE,SAAAnhD,EAAAmhD,SAAA1hE,QAAA,QACAizB,KAAA1S,EAAAo9B,SACAzqB,KAAA3S,EAAA2S,KACAxiC,MAAA6vB,EAAAnyB,OACAiI,OAAA,WAMA,IALA,GAIAsrE,GAJA7xD,KACA8xD,EAAArhD,EAAAnyB,OAAA4R,QAAA,UAAAlD,MAAA,KACAhN,EAAA8xE,EAAA7xE,OACAF,EAAA,EAE0BA,EAAAC,EAASD,IACnC+xE,EAAA/xE,KAGA8xE,EAAAC,EAAA/xE,GAAAiN,MAAA,KACAgT,EAAA6xD,EAAA,IAAAA,EAAA,GAEA,OAAA7xD,MAEApN,MAAA6d,EAAAjyB,SAAA6a,MAAA,2BACAy6B,KAAArjB,EAAAqjB,KAAA5jC,QAAA,QACAmzB,KAAA5S,EAAAjyB,SAAA0R,QAAA,kBACA6hE,UAAAthD,EAAA9wB,KAAA0Z,MAAA,kCACA24D,SAAAvhD,EAAAjyB,SAAA0R,QAAA,UAAAlD,MAAA,OAGAilE,aAAA,SAAAX,EAAAl0E,EAAAuB,EAAAuzE,GACAvzE,KAAAJ,SAAAoB,IACA,IAAAy+D,GAAA,GAAArlD,QAAA,UAAAu4D,EAAA,WACA,OAAA3yE,GAAA0a,MAAA+kD,GAGA8T,EACAvzE,EAAAuR,QAAAkuD,EAAA,SAAAhoC,EAAAC,GACA,MAAAA,GAAAj5B,IAGAuB,GAPA,GAAAA,EAAAF,QAAA,KAAAE,EAAA,IAAA2yE,EAAA,IAAAl0E,EAAAuB,EAAA,IAAA2yE,EAAA,IAAAl0E,GAeA+0E,cAAA,SAAAC,EAAAd,GACA,GAAAe,GAAAD,CACA,oBAAAd,GACA,GAAAgB,GAAAhB,EAAAtkE,MAAA,SACa,oBAAAskE,OAAA5pE,MAAA,CACb,GAAA4qE,KACA,QAAAlxE,KAAAkwE,GACAgB,EAAAhjE,KAAAlO,EAAA,IAAAkwE,EAAAlwE,IAGA,OAAArB,GAAA,EAA2BA,EAAAuyE,EAAAryE,OAAsBF,IAAA,CACjD,GAAAwyE,GAAAD,EAAAvyE,GAAAiN,MAAA,IACAqlE,GAAA3zE,KAAAuzE,aAAAM,EAAA,GAAAA,EAAA,OAAAF,GAAA,GAEA,MAAAA,IAEAG,WAAA,SAAAthD,GACA,GACAuhD,IADAvhD,GAAA3yB,SAAAoB,SAGA6xE,EAAA,EACA19B,EAAAp1C,KAAAsyE,UACAO,IACA,IAAAz9B,EAAA,CACAy9B,EAAAz9B,EAAA9mC,MAAA,IACA,QAAAjN,GAAA,EAAAyxE,EAAAD,EAAAtxE,OAAoDF,EAAAyxE,EAAOzxE,IAC3D0yE,EAAAlB,EAAAxxE,GAAAiN,MAAA,SAAA4uB,SAAA21C,EAAAxxE,GAAAiN,MAAA,SAGA,MAAAylE,IAEAC,aAAA,SAAAxhD,GACA,GAAAA,MAAA3yB,SAAAoB,KACA8yE,KACA3+B,EAAA,GACAvtC,EAAA,GACAmJ,EAAA,GACA6hE,IACA,QAAArgD,EAAAzyB,QAAA,MACAiR,EAAAwhB,EAAAuQ,OAAAvQ,EAAAzyB,QAAA,QACAiR,EAAAjR,QAAA,SACAq1C,EAAApkC,EAAA+xB,OAAA/xB,EAAAjR,QAAA,MACA8H,EAAAmJ,EAAA+xB,OAAA,EAAA/xB,EAAAjR,QAAA,OAEA8H,EAAAmJ,EAEA6hE,EAAAhrE,EAAAyG,MAAA,IACA,QAAAjN,GAAA,EAA+BA,EAAAwxE,EAAAtxE,OAAqBF,IACpD0yE,EAAAlB,EAAAxxE,GAAAiN,MAAA,SAAA4uB,SAAA21C,EAAAxxE,GAAAiN,MAAA,QAEA8mC,GAAA7zC,OAIA,MAAAwyE,IAEAE,UAAA,SAAAzhD,GACA,GAAAA,MAAA3yB,SAAAoB,IACA,QACA2xE,MAAA5yE,KAAAg0E,aAAAxhD,GACA4iB,KAAAp1C,KAAA8zE,WAAAthD,KAeA0hD,QAAA,SAAA1hD,EAAA3qB,EAAAssE,GACA,GAAAC,GAAA,GACAC,EAAA,GACAlkD,EAAA,KACArxB,EAAA,KACAw1E,EAAA,KACAC,EAAA,IAeA,IAdA,iBAAAl3D,WAAA,KAAA82D,EAAA92D,UAAA,IACA,gBAAAA,WAAA,KAAAxV,EAAAwV,UAAA,MAAAmV,EAAA3yB,SAAAoB,MACAuxB,KAAA3yB,SAAAoB,KACAnC,EAAAkB,KAAAi0E,UAAAzhD,GACA3qB,KAAA/I,EACA+I,EAAA+qE,OAAA/qE,EAAAutC,MACAk/B,EAAAzsE,EAAA+qE,MAAA/qE,EAAA+qE,SACA2B,EAAA1sE,EAAAutC,KAAAvtC,EAAAutC,UAEAk/B,EAAAzsE,EACA0sE,UAEA5rD,KAAAwrD,OAAA,GAEAA,EAAA,CACA,IAAAhkD,IAAAmkD,OACA3rD,KAAA2rD,EAAAnkD,SACArxB,GAAA8zE,MAAAziD,GAEArxB,EAAA8zE,MAAAziD,GAAAmkD,EAAAnkD,EACA,KAAAA,IAAAokD,OACA5rD,KAAA4rD,EAAApkD,SACArxB,GAAAs2C,KAAAjlB,GAEArxB,EAAAs2C,KAAAjlB,GAAAokD,EAAApkD,EAEAmkD,GAAAx1E,EAAA8zE,MACA2B,EAAAz1E,EAAAs2C,KAEA,IAAAjlB,IAAAmkD,GACAF,GAAAjkD,EAAA,IAAApvB,mBAAAuzE,EAAAnkD,IAAA,GAEA,KAAAA,IAAAokD,GACAF,GAAAlkD,EAAA,IAAApvB,mBAAAwzE,EAAApkD,IAAA,GAQA,OANAikD,GAAA,SAAAA,IAAApxC,UAAA,EAAAoxC,EAAA7yE,OAAA,IACA8yE,EAAA,SAAAA,IAAArxC,UAAA,EAAAqxC,EAAA9yE,OAAA,IAEAixB,IAAAhhB,QAAA,YAAAA,QAAA,YACA,IAAAghB,GAAA,IAAA4hD,GACA,IAAA5hD,GAAA,IAAA6hD,GACA7hD,GAaAgiD,YAAA,SAAAv0E,EAAA2yE,EAAAl0E,GACA,GAEAic,GAFAoX,EAAAuE,SAAAC,cAAA,KACA/C,EAAA,wCACAxiB,IAEA,KADA+gB,EAAA9wB,KAAAhB,EACA0a,EAAA6Y,EAAApD,KAAA2B,EAAAnyB,SACAmB,mBAAA6xE,IAAAj4D,EAAA,IACA3J,EAAAJ,KAAA+J,EAAA,IAAAA,EAAA,OAAAA,EAAA,OAKA,OAFA3J,GAAAJ,KAAA7P,mBAAA6xE,IAAAl0E,EAAA,IAAAqC,mBAAArC,GAAA,KACAqzB,EAAAnyB,OAAAoR,EAAAsJ,KAAA,KACAyX,EAAA9wB,MAMAwzE,cAAA,SAAAx0E,GACA,GAAAy0E,GAAAr2E,EAAAC,QAAAyF,YAAA,SAKA,OAJA2wE,KACAz0E,EAAA5B,EAAAC,QAAAk2E,YAAAv0E,EAAA,SAAAy0E,IAGAz0E,KAKAuM,UACA7J,QAAA,a/Emu6B6B2H,KAAKhM,EAASC,EAAoB,UAIzDo2E,KACA,SAAUt2E,EAAQC,EAASC,GAEjC,YAGAC,QAAOC,eAAeH,EAAS,cAC3BI,OAAO,GgFv16BX,IAAAC,GAAAJ,EAAA,QAEAK,EAAAL,EAAA,QhF416BIM,EAEJ,SAAgCC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,IAFjDF,EAItCN,GAAQU,SACJE,KAAM,WACF,OgF916BRC,OAAAN,EAAAG,QhFg26BYkB,MgF916BZ,IhFk26BIZ,OgFh26BJ,WhFi26BIC,UAAU,EAAIZ,EAAMa,WAChBuJ,MAAO,SAAerJ,GAClB,MAAOA,GAAMspB,KgFj26BzBjgB,OhFm26BQT,MAAO,SAAe5I,GAClB,MAAOqT,MAAK8B,KAAKnV,EAAMspB,KAAK1gB,MgFl26BxC,MhFq26BIzG,SACI4qE,kBAAmB,WgFp26B3B,GAAArqE,GAAApC,IhFu26BYA,MAAKQ,OAAOoC,SAAS,0BACjBqF,MAASpE,mBAAmB7D,KgFt26B5CwG,UhFu26BgBE,SgFt26BhB,OAFA7D,KAAA,SAAAC,GhFy26BoBA,EAAI3B,KAAKI,OAAS,IAClBa,EAAMlC,MgFr26B1B,GhFw26BgBkC,EAAM5B,OAAOoC,SAAS,iBgFr26BtCE,KhFs26BeG,MAAM,SAAUC,GACfd,EAAM5B,OAAOoC,SAAS,cgFr26BtCM,MhFw26BQqpE,qBAAsB,WgFr26B9B,GAAA/oE,GAAAxD,IhFw26BYA,MAAKQ,OAAOoC,SAAS,6BACjB8D,SgFv26BhB,OADA7D,KAAA,SAAAC,GhFy26BoBA,EAAI3B,KAAKI,OAAS,IAClBiC,EAAOtD,MgFt26B3B,GhFy26BgBsD,EAAOhD,OAAOoC,SAAS,iBgFt26BvCE,KhFu26BeG,MAAM,SAAUC,GACfM,EAAOhD,OAAOoC,SAAS,cgFt26BvCM,MhFy26BQ2uE,aAAc,SAAsB5sE,GAChC,OAAY,QAARA,GAAgC,GAAdjF,KAAKE,UAGf,SAAR+E,GAAmBjF,KAAKE,OAASF,KAAKsI,aAI9B,QAARrD,EACAjF,KgFt26BhBE,QhFw26BgBF,KgFt26BhBE,WhFy26BQgpB,UAAW,SAAmBzoB,GgFt26BtC,GAAAiD,GAAA1D,IhFy26BYA,MAAKQ,OAAOoC,SAAS,kBACjB+jB,OgFx26BhBlmB,IADAoC,KAAA,SAAAC,GhF226BgBY,EgFv26BhB6oE,uBhFy26BgB7oE,EAAOlD,OAAOoC,SAAS,iBgFx26BvCE,KhFy26BeG,MAAM,SAAUH,GACfY,EAAOlD,OAAOoC,SAAS,cgFx26BvCM,ShF426BIO,QAAS,WAGL,GAFAzD,KAAKwG,SAAWxG,KAAK8D,KAAKC,YgFv26BlC,YhFy26B4B,UAAhB/D,KAAK+B,UAAwB/B,KAAKwG,SASlC,MARAxG,MAAKQ,OAAOoC,SAAS,qBACjByE,MgFx26BhB,EhFy26BgBpC,KgFx26BhB,MhFy26BgB4E,KACIO,OgFx26BpB,ShFy26BoBC,IgFt26BpB,WACA,ChF226B4B,WAAhBrK,KAAK+B,QACL/B,KgFx26BZysE,oBhF026BYzsE,KgFx26BZusE,0BhF+26BMqI,KACA,SAAUv2E,EAAQC,EAASC,GAEjC,YiF7p7BAC,QAAAC,eAAAH,EAAA,cACAI,OAAA,GAGA,IAAAugB,GAAA1gB,EAAA,QAEA2gB,EAQA,SAAApgB,GAAsC,MAAAA,MAAAC,WAAAD,GAAuCE,QAAAF,IAR7EmgB,GAEA+wD,EAAAzxE,EAAA,QAEA4nB,EAEA,SAAArnB,GAAuC,GAAAA,KAAAC,WAA6B,MAAAD,EAAqB,IAAAsgB,KAAiB,UAAAtgB,EAAmB,OAAA4D,KAAA5D,GAAuBN,OAAAoO,UAAAyS,eAAA/U,KAAAxL,EAAA4D,KAAA0c,EAAA1c,GAAA5D,EAAA4D,GAAsG,OAAtB0c,GAAApgB,QAAAF,EAAsBsgB,GAF1P4wD,EAeA1xE,GAAAU,SACAU,MAVA,WACA,OACA2H,MAAA,EACAwtE,iBAEAC,cAMA30D,WACA40D,qBAAA,SAAAr1E,EAAA2gB,GACA3gB,EAAAm1E,cAAAx0D,EAAAlf,MAEA6zE,cAAA,SAAAt1E,EAAA2gB,GACA3gB,EAAA2H,KAAAgZ,GAEA40D,cAAA,SAAAv1E,EAAA2gB,GACA,OAAA3d,KAAA2d,GACA3gB,EAAAo1E,OAAApyE,GAAA2d,EAAA3d,KAIAqe,SACAg0D,qBAAA,SAAA/zD,EAAAX,GAIA,MAHAW,GAAAC,OAAA,wBACA9f,KAAAkf,IAEAnB,EAAAlgB,QAAAmO,QAAA,IAEA+nE,qBAAA,SAAAl0D,EAAAX,GAUA,MATA8F,GAAAgpD,gBAAAtsE,KAAA,SAAAC,GAIA,MAHAke,GAAAC,OAAA,wBACA9f,KAAA2B,EAAA3B,OAEA+d,EAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAve,QAKAqyE,0BAAA,SAAAn0D,EAAAX,GACA,MAAAA,GAAApb,KAOAkhB,EAAAipD,oBACAnqE,KAAAob,EAAApb,OACIpC,KAAA,SAAAC,GACJ,GAAAc,KAGA,OAFAA,GAAAyc,EAAApb,MAAAnC,EACAke,EAAAC,OAAA,gBAAArd,GACAsb,EAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAve,OAdAoc,EAAAlgB,QAAAqiB,QACAC,KAAA,GACAjX,IAAA,YAiBA2qE,cAAA,SAAAh0D,EAAAX,GACAW,EAAAC,OAAA,gBAAAZ,IAEA+0D,mBAAA,SAAAp0D,EAAAX,GASA,MARA8F,GAAAkpD,aACA7nE,QAAA6Y,EAAA7Y,QACA6tE,QAAA,GACAhvD,aAAAhG,EAAAgG,eAA0CxjB,KAAA,SAAAC,GAC1C,MAAAoc,GAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,MAIAoyE,iBAAA,SAAAt0D,EAAAX,GAWA,MAVA8F,GAAAc,WACAE,WAAA9G,EAAA8G,WACAouD,cAAAl1D,EAAAk1D,cACAnuD,aAAA/G,EAAA+G,aACAouD,WAAAn1D,EAAAm1D,aACI3yE,KAAA,SAAAC,GACJ,MAAAoc,GAAAlgB,QAAAmO,QAAArK,KACIG,MAAA,SAAAC,GACJ,MAAAgc,GAAAlgB,QAAAqiB,OAAAne,SjFyq7BMuyE,KACA,SAAUp3E,EAAQC,GkFnx7BxBD,EAAAC,SAAgB4F,OAAA,WAAmB,GAAAC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OACAE,YAAA,oBACGF,EAAA,OACHE,YAAA,yBACGL,EAAAqG,GAAArG,EAAA,eAAA4H,GACH,MAAAzH,GAAA,OACAE,YAAA,yBACKF,EAAA,OACLE,YAAA,4BACKF,EAAA,OACLE,YAAA,mBACKL,EAAAO,GAAAP,EAAA4B,GAAAgG,EAAAxE,UAAApD,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,kBACKL,EAAAO,GAAAP,EAAA4B,GAAAgG,EAAA/I,SAAAmB,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,iBACKF,EAAA,OACLG,OACAoH,IAAAE,EAAAgN,SAEK5U,EAAAO,GAAA,KAAAJ,EAAA,OACLE,YAAA,kBACKL,EAAAO,GAAAP,EAAA4B,GAAAgG,EAAAiU,WAAA7b,EAAAO,GAAA,KAAAP,EAAAyH,GAAA,UACFzH,EAAAO,GAAA,KAAAP,EAAAmE,OAAA,EAAAhE,EAAA,SAAAH,EAAA0B,MAAA,GAAA1B,EAAAO,GAAA,KAAAJ,EAAA,QACHG,OACA6D,MAAAnE,EAAAmE,MACA/G,OAAA4C,EAAAuC,SACAxG,MAAAiE,EAAAU,WAEAO,IACA6F,YAAA9G,EAAA4C,eAEG,IACFZ,iBAAA,WAA+B,GAAAhC,GAAAnE,KAAaoE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CACvE,OAAAE,GAAA,OACAE,YAAA,2BACGF,EAAA,KACHE,YAAA,eACAC,OACAxD,KAAA,WAEGkD,EAAAO,GAAA,gBlF0x7BGgxE,KACA,SAAUr3E,EAAQC,EAASC,GmFl07BjCA,EAAA,OAEA,IAAA8H,GAAA9H,EAAA,QAEAA,EAAA,QAEAA,EAAA,QAEA,KAEA,KAGAF,GAAAC,QAAA+H,EAAA/H,SnF207BMq3E,KACA,SAAUt3E,EAAQC,EAASC,GAEjC,cAC4B,SAASgI,GAErC/H,OAAOC,eAAeH,EAAS,cAC7BI,OAAO,GoF366BT,IAAAC,GAAAJ,EAAA,OpFg76BAD,GAAQU,SACNE,KAAM,WACJ,OACEsI,QoF966BN,KpFk76BEjI,UAAU,EAAIZ,EAAMa,WAClBN,KAAM,SAAcQ,GAClB,MAAOA,GoFh76Bb4wE,UpFm76BEzuE,SACE4J,MAAO,WACLzL,KAAKd,KAAK2C,QAAQ+nD,QAAU5pD,KAAKd,KAAK2C,QoFl76B5C+nD,SpFm76BM5pD,KAAKQ,OAAOoC,SoFl76BlB,uBpFo76BIqqE,YAAa,SAAqB19B,GAChChpC,EAAE,iDAAiD0L,YoFl76BzD,QpFm76BM1L,EAAEgpC,EAAMnmC,eAAe4I,SoFl76B7B,QpFm76BMhS,KAAKQ,OAAOoC,SAAS,mBACnBskB,QACEjiB,KAAMsqC,EAAMnmC,cAAcqhD,QoFh76BpC,SpFo76BIxjC,UAAW,WoFl76Bf,GAAA7kB,GAAApC,IpFq76BMA,MAAKQ,OAAOoC,SAAS,mBACnBskB,QACE1f,QAASxH,KoFn76BnBwH,WAHA3E,KAAA,SAAAC,GpFy76BQ,MAAOV,GAAM5B,OAAOoC,SAAS,oBAC3BukB,WAAc/kB,EAAMlD,KAAKgoB,OoFn76BnCC,WpFo76BUouD,cAAiBnzE,EAAMlD,KAAKgoB,OAAO5Z,IAAIlL,EAAMlD,KAAKgoB,OoFn76B5DjiB,MpFo76BUmiB,aAAgBhlB,EAAMlD,KAAKgoB,OoFn76BrCE,apFo76BUouD,WAAcpzE,EAAMlD,KAAKgoB,OoFn76BnC1f,UAJA3E,KAAA,SAAAC,GpFw76BUV,EAAM5B,OAAOoC,SAAS,qBACpByE,MoFj76BZ,IpFm76BUjF,EAAM5B,OAAOoC,SAAS,iBoFl76BhCE,OpFo76BSG,MAAM,SAAUC,GACjBd,EAAM5B,OAAOoC,SAAS,coFl76B9BM,MpFq76BIgqE,QAAS,WACPltE,KAAKd,KAAKoI,KoFl76BhBG,YpFm76BMzH,KAAKQ,OAAOoC,SAAS,mBACnByE,MoFj76BR,KpFo76BI+lE,WAAY,WACVptE,KAAKd,KAAK2C,QoFl76BhBqrE,UpFm76BMltE,KAAKQ,OAAOoC,SAAS,mBACnByE,MoFj76BR,MpFq76BE5D,QAAS,WoFl76BX,GAAAD,GAAAxD,IpFq76BIA,MAAKiK,OAAO,gBAAiB,SAAUC,GACjCA,IACF1B,QAAQC,IoFp76BhB,4CpFq76BQjF,EAAOhB,OAAOa,YAAYG,EAAOlB,SAASC,SoFp76BlDG,KpFq76BQc,EAAOhD,OAAOoC,SoFp76BtB,wBpFy76B6B0H,KAAKhM,EAASC,EAAoB,UAIzDq3E,KACA,SAAUv3E,EAAQC,KAMlBu3E,KACA,SAAUx3E,EAAQC,EAASC,GAEjC,YAsBA,SAAS0pB,GAAuBnpB,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GqF377BvF,QAASsqE,GAAiBxlE,GACzB,GAAI3D,GAAMioB,EAAAC,QAAU,uBAapB,QAZc,EAAAC,EAAAppB,UACbqpB,OAAQ,MACRpoB,IAAKA,IACH4C,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACV,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAElB+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KA2BpB,QAAS28D,GAAmB1lE,GAC3B,GAAI3D,GAAMioB,EAAAC,QAAU,yBACpB,QAAO,EAAAC,EAAAppB,UACNqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,IACNf,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACV,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAElB+b,EAAS/b,OACd+D,MAAM,SAAU0J,GACf,OAAO,EAAAub,EAAAM,YAAW7b,KAgCvB,QAASo9D,GAAMnmE,GACd,GAAI3D,GAAMioB,EAAAC,QAAU,YACNvkB,GAAO8kB,OAErB,cADO9kB,GAAO8kB,SACP,EAAAN,EAAAppB,UACNqpB,OAAQ,OACRpoB,IAAKA,EACLf,MAAM,EAAA6uD,EAAA/uD,SAAe4E,KACnBf,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACV,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAElB+b,EAAS/b,OACd+D,MAAM,SAAU0J,GAClB,OAAO,EAAAub,EAAAM,YAAW7b,KAsCpB,QAAS09D,GAAMzmE,GACd,GAAI3D,GAAMioB,EAAAC,QAAU,aAChBO,EAAU9kB,EAAO8kB,WAGrB,cAFO9kB,GAAO8kB,SAEP,EAAAN,EAAAppB,UACNqpB,OAAQ,OACRpoB,IAAKA,EACLf,MAAM,EAAA6uD,EAAA/uD,SAAe4E,GACrBkK,QAAS4a,IACP7lB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACV,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAElB+b,EAAS/b,OACd+D,MAAM,SAAU0J,GACf,OAAO,EAAAub,EAAAM,YAAW7b,KAsBvB,QAAS49D,GAAS3mE,GACjB,GAAI3D,GAAMioB,EAAAC,QAAU,gBAChBO,EAAU9kB,EAAO8kB,WAErB,cADO9kB,GAAO8kB,SACP,EAAAN,EAAAppB,UACNqpB,OAAQ,OACRpoB,IAAKA,EACLf,MAAM,EAAA6uD,EAAA/uD,SAAe4E,GACrBkK,QAAS4a,IACP7lB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACV,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAElB+b,EAAS/b,OACd+D,MAAM,SAAU0J,GACf,OAAO,EAAAub,EAAAM,YAAW7b,KAuBvB,QAASm+D,GAAalnE,GACrB,GAAI3D,GAAMioB,EAAAC,QAAU,mBAIpB,OAAKG,UAOE1kB,GAAO8kB,SACP,EAAAN,EAAAppB,UACNqpB,OAAQ,OACRpoB,IAAKA,EACLf,MAAM,EAAA6uD,EAAA/uD,SAAe4E,GACrBkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACV,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAElB+b,EAAS/b,OACd+D,MAAM,SAAU0J,GACf,OAAO,EAAAub,EAAAM,YAAW7b,OApBd,EAAAub,EAAAM,aACNlH,KAAM,GACNjX,IAAK,QAyCR,QAAS2gE,GAAYpnE,GACpB,GAAI3D,GAAMioB,EAAAC,QAAU,kBAGpB,OAAKG,UAOE1kB,GAAO8kB,SACP,EAAAN,EAAAppB,UACNqpB,OAAQ,OACRpoB,IAAKA,EACLf,MAAM,EAAA6uD,EAAA/uD,SAAe4E,GACrBkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACV,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAElB+b,EAAS/b,OACd+D,MAAM,SAAU0J,GACf,OAAO,EAAAub,EAAAM,YAAW7b,OApBd,EAAAub,EAAAM,aACNlH,KAAM,GACNjX,IAAK,QA0CR,QAASqgE,GAAe9mE,GACvB,GAAI3D,GAAMioB,EAAAC,QAAU,qBACNvkB,GAAO8kB,OAGrB,OAAKJ,UAOE1kB,GAAO8kB,SACP,EAAAN,EAAAppB,UACNqpB,OAAQ,OACRpoB,IAAKA,EACLf,MAAM,EAAA6uD,EAAA/uD,SAAe4E,GACrBkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACV,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAElB+b,EAAS/b,OACd+D,MAAM,SAAU0J,GACf,OAAO,EAAAub,EAAAM,YAAW7b,OApBd,EAAAub,EAAAM,aACNlH,KAAM,GACNjX,IAAK,QAgDR,QAASlI,GAAYyB,GACpB,GAAI3D,GAAMioB,EAAAC,QAAU,kBACNvkB,GAAO8kB,OAGrB,OAAKJ,IAAU1kB,EAAO+iB,cAOf/iB,GAAO8kB,SACP,EAAAN,EAAAppB,UACNqpB,OAAQ,MACRpoB,IAAKA,EACL4H,OAAQjE,EACRkK,SACCwa,MAAOA,KAENzlB,KAAK,SAAUoY,GACjB,MAAyB,IAArBA,EAAS/b,KAAKoiB,KACV,EAAA4G,EAAAK,SAAQtN,EAAS/b,MAElB+b,EAAS/b,OACd+D,MAAM,SAAU0J,GACf,OAAO,EAAAub,EAAAM,YAAW7b,OApBd,EAAAub,EAAAM,aACNlH,KAAM,GACNjX,IAAK,QrFoj7BR7L,OAAOC,eAAeH,EAAS,cAC9BI,OAAO,IAERJ,EAAQiqB,QAAUjqB,EAAQ6D,YAAc7D,EAAQosE,eAAiBpsE,EAAQ0sE,YAAc1sE,EAAQwsE,aAAexsE,EAAQisE,SAAWjsE,EAAQ+rE,MAAQ/rE,EAAQyrE,MAAQzrE,EAAQgrE,mBAAqBhrE,EAAQ8qE,qBAAmBzgD,EAEzN,IAAIqlC,GAAazvD,EAAoB,QAEjCwvD,EAAc9lC,EAAuB+lC,GqFv87BzC9lC,EAAA3pB,EAAA,QACAsqB,EAAAtqB,EAAA,QrF487BIuqB,EAAab,EAAuBY,GqF187BxCD,EAAArqB,EAAA,QrF887BI6pB,EAAUH,EAAuBW,GqF787BjCN,EAAQQ,EAAA9pB,QAAQwR,IAAI,QACxB4X,GAAAppB,QAAMmkC,SAASr1B,QAAQ0C,IAAI,gBAAkB,oCAC7C4X,EAAAppB,QAAMmkC,SAASr1B,QAAQ0C,IAAI,oBAAsB,iBrF+p8BjDlS,EqFlw7BC8qE,mBrFmw7BD9qE,EqFlw7BCgrE,qBrFmw7BDhrE,EqFlw7BCyrE,QrFmw7BDzrE,EqFlw7BC+rE,QrFmw7BD/rE,EqFlw7BCisE,WrFmw7BDjsE,EqFlw7BCwsE,erFmw7BDxsE,EqFlw7BC0sE,crFmw7BD1sE,EqFlw7BCosE,iBrFmw7BDpsE,EqFlw7BC6D,crFmw7BD7D,EqFlw7BCiqB,QrFkw7BiBL,EAAQK,SAIpButD,KACA,SAAUz3E,EAAQC","file":"js/vendor-business.a0a9fdc055b2193fd70d.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ \"+1mQ\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _vuex = __webpack_require__(\"NYxO\");\n\nvar _avatar = __webpack_require__(\"mOGY\");\n\nvar _avatar2 = _interopRequireDefault(_avatar);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n    name: 'header',\n    data: function data() {\n        return {\n            avatar: _avatar2.default,\n            hasMessage: false,\n            search_value: ''\n        };\n    },\n\n    props: ['pageIndex', 'resType'],\n    computed: (0, _vuex.mapState)({\n        user: function user(state) {\n            return state.user.info;\n        },\n        search: function search() {\n            var path = location.pathname.indexOf('search.author.html') > -1 ? 'search.author.html' : 'search.article.html';\n            return './' + path + '?query=' + this.search_value;\n        },\n        url: function url() {\n            return {\n                index: './index.html',\n                mark: './mark.html',\n                app: './app.html',\n                login: './login.html',\n                register: './register.html',\n                center: './author.work.html?user_id=' + this.$store.state.user.info.uid,\n                setting: './setting.userinfo.html',\n                better: './message.better.html',\n                comment: './message.comment.html',\n                infomation: './message.infomation.html',\n                edit: './article.edit.html?from=' + encodeURIComponent(window.location.href)\n            };\n        },\n        unread: function unread() {\n            var unread = {};\n            var list = this.$store.state.message.unread.list;\n            for (var i = 0, len = list.length; i < len; i++) {\n                unread['message' + list[i].message_type] = list[i].unread_count;\n            }\n            if (unread.message1 > 0 || unread.message2 > 0 || unread.message0 > 0) {\n                this.hasMessage = true;\n            }\n            return unread;\n        }\n    }),\n    methods: {\n        seachGo: function seachGo() {\n            if (this.resType == 'search') {\n                this.$eventHub.$emit('header_serach', {\n                    query: this.search_value\n                });\n            } else {\n                location.href = this.search;\n            }\n        },\n        getUserInfo: function getUserInfo() {\n            var _this = this;\n\n            var cache_userInfo = this.$version.userInfo;\n            var info = this.$cache.getStore(cache_userInfo.key, cache_userInfo.version);\n            if (info) {\n                this.$store.dispatch('user_setUserInfo', info).then(function (res) {\n                    _this.url.center = './author.work.html?user_id=' + _this.user.uid;\n                });\n                return false;\n            }\n            this.$store.dispatch('user_getUserInfo', {}).then(function (res) {\n                _this.url.center = './author.work.html?user_id=' + _this.user.uid;\n\n                _this.$cache.setStore(cache_userInfo.key, res, cache_userInfo.version, cache_userInfo.time);\n\n                _this.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        ourlogin: function ourlogin() {\n            this.centerShow = false;\n            this.$cache.removeStore(this.$version.userInfo.key);\n            this.$store.dispatch('user_ourlogin');\n        },\n        feedbackOpen: function feedbackOpen() {\n            this.centerShow = false;\n            this.$store.dispatch('common_switch', true);\n        },\n        getUnreadMessage: function getUnreadMessage() {\n            var _this2 = this;\n\n            this.$store.dispatch('message_getUnreadMessage', {}).then(function (res) {\n                _this2.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this2.$store.dispatch('bubble_fail', err);\n            });\n        }\n    },\n    mounted: function mounted() {\n        var _this3 = this;\n\n        this.$eventHub.$on('getUnreadMessage', function (option) {\n            _this3.getUnreadMessage();\n        });\n\n        this.search_value = decodeURIComponent(this.$url.getUrlParam('query')) || '';\n\n        this.getUserInfo();\n\n        this.getUnreadMessage();\n    }\n};\n\n/***/ }),\n\n/***/ \"+GE4\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"+l+3\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-header\"\n  }, [_c('div', {\n    staticClass: \"c-header-content\"\n  }, [_c('div', {\n    staticClass: \"logo\"\n  }, [_c('a', {\n    attrs: {\n      \"href\": _vm.url.index\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"menu\"\n  }, [_c('a', {\n    staticClass: \"item\",\n    class: {\n      'z-on': _vm.pageIndex == 'index'\n    },\n    attrs: {\n      \"href\": _vm.url.index\n    }\n  }, [_vm._v(\"发现\")]), _vm._v(\" \"), _c('a', {\n    staticClass: \"item\",\n    class: {\n      'z-on': _vm.pageIndex == 'mark'\n    },\n    attrs: {\n      \"href\": _vm.url.mark\n    }\n  }, [_vm._v(\"收藏\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"search\"\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.search_value),\n      expression: \"search_value\"\n    }],\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": \"搜索\"\n    },\n    domProps: {\n      \"value\": (_vm.search_value)\n    },\n    on: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.seachGo($event)\n      },\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.search_value = $event.target.value\n      }\n    }\n  }), _vm._v(\" \"), _c('a', {\n    attrs: {\n      \"href\": \"javascript:void(0)\"\n    },\n    on: {\n      \"click\": _vm.seachGo\n    }\n  }, [_c('span')])]), _vm._v(\" \"), (_vm.user.isLogin) ? _c('div', {\n    staticClass: \"publish\"\n  }, [_c('a', {\n    staticClass: \"publish-btn cpm_button_warn\",\n    attrs: {\n      \"href\": _vm.url.edit\n    }\n  }, [_vm._v(\"创作\")])]) : _vm._e(), _vm._v(\" \"), _c('div', {\n    staticClass: \"user\"\n  }, [(!_vm.user.isLogin) ? _c('div', {\n    staticClass: \"btn\"\n  }, [_c('a', {\n    attrs: {\n      \"href\": _vm.url.register\n    }\n  }, [_vm._v(\"注册\")]), _c('span', [_vm._v(\"·\")]), _c('a', {\n    attrs: {\n      \"href\": _vm.url.login\n    }\n  }, [_vm._v(\"登录\")])]) : _c('div', {\n    staticClass: \"member\"\n  }, [_c('div', {\n    staticClass: \"member-show-item member-show-notice\"\n  }, [_c('div', {\n    staticClass: \"member-show-notice_img\"\n  }), _vm._v(\" \"), (_vm.hasMessage) ? _c('div', {\n    staticClass: \"member-show-notice_number\"\n  }) : _vm._e(), _vm._v(\" \"), _c('div', {\n    staticClass: \"member-show member-notice\"\n  }, [_c('ul', {\n    staticClass: \"member-notice-lists\"\n  }, [_c('li', {\n    staticClass: \"member-notice-item\"\n  }, [_c('a', {\n    attrs: {\n      \"href\": _vm.url.better\n    }\n  }, [_c('span', {\n    staticClass: \"member-notice-item__list member-notice-item__icon\"\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"member-notice-item__list member-notice-item__text\"\n  }, [_vm._v(\"精选\")]), _vm._v(\" \"), (!!_vm.unread.message1 && _vm.unread.message1 != 0) ? _c('span', {\n    staticClass: \"member-notice-item__list member-notice-item__number\"\n  }, [_vm._v(\"·\" + _vm._s(_vm.unread.message1))]) : _vm._e()])]), _vm._v(\" \"), _c('li', {\n    staticClass: \"member-notice-item\"\n  }, [_c('a', {\n    attrs: {\n      \"href\": _vm.url.comment\n    }\n  }, [_c('span', {\n    staticClass: \"member-notice-item__list member-notice-item__icon\"\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"member-notice-item__list member-notice-item__text\"\n  }, [_vm._v(\"评论我\")]), _vm._v(\" \"), (!!_vm.unread.message2 && _vm.unread.message2 != 0) ? _c('span', {\n    staticClass: \"member-notice-item__list member-notice-item__number\"\n  }, [_vm._v(\"·\" + _vm._s(_vm.unread.message2))]) : _vm._e()])]), _vm._v(\" \"), _c('li', {\n    staticClass: \"member-notice-item\"\n  }, [_c('a', {\n    attrs: {\n      \"href\": _vm.url.infomation\n    }\n  }, [_c('span', {\n    staticClass: \"member-notice-item__list member-notice-item__icon\"\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"member-notice-item__list member-notice-item__text\"\n  }, [_vm._v(\"其他消息\")]), _vm._v(\" \"), (!!_vm.unread.message0 && _vm.unread.message0 != 0) ? _c('span', {\n    staticClass: \"member-notice-item__list member-notice-item__number\"\n  }, [_vm._v(\"·\" + _vm._s(_vm.unread.message0))]) : _vm._e()])])])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"member-show-item member-show-center\"\n  }, [_c('div', {\n    staticClass: \"member-show-center_img\",\n    style: ({\n      'background-image': 'url(' + (!!_vm.user.avatar_url ? _vm.user.avatar_url : _vm.avatar) + ')'\n    })\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"member-show member-center\"\n  }, [_c('ul', {\n    staticClass: \"member-center-lists\"\n  }, [_c('li', {\n    staticClass: \"member-center-item\"\n  }, [_c('a', {\n    attrs: {\n      \"href\": _vm.url.center\n    }\n  }, [_c('span', {\n    staticClass: \"member-center-item__list member-center-item__icon\"\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"member-center-item__list member-center-item__text\"\n  }, [_vm._v(\"我的主页\")])])]), _vm._v(\" \"), _c('li', {\n    staticClass: \"member-center-item\"\n  }, [_c('a', {\n    attrs: {\n      \"href\": _vm.url.setting\n    }\n  }, [_c('span', {\n    staticClass: \"member-center-item__list member-center-item__icon\"\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"member-center-item__list member-center-item__text\"\n  }, [_vm._v(\"个人设置\")])])]), _vm._v(\" \"), _c('li', {\n    staticClass: \"member-center-item\",\n    on: {\n      \"click\": _vm.feedbackOpen\n    }\n  }, [_c('a', {\n    attrs: {\n      \"href\": \"javascript:void(0);\"\n    }\n  }, [_c('span', {\n    staticClass: \"member-center-item__list member-center-item__icon\"\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"member-center-item__list member-center-item__text\"\n  }, [_vm._v(\"意见反馈\")])])]), _vm._v(\" \"), _c('li', {\n    staticClass: \"member-center-item\",\n    on: {\n      \"click\": _vm.ourlogin\n    }\n  }, [_c('a', {\n    attrs: {\n      \"href\": \"javascript:void(0);\"\n    }\n  }, [_c('span', {\n    staticClass: \"member-center-item__list member-center-item__icon\"\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"member-center-item__list member-center-item__text\"\n  }, [_vm._v(\"退出登录\")])])])])])])])])]), _vm._v(\" \"), _c('Feedback')], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ \"0CNv\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"sUpd\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"xTQR\"),\n  /* template */\n  __webpack_require__(\"s/ku\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"1nOS\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _vuex = __webpack_require__(\"NYxO\");\n\nvar _avatar = __webpack_require__(\"mOGY\");\n\nvar _avatar2 = _interopRequireDefault(_avatar);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n    data: function data() {\n        return {\n            avatar: _avatar2.default,\n            labelTag: '',\n            subMoreShow: false,\n            query: '',\n            pageIndex: 1,\n            pageSize: 5 };\n    },\n\n    props: ['resType', 'loadType', 'userType', 'catalog_type'],\n    computed: (0, _vuex.mapState)({\n        article: function article(state) {\n            return state.opus.article;\n        },\n        tag: function tag(state) {\n            return state.opus.category;\n        },\n        user: function user(state) {\n            return state.user.info;\n        }\n    }),\n    methods: {\n        pageSwitch: function pageSwitch(pageIndex) {\n            if (this.pageIndex == pageIndex) {\n                return false;\n            }\n            this.pageIndex = pageIndex;\n            this.getList();\n        },\n        subMoreSwitch: function subMoreSwitch() {\n            this.subMoreShow = !this.subMoreShow;\n        },\n        remove: function remove(catalogId) {\n            var that = this;\n            this.$store.dispatch('bubble_showBubble', {\n                show: true,\n                type: 'warn',\n                warn: {\n                    title: '确定要删除?',\n                    content: '删除后将无法恢复，请谨慎处理',\n                    comfireFn: function comfireFn() {\n                        that.delCatalog(catalogId);\n                    }\n                }\n            });\n        },\n        getCatalogList: function getCatalogList(type) {\n            var _this = this;\n\n            this.$store.dispatch('opus_getCatalogList', {\n                \"type\": type || this.loadType || '',\n                \"params\": {\n                    \"pagination\": \"1\",\n                    \"page\": this.pageIndex,\n                    \"pageSize\": this.pageSize },\n                \"body\": {\n                    \"label\": this.resType == 'page' ? this.labelTag : '',\n                    \"catalog_type\": this.catalog_type,\n                    \"user_id\": this.userType == 'user_id' ? this.user_id : '',\n                    \"fuzzy_query\": this.query || '' }\n            }).then(function (res) {\n                _this.$emit('article_count', _this.article.count);\n\n                _this.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        getMyCatalogList: function getMyCatalogList() {\n            var _this2 = this;\n\n            if (!this.user.isLogin && this.resType != 'index') {\n                console.log('----error----on login, getCatalogList');\n                return false;\n            }\n            this.$store.dispatch('opus_getMyCatalogList', {\n                \"pagination\": \"1\",\n                \"page\": this.pageIndex,\n                \"pageSize\": this.pageSize }).then(function (res) {\n                _this2.$emit('article_count', _this2.article.count);\n\n                _this2.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this2.$store.dispatch('bubble_fail', err);\n            });\n        },\n        getFavoritesList: function getFavoritesList() {\n            var _this3 = this;\n\n            this.$store.dispatch('opus_getFavoritesList', {\n                \"pagination\": \"1\",\n                \"page\": this.pageIndex,\n                \"pageSize\": this.pageSize }).then(function (res) {\n\n                _this3.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this3.$store.dispatch('bubble_fail', err);\n            });\n        },\n        getMore: function getMore() {\n            this.pageIndex++;\n            this.getList();\n        },\n        getList: function getList() {\n            var _this4 = this;\n\n            if (this.resType == 'mark') {\n                this.getFavoritesList();\n            } else if (this.resType == 'history') {\n                var cache_history = this.$version.history;\n                var history = this.$cache.getStore(cache_history.key, cache_history.version);\n                var lists = history.slice((this.pageIndex - 1) * this.pageSize, this.pageSize * this.pageIndex);\n                this.$store.dispatch('opus_setArticle', {\n                    lists: lists,\n                    count: history.length\n                }).then(function (res) {\n                    _this4.$emit('article_count', _this4.article.count);\n                });\n            } else if (this.user.uid && this.user.uid == this.user_id) {\n                this.getMyCatalogList();\n            } else {\n                this.getCatalogList();\n            }\n        },\n        delFavorites: function delFavorites(e) {\n            var _this5 = this;\n\n            var catalogId = $(e.currentTarget).parents('.c-artice-item-wrap').data('catalog_id');\n            this.$store.dispatch('opus_delFavorites', {\n                catalogId: catalogId\n            }).then(function (res) {\n                _this5.getList();\n\n                _this5.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this5.$store.dispatch('bubble_fail', err);\n            });\n        },\n        delCatalog: function delCatalog(catalogId) {\n            var _this6 = this;\n\n            this.$store.dispatch('opus_delCatalog', {\n                \"catalogId\": catalogId\n            }).then(function (res) {\n                _this6.getCatalogList();\n\n                _this6.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this6.$store.dispatch('bubble_fail', err);\n            });\n        },\n        delHistory: function delHistory(catalog_id) {\n            var cache_history = this.$version.history;\n            var lists = this.$cache.getStore(cache_history.key, cache_history.version);\n            for (var i = 0, len = lists.length; i < len; i++) {\n                if (lists[i].catalog_id == catalog_id) {\n                    lists.splice(i, 1);\n                    break;\n                }\n            }\n            this.$cache.setStore(cache_history.key, lists, cache_history.version, cache_history.time);\n            this.getList();\n        }\n    },\n    created: function created() {\n        var _this7 = this;\n\n        this.$eventHub.$on('header_serach', function (option) {\n            if (_this7.query == option.query) {\n                return false;\n            }\n            _this7.query = option.query;\n            _this7.getList();\n        });\n\n        this.$eventHub.$on('author_chapter_list_refresh', function (option) {\n            _this7.getList();\n        });\n    },\n    mounted: function mounted() {\n        var _this8 = this;\n\n        $(window).on('scroll', function (e) {\n            if ($('.btn-more-before').length <= 0) {\n                return false;\n            }\n            var top = $(window).scrollTop();\n            var height = $(window).height();\n            var _top = $('.btn-more-before').offset().top;\n            if (_top + 20 <= top + height) {\n                _this8.getMore();\n            }\n        });\n\n        this.query = decodeURIComponent(this.$url.getUrlParam('query'));\n        this.user_id = this.$url.getUrlParam('user_id');\n        this.labelTag = this.$url.getUrlParam('labelTag');\n\n        this.$watch('tag.index', function (newVal, oldVal) {\n            this.pageIndex = 1;\n            this.getCatalogList('page');\n        });\n\n        if (!this.labelTag && this.resType == 'page') {\n            this.$store.dispatch('bubble_showBubble', {\n                show: true,\n                type: 'top',\n                top: {\n                    status: 'z-warn',\n                    msg: '系统繁忙'\n                }\n            });\n            return false;\n        }\n\n        this.getList();\n    }\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"7t+N\")))\n\n/***/ }),\n\n/***/ \"1na0\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-chapter-list\"\n  }, [_c('div', {\n    staticClass: \"c-chapter-list-wrap\"\n  }, [_vm._l((_vm.chapter.lists), function(data, index) {\n    return _c('div', {\n      staticClass: \"c-chapter-list-item\"\n    }, [_c('a', {\n      staticClass: \"link\",\n      attrs: {\n        \"href\": './article.read.html?catalog_id=' + _vm.catalog_id + '&chapter_id=' + data.chapter_id\n      }\n    }, [_c('div', {\n      staticClass: \"c-chapter-list__top\"\n    }, [_c('div', {\n      staticClass: \"top-title\"\n    }, [_vm._v(_vm._s(data.chapter_title))]), _vm._v(\" \"), (data.isNew) ? _c('div', {\n      staticClass: \"top-new\"\n    }, [_vm._v(\"·new\")]) : _vm._e()]), _vm._v(\" \"), _c('div', {\n      staticClass: \"c-chapter-list__bottom\"\n    }, [_c('div', {\n      staticClass: \"bottom-time\"\n    }, [_vm._v(_vm._s(data.publish_date))]), _vm._v(\" \"), (data.owner == 1 && data.chapter_status == 1) ? _c('a', {\n      staticClass: \"bottom-manger-item bottom-manger-edit\",\n      attrs: {\n        \"href\": './article.edit.html?catalog_id=' + _vm.catalog_id + '&chapter_id=' + data.chapter_id\n      }\n    }, [_vm._v(\"修改信息\")]) : _vm._e(), _vm._v(\" \"), (data.owner == 1) ? _c('a', {\n      staticClass: \"bottom-manger-item bottom-manger-remove\",\n      attrs: {\n        \"href\": \"javascript:void(0);\"\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.remove(data.chapter_id)\n        }\n      }\n    }, [_vm._v(\"删除章节\")]) : _vm._e(), _vm._v(\" \"), _c('div', {\n      staticClass: \"bottom-follow\"\n    }, [_c('em'), _c('span', [_vm._v(_vm._s(data.praise_count))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"bottom-comment\"\n    }, [_c('em'), _c('span', [_vm._v(_vm._s(data.comment_count))])])]), _vm._v(\" \"), (data.hasHistory) ? _c('div', {\n      staticClass: \"c-chapter-list__history\"\n    }, [_c('a', {\n      attrs: {\n        \"href\": \"#none\"\n      }\n    })]) : _vm._e(), _vm._v(\" \"), _c('div', {\n      staticClass: \"bottom\"\n    })])])\n  }), _vm._v(\" \"), (_vm.chapter.count <= 0) ? _c('Empty') : _vm._e()], 2), _vm._v(\" \"), _c('Page', {\n    attrs: {\n      \"count\": _vm.chapter.count,\n      \"length\": _vm.pageSize,\n      \"index\": _vm.pageIndex\n    },\n    on: {\n      \"page_switch\": _vm.pageSwitch\n    }\n  })], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ \"28R+\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return (_vm.data.show) ? _c('div', {\n    staticClass: \"c-feedback\"\n  }, [_c('div', {\n    staticClass: \"c-feedback-wrap\"\n  }, [_c('div', {\n    staticClass: \"content-form\"\n  }, [_c('div', {\n    staticClass: \"content-textarea\",\n    class: {\n      'z-error': !_vm.content_reg\n    }\n  }, [(!_vm.content_reg) ? _c('div', {\n    staticClass: \"c-dialog__tip\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.content_reg_con))])]) : _vm._e(), _vm._v(\" \"), _c('textarea', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.content),\n      expression: \"content\"\n    }],\n    attrs: {\n      \"placeholder\": \"写下你的宝贵建议...\"\n    },\n    domProps: {\n      \"value\": (_vm.content)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.content = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"content-input\",\n    class: {\n      'z-error': !_vm.contact_reg\n    }\n  }, [(!_vm.contact_reg) ? _c('div', {\n    staticClass: \"c-dialog__tip\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.contact_reg_con))])]) : _vm._e(), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.contact),\n      expression: \"contact\"\n    }],\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": \"留下你的联系方式...\"\n    },\n    domProps: {\n      \"value\": (_vm.contact)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.contact = $event.target.value\n      }\n    }\n  })])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"content-btn\"\n  }, [_c('div', {\n    staticClass: \"content-btn-item content-btn-cancel\",\n    on: {\n      \"click\": _vm.close\n    }\n  }, [_vm._v(\"取消\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"content-btn-item content-btn-submit\",\n    on: {\n      \"click\": _vm.send\n    }\n  }, [_vm._v(\"发送\")])])])]) : _vm._e()\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ \"2Gq5\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _vm._m(0)\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-empty\"\n  }, [_c('div', {\n    staticClass: \"c-empty-img\"\n  }, [_c('img', {\n    attrs: {\n      \"src\": __webpack_require__(\"Xdpa\")\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"c-empty-text\"\n  }, [_vm._v(\"没有相关结果\")])])\n}]}\n\n/***/ }),\n\n/***/ \"2mP8\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-menu-left\"\n  }, _vm._l((_vm.data), function(item) {\n    return _c('div', {\n      staticClass: \"item\",\n      class: {\n        'z-on': item.isActive\n      }\n    }, [_c('a', {\n      attrs: {\n        \"href\": item.url || 'javascript:void(0);'\n      }\n    }, [_c('span', {\n      staticClass: \"item__icon\"\n    }), _vm._v(\" \"), _c('span', {\n      staticClass: \"item__title\"\n    }, [_vm._v(_vm._s(item.title) + _vm._s(item.number ? '·' + item.number : ''))])])])\n  }))\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ \"36Po\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-comment-info\"\n  }, [_c('div', {\n    staticClass: \"c-comment-info-wrap\"\n  }, [_vm._l((_vm.message.list), function(data) {\n    return _c('div', {\n      staticClass: \"c-comment-info-list\"\n    }, [_c('div', {\n      staticClass: \"c-comment-info__top\"\n    }, [_c('div', {\n      staticClass: \"top__img\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": data.message.sender.avatar_url || _vm.avatar\n      }\n    })]), _vm._v(\" \"), _c('div', {\n      staticClass: \"top__name\"\n    }, [_vm._v(_vm._s(data.message.sender.nick_name))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"top__time\"\n    }, [_vm._v(_vm._s(data.create_time))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"c-comment-info__content\"\n    }, [_vm._v(\"\\n            \" + _vm._s(data.message.content.content) + \"\\n        \")])])\n  }), _vm._v(\" \"), (_vm.message.count <= 0) ? _c('Empty', {\n    staticClass: \"content-empty\"\n  }) : _vm._e()], 2), _vm._v(\" \"), _c('Page', {\n    attrs: {\n      \"count\": _vm.message.count,\n      \"length\": _vm.pageSize,\n      \"index\": _vm.pageIndex\n    },\n    on: {\n      \"page_switch\": _vm.pageSwitch\n    }\n  })], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ \"387H\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__moxie__ = __webpack_require__(\"HvkJ\");\n/**\n * Plupload - multi-runtime File Uploader\n * v2.1.2\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n *\n * Date: 2014-05-14\n */\n/**\n * Plupload.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/*global mOxie:true */\n(function(window, o, undef) {\n\nvar delay = window.setTimeout\n, fileFilters = {}\n;\n\n// convert plupload features to caps acceptable by mOxie\nfunction normalizeCaps(settings) {\t\t\n\tvar features = settings.required_features, caps = {};\n\n\tfunction resolve(feature, value, strict) {\n\t\t// Feature notation is deprecated, use caps (this thing here is required for backward compatibility)\n\t\tvar map = { \n\t\t\tchunks: 'slice_blob',\n\t\t\tjpgresize: 'send_binary_string',\n\t\t\tpngresize: 'send_binary_string',\n\t\t\tprogress: 'report_upload_progress',\n\t\t\tmulti_selection: 'select_multiple',\n\t\t\tdragdrop: 'drag_and_drop',\n\t\t\tdrop_element: 'drag_and_drop',\n\t\t\theaders: 'send_custom_headers',\n\t\t\turlstream_upload: 'send_binary_string',\n\t\t\tcanSendBinary: 'send_binary',\n\t\t\ttriggerDialog: 'summon_file_dialog'\n\t\t};\n\n\t\tif (map[feature]) {\n\t\t\tcaps[map[feature]] = value;\n\t\t} else if (!strict) {\n\t\t\tcaps[feature] = value;\n\t\t}\n\t}\n\n\tif (typeof(features) === 'string') {\n\t\tplupload.each(features.split(/\\s*,\\s*/), function(feature) {\n\t\t\tresolve(feature, true);\n\t\t});\n\t} else if (typeof(features) === 'object') {\n\t\tplupload.each(features, function(value, feature) {\n\t\t\tresolve(feature, value);\n\t\t});\n\t} else if (features === true) {\n\t\t// check settings for required features\n\t\tif (settings.chunk_size > 0) {\n\t\t\tcaps.slice_blob = true;\n\t\t}\n\n\t\tif (settings.resize.enabled || !settings.multipart) {\n\t\t\tcaps.send_binary_string = true;\n\t\t}\n\t\t\n\t\tplupload.each(settings, function(value, feature) {\n\t\t\tresolve(feature, !!value, true); // strict check\n\t\t});\n\t}\n\t\n\treturn caps;\n}\n\n/** \n * @module plupload\t\n * @static\n */\nvar plupload = {\n\t/**\n\t * Plupload version will be replaced on build.\n\t *\n\t * @property VERSION\n\t * @for Plupload\n\t * @static\n\t * @final\n\t */\n\tVERSION : '2.1.2',\n\n\t/**\n\t * Inital state of the queue and also the state ones it's finished all it's uploads.\n\t *\n\t * @property STOPPED\n\t * @static\n\t * @final\n\t */\n\tSTOPPED : 1,\n\n\t/**\n\t * Upload process is running\n\t *\n\t * @property STARTED\n\t * @static\n\t * @final\n\t */\n\tSTARTED : 2,\n\n\t/**\n\t * File is queued for upload\n\t *\n\t * @property QUEUED\n\t * @static\n\t * @final\n\t */\n\tQUEUED : 1,\n\n\t/**\n\t * File is being uploaded\n\t *\n\t * @property UPLOADING\n\t * @static\n\t * @final\n\t */\n\tUPLOADING : 2,\n\n\t/**\n\t * File has failed to be uploaded\n\t *\n\t * @property FAILED\n\t * @static\n\t * @final\n\t */\n\tFAILED : 4,\n\n\t/**\n\t * File has been uploaded successfully\n\t *\n\t * @property DONE\n\t * @static\n\t * @final\n\t */\n\tDONE : 5,\n\n\t// Error constants used by the Error event\n\n\t/**\n\t * Generic error for example if an exception is thrown inside Silverlight.\n\t *\n\t * @property GENERIC_ERROR\n\t * @static\n\t * @final\n\t */\n\tGENERIC_ERROR : -100,\n\n\t/**\n\t * HTTP transport error. For example if the server produces a HTTP status other than 200.\n\t *\n\t * @property HTTP_ERROR\n\t * @static\n\t * @final\n\t */\n\tHTTP_ERROR : -200,\n\n\t/**\n\t * Generic I/O error. For example if it wasn't possible to open the file stream on local machine.\n\t *\n\t * @property IO_ERROR\n\t * @static\n\t * @final\n\t */\n\tIO_ERROR : -300,\n\n\t/**\n\t * @property SECURITY_ERROR\n\t * @static\n\t * @final\n\t */\n\tSECURITY_ERROR : -400,\n\n\t/**\n\t * Initialization error. Will be triggered if no runtime was initialized.\n\t *\n\t * @property INIT_ERROR\n\t * @static\n\t * @final\n\t */\n\tINIT_ERROR : -500,\n\n\t/**\n\t * File size error. If the user selects a file that is too large it will be blocked and an error of this type will be triggered.\n\t *\n\t * @property FILE_SIZE_ERROR\n\t * @static\n\t * @final\n\t */\n\tFILE_SIZE_ERROR : -600,\n\n\t/**\n\t * File extension error. If the user selects a file that isn't valid according to the filters setting.\n\t *\n\t * @property FILE_EXTENSION_ERROR\n\t * @static\n\t * @final\n\t */\n\tFILE_EXTENSION_ERROR : -601,\n\n\t/**\n\t * Duplicate file error. If prevent_duplicates is set to true and user selects the same file again.\n\t *\n\t * @property FILE_DUPLICATE_ERROR\n\t * @static\n\t * @final\n\t */\n\tFILE_DUPLICATE_ERROR : -602,\n\n\t/**\n\t * Runtime will try to detect if image is proper one. Otherwise will throw this error.\n\t *\n\t * @property IMAGE_FORMAT_ERROR\n\t * @static\n\t * @final\n\t */\n\tIMAGE_FORMAT_ERROR : -700,\n\n\t/**\n\t * While working on files runtime may run out of memory and will throw this error.\n\t *\n\t * @since 2.1.2\n\t * @property MEMORY_ERROR\n\t * @static\n\t * @final\n\t */\n\tMEMORY_ERROR : -701,\n\n\t/**\n\t * Each runtime has an upper limit on a dimension of the image it can handle. If bigger, will throw this error.\n\t *\n\t * @property IMAGE_DIMENSIONS_ERROR\n\t * @static\n\t * @final\n\t */\n\tIMAGE_DIMENSIONS_ERROR : -702,\n\n\t/**\n\t * Mime type lookup table.\n\t *\n\t * @property mimeTypes\n\t * @type Object\n\t * @final\n\t */\n\tmimeTypes : o.mimes,\n\n\t/**\n\t * In some cases sniffing is the only way around :(\n\t */\n\tua: o.ua,\n\n\t/**\n\t * Gets the true type of the built-in object (better version of typeof).\n\t * @credits Angus Croll (http://javascriptweblog.wordpress.com/)\n\t *\n\t * @method typeOf\n\t * @static\n\t * @param {Object} o Object to check.\n\t * @return {String} Object [[Class]]\n\t */\n\ttypeOf: o.typeOf,\n\n\t/**\n\t * Extends the specified object with another object.\n\t *\n\t * @method extend\n\t * @static\n\t * @param {Object} target Object to extend.\n\t * @param {Object..} obj Multiple objects to extend with.\n\t * @return {Object} Same as target, the extended object.\n\t */\n\textend : o.extend,\n\n\t/**\n\t * Generates an unique ID. This is 99.99% unique since it takes the current time and 5 random numbers.\n\t * The only way a user would be able to get the same ID is if the two persons at the same exact milisecond manages\n\t * to get 5 the same random numbers between 0-65535 it also uses a counter so each call will be guaranteed to be page unique.\n\t * It's more probable for the earth to be hit with an ansteriod. You can also if you want to be 100% sure set the plupload.guidPrefix property\n\t * to an user unique key.\n\t *\n\t * @method guid\n\t * @static\n\t * @return {String} Virtually unique id.\n\t */\n\tguid : o.guid,\n\n\t/**\n\t * Get array of DOM Elements by their ids.\n\t * \n\t * @method get\n\t * @for Utils\n\t * @param {String} id Identifier of the DOM Element\n\t * @return {Array}\n\t*/\n\tget : function get(ids) {\n\t\tvar els = [], el;\n\n\t\tif (o.typeOf(ids) !== 'array') {\n\t\t\tids = [ids];\n\t\t}\n\n\t\tvar i = ids.length;\n\t\twhile (i--) {\n\t\t\tel = o.get(ids[i]);\n\t\t\tif (el) {\n\t\t\t\tels.push(el);\n\t\t\t}\n\t\t}\n\n\t\treturn els.length ? els : null;\n\t},\n\n\t/**\n\t * Executes the callback function for each item in array/object. If you return false in the\n\t * callback it will break the loop.\n\t *\n\t * @method each\n\t * @static\n\t * @param {Object} obj Object to iterate.\n\t * @param {function} callback Callback function to execute for each item.\n\t */\n\teach : o.each,\n\n\t/**\n\t * Returns the absolute x, y position of an Element. The position will be returned in a object with x, y fields.\n\t *\n\t * @method getPos\n\t * @static\n\t * @param {Element} node HTML element or element id to get x, y position from.\n\t * @param {Element} root Optional root element to stop calculations at.\n\t * @return {object} Absolute position of the specified element object with x, y fields.\n\t */\n\tgetPos : o.getPos,\n\n\t/**\n\t * Returns the size of the specified node in pixels.\n\t *\n\t * @method getSize\n\t * @static\n\t * @param {Node} node Node to get the size of.\n\t * @return {Object} Object with a w and h property.\n\t */\n\tgetSize : o.getSize,\n\n\t/**\n\t * Encodes the specified string.\n\t *\n\t * @method xmlEncode\n\t * @static\n\t * @param {String} s String to encode.\n\t * @return {String} Encoded string.\n\t */\n\txmlEncode : function(str) {\n\t\tvar xmlEncodeChars = {'<' : 'lt', '>' : 'gt', '&' : 'amp', '\"' : 'quot', '\\'' : '#39'}, xmlEncodeRegExp = /[<>&\\\"\\']/g;\n\n\t\treturn str ? ('' + str).replace(xmlEncodeRegExp, function(chr) {\n\t\t\treturn xmlEncodeChars[chr] ? '&' + xmlEncodeChars[chr] + ';' : chr;\n\t\t}) : str;\n\t},\n\n\t/**\n\t * Forces anything into an array.\n\t *\n\t * @method toArray\n\t * @static\n\t * @param {Object} obj Object with length field.\n\t * @return {Array} Array object containing all items.\n\t */\n\ttoArray : o.toArray,\n\n\t/**\n\t * Find an element in array and return it's index if present, otherwise return -1.\n\t *\n\t * @method inArray\n\t * @static\n\t * @param {mixed} needle Element to find\n\t * @param {Array} array\n\t * @return {Int} Index of the element, or -1 if not found\n\t */\n\tinArray : o.inArray,\n\n\t/**\n\t * Extends the language pack object with new items.\n\t *\n\t * @method addI18n\n\t * @static\n\t * @param {Object} pack Language pack items to add.\n\t * @return {Object} Extended language pack object.\n\t */\n\taddI18n : o.addI18n,\n\n\t/**\n\t * Translates the specified string by checking for the english string in the language pack lookup.\n\t *\n\t * @method translate\n\t * @static\n\t * @param {String} str String to look for.\n\t * @return {String} Translated string or the input string if it wasn't found.\n\t */\n\ttranslate : o.translate,\n\n\t/**\n\t * Checks if object is empty.\n\t *\n\t * @method isEmptyObj\n\t * @static\n\t * @param {Object} obj Object to check.\n\t * @return {Boolean}\n\t */\n\tisEmptyObj : o.isEmptyObj,\n\n\t/**\n\t * Checks if specified DOM element has specified class.\n\t *\n\t * @method hasClass\n\t * @static\n\t * @param {Object} obj DOM element like object to add handler to.\n\t * @param {String} name Class name\n\t */\n\thasClass : o.hasClass,\n\n\t/**\n\t * Adds specified className to specified DOM element.\n\t *\n\t * @method addClass\n\t * @static\n\t * @param {Object} obj DOM element like object to add handler to.\n\t * @param {String} name Class name\n\t */\n\taddClass : o.addClass,\n\n\t/**\n\t * Removes specified className from specified DOM element.\n\t *\n\t * @method removeClass\n\t * @static\n\t * @param {Object} obj DOM element like object to add handler to.\n\t * @param {String} name Class name\n\t */\n\tremoveClass : o.removeClass,\n\n\t/**\n\t * Returns a given computed style of a DOM element.\n\t *\n\t * @method getStyle\n\t * @static\n\t * @param {Object} obj DOM element like object.\n\t * @param {String} name Style you want to get from the DOM element\n\t */\n\tgetStyle : o.getStyle,\n\n\t/**\n\t * Adds an event handler to the specified object and store reference to the handler\n\t * in objects internal Plupload registry (@see removeEvent).\n\t *\n\t * @method addEvent\n\t * @static\n\t * @param {Object} obj DOM element like object to add handler to.\n\t * @param {String} name Name to add event listener to.\n\t * @param {Function} callback Function to call when event occurs.\n\t * @param {String} (optional) key that might be used to add specifity to the event record.\n\t */\n\taddEvent : o.addEvent,\n\n\t/**\n\t * Remove event handler from the specified object. If third argument (callback)\n\t * is not specified remove all events with the specified name.\n\t *\n\t * @method removeEvent\n\t * @static\n\t * @param {Object} obj DOM element to remove event listener(s) from.\n\t * @param {String} name Name of event listener to remove.\n\t * @param {Function|String} (optional) might be a callback or unique key to match.\n\t */\n\tremoveEvent: o.removeEvent,\n\n\t/**\n\t * Remove all kind of events from the specified object\n\t *\n\t * @method removeAllEvents\n\t * @static\n\t * @param {Object} obj DOM element to remove event listeners from.\n\t * @param {String} (optional) unique key to match, when removing events.\n\t */\n\tremoveAllEvents: o.removeAllEvents,\n\n\t/**\n\t * Cleans the specified name from national characters (diacritics). The result will be a name with only a-z, 0-9 and _.\n\t *\n\t * @method cleanName\n\t * @static\n\t * @param {String} s String to clean up.\n\t * @return {String} Cleaned string.\n\t */\n\tcleanName : function(name) {\n\t\tvar i, lookup;\n\n\t\t// Replace diacritics\n\t\tlookup = [\n\t\t\t/[\\300-\\306]/g, 'A', /[\\340-\\346]/g, 'a',\n\t\t\t/\\307/g, 'C', /\\347/g, 'c',\n\t\t\t/[\\310-\\313]/g, 'E', /[\\350-\\353]/g, 'e',\n\t\t\t/[\\314-\\317]/g, 'I', /[\\354-\\357]/g, 'i',\n\t\t\t/\\321/g, 'N', /\\361/g, 'n',\n\t\t\t/[\\322-\\330]/g, 'O', /[\\362-\\370]/g, 'o',\n\t\t\t/[\\331-\\334]/g, 'U', /[\\371-\\374]/g, 'u'\n\t\t];\n\n\t\tfor (i = 0; i < lookup.length; i += 2) {\n\t\t\tname = name.replace(lookup[i], lookup[i + 1]);\n\t\t}\n\n\t\t// Replace whitespace\n\t\tname = name.replace(/\\s+/g, '_');\n\n\t\t// Remove anything else\n\t\tname = name.replace(/[^a-z0-9_\\-\\.]+/gi, '');\n\n\t\treturn name;\n\t},\n\n\t/**\n\t * Builds a full url out of a base URL and an object with items to append as query string items.\n\t *\n\t * @method buildUrl\n\t * @static\n\t * @param {String} url Base URL to append query string items to.\n\t * @param {Object} items Name/value object to serialize as a querystring.\n\t * @return {String} String with url + serialized query string items.\n\t */\n\tbuildUrl : function(url, items) {\n\t\tvar query = '';\n\n\t\tplupload.each(items, function(value, name) {\n\t\t\tquery += (query ? '&' : '') + encodeURIComponent(name) + '=' + encodeURIComponent(value);\n\t\t});\n\n\t\tif (query) {\n\t\t\turl += (url.indexOf('?') > 0 ? '&' : '?') + query;\n\t\t}\n\n\t\treturn url;\n\t},\n\n\t/**\n\t * Formats the specified number as a size string for example 1024 becomes 1 KB.\n\t *\n\t * @method formatSize\n\t * @static\n\t * @param {Number} size Size to format as string.\n\t * @return {String} Formatted size string.\n\t */\n\tformatSize : function(size) {\n\n\t\tif (size === undef || /\\D/.test(size)) {\n\t\t\treturn plupload.translate('N/A');\n\t\t}\n\n\t\tfunction round(num, precision) {\n\t\t\treturn Math.round(num * Math.pow(10, precision)) / Math.pow(10, precision);\n\t\t}\n\n\t\tvar boundary = Math.pow(1024, 4);\n\n\t\t// TB\n\t\tif (size > boundary) {\n\t\t\treturn round(size / boundary, 1) + \" \" + plupload.translate('tb');\n\t\t}\n\n\t\t// GB\n\t\tif (size > (boundary/=1024)) {\n\t\t\treturn round(size / boundary, 1) + \" \" + plupload.translate('gb');\n\t\t}\n\n\t\t// MB\n\t\tif (size > (boundary/=1024)) {\n\t\t\treturn round(size / boundary, 1) + \" \" + plupload.translate('mb');\n\t\t}\n\n\t\t// KB\n\t\tif (size > 1024) {\n\t\t\treturn Math.round(size / 1024) + \" \" + plupload.translate('kb');\n\t\t}\n\n\t\treturn size + \" \" + plupload.translate('b');\n\t},\n\n\n\t/**\n\t * Parses the specified size string into a byte value. For example 10kb becomes 10240.\n\t *\n\t * @method parseSize\n\t * @static\n\t * @param {String|Number} size String to parse or number to just pass through.\n\t * @return {Number} Size in bytes.\n\t */\n\tparseSize : o.parseSizeStr,\n\n\n\t/**\n\t * A way to predict what runtime will be choosen in the current environment with the\n\t * specified settings.\n\t *\n\t * @method predictRuntime\n\t * @static\n\t * @param {Object|String} config Plupload settings to check\n\t * @param {String} [runtimes] Comma-separated list of runtimes to check against\n\t * @return {String} Type of compatible runtime\n\t */\n\tpredictRuntime : function(config, runtimes) {\n\t\tvar up, runtime;\n\n\t\tup = new plupload.Uploader(config);\n\t\truntime = o.Runtime.thatCan(up.getOption().required_features, runtimes || config.runtimes);\n\t\tup.destroy();\n\t\treturn runtime;\n\t},\n\n\t/**\n\t * Registers a filter that will be executed for each file added to the queue.\n\t * If callback returns false, file will not be added.\n\t *\n\t * Callback receives two arguments: a value for the filter as it was specified in settings.filters\n\t * and a file to be filtered. Callback is executed in the context of uploader instance.\n\t *\n\t * @method addFileFilter\n\t * @static\n\t * @param {String} name Name of the filter by which it can be referenced in settings.filters\n\t * @param {String} cb Callback - the actual routine that every added file must pass\n\t */\n\taddFileFilter: function(name, cb) {\n\t\tfileFilters[name] = cb;\n\t}\n};\n\n\nplupload.addFileFilter('mime_types', function(filters, file, cb) {\n\tif (filters.length && !filters.regexp.test(file.name)) {\n\t\tthis.trigger('Error', {\n\t\t\tcode : plupload.FILE_EXTENSION_ERROR,\n\t\t\tmessage : plupload.translate('File extension error.'),\n\t\t\tfile : file\n\t\t});\n\t\tcb(false);\n\t} else {\n\t\tcb(true);\n\t}\n});\n\n\nplupload.addFileFilter('max_file_size', function(maxSize, file, cb) {\n\tvar undef;\n\n\tmaxSize = plupload.parseSize(maxSize);\n\n\t// Invalid file size\n\tif (file.size !== undef && maxSize && file.size > maxSize) {\n\t\tthis.trigger('Error', {\n\t\t\tcode : plupload.FILE_SIZE_ERROR,\n\t\t\tmessage : plupload.translate('File size error.'),\n\t\t\tfile : file\n\t\t});\n\t\tcb(false);\n\t} else {\n\t\tcb(true);\n\t}\n});\n\n\nplupload.addFileFilter('prevent_duplicates', function(value, file, cb) {\n\tif (value) {\n\t\tvar ii = this.files.length;\n\t\twhile (ii--) {\n\t\t\t// Compare by name and size (size might be 0 or undefined, but still equivalent for both)\n\t\t\tif (file.name === this.files[ii].name && file.size === this.files[ii].size) {\n\t\t\t\tthis.trigger('Error', {\n\t\t\t\t\tcode : plupload.FILE_DUPLICATE_ERROR,\n\t\t\t\t\tmessage : plupload.translate('Duplicate file error.'),\n\t\t\t\t\tfile : file\n\t\t\t\t});\n\t\t\t\tcb(false);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\tcb(true);\n});\n\n\n/**\n@class Uploader\n@constructor\n\n@param {Object} settings For detailed information about each option check documentation.\n\t@param {String|DOMElement} settings.browse_button id of the DOM element or DOM element itself to use as file dialog trigger.\n\t@param {String} settings.url URL of the server-side upload handler.\n\t@param {Number|String} [settings.chunk_size=0] Chunk size in bytes to slice the file into. Shorcuts with b, kb, mb, gb, tb suffixes also supported. `e.g. 204800 or \"204800b\" or \"200kb\"`. By default - disabled.\n\t@param {Boolean} [settings.send_chunk_number=true] Whether to send chunks and chunk numbers, or total and offset bytes.\n\t@param {String} [settings.container] id of the DOM element to use as a container for uploader structures. Defaults to document.body.\n\t@param {String|DOMElement} [settings.drop_element] id of the DOM element or DOM element itself to use as a drop zone for Drag-n-Drop.\n\t@param {String} [settings.file_data_name=\"file\"] Name for the file field in Multipart formated message.\n\t@param {Object} [settings.filters={}] Set of file type filters.\n\t\t@param {Array} [settings.filters.mime_types=[]] List of file types to accept, each one defined by title and list of extensions. `e.g. {title : \"Image files\", extensions : \"jpg,jpeg,gif,png\"}`. Dispatches `plupload.FILE_EXTENSION_ERROR`\n\t\t@param {String|Number} [settings.filters.max_file_size=0] Maximum file size that the user can pick, in bytes. Optionally supports b, kb, mb, gb, tb suffixes. `e.g. \"10mb\" or \"1gb\"`. By default - not set. Dispatches `plupload.FILE_SIZE_ERROR`.\n\t\t@param {Boolean} [settings.filters.prevent_duplicates=false] Do not let duplicates into the queue. Dispatches `plupload.FILE_DUPLICATE_ERROR`.\n\t@param {String} [settings.flash_swf_url] URL of the Flash swf.\n\t@param {Object} [settings.headers] Custom headers to send with the upload. Hash of name/value pairs.\n\t@param {Number} [settings.max_retries=0] How many times to retry the chunk or file, before triggering Error event.\n\t@param {Boolean} [settings.multipart=true] Whether to send file and additional parameters as Multipart formated message.\n\t@param {Object} [settings.multipart_params] Hash of key/value pairs to send with every file upload.\n\t@param {Boolean} [settings.multi_selection=true] Enable ability to select multiple files at once in file dialog.\n\t@param {String|Object} [settings.required_features] Either comma-separated list or hash of required features that chosen runtime should absolutely possess.\n\t@param {Object} [settings.resize] Enable resizng of images on client-side. Applies to `image/jpeg` and `image/png` only. `e.g. {width : 200, height : 200, quality : 90, crop: true}`\n\t\t@param {Number} [settings.resize.width] If image is bigger, it will be resized.\n\t\t@param {Number} [settings.resize.height] If image is bigger, it will be resized.\n\t\t@param {Number} [settings.resize.quality=90] Compression quality for jpegs (1-100).\n\t\t@param {Boolean} [settings.resize.crop=false] Whether to crop images to exact dimensions. By default they will be resized proportionally.\n\t@param {String} [settings.runtimes=\"html5,flash,silverlight,html4\"] Comma separated list of runtimes, that Plupload will try in turn, moving to the next if previous fails.\n\t@param {String} [settings.silverlight_xap_url] URL of the Silverlight xap.\n\t@param {Boolean} [settings.unique_names=false] If true will generate unique filenames for uploaded files.\n\t@param {Boolean} [settings.send_file_name=true] Whether to send file name as additional argument - 'name' (required for chunked uploads and some other cases where file name cannot be sent via normal ways).\n*/\nplupload.Uploader = function(options) {\n\t/**\n\t * Fires when the current RunTime has been initialized.\n\t *\n\t * @event Init\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t */\n\n\t/**\n\t * Fires after the init event incase you need to perform actions there.\n\t *\n\t * @event PostInit\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t */\n\n\t/**\n\t * Fires when the option is changed in via uploader.setOption().\n\t *\n\t * @event OptionChanged\n\t * @since 2.1\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {String} name Name of the option that was changed\n\t * @param {Mixed} value New value for the specified option\n\t * @param {Mixed} oldValue Previous value of the option\n\t */\n\n\t/**\n\t * Fires when the silverlight/flash or other shim needs to move.\n\t *\n\t * @event Refresh\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t */\n\n\t/**\n\t * Fires when the overall state is being changed for the upload queue.\n\t *\n\t * @event StateChanged\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t */\n\n\t/**\n\t * Fires when browse_button is clicked and browse dialog shows.\n\t *\n\t * @event Browse\n\t * @since 2.1.2\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t */\t\n\n\t/**\n\t * Fires for every filtered file before it is added to the queue.\n\t * \n\t * @event FileFiltered\n\t * @since 2.1\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {plupload.File} file Another file that has to be added to the queue.\n\t */\n\n\t/**\n\t * Fires when the file queue is changed. In other words when files are added/removed to the files array of the uploader instance.\n\t *\n\t * @event QueueChanged\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t */ \n\n\t/**\n\t * Fires after files were filtered and added to the queue.\n\t *\n\t * @event FilesAdded\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {Array} files Array of file objects that were added to queue by the user.\n\t */\n\n\t/**\n\t * Fires when file is removed from the queue.\n\t *\n\t * @event FilesRemoved\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {Array} files Array of files that got removed.\n\t */\n\n\t/**\n\t * Fires when just before a file is uploaded. This event enables you to override settings\n\t * on the uploader instance before the file is uploaded.\n\t *\n\t * @event BeforeUpload\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {plupload.File} file File to be uploaded.\n\t */\n\n\t/**\n\t * Fires when a file is to be uploaded by the runtime.\n\t *\n\t * @event UploadFile\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {plupload.File} file File to be uploaded.\n\t */\n\n\t/**\n\t * Fires while a file is being uploaded. Use this event to update the current file upload progress.\n\t *\n\t * @event UploadProgress\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {plupload.File} file File that is currently being uploaded.\n\t */\t\n\n\t/**\n\t * Fires when file chunk is uploaded.\n\t *\n\t * @event ChunkUploaded\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {plupload.File} file File that the chunk was uploaded for.\n\t * @param {Object} response Object with response properties.\n\t */\n\n\t/**\n\t * Fires when a file is successfully uploaded.\n\t *\n\t * @event FileUploaded\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {plupload.File} file File that was uploaded.\n\t * @param {Object} response Object with response properties.\n\t */\n\n\t/**\n\t * Fires when all files in a queue are uploaded.\n\t *\n\t * @event UploadComplete\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {Array} files Array of file objects that was added to queue/selected by the user.\n\t */\n\n\t/**\n\t * Fires when a error occurs.\n\t *\n\t * @event Error\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {Object} error Contains code, message and sometimes file and other details.\n\t */\n\n\t/**\n\t * Fires when destroy method is called.\n\t *\n\t * @event Destroy\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t */\n\tvar uid = plupload.guid()\n\t, settings\n\t, files = []\n\t, preferred_caps = {}\n\t, fileInputs = []\n\t, fileDrops = []\n\t, startTime\n\t, total\n\t, disabled = false\n\t, xhr\n\t;\n\n\n\t// Private methods\n\tfunction uploadNext() {\n\t\tvar file, count = 0, i;\n\n\t\tif (this.state == plupload.STARTED) {\n\t\t\t// Find first QUEUED file\n\t\t\tfor (i = 0; i < files.length; i++) {\n\t\t\t\tif (!file && files[i].status == plupload.QUEUED) {\n\t\t\t\t\tfile = files[i];\n\t\t\t\t\tif (this.trigger(\"BeforeUpload\", file)) {\n\t\t\t\t\t\tfile.status = plupload.UPLOADING;\n\t\t\t\t\t\tthis.trigger(\"UploadFile\", file);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// All files are DONE or FAILED\n\t\t\tif (count == files.length) {\n\t\t\t\tif (this.state !== plupload.STOPPED) {\n\t\t\t\t\tthis.state = plupload.STOPPED;\n\t\t\t\t\tthis.trigger(\"StateChanged\");\n\t\t\t\t}\n\t\t\t\tthis.trigger(\"UploadComplete\", files);\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction calcFile(file) {\n\t\tfile.percent = file.size > 0 ? Math.ceil(file.loaded / file.size * 100) : 100;\n\t\tcalc();\n\t}\n\n\n\tfunction calc() {\n\t\tvar i, file;\n\n\t\t// Reset stats\n\t\ttotal.reset();\n\n\t\t// Check status, size, loaded etc on all files\n\t\tfor (i = 0; i < files.length; i++) {\n\t\t\tfile = files[i];\n\n\t\t\tif (file.size !== undef) {\n\t\t\t\t// We calculate totals based on original file size\n\t\t\t\ttotal.size += file.origSize;\n\n\t\t\t\t// Since we cannot predict file size after resize, we do opposite and\n\t\t\t\t// interpolate loaded amount to match magnitude of total\n\t\t\t\ttotal.loaded += file.loaded * file.origSize / file.size;\n\t\t\t} else {\n\t\t\t\ttotal.size = undef;\n\t\t\t}\n\n\t\t\tif (file.status == plupload.DONE) {\n\t\t\t\ttotal.uploaded++;\n\t\t\t} else if (file.status == plupload.FAILED) {\n\t\t\t\ttotal.failed++;\n\t\t\t} else {\n\t\t\t\ttotal.queued++;\n\t\t\t}\n\t\t}\n\n\t\t// If we couldn't calculate a total file size then use the number of files to calc percent\n\t\tif (total.size === undef) {\n\t\t\ttotal.percent = files.length > 0 ? Math.ceil(total.uploaded / files.length * 100) : 0;\n\t\t} else {\n\t\t\ttotal.bytesPerSec = Math.ceil(total.loaded / ((+new Date() - startTime || 1) / 1000.0));\n\t\t\ttotal.percent = total.size > 0 ? Math.ceil(total.loaded / total.size * 100) : 0;\n\t\t}\n\t}\n\n\n\tfunction getRUID() {\n\t\tvar ctrl = fileInputs[0] || fileDrops[0];\n\t\tif (ctrl) {\n\t\t\treturn ctrl.getRuntime().uid;\n\t\t}\n\t\treturn false;\n\t}\n\n\n\tfunction runtimeCan(file, cap) {\n\t\tif (file.ruid) {\n\t\t\tvar info = o.Runtime.getInfo(file.ruid);\n\t\t\tif (info) {\n\t\t\t\treturn info.can(cap);\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\n\tfunction bindEventListeners() {\n\t\tthis.bind('FilesAdded FilesRemoved', function(up) {\n\t\t\tup.trigger('QueueChanged');\n\t\t\tup.refresh();\n\t\t});\n\n\t\tthis.bind('CancelUpload', onCancelUpload);\n\t\t\n\t\tthis.bind('BeforeUpload', onBeforeUpload);\n\n\t\tthis.bind('UploadFile', onUploadFile);\n\n\t\tthis.bind('UploadProgress', onUploadProgress);\n\n\t\tthis.bind('StateChanged', onStateChanged);\n\n\t\tthis.bind('QueueChanged', calc);\n\n\t\tthis.bind('Error', onError);\n\n\t\tthis.bind('FileUploaded', onFileUploaded);\n\n\t\tthis.bind('Destroy', onDestroy);\n\t}\n\n\n\tfunction initControls(settings, cb) {\n\t\tvar self = this, inited = 0, queue = [];\n\n\t\t// common settings\n\t\tvar options = {\n\t\t\truntime_order: settings.runtimes,\n\t\t\trequired_caps: settings.required_features,\n\t\t\tpreferred_caps: preferred_caps,\n\t\t\tswf_url: settings.flash_swf_url,\n\t\t\txap_url: settings.silverlight_xap_url\n\t\t};\n\n\t\t// add runtime specific options if any\n\t\tplupload.each(settings.runtimes.split(/\\s*,\\s*/), function(runtime) {\n\t\t\tif (settings[runtime]) {\n\t\t\t\toptions[runtime] = settings[runtime];\n\t\t\t}\n\t\t});\n\n\t\t// initialize file pickers - there can be many\n\t\tif (settings.browse_button) {\n\t\t\tplupload.each(settings.browse_button, function(el) {\n\t\t\t\tqueue.push(function(cb) {\n\t\t\t\t\tvar fileInput = new o.FileInput(plupload.extend({}, options, {\n\t\t\t\t\t\taccept: settings.filters.mime_types,\n\t\t\t\t\t\tname: settings.file_data_name,\n\t\t\t\t\t\tmultiple: settings.multi_selection,\n\t\t\t\t\t\tcontainer: settings.container,\n\t\t\t\t\t\tbrowse_button: el\n\t\t\t\t\t}));\n\n\t\t\t\t\tfileInput.onready = function() {\n\t\t\t\t\t\tvar info = o.Runtime.getInfo(this.ruid);\n\n\t\t\t\t\t\t// for backward compatibility\n\t\t\t\t\t\to.extend(self.features, {\n\t\t\t\t\t\t\tchunks: info.can('slice_blob'),\n\t\t\t\t\t\t\tmultipart: info.can('send_multipart'),\n\t\t\t\t\t\t\tmulti_selection: info.can('select_multiple')\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tinited++;\n\t\t\t\t\t\tfileInputs.push(this);\n\t\t\t\t\t\tcb();\n\t\t\t\t\t};\n\n\t\t\t\t\tfileInput.onchange = function() {\n\t\t\t\t\t\tself.addFile(this.files);\n\t\t\t\t\t};\n\n\t\t\t\t\tfileInput.bind('mouseenter mouseleave mousedown mouseup', function(e) {\n\t\t\t\t\t\tif (!disabled) {\n\t\t\t\t\t\t\tif (settings.browse_button_hover) {\n\t\t\t\t\t\t\t\tif ('mouseenter' === e.type) {\n\t\t\t\t\t\t\t\t\to.addClass(el, settings.browse_button_hover);\n\t\t\t\t\t\t\t\t} else if ('mouseleave' === e.type) {\n\t\t\t\t\t\t\t\t\to.removeClass(el, settings.browse_button_hover);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (settings.browse_button_active) {\n\t\t\t\t\t\t\t\tif ('mousedown' === e.type) {\n\t\t\t\t\t\t\t\t\to.addClass(el, settings.browse_button_active);\n\t\t\t\t\t\t\t\t} else if ('mouseup' === e.type) {\n\t\t\t\t\t\t\t\t\to.removeClass(el, settings.browse_button_active);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tfileInput.bind('mousedown', function() {\n\t\t\t\t\t\tself.trigger('Browse');\n\t\t\t\t\t});\n\n\t\t\t\t\tfileInput.bind('error runtimeerror', function() {\n\t\t\t\t\t\tfileInput = null;\n\t\t\t\t\t\tcb();\n\t\t\t\t\t});\n\n\t\t\t\t\tfileInput.init();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t// initialize drop zones\n\t\tif (settings.drop_element) {\n\t\t\tplupload.each(settings.drop_element, function(el) {\n\t\t\t\tqueue.push(function(cb) {\n\t\t\t\t\tvar fileDrop = new o.FileDrop(plupload.extend({}, options, {\n\t\t\t\t\t\tdrop_zone: el\n\t\t\t\t\t}));\n\n\t\t\t\t\tfileDrop.onready = function() {\n\t\t\t\t\t\tvar info = o.Runtime.getInfo(this.ruid);\n\n\t\t\t\t\t\tself.features.dragdrop = info.can('drag_and_drop'); // for backward compatibility\n\n\t\t\t\t\t\tinited++;\n\t\t\t\t\t\tfileDrops.push(this);\n\t\t\t\t\t\tcb();\n\t\t\t\t\t};\n\n\t\t\t\t\tfileDrop.ondrop = function() {\n\t\t\t\t\t\tself.addFile(this.files);\n\t\t\t\t\t};\n\n\t\t\t\t\tfileDrop.bind('error runtimeerror', function() {\n\t\t\t\t\t\tfileDrop = null;\n\t\t\t\t\t\tcb();\n\t\t\t\t\t});\n\n\t\t\t\t\tfileDrop.init();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\n\t\to.inSeries(queue, function() {\n\t\t\tif (typeof(cb) === 'function') {\n\t\t\t\tcb(inited);\n\t\t\t}\n\t\t});\n\t}\n\n\n\tfunction resizeImage(blob, params, cb) {\n\t\tvar img = new o.Image();\n\n\t\ttry {\n\t\t\timg.onload = function() {\n\t\t\t\t// no manipulation required if...\n\t\t\t\tif (params.width > this.width &&\n\t\t\t\t\tparams.height > this.height &&\n\t\t\t\t\tparams.quality === undef &&\n\t\t\t\t\tparams.preserve_headers &&\n\t\t\t\t\t!params.crop\n\t\t\t\t) {\n\t\t\t\t\tthis.destroy();\n\t\t\t\t\treturn cb(blob);\n\t\t\t\t}\n\t\t\t\t// otherwise downsize\n\t\t\t\timg.downsize(params.width, params.height, params.crop, params.preserve_headers);\n\t\t\t};\n\n\t\t\timg.onresize = function() {\n\t\t\t\tcb(this.getAsBlob(blob.type, params.quality));\n\t\t\t\tthis.destroy();\n\t\t\t};\n\n\t\t\timg.onerror = function() {\n\t\t\t\tcb(blob);\n\t\t\t};\n\n\t\t\timg.load(blob);\n\t\t} catch(ex) {\n\t\t\tcb(blob);\n\t\t}\n\t}\n\n\n\tfunction setOption(option, value, init) {\n\t\tvar self = this, reinitRequired = false;\n\n\t\tfunction _setOption(option, value, init) {\n\t\t\tvar oldValue = settings[option];\n\n\t\t\tswitch (option) {\n\t\t\t\tcase 'max_file_size':\n\t\t\t\t\tif (option === 'max_file_size') {\n\t\t\t\t\t\tsettings.max_file_size = settings.filters.max_file_size = value;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'chunk_size':\n\t\t\t\t\tif (value = plupload.parseSize(value)) {\n\t\t\t\t\t\tsettings[option] = value;\n\t\t\t\t\t\tsettings.send_file_name = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'multipart':\n\t\t\t\t\tsettings[option] = value;\n\t\t\t\t\tif (!value) {\n\t\t\t\t\t\tsettings.send_file_name = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'unique_names':\n\t\t\t\t\tsettings[option] = value;\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\tsettings.send_file_name = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'filters':\n\t\t\t\t\t// for sake of backward compatibility\n\t\t\t\t\tif (plupload.typeOf(value) === 'array') {\n\t\t\t\t\t\tvalue = {\n\t\t\t\t\t\t\tmime_types: value\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (init) {\n\t\t\t\t\t\tplupload.extend(settings.filters, value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsettings.filters = value;\n\t\t\t\t\t}\n\n\t\t\t\t\t// if file format filters are being updated, regenerate the matching expressions\n\t\t\t\t\tif (value.mime_types) {\n\t\t\t\t\t\tsettings.filters.mime_types.regexp = (function(filters) {\n\t\t\t\t\t\t\tvar extensionsRegExp = [];\n\n\t\t\t\t\t\t\tplupload.each(filters, function(filter) {\n\t\t\t\t\t\t\t\tplupload.each(filter.extensions.split(/,/), function(ext) {\n\t\t\t\t\t\t\t\t\tif (/^\\s*\\*\\s*$/.test(ext)) {\n\t\t\t\t\t\t\t\t\t\textensionsRegExp.push('\\\\.*');\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\textensionsRegExp.push('\\\\.' + ext.replace(new RegExp('[' + ('/^$.*+?|()[]{}\\\\'.replace(/./g, '\\\\$&')) + ']', 'g'), '\\\\$&'));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\treturn new RegExp('(' + extensionsRegExp.join('|') + ')$', 'i');\n\t\t\t\t\t\t}(settings.filters.mime_types));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\n\t\t\t\tcase 'resize':\n\t\t\t\t\tif (init) {\n\t\t\t\t\t\tplupload.extend(settings.resize, value, {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsettings.resize = value;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'prevent_duplicates':\n\t\t\t\t\tsettings.prevent_duplicates = settings.filters.prevent_duplicates = !!value;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'browse_button':\n\t\t\t\tcase 'drop_element':\n\t\t\t\t\t\tvalue = plupload.get(value);\n\n\t\t\t\tcase 'container':\n\t\t\t\tcase 'runtimes':\n\t\t\t\tcase 'multi_selection':\n\t\t\t\tcase 'flash_swf_url':\n\t\t\t\tcase 'silverlight_xap_url':\n\t\t\t\t\tsettings[option] = value;\n\t\t\t\t\tif (!init) {\n\t\t\t\t\t\treinitRequired = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tsettings[option] = value;\n\t\t\t}\n\n\t\t\tif (!init) {\n\t\t\t\tself.trigger('OptionChanged', option, value, oldValue);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof(option) === 'object') {\n\t\t\tplupload.each(option, function(value, option) {\n\t\t\t\t_setOption(option, value, init);\n\t\t\t});\n\t\t} else {\n\t\t\t_setOption(option, value, init);\n\t\t}\n\n\t\tif (init) {\n\t\t\t// Normalize the list of required capabilities\n\t\t\tsettings.required_features = normalizeCaps(plupload.extend({}, settings));\n\n\t\t\t// Come up with the list of capabilities that can affect default mode in a multi-mode runtimes\n\t\t\tpreferred_caps = normalizeCaps(plupload.extend({}, settings, {\n\t\t\t\trequired_features: true\n\t\t\t}));\n\t\t} else if (reinitRequired) {\n\t\t\tself.trigger('Destroy');\n\t\t\t\n\t\t\tinitControls.call(self, settings, function(inited) {\n\t\t\t\tif (inited) {\n\t\t\t\t\tself.runtime = o.Runtime.getInfo(getRUID()).type;\n\t\t\t\t\tself.trigger('Init', { runtime: self.runtime });\n\t\t\t\t\tself.trigger('PostInit');\n\t\t\t\t} else {\n\t\t\t\t\tself.trigger('Error', {\n\t\t\t\t\t\tcode : plupload.INIT_ERROR,\n\t\t\t\t\t\tmessage : plupload.translate('Init error.')\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\n\t// Internal event handlers\n\tfunction onBeforeUpload(up, file) {\n\t\t// Generate unique target filenames\n\t\tif (up.settings.unique_names) {\n\t\t\tvar matches = file.name.match(/\\.([^.]+)$/), ext = \"part\";\n\t\t\tif (matches) {\n\t\t\t\text = matches[1];\n\t\t\t}\n\t\t\tfile.target_name = file.id + '.' + ext;\n\t\t}\n\t}\n\n\n\tfunction onUploadFile(up, file) {\n\t\tvar url = up.settings.url\n\t\t, chunkSize = up.settings.chunk_size\n\t\t, retries = up.settings.max_retries\n\t\t, features = up.features\n\t\t, offset = 0\n\t\t, blob\n\t\t;\n\n\t\t// make sure we start at a predictable offset\n\t\tif (file.loaded) {\n\t\t\toffset = file.loaded = chunkSize ? chunkSize * Math.floor(file.loaded / chunkSize) : 0;\n\t\t}\n\n\t\tfunction handleError() {\n\t\t\tif (retries-- > 0) {\n\t\t\t\tdelay(uploadNextChunk, 1000);\n\t\t\t} else {\n\t\t\t\tfile.loaded = offset; // reset all progress\n\n\t\t\t\tup.trigger('Error', {\n\t\t\t\t\tcode : plupload.HTTP_ERROR,\n\t\t\t\t\tmessage : plupload.translate('HTTP Error.'),\n\t\t\t\t\tfile : file,\n\t\t\t\t\tresponse : xhr.responseText,\n\t\t\t\t\tstatus : xhr.status,\n\t\t\t\t\tresponseHeaders: xhr.getAllResponseHeaders()\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction uploadNextChunk() {\n\t\t\tvar chunkBlob, formData, args = {}, curChunkSize;\n\n\t\t\t// make sure that file wasn't cancelled and upload is not stopped in general\n\t\t\tif (file.status !== plupload.UPLOADING || up.state === plupload.STOPPED) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// send additional 'name' parameter only if required\n\t\t\tif (up.settings.send_file_name) {\n\t\t\t\targs.name = file.target_name || file.name;\n\t\t\t}\n\n\t\t\tif (chunkSize && features.chunks && blob.size > chunkSize) { // blob will be of type string if it was loaded in memory \n\t\t\t\tcurChunkSize = Math.min(chunkSize, blob.size - offset);\n\t\t\t\tchunkBlob = blob.slice(offset, offset + curChunkSize);\n\t\t\t} else {\n\t\t\t\tcurChunkSize = blob.size;\n\t\t\t\tchunkBlob = blob;\n\t\t\t}\n\n\t\t\t// If chunking is enabled add corresponding args, no matter if file is bigger than chunk or smaller\n\t\t\tif (chunkSize && features.chunks) {\n\t\t\t\t// Setup query string arguments\n\t\t\t\tif (up.settings.send_chunk_number) {\n\t\t\t\t\targs.chunk = Math.ceil(offset / chunkSize);\n\t\t\t\t\targs.chunks = Math.ceil(blob.size / chunkSize);\n\t\t\t\t} else { // keep support for experimental chunk format, just in case\n\t\t\t\t\targs.offset = offset;\n\t\t\t\t\targs.total = blob.size;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\txhr = new o.XMLHttpRequest();\n\n\t\t\t// Do we have upload progress support\n\t\t\tif (xhr.upload) {\n\t\t\t\txhr.upload.onprogress = function(e) {\n\t\t\t\t\tfile.loaded = Math.min(file.size, offset + e.loaded);\n\t\t\t\t\tup.trigger('UploadProgress', file);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\txhr.onload = function() {\n\t\t\t\t// check if upload made itself through\n\t\t\t\tif (xhr.status >= 400) {\n\t\t\t\t\thandleError();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tretries = up.settings.max_retries; // reset the counter\n\n\t\t\t\t// Handle chunk response\n\t\t\t\tif (curChunkSize < blob.size) {\n\t\t\t\t\tchunkBlob.destroy();\n\n\t\t\t\t\toffset += curChunkSize;\n\t\t\t\t\tfile.loaded = Math.min(offset, blob.size);\n\n\t\t\t\t\tup.trigger('ChunkUploaded', file, {\n\t\t\t\t\t\toffset : file.loaded,\n\t\t\t\t\t\ttotal : blob.size,\n\t\t\t\t\t\tresponse : xhr.responseText,\n\t\t\t\t\t\tstatus : xhr.status,\n\t\t\t\t\t\tresponseHeaders: xhr.getAllResponseHeaders()\n\t\t\t\t\t});\n\n\t\t\t\t\t// stock Android browser doesn't fire upload progress events, but in chunking mode we can fake them\n\t\t\t\t\tif (o.Env.browser === 'Android Browser') {\n\t\t\t\t\t\t// doesn't harm in general, but is not required anywhere else\n\t\t\t\t\t\tup.trigger('UploadProgress', file);\n\t\t\t\t\t} \n\t\t\t\t} else {\n\t\t\t\t\tfile.loaded = file.size;\n\t\t\t\t}\n\n\t\t\t\tchunkBlob = formData = null; // Free memory\n\n\t\t\t\t// Check if file is uploaded\n\t\t\t\tif (!offset || offset >= blob.size) {\n\t\t\t\t\t// If file was modified, destory the copy\n\t\t\t\t\tif (file.size != file.origSize) {\n\t\t\t\t\t\tblob.destroy();\n\t\t\t\t\t\tblob = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tup.trigger('UploadProgress', file);\n\n\t\t\t\t\tfile.status = plupload.DONE;\n\n\t\t\t\t\tup.trigger('FileUploaded', file, {\n\t\t\t\t\t\tresponse : xhr.responseText,\n\t\t\t\t\t\tstatus : xhr.status,\n\t\t\t\t\t\tresponseHeaders: xhr.getAllResponseHeaders()\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// Still chunks left\n\t\t\t\t\tdelay(uploadNextChunk, 1); // run detached, otherwise event handlers interfere\n\t\t\t\t}\n\t\t\t};\n\n\t\t\txhr.onerror = function() {\n\t\t\t\thandleError();\n\t\t\t};\n\n\t\t\txhr.onloadend = function() {\n\t\t\t\tthis.destroy();\n\t\t\t\txhr = null;\n\t\t\t};\n\n\t\t\t// Build multipart request\n\t\t\tif (up.settings.multipart && features.multipart) {\n\t\t\t\txhr.open(\"POST\", url, true);\n\n\t\t\t\t// Set custom headers\n\t\t\t\tplupload.each(up.settings.headers, function(value, name) {\n\t\t\t\t\txhr.setRequestHeader(name, value);\n\t\t\t\t});\n\n\t\t\t\tformData = new o.FormData();\n\n\t\t\t\t// Add multipart params\n\t\t\t\tplupload.each(plupload.extend(args, up.settings.multipart_params), function(value, name) {\n\t\t\t\t\tformData.append(name, value);\n\t\t\t\t});\n\n\t\t\t\t// Add file and send it\n\t\t\t\tformData.append(up.settings.file_data_name, chunkBlob);\n\t\t\t\txhr.send(formData, {\n\t\t\t\t\truntime_order: up.settings.runtimes,\n\t\t\t\t\trequired_caps: up.settings.required_features,\n\t\t\t\t\tpreferred_caps: preferred_caps,\n\t\t\t\t\tswf_url: up.settings.flash_swf_url,\n\t\t\t\t\txap_url: up.settings.silverlight_xap_url\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// if no multipart, send as binary stream\n\t\t\t\turl = plupload.buildUrl(up.settings.url, plupload.extend(args, up.settings.multipart_params));\n\n\t\t\t\txhr.open(\"POST\", url, true);\n\n\t\t\t\txhr.setRequestHeader('Content-Type', 'application/octet-stream'); // Binary stream header\n\n\t\t\t\t// Set custom headers\n\t\t\t\tplupload.each(up.settings.headers, function(value, name) {\n\t\t\t\t\txhr.setRequestHeader(name, value);\n\t\t\t\t});\n\n\t\t\t\txhr.send(chunkBlob, {\n\t\t\t\t\truntime_order: up.settings.runtimes,\n\t\t\t\t\trequired_caps: up.settings.required_features,\n\t\t\t\t\tpreferred_caps: preferred_caps,\n\t\t\t\t\tswf_url: up.settings.flash_swf_url,\n\t\t\t\t\txap_url: up.settings.silverlight_xap_url\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tblob = file.getSource();\n\n\t\t// Start uploading chunks\n\t\tif (up.settings.resize.enabled && runtimeCan(blob, 'send_binary_string') && !!~o.inArray(blob.type, ['image/jpeg', 'image/png'])) {\n\t\t\t// Resize if required\n\t\t\tresizeImage.call(this, blob, up.settings.resize, function(resizedBlob) {\n\t\t\t\tblob = resizedBlob;\n\t\t\t\tfile.size = resizedBlob.size;\n\t\t\t\tuploadNextChunk();\n\t\t\t});\n\t\t} else {\n\t\t\tuploadNextChunk();\n\t\t}\n\t}\n\n\n\tfunction onUploadProgress(up, file) {\n\t\tcalcFile(file);\n\t}\n\n\n\tfunction onStateChanged(up) {\n\t\tif (up.state == plupload.STARTED) {\n\t\t\t// Get start time to calculate bps\n\t\t\tstartTime = (+new Date());\n\t\t} else if (up.state == plupload.STOPPED) {\n\t\t\t// Reset currently uploading files\n\t\t\tfor (var i = up.files.length - 1; i >= 0; i--) {\n\t\t\t\tif (up.files[i].status == plupload.UPLOADING) {\n\t\t\t\t\tup.files[i].status = plupload.QUEUED;\n\t\t\t\t\tcalc();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction onCancelUpload() {\n\t\tif (xhr) {\n\t\t\txhr.abort();\n\t\t}\n\t}\n\n\n\tfunction onFileUploaded(up) {\n\t\tcalc();\n\n\t\t// Upload next file but detach it from the error event\n\t\t// since other custom listeners might want to stop the queue\n\t\tdelay(function() {\n\t\t\tuploadNext.call(up);\n\t\t}, 1);\n\t}\n\n\n\tfunction onError(up, err) {\n\t\tif (err.code === plupload.INIT_ERROR) {\n\t\t\tup.destroy();\n\t\t}\n\t\t// Set failed status if an error occured on a file\n\t\telse if (err.file) {\n\t\t\terr.file.status = plupload.FAILED;\n\t\t\tcalcFile(err.file);\n\n\t\t\t// Upload next file but detach it from the error event\n\t\t\t// since other custom listeners might want to stop the queue\n\t\t\tif (up.state == plupload.STARTED) { // upload in progress\n\t\t\t\tup.trigger('CancelUpload');\n\t\t\t\tdelay(function() {\n\t\t\t\t\tuploadNext.call(up);\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction onDestroy(up) {\n\t\tup.stop();\n\n\t\t// Purge the queue\n\t\tplupload.each(files, function(file) {\n\t\t\tfile.destroy();\n\t\t});\n\t\tfiles = [];\n\n\t\tif (fileInputs.length) {\n\t\t\tplupload.each(fileInputs, function(fileInput) {\n\t\t\t\tfileInput.destroy();\n\t\t\t});\n\t\t\tfileInputs = [];\n\t\t}\n\n\t\tif (fileDrops.length) {\n\t\t\tplupload.each(fileDrops, function(fileDrop) {\n\t\t\t\tfileDrop.destroy();\n\t\t\t});\n\t\t\tfileDrops = [];\n\t\t}\n\n\t\tpreferred_caps = {};\n\t\tdisabled = false;\n\t\tstartTime = xhr = null;\n\t\ttotal.reset();\n\t}\n\n\n\t// Default settings\n\tsettings = {\n\t\truntimes: o.Runtime.order,\n\t\tmax_retries: 0,\n\t\tchunk_size: 0,\n\t\tmultipart: true,\n\t\tmulti_selection: true,\n\t\tfile_data_name: 'file',\n\t\tflash_swf_url: 'js/Moxie.swf',\n\t\tsilverlight_xap_url: 'js/Moxie.xap',\n\t\tfilters: {\n\t\t\tmime_types: [],\n\t\t\tprevent_duplicates: false,\n\t\t\tmax_file_size: 0\n\t\t},\n\t\tresize: {\n\t\t\tenabled: false,\n\t\t\tpreserve_headers: true,\n\t\t\tcrop: false\n\t\t},\n\t\tsend_file_name: true,\n\t\tsend_chunk_number: true\n\t};\n\n\t\n\tsetOption.call(this, options, null, true);\n\n\t// Inital total state\n\ttotal = new plupload.QueueProgress(); \n\n\t// Add public methods\n\tplupload.extend(this, {\n\n\t\t/**\n\t\t * Unique id for the Uploader instance.\n\t\t *\n\t\t * @property id\n\t\t * @type String\n\t\t */\n\t\tid : uid,\n\t\tuid : uid, // mOxie uses this to differentiate between event targets\n\n\t\t/**\n\t\t * Current state of the total uploading progress. This one can either be plupload.STARTED or plupload.STOPPED.\n\t\t * These states are controlled by the stop/start methods. The default value is STOPPED.\n\t\t *\n\t\t * @property state\n\t\t * @type Number\n\t\t */\n\t\tstate : plupload.STOPPED,\n\n\t\t/**\n\t\t * Map of features that are available for the uploader runtime. Features will be filled\n\t\t * before the init event is called, these features can then be used to alter the UI for the end user.\n\t\t * Some of the current features that might be in this map is: dragdrop, chunks, jpgresize, pngresize.\n\t\t *\n\t\t * @property features\n\t\t * @type Object\n\t\t */\n\t\tfeatures : {},\n\n\t\t/**\n\t\t * Current runtime name.\n\t\t *\n\t\t * @property runtime\n\t\t * @type String\n\t\t */\n\t\truntime : null,\n\n\t\t/**\n\t\t * Current upload queue, an array of File instances.\n\t\t *\n\t\t * @property files\n\t\t * @type Array\n\t\t * @see plupload.File\n\t\t */\n\t\tfiles : files,\n\n\t\t/**\n\t\t * Object with name/value settings.\n\t\t *\n\t\t * @property settings\n\t\t * @type Object\n\t\t */\n\t\tsettings : settings,\n\n\t\t/**\n\t\t * Total progess information. How many files has been uploaded, total percent etc.\n\t\t *\n\t\t * @property total\n\t\t * @type plupload.QueueProgress\n\t\t */\n\t\ttotal : total,\n\n\n\t\t/**\n\t\t * Initializes the Uploader instance and adds internal event listeners.\n\t\t *\n\t\t * @method init\n\t\t */\n\t\tinit : function() {\n\t\t\tvar self = this;\n\n\t\t\tif (typeof(settings.preinit) == \"function\") {\n\t\t\t\tsettings.preinit(self);\n\t\t\t} else {\n\t\t\t\tplupload.each(settings.preinit, function(func, name) {\n\t\t\t\t\tself.bind(name, func);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tbindEventListeners.call(this);\n\n\t\t\t// Check for required options\n\t\t\tif (!settings.browse_button || !settings.url) {\n\t\t\t\tthis.trigger('Error', {\n\t\t\t\t\tcode : plupload.INIT_ERROR,\n\t\t\t\t\tmessage : plupload.translate('Init error.')\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tinitControls.call(this, settings, function(inited) {\n\t\t\t\tif (typeof(settings.init) == \"function\") {\n\t\t\t\t\tsettings.init(self);\n\t\t\t\t} else {\n\t\t\t\t\tplupload.each(settings.init, function(func, name) {\n\t\t\t\t\t\tself.bind(name, func);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (inited) {\n\t\t\t\t\tself.runtime = o.Runtime.getInfo(getRUID()).type;\n\t\t\t\t\tself.trigger('Init', { runtime: self.runtime });\n\t\t\t\t\tself.trigger('PostInit');\n\t\t\t\t} else {\n\t\t\t\t\tself.trigger('Error', {\n\t\t\t\t\t\tcode : plupload.INIT_ERROR,\n\t\t\t\t\t\tmessage : plupload.translate('Init error.')\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Set the value for the specified option(s).\n\t\t *\n\t\t * @method setOption\n\t\t * @since 2.1\n\t\t * @param {String|Object} option Name of the option to change or the set of key/value pairs\n\t\t * @param {Mixed} [value] Value for the option (is ignored, if first argument is object)\n\t\t */\n\t\tsetOption: function(option, value) {\n\t\t\tsetOption.call(this, option, value, !this.runtime); // until runtime not set we do not need to reinitialize\n\t\t},\n\n\t\t/**\n\t\t * Get the value for the specified option or the whole configuration, if not specified.\n\t\t * \n\t\t * @method getOption\n\t\t * @since 2.1\n\t\t * @param {String} [option] Name of the option to get\n\t\t * @return {Mixed} Value for the option or the whole set\n\t\t */\n\t\tgetOption: function(option) {\n\t\t\tif (!option) {\n\t\t\t\treturn settings;\n\t\t\t}\n\t\t\treturn settings[option];\n\t\t},\n\n\t\t/**\n\t\t * Refreshes the upload instance by dispatching out a refresh event to all runtimes.\n\t\t * This would for example reposition flash/silverlight shims on the page.\n\t\t *\n\t\t * @method refresh\n\t\t */\n\t\trefresh : function() {\n\t\t\tif (fileInputs.length) {\n\t\t\t\tplupload.each(fileInputs, function(fileInput) {\n\t\t\t\t\tfileInput.trigger('Refresh');\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.trigger('Refresh');\n\t\t},\n\n\t\t/**\n\t\t * Starts uploading the queued files.\n\t\t *\n\t\t * @method start\n\t\t */\n\t\tstart : function() {\n\t\t\tif (this.state != plupload.STARTED) {\n\t\t\t\tthis.state = plupload.STARTED;\n\t\t\t\tthis.trigger('StateChanged');\n\n\t\t\t\tuploadNext.call(this);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Stops the upload of the queued files.\n\t\t *\n\t\t * @method stop\n\t\t */\n\t\tstop : function() {\n\t\t\tif (this.state != plupload.STOPPED) {\n\t\t\t\tthis.state = plupload.STOPPED;\n\t\t\t\tthis.trigger('StateChanged');\n\t\t\t\tthis.trigger('CancelUpload');\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Disables/enables browse button on request.\n\t\t *\n\t\t * @method disableBrowse\n\t\t * @param {Boolean} disable Whether to disable or enable (default: true)\n\t\t */\n\t\tdisableBrowse : function() {\n\t\t\tdisabled = arguments[0] !== undef ? arguments[0] : true;\n\n\t\t\tif (fileInputs.length) {\n\t\t\t\tplupload.each(fileInputs, function(fileInput) {\n\t\t\t\t\tfileInput.disable(disabled);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.trigger('DisableBrowse', disabled);\n\t\t},\n\n\t\t/**\n\t\t * Returns the specified file object by id.\n\t\t *\n\t\t * @method getFile\n\t\t * @param {String} id File id to look for.\n\t\t * @return {plupload.File} File object or undefined if it wasn't found;\n\t\t */\n\t\tgetFile : function(id) {\n\t\t\tvar i;\n\t\t\tfor (i = files.length - 1; i >= 0; i--) {\n\t\t\t\tif (files[i].id === id) {\n\t\t\t\t\treturn files[i];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Adds file to the queue programmatically. Can be native file, instance of Plupload.File,\n\t\t * instance of mOxie.File, input[type=\"file\"] element, or array of these. Fires FilesAdded, \n\t\t * if any files were added to the queue. Otherwise nothing happens.\n\t\t *\n\t\t * @method addFile\n\t\t * @since 2.0\n\t\t * @param {plupload.File|mOxie.File|File|Node|Array} file File or files to add to the queue.\n\t\t * @param {String} [fileName] If specified, will be used as a name for the file\n\t\t */\n\t\taddFile : function(file, fileName) {\n\t\t\tvar self = this\n\t\t\t, queue = [] \n\t\t\t, filesAdded = []\n\t\t\t, ruid\n\t\t\t;\n\n\t\t\tfunction filterFile(file, cb) {\n\t\t\t\tvar queue = [];\n\t\t\t\to.each(self.settings.filters, function(rule, name) {\n\t\t\t\t\tif (fileFilters[name]) {\n\t\t\t\t\t\tqueue.push(function(cb) {\n\t\t\t\t\t\t\tfileFilters[name].call(self, rule, file, function(res) {\n\t\t\t\t\t\t\t\tcb(!res);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\to.inSeries(queue, cb);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * @method resolveFile\n\t\t\t * @private\n\t\t\t * @param {o.File|o.Blob|plupload.File|File|Blob|input[type=\"file\"]} file\n\t\t\t */\n\t\t\tfunction resolveFile(file) {\n\t\t\t\tvar type = o.typeOf(file);\n\n\t\t\t\t// o.File\n\t\t\t\tif (file instanceof o.File) { \n\t\t\t\t\tif (!file.ruid && !file.isDetached()) {\n\t\t\t\t\t\tif (!ruid) { // weird case\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfile.ruid = ruid;\n\t\t\t\t\t\tfile.connectRuntime(ruid);\n\t\t\t\t\t}\n\t\t\t\t\tresolveFile(new plupload.File(file));\n\t\t\t\t}\n\t\t\t\t// o.Blob \n\t\t\t\telse if (file instanceof o.Blob) {\n\t\t\t\t\tresolveFile(file.getSource());\n\t\t\t\t\tfile.destroy();\n\t\t\t\t} \n\t\t\t\t// plupload.File - final step for other branches\n\t\t\t\telse if (file instanceof plupload.File) {\n\t\t\t\t\tif (fileName) {\n\t\t\t\t\t\tfile.name = fileName;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tqueue.push(function(cb) {\n\t\t\t\t\t\t// run through the internal and user-defined filters, if any\n\t\t\t\t\t\tfilterFile(file, function(err) {\n\t\t\t\t\t\t\tif (!err) {\n\t\t\t\t\t\t\t\t// make files available for the filters by updating the main queue directly\n\t\t\t\t\t\t\t\tfiles.push(file);\n\t\t\t\t\t\t\t\t// collect the files that will be passed to FilesAdded event\n\t\t\t\t\t\t\t\tfilesAdded.push(file); \n\n\t\t\t\t\t\t\t\tself.trigger(\"FileFiltered\", file);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdelay(cb, 1); // do not build up recursions or eventually we might hit the limits\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t} \n\t\t\t\t// native File or blob\n\t\t\t\telse if (o.inArray(type, ['file', 'blob']) !== -1) {\n\t\t\t\t\tresolveFile(new o.File(null, file));\n\t\t\t\t} \n\t\t\t\t// input[type=\"file\"]\n\t\t\t\telse if (type === 'node' && o.typeOf(file.files) === 'filelist') {\n\t\t\t\t\t// if we are dealing with input[type=\"file\"]\n\t\t\t\t\to.each(file.files, resolveFile);\n\t\t\t\t} \n\t\t\t\t// mixed array of any supported types (see above)\n\t\t\t\telse if (type === 'array') {\n\t\t\t\t\tfileName = null; // should never happen, but unset anyway to avoid funny situations\n\t\t\t\t\to.each(file, resolveFile);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\truid = getRUID();\n\t\t\t\n\t\t\tresolveFile(file);\n\n\t\t\tif (queue.length) {\n\t\t\t\to.inSeries(queue, function() {\n\t\t\t\t\t// if any files left after filtration, trigger FilesAdded\n\t\t\t\t\tif (filesAdded.length) {\n\t\t\t\t\t\tself.trigger(\"FilesAdded\", filesAdded);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Removes a specific file.\n\t\t *\n\t\t * @method removeFile\n\t\t * @param {plupload.File|String} file File to remove from queue.\n\t\t */\n\t\tremoveFile : function(file) {\n\t\t\tvar id = typeof(file) === 'string' ? file : file.id;\n\n\t\t\tfor (var i = files.length - 1; i >= 0; i--) {\n\t\t\t\tif (files[i].id === id) {\n\t\t\t\t\treturn this.splice(i, 1)[0];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Removes part of the queue and returns the files removed. This will also trigger the FilesRemoved and QueueChanged events.\n\t\t *\n\t\t * @method splice\n\t\t * @param {Number} start (Optional) Start index to remove from.\n\t\t * @param {Number} length (Optional) Lengh of items to remove.\n\t\t * @return {Array} Array of files that was removed.\n\t\t */\n\t\tsplice : function(start, length) {\n\t\t\t// Splice and trigger events\n\t\t\tvar removed = files.splice(start === undef ? 0 : start, length === undef ? files.length : length);\n\n\t\t\t// if upload is in progress we need to stop it and restart after files are removed\n\t\t\tvar restartRequired = false;\n\t\t\tif (this.state == plupload.STARTED) { // upload in progress\n\t\t\t\tplupload.each(removed, function(file) {\n\t\t\t\t\tif (file.status === plupload.UPLOADING) {\n\t\t\t\t\t\trestartRequired = true; // do not restart, unless file that is being removed is uploading\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (restartRequired) {\n\t\t\t\t\tthis.stop();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.trigger(\"FilesRemoved\", removed);\n\n\t\t\t// Dispose any resources allocated by those files\n\t\t\tplupload.each(removed, function(file) {\n\t\t\t\tfile.destroy();\n\t\t\t});\n\t\t\t\n\t\t\tif (restartRequired) {\n\t\t\t\tthis.start();\n\t\t\t}\n\n\t\t\treturn removed;\n\t\t},\n\n\t\t/**\n\t\t * Dispatches the specified event name and it's arguments to all listeners.\n\t\t *\n\t\t *\n\t\t * @method trigger\n\t\t * @param {String} name Event name to fire.\n\t\t * @param {Object..} Multiple arguments to pass along to the listener functions.\n\t\t */\n\n\t\t/**\n\t\t * Check whether uploader has any listeners to the specified event.\n\t\t *\n\t\t * @method hasEventListener\n\t\t * @param {String} name Event name to check for.\n\t\t */\n\n\n\t\t/**\n\t\t * Adds an event listener by name.\n\t\t *\n\t\t * @method bind\n\t\t * @param {String} name Event name to listen for.\n\t\t * @param {function} func Function to call ones the event gets fired.\n\t\t * @param {Object} scope Optional scope to execute the specified function in.\n\t\t */\n\t\tbind : function(name, func, scope) {\n\t\t\tvar self = this;\n\t\t\t// adapt moxie EventTarget style to Plupload-like\n\t\t\tplupload.Uploader.prototype.bind.call(this, name, function() {\n\t\t\t\tvar args = [].slice.call(arguments);\n\t\t\t\targs.splice(0, 1, self); // replace event object with uploader instance\n\t\t\t\treturn func.apply(this, args);\n\t\t\t}, 0, scope);\n\t\t},\n\n\t\t/**\n\t\t * Removes the specified event listener.\n\t\t *\n\t\t * @method unbind\n\t\t * @param {String} name Name of event to remove.\n\t\t * @param {function} func Function to remove from listener.\n\t\t */\n\n\t\t/**\n\t\t * Removes all event listeners.\n\t\t *\n\t\t * @method unbindAll\n\t\t */\n\n\n\t\t/**\n\t\t * Destroys Plupload instance and cleans after itself.\n\t\t *\n\t\t * @method destroy\n\t\t */\n\t\tdestroy : function() {\n\t\t\tthis.trigger('Destroy');\n\t\t\tsettings = total = null; // purge these exclusively\n\t\t\tthis.unbindAll();\n\t\t}\n\t});\n};\n\nplupload.Uploader.prototype = o.EventTarget.instance;\n\n/**\n * Constructs a new file instance.\n *\n * @class File\n * @constructor\n * \n * @param {Object} file Object containing file properties\n * @param {String} file.name Name of the file.\n * @param {Number} file.size File size.\n */\nplupload.File = (function() {\n\tvar filepool = {};\n\n\tfunction PluploadFile(file) {\n\n\t\tplupload.extend(this, {\n\n\t\t\t/**\n\t\t\t * File id this is a globally unique id for the specific file.\n\t\t\t *\n\t\t\t * @property id\n\t\t\t * @type String\n\t\t\t */\n\t\t\tid: plupload.guid(),\n\n\t\t\t/**\n\t\t\t * File name for example \"myfile.gif\".\n\t\t\t *\n\t\t\t * @property name\n\t\t\t * @type String\n\t\t\t */\n\t\t\tname: file.name || file.fileName,\n\n\t\t\t/**\n\t\t\t * File type, `e.g image/jpeg`\n\t\t\t *\n\t\t\t * @property type\n\t\t\t * @type String\n\t\t\t */\n\t\t\ttype: file.type || '',\n\n\t\t\t/**\n\t\t\t * File size in bytes (may change after client-side manupilation).\n\t\t\t *\n\t\t\t * @property size\n\t\t\t * @type Number\n\t\t\t */\n\t\t\tsize: file.size || file.fileSize,\n\n\t\t\t/**\n\t\t\t * Original file size in bytes.\n\t\t\t *\n\t\t\t * @property origSize\n\t\t\t * @type Number\n\t\t\t */\n\t\t\torigSize: file.size || file.fileSize,\n\n\t\t\t/**\n\t\t\t * Number of bytes uploaded of the files total size.\n\t\t\t *\n\t\t\t * @property loaded\n\t\t\t * @type Number\n\t\t\t */\n\t\t\tloaded: 0,\n\n\t\t\t/**\n\t\t\t * Number of percentage uploaded of the file.\n\t\t\t *\n\t\t\t * @property percent\n\t\t\t * @type Number\n\t\t\t */\n\t\t\tpercent: 0,\n\n\t\t\t/**\n\t\t\t * Status constant matching the plupload states QUEUED, UPLOADING, FAILED, DONE.\n\t\t\t *\n\t\t\t * @property status\n\t\t\t * @type Number\n\t\t\t * @see plupload\n\t\t\t */\n\t\t\tstatus: plupload.QUEUED,\n\n\t\t\t/**\n\t\t\t * Date of last modification.\n\t\t\t *\n\t\t\t * @property lastModifiedDate\n\t\t\t * @type {String}\n\t\t\t */\n\t\t\tlastModifiedDate: file.lastModifiedDate || (new Date()).toLocaleString(), // Thu Aug 23 2012 19:40:00 GMT+0400 (GET)\n\n\t\t\t/**\n\t\t\t * Returns native window.File object, when it's available.\n\t\t\t *\n\t\t\t * @method getNative\n\t\t\t * @return {window.File} or null, if plupload.File is of different origin\n\t\t\t */\n\t\t\tgetNative: function() {\n\t\t\t\tvar file = this.getSource().getSource();\n\t\t\t\treturn o.inArray(o.typeOf(file), ['blob', 'file']) !== -1 ? file : null;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns mOxie.File - unified wrapper object that can be used across runtimes.\n\t\t\t *\n\t\t\t * @method getSource\n\t\t\t * @return {mOxie.File} or null\n\t\t\t */\n\t\t\tgetSource: function() {\n\t\t\t\tif (!filepool[this.id]) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\treturn filepool[this.id];\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Destroys plupload.File object.\n\t\t\t *\n\t\t\t * @method destroy\n\t\t\t */\n\t\t\tdestroy: function() {\n\t\t\t\tvar src = this.getSource();\n\t\t\t\tif (src) {\n\t\t\t\t\tsrc.destroy();\n\t\t\t\t\tdelete filepool[this.id];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tfilepool[this.id] = file;\n\t}\n\n\treturn PluploadFile;\n}());\n\n\n/**\n * Constructs a queue progress.\n *\n * @class QueueProgress\n * @constructor\n */\n plupload.QueueProgress = function() {\n\tvar self = this; // Setup alias for self to reduce code size when it's compressed\n\n\t/**\n\t * Total queue file size.\n\t *\n\t * @property size\n\t * @type Number\n\t */\n\tself.size = 0;\n\n\t/**\n\t * Total bytes uploaded.\n\t *\n\t * @property loaded\n\t * @type Number\n\t */\n\tself.loaded = 0;\n\n\t/**\n\t * Number of files uploaded.\n\t *\n\t * @property uploaded\n\t * @type Number\n\t */\n\tself.uploaded = 0;\n\n\t/**\n\t * Number of files failed to upload.\n\t *\n\t * @property failed\n\t * @type Number\n\t */\n\tself.failed = 0;\n\n\t/**\n\t * Number of files yet to be uploaded.\n\t *\n\t * @property queued\n\t * @type Number\n\t */\n\tself.queued = 0;\n\n\t/**\n\t * Total percent of the uploaded bytes.\n\t *\n\t * @property percent\n\t * @type Number\n\t */\n\tself.percent = 0;\n\n\t/**\n\t * Bytes uploaded per second.\n\t *\n\t * @property bytesPerSec\n\t * @type Number\n\t */\n\tself.bytesPerSec = 0;\n\n\t/**\n\t * Resets the progress to it's initial values.\n\t *\n\t * @method reset\n\t */\n\tself.reset = function() {\n\t\tself.size = self.loaded = self.uploaded = self.failed = self.queued = self.percent = self.bytesPerSec = 0;\n\t};\n};\n\nwindow.plupload = plupload;\n\n}(window, mOxie));\n\n\nvar Vue;\nfunction install(_Vue) {\n    if (Vue) {\n        console.error(\n            '[plupload] already installed. Vue.use(plupload) should be called only once.'\n        );\n        return\n    }\n    Vue = _Vue;\n    Vue.prototype.$plupload = plupload;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    install: install,\n    version: '1.0.0'\n});\n\n\n/***/ }),\n\n/***/ \"3Tyq\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _promise = __webpack_require__(\"//Fk\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _opus = __webpack_require__(\"Wbri\");\n\nvar opus = _interopRequireWildcard(_opus);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n\tstate: {\n\t\tarticle: {\n\t\t\tcount: 0,\n\t\t\tlists: [],\n\t\t\tload: 0,\n\t\t\tmore: 0\n\t\t},\n\n\t\thot: {\n\t\t\tcount: 0,\n\t\t\tlists: [],\n\t\t\tmore: 0\n\t\t},\n\n\t\tcategory: {\n\t\t\tlabel: [{\n\t\t\t\tcategory_desc: \"全部\",\n\t\t\t\tcategory_id: \"0\",\n\t\t\t\tcategory_title: \"全部\"\n\t\t\t}],\n\t\t\tlaberSubnode: [],\n\t\t\tindex: 0,\n\t\t\ttags: [],\n\t\t\tload: 0\n\t\t},\n\n\t\tcatalog: {\n\t\t\tcatalog_id: '',\n\t\t\tstatusArr: [{\n\t\t\t\taudit_status: 0,\n\t\t\t\ttext: '连载中'\n\t\t\t}, {\n\t\t\t\taudit_status: 1,\n\t\t\t\ttext: '已完结'\n\t\t\t}],\n\t\t\tlevelArr: [{\n\t\t\t\ttext: '普通',\n\t\t\t\tlevel_id: 0\n\t\t\t}, {\n\t\t\t\ttext: '独家',\n\t\t\t\tlevel_id: 1\n\t\t\t}, {\n\t\t\t\ttext: '首发',\n\t\t\t\tlevel_id: 2\n\t\t\t}],\n\t\t\tinfo: {}\n\t\t},\n\n\t\tchapter: {\n\t\t\tcount: 0,\n\t\t\tlists: [],\n\t\t\tmore: 0,\n\t\t\tinfo: {},\n\t\t\tchapter_id: ''\n\t\t},\n\n\t\tcomment: {\n\t\t\tlist: [],\n\t\t\tcount: 0\n\t\t}\n\t},\n\tmutations: {\n\t\topus_setArticle: function opus_setArticle(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tstate.article[key] = payload[key];\n\t\t\t}\n\t\t},\n\t\topus_setCategory: function opus_setCategory(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tstate.category[key] = payload[key];\n\t\t\t}\n\t\t},\n\t\topus_setChapterList: function opus_setChapterList(state, payload) {\n\t\t\tstate.chapter.count = payload.count;\n\t\t\tstate.chapter.lists = payload.lists;\n\t\t\tstate.chapter.more = payload.more;\n\t\t},\n\t\topus_setCatalog_info: function opus_setCatalog_info(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tstate.catalog.info[key] = payload[key];\n\t\t\t}\n\t\t},\n\t\topus_setCatalog: function opus_setCatalog(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tstate.catalog[key] = payload[key];\n\t\t\t}\n\t\t},\n\t\topus_setChapter: function opus_setChapter(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tstate.chapter[key] = payload[key];\n\t\t\t}\n\t\t},\n\t\topus_setComment: function opus_setComment(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tstate.comment[key] = payload[key];\n\t\t\t}\n\t\t},\n\t\topus_setCommentList: function opus_setCommentList(state, payload) {\n\t\t\tstate.comment.list[payload.index].replayIndex = payload.replayIndex;\n\t\t},\n\t\topus_setHot: function opus_setHot(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tstate.hot[key] = payload[key];\n\t\t\t}\n\t\t}\n\t},\n\tactions: {\n\t\topus_setArticle: function opus_setArticle(context, payload) {\n\t\t\tcontext.commit('opus_setArticle', payload);\n\t\t\treturn _promise2.default.resolve(1);\n\t\t},\n\t\topus_setCatalog_info: function opus_setCatalog_info(context, payload) {\n\t\t\tcontext.commit('opus_setCatalog_info', payload);\n\t\t\treturn _promise2.default.resolve(1);\n\t\t},\n\t\topus_setTagIndex: function opus_setTagIndex(context, payload) {\n\t\t\tcontext.commit('opus_setCategory', {\n\t\t\t\tindex: payload\n\t\t\t});\n\t\t\treturn _promise2.default.resolve(1);\n\t\t},\n\t\topus_setCommentList: function opus_setCommentList(context, payload) {\n\t\t\tcontext.commit('opus_setCommentList', payload);\n\t\t\treturn _promise2.default.resolve(1);\n\t\t},\n\t\topus_setChapterInfo: function opus_setChapterInfo(context, payload) {\n\t\t\tcontext.commit('opus_setChapter', {\n\t\t\t\tinfo: payload\n\t\t\t});\n\t\t\treturn _promise2.default.resolve(1);\n\t\t},\n\t\topus_getCatalogList: function opus_getCatalogList(context, payload) {\n\t\t\tif (context.state.catalog.load) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -21,\n\t\t\t\t\tmsg: '加载中'\n\t\t\t\t});\n\t\t\t}\n\t\t\tcontext.commit('opus_setArticle', {\n\t\t\t\tload: 1\n\t\t\t});\n\n\t\t\tif (context.state.category.index) {\n\t\t\t\tpayload.body.category_id = context.state.category.index;\n\t\t\t}\n\n\t\t\tvar promise = opus.getCatalogList(payload).then(function (res) {\n\t\t\t\tvar lists = context.state.article.lists;\n\t\t\t\tif (payload.type == 'more') {\n\t\t\t\t\tlists = lists.concat(res.list);\n\t\t\t\t} else {\n\t\t\t\t\tlists = res.list;\n\t\t\t\t}\n\t\t\t\tcontext.commit('opus_setArticle', {\n\t\t\t\t\tcount: res.page_info.total_count,\n\t\t\t\t\tlists: lists,\n\t\t\t\t\tmore: res.more,\n\t\t\t\t\tload: 0\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\tcontext.commit('opus_setArticle', {\n\t\t\t\t\tload: 0\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\topus_getChapterList: function opus_getChapterList(context, payload) {\n\t\t\tvar promise = opus.getChapterList(payload).then(function (res) {\n\t\t\t\tres.list = res.list.reverse();\n\t\t\t\tcontext.commit('opus_setChapterList', {\n\t\t\t\t\tcount: Number(res.page_info.total_count),\n\t\t\t\t\tlists: res.list,\n\t\t\t\t\tmore: res.more\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\topus_getCategoryList: function opus_getCategoryList(context, payload) {\n\t\t\tif (context.state.category.load) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -21,\n\t\t\t\t\tmsg: '加载中'\n\t\t\t\t});\n\t\t\t}\n\t\t\tcontext.commit('opus_setCategory', {\n\t\t\t\tload: 1\n\t\t\t});\n\n\t\t\tif (context.state.category.label.length > 1) {\n\t\t\t\treturn _promise2.default.resolve(context.state.category);\n\t\t\t}\n\n\t\t\tvar promise = opus.getCategoryList(payload).then(function (res) {\n\t\t\t\tvar laberSubnode = [];\n\t\t\t\tvar label = context.state.category.label.concat(res.list);\n\t\t\t\tres.list.map(function (item, index) {\n\t\t\t\t\tlaberSubnode = laberSubnode.concat(item.sub_node);\n\t\t\t\t});\n\t\t\t\tcontext.commit('opus_setCategory', {\n\t\t\t\t\tlabel: label,\n\t\t\t\t\tlaberSubnode: laberSubnode,\n\t\t\t\t\tload: 0\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\tcontext.commit('opus_setCategory', {\n\t\t\t\t\tload: 0\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_getFavoritesList: function opus_getFavoritesList(context, payload) {\n\t\t\tvar promise = opus.getFavoritesList(payload).then(function (res) {\n\t\t\t\tcontext.commit('opus_setArticle', {\n\t\t\t\t\tcount: res.page_info.total_count,\n\t\t\t\t\tlists: res.list,\n\t\t\t\t\tmore: res.more\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_delFavorites: function opus_delFavorites(context, payload) {\n\t\t\tif (!payload.catalogId) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tvar promise = opus.delFavorites(payload).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_addFavorites: function opus_addFavorites(context, payload) {\n\t\t\tif (!payload.catalogId) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tvar promise = opus.addFavorites(payload).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_getCommentList: function opus_getCommentList(context, payload) {\n\t\t\tif (!payload.catalogId) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tvar promise = opus.getCommentList(payload).then(function (res) {\n\t\t\t\tfor (var i = 0, len = res.list.length; i < len; i++) {\n\t\t\t\t\tres.list[i].replayIndex = -2;\n\t\t\t\t}\n\t\t\t\tcontext.commit('opus_setComment', {\n\t\t\t\t\tcount: res.page_info.total_count,\n\t\t\t\t\tlist: res.list,\n\t\t\t\t\tmore: res.more\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_getReplyCommentList: function opus_getReplyCommentList(context, payload) {\n\t\t\tif (!payload.commentId) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t};\n\t\t\tvar promise = opus.getReplyCommentList(payload).then(function (res) {\n\t\t\t\tvar list = context.state.comment.list;\n\t\t\t\tfor (var i = 0, len = list.length; i < len; i++) {\n\t\t\t\t\tif (list[i].comment_id == payload.commentId) {\n\t\t\t\t\t\tlist[i].reply_page_info = res.page_info;\n\t\t\t\t\t\tlist[i].reply_more = res.more;\n\t\t\t\t\t\tlist[i].replys = list[i].replys.concat(res.list);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcontext.commit('opus_setComment', {\n\t\t\t\t\tlist: list\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_addComment: function opus_addComment(context, payload) {\n\t\t\tif (!payload.catalog_id) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tvar promise = opus.addComment(payload).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_addCatalog: function opus_addCatalog(context, payload) {\n\t\t\tvar promise = opus.addCatalog({\n\t\t\t\t\"level\": payload.level,\n\t\t\t\t\"category_id\": payload.category_id,\n\t\t\t\t\"catalog_title\": payload.catalog_title,\n\t\t\t\t\"catalog_desc\": payload.catalog_desc,\n\t\t\t\t\"catalog_cover_url\": payload.catalog_cover_url,\n\t\t\t\t\"catalog_status\": payload.catalog_status,\n\t\t\t\t\"catalog_label\": payload.catalog_label,\n\t\t\t\t\"translate\": payload.translate,\n\t\t\t\t\"authorize\": payload.authorize,\n\t\t\t\t\"reprint\": payload.reprint }).then(function (res) {\n\t\t\t\tcontext.commit('opus_setCatalog', {\n\t\t\t\t\tcatalog_id: res.catalog_id\n\t\t\t\t});\n\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\topus_updateCatalog: function opus_updateCatalog(context, payload) {\n\t\t\tvar promise = opus.updateCatalog({\n\t\t\t\t\"level\": payload.level,\n\t\t\t\t\"category_id\": payload.category_id,\n\t\t\t\t\"catalog_id\": payload.catalog_id,\n\t\t\t\t\"catalog_title\": payload.catalog_title,\n\t\t\t\t\"catalog_desc\": payload.catalog_desc,\n\t\t\t\t\"catalog_cover_url\": payload.catalog_cover_url,\n\t\t\t\t\"catalog_status\": payload.catalog_status,\n\t\t\t\t\"catalog_label\": payload.catalog_label,\n\t\t\t\t\"translate\": payload.translate,\n\t\t\t\t\"authorize\": payload.authorize,\n\t\t\t\t\"reprint\": payload.reprint }).then(function (res) {\n\t\t\t\tcontext.commit('opus_setCatalog', {\n\t\t\t\t\tcatalog_id: res.catalog_id\n\t\t\t\t});\n\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\topus_getCatalogDetail: function opus_getCatalogDetail(context, payload) {\n\t\t\tif (!payload.catalogId) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tvar promise = opus.getCatalogDetail(payload).then(function (res) {\n\t\t\t\tcontext.commit('opus_setCatalog', {\n\t\t\t\t\tinfo: res.info\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_addChapter: function opus_addChapter(context, payload) {\n\t\t\tvar promise = opus.addChapter({\n\t\t\t\t\"catalog_id\": payload.catalog_id,\n\t\t\t\t\"chapter_title\": payload.chapter_title,\n\t\t\t\t\"chapter_desc\": payload.chapter_desc,\n\t\t\t\t\"chapter_content\": payload.chapter_content,\n\t\t\t\t\"chapter_status\": payload.chapter_status }).then(function (res) {\n\t\t\t\tcontext.commit('opus_setChapter', {\n\t\t\t\t\tchapter_id: res.chapter_id\n\t\t\t\t});\n\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\topus_addCommentPraise: function opus_addCommentPraise(context, payload) {\n\t\t\tif (!payload.commentId) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t}\n\t\t\tvar promise = opus.addCommentPraise({\n\t\t\t\t\"commentId\": payload.commentId\n\t\t\t}).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\topus_addPraise: function opus_addPraise(context, payload) {\n\t\t\tif (!payload.catalogId || !payload.chapterId) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t}\n\t\t\tvar promise = opus.addPraise({\n\t\t\t\t\"catalogId\": payload.catalogId,\n\t\t\t\t\"chapterId\": payload.chapterId\n\t\t\t}).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\topus_getLabelList: function opus_getLabelList(context, payload) {\n\t\t\tvar promise = opus.getLabelList({\n\t\t\t\t\"count\": payload.count\n\t\t\t}).then(function (res) {\n\t\t\t\tcontext.commit('opus_setCategory', {\n\t\t\t\t\ttags: res.list\n\t\t\t\t});\n\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\topus_updateChapter: function opus_updateChapter(context, payload) {\n\t\t\tvar promise = opus.updateChapter({\n\t\t\t\t\"chapter_id\": payload.chapter_id,\n\t\t\t\t\"chapter_title\": payload.chapter_title,\n\t\t\t\t\"chapter_desc\": payload.chapter_desc,\n\t\t\t\t\"chapter_content\": payload.chapter_content,\n\t\t\t\t\"chapter_status\": payload.chapter_status }).then(function (res) {\n\t\t\t\tcontext.commit('opus_setChapter', {\n\t\t\t\t\tchapter_id: res.chapter_id\n\t\t\t\t});\n\t\t\t\tvar lists = context.state.chapter.lists;\n\t\t\t\tfor (var i = 0, len = lists.length; i < len; i++) {\n\t\t\t\t\tif (lists[i].chapter_id == payload.chapter_id) {\n\t\t\t\t\t\tlists[i].chapter_title = payload.chapter_title;\n\t\t\t\t\t\tlists[i].chapter_desc = payload.chapter_desc;\n\t\t\t\t\t\tlists[i].chapter_content = payload.chapter_content;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcontext.commit('opus_setChapterList', {\n\t\t\t\t\tlists: lists\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\topus_getChapterDetail: function opus_getChapterDetail(context, payload) {\n\t\t\tif (!payload.chapterId) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tvar promise = opus.getChapterDetail(payload).then(function (res) {\n\t\t\t\tcontext.commit('opus_setChapter', {\n\t\t\t\t\tinfo: res.info\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_getHotList: function opus_getHotList(context, payload) {\n\t\t\tif (context.state.category.index) {\n\t\t\t\tpayload.body.category_id = context.state.category.index;\n\t\t\t}\n\t\t\tvar promise = opus.getCatalogList(payload).then(function (res) {\n\t\t\t\tcontext.commit('opus_setHot', {\n\t\t\t\t\tcount: res.page_info.total_count,\n\t\t\t\t\tlists: res.list,\n\t\t\t\t\tmore: res.more\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t},\n\t\topus_deleteChapter: function opus_deleteChapter(context, payload) {\n\t\t\tif (!payload.chapterId) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t}\n\t\t\tvar promise = opus.delChapter(payload).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_delCatalog: function opus_delCatalog(context, payload) {\n\t\t\tif (!payload.catalogId) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t}\n\t\t\tvar promise = opus.delCatalog(payload).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_getMyCatalogList: function opus_getMyCatalogList(context, payload) {\n\t\t\tvar promise = opus.getMyCatalogList(payload).then(function (res) {\n\t\t\t\tcontext.commit('opus_setArticle', {\n\t\t\t\t\tcount: res.page_info.total_count,\n\t\t\t\t\tlists: res.list,\n\t\t\t\t\tmore: res.more\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t}\n\t}\n};\n\n/***/ }),\n\n/***/ \"3jmG\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _promise = __webpack_require__(\"//Fk\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _message = __webpack_require__(\"9AVj\");\n\nvar message = _interopRequireWildcard(_message);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _default() {\n\treturn {\n\t\tmessage: {\n\t\t\tlist: [],\n\t\t\tcount: 0\n\t\t},\n\t\tunread: {\n\t\t\tlist: []\n\t\t},\n\t\tdetail: {}\n\t};\n}\n\nexports.default = {\n\tstate: _default(),\n\tmutations: {\n\t\tmessage_setMessage: function message_setMessage(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tstate.message[key] = payload[key];\n\t\t\t}\n\t\t},\n\t\tmessage_setUnread: function message_setUnread(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tstate.unread[key] = payload[key];\n\t\t\t}\n\t\t},\n\t\tmessage_setDetail: function message_setDetail(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tstate.detail[key] = payload[key];\n\t\t\t}\n\t\t}\n\t},\n\tactions: {\n\t\tmessage_getMessageList: function message_getMessageList(context, payload) {\n\t\t\tvar promise = message.getMessageList(payload).then(function (res) {\n\t\t\t\tcontext.commit('message_setMessage', {\n\t\t\t\t\tlist: res.list,\n\t\t\t\t\tmore: res.more,\n\t\t\t\t\tcount: res.page_info.total_count\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tmessage_getUnreadMessage: function message_getUnreadMessage(context, payload) {\n\t\t\tvar promise = message.getUnreadMessage().then(function (res) {\n\t\t\t\tcontext.commit('message_setUnread', {\n\t\t\t\t\tlist: res.list\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tmessage_getMessageDetail: function message_getMessageDetail(context, payload) {\n\t\t\tif (!payload.msgId) {\n\t\t\t\treturn _promise2.default.rejectObj();\n\t\t\t}\n\t\t\tvar promise = message.getMessageDetail(payload).then(function (res) {\n\t\t\t\tcontext.commit('message_setDetail', {\n\t\t\t\t\tlist: res.list\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tmessage_markMessage: function message_markMessage(context, payload) {\n\t\t\tif (!payload.msgType || !payload.msgId) {\n\t\t\t\treturn _promise2.default.rejectObj();\n\t\t\t}\n\t\t\tvar promise = message.markMessage(payload).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t}\n\t}\n};\n\n/***/ }),\n\n/***/ \"3u21\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _vuex = __webpack_require__(\"NYxO\");\n\nexports.default = {\n    data: function data() {\n        return {\n            content: '',\n            contact: '',\n            content_reg: true,\n            content_reg_con: '',\n            contact_reg: true,\n            contact_reg_con: ''\n        };\n    },\n\n    computed: (0, _vuex.mapState)({\n        data: function data(state) {\n            return state.common;\n        }\n    }),\n    methods: {\n        close: function close() {\n            this.$store.dispatch('common_switch', false);\n        },\n        send: function send() {\n            var _this = this;\n\n            if (!$.trim(this.content)) {\n                this.content_reg = false;\n                this.content_reg_con = '输入您的建议';\n                return false;\n            } else {\n                this.content_reg = true;\n                this.content_reg_con = '';\n            }\n\n            if (!$.trim(this.contact)) {\n                this.contact_reg = false;\n                this.contact_reg_con = '输入您的联系方式';\n                return false;\n            } else {\n                this.contact_reg = true;\n                this.contact_reg_con = '';\n            }\n\n            this.$store.dispatch('common_addFeedback', {\n                \"content\": this.content,\n                \"contact_info\": this.contact }).then(function (res) {\n                _this.$store.dispatch('common_switch', false);\n                _this.$store.dispatch('bubble_success', {\n                    ret: 0,\n                    type: 'top',\n                    msg: '反馈成功'\n                });\n            }).catch(function (err) {\n                _this.$store.dispatch('bubble_fail', err);\n            });\n        }\n    }\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"7t+N\")))\n\n/***/ }),\n\n/***/ \"4IqS\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _vuex = __webpack_require__(\"NYxO\");\n\nvar _avatar = __webpack_require__(\"mOGY\");\n\nvar _avatar2 = _interopRequireDefault(_avatar);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n    data: function data() {\n        return {\n            avatar: _avatar2.default,\n            user_id: '',\n            user: {}\n        };\n    },\n\n    computed: (0, _vuex.mapState)({\n        userInfo: function userInfo(state) {\n            return state.user.info;\n        }\n    }),\n    methods: {\n        uploaded: function uploaded(fileUrl, isAgain) {\n            var _this = this;\n\n            if (isAgain) {\n                return false;\n            }\n\n            this.$store.dispatch('user_setUserInfo', {\n                avatar_url: fileUrl\n            }).then(function (filename) {\n                _this.$store.dispatch('user_updateUserInfo', {}).then(function () {\n                    _this.$store.dispatch('bubble_success', {\n                        ret: 0,\n                        type: 'top',\n                        msg: '保存成功！'\n                    });\n\n                    var cache_userInfo = _this.$version.userInfo;\n                    _this.$cache.setStore(cache_userInfo.key, _this.userInfo, cache_userInfo.version, cache_userInfo.time);\n                }).catch(function (err) {\n                    _this.$store.dispatch('bubble_fail', err);\n                });\n            });\n        },\n        getAuthorInfo: function getAuthorInfo() {\n            var _this2 = this;\n\n            if (!this.user_id) {\n                return false;\n            }\n            this.$store.dispatch('user_getUserInfo', {\n                userId: this.user_id\n            }).then(function (info) {\n                _this2.user = info;\n\n                _this2.$store.dispatch('bubble_success', info);\n            }).catch(function (err) {\n                _this2.$store.dispatch('bubble_fail', err);\n            });\n        },\n        follow: function follow(e) {\n            var _this3 = this;\n\n            if (!this.userInfo.isLogin) {\n                return this.$store.dispatch('bubble_fail', {\n                    ret: -11,\n                    msg: '未登录，请登陆后操作'\n                });\n                return false;\n            } else if (this.user.relation == 1 || this.user.relation == 3) {\n                this.$store.dispatch('auth_delFollow', {\n                    userId: this.user.uid\n                }).then(function (res) {\n                    _this3.getAuthorInfo();\n\n                    _this3.$store.dispatch('bubble_success', res);\n                }).catch(function (err) {\n                    _this3.$store.dispatch('bubble_fail', err);\n                });\n            } else {\n                this.$store.dispatch('auth_addFollow', {\n                    userId: this.user.uid\n                }).then(function (res) {\n                    _this3.getAuthorInfo();\n\n                    _this3.$store.dispatch('bubble_success', res);\n                }).catch(function (res) {\n                    _this3.$store.dispatch('bubble_fail', err);\n                });\n            }\n        },\n        addBlackDialog: function addBlackDialog() {\n            var that = this;\n\n            if (!this.userInfo.isLogin) {\n                return this.$store.dispatch('bubble_fail', {\n                    ret: -11,\n                    msg: '未登录，请登陆后操作'\n                });\n            }\n\n            this.$store.dispatch('bubble_showBubble', {\n                show: true,\n                type: 'warn',\n                warn: {\n                    title: '确定要加入加入黑名单?',\n                    content: '添加到黑名单中的用户，无法再您的作品下评论，无法回复您，TA的作品页不会向您推送',\n                    comfireFn: function comfireFn() {\n                        that.addBlack();\n                    }\n                }\n            });\n        },\n        addBlack: function addBlack() {\n            var _this4 = this;\n\n            if (this.user.black == 1) {\n                this.$store.dispatch('bubble_fail', {\n                    ret: -31,\n                    msg: '已经添加黑名单'\n                });\n                return false;\n            }\n\n            this.$store.dispatch('auth_addBlack', {\n                userId: this.user.uid\n            }).then(function (res) {\n                _this4.$store.dispatch('bubble_success', {\n                    ret: 0,\n                    type: 'top',\n                    msg: '添加成功'\n                });\n            }).catch(function (err) {\n                _this4.$store.dispatch('bubble_fail', err);\n            });\n        },\n        addReport: function addReport() {\n            if (!this.userInfo.isLogin) {\n                return this.$store.dispatch('bubble_fail', {\n                    ret: -11,\n                    msg: '未登录，请登陆后操作'\n                });\n            }\n\n            this.$store.dispatch('bubble_showBubble', {\n                show: true,\n                type: 'report',\n                report: {\n                    content_id: this.user.uid,\n                    content_type: 3\n                }\n            });\n        }\n    },\n    mounted: function mounted() {\n        var _this5 = this;\n\n        $('body').on('click', function (e) {\n            var node = $(e.target);\n            if (!node.hasClass('j-close-2') && node.parents('.j-close-2').length == 0) {\n                _this5.subMoreMoreShow = false;\n                _this5.subShareMoreShow = false;\n            }\n        });\n\n        this.user_id = this.$url.getUrlParam('user_id');\n\n        this.getAuthorInfo();\n    }\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"7t+N\")))\n\n/***/ }),\n\n/***/ \"4k6S\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _vuex = __webpack_require__(\"NYxO\");\n\nvar _avatar = __webpack_require__(\"mOGY\");\n\nvar _avatar2 = _interopRequireDefault(_avatar);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n    data: function data() {\n        return {\n            avatar: _avatar2.default,\n\n            hot_isCan: true,\n            pageIndex: 0,\n            pageSize: 20,\n            move: 0\n        };\n    },\n\n    props: [],\n    computed: (0, _vuex.mapState)({\n        hot: function hot(state) {\n            return state.opus.hot;\n        },\n        hot_number: function hot_number() {\n            return Math.ceil(this.$store.state.opus.hot.count / 6);\n        },\n\n        user: function user(state) {\n            return state.user.info;\n        },\n        tag: function tag(state) {\n            return state.opus.category;\n        }\n    }),\n    methods: {\n        hotSwitch: function hotSwitch(type) {\n            var _this = this;\n\n            if (!this.hot_number) {\n                return false;\n            }\n            if (type == 'left' && this.pageIndex == 1) {\n                return false;\n            }\n            if (type == 'right' && this.pageIndex == this.hot_number) {\n                return false;\n            }\n            if (!this.hot_isCan) {\n                return false;\n            }\n            this.hot_number = false;\n\n            if (type == 'left') {\n                this.pageIndex--;\n            } else {\n                this.pageIndex++;\n            }\n\n            if (type == 'left') {\n                this.move = (this.pageIndex - 1) * 900;\n            } else {\n                if (this.pageIndex * 6 + 1 <= this.hot_number) {\n                    this.move = (this.pageIndex - 1) * 900;\n                } else {\n                    this.move = this.hot.lists.length * 150 + 10 - 960;\n                }\n            }\n\n            setTimeout(function (res) {\n                _this.hot_isCan = true;\n            }, 500);\n        },\n        getHotList: function getHotList() {\n            var _this2 = this;\n\n            this.$store.dispatch('opus_getHotList', {\n                \"params\": {\n                    \"pagination\": \"1\",\n                    \"page\": this.pageIndex,\n                    \"pageSize\": this.pageSize },\n                \"body\": {\n                    \"catalog_type\": \"1\" }\n            }).then(function (res) {\n                if (res && !!res.list && !!res.list.length) {\n                    _this2.pageIndex = 1;\n                }\n\n                _this2.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this2.$store.dispatch('bubble_fail', err);\n            });\n        }\n    },\n    mounted: function mounted() {\n        this.$watch('tag.index', function (newVal, oldVal) {\n            this.pageIndex = 1;\n            this.getHotList();\n        });\n\n        this.getHotList();\n    }\n};\n\n/***/ }),\n\n/***/ \"5hbK\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"L5uX\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"LFXr\"),\n  /* template */\n  __webpack_require__(\"EPsp\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"88zL\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"9AVj\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports._rejectObj = exports._reject = exports.getUnreadMessage = exports.markMessage = exports.delMessage = exports.getMessageDetail = exports.getMessageList = undefined;\n\nvar _axios = __webpack_require__(\"mtWM\");\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _config = __webpack_require__(\"AEPM\");\n\nvar _jsCookie = __webpack_require__(\"lbHh\");\n\nvar _jsCookie2 = _interopRequireDefault(_jsCookie);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar token = _jsCookie2.default.get('token');\n\nfunction getMessageList(option) {\n\tvar url = _config.baseUrl + 'user/getMessageList';\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction getMessageDetail(option) {\n\tvar url = _config.baseUrl + 'user/getMessageDetail';\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction delMessage(option) {\n\tvar url = _config.baseUrl + 'user/delMessage/' + option.msgId;\n\n\tif (!token) {\n\t\treturn (0, _config._rejectObj)({\n\t\t\tret: -10,\n\t\t\tmsg: '未登录'\n\t\t});\n\t}\n\n\tdelete option._header;\n\treturn (0, _axios2.default)({\n\t\tmethod: 'DELETE',\n\t\turl: url,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nfunction markMessage(option) {\n\tvar url = _config.baseUrl + 'user/markMessage/' + option.msgType + '/' + option.msgId;\n\n\tif (!token) {\n\t\treturn (0, _config._rejectObj)({\n\t\t\tret: -10,\n\t\t\tmsg: '未登录'\n\t\t});\n\t}\n\n\tdelete option._header;\n\treturn (0, _axios2.default)({\n\t\tmethod: 'PUT',\n\t\turl: url,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nfunction getUnreadMessage(option) {\n\tvar url = _config.baseUrl + 'user/getUnreadMessage';\n\n\tif (!token) {\n\t\treturn (0, _config._rejectObj)({\n\t\t\tret: -10,\n\t\t\tmsg: '未登录'\n\t\t});\n\t}\n\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nexports.getMessageList = getMessageList;\nexports.getMessageDetail = getMessageDetail;\nexports.delMessage = delMessage;\nexports.markMessage = markMessage;\nexports.getUnreadMessage = getUnreadMessage;\nexports._reject = _config._reject;\nexports._rejectObj = _config._rejectObj;\n\n/***/ }),\n\n/***/ \"9a/S\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _vuex = __webpack_require__(\"NYxO\");\n\nvar _avatar = __webpack_require__(\"mOGY\");\n\nvar _avatar2 = _interopRequireDefault(_avatar);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n    data: function data() {\n        return {\n            avatar: _avatar2.default,\n            pageIndex: 1,\n            pageSize: 5,\n            query: ''\n        };\n    },\n\n    props: ['resType'],\n    computed: (0, _vuex.mapState)({\n        count: function count(state) {\n            return state.auth.count;\n        },\n        user: function user(state) {\n            return state.user.info;\n        },\n        lists: function lists(state) {\n            return state.auth.lists;\n        },\n        self: function self() {\n            return this.resType == 'blacklist' || this.user_id == this.user.uid;\n        }\n    }),\n    methods: {\n        pageSwitch: function pageSwitch(pageIndex) {\n            if (this.pageIndex == pageIndex) {\n                return false;\n            }\n            this.pageIndex = pageIndex;\n            this.getList();\n        },\n        delBlack: function delBlack(uid) {\n            var _this = this;\n\n            this.$store.dispatch('auth_delBlack', {\n                userId: uid\n            }).then(function (res) {\n                _this.getList();\n\n                _this.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        addFollow: function addFollow(uid) {\n            var _this2 = this;\n\n            this.$store.dispatch('auth_addFollow', {\n                userId: uid\n            }).then(function (res) {\n                _this2.getList();\n\n                _this2.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                tthis.$store.dispatch('bubble_fail', err);\n            });\n        },\n        delFollow: function delFollow(uid) {\n            var _this3 = this;\n\n            this.$store.dispatch('auth_delFollow', {\n                userId: uid\n            }).then(function (res) {\n                _this3.getList();\n\n                _this3.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this3.$store.dispatch('bubble_fail', err);\n            });\n        },\n        getUserList: function getUserList() {\n            var _this4 = this;\n\n            this.$store.dispatch('auth_getUserList', {\n                \"pagination\": \"1\",\n                \"query\": this.query || '',\n                \"page\": this.pageIndex,\n                \"pageSize\": this.pageSize }).then(function (res) {\n                _this4.$emit('author_count', _this4.count);\n\n                _this4.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this4.$store.dispatch('bubble_fail', err);\n            });\n        },\n        getFollowList: function getFollowList() {\n            var _this5 = this;\n\n            this.$store.dispatch('auth_getFollowList', {\n                \"userId\": this.user_id ? this.user_id : '',\n                \"pagination\": \"1\",\n                \"page\": this.pageIndex,\n                \"pageSize\": this.pageSize }).then(function (res) {\n                _this5.$emit('author_count', _this5.count);\n\n                _this5.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this5.$store.dispatch('bubble_fail', err);\n            });\n        },\n        getFansList: function getFansList() {\n            var _this6 = this;\n\n            this.$store.dispatch('auth_getFansList', {\n                \"userId\": this.user_id ? this.user_id : '',\n                \"pagination\": \"1\",\n                \"page\": this.pageIndex,\n                \"pageSize\": this.pageSize }).then(function (res) {\n                _this6.$emit('author_count', _this6.count);\n\n                _this6.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this6.$store.dispatch('bubble_fail', err);\n            });\n        },\n        getBlackList: function getBlackList() {\n            var _this7 = this;\n\n            this.$store.dispatch('auth_getBlackList', {\n                pageSize: this.pageSize,\n                pageIndex: this.pageIndex\n            }).then(function (res) {\n                _this7.$emit('author_count', _this7.count);\n\n                _this7.$store.dispatch('bubble_success', res);\n            }).catch(function (res) {\n                _this7.$store.dispatch('bubble_fail', err);\n            });\n        },\n        getList: function getList() {\n            if (this.resType == 'search') {\n                this.getUserList();\n            } else if (this.resType == 'blacklist') {\n                this.getBlackList();\n            } else if (this.resType == 'followList') {\n                this.getFollowList();\n            } else if (this.resType == 'fansList') {\n                this.getFansList();\n            }\n        }\n    },\n    created: function created() {\n        var _this8 = this;\n\n        this.$eventHub.$on('header_serach', function (option) {\n            if (_this8.query == option.query) {\n                return false;\n            }\n            _this8.query = option.query;\n            _this8.getList();\n        });\n    },\n    mounted: function mounted() {\n        this.query = this.$url.getUrlParam('query');\n        this.user_id = this.$url.getUrlParam('user_id');\n\n        this.getList();\n    }\n};\n\n/***/ }),\n\n/***/ \"AEPM\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports._rejectObj = exports._reject = exports.distUrl = exports.imgBaseUrl = exports.baseUrl = exports.isdebug = undefined;\n\nvar _promise = __webpack_require__(\"//Fk\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar baseUrl;\nvar imgBaseUrl = '';\nvar distUrl = '';\nvar isdebug = window.location.href.indexOf('isdebug=1') > 0;\n\nif (false) {\n\texports.baseUrl = baseUrl = 'https://api.eryuzhisen.com/java/eryuzhisen-server/';\n\texports.distUrl = distUrl = '/dist/html/';\n\texports.imgBaseUrl = imgBaseUrl = '';\n} else {\n\texports.baseUrl = baseUrl = '/java/eryuzhisen-server/';\n\texports.distUrl = distUrl = '/';\n\texports.imgBaseUrl = imgBaseUrl = '';\n}\n\nfunction _reject(response) {\n\tif (response.errcode == 30001) {}\n\treturn _promise2.default.reject(response);\n}\n\nfunction _rejectObj(error) {\n\tif (!!error && !!error.ret && error.ret > 0) {\n\t\treturn _reject(error);\n\t}\n\treturn _reject({\n\t\tret: error && error.ret || -1,\n\t\tmsg: error && error.msg || '网络异常',\n\t\terror: error\n\t});\n}\n\nexports.isdebug = isdebug;\nexports.baseUrl = baseUrl;\nexports.imgBaseUrl = imgBaseUrl;\nexports.distUrl = distUrl;\nexports._reject = _reject;\nexports._rejectObj = _rejectObj;\n\n/***/ }),\n\n/***/ \"ApeN\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-footer\"\n  }, [_c('div', {\n    staticClass: \"c-footer-content\"\n  }, [_c('div', {\n    staticClass: \"footer-left\"\n  }, [_c('div', {\n    staticClass: \"menu\"\n  }, [_c('a', {\n    attrs: {\n      \"href\": _vm.url.about\n    }\n  }, [_vm._v(\"关于我们\")]), _vm._v(\"\\n\\t\\t\\t · \\n\\t\\t\\t\"), _c('a', {\n    attrs: {\n      \"href\": _vm.url.about\n    }\n  }, [_vm._v(\"用户协议\")]), _vm._v(\"\\n\\t\\t\\t · \\n\\t\\t\\t\"), _c('a', {\n    attrs: {\n      \"href\": _vm.url.about\n    }\n  }, [_vm._v(\"隐私政策\")]), _vm._v(\"\\n\\t\\t\\t · \\n\\t\\t\\t\"), _c('a', {\n    attrs: {\n      \"href\": _vm.url.about\n    }\n  }, [_vm._v(\"知识产权\")]), _vm._v(\"\\n\\t\\t\\t · \\n\\t\\t\\t\"), _c('a', {\n    attrs: {\n      \"href\": _vm.url.about\n    }\n  }, [_vm._v(\"侵权举报\")]), _vm._v(\"\\n\\t\\t\\t · \\n\\t\\t\\t\"), _c('a', {\n    attrs: {\n      \"href\": _vm.url.about\n    }\n  }, [_vm._v(\"免责声明\")]), _vm._v(\"\\n\\t\\t\\t · \\n\\t\\t\\t\"), _c('a', {\n    attrs: {\n      \"href\": _vm.url.contact\n    }\n  }, [_vm._v(\"联系我们\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"text\"\n  }, [_vm._v(\"© 2017 耳语之森 BETA1.0版 All RightReserved. 沪ICP备17018710号\")])]), _vm._v(\" \"), _vm._m(0)])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"footer-right\"\n  }, [_c('div', {\n    staticClass: \"icon\"\n  }, [_c('div', {\n    staticClass: \"icon-item\"\n  }, [_c('div', {\n    staticClass: \"qr\"\n  }, [_c('img', {\n    attrs: {\n      \"src\": __webpack_require__(\"tMge\")\n    }\n  })])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"icon-item\"\n  })])])\n}]}\n\n/***/ }),\n\n/***/ \"B0wf\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"B6An\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\r\n * cache 1.0.0\r\n * @license MIT\r\n */\r\n(function(global, factory) {\r\n     true ? \r\n        module.exports = factory() :\r\n        typeof define === 'function' && define.amd ? \r\n            define(factory) :\r\n            (global.cache = factory());\r\n}(this, (function() {\r\n    'use strict';\r\n\r\n    var Vue;\r\n    \r\n    function install(_Vue) {\r\n        if (Vue) {\r\n            console.error(\r\n                '[cache] already installed. Vue.use(cache) should be called only once.'\r\n            );\r\n            return\r\n        }\r\n        Vue = _Vue;\r\n        Vue.prototype.$cache = new Cache();\r\n    }\r\n\r\n    // 创建Cache实例\r\n    function Cache (){\r\n        this.memStoreMap = {};\r\n    }\r\n    // 创建url实例\r\n    Cache.prototype = {\r\n        /*\r\n        *   设置缓存 version,value,cacheTime\r\n        *   @param cacheTime 毫秒\r\n        */\r\n        setStore:function(key,value,version,cacheTime){\r\n            try{\r\n                if(!window.localStorage){\r\n                    return this;\r\n                }\r\n            }\r\n            catch(e){\r\n                return this;\r\n            }\r\n            var content=\"\";\r\n            \r\n            if(!cacheTime){  //如果没有cacheTime，就返回吧，没有意义！\r\n                return this;\r\n            }\r\n            \r\n            var d = {};\r\n            d.version=\"localCachev1\";\r\n            d.dataVersion=version;\r\n            d.cacheTime=((new Date()).getTime()+(cacheTime?parseInt(cacheTime,10):0));\r\n            d.content=value;\r\n            content=JSON.stringify(d);\r\n            \r\n            try{\r\n                this.memStoreMap[key] = content;\r\n                localStorage.setItem(key, content);\r\n            }\r\n            catch(e){\r\n                return this;\r\n            }\r\n            return this;\r\n        },\r\n        /*\r\n        *   获取缓存\r\n        */\r\n        getStore:function(key,version,forceLocal){//forceLocal强制取localstory\r\n            try{\r\n                if(!window.localStorage){\r\n                    return false;\r\n                }\r\n            }\r\n            catch(e){\r\n                return \"\";\r\n            }\r\n\r\n            var content = '';\r\n            if(forceLocal){\r\n                content = localStorage.getItem(key);\r\n            }else{\r\n                content=this.memStoreMap[key] || localStorage.getItem(key);\r\n            }\r\n            if(!content){return \"\";}\r\n            if(content.indexOf(\"localCachev1\")>=0){\r\n                var d=JSON.parse(content);\r\n                //检查数据版本是否有效\r\n                if(d.dataVersion!=version){\r\n                    return \"\";\r\n                }\r\n                //检查cache是否有效\r\n                if(d.cacheTime>=(new Date()).getTime()){\r\n                    return d.content;\r\n                }else{\r\n                    this.removeStore(key);\r\n                    return \"\";\r\n                }\r\n            }else{\r\n                return content;\r\n            }\r\n        },\r\n        /*\r\n        *   删除缓存\r\n        */\r\n        removeStore:function(key){\r\n            try{\r\n                if(!window.localStorage){\r\n                    return this;\r\n                }\r\n            }\r\n            catch(e){\r\n                return this;\r\n            }\r\n            localStorage.removeItem(key);\r\n            this.memStoreMap[key] = undefined;\r\n            delete this.memStoreMap[key];\r\n            return this;\r\n        }\r\n    };\r\n\r\n    var index = {\r\n        install: install,\r\n        version: '1.0.0'\r\n    };\r\n\r\n    return index;\r\n})));\n\n/***/ }),\n\n/***/ \"BCRs\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _img = __webpack_require__(\"rbcv\");\n\nvar _img2 = _interopRequireDefault(_img);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n    data: function data() {\n        return {\n            count: 4,\n            lists: [{\n                name: '奇昊大本营',\n                time: '2小时',\n                img: _img2.default,\n                title: '路边传来了歌声',\n                text: '《姑获鸟之夏》是日本作家京极夏彦的处女作，也是“京极堂”系列推理小说的第一部。在这部作品中，人称“京极堂”的主人公中禅寺秋彦运用广博的民俗学知识、复杂的...'\n            }, {\n                name: '奇昊大本营',\n                time: '2小时',\n                img: _img2.default,\n                title: '路边传来了歌声',\n                text: '《姑获鸟之夏》是日本作家京极夏彦的处女作，也是“京极堂”系列推理小说的第一部。在这部作品中，人称“京极堂”的主人公中禅寺秋彦运用广博的民俗学知识、复杂的...',\n                tags: ['漫画'],\n                fabulous: 123,\n                comment: 8134\n            }, {\n                name: '奇昊大本营',\n                time: '2小时',\n                img: _img2.default,\n                title: '路边传来了歌声',\n                text: '《姑获鸟之夏》是日本作家京极夏彦的处女作，也是“京极堂”系列推理小说的第一部。在这部作品中，人称“京极堂”的主人公中禅寺秋彦运用广博的民俗学知识、复杂的...',\n                tags: ['文字'],\n                fabulous: 123,\n                comment: 8134\n            }],\n\n            pageIndex: 1,\n            pageSize: 5,\n            messageType: 1\n        };\n    },\n\n    methods: {\n        pageSwitch: function pageSwitch(pageIndex) {\n            if (this.pageSwitch == pageIndex) {\n                return false;\n            }\n            this.pageSwitch = pageIndex;\n        },\n        getMessageList: function getMessageList() {\n            var _this = this;\n\n            this.$store.dispatch('message_getMessageList', {\n                \"page\": this.pageIndex,\n                \"pageSize\": this.pageSize,\n                \"pagination\": 1,\n                \"messageType\": this.messageType\n            }).then(function (info) {\n                _this.$store.dispatch('bubble_success', info);\n            }).catch(function (err) {\n                _this.$store.dispatch('bubble_fail', err);\n            });\n        }\n    },\n    mounted: function mounted() {\n        this.getMessageList();\n    }\n};\n\n/***/ }),\n\n/***/ \"BFCG\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"sEEq\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"3u21\"),\n  /* template */\n  __webpack_require__(\"28R+\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"BGNd\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"Bhe8\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"CPmu\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"D3lx\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"tftU\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"YmXF\"),\n  /* template */\n  __webpack_require__(\"36Po\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"DMxe\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.hasScroll),\n      expression: \"hasScroll\"\n    }],\n    staticClass: \"c-side-menu\",\n    on: {\n      \"click\": _vm.top\n    }\n  }, [_c('span'), _vm._v(\" \"), _c('span'), _vm._v(\" \"), _vm._m(0)])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-dialog__tip\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(\"置顶\")])])\n}]}\n\n/***/ }),\n\n/***/ \"DfkF\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _vuex = __webpack_require__(\"NYxO\");\n\nexports.default = {\n    data: function data() {\n        return {\n            recordIndex: -1,\n            pageIndex: 1,\n            pageSize: 5,\n\n            comment: '',\n            messageType: 2\n        };\n    },\n\n    computed: (0, _vuex.mapState)({\n        message: function message(state) {\n            return state.message.message;\n        }\n    }),\n    methods: {\n        recordSwitch: function recordSwitch(index, msg_id, read) {\n            var _this = this;\n\n            if (index == this.recordIndex) {\n                this.recordIndex = -1;\n            } else {\n                this.recordIndex = index;\n            }\n\n            if (read == 0) {\n                this.$store.dispatch('message_markMessage', {\n                    msgType: this.messageType,\n                    msgId: msg_id\n                }).then(function (res) {\n                    _this.$eventHub.$emit('getUnreadMessage');\n                    _this.getMessageList();\n\n                    _this.$store.dispatch('bubble_success', res);\n                }).catch(function (err) {\n                    _this.$store.dispatch('bubble_fail', err);\n                });\n            }\n        },\n        getMessageList: function getMessageList() {\n            var _this2 = this;\n\n            this.$store.dispatch('message_getMessageList', {\n                \"page\": this.pageIndex,\n                \"pageSize\": this.pageSize,\n                \"pagination\": 1,\n                \"messageType\": this.messageType\n            }).then(function (res) {\n                _this2.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this2.$store.dispatch('bubble_fail', err);\n            });\n        },\n        pageSwitch: function pageSwitch(pageIndex) {\n            if (this.pageIndex == pageIndex) {\n                return false;\n            }\n            this.pageIndex = pageIndex;\n            this.getMessageList();\n        },\n        addReport: function addReport(content_id) {\n            this.$store.dispatch('bubble_showBubble', {\n                show: true,\n                type: 'report',\n                report: {\n                    content_id: content_id,\n                    content_type: 3\n                }\n            });\n        },\n        getMessageDetail: function getMessageDetail(msgId) {\n            var _this3 = this;\n\n            this.$store.dispatch('message_getMessageDetail', {\n                \"msgId\": msgId\n            }).then(function (res) {\n                _this3.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this3.$store.dispatch('bubble_fail', err);\n            });\n        },\n        addComment: function addComment(payload) {\n            var _this4 = this;\n\n            this.$store.dispatch('opus_addComment', {\n                \"to_comment_id\": payload.to_comment_id,\n                \"to_reply_comment_id\": payload.to_reply_comment_id,\n                \"comment\": this.comment,\n                \"catalog_id\": payload.catalog_id,\n                \"chapter_id\": payload.chapter_id }).then(function (res) {\n                _this4.comment = '';\n                _this4.recordIndex = -2;\n                _this4.getMessageList();\n\n                _this4.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this4.$store.dispatch('bubble_fail', err);\n            });\n        },\n        emitComment: function emitComment(option) {\n            if (!option) {\n                return false;\n            }\n            this.addComment({\n                \"to_reply_comment_id\": option.to_comment_id,\n                \"comment\": this.comment,\n                \"catalog_id\": option.catalog_id,\n                \"chapter_id\": option.chapter_id });\n        }\n    },\n    mounted: function mounted() {\n        this.getMessageList();\n    }\n};\n\n/***/ }),\n\n/***/ \"EB0Y\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"EPsp\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-upload\",\n    attrs: {\n      \"id\": _vm.container\n    }\n  })\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ \"EPvs\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"jZOH\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"DfkF\"),\n  /* template */\n  __webpack_require__(\"QZz9\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"Eion\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"zgUS\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"yfst\"),\n  /* template */\n  __webpack_require__(\"iyE5\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"FG6U\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-artice-comment\"\n  }, [_c('div', {\n    staticClass: \"c-artice-comment-wrap\"\n  }, [_vm._l((_vm.comment.list), function(data, _index) {\n    return _c('div', {\n      staticClass: \"c-artice-comment-list\",\n      attrs: {\n        \"data-uid\": data.user.uid,\n        \"data-comment_id\": data.comment_id\n      }\n    }, [_c('div', {\n      staticClass: \"comment__content\"\n    }, [_c('div', {\n      staticClass: \"content__top\"\n    }, [_c('div', {\n      staticClass: \"top-img\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": data.user.avatar_url || _vm.avatar\n      }\n    })]), _vm._v(\" \"), _c('div', {\n      staticClass: \"top-name\"\n    }, [_vm._v(_vm._s(data.user.nick_name))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"content__body\"\n    }, [_vm._v(_vm._s(data.comment))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"content__bottom\"\n    }, [_c('div', {\n      staticClass: \"bottom-jubao\",\n      on: {\n        \"click\": _vm.addReport\n      }\n    }, [_vm._v(\"举报\")]), _vm._v(\" \"), _c('div', {\n      staticClass: \"bottom-record\",\n      on: {\n        \"click\": function($event) {\n          _vm.replayCommit(_index, -1)\n        }\n      }\n    }, [_vm._v(\"回复\")]), _vm._v(\" \"), _c('div', {\n      staticClass: \"bottom-time\"\n    }, [_vm._v(_vm._s(data.publish_time))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"bottom-fabulous\",\n      on: {\n        \"click\": _vm.addCommentPraise\n      }\n    }, [_c('span', {\n      class: data.hasFabulous ? 'z-on' : ''\n    }), _c('strong', [_vm._v(_vm._s(data.praise_count))])])])]), _vm._v(\" \"), (data.replayIndex == -1) ? _c('div', {\n      staticClass: \"content__reply z-top\"\n    }, [_c('div', {\n      staticClass: \"content__reply-form\"\n    }, [_c('input', {\n      directives: [{\n        name: \"model\",\n        rawName: \"v-model\",\n        value: (_vm.comment_con),\n        expression: \"comment_con\"\n      }],\n      attrs: {\n        \"type\": \"text\",\n        \"placeholder\": \"回复评论...\"\n      },\n      domProps: {\n        \"value\": (_vm.comment_con)\n      },\n      on: {\n        \"input\": function($event) {\n          if ($event.target.composing) { return; }\n          _vm.comment_con = $event.target.value\n        }\n      }\n    })]), _vm._v(\" \"), _c('div', {\n      staticClass: \"content__reply-btn\",\n      on: {\n        \"click\": function($event) {\n          _vm.sendComment(data.comment_id)\n        }\n      }\n    }, [_vm._v(\"提交\")])]) : _vm._e(), _vm._v(\" \"), _c('div', {\n      staticClass: \"comment__record\"\n    }, [_vm._l((data.replys), function(reply, index) {\n      return _c('div', {\n        staticClass: \"record__item\",\n        attrs: {\n          \"data-uid\": reply.user.uid,\n          \"data-comment_id\": reply.comment_id,\n          \"data-index\": index\n        }\n      }, [_c('div', {\n        staticClass: \"record__item-content\"\n      }, [_c('div', {\n        staticClass: \"item-text\"\n      }, [_c('p', [_c('strong', [_vm._v(_vm._s(reply.user.nick_name))]), _vm._v(\" \"), (reply.reply_to_user) ? _c('em', [_vm._v(\" 回复 \"), _c('strong', [_vm._v(_vm._s(reply.reply_to_user.nick_name))])]) : _vm._e(), _vm._v(\"：\\n                            \" + _vm._s(reply.comment) + \"\\n                        \")])]), _vm._v(\" \"), _c('div', {\n        staticClass: \"item-bottom\"\n      }, [_c('div', {\n        staticClass: \"item-bottom-jubao\",\n        on: {\n          \"click\": _vm.addReport\n        }\n      }, [_vm._v(\"举报\")]), _vm._v(\" \"), _c('div', {\n        staticClass: \"item-bottom-record\",\n        on: {\n          \"click\": function($event) {\n            _vm.replayCommit(_index, index)\n          }\n        }\n      }, [_vm._v(\"回复\")]), _vm._v(\" \"), _c('div', {\n        staticClass: \"item-bottom-time\"\n      }, [_vm._v(_vm._s(reply.publish_time))])])]), _vm._v(\" \"), (index == data.replayIndex) ? _c('div', {\n        staticClass: \"content__reply\"\n      }, [_c('div', {\n        staticClass: \"content__reply-form\"\n      }, [_c('input', {\n        directives: [{\n          name: \"model\",\n          rawName: \"v-model\",\n          value: (_vm.comment_con),\n          expression: \"comment_con\"\n        }],\n        attrs: {\n          \"type\": \"text\",\n          \"placeholder\": \"回复评论...\"\n        },\n        domProps: {\n          \"value\": (_vm.comment_con)\n        },\n        on: {\n          \"input\": function($event) {\n            if ($event.target.composing) { return; }\n            _vm.comment_con = $event.target.value\n          }\n        }\n      })]), _vm._v(\" \"), _c('div', {\n        staticClass: \"content__reply-btn\",\n        on: {\n          \"click\": function($event) {\n            _vm.sendReplyComment(data.comment_id, reply.comment_id)\n          }\n        }\n      }, [_vm._v(\"提交\")])]) : _vm._e()])\n    }), _vm._v(\" \"), (data.replys && data.reply_page_info.total_count - data.replys.length > 0) ? _c('div', {\n      staticClass: \"record__page\"\n    }, [_vm._v(\"\\n                还有\"), _c('span', [_vm._v(_vm._s(data.reply_page_info.total_count - data.replys.length))]), _vm._v(\"条回复 \"), _c('strong', {\n      on: {\n        \"click\": function($event) {\n          _vm.getSubCommentMore(data)\n        }\n      }\n    }, [_vm._v(\"点击加载更多\")])]) : _vm._e()], 2)])\n  }), _vm._v(\" \"), (_vm.comment.count == 0) ? _c('Empty') : _vm._e()], 2), _vm._v(\" \"), _c('Page', {\n    attrs: {\n      \"count\": _vm.comment.count,\n      \"length\": _vm.pageSize,\n      \"index\": _vm.pageIndex\n    },\n    on: {\n      \"page_switch\": _vm.pageSwitch\n    }\n  })], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ \"FhuJ\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = {\n    props: ['data']\n};\n\n/***/ }),\n\n/***/ \"HFHI\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"eemp\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"1nOS\"),\n  /* template */\n  __webpack_require__(\"nL7d\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"HvkJ\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\n * mOxie - multi-runtime File API & XMLHttpRequest L2 Polyfill\n * v1.2.1\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n *\n * Date: 2014-05-14\n */\n/**\n * Compiled inline version. (Library mode)\n */\n\n/*jshint smarttabs:true, undef:true, latedef:true, curly:true, bitwise:true, camelcase:true */\n/*globals $code */\n\n(function(exports, undefined) {\n\t\"use strict\";\n\n\tvar modules = {};\n\n\tfunction require(ids, callback) {\n\t\tvar module, defs = [];\n\n\t\tfor (var i = 0; i < ids.length; ++i) {\n\t\t\tmodule = modules[ids[i]] || resolve(ids[i]);\n\t\t\tif (!module) {\n\t\t\t\tthrow 'module definition dependecy not found: ' + ids[i];\n\t\t\t}\n\n\t\t\tdefs.push(module);\n\t\t}\n\n\t\tcallback.apply(null, defs);\n\t}\n\n\tfunction define(id, dependencies, definition) {\n\t\tif (typeof id !== 'string') {\n\t\t\tthrow 'invalid module definition, module id must be defined and be a string';\n\t\t}\n\n\t\tif (dependencies === undefined) {\n\t\t\tthrow 'invalid module definition, dependencies must be specified';\n\t\t}\n\n\t\tif (definition === undefined) {\n\t\t\tthrow 'invalid module definition, definition function must be specified';\n\t\t}\n\n\t\trequire(dependencies, function() {\n\t\t\tmodules[id] = definition.apply(null, arguments);\n\t\t});\n\t}\n\n\tfunction defined(id) {\n\t\treturn !!modules[id];\n\t}\n\n\tfunction resolve(id) {\n\t\tvar target = exports;\n\t\tvar fragments = id.split(/[.\\/]/);\n\n\t\tfor (var fi = 0; fi < fragments.length; ++fi) {\n\t\t\tif (!target[fragments[fi]]) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttarget = target[fragments[fi]];\n\t\t}\n\n\t\treturn target;\n\t}\n\n\tfunction expose(ids) {\n\t\tfor (var i = 0; i < ids.length; i++) {\n\t\t\tvar target = exports;\n\t\t\tvar id = ids[i];\n\t\t\tvar fragments = id.split(/[.\\/]/);\n\n\t\t\tfor (var fi = 0; fi < fragments.length - 1; ++fi) {\n\t\t\t\tif (target[fragments[fi]] === undefined) {\n\t\t\t\t\ttarget[fragments[fi]] = {};\n\t\t\t\t}\n\n\t\t\t\ttarget = target[fragments[fi]];\n\t\t\t}\n\n\t\t\ttarget[fragments[fragments.length - 1]] = modules[id];\n\t\t}\n\t}\n\n// Included from: src/javascript/core/utils/Basic.js\n\n/**\n * Basic.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/core/utils/Basic', [], function() {\n\t/**\n\tGets the true type of the built-in object (better version of typeof).\n\t@author Angus Croll (http://javascriptweblog.wordpress.com/)\n\n\t@method typeOf\n\t@for Utils\n\t@static\n\t@param {Object} o Object to check.\n\t@return {String} Object [[Class]]\n\t*/\n\tvar typeOf = function(o) {\n\t\tvar undef;\n\n\t\tif (o === undef) {\n\t\t\treturn 'undefined';\n\t\t} else if (o === null) {\n\t\t\treturn 'null';\n\t\t} else if (o.nodeType) {\n\t\t\treturn 'node';\n\t\t}\n\n\t\t// the snippet below is awesome, however it fails to detect null, undefined and arguments types in IE lte 8\n\t\treturn ({}).toString.call(o).match(/\\s([a-z|A-Z]+)/)[1].toLowerCase();\n\t};\n\t\t\n\t/**\n\tExtends the specified object with another object.\n\n\t@method extend\n\t@static\n\t@param {Object} target Object to extend.\n\t@param {Object} [obj]* Multiple objects to extend with.\n\t@return {Object} Same as target, the extended object.\n\t*/\n\tvar extend = function(target) {\n\t\tvar undef;\n\n\t\teach(arguments, function(arg, i) {\n\t\t\tif (i > 0) {\n\t\t\t\teach(arg, function(value, key) {\n\t\t\t\t\tif (value !== undef) {\n\t\t\t\t\t\tif (typeOf(target[key]) === typeOf(value) && !!~inArray(typeOf(value), ['array', 'object'])) {\n\t\t\t\t\t\t\textend(target[key], value);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget[key] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn target;\n\t};\n\t\t\n\t/**\n\tExecutes the callback function for each item in array/object. If you return false in the\n\tcallback it will break the loop.\n\n\t@method each\n\t@static\n\t@param {Object} obj Object to iterate.\n\t@param {function} callback Callback function to execute for each item.\n\t*/\n\tvar each = function(obj, callback) {\n\t\tvar length, key, i, undef;\n\n\t\tif (obj) {\n\t\t\ttry {\n\t\t\t\tlength = obj.length;\n\t\t\t} catch(ex) {\n\t\t\t\tlength = undef;\n\t\t\t}\n\n\t\t\tif (length === undef) {\n\t\t\t\t// Loop object items\n\t\t\t\tfor (key in obj) {\n\t\t\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\t\t\tif (callback(obj[key], key) === false) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Loop array items\n\t\t\t\tfor (i = 0; i < length; i++) {\n\t\t\t\t\tif (callback(obj[i], i) === false) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\tChecks if object is empty.\n\t\n\t@method isEmptyObj\n\t@static\n\t@param {Object} o Object to check.\n\t@return {Boolean}\n\t*/\n\tvar isEmptyObj = function(obj) {\n\t\tvar prop;\n\n\t\tif (!obj || typeOf(obj) !== 'object') {\n\t\t\treturn true;\n\t\t}\n\n\t\tfor (prop in obj) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t};\n\n\t/**\n\tRecieve an array of functions (usually async) to call in sequence, each  function\n\treceives a callback as first argument that it should call, when it completes. Finally,\n\tafter everything is complete, main callback is called. Passing truthy value to the\n\tcallback as a first argument will interrupt the sequence and invoke main callback\n\timmediately.\n\n\t@method inSeries\n\t@static\n\t@param {Array} queue Array of functions to call in sequence\n\t@param {Function} cb Main callback that is called in the end, or in case of error\n\t*/\n\tvar inSeries = function(queue, cb) {\n\t\tvar i = 0, length = queue.length;\n\n\t\tif (typeOf(cb) !== 'function') {\n\t\t\tcb = function() {};\n\t\t}\n\n\t\tif (!queue || !queue.length) {\n\t\t\tcb();\n\t\t}\n\n\t\tfunction callNext(i) {\n\t\t\tif (typeOf(queue[i]) === 'function') {\n\t\t\t\tqueue[i](function(error) {\n\t\t\t\t\t/*jshint expr:true */\n\t\t\t\t\t++i < length && !error ? callNext(i) : cb(error);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tcallNext(i);\n\t};\n\n\n\t/**\n\tRecieve an array of functions (usually async) to call in parallel, each  function\n\treceives a callback as first argument that it should call, when it completes. After \n\teverything is complete, main callback is called. Passing truthy value to the\n\tcallback as a first argument will interrupt the process and invoke main callback\n\timmediately.\n\n\t@method inParallel\n\t@static\n\t@param {Array} queue Array of functions to call in sequence\n\t@param {Function} cb Main callback that is called in the end, or in case of erro\n\t*/\n\tvar inParallel = function(queue, cb) {\n\t\tvar count = 0, num = queue.length, cbArgs = new Array(num);\n\n\t\teach(queue, function(fn, i) {\n\t\t\tfn(function(error) {\n\t\t\t\tif (error) {\n\t\t\t\t\treturn cb(error);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar args = [].slice.call(arguments);\n\t\t\t\targs.shift(); // strip error - undefined or not\n\n\t\t\t\tcbArgs[i] = args;\n\t\t\t\tcount++;\n\n\t\t\t\tif (count === num) {\n\t\t\t\t\tcbArgs.unshift(null);\n\t\t\t\t\tcb.apply(this, cbArgs);\n\t\t\t\t} \n\t\t\t});\n\t\t});\n\t};\n\t\n\t\n\t/**\n\tFind an element in array and return it's index if present, otherwise return -1.\n\t\n\t@method inArray\n\t@static\n\t@param {Mixed} needle Element to find\n\t@param {Array} array\n\t@return {Int} Index of the element, or -1 if not found\n\t*/\n\tvar inArray = function(needle, array) {\n\t\tif (array) {\n\t\t\tif (Array.prototype.indexOf) {\n\t\t\t\treturn Array.prototype.indexOf.call(array, needle);\n\t\t\t}\n\t\t\n\t\t\tfor (var i = 0, length = array.length; i < length; i++) {\n\t\t\t\tif (array[i] === needle) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t};\n\n\n\t/**\n\tReturns elements of first array if they are not present in second. And false - otherwise.\n\n\t@private\n\t@method arrayDiff\n\t@param {Array} needles\n\t@param {Array} array\n\t@return {Array|Boolean}\n\t*/\n\tvar arrayDiff = function(needles, array) {\n\t\tvar diff = [];\n\n\t\tif (typeOf(needles) !== 'array') {\n\t\t\tneedles = [needles];\n\t\t}\n\n\t\tif (typeOf(array) !== 'array') {\n\t\t\tarray = [array];\n\t\t}\n\n\t\tfor (var i in needles) {\n\t\t\tif (inArray(needles[i], array) === -1) {\n\t\t\t\tdiff.push(needles[i]);\n\t\t\t}\t\n\t\t}\n\t\treturn diff.length ? diff : false;\n\t};\n\n\n\t/**\n\tFind intersection of two arrays.\n\n\t@private\n\t@method arrayIntersect\n\t@param {Array} array1\n\t@param {Array} array2\n\t@return {Array} Intersection of two arrays or null if there is none\n\t*/\n\tvar arrayIntersect = function(array1, array2) {\n\t\tvar result = [];\n\t\teach(array1, function(item) {\n\t\t\tif (inArray(item, array2) !== -1) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\t\t});\n\t\treturn result.length ? result : null;\n\t};\n\t\n\t\n\t/**\n\tForces anything into an array.\n\t\n\t@method toArray\n\t@static\n\t@param {Object} obj Object with length field.\n\t@return {Array} Array object containing all items.\n\t*/\n\tvar toArray = function(obj) {\n\t\tvar i, arr = [];\n\n\t\tfor (i = 0; i < obj.length; i++) {\n\t\t\tarr[i] = obj[i];\n\t\t}\n\n\t\treturn arr;\n\t};\n\t\n\t\t\t\n\t/**\n\tGenerates an unique ID. This is 99.99% unique since it takes the current time and 5 random numbers.\n\tThe only way a user would be able to get the same ID is if the two persons at the same exact milisecond manages\n\tto get 5 the same random numbers between 0-65535 it also uses a counter so each call will be guaranteed to be page unique.\n\tIt's more probable for the earth to be hit with an ansteriod. Y\n\t\n\t@method guid\n\t@static\n\t@param {String} prefix to prepend (by default 'o' will be prepended).\n\t@method guid\n\t@return {String} Virtually unique id.\n\t*/\n\tvar guid = (function() {\n\t\tvar counter = 0;\n\t\t\n\t\treturn function(prefix) {\n\t\t\tvar guid = new Date().getTime().toString(32), i;\n\n\t\t\tfor (i = 0; i < 5; i++) {\n\t\t\t\tguid += Math.floor(Math.random() * 65535).toString(32);\n\t\t\t}\n\t\t\t\n\t\t\treturn (prefix || 'o_') + guid + (counter++).toString(32);\n\t\t};\n\t}());\n\t\n\n\t/**\n\tTrims white spaces around the string\n\t\n\t@method trim\n\t@static\n\t@param {String} str\n\t@return {String}\n\t*/\n\tvar trim = function(str) {\n\t\tif (!str) {\n\t\t\treturn str;\n\t\t}\n\t\treturn String.prototype.trim ? String.prototype.trim.call(str) : str.toString().replace(/^\\s*/, '').replace(/\\s*$/, '');\n\t};\n\n\n\t/**\n\tParses the specified size string into a byte value. For example 10kb becomes 10240.\n\t\n\t@method parseSizeStr\n\t@static\n\t@param {String/Number} size String to parse or number to just pass through.\n\t@return {Number} Size in bytes.\n\t*/\n\tvar parseSizeStr = function(size) {\n\t\tif (typeof(size) !== 'string') {\n\t\t\treturn size;\n\t\t}\n\t\t\n\t\tvar muls = {\n\t\t\t\tt: 1099511627776,\n\t\t\t\tg: 1073741824,\n\t\t\t\tm: 1048576,\n\t\t\t\tk: 1024\n\t\t\t},\n\t\t\tmul;\n\n\t\tsize = /^([0-9]+)([mgk]?)$/.exec(size.toLowerCase().replace(/[^0-9mkg]/g, ''));\n\t\tmul = size[2];\n\t\tsize = +size[1];\n\t\t\n\t\tif (muls.hasOwnProperty(mul)) {\n\t\t\tsize *= muls[mul];\n\t\t}\n\t\treturn size;\n\t};\n\t\n\n\treturn {\n\t\tguid: guid,\n\t\ttypeOf: typeOf,\n\t\textend: extend,\n\t\teach: each,\n\t\tisEmptyObj: isEmptyObj,\n\t\tinSeries: inSeries,\n\t\tinParallel: inParallel,\n\t\tinArray: inArray,\n\t\tarrayDiff: arrayDiff,\n\t\tarrayIntersect: arrayIntersect,\n\t\ttoArray: toArray,\n\t\ttrim: trim,\n\t\tparseSizeStr: parseSizeStr\n\t};\n});\n\n// Included from: src/javascript/core/I18n.js\n\n/**\n * I18n.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine(\"moxie/core/I18n\", [\n\t\"moxie/core/utils/Basic\"\n], function(Basic) {\n\tvar i18n = {};\n\n\treturn {\n\t\t/**\n\t\t * Extends the language pack object with new items.\n\t\t *\n\t\t * @param {Object} pack Language pack items to add.\n\t\t * @return {Object} Extended language pack object.\n\t\t */\n\t\taddI18n: function(pack) {\n\t\t\treturn Basic.extend(i18n, pack);\n\t\t},\n\n\t\t/**\n\t\t * Translates the specified string by checking for the english string in the language pack lookup.\n\t\t *\n\t\t * @param {String} str String to look for.\n\t\t * @return {String} Translated string or the input string if it wasn't found.\n\t\t */\n\t\ttranslate: function(str) {\n\t\t\treturn i18n[str] || str;\n\t\t},\n\n\t\t/**\n\t\t * Shortcut for translate function\n\t\t *\n\t\t * @param {String} str String to look for.\n\t\t * @return {String} Translated string or the input string if it wasn't found.\n\t\t */\n\t\t_: function(str) {\n\t\t\treturn this.translate(str);\n\t\t},\n\n\t\t/**\n\t\t * Pseudo sprintf implementation - simple way to replace tokens with specified values.\n\t\t *\n\t\t * @param {String} str String with tokens\n\t\t * @return {String} String with replaced tokens\n\t\t */\n\t\tsprintf: function(str) {\n\t\t\tvar args = [].slice.call(arguments, 1);\n\n\t\t\treturn str.replace(/%[a-z]/g, function() {\n\t\t\t\tvar value = args.shift();\n\t\t\t\treturn Basic.typeOf(value) !== 'undefined' ? value : '';\n\t\t\t});\n\t\t}\n\t};\n});\n\n// Included from: src/javascript/core/utils/Mime.js\n\n/**\n * Mime.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine(\"moxie/core/utils/Mime\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/I18n\"\n], function(Basic, I18n) {\n\t\n\tvar mimeData = \"\" +\n\t\t\"application/msword,doc dot,\" +\n\t\t\"application/pdf,pdf,\" +\n\t\t\"application/pgp-signature,pgp,\" +\n\t\t\"application/postscript,ps ai eps,\" +\n\t\t\"application/rtf,rtf,\" +\n\t\t\"application/vnd.ms-excel,xls xlb,\" +\n\t\t\"application/vnd.ms-powerpoint,ppt pps pot,\" +\n\t\t\"application/zip,zip,\" +\n\t\t\"application/x-shockwave-flash,swf swfl,\" +\n\t\t\"application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,\" +\n\t\t\"application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,\" +\n\t\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,\" +\n\t\t\"application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,\" +\n\t\t\"application/vnd.openxmlformats-officedocument.presentationml.template,potx,\" +\n\t\t\"application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,\" +\n\t\t\"application/x-javascript,js,\" +\n\t\t\"application/json,json,\" +\n\t\t\"audio/mpeg,mp3 mpga mpega mp2,\" +\n\t\t\"audio/x-wav,wav,\" +\n\t\t\"audio/x-m4a,m4a,\" +\n\t\t\"audio/ogg,oga ogg,\" +\n\t\t\"audio/aiff,aiff aif,\" +\n\t\t\"audio/flac,flac,\" +\n\t\t\"audio/aac,aac,\" +\n\t\t\"audio/ac3,ac3,\" +\n\t\t\"audio/x-ms-wma,wma,\" +\n\t\t\"image/bmp,bmp,\" +\n\t\t\"image/gif,gif,\" +\n\t\t\"image/jpeg,jpg jpeg jpe,\" +\n\t\t\"image/photoshop,psd,\" +\n\t\t\"image/png,png,\" +\n\t\t\"image/svg+xml,svg svgz,\" +\n\t\t\"image/tiff,tiff tif,\" +\n\t\t\"text/plain,asc txt text diff log,\" +\n\t\t\"text/html,htm html xhtml,\" +\n\t\t\"text/css,css,\" +\n\t\t\"text/csv,csv,\" +\n\t\t\"text/rtf,rtf,\" +\n\t\t\"video/mpeg,mpeg mpg mpe m2v,\" +\n\t\t\"video/quicktime,qt mov,\" +\n\t\t\"video/mp4,mp4,\" +\n\t\t\"video/x-m4v,m4v,\" +\n\t\t\"video/x-flv,flv,\" +\n\t\t\"video/x-ms-wmv,wmv,\" +\n\t\t\"video/avi,avi,\" +\n\t\t\"video/webm,webm,\" +\n\t\t\"video/3gpp,3gpp 3gp,\" +\n\t\t\"video/3gpp2,3g2,\" +\n\t\t\"video/vnd.rn-realvideo,rv,\" +\n\t\t\"video/ogg,ogv,\" + \n\t\t\"video/x-matroska,mkv,\" +\n\t\t\"application/vnd.oasis.opendocument.formula-template,otf,\" +\n\t\t\"application/octet-stream,exe\";\n\t\n\t\n\tvar Mime = {\n\n\t\tmimes: {},\n\n\t\textensions: {},\n\n\t\t// Parses the default mime types string into a mimes and extensions lookup maps\n\t\taddMimeType: function (mimeData) {\n\t\t\tvar items = mimeData.split(/,/), i, ii, ext;\n\t\t\t\n\t\t\tfor (i = 0; i < items.length; i += 2) {\n\t\t\t\text = items[i + 1].split(/ /);\n\n\t\t\t\t// extension to mime lookup\n\t\t\t\tfor (ii = 0; ii < ext.length; ii++) {\n\t\t\t\t\tthis.mimes[ext[ii]] = items[i];\n\t\t\t\t}\n\t\t\t\t// mime to extension lookup\n\t\t\t\tthis.extensions[items[i]] = ext;\n\t\t\t}\n\t\t},\n\n\n\t\textList2mimes: function (filters, addMissingExtensions) {\n\t\t\tvar self = this, ext, i, ii, type, mimes = [];\n\t\t\t\n\t\t\t// convert extensions to mime types list\n\t\t\tfor (i = 0; i < filters.length; i++) {\n\t\t\t\text = filters[i].extensions.split(/\\s*,\\s*/);\n\n\t\t\t\tfor (ii = 0; ii < ext.length; ii++) {\n\t\t\t\t\t\n\t\t\t\t\t// if there's an asterisk in the list, then accept attribute is not required\n\t\t\t\t\tif (ext[ii] === '*') {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\ttype = self.mimes[ext[ii]];\n\t\t\t\t\tif (!type) {\n\t\t\t\t\t\tif (addMissingExtensions && /^\\w+$/.test(ext[ii])) {\n\t\t\t\t\t\t\tmimes.push('.' + ext[ii]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn []; // accept all\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (Basic.inArray(type, mimes) === -1) {\n\t\t\t\t\t\tmimes.push(type);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn mimes;\n\t\t},\n\n\n\t\tmimes2exts: function(mimes) {\n\t\t\tvar self = this, exts = [];\n\t\t\t\n\t\t\tBasic.each(mimes, function(mime) {\n\t\t\t\tif (mime === '*') {\n\t\t\t\t\texts = [];\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// check if this thing looks like mime type\n\t\t\t\tvar m = mime.match(/^(\\w+)\\/(\\*|\\w+)$/);\n\t\t\t\tif (m) {\n\t\t\t\t\tif (m[2] === '*') { \n\t\t\t\t\t\t// wildcard mime type detected\n\t\t\t\t\t\tBasic.each(self.extensions, function(arr, mime) {\n\t\t\t\t\t\t\tif ((new RegExp('^' + m[1] + '/')).test(mime)) {\n\t\t\t\t\t\t\t\t[].push.apply(exts, self.extensions[mime]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (self.extensions[mime]) {\n\t\t\t\t\t\t[].push.apply(exts, self.extensions[mime]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn exts;\n\t\t},\n\n\n\t\tmimes2extList: function(mimes) {\n\t\t\tvar accept = [], exts = [];\n\n\t\t\tif (Basic.typeOf(mimes) === 'string') {\n\t\t\t\tmimes = Basic.trim(mimes).split(/\\s*,\\s*/);\n\t\t\t}\n\n\t\t\texts = this.mimes2exts(mimes);\n\t\t\t\n\t\t\taccept.push({\n\t\t\t\ttitle: I18n.translate('Files'),\n\t\t\t\textensions: exts.length ? exts.join(',') : '*'\n\t\t\t});\n\t\t\t\n\t\t\t// save original mimes string\n\t\t\taccept.mimes = mimes;\n\n\t\t\treturn accept;\n\t\t},\n\n\n\t\tgetFileExtension: function(fileName) {\n\t\t\tvar matches = fileName && fileName.match(/\\.([^.]+)$/);\n\t\t\tif (matches) {\n\t\t\t\treturn matches[1].toLowerCase();\n\t\t\t}\n\t\t\treturn '';\n\t\t},\n\n\t\tgetFileMime: function(fileName) {\n\t\t\treturn this.mimes[this.getFileExtension(fileName)] || '';\n\t\t}\n\t};\n\n\tMime.addMimeType(mimeData);\n\n\treturn Mime;\n});\n\n// Included from: src/javascript/core/utils/Env.js\n\n/**\n * Env.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine(\"moxie/core/utils/Env\", [\n\t\"moxie/core/utils/Basic\"\n], function(Basic) {\n\t\n\t// UAParser.js v0.6.2\n\t// Lightweight JavaScript-based User-Agent string parser\n\t// https://github.com/faisalman/ua-parser-js\n\t//\n\t// Copyright © 2012-2013 Faisalman <fyzlman@gmail.com>\n\t// Dual licensed under GPLv2 & MIT\n\n\tvar UAParser = (function (undefined) {\n\n\t    //////////////\n\t    // Constants\n\t    /////////////\n\n\n\t    var EMPTY       = '',\n\t        UNKNOWN     = '?',\n\t        FUNC_TYPE   = 'function',\n\t        UNDEF_TYPE  = 'undefined',\n\t        OBJ_TYPE    = 'object',\n\t        MAJOR       = 'major',\n\t        MODEL       = 'model',\n\t        NAME        = 'name',\n\t        TYPE        = 'type',\n\t        VENDOR      = 'vendor',\n\t        VERSION     = 'version',\n\t        ARCHITECTURE= 'architecture',\n\t        CONSOLE     = 'console',\n\t        MOBILE      = 'mobile',\n\t        TABLET      = 'tablet';\n\n\n\t    ///////////\n\t    // Helper\n\t    //////////\n\n\n\t    var util = {\n\t        has : function (str1, str2) {\n\t            return str2.toLowerCase().indexOf(str1.toLowerCase()) !== -1;\n\t        },\n\t        lowerize : function (str) {\n\t            return str.toLowerCase();\n\t        }\n\t    };\n\n\n\t    ///////////////\n\t    // Map helper\n\t    //////////////\n\n\n\t    var mapper = {\n\n\t        rgx : function () {\n\n\t            // loop through all regexes maps\n\t            for (var result, i = 0, j, k, p, q, matches, match, args = arguments; i < args.length; i += 2) {\n\n\t                var regex = args[i],       // even sequence (0,2,4,..)\n\t                    props = args[i + 1];   // odd sequence (1,3,5,..)\n\n\t                // construct object barebones\n\t                if (typeof(result) === UNDEF_TYPE) {\n\t                    result = {};\n\t                    for (p in props) {\n\t                        q = props[p];\n\t                        if (typeof(q) === OBJ_TYPE) {\n\t                            result[q[0]] = undefined;\n\t                        } else {\n\t                            result[q] = undefined;\n\t                        }\n\t                    }\n\t                }\n\n\t                // try matching uastring with regexes\n\t                for (j = k = 0; j < regex.length; j++) {\n\t                    matches = regex[j].exec(this.getUA());\n\t                    if (!!matches) {\n\t                        for (p = 0; p < props.length; p++) {\n\t                            match = matches[++k];\n\t                            q = props[p];\n\t                            // check if given property is actually array\n\t                            if (typeof(q) === OBJ_TYPE && q.length > 0) {\n\t                                if (q.length == 2) {\n\t                                    if (typeof(q[1]) == FUNC_TYPE) {\n\t                                        // assign modified match\n\t                                        result[q[0]] = q[1].call(this, match);\n\t                                    } else {\n\t                                        // assign given value, ignore regex match\n\t                                        result[q[0]] = q[1];\n\t                                    }\n\t                                } else if (q.length == 3) {\n\t                                    // check whether function or regex\n\t                                    if (typeof(q[1]) === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n\t                                        // call function (usually string mapper)\n\t                                        result[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n\t                                    } else {\n\t                                        // sanitize match using given regex\n\t                                        result[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n\t                                    }\n\t                                } else if (q.length == 4) {\n\t                                        result[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n\t                                }\n\t                            } else {\n\t                                result[q] = match ? match : undefined;\n\t                            }\n\t                        }\n\t                        break;\n\t                    }\n\t                }\n\n\t                if(!!matches) break; // break the loop immediately if match found\n\t            }\n\t            return result;\n\t        },\n\n\t        str : function (str, map) {\n\n\t            for (var i in map) {\n\t                // check if array\n\t                if (typeof(map[i]) === OBJ_TYPE && map[i].length > 0) {\n\t                    for (var j = 0; j < map[i].length; j++) {\n\t                        if (util.has(map[i][j], str)) {\n\t                            return (i === UNKNOWN) ? undefined : i;\n\t                        }\n\t                    }\n\t                } else if (util.has(map[i], str)) {\n\t                    return (i === UNKNOWN) ? undefined : i;\n\t                }\n\t            }\n\t            return str;\n\t        }\n\t    };\n\n\n\t    ///////////////\n\t    // String map\n\t    //////////////\n\n\n\t    var maps = {\n\n\t        browser : {\n\t            oldsafari : {\n\t                major : {\n\t                    '1' : ['/8', '/1', '/3'],\n\t                    '2' : '/4',\n\t                    '?' : '/'\n\t                },\n\t                version : {\n\t                    '1.0'   : '/8',\n\t                    '1.2'   : '/1',\n\t                    '1.3'   : '/3',\n\t                    '2.0'   : '/412',\n\t                    '2.0.2' : '/416',\n\t                    '2.0.3' : '/417',\n\t                    '2.0.4' : '/419',\n\t                    '?'     : '/'\n\t                }\n\t            }\n\t        },\n\n\t        device : {\n\t            sprint : {\n\t                model : {\n\t                    'Evo Shift 4G' : '7373KT'\n\t                },\n\t                vendor : {\n\t                    'HTC'       : 'APA',\n\t                    'Sprint'    : 'Sprint'\n\t                }\n\t            }\n\t        },\n\n\t        os : {\n\t            windows : {\n\t                version : {\n\t                    'ME'        : '4.90',\n\t                    'NT 3.11'   : 'NT3.51',\n\t                    'NT 4.0'    : 'NT4.0',\n\t                    '2000'      : 'NT 5.0',\n\t                    'XP'        : ['NT 5.1', 'NT 5.2'],\n\t                    'Vista'     : 'NT 6.0',\n\t                    '7'         : 'NT 6.1',\n\t                    '8'         : 'NT 6.2',\n\t                    '8.1'       : 'NT 6.3',\n\t                    'RT'        : 'ARM'\n\t                }\n\t            }\n\t        }\n\t    };\n\n\n\t    //////////////\n\t    // Regex map\n\t    /////////////\n\n\n\t    var regexes = {\n\n\t        browser : [[\n\n\t            // Presto based\n\t            /(opera\\smini)\\/((\\d+)?[\\w\\.-]+)/i,                                 // Opera Mini\n\t            /(opera\\s[mobiletab]+).+version\\/((\\d+)?[\\w\\.-]+)/i,                // Opera Mobi/Tablet\n\t            /(opera).+version\\/((\\d+)?[\\w\\.]+)/i,                               // Opera > 9.80\n\t            /(opera)[\\/\\s]+((\\d+)?[\\w\\.]+)/i                                    // Opera < 9.80\n\t            \n\t            ], [NAME, VERSION, MAJOR], [\n\n\t            /\\s(opr)\\/((\\d+)?[\\w\\.]+)/i                                         // Opera Webkit\n\t            ], [[NAME, 'Opera'], VERSION, MAJOR], [\n\n\t            // Mixed\n\t            /(kindle)\\/((\\d+)?[\\w\\.]+)/i,                                       // Kindle\n\t            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/\\s]?((\\d+)?[\\w\\.]+)*/i,\n\t                                                                                // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n\n\t            // Trident based\n\t            /(avant\\s|iemobile|slim|baidu)(?:browser)?[\\/\\s]?((\\d+)?[\\w\\.]*)/i,\n\t                                                                                // Avant/IEMobile/SlimBrowser/Baidu\n\t            /(?:ms|\\()(ie)\\s((\\d+)?[\\w\\.]+)/i,                                  // Internet Explorer\n\n\t            // Webkit/KHTML based\n\t            /(rekonq)((?:\\/)[\\w\\.]+)*/i,                                        // Rekonq\n\t            /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\\/((\\d+)?[\\w\\.-]+)/i\n\t                                                                                // Chromium/Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron\n\t            ], [NAME, VERSION, MAJOR], [\n\n\t            /(trident).+rv[:\\s]((\\d+)?[\\w\\.]+).+like\\sgecko/i                   // IE11\n\t            ], [[NAME, 'IE'], VERSION, MAJOR], [\n\n\t            /(yabrowser)\\/((\\d+)?[\\w\\.]+)/i                                     // Yandex\n\t            ], [[NAME, 'Yandex'], VERSION, MAJOR], [\n\n\t            /(comodo_dragon)\\/((\\d+)?[\\w\\.]+)/i                                 // Comodo Dragon\n\t            ], [[NAME, /_/g, ' '], VERSION, MAJOR], [\n\n\t            /(chrome|omniweb|arora|[tizenoka]{5}\\s?browser)\\/v?((\\d+)?[\\w\\.]+)/i\n\t                                                                                // Chrome/OmniWeb/Arora/Tizen/Nokia\n\t            ], [NAME, VERSION, MAJOR], [\n\n\t            /(dolfin)\\/((\\d+)?[\\w\\.]+)/i                                        // Dolphin\n\t            ], [[NAME, 'Dolphin'], VERSION, MAJOR], [\n\n\t            /((?:android.+)crmo|crios)\\/((\\d+)?[\\w\\.]+)/i                       // Chrome for Android/iOS\n\t            ], [[NAME, 'Chrome'], VERSION, MAJOR], [\n\n\t            /((?:android.+))version\\/((\\d+)?[\\w\\.]+)\\smobile\\ssafari/i          // Android Browser\n\t            ], [[NAME, 'Android Browser'], VERSION, MAJOR], [\n\n\t            /version\\/((\\d+)?[\\w\\.]+).+?mobile\\/\\w+\\s(safari)/i                 // Mobile Safari\n\t            ], [VERSION, MAJOR, [NAME, 'Mobile Safari']], [\n\n\t            /version\\/((\\d+)?[\\w\\.]+).+?(mobile\\s?safari|safari)/i              // Safari & Safari Mobile\n\t            ], [VERSION, MAJOR, NAME], [\n\n\t            /webkit.+?(mobile\\s?safari|safari)((\\/[\\w\\.]+))/i                   // Safari < 3.0\n\t            ], [NAME, [MAJOR, mapper.str, maps.browser.oldsafari.major], [VERSION, mapper.str, maps.browser.oldsafari.version]], [\n\n\t            /(konqueror)\\/((\\d+)?[\\w\\.]+)/i,                                    // Konqueror\n\t            /(webkit|khtml)\\/((\\d+)?[\\w\\.]+)/i\n\t            ], [NAME, VERSION, MAJOR], [\n\n\t            // Gecko based\n\t            /(navigator|netscape)\\/((\\d+)?[\\w\\.-]+)/i                           // Netscape\n\t            ], [[NAME, 'Netscape'], VERSION, MAJOR], [\n\t            /(swiftfox)/i,                                                      // Swiftfox\n\t            /(icedragon|iceweasel|camino|chimera|fennec|maemo\\sbrowser|minimo|conkeror)[\\/\\s]?((\\d+)?[\\w\\.\\+]+)/i,\n\t                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n\t            /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\\/((\\d+)?[\\w\\.-]+)/i,\n\t                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n\t            /(mozilla)\\/((\\d+)?[\\w\\.]+).+rv\\:.+gecko\\/\\d+/i,                    // Mozilla\n\n\t            // Other\n\t            /(uc\\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|qqbrowser)[\\/\\s]?((\\d+)?[\\w\\.]+)/i,\n\t                                                                                // UCBrowser/Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/QQBrowser\n\t            /(links)\\s\\(((\\d+)?[\\w\\.]+)/i,                                      // Links\n\t            /(gobrowser)\\/?((\\d+)?[\\w\\.]+)*/i,                                  // GoBrowser\n\t            /(ice\\s?browser)\\/v?((\\d+)?[\\w\\._]+)/i,                             // ICE Browser\n\t            /(mosaic)[\\/\\s]((\\d+)?[\\w\\.]+)/i                                    // Mosaic\n\t            ], [NAME, VERSION, MAJOR]\n\t        ],\n\n\t        engine : [[\n\n\t            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n\t            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\\/([\\w\\.]+)/i,     // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m\n\t            /(khtml|tasman|links)[\\/\\s]\\(?([\\w\\.]+)/i,                          // KHTML/Tasman/Links\n\t            /(icab)[\\/\\s]([23]\\.[\\d\\.]+)/i                                      // iCab\n\t            ], [NAME, VERSION], [\n\n\t            /rv\\:([\\w\\.]+).*(gecko)/i                                           // Gecko\n\t            ], [VERSION, NAME]\n\t        ],\n\n\t        os : [[\n\n\t            // Windows based\n\t            /(windows)\\snt\\s6\\.2;\\s(arm)/i,                                     // Windows RT\n\t            /(windows\\sphone(?:\\sos)*|windows\\smobile|windows)[\\s\\/]?([ntce\\d\\.\\s]+\\w)/i\n\t            ], [NAME, [VERSION, mapper.str, maps.os.windows.version]], [\n\t            /(win(?=3|9|n)|win\\s9x\\s)([nt\\d\\.]+)/i\n\t            ], [[NAME, 'Windows'], [VERSION, mapper.str, maps.os.windows.version]], [\n\n\t            // Mobile/Embedded OS\n\t            /\\((bb)(10);/i                                                      // BlackBerry 10\n\t            ], [[NAME, 'BlackBerry'], VERSION], [\n\t            /(blackberry)\\w*\\/?([\\w\\.]+)*/i,                                    // Blackberry\n\t            /(tizen)\\/([\\w\\.]+)/i,                                              // Tizen\n\t            /(android|webos|palm\\os|qnx|bada|rim\\stablet\\sos|meego)[\\/\\s-]?([\\w\\.]+)*/i\n\t                                                                                // Android/WebOS/Palm/QNX/Bada/RIM/MeeGo\n\t            ], [NAME, VERSION], [\n\t            /(symbian\\s?os|symbos|s60(?=;))[\\/\\s-]?([\\w\\.]+)*/i                 // Symbian\n\t            ], [[NAME, 'Symbian'], VERSION],[\n\t            /mozilla.+\\(mobile;.+gecko.+firefox/i                               // Firefox OS\n\t            ], [[NAME, 'Firefox OS'], VERSION], [\n\n\t            // Console\n\t            /(nintendo|playstation)\\s([wids3portablevu]+)/i,                    // Nintendo/Playstation\n\n\t            // GNU/Linux based\n\t            /(mint)[\\/\\s\\(]?(\\w+)*/i,                                           // Mint\n\t            /(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\\/\\s-]?([\\w\\.-]+)*/i,\n\t                                                                                // Joli/Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware\n\t                                                                                // Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk\n\t            /(hurd|linux)\\s?([\\w\\.]+)*/i,                                       // Hurd/Linux\n\t            /(gnu)\\s?([\\w\\.]+)*/i                                               // GNU\n\t            ], [NAME, VERSION], [\n\n\t            /(cros)\\s[\\w]+\\s([\\w\\.]+\\w)/i                                       // Chromium OS\n\t            ], [[NAME, 'Chromium OS'], VERSION],[\n\n\t            // Solaris\n\t            /(sunos)\\s?([\\w\\.]+\\d)*/i                                           // Solaris\n\t            ], [[NAME, 'Solaris'], VERSION], [\n\n\t            // BSD based\n\t            /\\s([frentopc-]{0,4}bsd|dragonfly)\\s?([\\w\\.]+)*/i                   // FreeBSD/NetBSD/OpenBSD/PC-BSD/DragonFly\n\t            ], [NAME, VERSION],[\n\n\t            /(ip[honead]+)(?:.*os\\s*([\\w]+)*\\slike\\smac|;\\sopera)/i             // iOS\n\t            ], [[NAME, 'iOS'], [VERSION, /_/g, '.']], [\n\n\t            /(mac\\sos\\sx)\\s?([\\w\\s\\.]+\\w)*/i                                    // Mac OS\n\t            ], [NAME, [VERSION, /_/g, '.']], [\n\n\t            // Other\n\t            /(haiku)\\s(\\w+)/i,                                                  // Haiku\n\t            /(aix)\\s((\\d)(?=\\.|\\)|\\s)[\\w\\.]*)*/i,                               // AIX\n\t            /(macintosh|mac(?=_powerpc)|plan\\s9|minix|beos|os\\/2|amigaos|morphos|risc\\sos)/i,\n\t                                                                                // Plan9/Minix/BeOS/OS2/AmigaOS/MorphOS/RISCOS\n\t            /(unix)\\s?([\\w\\.]+)*/i                                              // UNIX\n\t            ], [NAME, VERSION]\n\t        ]\n\t    };\n\n\n\t    /////////////////\n\t    // Constructor\n\t    ////////////////\n\n\n\t    var UAParser = function (uastring) {\n\n\t        var ua = uastring || ((window && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);\n\n\t        this.getBrowser = function () {\n\t            return mapper.rgx.apply(this, regexes.browser);\n\t        };\n\t        this.getEngine = function () {\n\t            return mapper.rgx.apply(this, regexes.engine);\n\t        };\n\t        this.getOS = function () {\n\t            return mapper.rgx.apply(this, regexes.os);\n\t        };\n\t        this.getResult = function() {\n\t            return {\n\t                ua      : this.getUA(),\n\t                browser : this.getBrowser(),\n\t                engine  : this.getEngine(),\n\t                os      : this.getOS()\n\t            };\n\t        };\n\t        this.getUA = function () {\n\t            return ua;\n\t        };\n\t        this.setUA = function (uastring) {\n\t            ua = uastring;\n\t            return this;\n\t        };\n\t        this.setUA(ua);\n\t    };\n\n\t    return new UAParser().getResult();\n\t})();\n\n\n\tfunction version_compare(v1, v2, operator) {\n\t  // From: http://phpjs.org/functions\n\t  // +      original by: Philippe Jausions (http://pear.php.net/user/jausions)\n\t  // +      original by: Aidan Lister (http://aidanlister.com/)\n\t  // + reimplemented by: Kankrelune (http://www.webfaktory.info/)\n\t  // +      improved by: Brett Zamir (http://brett-zamir.me)\n\t  // +      improved by: Scott Baker\n\t  // +      improved by: Theriault\n\t  // *        example 1: version_compare('8.2.5rc', '8.2.5a');\n\t  // *        returns 1: 1\n\t  // *        example 2: version_compare('8.2.50', '8.2.52', '<');\n\t  // *        returns 2: true\n\t  // *        example 3: version_compare('5.3.0-dev', '5.3.0');\n\t  // *        returns 3: -1\n\t  // *        example 4: version_compare('4.1.0.52','4.01.0.51');\n\t  // *        returns 4: 1\n\n\t  // Important: compare must be initialized at 0.\n\t  var i = 0,\n\t    x = 0,\n\t    compare = 0,\n\t    // vm maps textual PHP versions to negatives so they're less than 0.\n\t    // PHP currently defines these as CASE-SENSITIVE. It is important to\n\t    // leave these as negatives so that they can come before numerical versions\n\t    // and as if no letters were there to begin with.\n\t    // (1alpha is < 1 and < 1.1 but > 1dev1)\n\t    // If a non-numerical value can't be mapped to this table, it receives\n\t    // -7 as its value.\n\t    vm = {\n\t      'dev': -6,\n\t      'alpha': -5,\n\t      'a': -5,\n\t      'beta': -4,\n\t      'b': -4,\n\t      'RC': -3,\n\t      'rc': -3,\n\t      '#': -2,\n\t      'p': 1,\n\t      'pl': 1\n\t    },\n\t    // This function will be called to prepare each version argument.\n\t    // It replaces every _, -, and + with a dot.\n\t    // It surrounds any nonsequence of numbers/dots with dots.\n\t    // It replaces sequences of dots with a single dot.\n\t    //    version_compare('4..0', '4.0') == 0\n\t    // Important: A string of 0 length needs to be converted into a value\n\t    // even less than an unexisting value in vm (-7), hence [-8].\n\t    // It's also important to not strip spaces because of this.\n\t    //   version_compare('', ' ') == 1\n\t    prepVersion = function (v) {\n\t      v = ('' + v).replace(/[_\\-+]/g, '.');\n\t      v = v.replace(/([^.\\d]+)/g, '.$1.').replace(/\\.{2,}/g, '.');\n\t      return (!v.length ? [-8] : v.split('.'));\n\t    },\n\t    // This converts a version component to a number.\n\t    // Empty component becomes 0.\n\t    // Non-numerical component becomes a negative number.\n\t    // Numerical component becomes itself as an integer.\n\t    numVersion = function (v) {\n\t      return !v ? 0 : (isNaN(v) ? vm[v] || -7 : parseInt(v, 10));\n\t    };\n\n\t  v1 = prepVersion(v1);\n\t  v2 = prepVersion(v2);\n\t  x = Math.max(v1.length, v2.length);\n\t  for (i = 0; i < x; i++) {\n\t    if (v1[i] == v2[i]) {\n\t      continue;\n\t    }\n\t    v1[i] = numVersion(v1[i]);\n\t    v2[i] = numVersion(v2[i]);\n\t    if (v1[i] < v2[i]) {\n\t      compare = -1;\n\t      break;\n\t    } else if (v1[i] > v2[i]) {\n\t      compare = 1;\n\t      break;\n\t    }\n\t  }\n\t  if (!operator) {\n\t    return compare;\n\t  }\n\n\t  // Important: operator is CASE-SENSITIVE.\n\t  // \"No operator\" seems to be treated as \"<.\"\n\t  // Any other values seem to make the function return null.\n\t  switch (operator) {\n\t  case '>':\n\t  case 'gt':\n\t    return (compare > 0);\n\t  case '>=':\n\t  case 'ge':\n\t    return (compare >= 0);\n\t  case '<=':\n\t  case 'le':\n\t    return (compare <= 0);\n\t  case '==':\n\t  case '=':\n\t  case 'eq':\n\t    return (compare === 0);\n\t  case '<>':\n\t  case '!=':\n\t  case 'ne':\n\t    return (compare !== 0);\n\t  case '':\n\t  case '<':\n\t  case 'lt':\n\t    return (compare < 0);\n\t  default:\n\t    return null;\n\t  }\n\t}\n\n\n\tvar can = (function() {\n\t\tvar caps = {\n\t\t\t\tdefine_property: (function() {\n\t\t\t\t\t/* // currently too much extra code required, not exactly worth it\n\t\t\t\t\ttry { // as of IE8, getters/setters are supported only on DOM elements\n\t\t\t\t\t\tvar obj = {};\n\t\t\t\t\t\tif (Object.defineProperty) {\n\t\t\t\t\t\t\tObject.defineProperty(obj, 'prop', {\n\t\t\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(ex) {}\n\n\t\t\t\t\tif (Object.prototype.__defineGetter__ && Object.prototype.__defineSetter__) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}*/\n\t\t\t\t\treturn false;\n\t\t\t\t}()),\n\n\t\t\t\tcreate_canvas: (function() {\n\t\t\t\t\t// On the S60 and BB Storm, getContext exists, but always returns undefined\n\t\t\t\t\t// so we actually have to call getContext() to verify\n\t\t\t\t\t// github.com/Modernizr/Modernizr/issues/issue/97/\n\t\t\t\t\tvar el = document.createElement('canvas');\n\t\t\t\t\treturn !!(el.getContext && el.getContext('2d'));\n\t\t\t\t}()),\n\n\t\t\t\treturn_response_type: function(responseType) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (Basic.inArray(responseType, ['', 'text', 'document']) !== -1) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t} else if (window.XMLHttpRequest) {\n\t\t\t\t\t\t\tvar xhr = new XMLHttpRequest();\n\t\t\t\t\t\t\txhr.open('get', '/'); // otherwise Gecko throws an exception\n\t\t\t\t\t\t\tif ('responseType' in xhr) {\n\t\t\t\t\t\t\t\txhr.responseType = responseType;\n\t\t\t\t\t\t\t\t// as of 23.0.1271.64, Chrome switched from throwing exception to merely logging it to the console (why? o why?)\n\t\t\t\t\t\t\t\tif (xhr.responseType !== responseType) {\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (ex) {}\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\n\t\t\t\t// ideas for this heavily come from Modernizr (http://modernizr.com/)\n\t\t\t\tuse_data_uri: (function() {\n\t\t\t\t\tvar du = new Image();\n\n\t\t\t\t\tdu.onload = function() {\n\t\t\t\t\t\tcaps.use_data_uri = (du.width === 1 && du.height === 1);\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tdu.src = \"data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\";\n\t\t\t\t\t}, 1);\n\t\t\t\t\treturn false;\n\t\t\t\t}()),\n\n\t\t\t\tuse_data_uri_over32kb: function() { // IE8\n\t\t\t\t\treturn caps.use_data_uri && (Env.browser !== 'IE' || Env.version >= 9);\n\t\t\t\t},\n\n\t\t\t\tuse_data_uri_of: function(bytes) {\n\t\t\t\t\treturn (caps.use_data_uri && bytes < 33000 || caps.use_data_uri_over32kb());\n\t\t\t\t},\n\n\t\t\t\tuse_fileinput: function() {\n\t\t\t\t\tvar el = document.createElement('input');\n\t\t\t\t\tel.setAttribute('type', 'file');\n\t\t\t\t\treturn !el.disabled;\n\t\t\t\t}\n\t\t\t};\n\n\t\treturn function(cap) {\n\t\t\tvar args = [].slice.call(arguments);\n\t\t\targs.shift(); // shift of cap\n\t\t\treturn Basic.typeOf(caps[cap]) === 'function' ? caps[cap].apply(this, args) : !!caps[cap];\n\t\t};\n\t}());\n\n\n\tvar Env = {\n\t\tcan: can,\n\t\t\n\t\tbrowser: UAParser.browser.name,\n\t\tversion: parseFloat(UAParser.browser.major),\n\t\tos: UAParser.os.name, // everybody intuitively types it in a lowercase for some reason\n\t\tosVersion: UAParser.os.version,\n\n\t\tverComp: version_compare,\n\t\t\n\t\tswf_url: \"../flash/Moxie.swf\",\n\t\txap_url: \"../silverlight/Moxie.xap\",\n\t\tglobal_event_dispatcher: \"moxie.core.EventTarget.instance.dispatchEvent\"\n\t};\n\n\t// for backward compatibility\n\t// @deprecated Use `Env.os` instead\n\tEnv.OS = Env.os;\n\n\treturn Env;\n});\n\n// Included from: src/javascript/core/utils/Dom.js\n\n/**\n * Dom.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/core/utils/Dom', ['moxie/core/utils/Env'], function(Env) {\n\n\t/**\n\tGet DOM Element by it's id.\n\n\t@method get\n\t@for Utils\n\t@param {String} id Identifier of the DOM Element\n\t@return {DOMElement}\n\t*/\n\tvar get = function(id) {\n\t\tif (typeof id !== 'string') {\n\t\t\treturn id;\n\t\t}\n\t\treturn document.getElementById(id);\n\t};\n\n\t/**\n\tChecks if specified DOM element has specified class.\n\n\t@method hasClass\n\t@static\n\t@param {Object} obj DOM element like object to add handler to.\n\t@param {String} name Class name\n\t*/\n\tvar hasClass = function(obj, name) {\n\t\tif (!obj.className) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar regExp = new RegExp(\"(^|\\\\s+)\"+name+\"(\\\\s+|$)\");\n\t\treturn regExp.test(obj.className);\n\t};\n\n\t/**\n\tAdds specified className to specified DOM element.\n\n\t@method addClass\n\t@static\n\t@param {Object} obj DOM element like object to add handler to.\n\t@param {String} name Class name\n\t*/\n\tvar addClass = function(obj, name) {\n\t\tif (!hasClass(obj, name)) {\n\t\t\tobj.className = !obj.className ? name : obj.className.replace(/\\s+$/, '') + ' ' + name;\n\t\t}\n\t};\n\n\t/**\n\tRemoves specified className from specified DOM element.\n\n\t@method removeClass\n\t@static\n\t@param {Object} obj DOM element like object to add handler to.\n\t@param {String} name Class name\n\t*/\n\tvar removeClass = function(obj, name) {\n\t\tif (obj.className) {\n\t\t\tvar regExp = new RegExp(\"(^|\\\\s+)\"+name+\"(\\\\s+|$)\");\n\t\t\tobj.className = obj.className.replace(regExp, function($0, $1, $2) {\n\t\t\t\treturn $1 === ' ' && $2 === ' ' ? ' ' : '';\n\t\t\t});\n\t\t}\n\t};\n\n\t/**\n\tReturns a given computed style of a DOM element.\n\n\t@method getStyle\n\t@static\n\t@param {Object} obj DOM element like object.\n\t@param {String} name Style you want to get from the DOM element\n\t*/\n\tvar getStyle = function(obj, name) {\n\t\tif (obj.currentStyle) {\n\t\t\treturn obj.currentStyle[name];\n\t\t} else if (window.getComputedStyle) {\n\t\t\treturn window.getComputedStyle(obj, null)[name];\n\t\t}\n\t};\n\n\n\t/**\n\tReturns the absolute x, y position of an Element. The position will be returned in a object with x, y fields.\n\n\t@method getPos\n\t@static\n\t@param {Element} node HTML element or element id to get x, y position from.\n\t@param {Element} root Optional root element to stop calculations at.\n\t@return {object} Absolute position of the specified element object with x, y fields.\n\t*/\n\tvar getPos = function(node, root) {\n\t\tvar x = 0, y = 0, parent, doc = document, nodeRect, rootRect;\n\n\t\tnode = node;\n\t\troot = root || doc.body;\n\n\t\t// Returns the x, y cordinate for an element on IE 6 and IE 7\n\t\tfunction getIEPos(node) {\n\t\t\tvar bodyElm, rect, x = 0, y = 0;\n\n\t\t\tif (node) {\n\t\t\t\trect = node.getBoundingClientRect();\n\t\t\t\tbodyElm = doc.compatMode === \"CSS1Compat\" ? doc.documentElement : doc.body;\n\t\t\t\tx = rect.left + bodyElm.scrollLeft;\n\t\t\t\ty = rect.top + bodyElm.scrollTop;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tx : x,\n\t\t\t\ty : y\n\t\t\t};\n\t\t}\n\n\t\t// Use getBoundingClientRect on IE 6 and IE 7 but not on IE 8 in standards mode\n\t\tif (node && node.getBoundingClientRect && Env.browser === 'IE' && (!doc.documentMode || doc.documentMode < 8)) {\n\t\t\tnodeRect = getIEPos(node);\n\t\t\trootRect = getIEPos(root);\n\n\t\t\treturn {\n\t\t\t\tx : nodeRect.x - rootRect.x,\n\t\t\t\ty : nodeRect.y - rootRect.y\n\t\t\t};\n\t\t}\n\n\t\tparent = node;\n\t\twhile (parent && parent != root && parent.nodeType) {\n\t\t\tx += parent.offsetLeft || 0;\n\t\t\ty += parent.offsetTop || 0;\n\t\t\tparent = parent.offsetParent;\n\t\t}\n\n\t\tparent = node.parentNode;\n\t\twhile (parent && parent != root && parent.nodeType) {\n\t\t\tx -= parent.scrollLeft || 0;\n\t\t\ty -= parent.scrollTop || 0;\n\t\t\tparent = parent.parentNode;\n\t\t}\n\n\t\treturn {\n\t\t\tx : x,\n\t\t\ty : y\n\t\t};\n\t};\n\n\t/**\n\tReturns the size of the specified node in pixels.\n\n\t@method getSize\n\t@static\n\t@param {Node} node Node to get the size of.\n\t@return {Object} Object with a w and h property.\n\t*/\n\tvar getSize = function(node) {\n\t\treturn {\n\t\t\tw : node.offsetWidth || node.clientWidth,\n\t\t\th : node.offsetHeight || node.clientHeight\n\t\t};\n\t};\n\n\treturn {\n\t\tget: get,\n\t\thasClass: hasClass,\n\t\taddClass: addClass,\n\t\tremoveClass: removeClass,\n\t\tgetStyle: getStyle,\n\t\tgetPos: getPos,\n\t\tgetSize: getSize\n\t};\n});\n\n// Included from: src/javascript/core/Exceptions.js\n\n/**\n * Exceptions.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/core/Exceptions', [\n\t'moxie/core/utils/Basic'\n], function(Basic) {\n\tfunction _findKey(obj, value) {\n\t\tvar key;\n\t\tfor (key in obj) {\n\t\t\tif (obj[key] === value) {\n\t\t\t\treturn key;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tRuntimeError: (function() {\n\t\t\tvar namecodes = {\n\t\t\t\tNOT_INIT_ERR: 1,\n\t\t\t\tNOT_SUPPORTED_ERR: 9,\n\t\t\t\tJS_ERR: 4\n\t\t\t};\n\n\t\t\tfunction RuntimeError(code) {\n\t\t\t\tthis.code = code;\n\t\t\t\tthis.name = _findKey(namecodes, code);\n\t\t\t\tthis.message = this.name + \": RuntimeError \" + this.code;\n\t\t\t}\n\t\t\t\n\t\t\tBasic.extend(RuntimeError, namecodes);\n\t\t\tRuntimeError.prototype = Error.prototype;\n\t\t\treturn RuntimeError;\n\t\t}()),\n\t\t\n\t\tOperationNotAllowedException: (function() {\n\t\t\t\n\t\t\tfunction OperationNotAllowedException(code) {\n\t\t\t\tthis.code = code;\n\t\t\t\tthis.name = 'OperationNotAllowedException';\n\t\t\t}\n\t\t\t\n\t\t\tBasic.extend(OperationNotAllowedException, {\n\t\t\t\tNOT_ALLOWED_ERR: 1\n\t\t\t});\n\t\t\t\n\t\t\tOperationNotAllowedException.prototype = Error.prototype;\n\t\t\t\n\t\t\treturn OperationNotAllowedException;\n\t\t}()),\n\n\t\tImageError: (function() {\n\t\t\tvar namecodes = {\n\t\t\t\tWRONG_FORMAT: 1,\n\t\t\t\tMAX_RESOLUTION_ERR: 2\n\t\t\t};\n\n\t\t\tfunction ImageError(code) {\n\t\t\t\tthis.code = code;\n\t\t\t\tthis.name = _findKey(namecodes, code);\n\t\t\t\tthis.message = this.name + \": ImageError \" + this.code;\n\t\t\t}\n\t\t\t\n\t\t\tBasic.extend(ImageError, namecodes);\n\t\t\tImageError.prototype = Error.prototype;\n\n\t\t\treturn ImageError;\n\t\t}()),\n\n\t\tFileException: (function() {\n\t\t\tvar namecodes = {\n\t\t\t\tNOT_FOUND_ERR: 1,\n\t\t\t\tSECURITY_ERR: 2,\n\t\t\t\tABORT_ERR: 3,\n\t\t\t\tNOT_READABLE_ERR: 4,\n\t\t\t\tENCODING_ERR: 5,\n\t\t\t\tNO_MODIFICATION_ALLOWED_ERR: 6,\n\t\t\t\tINVALID_STATE_ERR: 7,\n\t\t\t\tSYNTAX_ERR: 8\n\t\t\t};\n\n\t\t\tfunction FileException(code) {\n\t\t\t\tthis.code = code;\n\t\t\t\tthis.name = _findKey(namecodes, code);\n\t\t\t\tthis.message = this.name + \": FileException \" + this.code;\n\t\t\t}\n\t\t\t\n\t\t\tBasic.extend(FileException, namecodes);\n\t\t\tFileException.prototype = Error.prototype;\n\t\t\treturn FileException;\n\t\t}()),\n\t\t\n\t\tDOMException: (function() {\n\t\t\tvar namecodes = {\n\t\t\t\tINDEX_SIZE_ERR: 1,\n\t\t\t\tDOMSTRING_SIZE_ERR: 2,\n\t\t\t\tHIERARCHY_REQUEST_ERR: 3,\n\t\t\t\tWRONG_DOCUMENT_ERR: 4,\n\t\t\t\tINVALID_CHARACTER_ERR: 5,\n\t\t\t\tNO_DATA_ALLOWED_ERR: 6,\n\t\t\t\tNO_MODIFICATION_ALLOWED_ERR: 7,\n\t\t\t\tNOT_FOUND_ERR: 8,\n\t\t\t\tNOT_SUPPORTED_ERR: 9,\n\t\t\t\tINUSE_ATTRIBUTE_ERR: 10,\n\t\t\t\tINVALID_STATE_ERR: 11,\n\t\t\t\tSYNTAX_ERR: 12,\n\t\t\t\tINVALID_MODIFICATION_ERR: 13,\n\t\t\t\tNAMESPACE_ERR: 14,\n\t\t\t\tINVALID_ACCESS_ERR: 15,\n\t\t\t\tVALIDATION_ERR: 16,\n\t\t\t\tTYPE_MISMATCH_ERR: 17,\n\t\t\t\tSECURITY_ERR: 18,\n\t\t\t\tNETWORK_ERR: 19,\n\t\t\t\tABORT_ERR: 20,\n\t\t\t\tURL_MISMATCH_ERR: 21,\n\t\t\t\tQUOTA_EXCEEDED_ERR: 22,\n\t\t\t\tTIMEOUT_ERR: 23,\n\t\t\t\tINVALID_NODE_TYPE_ERR: 24,\n\t\t\t\tDATA_CLONE_ERR: 25\n\t\t\t};\n\n\t\t\tfunction DOMException(code) {\n\t\t\t\tthis.code = code;\n\t\t\t\tthis.name = _findKey(namecodes, code);\n\t\t\t\tthis.message = this.name + \": DOMException \" + this.code;\n\t\t\t}\n\t\t\t\n\t\t\tBasic.extend(DOMException, namecodes);\n\t\t\tDOMException.prototype = Error.prototype;\n\t\t\treturn DOMException;\n\t\t}()),\n\t\t\n\t\tEventException: (function() {\n\t\t\tfunction EventException(code) {\n\t\t\t\tthis.code = code;\n\t\t\t\tthis.name = 'EventException';\n\t\t\t}\n\t\t\t\n\t\t\tBasic.extend(EventException, {\n\t\t\t\tUNSPECIFIED_EVENT_TYPE_ERR: 0\n\t\t\t});\n\t\t\t\n\t\t\tEventException.prototype = Error.prototype;\n\t\t\t\n\t\t\treturn EventException;\n\t\t}())\n\t};\n});\n\n// Included from: src/javascript/core/EventTarget.js\n\n/**\n * EventTarget.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/core/EventTarget', [\n\t'moxie/core/Exceptions',\n\t'moxie/core/utils/Basic'\n], function(x, Basic) {\n\t/**\n\tParent object for all event dispatching components and objects\n\n\t@class EventTarget\n\t@constructor EventTarget\n\t*/\n\tfunction EventTarget() {\n\t\t// hash of event listeners by object uid\n\t\tvar eventpool = {};\n\t\t\t\t\n\t\tBasic.extend(this, {\n\t\t\t\n\t\t\t/**\n\t\t\tUnique id of the event dispatcher, usually overriden by children\n\n\t\t\t@property uid\n\t\t\t@type String\n\t\t\t*/\n\t\t\tuid: null,\n\t\t\t\n\t\t\t/**\n\t\t\tCan be called from within a child  in order to acquire uniqie id in automated manner\n\n\t\t\t@method init\n\t\t\t*/\n\t\t\tinit: function() {\n\t\t\t\tif (!this.uid) {\n\t\t\t\t\tthis.uid = Basic.guid('uid_');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\tRegister a handler to a specific event dispatched by the object\n\n\t\t\t@method addEventListener\n\t\t\t@param {String} type Type or basically a name of the event to subscribe to\n\t\t\t@param {Function} fn Callback function that will be called when event happens\n\t\t\t@param {Number} [priority=0] Priority of the event handler - handlers with higher priorities will be called first\n\t\t\t@param {Object} [scope=this] A scope to invoke event handler in\n\t\t\t*/\n\t\t\taddEventListener: function(type, fn, priority, scope) {\n\t\t\t\tvar self = this, list;\n\t\t\t\t\n\t\t\t\ttype = Basic.trim(type);\n\t\t\t\t\n\t\t\t\tif (/\\s/.test(type)) {\n\t\t\t\t\t// multiple event types were passed for one handler\n\t\t\t\t\tBasic.each(type.split(/\\s+/), function(type) {\n\t\t\t\t\t\tself.addEventListener(type, fn, priority, scope);\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttype = type.toLowerCase();\n\t\t\t\tpriority = parseInt(priority, 10) || 0;\n\t\t\t\t\n\t\t\t\tlist = eventpool[this.uid] && eventpool[this.uid][type] || [];\n\t\t\t\tlist.push({fn : fn, priority : priority, scope : scope || this});\n\t\t\t\t\n\t\t\t\tif (!eventpool[this.uid]) {\n\t\t\t\t\teventpool[this.uid] = {};\n\t\t\t\t}\n\t\t\t\teventpool[this.uid][type] = list;\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tCheck if any handlers were registered to the specified event\n\n\t\t\t@method hasEventListener\n\t\t\t@param {String} type Type or basically a name of the event to check\n\t\t\t@return {Mixed} Returns a handler if it was found and false, if - not\n\t\t\t*/\n\t\t\thasEventListener: function(type) {\n\t\t\t\treturn type ? !!(eventpool[this.uid] && eventpool[this.uid][type]) : !!eventpool[this.uid];\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tUnregister the handler from the event, or if former was not specified - unregister all handlers\n\n\t\t\t@method removeEventListener\n\t\t\t@param {String} type Type or basically a name of the event\n\t\t\t@param {Function} [fn] Handler to unregister\n\t\t\t*/\n\t\t\tremoveEventListener: function(type, fn) {\n\t\t\t\ttype = type.toLowerCase();\n\t\n\t\t\t\tvar list = eventpool[this.uid] && eventpool[this.uid][type], i;\n\t\n\t\t\t\tif (list) {\n\t\t\t\t\tif (fn) {\n\t\t\t\t\t\tfor (i = list.length - 1; i >= 0; i--) {\n\t\t\t\t\t\t\tif (list[i].fn === fn) {\n\t\t\t\t\t\t\t\tlist.splice(i, 1);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlist = [];\n\t\t\t\t\t}\n\t\n\t\t\t\t\t// delete event list if it has become empty\n\t\t\t\t\tif (!list.length) {\n\t\t\t\t\t\tdelete eventpool[this.uid][type];\n\t\t\t\t\t\t\n\t\t\t\t\t\t// and object specific entry in a hash if it has no more listeners attached\n\t\t\t\t\t\tif (Basic.isEmptyObj(eventpool[this.uid])) {\n\t\t\t\t\t\t\tdelete eventpool[this.uid];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tRemove all event handlers from the object\n\n\t\t\t@method removeAllEventListeners\n\t\t\t*/\n\t\t\tremoveAllEventListeners: function() {\n\t\t\t\tif (eventpool[this.uid]) {\n\t\t\t\t\tdelete eventpool[this.uid];\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tDispatch the event\n\n\t\t\t@method dispatchEvent\n\t\t\t@param {String/Object} Type of event or event object to dispatch\n\t\t\t@param {Mixed} [...] Variable number of arguments to be passed to a handlers\n\t\t\t@return {Boolean} true by default and false if any handler returned false\n\t\t\t*/\n\t\t\tdispatchEvent: function(type) {\n\t\t\t\tvar uid, list, args, tmpEvt, evt = {}, result = true, undef;\n\t\t\t\t\n\t\t\t\tif (Basic.typeOf(type) !== 'string') {\n\t\t\t\t\t// we can't use original object directly (because of Silverlight)\n\t\t\t\t\ttmpEvt = type;\n\n\t\t\t\t\tif (Basic.typeOf(tmpEvt.type) === 'string') {\n\t\t\t\t\t\ttype = tmpEvt.type;\n\n\t\t\t\t\t\tif (tmpEvt.total !== undef && tmpEvt.loaded !== undef) { // progress event\n\t\t\t\t\t\t\tevt.total = tmpEvt.total;\n\t\t\t\t\t\t\tevt.loaded = tmpEvt.loaded;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevt.async = tmpEvt.async || false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new x.EventException(x.EventException.UNSPECIFIED_EVENT_TYPE_ERR);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// check if event is meant to be dispatched on an object having specific uid\n\t\t\t\tif (type.indexOf('::') !== -1) {\n\t\t\t\t\t(function(arr) {\n\t\t\t\t\t\tuid = arr[0];\n\t\t\t\t\t\ttype = arr[1];\n\t\t\t\t\t}(type.split('::')));\n\t\t\t\t} else {\n\t\t\t\t\tuid = this.uid;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttype = type.toLowerCase();\n\t\t\t\t\t\t\t\t\n\t\t\t\tlist = eventpool[uid] && eventpool[uid][type];\n\n\t\t\t\tif (list) {\n\t\t\t\t\t// sort event list by prority\n\t\t\t\t\tlist.sort(function(a, b) { return b.priority - a.priority; });\n\t\t\t\t\t\n\t\t\t\t\targs = [].slice.call(arguments);\n\t\t\t\t\t\n\t\t\t\t\t// first argument will be pseudo-event object\n\t\t\t\t\targs.shift();\n\t\t\t\t\tevt.type = type;\n\t\t\t\t\targs.unshift(evt);\n\n\t\t\t\t\t// Dispatch event to all listeners\n\t\t\t\t\tvar queue = [];\n\t\t\t\t\tBasic.each(list, function(handler) {\n\t\t\t\t\t\t// explicitly set the target, otherwise events fired from shims do not get it\n\t\t\t\t\t\targs[0].target = handler.scope;\n\t\t\t\t\t\t// if event is marked as async, detach the handler\n\t\t\t\t\t\tif (evt.async) {\n\t\t\t\t\t\t\tqueue.push(function(cb) {\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\tcb(handler.fn.apply(handler.scope, args) === false);\n\t\t\t\t\t\t\t\t}, 1);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tqueue.push(function(cb) {\n\t\t\t\t\t\t\t\tcb(handler.fn.apply(handler.scope, args) === false); // if handler returns false stop propagation\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (queue.length) {\n\t\t\t\t\t\tBasic.inSeries(queue, function(err) {\n\t\t\t\t\t\t\tresult = !err;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tAlias for addEventListener\n\n\t\t\t@method bind\n\t\t\t@protected\n\t\t\t*/\n\t\t\tbind: function() {\n\t\t\t\tthis.addEventListener.apply(this, arguments);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tAlias for removeEventListener\n\n\t\t\t@method unbind\n\t\t\t@protected\n\t\t\t*/\n\t\t\tunbind: function() {\n\t\t\t\tthis.removeEventListener.apply(this, arguments);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tAlias for removeAllEventListeners\n\n\t\t\t@method unbindAll\n\t\t\t@protected\n\t\t\t*/\n\t\t\tunbindAll: function() {\n\t\t\t\tthis.removeAllEventListeners.apply(this, arguments);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tAlias for dispatchEvent\n\n\t\t\t@method trigger\n\t\t\t@protected\n\t\t\t*/\n\t\t\ttrigger: function() {\n\t\t\t\treturn this.dispatchEvent.apply(this, arguments);\n\t\t\t},\n\t\t\t\n\t\t\t\n\t\t\t/**\n\t\t\tConverts properties of on[event] type to corresponding event handlers,\n\t\t\tis used to avoid extra hassle around the process of calling them back\n\n\t\t\t@method convertEventPropsToHandlers\n\t\t\t@private\n\t\t\t*/\n\t\t\tconvertEventPropsToHandlers: function(handlers) {\n\t\t\t\tvar h;\n\t\t\t\t\t\t\n\t\t\t\tif (Basic.typeOf(handlers) !== 'array') {\n\t\t\t\t\thandlers = [handlers];\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < handlers.length; i++) {\n\t\t\t\t\th = 'on' + handlers[i];\n\t\t\t\t\t\n\t\t\t\t\tif (Basic.typeOf(this[h]) === 'function') {\n\t\t\t\t\t\tthis.addEventListener(handlers[i], this[h]);\n\t\t\t\t\t} else if (Basic.typeOf(this[h]) === 'undefined') {\n\t\t\t\t\t\tthis[h] = null; // object must have defined event properties, even if it doesn't make use of them\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t});\n\t}\n\n\tEventTarget.instance = new EventTarget(); \n\n\treturn EventTarget;\n});\n\n// Included from: src/javascript/core/utils/Encode.js\n\n/**\n * Encode.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/core/utils/Encode', [], function() {\n\n\t/**\n\tEncode string with UTF-8\n\n\t@method utf8_encode\n\t@for Utils\n\t@static\n\t@param {String} str String to encode\n\t@return {String} UTF-8 encoded string\n\t*/\n\tvar utf8_encode = function(str) {\n\t\treturn unescape(encodeURIComponent(str));\n\t};\n\t\n\t/**\n\tDecode UTF-8 encoded string\n\n\t@method utf8_decode\n\t@static\n\t@param {String} str String to decode\n\t@return {String} Decoded string\n\t*/\n\tvar utf8_decode = function(str_data) {\n\t\treturn decodeURIComponent(escape(str_data));\n\t};\n\t\n\t/**\n\tDecode Base64 encoded string (uses browser's default method if available),\n\tfrom: https://raw.github.com/kvz/phpjs/master/functions/url/base64_decode.js\n\n\t@method atob\n\t@static\n\t@param {String} data String to decode\n\t@return {String} Decoded string\n\t*/\n\tvar atob = function(data, utf8) {\n\t\tif (typeof(window.atob) === 'function') {\n\t\t\treturn utf8 ? utf8_decode(window.atob(data)) : window.atob(data);\n\t\t}\n\n\t\t// http://kevin.vanzonneveld.net\n\t\t// +   original by: Tyler Akins (http://rumkin.com)\n\t\t// +   improved by: Thunder.m\n\t\t// +      input by: Aman Gupta\n\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t\t// +   bugfixed by: Onno Marsman\n\t\t// +   bugfixed by: Pellentesque Malesuada\n\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t\t// +      input by: Brett Zamir (http://brett-zamir.me)\n\t\t// +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t\t// *     example 1: base64_decode('S2V2aW4gdmFuIFpvbm5ldmVsZA==');\n\t\t// *     returns 1: 'Kevin van Zonneveld'\n\t\t// mozilla has this native\n\t\t// - but breaks in 2.0.0.12!\n\t\t//if (typeof this.window.atob == 'function') {\n\t\t//    return atob(data);\n\t\t//}\n\t\tvar b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\t\tvar o1, o2, o3, h1, h2, h3, h4, bits, i = 0,\n\t\t\tac = 0,\n\t\t\tdec = \"\",\n\t\t\ttmp_arr = [];\n\n\t\tif (!data) {\n\t\t\treturn data;\n\t\t}\n\n\t\tdata += '';\n\n\t\tdo { // unpack four hexets into three octets using index points in b64\n\t\t\th1 = b64.indexOf(data.charAt(i++));\n\t\t\th2 = b64.indexOf(data.charAt(i++));\n\t\t\th3 = b64.indexOf(data.charAt(i++));\n\t\t\th4 = b64.indexOf(data.charAt(i++));\n\n\t\t\tbits = h1 << 18 | h2 << 12 | h3 << 6 | h4;\n\n\t\t\to1 = bits >> 16 & 0xff;\n\t\t\to2 = bits >> 8 & 0xff;\n\t\t\to3 = bits & 0xff;\n\n\t\t\tif (h3 == 64) {\n\t\t\t\ttmp_arr[ac++] = String.fromCharCode(o1);\n\t\t\t} else if (h4 == 64) {\n\t\t\t\ttmp_arr[ac++] = String.fromCharCode(o1, o2);\n\t\t\t} else {\n\t\t\t\ttmp_arr[ac++] = String.fromCharCode(o1, o2, o3);\n\t\t\t}\n\t\t} while (i < data.length);\n\n\t\tdec = tmp_arr.join('');\n\n\t\treturn utf8 ? utf8_decode(dec) : dec;\n\t};\n\t\n\t/**\n\tBase64 encode string (uses browser's default method if available),\n\tfrom: https://raw.github.com/kvz/phpjs/master/functions/url/base64_encode.js\n\n\t@method btoa\n\t@static\n\t@param {String} data String to encode\n\t@return {String} Base64 encoded string\n\t*/\n\tvar btoa = function(data, utf8) {\n\t\tif (utf8) {\n\t\t\tutf8_encode(data);\n\t\t}\n\n\t\tif (typeof(window.btoa) === 'function') {\n\t\t\treturn window.btoa(data);\n\t\t}\n\n\t\t// http://kevin.vanzonneveld.net\n\t\t// +   original by: Tyler Akins (http://rumkin.com)\n\t\t// +   improved by: Bayron Guevara\n\t\t// +   improved by: Thunder.m\n\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t\t// +   bugfixed by: Pellentesque Malesuada\n\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t\t// +   improved by: Rafał Kukawski (http://kukawski.pl)\n\t\t// *     example 1: base64_encode('Kevin van Zonneveld');\n\t\t// *     returns 1: 'S2V2aW4gdmFuIFpvbm5ldmVsZA=='\n\t\t// mozilla has this native\n\t\t// - but breaks in 2.0.0.12!\n\t\tvar b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\t\tvar o1, o2, o3, h1, h2, h3, h4, bits, i = 0,\n\t\t\tac = 0,\n\t\t\tenc = \"\",\n\t\t\ttmp_arr = [];\n\n\t\tif (!data) {\n\t\t\treturn data;\n\t\t}\n\n\t\tdo { // pack three octets into four hexets\n\t\t\to1 = data.charCodeAt(i++);\n\t\t\to2 = data.charCodeAt(i++);\n\t\t\to3 = data.charCodeAt(i++);\n\n\t\t\tbits = o1 << 16 | o2 << 8 | o3;\n\n\t\t\th1 = bits >> 18 & 0x3f;\n\t\t\th2 = bits >> 12 & 0x3f;\n\t\t\th3 = bits >> 6 & 0x3f;\n\t\t\th4 = bits & 0x3f;\n\n\t\t\t// use hexets to index into b64, and append result to encoded string\n\t\t\ttmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n\t\t} while (i < data.length);\n\n\t\tenc = tmp_arr.join('');\n\n\t\tvar r = data.length % 3;\n\n\t\treturn (r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3);\n\t};\n\n\n\treturn {\n\t\tutf8_encode: utf8_encode,\n\t\tutf8_decode: utf8_decode,\n\t\tatob: atob,\n\t\tbtoa: btoa\n\t};\n});\n\n// Included from: src/javascript/runtime/Runtime.js\n\n/**\n * Runtime.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/runtime/Runtime', [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/EventTarget\"\n], function(Basic, Dom, EventTarget) {\n\tvar runtimeConstructors = {}, runtimes = {};\n\n\t/**\n\tCommon set of methods and properties for every runtime instance\n\n\t@class Runtime\n\n\t@param {Object} options\n\t@param {String} type Sanitized name of the runtime\n\t@param {Object} [caps] Set of capabilities that differentiate specified runtime\n\t@param {Object} [modeCaps] Set of capabilities that do require specific operational mode\n\t@param {String} [preferredMode='browser'] Preferred operational mode to choose if no required capabilities were requested\n\t*/\n\tfunction Runtime(options, type, caps, modeCaps, preferredMode) {\n\t\t/**\n\t\tDispatched when runtime is initialized and ready.\n\t\tResults in RuntimeInit on a connected component.\n\n\t\t@event Init\n\t\t*/\n\n\t\t/**\n\t\tDispatched when runtime fails to initialize.\n\t\tResults in RuntimeError on a connected component.\n\n\t\t@event Error\n\t\t*/\n\n\t\tvar self = this\n\t\t, _shim\n\t\t, _uid = Basic.guid(type + '_')\n\t\t, defaultMode = preferredMode || 'browser'\n\t\t;\n\n\t\toptions = options || {};\n\n\t\t// register runtime in private hash\n\t\truntimes[_uid] = this;\n\n\t\t/**\n\t\tDefault set of capabilities, which can be redifined later by specific runtime\n\n\t\t@private\n\t\t@property caps\n\t\t@type Object\n\t\t*/\n\t\tcaps = Basic.extend({\n\t\t\t// Runtime can: \n\t\t\t// provide access to raw binary data of the file\n\t\t\taccess_binary: false,\n\t\t\t// provide access to raw binary data of the image (image extension is optional) \n\t\t\taccess_image_binary: false,\n\t\t\t// display binary data as thumbs for example\n\t\t\tdisplay_media: false,\n\t\t\t// make cross-domain requests\n\t\t\tdo_cors: false,\n\t\t\t// accept files dragged and dropped from the desktop\n\t\t\tdrag_and_drop: false,\n\t\t\t// filter files in selection dialog by their extensions\n\t\t\tfilter_by_extension: true,\n\t\t\t// resize image (and manipulate it raw data of any file in general)\n\t\t\tresize_image: false,\n\t\t\t// periodically report how many bytes of total in the file were uploaded (loaded)\n\t\t\treport_upload_progress: false,\n\t\t\t// provide access to the headers of http response \n\t\t\treturn_response_headers: false,\n\t\t\t// support response of specific type, which should be passed as an argument\n\t\t\t// e.g. runtime.can('return_response_type', 'blob')\n\t\t\treturn_response_type: false,\n\t\t\t// return http status code of the response\n\t\t\treturn_status_code: true,\n\t\t\t// send custom http header with the request\n\t\t\tsend_custom_headers: false,\n\t\t\t// pick up the files from a dialog\n\t\t\tselect_file: false,\n\t\t\t// select whole folder in file browse dialog\n\t\t\tselect_folder: false,\n\t\t\t// select multiple files at once in file browse dialog\n\t\t\tselect_multiple: true,\n\t\t\t// send raw binary data, that is generated after image resizing or manipulation of other kind\n\t\t\tsend_binary_string: false,\n\t\t\t// send cookies with http request and therefore retain session\n\t\t\tsend_browser_cookies: true,\n\t\t\t// send data formatted as multipart/form-data\n\t\t\tsend_multipart: true,\n\t\t\t// slice the file or blob to smaller parts\n\t\t\tslice_blob: false,\n\t\t\t// upload file without preloading it to memory, stream it out directly from disk\n\t\t\tstream_upload: false,\n\t\t\t// programmatically trigger file browse dialog\n\t\t\tsummon_file_dialog: false,\n\t\t\t// upload file of specific size, size should be passed as argument\n\t\t\t// e.g. runtime.can('upload_filesize', '500mb')\n\t\t\tupload_filesize: true,\n\t\t\t// initiate http request with specific http method, method should be passed as argument\n\t\t\t// e.g. runtime.can('use_http_method', 'put')\n\t\t\tuse_http_method: true\n\t\t}, caps);\n\t\t\t\n\t\n\t\t// default to the mode that is compatible with preferred caps\n\t\tif (options.preferred_caps) {\n\t\t\tdefaultMode = Runtime.getMode(modeCaps, options.preferred_caps, defaultMode);\n\t\t}\n\t\t\n\t\t// small extension factory here (is meant to be extended with actual extensions constructors)\n\t\t_shim = (function() {\n\t\t\tvar objpool = {};\n\t\t\treturn {\n\t\t\t\texec: function(uid, comp, fn, args) {\n\t\t\t\t\tif (_shim[comp]) {\n\t\t\t\t\t\tif (!objpool[uid]) {\n\t\t\t\t\t\t\tobjpool[uid] = {\n\t\t\t\t\t\t\t\tcontext: this,\n\t\t\t\t\t\t\t\tinstance: new _shim[comp]()\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (objpool[uid].instance[fn]) {\n\t\t\t\t\t\t\treturn objpool[uid].instance[fn].apply(this, args);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tremoveInstance: function(uid) {\n\t\t\t\t\tdelete objpool[uid];\n\t\t\t\t},\n\n\t\t\t\tremoveAllInstances: function() {\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tBasic.each(objpool, function(obj, uid) {\n\t\t\t\t\t\tif (Basic.typeOf(obj.instance.destroy) === 'function') {\n\t\t\t\t\t\t\tobj.instance.destroy.call(obj.context);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.removeInstance(uid);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}());\n\n\n\t\t// public methods\n\t\tBasic.extend(this, {\n\t\t\t/**\n\t\t\tSpecifies whether runtime instance was initialized or not\n\n\t\t\t@property initialized\n\t\t\t@type {Boolean}\n\t\t\t@default false\n\t\t\t*/\n\t\t\tinitialized: false, // shims require this flag to stop initialization retries\n\n\t\t\t/**\n\t\t\tUnique ID of the runtime\n\n\t\t\t@property uid\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\tuid: _uid,\n\n\t\t\t/**\n\t\t\tRuntime type (e.g. flash, html5, etc)\n\n\t\t\t@property type\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\ttype: type,\n\n\t\t\t/**\n\t\t\tRuntime (not native one) may operate in browser or client mode.\n\n\t\t\t@property mode\n\t\t\t@private\n\t\t\t@type {String|Boolean} current mode or false, if none possible\n\t\t\t*/\n\t\t\tmode: Runtime.getMode(modeCaps, (options.required_caps), defaultMode),\n\n\t\t\t/**\n\t\t\tid of the DOM container for the runtime (if available)\n\n\t\t\t@property shimid\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\tshimid: _uid + '_container',\n\n\t\t\t/**\n\t\t\tNumber of connected clients. If equal to zero, runtime can be destroyed\n\n\t\t\t@property clients\n\t\t\t@type {Number}\n\t\t\t*/\n\t\t\tclients: 0,\n\n\t\t\t/**\n\t\t\tRuntime initialization options\n\n\t\t\t@property options\n\t\t\t@type {Object}\n\t\t\t*/\n\t\t\toptions: options,\n\n\t\t\t/**\n\t\t\tChecks if the runtime has specific capability\n\n\t\t\t@method can\n\t\t\t@param {String} cap Name of capability to check\n\t\t\t@param {Mixed} [value] If passed, capability should somehow correlate to the value\n\t\t\t@param {Object} [refCaps] Set of capabilities to check the specified cap against (defaults to internal set)\n\t\t\t@return {Boolean} true if runtime has such capability and false, if - not\n\t\t\t*/\n\t\t\tcan: function(cap, value) {\n\t\t\t\tvar refCaps = arguments[2] || caps;\n\n\t\t\t\t// if cap var is a comma-separated list of caps, convert it to object (key/value)\n\t\t\t\tif (Basic.typeOf(cap) === 'string' && Basic.typeOf(value) === 'undefined') {\n\t\t\t\t\tcap = Runtime.parseCaps(cap);\n\t\t\t\t}\n\n\t\t\t\tif (Basic.typeOf(cap) === 'object') {\n\t\t\t\t\tfor (var key in cap) {\n\t\t\t\t\t\tif (!this.can(key, cap[key], refCaps)) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t// check the individual cap\n\t\t\t\tif (Basic.typeOf(refCaps[cap]) === 'function') {\n\t\t\t\t\treturn refCaps[cap].call(this, value);\n\t\t\t\t} else {\n\t\t\t\t\treturn (value === refCaps[cap]);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\tReturns container for the runtime as DOM element\n\n\t\t\t@method getShimContainer\n\t\t\t@return {DOMElement}\n\t\t\t*/\n\t\t\tgetShimContainer: function() {\n\t\t\t\tvar container, shimContainer = Dom.get(this.shimid);\n\n\t\t\t\t// if no container for shim, create one\n\t\t\t\tif (!shimContainer) {\n\t\t\t\t\tcontainer = this.options.container ? Dom.get(this.options.container) : document.body;\n\n\t\t\t\t\t// create shim container and insert it at an absolute position into the outer container\n\t\t\t\t\tshimContainer = document.createElement('div');\n\t\t\t\t\tshimContainer.id = this.shimid;\n\t\t\t\t\tshimContainer.className = 'moxie-shim moxie-shim-' + this.type;\n\n\t\t\t\t\tBasic.extend(shimContainer.style, {\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\ttop: '0px',\n\t\t\t\t\t\tleft: '0px',\n\t\t\t\t\t\twidth: '1px',\n\t\t\t\t\t\theight: '1px',\n\t\t\t\t\t\toverflow: 'hidden'\n\t\t\t\t\t});\n\n\t\t\t\t\tcontainer.appendChild(shimContainer);\n\t\t\t\t\tcontainer = null;\n\t\t\t\t}\n\n\t\t\t\treturn shimContainer;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tReturns runtime as DOM element (if appropriate)\n\n\t\t\t@method getShim\n\t\t\t@return {DOMElement}\n\t\t\t*/\n\t\t\tgetShim: function() {\n\t\t\t\treturn _shim;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tInvokes a method within the runtime itself (might differ across the runtimes)\n\n\t\t\t@method shimExec\n\t\t\t@param {Mixed} []\n\t\t\t@protected\n\t\t\t@return {Mixed} Depends on the action and component\n\t\t\t*/\n\t\t\tshimExec: function(component, action) {\n\t\t\t\tvar args = [].slice.call(arguments, 2);\n\t\t\t\treturn self.getShim().exec.call(this, this.uid, component, action, args);\n\t\t\t},\n\n\t\t\t/**\n\t\t\tOperaional interface that is used by components to invoke specific actions on the runtime\n\t\t\t(is invoked in the scope of component)\n\n\t\t\t@method exec\n\t\t\t@param {Mixed} []*\n\t\t\t@protected\n\t\t\t@return {Mixed} Depends on the action and component\n\t\t\t*/\n\t\t\texec: function(component, action) { // this is called in the context of component, not runtime\n\t\t\t\tvar args = [].slice.call(arguments, 2);\n\n\t\t\t\tif (self[component] && self[component][action]) {\n\t\t\t\t\treturn self[component][action].apply(this, args);\n\t\t\t\t}\n\t\t\t\treturn self.shimExec.apply(this, arguments);\n\t\t\t},\n\n\t\t\t/**\n\t\t\tDestroys the runtime (removes all events and deletes DOM structures)\n\n\t\t\t@method destroy\n\t\t\t*/\n\t\t\tdestroy: function() {\n\t\t\t\tif (!self) {\n\t\t\t\t\treturn; // obviously already destroyed\n\t\t\t\t}\n\n\t\t\t\tvar shimContainer = Dom.get(this.shimid);\n\t\t\t\tif (shimContainer) {\n\t\t\t\t\tshimContainer.parentNode.removeChild(shimContainer);\n\t\t\t\t}\n\n\t\t\t\tif (_shim) {\n\t\t\t\t\t_shim.removeAllInstances();\n\t\t\t\t}\n\n\t\t\t\tthis.unbindAll();\n\t\t\t\tdelete runtimes[this.uid];\n\t\t\t\tthis.uid = null; // mark this runtime as destroyed\n\t\t\t\t_uid = self = _shim = shimContainer = null;\n\t\t\t}\n\t\t});\n\n\t\t// once we got the mode, test against all caps\n\t\tif (this.mode && options.required_caps && !this.can(options.required_caps)) {\n\t\t\tthis.mode = false;\n\t\t}\t\n\t}\n\n\n\t/**\n\tDefault order to try different runtime types\n\n\t@property order\n\t@type String\n\t@static\n\t*/\n\tRuntime.order = 'html5,flash,silverlight,html4';\n\n\n\t/**\n\tRetrieves runtime from private hash by it's uid\n\n\t@method getRuntime\n\t@private\n\t@static\n\t@param {String} uid Unique identifier of the runtime\n\t@return {Runtime|Boolean} Returns runtime, if it exists and false, if - not\n\t*/\n\tRuntime.getRuntime = function(uid) {\n\t\treturn runtimes[uid] ? runtimes[uid] : false;\n\t};\n\n\n\t/**\n\tRegister constructor for the Runtime of new (or perhaps modified) type\n\n\t@method addConstructor\n\t@static\n\t@param {String} type Runtime type (e.g. flash, html5, etc)\n\t@param {Function} construct Constructor for the Runtime type\n\t*/\n\tRuntime.addConstructor = function(type, constructor) {\n\t\tconstructor.prototype = EventTarget.instance;\n\t\truntimeConstructors[type] = constructor;\n\t};\n\n\n\t/**\n\tGet the constructor for the specified type.\n\n\tmethod getConstructor\n\t@static\n\t@param {String} type Runtime type (e.g. flash, html5, etc)\n\t@return {Function} Constructor for the Runtime type\n\t*/\n\tRuntime.getConstructor = function(type) {\n\t\treturn runtimeConstructors[type] || null;\n\t};\n\n\n\t/**\n\tGet info about the runtime (uid, type, capabilities)\n\n\t@method getInfo\n\t@static\n\t@param {String} uid Unique identifier of the runtime\n\t@return {Mixed} Info object or null if runtime doesn't exist\n\t*/\n\tRuntime.getInfo = function(uid) {\n\t\tvar runtime = Runtime.getRuntime(uid);\n\n\t\tif (runtime) {\n\t\t\treturn {\n\t\t\t\tuid: runtime.uid,\n\t\t\t\ttype: runtime.type,\n\t\t\t\tmode: runtime.mode,\n\t\t\t\tcan: function() {\n\t\t\t\t\treturn runtime.can.apply(runtime, arguments);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t};\n\n\n\t/**\n\tConvert caps represented by a comma-separated string to the object representation.\n\n\t@method parseCaps\n\t@static\n\t@param {String} capStr Comma-separated list of capabilities\n\t@return {Object}\n\t*/\n\tRuntime.parseCaps = function(capStr) {\n\t\tvar capObj = {};\n\n\t\tif (Basic.typeOf(capStr) !== 'string') {\n\t\t\treturn capStr || {};\n\t\t}\n\n\t\tBasic.each(capStr.split(','), function(key) {\n\t\t\tcapObj[key] = true; // we assume it to be - true\n\t\t});\n\n\t\treturn capObj;\n\t};\n\n\t/**\n\tTest the specified runtime for specific capabilities.\n\n\t@method can\n\t@static\n\t@param {String} type Runtime type (e.g. flash, html5, etc)\n\t@param {String|Object} caps Set of capabilities to check\n\t@return {Boolean} Result of the test\n\t*/\n\tRuntime.can = function(type, caps) {\n\t\tvar runtime\n\t\t, constructor = Runtime.getConstructor(type)\n\t\t, mode\n\t\t;\n\t\tif (constructor) {\n\t\t\truntime = new constructor({\n\t\t\t\trequired_caps: caps\n\t\t\t});\n\t\t\tmode = runtime.mode;\n\t\t\truntime.destroy();\n\t\t\treturn !!mode;\n\t\t}\n\t\treturn false;\n\t};\n\n\n\t/**\n\tFigure out a runtime that supports specified capabilities.\n\n\t@method thatCan\n\t@static\n\t@param {String|Object} caps Set of capabilities to check\n\t@param {String} [runtimeOrder] Comma-separated list of runtimes to check against\n\t@return {String} Usable runtime identifier or null\n\t*/\n\tRuntime.thatCan = function(caps, runtimeOrder) {\n\t\tvar types = (runtimeOrder || Runtime.order).split(/\\s*,\\s*/);\n\t\tfor (var i in types) {\n\t\t\tif (Runtime.can(types[i], caps)) {\n\t\t\t\treturn types[i];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\n\n\t/**\n\tFigure out an operational mode for the specified set of capabilities.\n\n\t@method getMode\n\t@static\n\t@param {Object} modeCaps Set of capabilities that depend on particular runtime mode\n\t@param {Object} [requiredCaps] Supplied set of capabilities to find operational mode for\n\t@param {String|Boolean} [defaultMode='browser'] Default mode to use \n\t@return {String|Boolean} Compatible operational mode\n\t*/\n\tRuntime.getMode = function(modeCaps, requiredCaps, defaultMode) {\n\t\tvar mode = null;\n\n\t\tif (Basic.typeOf(defaultMode) === 'undefined') { // only if not specified\n\t\t\tdefaultMode = 'browser';\n\t\t}\n\n\t\tif (requiredCaps && !Basic.isEmptyObj(modeCaps)) {\n\t\t\t// loop over required caps and check if they do require the same mode\n\t\t\tBasic.each(requiredCaps, function(value, cap) {\n\t\t\t\tif (modeCaps.hasOwnProperty(cap)) {\n\t\t\t\t\tvar capMode = modeCaps[cap](value);\n\n\t\t\t\t\t// make sure we always have an array\n\t\t\t\t\tif (typeof(capMode) === 'string') {\n\t\t\t\t\t\tcapMode = [capMode];\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (!mode) {\n\t\t\t\t\t\tmode = capMode;\n\t\t\t\t\t} else if (!(mode = Basic.arrayIntersect(mode, capMode))) {\n\t\t\t\t\t\t// if cap requires conflicting mode - runtime cannot fulfill required caps\n\t\t\t\t\t\treturn (mode = false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (mode) {\n\t\t\t\treturn Basic.inArray(defaultMode, mode) !== -1 ? defaultMode : mode[0];\n\t\t\t} else if (mode === false) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn defaultMode; \n\t};\n\n\n\t/**\n\tCapability check that always returns true\n\n\t@private\n\t@static\n\t@return {True}\n\t*/\n\tRuntime.capTrue = function() {\n\t\treturn true;\n\t};\n\n\t/**\n\tCapability check that always returns false\n\n\t@private\n\t@static\n\t@return {False}\n\t*/\n\tRuntime.capFalse = function() {\n\t\treturn false;\n\t};\n\n\t/**\n\tEvaluate the expression to boolean value and create a function that always returns it.\n\n\t@private\n\t@static\n\t@param {Mixed} expr Expression to evaluate\n\t@return {Function} Function returning the result of evaluation\n\t*/\n\tRuntime.capTest = function(expr) {\n\t\treturn function() {\n\t\t\treturn !!expr;\n\t\t};\n\t};\n\n\treturn Runtime;\n});\n\n// Included from: src/javascript/runtime/RuntimeClient.js\n\n/**\n * RuntimeClient.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/runtime/RuntimeClient', [\n\t'moxie/core/Exceptions',\n\t'moxie/core/utils/Basic',\n\t'moxie/runtime/Runtime'\n], function(x, Basic, Runtime) {\n\t/**\n\tSet of methods and properties, required by a component to acquire ability to connect to a runtime\n\n\t@class RuntimeClient\n\t*/\n\treturn function RuntimeClient() {\n\t\tvar runtime;\n\n\t\tBasic.extend(this, {\n\t\t\t/**\n\t\t\tConnects to the runtime specified by the options. Will either connect to existing runtime or create a new one.\n\t\t\tIncrements number of clients connected to the specified runtime.\n\n\t\t\t@method connectRuntime\n\t\t\t@param {Mixed} options Can be a runtme uid or a set of key-value pairs defining requirements and pre-requisites\n\t\t\t*/\n\t\t\tconnectRuntime: function(options) {\n\t\t\t\tvar comp = this, ruid;\n\n\t\t\t\tfunction initialize(items) {\n\t\t\t\t\tvar type, constructor;\n\n\t\t\t\t\t// if we ran out of runtimes\n\t\t\t\t\tif (!items.length) {\n\t\t\t\t\t\tcomp.trigger('RuntimeError', new x.RuntimeError(x.RuntimeError.NOT_INIT_ERR));\n\t\t\t\t\t\truntime = null;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\ttype = items.shift();\n\t\t\t\t\tconstructor = Runtime.getConstructor(type);\n\t\t\t\t\tif (!constructor) {\n\t\t\t\t\t\tinitialize(items);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// try initializing the runtime\n\t\t\t\t\truntime = new constructor(options);\n\n\t\t\t\t\truntime.bind('Init', function() {\n\t\t\t\t\t\t// mark runtime as initialized\n\t\t\t\t\t\truntime.initialized = true;\n\n\t\t\t\t\t\t// jailbreak ...\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\truntime.clients++;\n\t\t\t\t\t\t\t// this will be triggered on component\n\t\t\t\t\t\t\tcomp.trigger('RuntimeInit', runtime);\n\t\t\t\t\t\t}, 1);\n\t\t\t\t\t});\n\n\t\t\t\t\truntime.bind('Error', function() {\n\t\t\t\t\t\truntime.destroy(); // runtime cannot destroy itself from inside at a right moment, thus we do it here\n\t\t\t\t\t\tinitialize(items);\n\t\t\t\t\t});\n\n\t\t\t\t\t/*runtime.bind('Exception', function() { });*/\n\n\t\t\t\t\t// check if runtime managed to pick-up operational mode\n\t\t\t\t\tif (!runtime.mode) {\n\t\t\t\t\t\truntime.trigger('Error');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\truntime.init();\n\t\t\t\t}\n\n\t\t\t\t// check if a particular runtime was requested\n\t\t\t\tif (Basic.typeOf(options) === 'string') {\n\t\t\t\t\truid = options;\n\t\t\t\t} else if (Basic.typeOf(options.ruid) === 'string') {\n\t\t\t\t\truid = options.ruid;\n\t\t\t\t}\n\n\t\t\t\tif (ruid) {\n\t\t\t\t\truntime = Runtime.getRuntime(ruid);\n\t\t\t\t\tif (runtime) {\n\t\t\t\t\t\truntime.clients++;\n\t\t\t\t\t\treturn runtime;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// there should be a runtime and there's none - weird case\n\t\t\t\t\t\tthrow new x.RuntimeError(x.RuntimeError.NOT_INIT_ERR);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// initialize a fresh one, that fits runtime list and required features best\n\t\t\t\tinitialize((options.runtime_order || Runtime.order).split(/\\s*,\\s*/));\n\t\t\t},\n\n\t\t\t/**\n\t\t\tReturns the runtime to which the client is currently connected.\n\n\t\t\t@method getRuntime\n\t\t\t@return {Runtime} Runtime or null if client is not connected\n\t\t\t*/\n\t\t\tgetRuntime: function() {\n\t\t\t\tif (runtime && runtime.uid) {\n\t\t\t\t\treturn runtime;\n\t\t\t\t}\n\t\t\t\truntime = null; // make sure we do not leave zombies rambling around\n\t\t\t\treturn null;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tDisconnects from the runtime. Decrements number of clients connected to the specified runtime.\n\n\t\t\t@method disconnectRuntime\n\t\t\t*/\n\t\t\tdisconnectRuntime: function() {\n\t\t\t\tif (runtime && --runtime.clients <= 0) {\n\t\t\t\t\truntime.destroy();\n\t\t\t\t\truntime = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\t};\n\n\n});\n\n// Included from: src/javascript/file/Blob.js\n\n/**\n * Blob.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/file/Blob', [\n\t'moxie/core/utils/Basic',\n\t'moxie/core/utils/Encode',\n\t'moxie/runtime/RuntimeClient'\n], function(Basic, Encode, RuntimeClient) {\n\t\n\tvar blobpool = {};\n\n\t/**\n\t@class Blob\n\t@constructor\n\t@param {String} ruid Unique id of the runtime, to which this blob belongs to\n\t@param {Object} blob Object \"Native\" blob object, as it is represented in the runtime\n\t*/\n\tfunction Blob(ruid, blob) {\n\n\t\tfunction _sliceDetached(start, end, type) {\n\t\t\tvar blob, data = blobpool[this.uid];\n\n\t\t\tif (Basic.typeOf(data) !== 'string' || !data.length) {\n\t\t\t\treturn null; // or throw exception\n\t\t\t}\n\n\t\t\tblob = new Blob(null, {\n\t\t\t\ttype: type,\n\t\t\t\tsize: end - start\n\t\t\t});\n\t\t\tblob.detach(data.substr(start, blob.size));\n\n\t\t\treturn blob;\n\t\t}\n\n\t\tRuntimeClient.call(this);\n\n\t\tif (ruid) {\t\n\t\t\tthis.connectRuntime(ruid);\n\t\t}\n\n\t\tif (!blob) {\n\t\t\tblob = {};\n\t\t} else if (Basic.typeOf(blob) === 'string') { // dataUrl or binary string\n\t\t\tblob = { data: blob };\n\t\t}\n\n\t\tBasic.extend(this, {\n\t\t\t\n\t\t\t/**\n\t\t\tUnique id of the component\n\n\t\t\t@property uid\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\tuid: blob.uid || Basic.guid('uid_'),\n\t\t\t\n\t\t\t/**\n\t\t\tUnique id of the connected runtime, if falsy, then runtime will have to be initialized \n\t\t\tbefore this Blob can be used, modified or sent\n\n\t\t\t@property ruid\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\truid: ruid,\n\t\n\t\t\t/**\n\t\t\tSize of blob\n\n\t\t\t@property size\n\t\t\t@type {Number}\n\t\t\t@default 0\n\t\t\t*/\n\t\t\tsize: blob.size || 0,\n\t\t\t\n\t\t\t/**\n\t\t\tMime type of blob\n\n\t\t\t@property type\n\t\t\t@type {String}\n\t\t\t@default ''\n\t\t\t*/\n\t\t\ttype: blob.type || '',\n\t\t\t\n\t\t\t/**\n\t\t\t@method slice\n\t\t\t@param {Number} [start=0]\n\t\t\t*/\n\t\t\tslice: function(start, end, type) {\t\t\n\t\t\t\tif (this.isDetached()) {\n\t\t\t\t\treturn _sliceDetached.apply(this, arguments);\n\t\t\t\t}\n\t\t\t\treturn this.getRuntime().exec.call(this, 'Blob', 'slice', this.getSource(), start, end, type);\n\t\t\t},\n\n\t\t\t/**\n\t\t\tReturns \"native\" blob object (as it is represented in connected runtime) or null if not found\n\n\t\t\t@method getSource\n\t\t\t@return {Blob} Returns \"native\" blob object or null if not found\n\t\t\t*/\n\t\t\tgetSource: function() {\n\t\t\t\tif (!blobpool[this.uid]) {\n\t\t\t\t\treturn null;\t\n\t\t\t\t}\n\t\t\t\treturn blobpool[this.uid];\n\t\t\t},\n\n\t\t\t/** \n\t\t\tDetaches blob from any runtime that it depends on and initialize with standalone value\n\n\t\t\t@method detach\n\t\t\t@protected\n\t\t\t@param {DOMString} [data=''] Standalone value\n\t\t\t*/\n\t\t\tdetach: function(data) {\n\t\t\t\tif (this.ruid) {\n\t\t\t\t\tthis.getRuntime().exec.call(this, 'Blob', 'destroy');\n\t\t\t\t\tthis.disconnectRuntime();\n\t\t\t\t\tthis.ruid = null;\n\t\t\t\t}\n\n\t\t\t\tdata = data || '';\n\n\t\t\t\t// if dataUrl, convert to binary string\n\t\t\t\tvar matches = data.match(/^data:([^;]*);base64,/);\n\t\t\t\tif (matches) {\n\t\t\t\t\tthis.type = matches[1];\n\t\t\t\t\tdata = Encode.atob(data.substring(data.indexOf('base64,') + 7));\n\t\t\t\t}\n\n\t\t\t\tthis.size = data.length;\n\n\t\t\t\tblobpool[this.uid] = data;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tChecks if blob is standalone (detached of any runtime)\n\t\t\t\n\t\t\t@method isDetached\n\t\t\t@protected\n\t\t\t@return {Boolean}\n\t\t\t*/\n\t\t\tisDetached: function() {\n\t\t\t\treturn !this.ruid && Basic.typeOf(blobpool[this.uid]) === 'string';\n\t\t\t},\n\t\t\t\n\t\t\t/** \n\t\t\tDestroy Blob and free any resources it was using\n\n\t\t\t@method destroy\n\t\t\t*/\n\t\t\tdestroy: function() {\n\t\t\t\tthis.detach();\n\t\t\t\tdelete blobpool[this.uid];\n\t\t\t}\n\t\t});\n\n\t\t\n\t\tif (blob.data) {\n\t\t\tthis.detach(blob.data); // auto-detach if payload has been passed\n\t\t} else {\n\t\t\tblobpool[this.uid] = blob;\t\n\t\t}\n\t}\n\t\n\treturn Blob;\n});\n\n// Included from: src/javascript/file/File.js\n\n/**\n * File.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/file/File', [\n\t'moxie/core/utils/Basic',\n\t'moxie/core/utils/Mime',\n\t'moxie/file/Blob'\n], function(Basic, Mime, Blob) {\n\t/**\n\t@class File\n\t@extends Blob\n\t@constructor\n\t@param {String} ruid Unique id of the runtime, to which this blob belongs to\n\t@param {Object} file Object \"Native\" file object, as it is represented in the runtime\n\t*/\n\tfunction File(ruid, file) {\n\t\tvar name, type;\n\n\t\tif (!file) { // avoid extra errors in case we overlooked something\n\t\t\tfile = {};\n\t\t}\n\n\t\t// figure out the type\n\t\tif (file.type && file.type !== '') {\n\t\t\ttype = file.type;\n\t\t} else {\n\t\t\ttype = Mime.getFileMime(file.name);\n\t\t}\n\n\t\t// sanitize file name or generate new one\n\t\tif (file.name) {\n\t\t\tname = file.name.replace(/\\\\/g, '/');\n\t\t\tname = name.substr(name.lastIndexOf('/') + 1);\n\t\t} else {\n\t\t\tvar prefix = type.split('/')[0];\n\t\t\tname = Basic.guid((prefix !== '' ? prefix : 'file') + '_');\n\t\t\t\n\t\t\tif (Mime.extensions[type]) {\n\t\t\t\tname += '.' + Mime.extensions[type][0]; // append proper extension if possible\n\t\t\t}\n\t\t}\n\n\t\tBlob.apply(this, arguments);\n\t\t\n\t\tBasic.extend(this, {\n\t\t\t/**\n\t\t\tFile mime type\n\n\t\t\t@property type\n\t\t\t@type {String}\n\t\t\t@default ''\n\t\t\t*/\n\t\t\ttype: type || '',\n\n\t\t\t/**\n\t\t\tFile name\n\n\t\t\t@property name\n\t\t\t@type {String}\n\t\t\t@default UID\n\t\t\t*/\n\t\t\tname: name || Basic.guid('file_'),\n\t\t\t\n\t\t\t/**\n\t\t\tDate of last modification\n\n\t\t\t@property lastModifiedDate\n\t\t\t@type {String}\n\t\t\t@default now\n\t\t\t*/\n\t\t\tlastModifiedDate: file.lastModifiedDate || (new Date()).toLocaleString() // Thu Aug 23 2012 19:40:00 GMT+0400 (GET)\n\t\t});\n\t}\n\n\tFile.prototype = Blob.prototype;\n\n\treturn File;\n});\n\n// Included from: src/javascript/file/FileInput.js\n\n/**\n * FileInput.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/file/FileInput', [\n\t'moxie/core/utils/Basic',\n\t'moxie/core/utils/Mime',\n\t'moxie/core/utils/Dom',\n\t'moxie/core/Exceptions',\n\t'moxie/core/EventTarget',\n\t'moxie/core/I18n',\n\t'moxie/file/File',\n\t'moxie/runtime/Runtime',\n\t'moxie/runtime/RuntimeClient'\n], function(Basic, Mime, Dom, x, EventTarget, I18n, File, Runtime, RuntimeClient) {\n\t/**\n\tProvides a convenient way to create cross-browser file-picker. Generates file selection dialog on click,\n\tconverts selected files to _File_ objects, to be used in conjunction with _Image_, preloaded in memory\n\twith _FileReader_ or uploaded to a server through _XMLHttpRequest_.\n\n\t@class FileInput\n\t@constructor\n\t@extends EventTarget\n\t@uses RuntimeClient\n\t@param {Object|String|DOMElement} options If options is string or node, argument is considered as _browse\\_button_.\n\t\t@param {String|DOMElement} options.browse_button DOM Element to turn into file picker.\n\t\t@param {Array} [options.accept] Array of mime types to accept. By default accepts all.\n\t\t@param {String} [options.file='file'] Name of the file field (not the filename).\n\t\t@param {Boolean} [options.multiple=false] Enable selection of multiple files.\n\t\t@param {Boolean} [options.directory=false] Turn file input into the folder input (cannot be both at the same time).\n\t\t@param {String|DOMElement} [options.container] DOM Element to use as a container for file-picker. Defaults to parentNode \n\t\tfor _browse\\_button_.\n\t\t@param {Object|String} [options.required_caps] Set of required capabilities, that chosen runtime must support.\n\n\t@example\n\t\t<div id=\"container\">\n\t\t\t<a id=\"file-picker\" href=\"javascript:;\">Browse...</a>\n\t\t</div>\n\n\t\t<script>\n\t\t\tvar fileInput = new mOxie.FileInput({\n\t\t\t\tbrowse_button: 'file-picker', // or document.getElementById('file-picker')\n\t\t\t\tcontainer: 'container',\n\t\t\t\taccept: [\n\t\t\t\t\t{title: \"Image files\", extensions: \"jpg,gif,png\"} // accept only images\n\t\t\t\t],\n\t\t\t\tmultiple: true // allow multiple file selection\n\t\t\t});\n\n\t\t\tfileInput.onchange = function(e) {\n\t\t\t\t// do something to files array\n\t\t\t\tconsole.info(e.target.files); // or this.files or fileInput.files\n\t\t\t};\n\n\t\t\tfileInput.init(); // initialize\n\t\t</script>\n\t*/\n\tvar dispatches = [\n\t\t/**\n\t\tDispatched when runtime is connected and file-picker is ready to be used.\n\n\t\t@event ready\n\t\t@param {Object} event\n\t\t*/\n\t\t'ready',\n\n\t\t/**\n\t\tDispatched right after [ready](#event_ready) event, and whenever [refresh()](#method_refresh) is invoked. \n\t\tCheck [corresponding documentation entry](#method_refresh) for more info.\n\n\t\t@event refresh\n\t\t@param {Object} event\n\t\t*/\n\n\t\t/**\n\t\tDispatched when selection of files in the dialog is complete.\n\n\t\t@event change\n\t\t@param {Object} event\n\t\t*/\n\t\t'change',\n\n\t\t'cancel', // TODO: might be useful\n\n\t\t/**\n\t\tDispatched when mouse cursor enters file-picker area. Can be used to style element\n\t\taccordingly.\n\n\t\t@event mouseenter\n\t\t@param {Object} event\n\t\t*/\n\t\t'mouseenter',\n\n\t\t/**\n\t\tDispatched when mouse cursor leaves file-picker area. Can be used to style element\n\t\taccordingly.\n\n\t\t@event mouseleave\n\t\t@param {Object} event\n\t\t*/\n\t\t'mouseleave',\n\n\t\t/**\n\t\tDispatched when functional mouse button is pressed on top of file-picker area.\n\n\t\t@event mousedown\n\t\t@param {Object} event\n\t\t*/\n\t\t'mousedown',\n\n\t\t/**\n\t\tDispatched when functional mouse button is released on top of file-picker area.\n\n\t\t@event mouseup\n\t\t@param {Object} event\n\t\t*/\n\t\t'mouseup'\n\t];\n\n\tfunction FileInput(options) {\n\t\tvar self = this,\n\t\t\tcontainer, browseButton, defaults;\n\n\t\t// if flat argument passed it should be browse_button id\n\t\tif (Basic.inArray(Basic.typeOf(options), ['string', 'node']) !== -1) {\n\t\t\toptions = { browse_button : options };\n\t\t}\n\n\t\t// this will help us to find proper default container\n\t\tbrowseButton = Dom.get(options.browse_button);\n\t\tif (!browseButton) {\n\t\t\t// browse button is required\n\t\t\tthrow new x.DOMException(x.DOMException.NOT_FOUND_ERR);\n\t\t}\n\n\t\t// figure out the options\n\t\tdefaults = {\n\t\t\taccept: [{\n\t\t\t\ttitle: I18n.translate('All Files'),\n\t\t\t\textensions: '*'\n\t\t\t}],\n\t\t\tname: 'file',\n\t\t\tmultiple: false,\n\t\t\trequired_caps: false,\n\t\t\tcontainer: browseButton.parentNode || document.body\n\t\t};\n\t\t\n\t\toptions = Basic.extend({}, defaults, options);\n\n\t\t// convert to object representation\n\t\tif (typeof(options.required_caps) === 'string') {\n\t\t\toptions.required_caps = Runtime.parseCaps(options.required_caps);\n\t\t}\n\t\t\t\t\t\n\t\t// normalize accept option (could be list of mime types or array of title/extensions pairs)\n\t\tif (typeof(options.accept) === 'string') {\n\t\t\toptions.accept = Mime.mimes2extList(options.accept);\n\t\t}\n\n\t\tcontainer = Dom.get(options.container);\n\t\t// make sure we have container\n\t\tif (!container) {\n\t\t\tcontainer = document.body;\n\t\t}\n\n\t\t// make container relative, if it's not\n\t\tif (Dom.getStyle(container, 'position') === 'static') {\n\t\t\tcontainer.style.position = 'relative';\n\t\t}\n\n\t\tcontainer = browseButton = null; // IE\n\t\t\t\t\t\t\n\t\tRuntimeClient.call(self);\n\t\t\n\t\tBasic.extend(self, {\n\t\t\t/**\n\t\t\tUnique id of the component\n\n\t\t\t@property uid\n\t\t\t@protected\n\t\t\t@readOnly\n\t\t\t@type {String}\n\t\t\t@default UID\n\t\t\t*/\n\t\t\tuid: Basic.guid('uid_'),\n\t\t\t\n\t\t\t/**\n\t\t\tUnique id of the connected runtime, if any.\n\n\t\t\t@property ruid\n\t\t\t@protected\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\truid: null,\n\n\t\t\t/**\n\t\t\tUnique id of the runtime container. Useful to get hold of it for various manipulations.\n\n\t\t\t@property shimid\n\t\t\t@protected\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\tshimid: null,\n\t\t\t\n\t\t\t/**\n\t\t\tArray of selected mOxie.File objects\n\n\t\t\t@property files\n\t\t\t@type {Array}\n\t\t\t@default null\n\t\t\t*/\n\t\t\tfiles: null,\n\n\t\t\t/**\n\t\t\tInitializes the file-picker, connects it to runtime and dispatches event ready when done.\n\n\t\t\t@method init\n\t\t\t*/\n\t\t\tinit: function() {\n\t\t\t\tself.convertEventPropsToHandlers(dispatches);\n\n\t\t\t\tself.bind('RuntimeInit', function(e, runtime) {\n\t\t\t\t\tself.ruid = runtime.uid;\n\t\t\t\t\tself.shimid = runtime.shimid;\n\n\t\t\t\t\tself.bind(\"Ready\", function() {\n\t\t\t\t\t\tself.trigger(\"Refresh\");\n\t\t\t\t\t}, 999);\n\n\t\t\t\t\tself.bind(\"Change\", function() {\n\t\t\t\t\t\tvar files = runtime.exec.call(self, 'FileInput', 'getFiles');\n\n\t\t\t\t\t\tself.files = [];\n\n\t\t\t\t\t\tBasic.each(files, function(file) {\n\t\t\t\t\t\t\t// ignore empty files (IE10 for example hangs if you try to send them via XHR)\n\t\t\t\t\t\t\tif (file.size === 0) {\n\t\t\t\t\t\t\t\treturn true; \n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tself.files.push(new File(self.ruid, file));\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 999);\n\n\t\t\t\t\t// re-position and resize shim container\n\t\t\t\t\tself.bind('Refresh', function() {\n\t\t\t\t\t\tvar pos, size, browseButton, shimContainer;\n\t\t\t\t\t\t\n\t\t\t\t\t\tbrowseButton = Dom.get(options.browse_button);\n\t\t\t\t\t\tshimContainer = Dom.get(runtime.shimid); // do not use runtime.getShimContainer(), since it will create container if it doesn't exist\n\n\t\t\t\t\t\tif (browseButton) {\n\t\t\t\t\t\t\tpos = Dom.getPos(browseButton, Dom.get(options.container));\n\t\t\t\t\t\t\tsize = Dom.getSize(browseButton);\n\n\t\t\t\t\t\t\tif (shimContainer) {\n\t\t\t\t\t\t\t\tBasic.extend(shimContainer.style, {\n\t\t\t\t\t\t\t\t\ttop     : pos.y + 'px',\n\t\t\t\t\t\t\t\t\tleft    : pos.x + 'px',\n\t\t\t\t\t\t\t\t\twidth   : size.w + 'px',\n\t\t\t\t\t\t\t\t\theight  : size.h + 'px'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshimContainer = browseButton = null;\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\truntime.exec.call(self, 'FileInput', 'init', options);\n\t\t\t\t});\n\n\t\t\t\t// runtime needs: options.required_features, options.runtime_order and options.container\n\t\t\t\tself.connectRuntime(Basic.extend({}, options, {\n\t\t\t\t\trequired_caps: {\n\t\t\t\t\t\tselect_file: true\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t},\n\n\t\t\t/**\n\t\t\tDisables file-picker element, so that it doesn't react to mouse clicks.\n\n\t\t\t@method disable\n\t\t\t@param {Boolean} [state=true] Disable component if - true, enable if - false\n\t\t\t*/\n\t\t\tdisable: function(state) {\n\t\t\t\tvar runtime = this.getRuntime();\n\t\t\t\tif (runtime) {\n\t\t\t\t\truntime.exec.call(this, 'FileInput', 'disable', Basic.typeOf(state) === 'undefined' ? true : state);\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\tReposition and resize dialog trigger to match the position and size of browse_button element.\n\n\t\t\t@method refresh\n\t\t\t*/\n\t\t\trefresh: function() {\n\t\t\t\tself.trigger(\"Refresh\");\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\tDestroy component.\n\n\t\t\t@method destroy\n\t\t\t*/\n\t\t\tdestroy: function() {\n\t\t\t\tvar runtime = this.getRuntime();\n\t\t\t\tif (runtime) {\n\t\t\t\t\truntime.exec.call(this, 'FileInput', 'destroy');\n\t\t\t\t\tthis.disconnectRuntime();\n\t\t\t\t}\n\n\t\t\t\tif (Basic.typeOf(this.files) === 'array') {\n\t\t\t\t\t// no sense in leaving associated files behind\n\t\t\t\t\tBasic.each(this.files, function(file) {\n\t\t\t\t\t\tfile.destroy();\n\t\t\t\t\t});\n\t\t\t\t} \n\t\t\t\tthis.files = null;\n\t\t\t}\n\t\t});\n\t}\n\n\tFileInput.prototype = EventTarget.instance;\n\n\treturn FileInput;\n});\n\n// Included from: src/javascript/file/FileDrop.js\n\n/**\n * FileDrop.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/file/FileDrop', [\n\t'moxie/core/I18n',\n\t'moxie/core/utils/Dom',\n\t'moxie/core/Exceptions',\n\t'moxie/core/utils/Basic',\n\t'moxie/file/File',\n\t'moxie/runtime/RuntimeClient',\n\t'moxie/core/EventTarget',\n\t'moxie/core/utils/Mime'\n], function(I18n, Dom, x, Basic, File, RuntimeClient, EventTarget, Mime) {\n\t/**\n\tTurn arbitrary DOM element to a drop zone accepting files. Converts selected files to _File_ objects, to be used \n\tin conjunction with _Image_, preloaded in memory with _FileReader_ or uploaded to a server through \n\t_XMLHttpRequest_.\n\n\t@example\n\t\t<div id=\"drop_zone\">\n\t\t\tDrop files here\n\t\t</div>\n\t\t<br />\n\t\t<div id=\"filelist\"></div>\n\n\t\t<script type=\"text/javascript\">\n\t\t\tvar fileDrop = new mOxie.FileDrop('drop_zone'), fileList = mOxie.get('filelist');\n\n\t\t\tfileDrop.ondrop = function() {\n\t\t\t\tmOxie.each(this.files, function(file) {\n\t\t\t\t\tfileList.innerHTML += '<div>' + file.name + '</div>';\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tfileDrop.init();\n\t\t</script>\n\n\t@class FileDrop\n\t@constructor\n\t@extends EventTarget\n\t@uses RuntimeClient\n\t@param {Object|String} options If options has typeof string, argument is considered as options.drop_zone\n\t\t@param {String|DOMElement} options.drop_zone DOM Element to turn into a drop zone\n\t\t@param {Array} [options.accept] Array of mime types to accept. By default accepts all\n\t\t@param {Object|String} [options.required_caps] Set of required capabilities, that chosen runtime must support\n\t*/\n\tvar dispatches = [\n\t\t/**\n\t\tDispatched when runtime is connected and drop zone is ready to accept files.\n\n\t\t@event ready\n\t\t@param {Object} event\n\t\t*/\n\t\t'ready', \n\n\t\t/**\n\t\tDispatched when dragging cursor enters the drop zone.\n\n\t\t@event dragenter\n\t\t@param {Object} event\n\t\t*/\n\t\t'dragenter',\n\n\t\t/**\n\t\tDispatched when dragging cursor leaves the drop zone.\n\n\t\t@event dragleave\n\t\t@param {Object} event\n\t\t*/\n\t\t'dragleave', \n\n\t\t/**\n\t\tDispatched when file is dropped onto the drop zone.\n\n\t\t@event drop\n\t\t@param {Object} event\n\t\t*/\n\t\t'drop', \n\n\t\t/**\n\t\tDispatched if error occurs.\n\n\t\t@event error\n\t\t@param {Object} event\n\t\t*/\n\t\t'error'\n\t];\n\n\tfunction FileDrop(options) {\n\t\tvar self = this, defaults;\n\n\t\t// if flat argument passed it should be drop_zone id\n\t\tif (typeof(options) === 'string') {\n\t\t\toptions = { drop_zone : options };\n\t\t}\n\n\t\t// figure out the options\n\t\tdefaults = {\n\t\t\taccept: [{\n\t\t\t\ttitle: I18n.translate('All Files'),\n\t\t\t\textensions: '*'\n\t\t\t}],\n\t\t\trequired_caps: {\n\t\t\t\tdrag_and_drop: true\n\t\t\t}\n\t\t};\n\t\t\n\t\toptions = typeof(options) === 'object' ? Basic.extend({}, defaults, options) : defaults;\n\n\t\t// this will help us to find proper default container\n\t\toptions.container = Dom.get(options.drop_zone) || document.body;\n\n\t\t// make container relative, if it is not\n\t\tif (Dom.getStyle(options.container, 'position') === 'static') {\n\t\t\toptions.container.style.position = 'relative';\n\t\t}\n\t\t\t\t\t\n\t\t// normalize accept option (could be list of mime types or array of title/extensions pairs)\n\t\tif (typeof(options.accept) === 'string') {\n\t\t\toptions.accept = Mime.mimes2extList(options.accept);\n\t\t}\n\n\t\tRuntimeClient.call(self);\n\n\t\tBasic.extend(self, {\n\t\t\tuid: Basic.guid('uid_'),\n\n\t\t\truid: null,\n\n\t\t\tfiles: null,\n\n\t\t\tinit: function() {\n\t\n\t\t\t\tself.convertEventPropsToHandlers(dispatches);\n\t\t\n\t\t\t\tself.bind('RuntimeInit', function(e, runtime) {\n\t\t\t\t\tself.ruid = runtime.uid;\n\n\t\t\t\t\tself.bind(\"Drop\", function() {\n\t\t\t\t\t\tvar files = runtime.exec.call(self, 'FileDrop', 'getFiles');\n\n\t\t\t\t\t\tself.files = [];\n\n\t\t\t\t\t\tBasic.each(files, function(file) {\n\t\t\t\t\t\t\tself.files.push(new File(self.ruid, file));\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 999);\n\n\t\t\t\t\truntime.exec.call(self, 'FileDrop', 'init', options);\n\n\t\t\t\t\tself.dispatchEvent('ready');\n\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t// runtime needs: options.required_features, options.runtime_order and options.container\n\t\t\t\tself.connectRuntime(options); // throws RuntimeError\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\tvar runtime = this.getRuntime();\n\t\t\t\tif (runtime) {\n\t\t\t\t\truntime.exec.call(this, 'FileDrop', 'destroy');\n\t\t\t\t\tthis.disconnectRuntime();\n\t\t\t\t}\n\t\t\t\tthis.files = null;\n\t\t\t}\n\t\t});\n\t}\n\n\tFileDrop.prototype = EventTarget.instance;\n\n\treturn FileDrop;\n});\n\n// Included from: src/javascript/runtime/RuntimeTarget.js\n\n/**\n * RuntimeTarget.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/runtime/RuntimeTarget', [\n\t'moxie/core/utils/Basic',\n\t'moxie/runtime/RuntimeClient',\n\t\"moxie/core/EventTarget\"\n], function(Basic, RuntimeClient, EventTarget) {\n\t/**\n\tInstance of this class can be used as a target for the events dispatched by shims,\n\twhen allowing them onto components is for either reason inappropriate\n\n\t@class RuntimeTarget\n\t@constructor\n\t@protected\n\t@extends EventTarget\n\t*/\n\tfunction RuntimeTarget() {\n\t\tthis.uid = Basic.guid('uid_');\n\t\t\n\t\tRuntimeClient.call(this);\n\n\t\tthis.destroy = function() {\n\t\t\tthis.disconnectRuntime();\n\t\t\tthis.unbindAll();\n\t\t};\n\t}\n\n\tRuntimeTarget.prototype = EventTarget.instance;\n\n\treturn RuntimeTarget;\n});\n\n// Included from: src/javascript/file/FileReader.js\n\n/**\n * FileReader.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/file/FileReader', [\n\t'moxie/core/utils/Basic',\n\t'moxie/core/utils/Encode',\n\t'moxie/core/Exceptions',\n\t'moxie/core/EventTarget',\n\t'moxie/file/Blob',\n\t'moxie/file/File',\n\t'moxie/runtime/RuntimeTarget'\n], function(Basic, Encode, x, EventTarget, Blob, File, RuntimeTarget) {\n\t/**\n\tUtility for preloading o.Blob/o.File objects in memory. By design closely follows [W3C FileReader](http://www.w3.org/TR/FileAPI/#dfn-filereader)\n\tinterface. Where possible uses native FileReader, where - not falls back to shims.\n\n\t@class FileReader\n\t@constructor FileReader\n\t@extends EventTarget\n\t@uses RuntimeClient\n\t*/\n\tvar dispatches = [\n\n\t\t/** \n\t\tDispatched when the read starts.\n\n\t\t@event loadstart\n\t\t@param {Object} event\n\t\t*/\n\t\t'loadstart', \n\n\t\t/** \n\t\tDispatched while reading (and decoding) blob, and reporting partial Blob data (progess.loaded/progress.total).\n\n\t\t@event progress\n\t\t@param {Object} event\n\t\t*/\n\t\t'progress', \n\n\t\t/** \n\t\tDispatched when the read has successfully completed.\n\n\t\t@event load\n\t\t@param {Object} event\n\t\t*/\n\t\t'load', \n\n\t\t/** \n\t\tDispatched when the read has been aborted. For instance, by invoking the abort() method.\n\n\t\t@event abort\n\t\t@param {Object} event\n\t\t*/\n\t\t'abort', \n\n\t\t/** \n\t\tDispatched when the read has failed.\n\n\t\t@event error\n\t\t@param {Object} event\n\t\t*/\n\t\t'error', \n\n\t\t/** \n\t\tDispatched when the request has completed (either in success or failure).\n\n\t\t@event loadend\n\t\t@param {Object} event\n\t\t*/\n\t\t'loadend'\n\t];\n\t\n\tfunction FileReader() {\n\t\tvar self = this, _fr;\n\t\t\t\t\n\t\tBasic.extend(this, {\n\t\t\t/**\n\t\t\tUID of the component instance.\n\n\t\t\t@property uid\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\tuid: Basic.guid('uid_'),\n\n\t\t\t/**\n\t\t\tContains current state of FileReader object. Can take values of FileReader.EMPTY, FileReader.LOADING\n\t\t\tand FileReader.DONE.\n\n\t\t\t@property readyState\n\t\t\t@type {Number}\n\t\t\t@default FileReader.EMPTY\n\t\t\t*/\n\t\t\treadyState: FileReader.EMPTY,\n\t\t\t\n\t\t\t/**\n\t\t\tResult of the successful read operation.\n\n\t\t\t@property result\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\tresult: null,\n\t\t\t\n\t\t\t/**\n\t\t\tStores the error of failed asynchronous read operation.\n\n\t\t\t@property error\n\t\t\t@type {DOMError}\n\t\t\t*/\n\t\t\terror: null,\n\t\t\t\n\t\t\t/**\n\t\t\tInitiates reading of File/Blob object contents to binary string.\n\n\t\t\t@method readAsBinaryString\n\t\t\t@param {Blob|File} blob Object to preload\n\t\t\t*/\n\t\t\treadAsBinaryString: function(blob) {\n\t\t\t\t_read.call(this, 'readAsBinaryString', blob);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tInitiates reading of File/Blob object contents to dataURL string.\n\n\t\t\t@method readAsDataURL\n\t\t\t@param {Blob|File} blob Object to preload\n\t\t\t*/\n\t\t\treadAsDataURL: function(blob) {\n\t\t\t\t_read.call(this, 'readAsDataURL', blob);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tInitiates reading of File/Blob object contents to string.\n\n\t\t\t@method readAsText\n\t\t\t@param {Blob|File} blob Object to preload\n\t\t\t*/\n\t\t\treadAsText: function(blob) {\n\t\t\t\t_read.call(this, 'readAsText', blob);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tAborts preloading process.\n\n\t\t\t@method abort\n\t\t\t*/\n\t\t\tabort: function() {\n\t\t\t\tthis.result = null;\n\t\t\t\t\n\t\t\t\tif (Basic.inArray(this.readyState, [FileReader.EMPTY, FileReader.DONE]) !== -1) {\n\t\t\t\t\treturn;\n\t\t\t\t} else if (this.readyState === FileReader.LOADING) {\n\t\t\t\t\tthis.readyState = FileReader.DONE;\n\t\t\t\t}\n\n\t\t\t\tif (_fr) {\n\t\t\t\t\t_fr.getRuntime().exec.call(this, 'FileReader', 'abort');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.trigger('abort');\n\t\t\t\tthis.trigger('loadend');\n\t\t\t},\n\n\t\t\t/**\n\t\t\tDestroy component and release resources.\n\n\t\t\t@method destroy\n\t\t\t*/\n\t\t\tdestroy: function() {\n\t\t\t\tthis.abort();\n\n\t\t\t\tif (_fr) {\n\t\t\t\t\t_fr.getRuntime().exec.call(this, 'FileReader', 'destroy');\n\t\t\t\t\t_fr.disconnectRuntime();\n\t\t\t\t}\n\n\t\t\t\tself = _fr = null;\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\tfunction _read(op, blob) {\n\t\t\t_fr = new RuntimeTarget();\n\n\t\t\tfunction error(err) {\n\t\t\t\tself.readyState = FileReader.DONE;\n\t\t\t\tself.error = err;\n\t\t\t\tself.trigger('error');\n\t\t\t\tloadEnd();\n\t\t\t}\n\n\t\t\tfunction loadEnd() {\n\t\t\t\t_fr.destroy();\n\t\t\t\t_fr = null;\n\t\t\t\tself.trigger('loadend');\n\t\t\t}\n\n\t\t\tfunction exec(runtime) {\n\t\t\t\t_fr.bind('Error', function(e, err) {\n\t\t\t\t\terror(err);\n\t\t\t\t});\n\n\t\t\t\t_fr.bind('Progress', function(e) {\n\t\t\t\t\tself.result = runtime.exec.call(_fr, 'FileReader', 'getResult');\n\t\t\t\t\tself.trigger(e);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t_fr.bind('Load', function(e) {\n\t\t\t\t\tself.readyState = FileReader.DONE;\n\t\t\t\t\tself.result = runtime.exec.call(_fr, 'FileReader', 'getResult');\n\t\t\t\t\tself.trigger(e);\n\t\t\t\t\tloadEnd();\n\t\t\t\t});\n\n\t\t\t\truntime.exec.call(_fr, 'FileReader', 'read', op, blob);\n\t\t\t}\n\n\t\t\tthis.convertEventPropsToHandlers(dispatches);\n\n\t\t\tif (this.readyState === FileReader.LOADING) {\n\t\t\t\treturn error(new x.DOMException(x.DOMException.INVALID_STATE_ERR));\n\t\t\t}\n\n\t\t\tthis.readyState = FileReader.LOADING;\n\t\t\tthis.trigger('loadstart');\n\n\t\t\t// if source is o.Blob/o.File\n\t\t\tif (blob instanceof Blob) {\n\t\t\t\tif (blob.isDetached()) {\n\t\t\t\t\tvar src = blob.getSource();\n\t\t\t\t\tswitch (op) {\n\t\t\t\t\t\tcase 'readAsText':\n\t\t\t\t\t\tcase 'readAsBinaryString':\n\t\t\t\t\t\t\tthis.result = src;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'readAsDataURL':\n\t\t\t\t\t\t\tthis.result = 'data:' + blob.type + ';base64,' + Encode.btoa(src);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tthis.readyState = FileReader.DONE;\n\t\t\t\t\tthis.trigger('load');\n\t\t\t\t\tloadEnd();\n\t\t\t\t} else {\n\t\t\t\t\texec(_fr.connectRuntime(blob.ruid));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\terror(new x.DOMException(x.DOMException.NOT_FOUND_ERR));\n\t\t\t}\n\t\t}\n\t}\n\t\n\t/**\n\tInitial FileReader state\n\n\t@property EMPTY\n\t@type {Number}\n\t@final\n\t@static\n\t@default 0\n\t*/\n\tFileReader.EMPTY = 0;\n\n\t/**\n\tFileReader switches to this state when it is preloading the source\n\n\t@property LOADING\n\t@type {Number}\n\t@final\n\t@static\n\t@default 1\n\t*/\n\tFileReader.LOADING = 1;\n\n\t/**\n\tPreloading is complete, this is a final state\n\n\t@property DONE\n\t@type {Number}\n\t@final\n\t@static\n\t@default 2\n\t*/\n\tFileReader.DONE = 2;\n\n\tFileReader.prototype = EventTarget.instance;\n\n\treturn FileReader;\n});\n\n// Included from: src/javascript/core/utils/Url.js\n\n/**\n * Url.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/core/utils/Url', [], function() {\n\t/**\n\tParse url into separate components and fill in absent parts with parts from current url,\n\tbased on https://raw.github.com/kvz/phpjs/master/functions/url/parse_url.js\n\n\t@method parseUrl\n\t@for Utils\n\t@static\n\t@param {String} url Url to parse (defaults to empty string if undefined)\n\t@return {Object} Hash containing extracted uri components\n\t*/\n\tvar parseUrl = function(url, currentUrl) {\n\t\tvar key = ['source', 'scheme', 'authority', 'userInfo', 'user', 'pass', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'fragment']\n\t\t, i = key.length\n\t\t, ports = {\n\t\t\thttp: 80,\n\t\t\thttps: 443\n\t\t}\n\t\t, uri = {}\n\t\t, regex = /^(?:([^:\\/?#]+):)?(?:\\/\\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\\/?#]*)(?::(\\d*))?))?()(?:(()(?:(?:[^?#\\/]*\\/)*)()(?:[^?#]*))(?:\\\\?([^#]*))?(?:#(.*))?)/\n\t\t, m = regex.exec(url || '')\n\t\t;\n\t\t\t\t\t\n\t\twhile (i--) {\n\t\t\tif (m[i]) {\n\t\t\t\turi[key[i]] = m[i];\n\t\t\t}\n\t\t}\n\n\t\t// when url is relative, we set the origin and the path ourselves\n\t\tif (!uri.scheme) {\n\t\t\t// come up with defaults\n\t\t\tif (!currentUrl || typeof(currentUrl) === 'string') {\n\t\t\t\tcurrentUrl = parseUrl(currentUrl || document.location.href);\n\t\t\t}\n\n\t\t\turi.scheme = currentUrl.scheme;\n\t\t\turi.host = currentUrl.host;\n\t\t\turi.port = currentUrl.port;\n\n\t\t\tvar path = '';\n\t\t\t// for urls without trailing slash we need to figure out the path\n\t\t\tif (/^[^\\/]/.test(uri.path)) {\n\t\t\t\tpath = currentUrl.path;\n\t\t\t\t// if path ends with a filename, strip it\n\t\t\t\tif (!/(\\/|\\/[^\\.]+)$/.test(path)) {\n\t\t\t\t\tpath = path.replace(/\\/[^\\/]+$/, '/');\n\t\t\t\t} else {\n\t\t\t\t\tpath += '/';\n\t\t\t\t}\n\t\t\t}\n\t\t\turi.path = path + (uri.path || ''); // site may reside at domain.com or domain.com/subdir\n\t\t}\n\n\t\tif (!uri.port) {\n\t\t\turi.port = ports[uri.scheme] || 80;\n\t\t} \n\t\t\n\t\turi.port = parseInt(uri.port, 10);\n\n\t\tif (!uri.path) {\n\t\t\turi.path = \"/\";\n\t\t}\n\n\t\tdelete uri.source;\n\n\t\treturn uri;\n\t};\n\n\t/**\n\tResolve url - among other things will turn relative url to absolute\n\n\t@method resolveUrl\n\t@static\n\t@param {String} url Either absolute or relative\n\t@return {String} Resolved, absolute url\n\t*/\n\tvar resolveUrl = function(url) {\n\t\tvar ports = { // we ignore default ports\n\t\t\thttp: 80,\n\t\t\thttps: 443\n\t\t}\n\t\t, urlp = parseUrl(url)\n\t\t;\n\n\t\treturn urlp.scheme + '://' + urlp.host + (urlp.port !== ports[urlp.scheme] ? ':' + urlp.port : '') + urlp.path + (urlp.query ? urlp.query : '');\n\t};\n\n\t/**\n\tCheck if specified url has the same origin as the current document\n\n\t@method hasSameOrigin\n\t@param {String|Object} url\n\t@return {Boolean}\n\t*/\n\tvar hasSameOrigin = function(url) {\n\t\tfunction origin(url) {\n\t\t\treturn [url.scheme, url.host, url.port].join('/');\n\t\t}\n\t\t\t\n\t\tif (typeof url === 'string') {\n\t\t\turl = parseUrl(url);\n\t\t}\t\n\t\t\n\t\treturn origin(parseUrl()) === origin(url);\n\t};\n\n\treturn {\n\t\tparseUrl: parseUrl,\n\t\tresolveUrl: resolveUrl,\n\t\thasSameOrigin: hasSameOrigin\n\t};\n});\n\n// Included from: src/javascript/file/FileReaderSync.js\n\n/**\n * FileReaderSync.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/file/FileReaderSync', [\n\t'moxie/core/utils/Basic',\n\t'moxie/runtime/RuntimeClient',\n\t'moxie/core/utils/Encode'\n], function(Basic, RuntimeClient, Encode) {\n\t/**\n\tSynchronous FileReader implementation. Something like this is available in WebWorkers environment, here\n\tit can be used to read only preloaded blobs/files and only below certain size (not yet sure what that'd be,\n\tbut probably < 1mb). Not meant to be used directly by user.\n\n\t@class FileReaderSync\n\t@private\n\t@constructor\n\t*/\n\treturn function() {\n\t\tRuntimeClient.call(this);\n\n\t\tBasic.extend(this, {\n\t\t\tuid: Basic.guid('uid_'),\n\n\t\t\treadAsBinaryString: function(blob) {\n\t\t\t\treturn _read.call(this, 'readAsBinaryString', blob);\n\t\t\t},\n\t\t\t\n\t\t\treadAsDataURL: function(blob) {\n\t\t\t\treturn _read.call(this, 'readAsDataURL', blob);\n\t\t\t},\n\t\t\t\n\t\t\t/*readAsArrayBuffer: function(blob) {\n\t\t\t\treturn _read.call(this, 'readAsArrayBuffer', blob);\n\t\t\t},*/\n\t\t\t\n\t\t\treadAsText: function(blob) {\n\t\t\t\treturn _read.call(this, 'readAsText', blob);\n\t\t\t}\n\t\t});\n\n\t\tfunction _read(op, blob) {\n\t\t\tif (blob.isDetached()) {\n\t\t\t\tvar src = blob.getSource();\n\t\t\t\tswitch (op) {\n\t\t\t\t\tcase 'readAsBinaryString':\n\t\t\t\t\t\treturn src;\n\t\t\t\t\tcase 'readAsDataURL':\n\t\t\t\t\t\treturn 'data:' + blob.type + ';base64,' + Encode.btoa(src);\n\t\t\t\t\tcase 'readAsText':\n\t\t\t\t\t\tvar txt = '';\n\t\t\t\t\t\tfor (var i = 0, length = src.length; i < length; i++) {\n\t\t\t\t\t\t\ttxt += String.fromCharCode(src[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn txt;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar result = this.connectRuntime(blob.ruid).exec.call(this, 'FileReaderSync', 'read', op, blob);\n\t\t\t\tthis.disconnectRuntime();\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t};\n});\n\n// Included from: src/javascript/xhr/FormData.js\n\n/**\n * FormData.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine(\"moxie/xhr/FormData\", [\n\t\"moxie/core/Exceptions\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/file/Blob\"\n], function(x, Basic, Blob) {\n\t/**\n\tFormData\n\n\t@class FormData\n\t@constructor\n\t*/\n\tfunction FormData() {\n\t\tvar _blob, _fields = [];\n\n\t\tBasic.extend(this, {\n\t\t\t/**\n\t\t\tAppend another key-value pair to the FormData object\n\n\t\t\t@method append\n\t\t\t@param {String} name Name for the new field\n\t\t\t@param {String|Blob|Array|Object} value Value for the field\n\t\t\t*/\n\t\t\tappend: function(name, value) {\n\t\t\t\tvar self = this, valueType = Basic.typeOf(value);\n\n\t\t\t\t// according to specs value might be either Blob or String\n\t\t\t\tif (value instanceof Blob) {\n\t\t\t\t\t_blob = {\n\t\t\t\t\t\tname: name,\n\t\t\t\t\t\tvalue: value // unfortunately we can only send single Blob in one FormData\n\t\t\t\t\t};\n\t\t\t\t} else if ('array' === valueType) {\n\t\t\t\t\tname += '[]';\n\n\t\t\t\t\tBasic.each(value, function(value) {\n\t\t\t\t\t\tself.append(name, value);\n\t\t\t\t\t});\n\t\t\t\t} else if ('object' === valueType) {\n\t\t\t\t\tBasic.each(value, function(value, key) {\n\t\t\t\t\t\tself.append(name + '[' + key + ']', value);\n\t\t\t\t\t});\n\t\t\t\t} else if ('null' === valueType || 'undefined' === valueType || 'number' === valueType && isNaN(value)) {\n\t\t\t\t\tself.append(name, \"false\");\n\t\t\t\t} else {\n\t\t\t\t\t_fields.push({\n\t\t\t\t\t\tname: name,\n\t\t\t\t\t\tvalue: value.toString()\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\tChecks if FormData contains Blob.\n\n\t\t\t@method hasBlob\n\t\t\t@return {Boolean}\n\t\t\t*/\n\t\t\thasBlob: function() {\n\t\t\t\treturn !!this.getBlob();\n\t\t\t},\n\n\t\t\t/**\n\t\t\tRetrieves blob.\n\n\t\t\t@method getBlob\n\t\t\t@return {Object} Either Blob if found or null\n\t\t\t*/\n\t\t\tgetBlob: function() {\n\t\t\t\treturn _blob && _blob.value || null;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tRetrieves blob field name.\n\n\t\t\t@method getBlobName\n\t\t\t@return {String} Either Blob field name or null\n\t\t\t*/\n\t\t\tgetBlobName: function() {\n\t\t\t\treturn _blob && _blob.name || null;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tLoop over the fields in FormData and invoke the callback for each of them.\n\n\t\t\t@method each\n\t\t\t@param {Function} cb Callback to call for each field\n\t\t\t*/\n\t\t\teach: function(cb) {\n\t\t\t\tBasic.each(_fields, function(field) {\n\t\t\t\t\tcb(field.value, field.name);\n\t\t\t\t});\n\n\t\t\t\tif (_blob) {\n\t\t\t\t\tcb(_blob.value, _blob.name);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\t_blob = null;\n\t\t\t\t_fields = [];\n\t\t\t}\n\t\t});\n\t}\n\n\treturn FormData;\n});\n\n// Included from: src/javascript/xhr/XMLHttpRequest.js\n\n/**\n * XMLHttpRequest.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine(\"moxie/xhr/XMLHttpRequest\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/core/EventTarget\",\n\t\"moxie/core/utils/Encode\",\n\t\"moxie/core/utils/Url\",\n\t\"moxie/runtime/Runtime\",\n\t\"moxie/runtime/RuntimeTarget\",\n\t\"moxie/file/Blob\",\n\t\"moxie/file/FileReaderSync\",\n\t\"moxie/xhr/FormData\",\n\t\"moxie/core/utils/Env\",\n\t\"moxie/core/utils/Mime\"\n], function(Basic, x, EventTarget, Encode, Url, Runtime, RuntimeTarget, Blob, FileReaderSync, FormData, Env, Mime) {\n\n\tvar httpCode = {\n\t\t100: 'Continue',\n\t\t101: 'Switching Protocols',\n\t\t102: 'Processing',\n\n\t\t200: 'OK',\n\t\t201: 'Created',\n\t\t202: 'Accepted',\n\t\t203: 'Non-Authoritative Information',\n\t\t204: 'No Content',\n\t\t205: 'Reset Content',\n\t\t206: 'Partial Content',\n\t\t207: 'Multi-Status',\n\t\t226: 'IM Used',\n\n\t\t300: 'Multiple Choices',\n\t\t301: 'Moved Permanently',\n\t\t302: 'Found',\n\t\t303: 'See Other',\n\t\t304: 'Not Modified',\n\t\t305: 'Use Proxy',\n\t\t306: 'Reserved',\n\t\t307: 'Temporary Redirect',\n\n\t\t400: 'Bad Request',\n\t\t401: 'Unauthorized',\n\t\t402: 'Payment Required',\n\t\t403: 'Forbidden',\n\t\t404: 'Not Found',\n\t\t405: 'Method Not Allowed',\n\t\t406: 'Not Acceptable',\n\t\t407: 'Proxy Authentication Required',\n\t\t408: 'Request Timeout',\n\t\t409: 'Conflict',\n\t\t410: 'Gone',\n\t\t411: 'Length Required',\n\t\t412: 'Precondition Failed',\n\t\t413: 'Request Entity Too Large',\n\t\t414: 'Request-URI Too Long',\n\t\t415: 'Unsupported Media Type',\n\t\t416: 'Requested Range Not Satisfiable',\n\t\t417: 'Expectation Failed',\n\t\t422: 'Unprocessable Entity',\n\t\t423: 'Locked',\n\t\t424: 'Failed Dependency',\n\t\t426: 'Upgrade Required',\n\n\t\t500: 'Internal Server Error',\n\t\t501: 'Not Implemented',\n\t\t502: 'Bad Gateway',\n\t\t503: 'Service Unavailable',\n\t\t504: 'Gateway Timeout',\n\t\t505: 'HTTP Version Not Supported',\n\t\t506: 'Variant Also Negotiates',\n\t\t507: 'Insufficient Storage',\n\t\t510: 'Not Extended'\n\t};\n\n\tfunction XMLHttpRequestUpload() {\n\t\tthis.uid = Basic.guid('uid_');\n\t}\n\t\n\tXMLHttpRequestUpload.prototype = EventTarget.instance;\n\n\t/**\n\tImplementation of XMLHttpRequest\n\n\t@class XMLHttpRequest\n\t@constructor\n\t@uses RuntimeClient\n\t@extends EventTarget\n\t*/\n\tvar dispatches = ['loadstart', 'progress', 'abort', 'error', 'load', 'timeout', 'loadend']; // & readystatechange (for historical reasons)\n\t\n\tvar NATIVE = 1, RUNTIME = 2;\n\t\t\t\t\t\n\tfunction XMLHttpRequest() {\n\t\tvar self = this,\n\t\t\t// this (together with _p() @see below) is here to gracefully upgrade to setter/getter syntax where possible\n\t\t\tprops = {\n\t\t\t\t/**\n\t\t\t\tThe amount of milliseconds a request can take before being terminated. Initially zero. Zero means there is no timeout.\n\n\t\t\t\t@property timeout\n\t\t\t\t@type Number\n\t\t\t\t@default 0\n\t\t\t\t*/\n\t\t\t\ttimeout: 0,\n\n\t\t\t\t/**\n\t\t\t\tCurrent state, can take following values:\n\t\t\t\tUNSENT (numeric value 0)\n\t\t\t\tThe object has been constructed.\n\n\t\t\t\tOPENED (numeric value 1)\n\t\t\t\tThe open() method has been successfully invoked. During this state request headers can be set using setRequestHeader() and the request can be made using the send() method.\n\n\t\t\t\tHEADERS_RECEIVED (numeric value 2)\n\t\t\t\tAll redirects (if any) have been followed and all HTTP headers of the final response have been received. Several response members of the object are now available.\n\n\t\t\t\tLOADING (numeric value 3)\n\t\t\t\tThe response entity body is being received.\n\n\t\t\t\tDONE (numeric value 4)\n\n\t\t\t\t@property readyState\n\t\t\t\t@type Number\n\t\t\t\t@default 0 (UNSENT)\n\t\t\t\t*/\n\t\t\t\treadyState: XMLHttpRequest.UNSENT,\n\n\t\t\t\t/**\n\t\t\t\tTrue when user credentials are to be included in a cross-origin request. False when they are to be excluded\n\t\t\t\tin a cross-origin request and when cookies are to be ignored in its response. Initially false.\n\n\t\t\t\t@property withCredentials\n\t\t\t\t@type Boolean\n\t\t\t\t@default false\n\t\t\t\t*/\n\t\t\t\twithCredentials: false,\n\n\t\t\t\t/**\n\t\t\t\tReturns the HTTP status code.\n\n\t\t\t\t@property status\n\t\t\t\t@type Number\n\t\t\t\t@default 0\n\t\t\t\t*/\n\t\t\t\tstatus: 0,\n\n\t\t\t\t/**\n\t\t\t\tReturns the HTTP status text.\n\n\t\t\t\t@property statusText\n\t\t\t\t@type String\n\t\t\t\t*/\n\t\t\t\tstatusText: \"\",\n\n\t\t\t\t/**\n\t\t\t\tReturns the response type. Can be set to change the response type. Values are:\n\t\t\t\tthe empty string (default), \"arraybuffer\", \"blob\", \"document\", \"json\", and \"text\".\n\t\t\t\t\n\t\t\t\t@property responseType\n\t\t\t\t@type String\n\t\t\t\t*/\n\t\t\t\tresponseType: \"\",\n\n\t\t\t\t/**\n\t\t\t\tReturns the document response entity body.\n\t\t\t\t\n\t\t\t\tThrows an \"InvalidStateError\" exception if responseType is not the empty string or \"document\".\n\n\t\t\t\t@property responseXML\n\t\t\t\t@type Document\n\t\t\t\t*/\n\t\t\t\tresponseXML: null,\n\n\t\t\t\t/**\n\t\t\t\tReturns the text response entity body.\n\t\t\t\t\n\t\t\t\tThrows an \"InvalidStateError\" exception if responseType is not the empty string or \"text\".\n\n\t\t\t\t@property responseText\n\t\t\t\t@type String\n\t\t\t\t*/\n\t\t\t\tresponseText: null,\n\n\t\t\t\t/**\n\t\t\t\tReturns the response entity body (http://www.w3.org/TR/XMLHttpRequest/#response-entity-body).\n\t\t\t\tCan become: ArrayBuffer, Blob, Document, JSON, Text\n\t\t\t\t\n\t\t\t\t@property response\n\t\t\t\t@type Mixed\n\t\t\t\t*/\n\t\t\t\tresponse: null\n\t\t\t},\n\n\t\t\t_async = true,\n\t\t\t_url,\n\t\t\t_method,\n\t\t\t_headers = {},\n\t\t\t_user,\n\t\t\t_password,\n\t\t\t_encoding = null,\n\t\t\t_mimeType = null,\n\n\t\t\t// flags\n\t\t\t_sync_flag = false,\n\t\t\t_send_flag = false,\n\t\t\t_upload_events_flag = false,\n\t\t\t_upload_complete_flag = false,\n\t\t\t_error_flag = false,\n\t\t\t_same_origin_flag = false,\n\n\t\t\t// times\n\t\t\t_start_time,\n\t\t\t_timeoutset_time,\n\n\t\t\t_finalMime = null,\n\t\t\t_finalCharset = null,\n\n\t\t\t_options = {},\n\t\t\t_xhr,\n\t\t\t_responseHeaders = '',\n\t\t\t_responseHeadersBag\n\t\t\t;\n\n\t\t\n\t\tBasic.extend(this, props, {\n\t\t\t/**\n\t\t\tUnique id of the component\n\n\t\t\t@property uid\n\t\t\t@type String\n\t\t\t*/\n\t\t\tuid: Basic.guid('uid_'),\n\t\t\t\n\t\t\t/**\n\t\t\tTarget for Upload events\n\n\t\t\t@property upload\n\t\t\t@type XMLHttpRequestUpload\n\t\t\t*/\n\t\t\tupload: new XMLHttpRequestUpload(),\n\t\t\t\n\n\t\t\t/**\n\t\t\tSets the request method, request URL, synchronous flag, request username, and request password.\n\n\t\t\tThrows a \"SyntaxError\" exception if one of the following is true:\n\n\t\t\tmethod is not a valid HTTP method.\n\t\t\turl cannot be resolved.\n\t\t\turl contains the \"user:password\" format in the userinfo production.\n\t\t\tThrows a \"SecurityError\" exception if method is a case-insensitive match for CONNECT, TRACE or TRACK.\n\n\t\t\tThrows an \"InvalidAccessError\" exception if one of the following is true:\n\n\t\t\tEither user or password is passed as argument and the origin of url does not match the XMLHttpRequest origin.\n\t\t\tThere is an associated XMLHttpRequest document and either the timeout attribute is not zero,\n\t\t\tthe withCredentials attribute is true, or the responseType attribute is not the empty string.\n\n\n\t\t\t@method open\n\t\t\t@param {String} method HTTP method to use on request\n\t\t\t@param {String} url URL to request\n\t\t\t@param {Boolean} [async=true] If false request will be done in synchronous manner. Asynchronous by default.\n\t\t\t@param {String} [user] Username to use in HTTP authentication process on server-side\n\t\t\t@param {String} [password] Password to use in HTTP authentication process on server-side\n\t\t\t*/\n\t\t\topen: function(method, url, async, user, password) {\n\t\t\t\tvar urlp;\n\t\t\t\t\n\t\t\t\t// first two arguments are required\n\t\t\t\tif (!method || !url) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.SYNTAX_ERR);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 2 - check if any code point in method is higher than U+00FF or after deflating method it does not match the method\n\t\t\t\tif (/[\\u0100-\\uffff]/.test(method) || Encode.utf8_encode(method) !== method) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.SYNTAX_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 3\n\t\t\t\tif (!!~Basic.inArray(method.toUpperCase(), ['CONNECT', 'DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT', 'TRACE', 'TRACK'])) {\n\t\t\t\t\t_method = method.toUpperCase();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t// 4 - allowing these methods poses a security risk\n\t\t\t\tif (!!~Basic.inArray(_method, ['CONNECT', 'TRACE', 'TRACK'])) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.SECURITY_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 5\n\t\t\t\turl = Encode.utf8_encode(url);\n\t\t\t\t\n\t\t\t\t// 6 - Resolve url relative to the XMLHttpRequest base URL. If the algorithm returns an error, throw a \"SyntaxError\".\n\t\t\t\turlp = Url.parseUrl(url);\n\n\t\t\t\t_same_origin_flag = Url.hasSameOrigin(urlp);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t// 7 - manually build up absolute url\n\t\t\t\t_url = Url.resolveUrl(url);\n\t\t\n\t\t\t\t// 9-10, 12-13\n\t\t\t\tif ((user || password) && !_same_origin_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_ACCESS_ERR);\n\t\t\t\t}\n\n\t\t\t\t_user = user || urlp.user;\n\t\t\t\t_password = password || urlp.pass;\n\t\t\t\t\n\t\t\t\t// 11\n\t\t\t\t_async = async || true;\n\t\t\t\t\n\t\t\t\tif (_async === false && (_p('timeout') || _p('withCredentials') || _p('responseType') !== \"\")) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_ACCESS_ERR);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 14 - terminate abort()\n\t\t\t\t\n\t\t\t\t// 15 - terminate send()\n\n\t\t\t\t// 18\n\t\t\t\t_sync_flag = !_async;\n\t\t\t\t_send_flag = false;\n\t\t\t\t_headers = {};\n\t\t\t\t_reset.call(this);\n\n\t\t\t\t// 19\n\t\t\t\t_p('readyState', XMLHttpRequest.OPENED);\n\t\t\t\t\n\t\t\t\t// 20\n\t\t\t\tthis.convertEventPropsToHandlers(['readystatechange']); // unify event handlers\n\t\t\t\tthis.dispatchEvent('readystatechange');\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tAppends an header to the list of author request headers, or if header is already\n\t\t\tin the list of author request headers, combines its value with value.\n\n\t\t\tThrows an \"InvalidStateError\" exception if the state is not OPENED or if the send() flag is set.\n\t\t\tThrows a \"SyntaxError\" exception if header is not a valid HTTP header field name or if value\n\t\t\tis not a valid HTTP header field value.\n\t\t\t\n\t\t\t@method setRequestHeader\n\t\t\t@param {String} header\n\t\t\t@param {String|Number} value\n\t\t\t*/\n\t\t\tsetRequestHeader: function(header, value) {\n\t\t\t\tvar uaHeaders = [ // these headers are controlled by the user agent\n\t\t\t\t\t\t\"accept-charset\",\n\t\t\t\t\t\t\"accept-encoding\",\n\t\t\t\t\t\t\"access-control-request-headers\",\n\t\t\t\t\t\t\"access-control-request-method\",\n\t\t\t\t\t\t\"connection\",\n\t\t\t\t\t\t\"content-length\",\n\t\t\t\t\t\t\"cookie\",\n\t\t\t\t\t\t\"cookie2\",\n\t\t\t\t\t\t\"content-transfer-encoding\",\n\t\t\t\t\t\t\"date\",\n\t\t\t\t\t\t\"expect\",\n\t\t\t\t\t\t\"host\",\n\t\t\t\t\t\t\"keep-alive\",\n\t\t\t\t\t\t\"origin\",\n\t\t\t\t\t\t\"referer\",\n\t\t\t\t\t\t\"te\",\n\t\t\t\t\t\t\"trailer\",\n\t\t\t\t\t\t\"transfer-encoding\",\n\t\t\t\t\t\t\"upgrade\",\n\t\t\t\t\t\t\"user-agent\",\n\t\t\t\t\t\t\"via\"\n\t\t\t\t\t];\n\t\t\t\t\n\t\t\t\t// 1-2\n\t\t\t\tif (_p('readyState') !== XMLHttpRequest.OPENED || _send_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 3\n\t\t\t\tif (/[\\u0100-\\uffff]/.test(header) || Encode.utf8_encode(header) !== header) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.SYNTAX_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 4\n\t\t\t\t/* this step is seemingly bypassed in browsers, probably to allow various unicode characters in header values\n\t\t\t\tif (/[\\u0100-\\uffff]/.test(value) || Encode.utf8_encode(value) !== value) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.SYNTAX_ERR);\n\t\t\t\t}*/\n\n\t\t\t\theader = Basic.trim(header).toLowerCase();\n\t\t\t\t\n\t\t\t\t// setting of proxy-* and sec-* headers is prohibited by spec\n\t\t\t\tif (!!~Basic.inArray(header, uaHeaders) || /^(proxy\\-|sec\\-)/.test(header)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// camelize\n\t\t\t\t// browsers lowercase header names (at least for custom ones)\n\t\t\t\t// header = header.replace(/\\b\\w/g, function($1) { return $1.toUpperCase(); });\n\t\t\t\t\n\t\t\t\tif (!_headers[header]) {\n\t\t\t\t\t_headers[header] = value;\n\t\t\t\t} else {\n\t\t\t\t\t// http://tools.ietf.org/html/rfc2616#section-4.2 (last paragraph)\n\t\t\t\t\t_headers[header] += ', ' + value;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tReturns all headers from the response, with the exception of those whose field name is Set-Cookie or Set-Cookie2.\n\n\t\t\t@method getAllResponseHeaders\n\t\t\t@return {String} reponse headers or empty string\n\t\t\t*/\n\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\treturn _responseHeaders || '';\n\t\t\t},\n\n\t\t\t/**\n\t\t\tReturns the header field value from the response of which the field name matches header, \n\t\t\tunless the field name is Set-Cookie or Set-Cookie2.\n\n\t\t\t@method getResponseHeader\n\t\t\t@param {String} header\n\t\t\t@return {String} value(s) for the specified header or null\n\t\t\t*/\n\t\t\tgetResponseHeader: function(header) {\n\t\t\t\theader = header.toLowerCase();\n\n\t\t\t\tif (_error_flag || !!~Basic.inArray(header, ['set-cookie', 'set-cookie2'])) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (_responseHeaders && _responseHeaders !== '') {\n\t\t\t\t\t// if we didn't parse response headers until now, do it and keep for later\n\t\t\t\t\tif (!_responseHeadersBag) {\n\t\t\t\t\t\t_responseHeadersBag = {};\n\t\t\t\t\t\tBasic.each(_responseHeaders.split(/\\r\\n/), function(line) {\n\t\t\t\t\t\t\tvar pair = line.split(/:\\s+/);\n\t\t\t\t\t\t\tif (pair.length === 2) { // last line might be empty, omit\n\t\t\t\t\t\t\t\tpair[0] = Basic.trim(pair[0]); // just in case\n\t\t\t\t\t\t\t\t_responseHeadersBag[pair[0].toLowerCase()] = { // simply to retain header name in original form\n\t\t\t\t\t\t\t\t\theader: pair[0],\n\t\t\t\t\t\t\t\t\tvalue: Basic.trim(pair[1])\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (_responseHeadersBag.hasOwnProperty(header)) {\n\t\t\t\t\t\treturn _responseHeadersBag[header].header + ': ' + _responseHeadersBag[header].value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tSets the Content-Type header for the response to mime.\n\t\t\tThrows an \"InvalidStateError\" exception if the state is LOADING or DONE.\n\t\t\tThrows a \"SyntaxError\" exception if mime is not a valid media type.\n\n\t\t\t@method overrideMimeType\n\t\t\t@param String mime Mime type to set\n\t\t\t*/\n\t\t\toverrideMimeType: function(mime) {\n\t\t\t\tvar matches, charset;\n\t\t\t\n\t\t\t\t// 1\n\t\t\t\tif (!!~Basic.inArray(_p('readyState'), [XMLHttpRequest.LOADING, XMLHttpRequest.DONE])) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 2\n\t\t\t\tmime = Basic.trim(mime.toLowerCase());\n\n\t\t\t\tif (/;/.test(mime) && (matches = mime.match(/^([^;]+)(?:;\\scharset\\=)?(.*)$/))) {\n\t\t\t\t\tmime = matches[1];\n\t\t\t\t\tif (matches[2]) {\n\t\t\t\t\t\tcharset = matches[2];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!Mime.mimes[mime]) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.SYNTAX_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 3-4\n\t\t\t\t_finalMime = mime;\n\t\t\t\t_finalCharset = charset;\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tInitiates the request. The optional argument provides the request entity body.\n\t\t\tThe argument is ignored if request method is GET or HEAD.\n\n\t\t\tThrows an \"InvalidStateError\" exception if the state is not OPENED or if the send() flag is set.\n\n\t\t\t@method send\n\t\t\t@param {Blob|Document|String|FormData} [data] Request entity body\n\t\t\t@param {Object} [options] Set of requirements and pre-requisities for runtime initialization\n\t\t\t*/\n\t\t\tsend: function(data, options) {\t\t\t\t\t\n\t\t\t\tif (Basic.typeOf(options) === 'string') {\n\t\t\t\t\t_options = { ruid: options };\n\t\t\t\t} else if (!options) {\n\t\t\t\t\t_options = {};\n\t\t\t\t} else {\n\t\t\t\t\t_options = options;\n\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\tthis.convertEventPropsToHandlers(dispatches);\n\t\t\t\tthis.upload.convertEventPropsToHandlers(dispatches);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t// 1-2\n\t\t\t\tif (this.readyState !== XMLHttpRequest.OPENED || _send_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 3\t\t\t\t\t\n\t\t\t\t// sending Blob\n\t\t\t\tif (data instanceof Blob) {\n\t\t\t\t\t_options.ruid = data.ruid;\n\t\t\t\t\t_mimeType = data.type || 'application/octet-stream';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// FormData\n\t\t\t\telse if (data instanceof FormData) {\n\t\t\t\t\tif (data.hasBlob()) {\n\t\t\t\t\t\tvar blob = data.getBlob();\n\t\t\t\t\t\t_options.ruid = blob.ruid;\n\t\t\t\t\t\t_mimeType = blob.type || 'application/octet-stream';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// DOMString\n\t\t\t\telse if (typeof data === 'string') {\n\t\t\t\t\t_encoding = 'UTF-8';\n\t\t\t\t\t_mimeType = 'text/plain;charset=UTF-8';\n\t\t\t\t\t\n\t\t\t\t\t// data should be converted to Unicode and encoded as UTF-8\n\t\t\t\t\tdata = Encode.utf8_encode(data);\n\t\t\t\t}\n\n\t\t\t\t// if withCredentials not set, but requested, set it automatically\n\t\t\t\tif (!this.withCredentials) {\n\t\t\t\t\tthis.withCredentials = (_options.required_caps && _options.required_caps.send_browser_cookies) && !_same_origin_flag;\n\t\t\t\t}\n\n\t\t\t\t// 4 - storage mutex\n\t\t\t\t// 5\n\t\t\t\t_upload_events_flag = (!_sync_flag && this.upload.hasEventListener()); // DSAP\n\t\t\t\t// 6\n\t\t\t\t_error_flag = false;\n\t\t\t\t// 7\n\t\t\t\t_upload_complete_flag = !data;\n\t\t\t\t// 8 - Asynchronous steps\n\t\t\t\tif (!_sync_flag) {\n\t\t\t\t\t// 8.1\n\t\t\t\t\t_send_flag = true;\n\t\t\t\t\t// 8.2\n\t\t\t\t\t// this.dispatchEvent('loadstart'); // will be dispatched either by native or runtime xhr\n\t\t\t\t\t// 8.3\n\t\t\t\t\t//if (!_upload_complete_flag) {\n\t\t\t\t\t\t// this.upload.dispatchEvent('loadstart');\t// will be dispatched either by native or runtime xhr\n\t\t\t\t\t//}\n\t\t\t\t}\n\t\t\t\t// 8.5 - Return the send() method call, but continue running the steps in this algorithm.\n\t\t\t\t_doXHR.call(this, data);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tCancels any network activity.\n\t\t\t\n\t\t\t@method abort\n\t\t\t*/\n\t\t\tabort: function() {\n\t\t\t\t_error_flag = true;\n\t\t\t\t_sync_flag = false;\n\n\t\t\t\tif (!~Basic.inArray(_p('readyState'), [XMLHttpRequest.UNSENT, XMLHttpRequest.OPENED, XMLHttpRequest.DONE])) {\n\t\t\t\t\t_p('readyState', XMLHttpRequest.DONE);\n\t\t\t\t\t_send_flag = false;\n\n\t\t\t\t\tif (_xhr) {\n\t\t\t\t\t\t_xhr.getRuntime().exec.call(_xhr, 'XMLHttpRequest', 'abort', _upload_complete_flag);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t\t}\n\n\t\t\t\t\t_upload_complete_flag = true;\n\t\t\t\t} else {\n\t\t\t\t\t_p('readyState', XMLHttpRequest.UNSENT);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\tif (_xhr) {\n\t\t\t\t\tif (Basic.typeOf(_xhr.destroy) === 'function') {\n\t\t\t\t\t\t_xhr.destroy();\n\t\t\t\t\t}\n\t\t\t\t\t_xhr = null;\n\t\t\t\t}\n\n\t\t\t\tthis.unbindAll();\n\n\t\t\t\tif (this.upload) {\n\t\t\t\t\tthis.upload.unbindAll();\n\t\t\t\t\tthis.upload = null;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t/* this is nice, but maybe too lengthy\n\n\t\t// if supported by JS version, set getters/setters for specific properties\n\t\to.defineProperty(this, 'readyState', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\treturn _p('readyState');\n\t\t\t}\n\t\t});\n\n\t\to.defineProperty(this, 'timeout', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\treturn _p('timeout');\n\t\t\t},\n\n\t\t\tset: function(value) {\n\n\t\t\t\tif (_sync_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_ACCESS_ERR);\n\t\t\t\t}\n\n\t\t\t\t// timeout still should be measured relative to the start time of request\n\t\t\t\t_timeoutset_time = (new Date).getTime();\n\n\t\t\t\t_p('timeout', value);\n\t\t\t}\n\t\t});\n\n\t\t// the withCredentials attribute has no effect when fetching same-origin resources\n\t\to.defineProperty(this, 'withCredentials', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\treturn _p('withCredentials');\n\t\t\t},\n\n\t\t\tset: function(value) {\n\t\t\t\t// 1-2\n\t\t\t\tif (!~o.inArray(_p('readyState'), [XMLHttpRequest.UNSENT, XMLHttpRequest.OPENED]) || _send_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 3-4\n\t\t\t\tif (_anonymous_flag || _sync_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_ACCESS_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 5\n\t\t\t\t_p('withCredentials', value);\n\t\t\t}\n\t\t});\n\n\t\to.defineProperty(this, 'status', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\treturn _p('status');\n\t\t\t}\n\t\t});\n\n\t\to.defineProperty(this, 'statusText', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\treturn _p('statusText');\n\t\t\t}\n\t\t});\n\n\t\to.defineProperty(this, 'responseType', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\treturn _p('responseType');\n\t\t\t},\n\n\t\t\tset: function(value) {\n\t\t\t\t// 1\n\t\t\t\tif (!!~o.inArray(_p('readyState'), [XMLHttpRequest.LOADING, XMLHttpRequest.DONE])) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 2\n\t\t\t\tif (_sync_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_ACCESS_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 3\n\t\t\t\t_p('responseType', value.toLowerCase());\n\t\t\t}\n\t\t});\n\n\t\to.defineProperty(this, 'responseText', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\t// 1\n\t\t\t\tif (!~o.inArray(_p('responseType'), ['', 'text'])) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 2-3\n\t\t\t\tif (_p('readyState') !== XMLHttpRequest.DONE && _p('readyState') !== XMLHttpRequest.LOADING || _error_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\treturn _p('responseText');\n\t\t\t}\n\t\t});\n\n\t\to.defineProperty(this, 'responseXML', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\t// 1\n\t\t\t\tif (!~o.inArray(_p('responseType'), ['', 'document'])) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 2-3\n\t\t\t\tif (_p('readyState') !== XMLHttpRequest.DONE || _error_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\treturn _p('responseXML');\n\t\t\t}\n\t\t});\n\n\t\to.defineProperty(this, 'response', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\tif (!!~o.inArray(_p('responseType'), ['', 'text'])) {\n\t\t\t\t\tif (_p('readyState') !== XMLHttpRequest.DONE && _p('readyState') !== XMLHttpRequest.LOADING || _error_flag) {\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (_p('readyState') !== XMLHttpRequest.DONE || _error_flag) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn _p('response');\n\t\t\t}\n\t\t});\n\n\t\t*/\n\n\t\tfunction _p(prop, value) {\n\t\t\tif (!props.hasOwnProperty(prop)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (arguments.length === 1) { // get\n\t\t\t\treturn Env.can('define_property') ? props[prop] : self[prop];\n\t\t\t} else { // set\n\t\t\t\tif (Env.can('define_property')) {\n\t\t\t\t\tprops[prop] = value;\n\t\t\t\t} else {\n\t\t\t\t\tself[prop] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t/*\n\t\tfunction _toASCII(str, AllowUnassigned, UseSTD3ASCIIRules) {\n\t\t\t// TODO: http://tools.ietf.org/html/rfc3490#section-4.1\n\t\t\treturn str.toLowerCase();\n\t\t}\n\t\t*/\n\t\t\n\t\t\n\t\tfunction _doXHR(data) {\n\t\t\tvar self = this;\n\t\t\t\n\t\t\t_start_time = new Date().getTime();\n\n\t\t\t_xhr = new RuntimeTarget();\n\n\t\t\tfunction loadEnd() {\n\t\t\t\tif (_xhr) { // it could have been destroyed by now\n\t\t\t\t\t_xhr.destroy();\n\t\t\t\t\t_xhr = null;\n\t\t\t\t}\n\t\t\t\tself.dispatchEvent('loadend');\n\t\t\t\tself = null;\n\t\t\t}\n\n\t\t\tfunction exec(runtime) {\n\t\t\t\t_xhr.bind('LoadStart', function(e) {\n\t\t\t\t\t_p('readyState', XMLHttpRequest.LOADING);\n\t\t\t\t\tself.dispatchEvent('readystatechange');\n\n\t\t\t\t\tself.dispatchEvent(e);\n\t\t\t\t\t\n\t\t\t\t\tif (_upload_events_flag) {\n\t\t\t\t\t\tself.upload.dispatchEvent(e);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t_xhr.bind('Progress', function(e) {\n\t\t\t\t\tif (_p('readyState') !== XMLHttpRequest.LOADING) {\n\t\t\t\t\t\t_p('readyState', XMLHttpRequest.LOADING); // LoadStart unreliable (in Flash for example)\n\t\t\t\t\t\tself.dispatchEvent('readystatechange');\n\t\t\t\t\t}\n\t\t\t\t\tself.dispatchEvent(e);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t_xhr.bind('UploadProgress', function(e) {\n\t\t\t\t\tif (_upload_events_flag) {\n\t\t\t\t\t\tself.upload.dispatchEvent({\n\t\t\t\t\t\t\ttype: 'progress',\n\t\t\t\t\t\t\tlengthComputable: false,\n\t\t\t\t\t\t\ttotal: e.total,\n\t\t\t\t\t\t\tloaded: e.loaded\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t_xhr.bind('Load', function(e) {\n\t\t\t\t\t_p('readyState', XMLHttpRequest.DONE);\n\t\t\t\t\t_p('status', Number(runtime.exec.call(_xhr, 'XMLHttpRequest', 'getStatus') || 0));\n\t\t\t\t\t_p('statusText', httpCode[_p('status')] || \"\");\n\t\t\t\t\t\n\t\t\t\t\t_p('response', runtime.exec.call(_xhr, 'XMLHttpRequest', 'getResponse', _p('responseType')));\n\n\t\t\t\t\tif (!!~Basic.inArray(_p('responseType'), ['text', ''])) {\n\t\t\t\t\t\t_p('responseText', _p('response'));\n\t\t\t\t\t} else if (_p('responseType') === 'document') {\n\t\t\t\t\t\t_p('responseXML', _p('response'));\n\t\t\t\t\t}\n\n\t\t\t\t\t_responseHeaders = runtime.exec.call(_xhr, 'XMLHttpRequest', 'getAllResponseHeaders');\n\n\t\t\t\t\tself.dispatchEvent('readystatechange');\n\t\t\t\t\t\n\t\t\t\t\tif (_p('status') > 0) { // status 0 usually means that server is unreachable\n\t\t\t\t\t\tif (_upload_events_flag) {\n\t\t\t\t\t\t\tself.upload.dispatchEvent(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.dispatchEvent(e);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_error_flag = true;\n\t\t\t\t\t\tself.dispatchEvent('error');\n\t\t\t\t\t}\n\t\t\t\t\tloadEnd();\n\t\t\t\t});\n\n\t\t\t\t_xhr.bind('Abort', function(e) {\n\t\t\t\t\tself.dispatchEvent(e);\n\t\t\t\t\tloadEnd();\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t_xhr.bind('Error', function(e) {\n\t\t\t\t\t_error_flag = true;\n\t\t\t\t\t_p('readyState', XMLHttpRequest.DONE);\n\t\t\t\t\tself.dispatchEvent('readystatechange');\n\t\t\t\t\t_upload_complete_flag = true;\n\t\t\t\t\tself.dispatchEvent(e);\n\t\t\t\t\tloadEnd();\n\t\t\t\t});\n\n\t\t\t\truntime.exec.call(_xhr, 'XMLHttpRequest', 'send', {\n\t\t\t\t\turl: _url,\n\t\t\t\t\tmethod: _method,\n\t\t\t\t\tasync: _async,\n\t\t\t\t\tuser: _user,\n\t\t\t\t\tpassword: _password,\n\t\t\t\t\theaders: _headers,\n\t\t\t\t\tmimeType: _mimeType,\n\t\t\t\t\tencoding: _encoding,\n\t\t\t\t\tresponseType: self.responseType,\n\t\t\t\t\twithCredentials: self.withCredentials,\n\t\t\t\t\toptions: _options\n\t\t\t\t}, data);\n\t\t\t}\n\n\t\t\t// clarify our requirements\n\t\t\tif (typeof(_options.required_caps) === 'string') {\n\t\t\t\t_options.required_caps = Runtime.parseCaps(_options.required_caps);\n\t\t\t}\n\n\t\t\t_options.required_caps = Basic.extend({}, _options.required_caps, {\n\t\t\t\treturn_response_type: self.responseType\n\t\t\t});\n\n\t\t\tif (data instanceof FormData) {\n\t\t\t\t_options.required_caps.send_multipart = true;\n\t\t\t}\n\n\t\t\tif (!_same_origin_flag) {\n\t\t\t\t_options.required_caps.do_cors = true;\n\t\t\t}\n\t\t\t\n\n\t\t\tif (_options.ruid) { // we do not need to wait if we can connect directly\n\t\t\t\texec(_xhr.connectRuntime(_options));\n\t\t\t} else {\n\t\t\t\t_xhr.bind('RuntimeInit', function(e, runtime) {\n\t\t\t\t\texec(runtime);\n\t\t\t\t});\n\t\t\t\t_xhr.bind('RuntimeError', function(e, err) {\n\t\t\t\t\tself.dispatchEvent('RuntimeError', err);\n\t\t\t\t});\n\t\t\t\t_xhr.connectRuntime(_options);\n\t\t\t}\n\t\t}\n\t\n\t\t\n\t\tfunction _reset() {\n\t\t\t_p('responseText', \"\");\n\t\t\t_p('responseXML', null);\n\t\t\t_p('response', null);\n\t\t\t_p('status', 0);\n\t\t\t_p('statusText', \"\");\n\t\t\t_start_time = _timeoutset_time = null;\n\t\t}\n\t}\n\n\tXMLHttpRequest.UNSENT = 0;\n\tXMLHttpRequest.OPENED = 1;\n\tXMLHttpRequest.HEADERS_RECEIVED = 2;\n\tXMLHttpRequest.LOADING = 3;\n\tXMLHttpRequest.DONE = 4;\n\t\n\tXMLHttpRequest.prototype = EventTarget.instance;\n\n\treturn XMLHttpRequest;\n});\n\n// Included from: src/javascript/runtime/Transporter.js\n\n/**\n * Transporter.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine(\"moxie/runtime/Transporter\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Encode\",\n\t\"moxie/runtime/RuntimeClient\",\n\t\"moxie/core/EventTarget\"\n], function(Basic, Encode, RuntimeClient, EventTarget) {\n\tfunction Transporter() {\n\t\tvar mod, _runtime, _data, _size, _pos, _chunk_size;\n\n\t\tRuntimeClient.call(this);\n\n\t\tBasic.extend(this, {\n\t\t\tuid: Basic.guid('uid_'),\n\n\t\t\tstate: Transporter.IDLE,\n\n\t\t\tresult: null,\n\n\t\t\ttransport: function(data, type, options) {\n\t\t\t\tvar self = this;\n\n\t\t\t\toptions = Basic.extend({\n\t\t\t\t\tchunk_size: 204798\n\t\t\t\t}, options);\n\n\t\t\t\t// should divide by three, base64 requires this\n\t\t\t\tif ((mod = options.chunk_size % 3)) {\n\t\t\t\t\toptions.chunk_size += 3 - mod;\n\t\t\t\t}\n\n\t\t\t\t_chunk_size = options.chunk_size;\n\n\t\t\t\t_reset.call(this);\n\t\t\t\t_data = data;\n\t\t\t\t_size = data.length;\n\n\t\t\t\tif (Basic.typeOf(options) === 'string' || options.ruid) {\n\t\t\t\t\t_run.call(self, type, this.connectRuntime(options));\n\t\t\t\t} else {\n\t\t\t\t\t// we require this to run only once\n\t\t\t\t\tvar cb = function(e, runtime) {\n\t\t\t\t\t\tself.unbind(\"RuntimeInit\", cb);\n\t\t\t\t\t\t_run.call(self, type, runtime);\n\t\t\t\t\t};\n\t\t\t\t\tthis.bind(\"RuntimeInit\", cb);\n\t\t\t\t\tthis.connectRuntime(options);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tvar self = this;\n\n\t\t\t\tself.state = Transporter.IDLE;\n\t\t\t\tif (_runtime) {\n\t\t\t\t\t_runtime.exec.call(self, 'Transporter', 'clear');\n\t\t\t\t\tself.trigger(\"TransportingAborted\");\n\t\t\t\t}\n\n\t\t\t\t_reset.call(self);\n\t\t\t},\n\n\n\t\t\tdestroy: function() {\n\t\t\t\tthis.unbindAll();\n\t\t\t\t_runtime = null;\n\t\t\t\tthis.disconnectRuntime();\n\t\t\t\t_reset.call(this);\n\t\t\t}\n\t\t});\n\n\t\tfunction _reset() {\n\t\t\t_size = _pos = 0;\n\t\t\t_data = this.result = null;\n\t\t}\n\n\t\tfunction _run(type, runtime) {\n\t\t\tvar self = this;\n\n\t\t\t_runtime = runtime;\n\n\t\t\t//self.unbind(\"RuntimeInit\");\n\n\t\t\tself.bind(\"TransportingProgress\", function(e) {\n\t\t\t\t_pos = e.loaded;\n\n\t\t\t\tif (_pos < _size && Basic.inArray(self.state, [Transporter.IDLE, Transporter.DONE]) === -1) {\n\t\t\t\t\t_transport.call(self);\n\t\t\t\t}\n\t\t\t}, 999);\n\n\t\t\tself.bind(\"TransportingComplete\", function() {\n\t\t\t\t_pos = _size;\n\t\t\t\tself.state = Transporter.DONE;\n\t\t\t\t_data = null; // clean a bit\n\t\t\t\tself.result = _runtime.exec.call(self, 'Transporter', 'getAsBlob', type || '');\n\t\t\t}, 999);\n\n\t\t\tself.state = Transporter.BUSY;\n\t\t\tself.trigger(\"TransportingStarted\");\n\t\t\t_transport.call(self);\n\t\t}\n\n\t\tfunction _transport() {\n\t\t\tvar self = this,\n\t\t\t\tchunk,\n\t\t\t\tbytesLeft = _size - _pos;\n\n\t\t\tif (_chunk_size > bytesLeft) {\n\t\t\t\t_chunk_size = bytesLeft;\n\t\t\t}\n\n\t\t\tchunk = Encode.btoa(_data.substr(_pos, _chunk_size));\n\t\t\t_runtime.exec.call(self, 'Transporter', 'receive', chunk, _size);\n\t\t}\n\t}\n\n\tTransporter.IDLE = 0;\n\tTransporter.BUSY = 1;\n\tTransporter.DONE = 2;\n\n\tTransporter.prototype = EventTarget.instance;\n\n\treturn Transporter;\n});\n\n// Included from: src/javascript/image/Image.js\n\n/**\n * Image.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine(\"moxie/image/Image\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/file/FileReaderSync\",\n\t\"moxie/xhr/XMLHttpRequest\",\n\t\"moxie/runtime/Runtime\",\n\t\"moxie/runtime/RuntimeClient\",\n\t\"moxie/runtime/Transporter\",\n\t\"moxie/core/utils/Env\",\n\t\"moxie/core/EventTarget\",\n\t\"moxie/file/Blob\",\n\t\"moxie/file/File\",\n\t\"moxie/core/utils/Encode\"\n], function(Basic, Dom, x, FileReaderSync, XMLHttpRequest, Runtime, RuntimeClient, Transporter, Env, EventTarget, Blob, File, Encode) {\n\t/**\n\tImage preloading and manipulation utility. Additionally it provides access to image meta info (Exif, GPS) and raw binary data.\n\n\t@class Image\n\t@constructor\n\t@extends EventTarget\n\t*/\n\tvar dispatches = [\n\t\t'progress',\n\n\t\t/**\n\t\tDispatched when loading is complete.\n\n\t\t@event load\n\t\t@param {Object} event\n\t\t*/\n\t\t'load',\n\n\t\t'error',\n\n\t\t/**\n\t\tDispatched when resize operation is complete.\n\t\t\n\t\t@event resize\n\t\t@param {Object} event\n\t\t*/\n\t\t'resize',\n\n\t\t/**\n\t\tDispatched when visual representation of the image is successfully embedded\n\t\tinto the corresponsing container.\n\n\t\t@event embedded\n\t\t@param {Object} event\n\t\t*/\n\t\t'embedded'\n\t];\n\n\tfunction Image() {\n\t\tRuntimeClient.call(this);\n\n\t\tBasic.extend(this, {\n\t\t\t/**\n\t\t\tUnique id of the component\n\n\t\t\t@property uid\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\tuid: Basic.guid('uid_'),\n\n\t\t\t/**\n\t\t\tUnique id of the connected runtime, if any.\n\n\t\t\t@property ruid\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\truid: null,\n\n\t\t\t/**\n\t\t\tName of the file, that was used to create an image, if available. If not equals to empty string.\n\n\t\t\t@property name\n\t\t\t@type {String}\n\t\t\t@default \"\"\n\t\t\t*/\n\t\t\tname: \"\",\n\n\t\t\t/**\n\t\t\tSize of the image in bytes. Actual value is set only after image is preloaded.\n\n\t\t\t@property size\n\t\t\t@type {Number}\n\t\t\t@default 0\n\t\t\t*/\n\t\t\tsize: 0,\n\n\t\t\t/**\n\t\t\tWidth of the image. Actual value is set only after image is preloaded.\n\n\t\t\t@property width\n\t\t\t@type {Number}\n\t\t\t@default 0\n\t\t\t*/\n\t\t\twidth: 0,\n\n\t\t\t/**\n\t\t\tHeight of the image. Actual value is set only after image is preloaded.\n\n\t\t\t@property height\n\t\t\t@type {Number}\n\t\t\t@default 0\n\t\t\t*/\n\t\t\theight: 0,\n\n\t\t\t/**\n\t\t\tMime type of the image. Currently only image/jpeg and image/png are supported. Actual value is set only after image is preloaded.\n\n\t\t\t@property type\n\t\t\t@type {String}\n\t\t\t@default \"\"\n\t\t\t*/\n\t\t\ttype: \"\",\n\n\t\t\t/**\n\t\t\tHolds meta info (Exif, GPS). Is populated only for image/jpeg. Actual value is set only after image is preloaded.\n\n\t\t\t@property meta\n\t\t\t@type {Object}\n\t\t\t@default {}\n\t\t\t*/\n\t\t\tmeta: {},\n\n\t\t\t/**\n\t\t\tAlias for load method, that takes another mOxie.Image object as a source (see load).\n\n\t\t\t@method clone\n\t\t\t@param {Image} src Source for the image\n\t\t\t@param {Boolean} [exact=false] Whether to activate in-depth clone mode\n\t\t\t*/\n\t\t\tclone: function() {\n\t\t\t\tthis.load.apply(this, arguments);\n\t\t\t},\n\n\t\t\t/**\n\t\t\tLoads image from various sources. Currently the source for new image can be: mOxie.Image, mOxie.Blob/mOxie.File, \n\t\t\tnative Blob/File, dataUrl or URL. Depending on the type of the source, arguments - differ. When source is URL, \n\t\t\tImage will be downloaded from remote destination and loaded in memory.\n\n\t\t\t@example\n\t\t\t\tvar img = new mOxie.Image();\n\t\t\t\timg.onload = function() {\n\t\t\t\t\tvar blob = img.getAsBlob();\n\t\t\t\t\t\n\t\t\t\t\tvar formData = new mOxie.FormData();\n\t\t\t\t\tformData.append('file', blob);\n\n\t\t\t\t\tvar xhr = new mOxie.XMLHttpRequest();\n\t\t\t\t\txhr.onload = function() {\n\t\t\t\t\t\t// upload complete\n\t\t\t\t\t};\n\t\t\t\t\txhr.open('post', 'upload.php');\n\t\t\t\t\txhr.send(formData);\n\t\t\t\t};\n\t\t\t\timg.load(\"http://www.moxiecode.com/images/mox-logo.jpg\"); // notice file extension (.jpg)\n\t\t\t\n\n\t\t\t@method load\n\t\t\t@param {Image|Blob|File|String} src Source for the image\n\t\t\t@param {Boolean|Object} [mixed]\n\t\t\t*/\n\t\t\tload: function() {\n\t\t\t\t// this is here because to bind properly we need an uid first, which is created above\n\t\t\t\tthis.bind('Load Resize', function() {\n\t\t\t\t\t_updateInfo.call(this);\n\t\t\t\t}, 999);\n\n\t\t\t\tthis.convertEventPropsToHandlers(dispatches);\n\n\t\t\t\t_load.apply(this, arguments);\n\t\t\t},\n\n\t\t\t/**\n\t\t\tDownsizes the image to fit the specified width/height. If crop is supplied, image will be cropped to exact dimensions.\n\n\t\t\t@method downsize\n\t\t\t@param {Number} width Resulting width\n\t\t\t@param {Number} [height=width] Resulting height (optional, if not supplied will default to width)\n\t\t\t@param {Boolean} [crop=false] Whether to crop the image to exact dimensions\n\t\t\t@param {Boolean} [preserveHeaders=true] Whether to preserve meta headers (on JPEGs after resize)\n\t\t\t*/\n\t\t\tdownsize: function(opts) {\n\t\t\t\tvar defaults = {\n\t\t\t\t\twidth: this.width,\n\t\t\t\t\theight: this.height,\n\t\t\t\t\tcrop: false,\n\t\t\t\t\tpreserveHeaders: true\n\t\t\t\t};\n\n\t\t\t\tif (typeof(opts) === 'object') {\n\t\t\t\t\topts = Basic.extend(defaults, opts);\n\t\t\t\t} else {\n\t\t\t\t\topts = Basic.extend(defaults, {\n\t\t\t\t\t\twidth: arguments[0],\n\t\t\t\t\t\theight: arguments[1],\n\t\t\t\t\t\tcrop: arguments[2],\n\t\t\t\t\t\tpreserveHeaders: arguments[3]\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tif (!this.size) { // only preloaded image objects can be used as source\n\t\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t\t}\n\n\t\t\t\t\t// no way to reliably intercept the crash due to high resolution, so we simply avoid it\n\t\t\t\t\tif (this.width > Image.MAX_RESIZE_WIDTH || this.height > Image.MAX_RESIZE_HEIGHT) {\n\t\t\t\t\t\tthrow new x.ImageError(x.ImageError.MAX_RESOLUTION_ERR);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.getRuntime().exec.call(this, 'Image', 'downsize', opts.width, opts.height, opts.crop, opts.preserveHeaders);\n\t\t\t\t} catch(ex) {\n\t\t\t\t\t// for now simply trigger error event\n\t\t\t\t\tthis.trigger('error', ex.code);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\tAlias for downsize(width, height, true). (see downsize)\n\t\t\t\n\t\t\t@method crop\n\t\t\t@param {Number} width Resulting width\n\t\t\t@param {Number} [height=width] Resulting height (optional, if not supplied will default to width)\n\t\t\t@param {Boolean} [preserveHeaders=true] Whether to preserve meta headers (on JPEGs after resize)\n\t\t\t*/\n\t\t\tcrop: function(width, height, preserveHeaders) {\n\t\t\t\tthis.downsize(width, height, true, preserveHeaders);\n\t\t\t},\n\n\t\t\tgetAsCanvas: function() {\n\t\t\t\tif (!Env.can('create_canvas')) {\n\t\t\t\t\tthrow new x.RuntimeError(x.RuntimeError.NOT_SUPPORTED_ERR);\n\t\t\t\t}\n\n\t\t\t\tvar runtime = this.connectRuntime(this.ruid);\n\t\t\t\treturn runtime.exec.call(this, 'Image', 'getAsCanvas');\n\t\t\t},\n\n\t\t\t/**\n\t\t\tRetrieves image in it's current state as mOxie.Blob object. Cannot be run on empty or image in progress (throws\n\t\t\tDOMException.INVALID_STATE_ERR).\n\n\t\t\t@method getAsBlob\n\t\t\t@param {String} [type=\"image/jpeg\"] Mime type of resulting blob. Can either be image/jpeg or image/png\n\t\t\t@param {Number} [quality=90] Applicable only together with mime type image/jpeg\n\t\t\t@return {Blob} Image as Blob\n\t\t\t*/\n\t\t\tgetAsBlob: function(type, quality) {\n\t\t\t\tif (!this.size) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\tif (!type) {\n\t\t\t\t\ttype = 'image/jpeg';\n\t\t\t\t}\n\n\t\t\t\tif (type === 'image/jpeg' && !quality) {\n\t\t\t\t\tquality = 90;\n\t\t\t\t}\n\n\t\t\t\treturn this.getRuntime().exec.call(this, 'Image', 'getAsBlob', type, quality);\n\t\t\t},\n\n\t\t\t/**\n\t\t\tRetrieves image in it's current state as dataURL string. Cannot be run on empty or image in progress (throws\n\t\t\tDOMException.INVALID_STATE_ERR).\n\n\t\t\t@method getAsDataURL\n\t\t\t@param {String} [type=\"image/jpeg\"] Mime type of resulting blob. Can either be image/jpeg or image/png\n\t\t\t@param {Number} [quality=90] Applicable only together with mime type image/jpeg\n\t\t\t@return {String} Image as dataURL string\n\t\t\t*/\n\t\t\tgetAsDataURL: function(type, quality) {\n\t\t\t\tif (!this.size) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\t\t\t\treturn this.getRuntime().exec.call(this, 'Image', 'getAsDataURL', type, quality);\n\t\t\t},\n\n\t\t\t/**\n\t\t\tRetrieves image in it's current state as binary string. Cannot be run on empty or image in progress (throws\n\t\t\tDOMException.INVALID_STATE_ERR).\n\n\t\t\t@method getAsBinaryString\n\t\t\t@param {String} [type=\"image/jpeg\"] Mime type of resulting blob. Can either be image/jpeg or image/png\n\t\t\t@param {Number} [quality=90] Applicable only together with mime type image/jpeg\n\t\t\t@return {String} Image as binary string\n\t\t\t*/\n\t\t\tgetAsBinaryString: function(type, quality) {\n\t\t\t\tvar dataUrl = this.getAsDataURL(type, quality);\n\t\t\t\treturn Encode.atob(dataUrl.substring(dataUrl.indexOf('base64,') + 7));\n\t\t\t},\n\n\t\t\t/**\n\t\t\tEmbeds a visual representation of the image into the specified node. Depending on the runtime, \n\t\t\tit might be a canvas, an img node or a thrid party shim object (Flash or SilverLight - very rare, \n\t\t\tcan be used in legacy browsers that do not have canvas or proper dataURI support).\n\n\t\t\t@method embed\n\t\t\t@param {DOMElement} el DOM element to insert the image object into\n\t\t\t@param {Object} [options]\n\t\t\t\t@param {Number} [options.width] The width of an embed (defaults to the image width)\n\t\t\t\t@param {Number} [options.height] The height of an embed (defaults to the image height)\n\t\t\t\t@param {String} [type=\"image/jpeg\"] Mime type\n\t\t\t\t@param {Number} [quality=90] Quality of an embed, if mime type is image/jpeg\n\t\t\t\t@param {Boolean} [crop=false] Whether to crop an embed to the specified dimensions\n\t\t\t*/\n\t\t\tembed: function(el) {\n\t\t\t\tvar self = this\n\t\t\t\t, imgCopy\n\t\t\t\t, type, quality, crop\n\t\t\t\t, options = arguments[1] || {}\n\t\t\t\t, width = this.width\n\t\t\t\t, height = this.height\n\t\t\t\t, runtime // this has to be outside of all the closures to contain proper runtime\n\t\t\t\t;\n\n\t\t\t\tfunction onResize() {\n\t\t\t\t\t// if possible, embed a canvas element directly\n\t\t\t\t\tif (Env.can('create_canvas')) {\n\t\t\t\t\t\tvar canvas = imgCopy.getAsCanvas();\n\t\t\t\t\t\tif (canvas) {\n\t\t\t\t\t\t\tel.appendChild(canvas);\n\t\t\t\t\t\t\tcanvas = null;\n\t\t\t\t\t\t\timgCopy.destroy();\n\t\t\t\t\t\t\tself.trigger('embedded');\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar dataUrl = imgCopy.getAsDataURL(type, quality);\n\t\t\t\t\tif (!dataUrl) {\n\t\t\t\t\t\tthrow new x.ImageError(x.ImageError.WRONG_FORMAT);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Env.can('use_data_uri_of', dataUrl.length)) {\n\t\t\t\t\t\tel.innerHTML = '<img src=\"' + dataUrl + '\" width=\"' + imgCopy.width + '\" height=\"' + imgCopy.height + '\" />';\n\t\t\t\t\t\timgCopy.destroy();\n\t\t\t\t\t\tself.trigger('embedded');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar tr = new Transporter();\n\n\t\t\t\t\t\ttr.bind(\"TransportingComplete\", function() {\n\t\t\t\t\t\t\truntime = self.connectRuntime(this.result.ruid);\n\n\t\t\t\t\t\t\tself.bind(\"Embedded\", function() {\n\t\t\t\t\t\t\t\t// position and size properly\n\t\t\t\t\t\t\t\tBasic.extend(runtime.getShimContainer().style, {\n\t\t\t\t\t\t\t\t\t//position: 'relative',\n\t\t\t\t\t\t\t\t\ttop: '0px',\n\t\t\t\t\t\t\t\t\tleft: '0px',\n\t\t\t\t\t\t\t\t\twidth: imgCopy.width + 'px',\n\t\t\t\t\t\t\t\t\theight: imgCopy.height + 'px'\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t// some shims (Flash/SilverLight) reinitialize, if parent element is hidden, reordered or it's\n\t\t\t\t\t\t\t\t// position type changes (in Gecko), but since we basically need this only in IEs 6/7 and\n\t\t\t\t\t\t\t\t// sometimes 8 and they do not have this problem, we can comment this for now\n\t\t\t\t\t\t\t\t/*tr.bind(\"RuntimeInit\", function(e, runtime) {\n\t\t\t\t\t\t\t\t\ttr.destroy();\n\t\t\t\t\t\t\t\t\truntime.destroy();\n\t\t\t\t\t\t\t\t\tonResize.call(self); // re-feed our image data\n\t\t\t\t\t\t\t\t});*/\n\n\t\t\t\t\t\t\t\truntime = null;\n\t\t\t\t\t\t\t}, 999);\n\n\t\t\t\t\t\t\truntime.exec.call(self, \"ImageView\", \"display\", this.result.uid, width, height);\n\t\t\t\t\t\t\timgCopy.destroy();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\ttr.transport(Encode.atob(dataUrl.substring(dataUrl.indexOf('base64,') + 7)), type, Basic.extend({}, options, {\n\t\t\t\t\t\t\trequired_caps: {\n\t\t\t\t\t\t\t\tdisplay_media: true\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\truntime_order: 'flash,silverlight',\n\t\t\t\t\t\t\tcontainer: el\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tif (!(el = Dom.get(el))) {\n\t\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_NODE_TYPE_ERR);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!this.size) { // only preloaded image objects can be used as source\n\t\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.width > Image.MAX_RESIZE_WIDTH || this.height > Image.MAX_RESIZE_HEIGHT) {\n\t\t\t\t\t\tthrow new x.ImageError(x.ImageError.MAX_RESOLUTION_ERR);\n\t\t\t\t\t}\n\n\t\t\t\t\ttype = options.type || this.type || 'image/jpeg';\n\t\t\t\t\tquality = options.quality || 90;\n\t\t\t\t\tcrop = Basic.typeOf(options.crop) !== 'undefined' ? options.crop : false;\n\n\t\t\t\t\t// figure out dimensions for the thumb\n\t\t\t\t\tif (options.width) {\n\t\t\t\t\t\twidth = options.width;\n\t\t\t\t\t\theight = options.height || width;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// if container element has measurable dimensions, use them\n\t\t\t\t\t\tvar dimensions = Dom.getSize(el);\n\t\t\t\t\t\tif (dimensions.w && dimensions.h) { // both should be > 0\n\t\t\t\t\t\t\twidth = dimensions.w;\n\t\t\t\t\t\t\theight = dimensions.h;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\timgCopy = new Image();\n\n\t\t\t\t\timgCopy.bind(\"Resize\", function() {\n\t\t\t\t\t\tonResize.call(self);\n\t\t\t\t\t});\n\n\t\t\t\t\timgCopy.bind(\"Load\", function() {\n\t\t\t\t\t\timgCopy.downsize(width, height, crop, false);\n\t\t\t\t\t});\n\n\t\t\t\t\timgCopy.clone(this, false);\n\n\t\t\t\t\treturn imgCopy;\n\t\t\t\t} catch(ex) {\n\t\t\t\t\t// for now simply trigger error event\n\t\t\t\t\tthis.trigger('error', ex.code);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\tProperly destroys the image and frees resources in use. If any. Recommended way to dispose mOxie.Image object.\n\n\t\t\t@method destroy\n\t\t\t*/\n\t\t\tdestroy: function() {\n\t\t\t\tif (this.ruid) {\n\t\t\t\t\tthis.getRuntime().exec.call(this, 'Image', 'destroy');\n\t\t\t\t\tthis.disconnectRuntime();\n\t\t\t\t}\n\t\t\t\tthis.unbindAll();\n\t\t\t}\n\t\t});\n\n\n\t\tfunction _updateInfo(info) {\n\t\t\tif (!info) {\n\t\t\t\tinfo = this.getRuntime().exec.call(this, 'Image', 'getInfo');\n\t\t\t}\n\n\t\t\tthis.size = info.size;\n\t\t\tthis.width = info.width;\n\t\t\tthis.height = info.height;\n\t\t\tthis.type = info.type;\n\t\t\tthis.meta = info.meta;\n\n\t\t\t// update file name, only if empty\n\t\t\tif (this.name === '') {\n\t\t\t\tthis.name = info.name;\n\t\t\t}\n\t\t}\n\t\t\n\n\t\tfunction _load(src) {\n\t\t\tvar srcType = Basic.typeOf(src);\n\n\t\t\ttry {\n\t\t\t\t// if source is Image\n\t\t\t\tif (src instanceof Image) {\n\t\t\t\t\tif (!src.size) { // only preloaded image objects can be used as source\n\t\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t\t}\n\t\t\t\t\t_loadFromImage.apply(this, arguments);\n\t\t\t\t}\n\t\t\t\t// if source is o.Blob/o.File\n\t\t\t\telse if (src instanceof Blob) {\n\t\t\t\t\tif (!~Basic.inArray(src.type, ['image/jpeg', 'image/png'])) {\n\t\t\t\t\t\tthrow new x.ImageError(x.ImageError.WRONG_FORMAT);\n\t\t\t\t\t}\n\t\t\t\t\t_loadFromBlob.apply(this, arguments);\n\t\t\t\t}\n\t\t\t\t// if native blob/file\n\t\t\t\telse if (Basic.inArray(srcType, ['blob', 'file']) !== -1) {\n\t\t\t\t\t_load.call(this, new File(null, src), arguments[1]);\n\t\t\t\t}\n\t\t\t\t// if String\n\t\t\t\telse if (srcType === 'string') {\n\t\t\t\t\t// if dataUrl String\n\t\t\t\t\tif (/^data:[^;]*;base64,/.test(src)) {\n\t\t\t\t\t\t_load.call(this, new Blob(null, { data: src }), arguments[1]);\n\t\t\t\t\t}\n\t\t\t\t\t// else assume Url, either relative or absolute\n\t\t\t\t\telse {\n\t\t\t\t\t\t_loadFromUrl.apply(this, arguments);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// if source seems to be an img node\n\t\t\t\telse if (srcType === 'node' && src.nodeName.toLowerCase() === 'img') {\n\t\t\t\t\t_load.call(this, src.src, arguments[1]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.TYPE_MISMATCH_ERR);\n\t\t\t\t}\n\t\t\t} catch(ex) {\n\t\t\t\t// for now simply trigger error event\n\t\t\t\tthis.trigger('error', ex.code);\n\t\t\t}\n\t\t}\n\n\n\t\tfunction _loadFromImage(img, exact) {\n\t\t\tvar runtime = this.connectRuntime(img.ruid);\n\t\t\tthis.ruid = runtime.uid;\n\t\t\truntime.exec.call(this, 'Image', 'loadFromImage', img, (Basic.typeOf(exact) === 'undefined' ? true : exact));\n\t\t}\n\n\n\t\tfunction _loadFromBlob(blob, options) {\n\t\t\tvar self = this;\n\n\t\t\tself.name = blob.name || '';\n\n\t\t\tfunction exec(runtime) {\n\t\t\t\tself.ruid = runtime.uid;\n\t\t\t\truntime.exec.call(self, 'Image', 'loadFromBlob', blob);\n\t\t\t}\n\n\t\t\tif (blob.isDetached()) {\n\t\t\t\tthis.bind('RuntimeInit', function(e, runtime) {\n\t\t\t\t\texec(runtime);\n\t\t\t\t});\n\n\t\t\t\t// convert to object representation\n\t\t\t\tif (options && typeof(options.required_caps) === 'string') {\n\t\t\t\t\toptions.required_caps = Runtime.parseCaps(options.required_caps);\n\t\t\t\t}\n\n\t\t\t\tthis.connectRuntime(Basic.extend({\n\t\t\t\t\trequired_caps: {\n\t\t\t\t\t\taccess_image_binary: true,\n\t\t\t\t\t\tresize_image: true\n\t\t\t\t\t}\n\t\t\t\t}, options));\n\t\t\t} else {\n\t\t\t\texec(this.connectRuntime(blob.ruid));\n\t\t\t}\n\t\t}\n\n\n\t\tfunction _loadFromUrl(url, options) {\n\t\t\tvar self = this, xhr;\n\n\t\t\txhr = new XMLHttpRequest();\n\n\t\t\txhr.open('get', url);\n\t\t\txhr.responseType = 'blob';\n\n\t\t\txhr.onprogress = function(e) {\n\t\t\t\tself.trigger(e);\n\t\t\t};\n\n\t\t\txhr.onload = function() {\n\t\t\t\t_loadFromBlob.call(self, xhr.response, true);\n\t\t\t};\n\n\t\t\txhr.onerror = function(e) {\n\t\t\t\tself.trigger(e);\n\t\t\t};\n\n\t\t\txhr.onloadend = function() {\n\t\t\t\txhr.destroy();\n\t\t\t};\n\n\t\t\txhr.bind('RuntimeError', function(e, err) {\n\t\t\t\tself.trigger('RuntimeError', err);\n\t\t\t});\n\n\t\t\txhr.send(null, options);\n\t\t}\n\t}\n\n\t// virtual world will crash on you if image has a resolution higher than this:\n\tImage.MAX_RESIZE_WIDTH = 6500;\n\tImage.MAX_RESIZE_HEIGHT = 6500; \n\n\tImage.prototype = EventTarget.instance;\n\n\treturn Image;\n});\n\n// Included from: src/javascript/runtime/html5/Runtime.js\n\n/**\n * Runtime.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/*global File:true */\n\n/**\nDefines constructor for HTML5 runtime.\n\n@class moxie/runtime/html5/Runtime\n@private\n*/\ndefine(\"moxie/runtime/html5/Runtime\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/runtime/Runtime\",\n\t\"moxie/core/utils/Env\"\n], function(Basic, x, Runtime, Env) {\n\t\n\tvar type = \"html5\", extensions = {};\n\t\n\tfunction Html5Runtime(options) {\n\t\tvar I = this\n\t\t, Test = Runtime.capTest\n\t\t, True = Runtime.capTrue\n\t\t;\n\n\t\tvar caps = Basic.extend({\n\t\t\t\taccess_binary: Test(window.FileReader || window.File && window.File.getAsDataURL),\n\t\t\t\taccess_image_binary: function() {\n\t\t\t\t\treturn I.can('access_binary') && !!extensions.Image;\n\t\t\t\t},\n\t\t\t\tdisplay_media: Test(Env.can('create_canvas') || Env.can('use_data_uri_over32kb')),\n\t\t\t\tdo_cors: Test(window.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest()),\n\t\t\t\tdrag_and_drop: Test(function() {\n\t\t\t\t\t// this comes directly from Modernizr: http://www.modernizr.com/\n\t\t\t\t\tvar div = document.createElement('div');\n\t\t\t\t\t// IE has support for drag and drop since version 5, but doesn't support dropping files from desktop\n\t\t\t\t\treturn (('draggable' in div) || ('ondragstart' in div && 'ondrop' in div)) && (Env.browser !== 'IE' || Env.version > 9);\n\t\t\t\t}()),\n\t\t\t\tfilter_by_extension: Test(function() { // if you know how to feature-detect this, please suggest\n\t\t\t\t\treturn (Env.browser === 'Chrome' && Env.version >= 28) || (Env.browser === 'IE' && Env.version >= 10);\n\t\t\t\t}()),\n\t\t\t\treturn_response_headers: True,\n\t\t\t\treturn_response_type: function(responseType) {\n\t\t\t\t\tif (responseType === 'json' && !!window.JSON) { // we can fake this one even if it's not supported\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} \n\t\t\t\t\treturn Env.can('return_response_type', responseType);\n\t\t\t\t},\n\t\t\t\treturn_status_code: True,\n\t\t\t\treport_upload_progress: Test(window.XMLHttpRequest && new XMLHttpRequest().upload),\n\t\t\t\tresize_image: function() {\n\t\t\t\t\treturn I.can('access_binary') && Env.can('create_canvas');\n\t\t\t\t},\n\t\t\t\tselect_file: function() {\n\t\t\t\t\treturn Env.can('use_fileinput') && window.File;\n\t\t\t\t},\n\t\t\t\tselect_folder: function() {\n\t\t\t\t\treturn I.can('select_file') && Env.browser === 'Chrome' && Env.version >= 21;\n\t\t\t\t},\n\t\t\t\tselect_multiple: function() {\n\t\t\t\t\t// it is buggy on Safari Windows and iOS\n\t\t\t\t\treturn I.can('select_file') && \n\t\t\t\t\t\t!(Env.browser === 'Safari' && Env.os === 'Windows') && \n\t\t\t\t\t\t!(Env.os === 'iOS' && Env.verComp(Env.osVersion, \"7.0.4\", '<'));\n\t\t\t\t},\n\t\t\t\tsend_binary_string: Test(window.XMLHttpRequest && (new XMLHttpRequest().sendAsBinary || (window.Uint8Array && window.ArrayBuffer))),\n\t\t\t\tsend_custom_headers: Test(window.XMLHttpRequest),\n\t\t\t\tsend_multipart: function() {\n\t\t\t\t\treturn !!(window.XMLHttpRequest && new XMLHttpRequest().upload && window.FormData) || I.can('send_binary_string');\n\t\t\t\t},\n\t\t\t\tslice_blob: Test(window.File && (File.prototype.mozSlice || File.prototype.webkitSlice || File.prototype.slice)),\n\t\t\t\tstream_upload: function(){\n\t\t\t\t\treturn I.can('slice_blob') && I.can('send_multipart');\n\t\t\t\t},\n\t\t\t\tsummon_file_dialog: Test(function() { // yeah... some dirty sniffing here...\n\t\t\t\t\treturn (Env.browser === 'Firefox' && Env.version >= 4) ||\n\t\t\t\t\t\t(Env.browser === 'Opera' && Env.version >= 12) ||\n\t\t\t\t\t\t(Env.browser === 'IE' && Env.version >= 10) ||\n\t\t\t\t\t\t!!~Basic.inArray(Env.browser, ['Chrome', 'Safari']);\n\t\t\t\t}()),\n\t\t\t\tupload_filesize: True\n\t\t\t}, \n\t\t\targuments[2]\n\t\t);\n\n\t\tRuntime.call(this, options, (arguments[1] || type), caps);\n\n\n\t\tBasic.extend(this, {\n\n\t\t\tinit : function() {\n\t\t\t\tthis.trigger(\"Init\");\n\t\t\t},\n\n\t\t\tdestroy: (function(destroy) { // extend default destroy method\n\t\t\t\treturn function() {\n\t\t\t\t\tdestroy.call(I);\n\t\t\t\t\tdestroy = I = null;\n\t\t\t\t};\n\t\t\t}(this.destroy))\n\t\t});\n\n\t\tBasic.extend(this.getShim(), extensions);\n\t}\n\n\tRuntime.addConstructor(type, Html5Runtime);\n\n\treturn extensions;\n});\n\n// Included from: src/javascript/runtime/html5/file/Blob.js\n\n/**\n * Blob.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/file/Blob\n@private\n*/\ndefine(\"moxie/runtime/html5/file/Blob\", [\n\t\"moxie/runtime/html5/Runtime\",\n\t\"moxie/file/Blob\"\n], function(extensions, Blob) {\n\n\tfunction HTML5Blob() {\n\t\tfunction w3cBlobSlice(blob, start, end) {\n\t\t\tvar blobSlice;\n\n\t\t\tif (window.File.prototype.slice) {\n\t\t\t\ttry {\n\t\t\t\t\tblob.slice();\t// depricated version will throw WRONG_ARGUMENTS_ERR exception\n\t\t\t\t\treturn blob.slice(start, end);\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// depricated slice method\n\t\t\t\t\treturn blob.slice(start, end - start);\n\t\t\t\t}\n\t\t\t// slice method got prefixed: https://bugzilla.mozilla.org/show_bug.cgi?id=649672\n\t\t\t} else if ((blobSlice = window.File.prototype.webkitSlice || window.File.prototype.mozSlice)) {\n\t\t\t\treturn blobSlice.call(blob, start, end);\n\t\t\t} else {\n\t\t\t\treturn null; // or throw some exception\n\t\t\t}\n\t\t}\n\n\t\tthis.slice = function() {\n\t\t\treturn new Blob(this.getRuntime().uid, w3cBlobSlice.apply(this, arguments));\n\t\t};\n\t}\n\n\treturn (extensions.Blob = HTML5Blob);\n});\n\n// Included from: src/javascript/core/utils/Events.js\n\n/**\n * Events.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/core/utils/Events', [\n\t'moxie/core/utils/Basic'\n], function(Basic) {\n\tvar eventhash = {}, uid = 'moxie_' + Basic.guid();\n\t\n\t// IE W3C like event funcs\n\tfunction preventDefault() {\n\t\tthis.returnValue = false;\n\t}\n\n\tfunction stopPropagation() {\n\t\tthis.cancelBubble = true;\n\t}\n\n\t/**\n\tAdds an event handler to the specified object and store reference to the handler\n\tin objects internal Plupload registry (@see removeEvent).\n\t\n\t@method addEvent\n\t@for Utils\n\t@static\n\t@param {Object} obj DOM element like object to add handler to.\n\t@param {String} name Name to add event listener to.\n\t@param {Function} callback Function to call when event occurs.\n\t@param {String} [key] that might be used to add specifity to the event record.\n\t*/\n\tvar addEvent = function(obj, name, callback, key) {\n\t\tvar func, events;\n\t\t\t\t\t\n\t\tname = name.toLowerCase();\n\n\t\t// Add event listener\n\t\tif (obj.addEventListener) {\n\t\t\tfunc = callback;\n\t\t\t\n\t\t\tobj.addEventListener(name, func, false);\n\t\t} else if (obj.attachEvent) {\n\t\t\tfunc = function() {\n\t\t\t\tvar evt = window.event;\n\n\t\t\t\tif (!evt.target) {\n\t\t\t\t\tevt.target = evt.srcElement;\n\t\t\t\t}\n\n\t\t\t\tevt.preventDefault = preventDefault;\n\t\t\t\tevt.stopPropagation = stopPropagation;\n\n\t\t\t\tcallback(evt);\n\t\t\t};\n\n\t\t\tobj.attachEvent('on' + name, func);\n\t\t}\n\t\t\n\t\t// Log event handler to objects internal mOxie registry\n\t\tif (!obj[uid]) {\n\t\t\tobj[uid] = Basic.guid();\n\t\t}\n\t\t\n\t\tif (!eventhash.hasOwnProperty(obj[uid])) {\n\t\t\teventhash[obj[uid]] = {};\n\t\t}\n\t\t\n\t\tevents = eventhash[obj[uid]];\n\t\t\n\t\tif (!events.hasOwnProperty(name)) {\n\t\t\tevents[name] = [];\n\t\t}\n\t\t\t\t\n\t\tevents[name].push({\n\t\t\tfunc: func,\n\t\t\torig: callback, // store original callback for IE\n\t\t\tkey: key\n\t\t});\n\t};\n\t\n\t\n\t/**\n\tRemove event handler from the specified object. If third argument (callback)\n\tis not specified remove all events with the specified name.\n\t\n\t@method removeEvent\n\t@static\n\t@param {Object} obj DOM element to remove event listener(s) from.\n\t@param {String} name Name of event listener to remove.\n\t@param {Function|String} [callback] might be a callback or unique key to match.\n\t*/\n\tvar removeEvent = function(obj, name, callback) {\n\t\tvar type, undef;\n\t\t\n\t\tname = name.toLowerCase();\n\t\t\n\t\tif (obj[uid] && eventhash[obj[uid]] && eventhash[obj[uid]][name]) {\n\t\t\ttype = eventhash[obj[uid]][name];\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t\t\t\n\t\tfor (var i = type.length - 1; i >= 0; i--) {\n\t\t\t// undefined or not, key should match\n\t\t\tif (type[i].orig === callback || type[i].key === callback) {\n\t\t\t\tif (obj.removeEventListener) {\n\t\t\t\t\tobj.removeEventListener(name, type[i].func, false);\n\t\t\t\t} else if (obj.detachEvent) {\n\t\t\t\t\tobj.detachEvent('on'+name, type[i].func);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttype[i].orig = null;\n\t\t\t\ttype[i].func = null;\n\t\t\t\ttype.splice(i, 1);\n\t\t\t\t\n\t\t\t\t// If callback was passed we are done here, otherwise proceed\n\t\t\t\tif (callback !== undef) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// If event array got empty, remove it\n\t\tif (!type.length) {\n\t\t\tdelete eventhash[obj[uid]][name];\n\t\t}\n\t\t\n\t\t// If mOxie registry has become empty, remove it\n\t\tif (Basic.isEmptyObj(eventhash[obj[uid]])) {\n\t\t\tdelete eventhash[obj[uid]];\n\t\t\t\n\t\t\t// IE doesn't let you remove DOM object property with - delete\n\t\t\ttry {\n\t\t\t\tdelete obj[uid];\n\t\t\t} catch(e) {\n\t\t\t\tobj[uid] = undef;\n\t\t\t}\n\t\t}\n\t};\n\t\n\t\n\t/**\n\tRemove all kind of events from the specified object\n\t\n\t@method removeAllEvents\n\t@static\n\t@param {Object} obj DOM element to remove event listeners from.\n\t@param {String} [key] unique key to match, when removing events.\n\t*/\n\tvar removeAllEvents = function(obj, key) {\t\t\n\t\tif (!obj || !obj[uid]) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tBasic.each(eventhash[obj[uid]], function(events, name) {\n\t\t\tremoveEvent(obj, name, key);\n\t\t});\n\t};\n\n\treturn {\n\t\taddEvent: addEvent,\n\t\tremoveEvent: removeEvent,\n\t\tremoveAllEvents: removeAllEvents\n\t};\n});\n\n// Included from: src/javascript/runtime/html5/file/FileInput.js\n\n/**\n * FileInput.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/file/FileInput\n@private\n*/\ndefine(\"moxie/runtime/html5/file/FileInput\", [\n\t\"moxie/runtime/html5/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/utils/Events\",\n\t\"moxie/core/utils/Mime\",\n\t\"moxie/core/utils/Env\"\n], function(extensions, Basic, Dom, Events, Mime, Env) {\n\t\n\tfunction FileInput() {\n\t\tvar _files = [], _options;\n\n\t\tBasic.extend(this, {\n\t\t\tinit: function(options) {\n\t\t\t\tvar comp = this, I = comp.getRuntime(), input, shimContainer, mimes, browseButton, zIndex, top;\n\n\t\t\t\t_options = options;\n\t\t\t\t_files = [];\n\n\t\t\t\t// figure out accept string\n\t\t\t\tmimes = _options.accept.mimes || Mime.extList2mimes(_options.accept, I.can('filter_by_extension'));\n\n\t\t\t\tshimContainer = I.getShimContainer();\n\n\t\t\t\tshimContainer.innerHTML = '<input id=\"' + I.uid +'\" type=\"file\" style=\"font-size:999px;opacity:0;\"' +\n\t\t\t\t\t(_options.multiple && I.can('select_multiple') ? 'multiple' : '') + \n\t\t\t\t\t(_options.directory && I.can('select_folder') ? 'webkitdirectory directory' : '') + // Chrome 11+\n\t\t\t\t\t(mimes ? ' accept=\"' + mimes.join(',') + '\"' : '') + ' />';\n\n\t\t\t\tinput = Dom.get(I.uid);\n\n\t\t\t\t// prepare file input to be placed underneath the browse_button element\n\t\t\t\tBasic.extend(input.style, {\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\theight: '100%'\n\t\t\t\t});\n\n\n\t\t\t\tbrowseButton = Dom.get(_options.browse_button);\n\n\t\t\t\t// Route click event to the input[type=file] element for browsers that support such behavior\n\t\t\t\tif (I.can('summon_file_dialog')) {\n\t\t\t\t\tif (Dom.getStyle(browseButton, 'position') === 'static') {\n\t\t\t\t\t\tbrowseButton.style.position = 'relative';\n\t\t\t\t\t}\n\n\t\t\t\t\tzIndex = parseInt(Dom.getStyle(browseButton, 'z-index'), 10) || 1;\n\n\t\t\t\t\tbrowseButton.style.zIndex = zIndex;\n\t\t\t\t\tshimContainer.style.zIndex = zIndex - 1;\n\n\t\t\t\t\tEvents.addEvent(browseButton, 'click', function(e) {\n\t\t\t\t\t\tvar input = Dom.get(I.uid);\n\t\t\t\t\t\tif (input && !input.disabled) { // for some reason FF (up to 8.0.1 so far) lets to click disabled input[type=file]\n\t\t\t\t\t\t\tinput.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}, comp.uid);\n\t\t\t\t}\n\n\t\t\t\t/* Since we have to place input[type=file] on top of the browse_button for some browsers,\n\t\t\t\tbrowse_button loses interactivity, so we restore it here */\n\t\t\t\ttop = I.can('summon_file_dialog') ? browseButton : shimContainer;\n\n\t\t\t\tEvents.addEvent(top, 'mouseover', function() {\n\t\t\t\t\tcomp.trigger('mouseenter');\n\t\t\t\t}, comp.uid);\n\n\t\t\t\tEvents.addEvent(top, 'mouseout', function() {\n\t\t\t\t\tcomp.trigger('mouseleave');\n\t\t\t\t}, comp.uid);\n\n\t\t\t\tEvents.addEvent(top, 'mousedown', function() {\n\t\t\t\t\tcomp.trigger('mousedown');\n\t\t\t\t}, comp.uid);\n\n\t\t\t\tEvents.addEvent(Dom.get(_options.container), 'mouseup', function() {\n\t\t\t\t\tcomp.trigger('mouseup');\n\t\t\t\t}, comp.uid);\n\n\n\t\t\t\tinput.onchange = function onChange() { // there should be only one handler for this\n\t\t\t\t\t_files = [];\n\n\t\t\t\t\tif (_options.directory) {\n\t\t\t\t\t\t// folders are represented by dots, filter them out (Chrome 11+)\n\t\t\t\t\t\tBasic.each(this.files, function(file) {\n\t\t\t\t\t\t\tif (file.name !== \".\") { // if it doesn't looks like a folder\n\t\t\t\t\t\t\t\t_files.push(file);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_files = [].slice.call(this.files);\n\t\t\t\t\t}\n\n\t\t\t\t\t// clearing the value enables the user to select the same file again if they want to\n\t\t\t\t\tif (Env.browser !== 'IE' && Env.browser !== 'IEMobile') {\n\t\t\t\t\t\tthis.value = '';\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// in IE input[type=\"file\"] is read-only so the only way to reset it is to re-insert it\n\t\t\t\t\t\tvar clone = this.cloneNode(true);\n\t\t\t\t\t\tthis.parentNode.replaceChild(clone, this);\n\t\t\t\t\t\tclone.onchange = onChange;\n\t\t\t\t\t}\n\t\t\t\t\tcomp.trigger('change');\n\t\t\t\t};\n\n\t\t\t\t// ready event is perfectly asynchronous\n\t\t\t\tcomp.trigger({\n\t\t\t\t\ttype: 'ready',\n\t\t\t\t\tasync: true\n\t\t\t\t});\n\n\t\t\t\tshimContainer = null;\n\t\t\t},\n\n\t\t\tgetFiles: function() {\n\t\t\t\treturn _files;\n\t\t\t},\n\n\t\t\tdisable: function(state) {\n\t\t\t\tvar I = this.getRuntime(), input;\n\n\t\t\t\tif ((input = Dom.get(I.uid))) {\n\t\t\t\t\tinput.disabled = !!state;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\tvar I = this.getRuntime()\n\t\t\t\t, shim = I.getShim()\n\t\t\t\t, shimContainer = I.getShimContainer()\n\t\t\t\t;\n\t\t\t\t\n\t\t\t\tEvents.removeAllEvents(shimContainer, this.uid);\n\t\t\t\tEvents.removeAllEvents(_options && Dom.get(_options.container), this.uid);\n\t\t\t\tEvents.removeAllEvents(_options && Dom.get(_options.browse_button), this.uid);\n\t\t\t\t\n\t\t\t\tif (shimContainer) {\n\t\t\t\t\tshimContainer.innerHTML = '';\n\t\t\t\t}\n\n\t\t\t\tshim.removeInstance(this.uid);\n\n\t\t\t\t_files = _options = shimContainer = shim = null;\n\t\t\t}\n\t\t});\n\t}\n\n\treturn (extensions.FileInput = FileInput);\n});\n\n// Included from: src/javascript/runtime/html5/file/FileDrop.js\n\n/**\n * FileDrop.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/file/FileDrop\n@private\n*/\ndefine(\"moxie/runtime/html5/file/FileDrop\", [\n\t\"moxie/runtime/html5/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/utils/Events\",\n\t\"moxie/core/utils/Mime\"\n], function(extensions, Basic, Dom, Events, Mime) {\n\t\n\tfunction FileDrop() {\n\t\tvar _files = [], _allowedExts = [], _options;\n\n\t\tBasic.extend(this, {\n\t\t\tinit: function(options) {\n\t\t\t\tvar comp = this, dropZone;\n\n\t\t\t\t_options = options;\n\t\t\t\t_allowedExts = _extractExts(_options.accept);\n\t\t\t\tdropZone = _options.container;\n\n\t\t\t\tEvents.addEvent(dropZone, 'dragover', function(e) {\n\t\t\t\t\tif (!_hasFiles(e)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.dataTransfer.dropEffect = 'copy';\n\t\t\t\t}, comp.uid);\n\n\t\t\t\tEvents.addEvent(dropZone, 'drop', function(e) {\n\t\t\t\t\tif (!_hasFiles(e)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t_files = [];\n\n\t\t\t\t\t// Chrome 21+ accepts folders via Drag'n'Drop\n\t\t\t\t\tif (e.dataTransfer.items && e.dataTransfer.items[0].webkitGetAsEntry) {\n\t\t\t\t\t\t_readItems(e.dataTransfer.items, function() {\n\t\t\t\t\t\t\tcomp.trigger(\"drop\");\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tBasic.each(e.dataTransfer.files, function(file) {\n\t\t\t\t\t\t\tif (_isAcceptable(file)) {\n\t\t\t\t\t\t\t\t_files.push(file);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcomp.trigger(\"drop\");\n\t\t\t\t\t}\n\t\t\t\t}, comp.uid);\n\n\t\t\t\tEvents.addEvent(dropZone, 'dragenter', function(e) {\n\t\t\t\t\tcomp.trigger(\"dragenter\");\n\t\t\t\t}, comp.uid);\n\n\t\t\t\tEvents.addEvent(dropZone, 'dragleave', function(e) {\n\t\t\t\t\tcomp.trigger(\"dragleave\");\n\t\t\t\t}, comp.uid);\n\t\t\t},\n\n\t\t\tgetFiles: function() {\n\t\t\t\treturn _files;\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\tEvents.removeAllEvents(_options && Dom.get(_options.container), this.uid);\n\t\t\t\t_files = _allowedExts = _options = null;\n\t\t\t}\n\t\t});\n\n\n\t\tfunction _hasFiles(e) {\n\t\t\tif (!e.dataTransfer || !e.dataTransfer.types) { // e.dataTransfer.files is not available in Gecko during dragover\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar types = Basic.toArray(e.dataTransfer.types || []);\n\n\t\t\treturn Basic.inArray(\"Files\", types) !== -1 ||\n\t\t\t\tBasic.inArray(\"public.file-url\", types) !== -1 || // Safari < 5\n\t\t\t\tBasic.inArray(\"application/x-moz-file\", types) !== -1 // Gecko < 1.9.2 (< Firefox 3.6)\n\t\t\t\t;\n\t\t}\n\n\t\t\n\t\tfunction _extractExts(accept) {\n\t\t\tvar exts = [];\n\t\t\tfor (var i = 0; i < accept.length; i++) {\n\t\t\t\t[].push.apply(exts, accept[i].extensions.split(/\\s*,\\s*/));\n\t\t\t}\n\t\t\treturn Basic.inArray('*', exts) === -1 ? exts : [];\n\t\t}\n\n\n\t\tfunction _isAcceptable(file) {\n\t\t\tif (!_allowedExts.length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tvar ext = Mime.getFileExtension(file.name);\n\t\t\treturn !ext || Basic.inArray(ext, _allowedExts) !== -1;\n\t\t}\n\n\n\t\tfunction _readItems(items, cb) {\n\t\t\tvar entries = [];\n\t\t\tBasic.each(items, function(item) {\n\t\t\t\tvar entry = item.webkitGetAsEntry();\n\t\t\t\t// Address #998 (https://code.google.com/p/chromium/issues/detail?id=332579)\n\t\t\t\tif (entry) {\n\t\t\t\t\t// file() fails on OSX when the filename contains a special character (e.g. umlaut): see #61\n\t\t\t\t\tif (entry.isFile) {\n\t\t\t\t\t\tvar file = item.getAsFile();\n\t\t\t\t\t\tif (_isAcceptable(file)) {\n\t\t\t\t\t\t\t_files.push(file);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tentries.push(entry);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (entries.length) {\n\t\t\t\t_readEntries(entries, cb);\n\t\t\t} else {\n\t\t\t\tcb();\n\t\t\t}\n\t\t}\n\n\n\t\tfunction _readEntries(entries, cb) {\n\t\t\tvar queue = [];\n\t\t\tBasic.each(entries, function(entry) {\n\t\t\t\tqueue.push(function(cbcb) {\n\t\t\t\t\t_readEntry(entry, cbcb);\n\t\t\t\t});\n\t\t\t});\n\t\t\tBasic.inSeries(queue, function() {\n\t\t\t\tcb();\n\t\t\t});\n\t\t}\n\n\n\t\tfunction _readEntry(entry, cb) {\n\t\t\tif (entry.isFile) {\n\t\t\t\tentry.file(function(file) {\n\t\t\t\t\tif (_isAcceptable(file)) {\n\t\t\t\t\t\t_files.push(file);\n\t\t\t\t\t}\n\t\t\t\t\tcb();\n\t\t\t\t}, function() {\n\t\t\t\t\t// fire an error event maybe\n\t\t\t\t\tcb();\n\t\t\t\t});\n\t\t\t} else if (entry.isDirectory) {\n\t\t\t\t_readDirEntry(entry, cb);\n\t\t\t} else {\n\t\t\t\tcb(); // not file, not directory? what then?..\n\t\t\t}\n\t\t}\n\n\n\t\tfunction _readDirEntry(dirEntry, cb) {\n\t\t\tvar entries = [], dirReader = dirEntry.createReader();\n\n\t\t\t// keep quering recursively till no more entries\n\t\t\tfunction getEntries(cbcb) {\n\t\t\t\tdirReader.readEntries(function(moreEntries) {\n\t\t\t\t\tif (moreEntries.length) {\n\t\t\t\t\t\t[].push.apply(entries, moreEntries);\n\t\t\t\t\t\tgetEntries(cbcb);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcbcb();\n\t\t\t\t\t}\n\t\t\t\t}, cbcb);\n\t\t\t}\n\n\t\t\t// ...and you thought FileReader was crazy...\n\t\t\tgetEntries(function() {\n\t\t\t\t_readEntries(entries, cb);\n\t\t\t}); \n\t\t}\n\t}\n\n\treturn (extensions.FileDrop = FileDrop);\n});\n\n// Included from: src/javascript/runtime/html5/file/FileReader.js\n\n/**\n * FileReader.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/file/FileReader\n@private\n*/\ndefine(\"moxie/runtime/html5/file/FileReader\", [\n\t\"moxie/runtime/html5/Runtime\",\n\t\"moxie/core/utils/Encode\",\n\t\"moxie/core/utils/Basic\"\n], function(extensions, Encode, Basic) {\n\t\n\tfunction FileReader() {\n\t\tvar _fr, _convertToBinary = false;\n\n\t\tBasic.extend(this, {\n\n\t\t\tread: function(op, blob) {\n\t\t\t\tvar target = this;\n\n\t\t\t\t_fr = new window.FileReader();\n\n\t\t\t\t_fr.addEventListener('progress', function(e) {\n\t\t\t\t\ttarget.trigger(e);\n\t\t\t\t});\n\n\t\t\t\t_fr.addEventListener('load', function(e) {\n\t\t\t\t\ttarget.trigger(e);\n\t\t\t\t});\n\n\t\t\t\t_fr.addEventListener('error', function(e) {\n\t\t\t\t\ttarget.trigger(e, _fr.error);\n\t\t\t\t});\n\n\t\t\t\t_fr.addEventListener('loadend', function() {\n\t\t\t\t\t_fr = null;\n\t\t\t\t});\n\n\t\t\t\tif (Basic.typeOf(_fr[op]) === 'function') {\n\t\t\t\t\t_convertToBinary = false;\n\t\t\t\t\t_fr[op](blob.getSource());\n\t\t\t\t} else if (op === 'readAsBinaryString') { // readAsBinaryString is depricated in general and never existed in IE10+\n\t\t\t\t\t_convertToBinary = true;\n\t\t\t\t\t_fr.readAsDataURL(blob.getSource());\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tgetResult: function() {\n\t\t\t\treturn _fr && _fr.result ? (_convertToBinary ? _toBinary(_fr.result) : _fr.result) : null;\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif (_fr) {\n\t\t\t\t\t_fr.abort();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\t_fr = null;\n\t\t\t}\n\t\t});\n\n\t\tfunction _toBinary(str) {\n\t\t\treturn Encode.atob(str.substring(str.indexOf('base64,') + 7));\n\t\t}\n\t}\n\n\treturn (extensions.FileReader = FileReader);\n});\n\n// Included from: src/javascript/runtime/html5/xhr/XMLHttpRequest.js\n\n/**\n * XMLHttpRequest.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/*global ActiveXObject:true */\n\n/**\n@class moxie/runtime/html5/xhr/XMLHttpRequest\n@private\n*/\ndefine(\"moxie/runtime/html5/xhr/XMLHttpRequest\", [\n\t\"moxie/runtime/html5/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Mime\",\n\t\"moxie/core/utils/Url\",\n\t\"moxie/file/File\",\n\t\"moxie/file/Blob\",\n\t\"moxie/xhr/FormData\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/core/utils/Env\"\n], function(extensions, Basic, Mime, Url, File, Blob, FormData, x, Env) {\n\t\n\tfunction XMLHttpRequest() {\n\t\tvar self = this\n\t\t, _xhr\n\t\t, _filename\n\t\t;\n\n\t\tBasic.extend(this, {\n\t\t\tsend: function(meta, data) {\n\t\t\t\tvar target = this\n\t\t\t\t, isGecko2_5_6 = (Env.browser === 'Mozilla' && Env.version >= 4 && Env.version < 7)\n\t\t\t\t, isAndroidBrowser = Env.browser === 'Android Browser'\n\t\t\t\t, mustSendAsBinary = false\n\t\t\t\t;\n\n\t\t\t\t// extract file name\n\t\t\t\t_filename = meta.url.replace(/^.+?\\/([\\w\\-\\.]+)$/, '$1').toLowerCase();\n\n\t\t\t\t_xhr = _getNativeXHR();\n\t\t\t\t_xhr.open(meta.method, meta.url, meta.async, meta.user, meta.password);\n\n\n\t\t\t\t// prepare data to be sent\n\t\t\t\tif (data instanceof Blob) {\n\t\t\t\t\tif (data.isDetached()) {\n\t\t\t\t\t\tmustSendAsBinary = true;\n\t\t\t\t\t}\n\t\t\t\t\tdata = data.getSource();\n\t\t\t\t} else if (data instanceof FormData) {\n\n\t\t\t\t\tif (data.hasBlob()) {\n\t\t\t\t\t\tif (data.getBlob().isDetached()) {\n\t\t\t\t\t\t\tdata = _prepareMultipart.call(target, data); // _xhr must be instantiated and be in OPENED state\n\t\t\t\t\t\t\tmustSendAsBinary = true;\n\t\t\t\t\t\t} else if ((isGecko2_5_6 || isAndroidBrowser) && Basic.typeOf(data.getBlob().getSource()) === 'blob' && window.FileReader) {\n\t\t\t\t\t\t\t// Gecko 2/5/6 can't send blob in FormData: https://bugzilla.mozilla.org/show_bug.cgi?id=649150\n\t\t\t\t\t\t\t// Android browsers (default one and Dolphin) seem to have the same issue, see: #613\n\t\t\t\t\t\t\t_preloadAndSend.call(target, meta, data);\n\t\t\t\t\t\t\treturn; // _preloadAndSend will reinvoke send() with transmutated FormData =%D\n\t\t\t\t\t\t}\t\n\t\t\t\t\t}\n\n\t\t\t\t\t// transfer fields to real FormData\n\t\t\t\t\tif (data instanceof FormData) { // if still a FormData, e.g. not mangled by _prepareMultipart()\n\t\t\t\t\t\tvar fd = new window.FormData();\n\t\t\t\t\t\tdata.each(function(value, name) {\n\t\t\t\t\t\t\tif (value instanceof Blob) {\n\t\t\t\t\t\t\t\tfd.append(name, value.getSource());\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfd.append(name, value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdata = fd;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\t// if XHR L2\n\t\t\t\tif (_xhr.upload) {\n\t\t\t\t\tif (meta.withCredentials) {\n\t\t\t\t\t\t_xhr.withCredentials = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t_xhr.addEventListener('load', function(e) {\n\t\t\t\t\t\ttarget.trigger(e);\n\t\t\t\t\t});\n\n\t\t\t\t\t_xhr.addEventListener('error', function(e) {\n\t\t\t\t\t\ttarget.trigger(e);\n\t\t\t\t\t});\n\n\t\t\t\t\t// additionally listen to progress events\n\t\t\t\t\t_xhr.addEventListener('progress', function(e) {\n\t\t\t\t\t\ttarget.trigger(e);\n\t\t\t\t\t});\n\n\t\t\t\t\t_xhr.upload.addEventListener('progress', function(e) {\n\t\t\t\t\t\ttarget.trigger({\n\t\t\t\t\t\t\ttype: 'UploadProgress',\n\t\t\t\t\t\t\tloaded: e.loaded,\n\t\t\t\t\t\t\ttotal: e.total\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t// ... otherwise simulate XHR L2\n\t\t\t\t} else {\n\t\t\t\t\t_xhr.onreadystatechange = function onReadyStateChange() {\n\t\t\t\t\t\t\n\t\t\t\t\t\t// fake Level 2 events\n\t\t\t\t\t\tswitch (_xhr.readyState) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcase 1: // XMLHttpRequest.OPENED\n\t\t\t\t\t\t\t\t// readystatechanged is fired twice for OPENED state (in IE and Mozilla) - neu\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// looks like HEADERS_RECEIVED (state 2) is not reported in Opera (or it's old versions) - neu\n\t\t\t\t\t\t\tcase 2: // XMLHttpRequest.HEADERS_RECEIVED\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcase 3: // XMLHttpRequest.LOADING \n\t\t\t\t\t\t\t\t// try to fire progress event for not XHR L2\n\t\t\t\t\t\t\t\tvar total, loaded;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tif (Url.hasSameOrigin(meta.url)) { // Content-Length not accessible for cross-domain on some browsers\n\t\t\t\t\t\t\t\t\t\ttotal = _xhr.getResponseHeader('Content-Length') || 0; // old Safari throws an exception here\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (_xhr.responseText) { // responseText was introduced in IE7\n\t\t\t\t\t\t\t\t\t\tloaded = _xhr.responseText.length;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} catch(ex) {\n\t\t\t\t\t\t\t\t\ttotal = loaded = 0;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\ttarget.trigger({\n\t\t\t\t\t\t\t\t\ttype: 'progress',\n\t\t\t\t\t\t\t\t\tlengthComputable: !!total,\n\t\t\t\t\t\t\t\t\ttotal: parseInt(total, 10),\n\t\t\t\t\t\t\t\t\tloaded: loaded\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcase 4: // XMLHttpRequest.DONE\n\t\t\t\t\t\t\t\t// release readystatechange handler (mostly for IE)\n\t\t\t\t\t\t\t\t_xhr.onreadystatechange = function() {};\n\n\t\t\t\t\t\t\t\t// usually status 0 is returned when server is unreachable, but FF also fails to status 0 for 408 timeout\n\t\t\t\t\t\t\t\tif (_xhr.status === 0) {\n\t\t\t\t\t\t\t\t\ttarget.trigger('error');\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\ttarget.trigger('load');\n\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\n\t\t\t\t// set request headers\n\t\t\t\tif (!Basic.isEmptyObj(meta.headers)) {\n\t\t\t\t\tBasic.each(meta.headers, function(value, header) {\n\t\t\t\t\t\t_xhr.setRequestHeader(header, value);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// request response type\n\t\t\t\tif (\"\" !== meta.responseType && 'responseType' in _xhr) {\n\t\t\t\t\tif ('json' === meta.responseType && !Env.can('return_response_type', 'json')) { // we can fake this one\n\t\t\t\t\t\t_xhr.responseType = 'text';\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_xhr.responseType = meta.responseType;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// send ...\n\t\t\t\tif (!mustSendAsBinary) {\n\t\t\t\t\t_xhr.send(data);\n\t\t\t\t} else {\n\t\t\t\t\tif (_xhr.sendAsBinary) { // Gecko\n\t\t\t\t\t\t_xhr.sendAsBinary(data);\n\t\t\t\t\t} else { // other browsers having support for typed arrays\n\t\t\t\t\t\t(function() {\n\t\t\t\t\t\t\t// mimic Gecko's sendAsBinary\n\t\t\t\t\t\t\tvar ui8a = new Uint8Array(data.length);\n\t\t\t\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\t\t\t\tui8a[i] = (data.charCodeAt(i) & 0xff);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t_xhr.send(ui8a.buffer);\n\t\t\t\t\t\t}());\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttarget.trigger('loadstart');\n\t\t\t},\n\n\t\t\tgetStatus: function() {\n\t\t\t\t// according to W3C spec it should return 0 for readyState < 3, but instead it throws an exception\n\t\t\t\ttry {\n\t\t\t\t\tif (_xhr) {\n\t\t\t\t\t\treturn _xhr.status;\n\t\t\t\t\t}\n\t\t\t\t} catch(ex) {}\n\t\t\t\treturn 0;\n\t\t\t},\n\n\t\t\tgetResponse: function(responseType) {\n\t\t\t\tvar I = this.getRuntime();\n\n\t\t\t\ttry {\n\t\t\t\t\tswitch (responseType) {\n\t\t\t\t\t\tcase 'blob':\n\t\t\t\t\t\t\tvar file = new File(I.uid, _xhr.response);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// try to extract file name from content-disposition if possible (might be - not, if CORS for example)\t\n\t\t\t\t\t\t\tvar disposition = _xhr.getResponseHeader('Content-Disposition');\n\t\t\t\t\t\t\tif (disposition) {\n\t\t\t\t\t\t\t\t// extract filename from response header if available\n\t\t\t\t\t\t\t\tvar match = disposition.match(/filename=([\\'\\\"'])([^\\1]+)\\1/);\n\t\t\t\t\t\t\t\tif (match) {\n\t\t\t\t\t\t\t\t\t_filename = match[2];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfile.name = _filename;\n\n\t\t\t\t\t\t\t// pre-webkit Opera doesn't set type property on the blob response\n\t\t\t\t\t\t\tif (!file.type) {\n\t\t\t\t\t\t\t\tfile.type = Mime.getFileMime(_filename);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn file;\n\n\t\t\t\t\t\tcase 'json':\n\t\t\t\t\t\t\tif (!Env.can('return_response_type', 'json')) {\n\t\t\t\t\t\t\t\treturn _xhr.status === 200 && !!window.JSON ? JSON.parse(_xhr.responseText) : null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn _xhr.response;\n\n\t\t\t\t\t\tcase 'document':\n\t\t\t\t\t\t\treturn _getDocument(_xhr);\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn _xhr.responseText !== '' ? _xhr.responseText : null; // against the specs, but for consistency across the runtimes\n\t\t\t\t\t}\n\t\t\t\t} catch(ex) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\t\t\t\t\n\t\t\t},\n\n\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\ttry {\n\t\t\t\t\treturn _xhr.getAllResponseHeaders();\n\t\t\t\t} catch(ex) {}\n\t\t\t\treturn '';\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif (_xhr) {\n\t\t\t\t\t_xhr.abort();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\tself = _filename = null;\n\t\t\t}\n\t\t});\n\n\n\t\t// here we go... ugly fix for ugly bug\n\t\tfunction _preloadAndSend(meta, data) {\n\t\t\tvar target = this, blob, fr;\n\t\t\t\t\n\t\t\t// get original blob\n\t\t\tblob = data.getBlob().getSource();\n\t\t\t\n\t\t\t// preload blob in memory to be sent as binary string\n\t\t\tfr = new window.FileReader();\n\t\t\tfr.onload = function() {\n\t\t\t\t// overwrite original blob\n\t\t\t\tdata.append(data.getBlobName(), new Blob(null, {\n\t\t\t\t\ttype: blob.type,\n\t\t\t\t\tdata: fr.result\n\t\t\t\t}));\n\t\t\t\t// invoke send operation again\n\t\t\t\tself.send.call(target, meta, data);\n\t\t\t};\n\t\t\tfr.readAsBinaryString(blob);\n\t\t}\n\n\t\t\n\t\tfunction _getNativeXHR() {\n\t\t\tif (window.XMLHttpRequest && !(Env.browser === 'IE' && Env.version < 8)) { // IE7 has native XHR but it's buggy\n\t\t\t\treturn new window.XMLHttpRequest();\n\t\t\t} else {\n\t\t\t\treturn (function() {\n\t\t\t\t\tvar progIDs = ['Msxml2.XMLHTTP.6.0', 'Microsoft.XMLHTTP']; // if 6.0 available, use it, otherwise failback to default 3.0\n\t\t\t\t\tfor (var i = 0; i < progIDs.length; i++) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\treturn new ActiveXObject(progIDs[i]);\n\t\t\t\t\t\t} catch (ex) {}\n\t\t\t\t\t}\n\t\t\t\t})();\n\t\t\t}\n\t\t}\n\t\t\n\t\t// @credits Sergey Ilinsky\t(http://www.ilinsky.com/)\n\t\tfunction _getDocument(xhr) {\n\t\t\tvar rXML = xhr.responseXML;\n\t\t\tvar rText = xhr.responseText;\n\t\t\t\n\t\t\t// Try parsing responseText (@see: http://www.ilinsky.com/articles/XMLHttpRequest/#bugs-ie-responseXML-content-type)\n\t\t\tif (Env.browser === 'IE' && rText && rXML && !rXML.documentElement && /[^\\/]+\\/[^\\+]+\\+xml/.test(xhr.getResponseHeader(\"Content-Type\"))) {\n\t\t\t\trXML = new window.ActiveXObject(\"Microsoft.XMLDOM\");\n\t\t\t\trXML.async = false;\n\t\t\t\trXML.validateOnParse = false;\n\t\t\t\trXML.loadXML(rText);\n\t\t\t}\n\t\n\t\t\t// Check if there is no error in document\n\t\t\tif (rXML) {\n\t\t\t\tif ((Env.browser === 'IE' && rXML.parseError !== 0) || !rXML.documentElement || rXML.documentElement.tagName === \"parsererror\") {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn rXML;\n\t\t}\n\n\n\t\tfunction _prepareMultipart(fd) {\n\t\t\tvar boundary = '----moxieboundary' + new Date().getTime()\n\t\t\t, dashdash = '--'\n\t\t\t, crlf = '\\r\\n'\n\t\t\t, multipart = ''\n\t\t\t, I = this.getRuntime()\n\t\t\t;\n\n\t\t\tif (!I.can('send_binary_string')) {\n\t\t\t\tthrow new x.RuntimeError(x.RuntimeError.NOT_SUPPORTED_ERR);\n\t\t\t}\n\n\t\t\t_xhr.setRequestHeader('Content-Type', 'multipart/form-data; boundary=' + boundary);\n\n\t\t\t// append multipart parameters\n\t\t\tfd.each(function(value, name) {\n\t\t\t\t// Firefox 3.6 failed to convert multibyte characters to UTF-8 in sendAsBinary(), \n\t\t\t\t// so we try it here ourselves with: unescape(encodeURIComponent(value))\n\t\t\t\tif (value instanceof Blob) {\n\t\t\t\t\t// Build RFC2388 blob\n\t\t\t\t\tmultipart += dashdash + boundary + crlf +\n\t\t\t\t\t\t'Content-Disposition: form-data; name=\"' + name + '\"; filename=\"' + unescape(encodeURIComponent(value.name || 'blob')) + '\"' + crlf +\n\t\t\t\t\t\t'Content-Type: ' + (value.type || 'application/octet-stream') + crlf + crlf +\n\t\t\t\t\t\tvalue.getSource() + crlf;\n\t\t\t\t} else {\n\t\t\t\t\tmultipart += dashdash + boundary + crlf +\n\t\t\t\t\t\t'Content-Disposition: form-data; name=\"' + name + '\"' + crlf + crlf +\n\t\t\t\t\t\tunescape(encodeURIComponent(value)) + crlf;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tmultipart += dashdash + boundary + dashdash + crlf;\n\n\t\t\treturn multipart;\n\t\t}\n\t}\n\n\treturn (extensions.XMLHttpRequest = XMLHttpRequest);\n});\n\n// Included from: src/javascript/runtime/html5/utils/BinaryReader.js\n\n/**\n * BinaryReader.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/utils/BinaryReader\n@private\n*/\ndefine(\"moxie/runtime/html5/utils/BinaryReader\", [], function() {\n\treturn function() {\n\t\tvar II = false, bin;\n\n\t\t// Private functions\n\t\tfunction read(idx, size) {\n\t\t\tvar mv = II ? 0 : -8 * (size - 1), sum = 0, i;\n\n\t\t\tfor (i = 0; i < size; i++) {\n\t\t\t\tsum |= (bin.charCodeAt(idx + i) << Math.abs(mv + i*8));\n\t\t\t}\n\n\t\t\treturn sum;\n\t\t}\n\n\t\tfunction putstr(segment, idx, length) {\n\t\t\tlength = arguments.length === 3 ? length : bin.length - idx - 1;\n\t\t\tbin = bin.substr(0, idx) + segment + bin.substr(length + idx);\n\t\t}\n\n\t\tfunction write(idx, num, size) {\n\t\t\tvar str = '', mv = II ? 0 : -8 * (size - 1), i;\n\n\t\t\tfor (i = 0; i < size; i++) {\n\t\t\t\tstr += String.fromCharCode((num >> Math.abs(mv + i*8)) & 255);\n\t\t\t}\n\n\t\t\tputstr(str, idx, size);\n\t\t}\n\n\t\t// Public functions\n\t\treturn {\n\t\t\tII: function(order) {\n\t\t\t\tif (order === undefined) {\n\t\t\t\t\treturn II;\n\t\t\t\t} else {\n\t\t\t\t\tII = order;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tinit: function(binData) {\n\t\t\t\tII = false;\n\t\t\t\tbin = binData;\n\t\t\t},\n\n\t\t\tSEGMENT: function(idx, length, segment) {\n\t\t\t\tswitch (arguments.length) {\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\treturn bin.substr(idx, bin.length - idx - 1);\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\treturn bin.substr(idx, length);\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tputstr(segment, idx, length);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault: return bin;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tBYTE: function(idx) {\n\t\t\t\treturn read(idx, 1);\n\t\t\t},\n\n\t\t\tSHORT: function(idx) {\n\t\t\t\treturn read(idx, 2);\n\t\t\t},\n\n\t\t\tLONG: function(idx, num) {\n\t\t\t\tif (num === undefined) {\n\t\t\t\t\treturn read(idx, 4);\n\t\t\t\t} else {\n\t\t\t\t\twrite(idx, num, 4);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tSLONG: function(idx) { // 2's complement notation\n\t\t\t\tvar num = read(idx, 4);\n\n\t\t\t\treturn (num > 2147483647 ? num - 4294967296 : num);\n\t\t\t},\n\n\t\t\tSTRING: function(idx, size) {\n\t\t\t\tvar str = '';\n\n\t\t\t\tfor (size += idx; idx < size; idx++) {\n\t\t\t\t\tstr += String.fromCharCode(read(idx, 1));\n\t\t\t\t}\n\n\t\t\t\treturn str;\n\t\t\t}\n\t\t};\n\t};\n});\n\n// Included from: src/javascript/runtime/html5/image/JPEGHeaders.js\n\n/**\n * JPEGHeaders.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n \n/**\n@class moxie/runtime/html5/image/JPEGHeaders\n@private\n*/\ndefine(\"moxie/runtime/html5/image/JPEGHeaders\", [\n\t\"moxie/runtime/html5/utils/BinaryReader\"\n], function(BinaryReader) {\n\t\n\treturn function JPEGHeaders(data) {\n\t\tvar headers = [], read, idx, marker, length = 0;\n\n\t\tread = new BinaryReader();\n\t\tread.init(data);\n\n\t\t// Check if data is jpeg\n\t\tif (read.SHORT(0) !== 0xFFD8) {\n\t\t\treturn;\n\t\t}\n\n\t\tidx = 2;\n\n\t\twhile (idx <= data.length) {\n\t\t\tmarker = read.SHORT(idx);\n\n\t\t\t// omit RST (restart) markers\n\t\t\tif (marker >= 0xFFD0 && marker <= 0xFFD7) {\n\t\t\t\tidx += 2;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// no headers allowed after SOS marker\n\t\t\tif (marker === 0xFFDA || marker === 0xFFD9) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tlength = read.SHORT(idx + 2) + 2;\n\n\t\t\t// APPn marker detected\n\t\t\tif (marker >= 0xFFE1 && marker <= 0xFFEF) {\n\t\t\t\theaders.push({\n\t\t\t\t\thex: marker,\n\t\t\t\t\tname: 'APP' + (marker & 0x000F),\n\t\t\t\t\tstart: idx,\n\t\t\t\t\tlength: length,\n\t\t\t\t\tsegment: read.SEGMENT(idx, length)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tidx += length;\n\t\t}\n\n\t\tread.init(null); // free memory\n\n\t\treturn {\n\t\t\theaders: headers,\n\n\t\t\trestore: function(data) {\n\t\t\t\tvar max, i;\n\n\t\t\t\tread.init(data);\n\n\t\t\t\tidx = read.SHORT(2) == 0xFFE0 ? 4 + read.SHORT(4) : 2;\n\n\t\t\t\tfor (i = 0, max = headers.length; i < max; i++) {\n\t\t\t\t\tread.SEGMENT(idx, 0, headers[i].segment);\n\t\t\t\t\tidx += headers[i].length;\n\t\t\t\t}\n\n\t\t\t\tdata = read.SEGMENT();\n\t\t\t\tread.init(null);\n\t\t\t\treturn data;\n\t\t\t},\n\n\t\t\tstrip: function(data) {\n\t\t\t\tvar headers, jpegHeaders, i;\n\n\t\t\t\tjpegHeaders = new JPEGHeaders(data);\n\t\t\t\theaders = jpegHeaders.headers;\n\t\t\t\tjpegHeaders.purge();\n\n\t\t\t\tread.init(data);\n\n\t\t\t\ti = headers.length;\n\t\t\t\twhile (i--) {\n\t\t\t\t\tread.SEGMENT(headers[i].start, headers[i].length, '');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdata = read.SEGMENT();\n\t\t\t\tread.init(null);\n\t\t\t\treturn data;\n\t\t\t},\n\n\t\t\tget: function(name) {\n\t\t\t\tvar array = [];\n\n\t\t\t\tfor (var i = 0, max = headers.length; i < max; i++) {\n\t\t\t\t\tif (headers[i].name === name.toUpperCase()) {\n\t\t\t\t\t\tarray.push(headers[i].segment);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn array;\n\t\t\t},\n\n\t\t\tset: function(name, segment) {\n\t\t\t\tvar array = [], i, ii, max;\n\n\t\t\t\tif (typeof(segment) === 'string') {\n\t\t\t\t\tarray.push(segment);\n\t\t\t\t} else {\n\t\t\t\t\tarray = segment;\n\t\t\t\t}\n\n\t\t\t\tfor (i = ii = 0, max = headers.length; i < max; i++) {\n\t\t\t\t\tif (headers[i].name === name.toUpperCase()) {\n\t\t\t\t\t\theaders[i].segment = array[ii];\n\t\t\t\t\t\theaders[i].length = array[ii].length;\n\t\t\t\t\t\tii++;\n\t\t\t\t\t}\n\t\t\t\t\tif (ii >= array.length) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpurge: function() {\n\t\t\t\theaders = [];\n\t\t\t\tread.init(null);\n\t\t\t\tread = null;\n\t\t\t}\n\t\t};\n\t};\n});\n\n// Included from: src/javascript/runtime/html5/image/ExifParser.js\n\n/**\n * ExifParser.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/image/ExifParser\n@private\n*/\ndefine(\"moxie/runtime/html5/image/ExifParser\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/html5/utils/BinaryReader\"\n], function(Basic, BinaryReader) {\n\t\n\treturn function ExifParser() {\n\t\t// Private ExifParser fields\n\t\tvar data, tags, Tiff, offsets = {}, tagDescs;\n\n\t\tdata = new BinaryReader();\n\n\t\ttags = {\n\t\t\ttiff : {\n\t\t\t\t/*\n\t\t\t\tThe image orientation viewed in terms of rows and columns.\n\n\t\t\t\t1 = The 0th row is at the visual top of the image, and the 0th column is the visual left-hand side.\n\t\t\t\t2 = The 0th row is at the visual top of the image, and the 0th column is the visual right-hand side.\n\t\t\t\t3 = The 0th row is at the visual bottom of the image, and the 0th column is the visual right-hand side.\n\t\t\t\t4 = The 0th row is at the visual bottom of the image, and the 0th column is the visual left-hand side.\n\t\t\t\t5 = The 0th row is the visual left-hand side of the image, and the 0th column is the visual top.\n\t\t\t\t6 = The 0th row is the visual right-hand side of the image, and the 0th column is the visual top.\n\t\t\t\t7 = The 0th row is the visual right-hand side of the image, and the 0th column is the visual bottom.\n\t\t\t\t8 = The 0th row is the visual left-hand side of the image, and the 0th column is the visual bottom.\n\t\t\t\t*/\n\t\t\t\t0x0112: 'Orientation',\n\t\t\t\t0x010E: 'ImageDescription',\n\t\t\t\t0x010F: 'Make',\n\t\t\t\t0x0110: 'Model',\n\t\t\t\t0x0131: 'Software',\n\t\t\t\t0x8769: 'ExifIFDPointer',\n\t\t\t\t0x8825:\t'GPSInfoIFDPointer'\n\t\t\t},\n\t\t\texif : {\n\t\t\t\t0x9000: 'ExifVersion',\n\t\t\t\t0xA001: 'ColorSpace',\n\t\t\t\t0xA002: 'PixelXDimension',\n\t\t\t\t0xA003: 'PixelYDimension',\n\t\t\t\t0x9003: 'DateTimeOriginal',\n\t\t\t\t0x829A: 'ExposureTime',\n\t\t\t\t0x829D: 'FNumber',\n\t\t\t\t0x8827: 'ISOSpeedRatings',\n\t\t\t\t0x9201: 'ShutterSpeedValue',\n\t\t\t\t0x9202: 'ApertureValue'\t,\n\t\t\t\t0x9207: 'MeteringMode',\n\t\t\t\t0x9208: 'LightSource',\n\t\t\t\t0x9209: 'Flash',\n\t\t\t\t0x920A: 'FocalLength',\n\t\t\t\t0xA402: 'ExposureMode',\n\t\t\t\t0xA403: 'WhiteBalance',\n\t\t\t\t0xA406: 'SceneCaptureType',\n\t\t\t\t0xA404: 'DigitalZoomRatio',\n\t\t\t\t0xA408: 'Contrast',\n\t\t\t\t0xA409: 'Saturation',\n\t\t\t\t0xA40A: 'Sharpness'\n\t\t\t},\n\t\t\tgps : {\n\t\t\t\t0x0000: 'GPSVersionID',\n\t\t\t\t0x0001: 'GPSLatitudeRef',\n\t\t\t\t0x0002: 'GPSLatitude',\n\t\t\t\t0x0003: 'GPSLongitudeRef',\n\t\t\t\t0x0004: 'GPSLongitude'\n\t\t\t}\n\t\t};\n\n\t\ttagDescs = {\n\t\t\t'ColorSpace': {\n\t\t\t\t1: 'sRGB',\n\t\t\t\t0: 'Uncalibrated'\n\t\t\t},\n\n\t\t\t'MeteringMode': {\n\t\t\t\t0: 'Unknown',\n\t\t\t\t1: 'Average',\n\t\t\t\t2: 'CenterWeightedAverage',\n\t\t\t\t3: 'Spot',\n\t\t\t\t4: 'MultiSpot',\n\t\t\t\t5: 'Pattern',\n\t\t\t\t6: 'Partial',\n\t\t\t\t255: 'Other'\n\t\t\t},\n\n\t\t\t'LightSource': {\n\t\t\t\t1: 'Daylight',\n\t\t\t\t2: 'Fliorescent',\n\t\t\t\t3: 'Tungsten',\n\t\t\t\t4: 'Flash',\n\t\t\t\t9: 'Fine weather',\n\t\t\t\t10: 'Cloudy weather',\n\t\t\t\t11: 'Shade',\n\t\t\t\t12: 'Daylight fluorescent (D 5700 - 7100K)',\n\t\t\t\t13: 'Day white fluorescent (N 4600 -5400K)',\n\t\t\t\t14: 'Cool white fluorescent (W 3900 - 4500K)',\n\t\t\t\t15: 'White fluorescent (WW 3200 - 3700K)',\n\t\t\t\t17: 'Standard light A',\n\t\t\t\t18: 'Standard light B',\n\t\t\t\t19: 'Standard light C',\n\t\t\t\t20: 'D55',\n\t\t\t\t21: 'D65',\n\t\t\t\t22: 'D75',\n\t\t\t\t23: 'D50',\n\t\t\t\t24: 'ISO studio tungsten',\n\t\t\t\t255: 'Other'\n\t\t\t},\n\n\t\t\t'Flash': {\n\t\t\t\t0x0000: 'Flash did not fire.',\n\t\t\t\t0x0001: 'Flash fired.',\n\t\t\t\t0x0005: 'Strobe return light not detected.',\n\t\t\t\t0x0007: 'Strobe return light detected.',\n\t\t\t\t0x0009: 'Flash fired, compulsory flash mode',\n\t\t\t\t0x000D: 'Flash fired, compulsory flash mode, return light not detected',\n\t\t\t\t0x000F: 'Flash fired, compulsory flash mode, return light detected',\n\t\t\t\t0x0010: 'Flash did not fire, compulsory flash mode',\n\t\t\t\t0x0018: 'Flash did not fire, auto mode',\n\t\t\t\t0x0019: 'Flash fired, auto mode',\n\t\t\t\t0x001D: 'Flash fired, auto mode, return light not detected',\n\t\t\t\t0x001F: 'Flash fired, auto mode, return light detected',\n\t\t\t\t0x0020: 'No flash function',\n\t\t\t\t0x0041: 'Flash fired, red-eye reduction mode',\n\t\t\t\t0x0045: 'Flash fired, red-eye reduction mode, return light not detected',\n\t\t\t\t0x0047: 'Flash fired, red-eye reduction mode, return light detected',\n\t\t\t\t0x0049: 'Flash fired, compulsory flash mode, red-eye reduction mode',\n\t\t\t\t0x004D: 'Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected',\n\t\t\t\t0x004F: 'Flash fired, compulsory flash mode, red-eye reduction mode, return light detected',\n\t\t\t\t0x0059: 'Flash fired, auto mode, red-eye reduction mode',\n\t\t\t\t0x005D: 'Flash fired, auto mode, return light not detected, red-eye reduction mode',\n\t\t\t\t0x005F: 'Flash fired, auto mode, return light detected, red-eye reduction mode'\n\t\t\t},\n\n\t\t\t'ExposureMode': {\n\t\t\t\t0: 'Auto exposure',\n\t\t\t\t1: 'Manual exposure',\n\t\t\t\t2: 'Auto bracket'\n\t\t\t},\n\n\t\t\t'WhiteBalance': {\n\t\t\t\t0: 'Auto white balance',\n\t\t\t\t1: 'Manual white balance'\n\t\t\t},\n\n\t\t\t'SceneCaptureType': {\n\t\t\t\t0: 'Standard',\n\t\t\t\t1: 'Landscape',\n\t\t\t\t2: 'Portrait',\n\t\t\t\t3: 'Night scene'\n\t\t\t},\n\n\t\t\t'Contrast': {\n\t\t\t\t0: 'Normal',\n\t\t\t\t1: 'Soft',\n\t\t\t\t2: 'Hard'\n\t\t\t},\n\n\t\t\t'Saturation': {\n\t\t\t\t0: 'Normal',\n\t\t\t\t1: 'Low saturation',\n\t\t\t\t2: 'High saturation'\n\t\t\t},\n\n\t\t\t'Sharpness': {\n\t\t\t\t0: 'Normal',\n\t\t\t\t1: 'Soft',\n\t\t\t\t2: 'Hard'\n\t\t\t},\n\n\t\t\t// GPS related\n\t\t\t'GPSLatitudeRef': {\n\t\t\t\tN: 'North latitude',\n\t\t\t\tS: 'South latitude'\n\t\t\t},\n\n\t\t\t'GPSLongitudeRef': {\n\t\t\t\tE: 'East longitude',\n\t\t\t\tW: 'West longitude'\n\t\t\t}\n\t\t};\n\n\t\tfunction extractTags(IFD_offset, tags2extract) {\n\t\t\tvar length = data.SHORT(IFD_offset), i, ii,\n\t\t\t\ttag, type, count, tagOffset, offset, value, values = [], hash = {};\n\n\t\t\tfor (i = 0; i < length; i++) {\n\t\t\t\t// Set binary reader pointer to beginning of the next tag\n\t\t\t\toffset = tagOffset = IFD_offset + 12 * i + 2;\n\n\t\t\t\ttag = tags2extract[data.SHORT(offset)];\n\n\t\t\t\tif (tag === undefined) {\n\t\t\t\t\tcontinue; // Not the tag we requested\n\t\t\t\t}\n\n\t\t\t\ttype = data.SHORT(offset+=2);\n\t\t\t\tcount = data.LONG(offset+=2);\n\n\t\t\t\toffset += 4;\n\t\t\t\tvalues = [];\n\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase 1: // BYTE\n\t\t\t\t\tcase 7: // UNDEFINED\n\t\t\t\t\t\tif (count > 4) {\n\t\t\t\t\t\t\toffset = data.LONG(offset) + offsets.tiffHeader;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (ii = 0; ii < count; ii++) {\n\t\t\t\t\t\t\tvalues[ii] = data.BYTE(offset + ii);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 2: // STRING\n\t\t\t\t\t\tif (count > 4) {\n\t\t\t\t\t\t\toffset = data.LONG(offset) + offsets.tiffHeader;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\thash[tag] = data.STRING(offset, count - 1);\n\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tcase 3: // SHORT\n\t\t\t\t\t\tif (count > 2) {\n\t\t\t\t\t\t\toffset = data.LONG(offset) + offsets.tiffHeader;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (ii = 0; ii < count; ii++) {\n\t\t\t\t\t\t\tvalues[ii] = data.SHORT(offset + ii*2);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 4: // LONG\n\t\t\t\t\t\tif (count > 1) {\n\t\t\t\t\t\t\toffset = data.LONG(offset) + offsets.tiffHeader;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (ii = 0; ii < count; ii++) {\n\t\t\t\t\t\t\tvalues[ii] = data.LONG(offset + ii*4);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 5: // RATIONAL\n\t\t\t\t\t\toffset = data.LONG(offset) + offsets.tiffHeader;\n\n\t\t\t\t\t\tfor (ii = 0; ii < count; ii++) {\n\t\t\t\t\t\t\tvalues[ii] = data.LONG(offset + ii*4) / data.LONG(offset + ii*4 + 4);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 9: // SLONG\n\t\t\t\t\t\toffset = data.LONG(offset) + offsets.tiffHeader;\n\n\t\t\t\t\t\tfor (ii = 0; ii < count; ii++) {\n\t\t\t\t\t\t\tvalues[ii] = data.SLONG(offset + ii*4);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 10: // SRATIONAL\n\t\t\t\t\t\toffset = data.LONG(offset) + offsets.tiffHeader;\n\n\t\t\t\t\t\tfor (ii = 0; ii < count; ii++) {\n\t\t\t\t\t\t\tvalues[ii] = data.SLONG(offset + ii*4) / data.SLONG(offset + ii*4 + 4);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvalue = (count == 1 ? values[0] : values);\n\n\t\t\t\tif (tagDescs.hasOwnProperty(tag) && typeof value != 'object') {\n\t\t\t\t\thash[tag] = tagDescs[tag][value];\n\t\t\t\t} else {\n\t\t\t\t\thash[tag] = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn hash;\n\t\t}\n\n\t\tfunction getIFDOffsets() {\n\t\t\tvar idx = offsets.tiffHeader;\n\n\t\t\t// Set read order of multi-byte data\n\t\t\tdata.II(data.SHORT(idx) == 0x4949);\n\n\t\t\t// Check if always present bytes are indeed present\n\t\t\tif (data.SHORT(idx+=2) !== 0x002A) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\toffsets.IFD0 = offsets.tiffHeader + data.LONG(idx += 2);\n\t\t\tTiff = extractTags(offsets.IFD0, tags.tiff);\n\n\t\t\tif ('ExifIFDPointer' in Tiff) {\n\t\t\t\toffsets.exifIFD = offsets.tiffHeader + Tiff.ExifIFDPointer;\n\t\t\t\tdelete Tiff.ExifIFDPointer;\n\t\t\t}\n\n\t\t\tif ('GPSInfoIFDPointer' in Tiff) {\n\t\t\t\toffsets.gpsIFD = offsets.tiffHeader + Tiff.GPSInfoIFDPointer;\n\t\t\t\tdelete Tiff.GPSInfoIFDPointer;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\t// At the moment only setting of simple (LONG) values, that do not require offset recalculation, is supported\n\t\tfunction setTag(ifd, tag, value) {\n\t\t\tvar offset, length, tagOffset, valueOffset = 0;\n\n\t\t\t// If tag name passed translate into hex key\n\t\t\tif (typeof(tag) === 'string') {\n\t\t\t\tvar tmpTags = tags[ifd.toLowerCase()];\n\t\t\t\tfor (var hex in tmpTags) {\n\t\t\t\t\tif (tmpTags[hex] === tag) {\n\t\t\t\t\t\ttag = hex;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\toffset = offsets[ifd.toLowerCase() + 'IFD'];\n\t\t\tlength = data.SHORT(offset);\n\n\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\ttagOffset = offset + 12 * i + 2;\n\n\t\t\t\tif (data.SHORT(tagOffset) == tag) {\n\t\t\t\t\tvalueOffset = tagOffset + 8;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!valueOffset) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tdata.LONG(valueOffset, value);\n\t\t\treturn true;\n\t\t}\n\n\n\t\t// Public functions\n\t\treturn {\n\t\t\tinit: function(segment) {\n\t\t\t\t// Reset internal data\n\t\t\t\toffsets = {\n\t\t\t\t\ttiffHeader: 10\n\t\t\t\t};\n\n\t\t\t\tif (segment === undefined || !segment.length) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tdata.init(segment);\n\n\t\t\t\t// Check if that's APP1 and that it has EXIF\n\t\t\t\tif (data.SHORT(0) === 0xFFE1 && data.STRING(4, 5).toUpperCase() === \"EXIF\\0\") {\n\t\t\t\t\treturn getIFDOffsets();\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tTIFF: function() {\n\t\t\t\treturn Tiff;\n\t\t\t},\n\n\t\t\tEXIF: function() {\n\t\t\t\tvar Exif;\n\n\t\t\t\t// Populate EXIF hash\n\t\t\t\tExif = extractTags(offsets.exifIFD, tags.exif);\n\n\t\t\t\t// Fix formatting of some tags\n\t\t\t\tif (Exif.ExifVersion && Basic.typeOf(Exif.ExifVersion) === 'array') {\n\t\t\t\t\tfor (var i = 0, exifVersion = ''; i < Exif.ExifVersion.length; i++) {\n\t\t\t\t\t\texifVersion += String.fromCharCode(Exif.ExifVersion[i]);\n\t\t\t\t\t}\n\t\t\t\t\tExif.ExifVersion = exifVersion;\n\t\t\t\t}\n\n\t\t\t\treturn Exif;\n\t\t\t},\n\n\t\t\tGPS: function() {\n\t\t\t\tvar GPS;\n\n\t\t\t\tGPS = extractTags(offsets.gpsIFD, tags.gps);\n\n\t\t\t\t// iOS devices (and probably some others) do not put in GPSVersionID tag (why?..)\n\t\t\t\tif (GPS.GPSVersionID && Basic.typeOf(GPS.GPSVersionID) === 'array') {\n\t\t\t\t\tGPS.GPSVersionID = GPS.GPSVersionID.join('.');\n\t\t\t\t}\n\n\t\t\t\treturn GPS;\n\t\t\t},\n\n\t\t\tsetExif: function(tag, value) {\n\t\t\t\t// Right now only setting of width/height is possible\n\t\t\t\tif (tag !== 'PixelXDimension' && tag !== 'PixelYDimension') {return false;}\n\n\t\t\t\treturn setTag('exif', tag, value);\n\t\t\t},\n\n\n\t\t\tgetBinary: function() {\n\t\t\t\treturn data.SEGMENT();\n\t\t\t},\n\n\t\t\tpurge: function() {\n\t\t\t\tdata.init(null);\n\t\t\t\tdata = Tiff = null;\n\t\t\t\toffsets = {};\n\t\t\t}\n\t\t};\n\t};\n});\n\n// Included from: src/javascript/runtime/html5/image/JPEG.js\n\n/**\n * JPEG.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/image/JPEG\n@private\n*/\ndefine(\"moxie/runtime/html5/image/JPEG\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/runtime/html5/image/JPEGHeaders\",\n\t\"moxie/runtime/html5/utils/BinaryReader\",\n\t\"moxie/runtime/html5/image/ExifParser\"\n], function(Basic, x, JPEGHeaders, BinaryReader, ExifParser) {\n\t\n\tfunction JPEG(binstr) {\n\t\tvar _binstr, _br, _hm, _ep, _info, hasExif;\n\n\t\tfunction _getDimensions() {\n\t\t\tvar idx = 0, marker, length;\n\n\t\t\t// examine all through the end, since some images might have very large APP segments\n\t\t\twhile (idx <= _binstr.length) {\n\t\t\t\tmarker = _br.SHORT(idx += 2);\n\n\t\t\t\tif (marker >= 0xFFC0 && marker <= 0xFFC3) { // SOFn\n\t\t\t\t\tidx += 5; // marker (2 bytes) + length (2 bytes) + Sample precision (1 byte)\n\t\t\t\t\treturn {\n\t\t\t\t\t\theight: _br.SHORT(idx),\n\t\t\t\t\t\twidth: _br.SHORT(idx += 2)\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tlength = _br.SHORT(idx += 2);\n\t\t\t\tidx += length - 2;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\t_binstr = binstr;\n\n\t\t_br = new BinaryReader();\n\t\t_br.init(_binstr);\n\n\t\t// check if it is jpeg\n\t\tif (_br.SHORT(0) !== 0xFFD8) {\n\t\t\tthrow new x.ImageError(x.ImageError.WRONG_FORMAT);\n\t\t}\n\n\t\t// backup headers\n\t\t_hm = new JPEGHeaders(binstr);\n\n\t\t// extract exif info\n\t\t_ep = new ExifParser();\n\t\thasExif = !!_ep.init(_hm.get('app1')[0]);\n\n\t\t// get dimensions\n\t\t_info = _getDimensions.call(this);\n\n\t\tBasic.extend(this, {\n\t\t\ttype: 'image/jpeg',\n\n\t\t\tsize: _binstr.length,\n\n\t\t\twidth: _info && _info.width || 0,\n\n\t\t\theight: _info && _info.height || 0,\n\n\t\t\tsetExif: function(tag, value) {\n\t\t\t\tif (!hasExif) {\n\t\t\t\t\treturn false; // or throw an exception\n\t\t\t\t}\n\n\t\t\t\tif (Basic.typeOf(tag) === 'object') {\n\t\t\t\t\tBasic.each(tag, function(value, tag) {\n\t\t\t\t\t\t_ep.setExif(tag, value);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t_ep.setExif(tag, value);\n\t\t\t\t}\n\n\t\t\t\t// update internal headers\n\t\t\t\t_hm.set('app1', _ep.getBinary());\n\t\t\t},\n\n\t\t\twriteHeaders: function() {\n\t\t\t\tif (!arguments.length) {\n\t\t\t\t\t// if no arguments passed, update headers internally\n\t\t\t\t\treturn (_binstr = _hm.restore(_binstr));\n\t\t\t\t}\n\t\t\t\treturn _hm.restore(arguments[0]);\n\t\t\t},\n\n\t\t\tstripHeaders: function(binstr) {\n\t\t\t\treturn _hm.strip(binstr);\n\t\t\t},\n\n\t\t\tpurge: function() {\n\t\t\t\t_purge.call(this);\n\t\t\t}\n\t\t});\n\n\t\tif (hasExif) {\n\t\t\tthis.meta = {\n\t\t\t\ttiff: _ep.TIFF(),\n\t\t\t\texif: _ep.EXIF(),\n\t\t\t\tgps: _ep.GPS()\n\t\t\t};\n\t\t}\n\n\t\tfunction _purge() {\n\t\t\tif (!_ep || !_hm || !_br) { \n\t\t\t\treturn; // ignore any repeating purge requests\n\t\t\t}\n\t\t\t_ep.purge();\n\t\t\t_hm.purge();\n\t\t\t_br.init(null);\n\t\t\t_binstr = _info = _hm = _ep = _br = null;\n\t\t}\n\t}\n\n\treturn JPEG;\n});\n\n// Included from: src/javascript/runtime/html5/image/PNG.js\n\n/**\n * PNG.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/image/PNG\n@private\n*/\ndefine(\"moxie/runtime/html5/image/PNG\", [\n\t\"moxie/core/Exceptions\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/html5/utils/BinaryReader\"\n], function(x, Basic, BinaryReader) {\n\t\n\tfunction PNG(binstr) {\n\t\tvar _binstr, _br, _hm, _ep, _info;\n\n\t\t_binstr = binstr;\n\n\t\t_br = new BinaryReader();\n\t\t_br.init(_binstr);\n\n\t\t// check if it's png\n\t\t(function() {\n\t\t\tvar idx = 0, i = 0\n\t\t\t, signature = [0x8950, 0x4E47, 0x0D0A, 0x1A0A]\n\t\t\t;\n\n\t\t\tfor (i = 0; i < signature.length; i++, idx += 2) {\n\t\t\t\tif (signature[i] != _br.SHORT(idx)) {\n\t\t\t\t\tthrow new x.ImageError(x.ImageError.WRONG_FORMAT);\n\t\t\t\t}\n\t\t\t}\n\t\t}());\n\n\t\tfunction _getDimensions() {\n\t\t\tvar chunk, idx;\n\n\t\t\tchunk = _getChunkAt.call(this, 8);\n\n\t\t\tif (chunk.type == 'IHDR') {\n\t\t\t\tidx = chunk.start;\n\t\t\t\treturn {\n\t\t\t\t\twidth: _br.LONG(idx),\n\t\t\t\t\theight: _br.LONG(idx += 4)\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tfunction _purge() {\n\t\t\tif (!_br) {\n\t\t\t\treturn; // ignore any repeating purge requests\n\t\t\t}\n\t\t\t_br.init(null);\n\t\t\t_binstr = _info = _hm = _ep = _br = null;\n\t\t}\n\n\t\t_info = _getDimensions.call(this);\n\n\t\tBasic.extend(this, {\n\t\t\ttype: 'image/png',\n\n\t\t\tsize: _binstr.length,\n\n\t\t\twidth: _info.width,\n\n\t\t\theight: _info.height,\n\n\t\t\tpurge: function() {\n\t\t\t\t_purge.call(this);\n\t\t\t}\n\t\t});\n\n\t\t// for PNG we can safely trigger purge automatically, as we do not keep any data for later\n\t\t_purge.call(this);\n\n\t\tfunction _getChunkAt(idx) {\n\t\t\tvar length, type, start, CRC;\n\n\t\t\tlength = _br.LONG(idx);\n\t\t\ttype = _br.STRING(idx += 4, 4);\n\t\t\tstart = idx += 4;\n\t\t\tCRC = _br.LONG(idx + length);\n\n\t\t\treturn {\n\t\t\t\tlength: length,\n\t\t\t\ttype: type,\n\t\t\t\tstart: start,\n\t\t\t\tCRC: CRC\n\t\t\t};\n\t\t}\n\t}\n\n\treturn PNG;\n});\n\n// Included from: src/javascript/runtime/html5/image/ImageInfo.js\n\n/**\n * ImageInfo.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/image/ImageInfo\n@private\n*/\ndefine(\"moxie/runtime/html5/image/ImageInfo\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/runtime/html5/image/JPEG\",\n\t\"moxie/runtime/html5/image/PNG\"\n], function(Basic, x, JPEG, PNG) {\n\t/**\n\tOptional image investigation tool for HTML5 runtime. Provides the following features:\n\t- ability to distinguish image type (JPEG or PNG) by signature\n\t- ability to extract image width/height directly from it's internals, without preloading in memory (fast)\n\t- ability to extract APP headers from JPEGs (Exif, GPS, etc)\n\t- ability to replace width/height tags in extracted JPEG headers\n\t- ability to restore APP headers, that were for example stripped during image manipulation\n\n\t@class ImageInfo\n\t@constructor\n\t@param {String} binstr Image source as binary string\n\t*/\n\treturn function(binstr) {\n\t\tvar _cs = [JPEG, PNG], _img;\n\n\t\t// figure out the format, throw: ImageError.WRONG_FORMAT if not supported\n\t\t_img = (function() {\n\t\t\tfor (var i = 0; i < _cs.length; i++) {\n\t\t\t\ttry {\n\t\t\t\t\treturn new _cs[i](binstr);\n\t\t\t\t} catch (ex) {\n\t\t\t\t\t// console.info(ex);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthrow new x.ImageError(x.ImageError.WRONG_FORMAT);\n\t\t}());\n\n\t\tBasic.extend(this, {\n\t\t\t/**\n\t\t\tImage Mime Type extracted from it's depths\n\n\t\t\t@property type\n\t\t\t@type {String}\n\t\t\t@default ''\n\t\t\t*/\n\t\t\ttype: '',\n\n\t\t\t/**\n\t\t\tImage size in bytes\n\n\t\t\t@property size\n\t\t\t@type {Number}\n\t\t\t@default 0\n\t\t\t*/\n\t\t\tsize: 0,\n\n\t\t\t/**\n\t\t\tImage width extracted from image source\n\n\t\t\t@property width\n\t\t\t@type {Number}\n\t\t\t@default 0\n\t\t\t*/\n\t\t\twidth: 0,\n\n\t\t\t/**\n\t\t\tImage height extracted from image source\n\n\t\t\t@property height\n\t\t\t@type {Number}\n\t\t\t@default 0\n\t\t\t*/\n\t\t\theight: 0,\n\n\t\t\t/**\n\t\t\tSets Exif tag. Currently applicable only for width and height tags. Obviously works only with JPEGs.\n\n\t\t\t@method setExif\n\t\t\t@param {String} tag Tag to set\n\t\t\t@param {Mixed} value Value to assign to the tag\n\t\t\t*/\n\t\t\tsetExif: function() {},\n\n\t\t\t/**\n\t\t\tRestores headers to the source.\n\n\t\t\t@method writeHeaders\n\t\t\t@param {String} data Image source as binary string\n\t\t\t@return {String} Updated binary string\n\t\t\t*/\n\t\t\twriteHeaders: function(data) {\n\t\t\t\treturn data;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tStrip all headers from the source.\n\n\t\t\t@method stripHeaders\n\t\t\t@param {String} data Image source as binary string\n\t\t\t@return {String} Updated binary string\n\t\t\t*/\n\t\t\tstripHeaders: function(data) {\n\t\t\t\treturn data;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tDispose resources.\n\n\t\t\t@method purge\n\t\t\t*/\n\t\t\tpurge: function() {}\n\t\t});\n\n\t\tBasic.extend(this, _img);\n\n\t\tthis.purge = function() {\n\t\t\t_img.purge();\n\t\t\t_img = null;\n\t\t};\n\t};\n});\n\n// Included from: src/javascript/runtime/html5/image/MegaPixel.js\n\n/**\n(The MIT License)\n\nCopyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>;\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n'Software'), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n/**\n * Mega pixel image rendering library for iOS6 Safari\n *\n * Fixes iOS6 Safari's image file rendering issue for large size image (over mega-pixel),\n * which causes unexpected subsampling when drawing it in canvas.\n * By using this library, you can safely render the image with proper stretching.\n *\n * Copyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>\n * Released under the MIT license\n */\n\n/**\n@class moxie/runtime/html5/image/MegaPixel\n@private\n*/\ndefine(\"moxie/runtime/html5/image/MegaPixel\", [], function() {\n\n\t/**\n\t * Rendering image element (with resizing) into the canvas element\n\t */\n\tfunction renderImageToCanvas(img, canvas, options) {\n\t\tvar iw = img.naturalWidth, ih = img.naturalHeight;\n\t\tvar width = options.width, height = options.height;\n\t\tvar x = options.x || 0, y = options.y || 0;\n\t\tvar ctx = canvas.getContext('2d');\n\t\tif (detectSubsampling(img)) {\n\t\t\tiw /= 2;\n\t\t\tih /= 2;\n\t\t}\n\t\tvar d = 1024; // size of tiling canvas\n\t\tvar tmpCanvas = document.createElement('canvas');\n\t\ttmpCanvas.width = tmpCanvas.height = d;\n\t\tvar tmpCtx = tmpCanvas.getContext('2d');\n\t\tvar vertSquashRatio = detectVerticalSquash(img, iw, ih);\n\t\tvar sy = 0;\n\t\twhile (sy < ih) {\n\t\t\tvar sh = sy + d > ih ? ih - sy : d;\n\t\t\tvar sx = 0;\n\t\t\twhile (sx < iw) {\n\t\t\t\tvar sw = sx + d > iw ? iw - sx : d;\n\t\t\t\ttmpCtx.clearRect(0, 0, d, d);\n\t\t\t\ttmpCtx.drawImage(img, -sx, -sy);\n\t\t\t\tvar dx = (sx * width / iw + x) << 0;\n\t\t\t\tvar dw = Math.ceil(sw * width / iw);\n\t\t\t\tvar dy = (sy * height / ih / vertSquashRatio + y) << 0;\n\t\t\t\tvar dh = Math.ceil(sh * height / ih / vertSquashRatio);\n\t\t\t\tctx.drawImage(tmpCanvas, 0, 0, sw, sh, dx, dy, dw, dh);\n\t\t\t\tsx += d;\n\t\t\t}\n\t\t\tsy += d;\n\t\t}\n\t\ttmpCanvas = tmpCtx = null;\n\t}\n\n\t/**\n\t * Detect subsampling in loaded image.\n\t * In iOS, larger images than 2M pixels may be subsampled in rendering.\n\t */\n\tfunction detectSubsampling(img) {\n\t\tvar iw = img.naturalWidth, ih = img.naturalHeight;\n\t\tif (iw * ih > 1024 * 1024) { // subsampling may happen over megapixel image\n\t\t\tvar canvas = document.createElement('canvas');\n\t\t\tcanvas.width = canvas.height = 1;\n\t\t\tvar ctx = canvas.getContext('2d');\n\t\t\tctx.drawImage(img, -iw + 1, 0);\n\t\t\t// subsampled image becomes half smaller in rendering size.\n\t\t\t// check alpha channel value to confirm image is covering edge pixel or not.\n\t\t\t// if alpha value is 0 image is not covering, hence subsampled.\n\t\t\treturn ctx.getImageData(0, 0, 1, 1).data[3] === 0;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\n\t/**\n\t * Detecting vertical squash in loaded image.\n\t * Fixes a bug which squash image vertically while drawing into canvas for some images.\n\t */\n\tfunction detectVerticalSquash(img, iw, ih) {\n\t\tvar canvas = document.createElement('canvas');\n\t\tcanvas.width = 1;\n\t\tcanvas.height = ih;\n\t\tvar ctx = canvas.getContext('2d');\n\t\tctx.drawImage(img, 0, 0);\n\t\tvar data = ctx.getImageData(0, 0, 1, ih).data;\n\t\t// search image edge pixel position in case it is squashed vertically.\n\t\tvar sy = 0;\n\t\tvar ey = ih;\n\t\tvar py = ih;\n\t\twhile (py > sy) {\n\t\t\tvar alpha = data[(py - 1) * 4 + 3];\n\t\t\tif (alpha === 0) {\n\t\t\t\tey = py;\n\t\t\t} else {\n\t\t\tsy = py;\n\t\t\t}\n\t\t\tpy = (ey + sy) >> 1;\n\t\t}\n\t\tcanvas = null;\n\t\tvar ratio = (py / ih);\n\t\treturn (ratio === 0) ? 1 : ratio;\n\t}\n\n\treturn {\n\t\tisSubsampled: detectSubsampling,\n\t\trenderTo: renderImageToCanvas\n\t};\n});\n\n// Included from: src/javascript/runtime/html5/image/Image.js\n\n/**\n * Image.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/image/Image\n@private\n*/\ndefine(\"moxie/runtime/html5/image/Image\", [\n\t\"moxie/runtime/html5/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/core/utils/Encode\",\n\t\"moxie/file/File\",\n\t\"moxie/runtime/html5/image/ImageInfo\",\n\t\"moxie/runtime/html5/image/MegaPixel\",\n\t\"moxie/core/utils/Mime\",\n\t\"moxie/core/utils/Env\"\n], function(extensions, Basic, x, Encode, File, ImageInfo, MegaPixel, Mime, Env) {\n\t\n\tfunction HTML5Image() {\n\t\tvar me = this\n\t\t, _img, _imgInfo, _canvas, _binStr, _blob\n\t\t, _modified = false // is set true whenever image is modified\n\t\t, _preserveHeaders = true\n\t\t;\n\n\t\tBasic.extend(this, {\n\t\t\tloadFromBlob: function(blob) {\n\t\t\t\tvar comp = this, I = comp.getRuntime()\n\t\t\t\t, asBinary = arguments.length > 1 ? arguments[1] : true\n\t\t\t\t;\n\n\t\t\t\tif (!I.can('access_binary')) {\n\t\t\t\t\tthrow new x.RuntimeError(x.RuntimeError.NOT_SUPPORTED_ERR);\n\t\t\t\t}\n\n\t\t\t\t_blob = blob;\n\n\t\t\t\tif (blob.isDetached()) {\n\t\t\t\t\t_binStr = blob.getSource();\n\t\t\t\t\t_preload.call(this, _binStr);\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\t_readAsDataUrl.call(this, blob.getSource(), function(dataUrl) {\n\t\t\t\t\t\tif (asBinary) {\n\t\t\t\t\t\t\t_binStr = _toBinary(dataUrl);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_preload.call(comp, dataUrl);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tloadFromImage: function(img, exact) {\n\t\t\t\tthis.meta = img.meta;\n\n\t\t\t\t_blob = new File(null, {\n\t\t\t\t\tname: img.name,\n\t\t\t\t\tsize: img.size,\n\t\t\t\t\ttype: img.type\n\t\t\t\t});\n\n\t\t\t\t_preload.call(this, exact ? (_binStr = img.getAsBinaryString()) : img.getAsDataURL());\n\t\t\t},\n\n\t\t\tgetInfo: function() {\n\t\t\t\tvar I = this.getRuntime(), info;\n\n\t\t\t\tif (!_imgInfo && _binStr && I.can('access_image_binary')) {\n\t\t\t\t\t_imgInfo = new ImageInfo(_binStr);\n\t\t\t\t}\n\n\t\t\t\tinfo = {\n\t\t\t\t\twidth: _getImg().width || 0,\n\t\t\t\t\theight: _getImg().height || 0,\n\t\t\t\t\ttype: _blob.type || Mime.getFileMime(_blob.name),\n\t\t\t\t\tsize: _binStr && _binStr.length || _blob.size || 0,\n\t\t\t\t\tname: _blob.name || '',\n\t\t\t\t\tmeta: _imgInfo && _imgInfo.meta || this.meta || {}\n\t\t\t\t};\n\n\t\t\t\treturn info;\n\t\t\t},\n\n\t\t\tdownsize: function() {\n\t\t\t\t_downsize.apply(this, arguments);\n\t\t\t},\n\n\t\t\tgetAsCanvas: function() {\n\t\t\t\tif (_canvas) {\n\t\t\t\t\t_canvas.id = this.uid + '_canvas';\n\t\t\t\t}\n\t\t\t\treturn _canvas;\n\t\t\t},\n\n\t\t\tgetAsBlob: function(type, quality) {\n\t\t\t\tif (type !== this.type) {\n\t\t\t\t\t// if different mime type requested prepare image for conversion\n\t\t\t\t\t_downsize.call(this, this.width, this.height, false);\n\t\t\t\t}\n\t\t\t\treturn new File(null, {\n\t\t\t\t\tname: _blob.name || '',\n\t\t\t\t\ttype: type,\n\t\t\t\t\tdata: me.getAsBinaryString.call(this, type, quality)\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tgetAsDataURL: function(type) {\n\t\t\t\tvar quality = arguments[1] || 90;\n\n\t\t\t\t// if image has not been modified, return the source right away\n\t\t\t\tif (!_modified) {\n\t\t\t\t\treturn _img.src;\n\t\t\t\t}\n\n\t\t\t\tif ('image/jpeg' !== type) {\n\t\t\t\t\treturn _canvas.toDataURL('image/png');\n\t\t\t\t} else {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// older Geckos used to result in an exception on quality argument\n\t\t\t\t\t\treturn _canvas.toDataURL('image/jpeg', quality/100);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\treturn _canvas.toDataURL('image/jpeg');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tgetAsBinaryString: function(type, quality) {\n\t\t\t\t// if image has not been modified, return the source right away\n\t\t\t\tif (!_modified) {\n\t\t\t\t\t// if image was not loaded from binary string\n\t\t\t\t\tif (!_binStr) {\n\t\t\t\t\t\t_binStr = _toBinary(me.getAsDataURL(type, quality));\n\t\t\t\t\t}\n\t\t\t\t\treturn _binStr;\n\t\t\t\t}\n\n\t\t\t\tif ('image/jpeg' !== type) {\n\t\t\t\t\t_binStr = _toBinary(me.getAsDataURL(type, quality));\n\t\t\t\t} else {\n\t\t\t\t\tvar dataUrl;\n\n\t\t\t\t\t// if jpeg\n\t\t\t\t\tif (!quality) {\n\t\t\t\t\t\tquality = 90;\n\t\t\t\t\t}\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// older Geckos used to result in an exception on quality argument\n\t\t\t\t\t\tdataUrl = _canvas.toDataURL('image/jpeg', quality/100);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\tdataUrl = _canvas.toDataURL('image/jpeg');\n\t\t\t\t\t}\n\n\t\t\t\t\t_binStr = _toBinary(dataUrl);\n\n\t\t\t\t\tif (_imgInfo) {\n\t\t\t\t\t\t_binStr = _imgInfo.stripHeaders(_binStr);\n\n\t\t\t\t\t\tif (_preserveHeaders) {\n\t\t\t\t\t\t\t// update dimensions info in exif\n\t\t\t\t\t\t\tif (_imgInfo.meta && _imgInfo.meta.exif) {\n\t\t\t\t\t\t\t\t_imgInfo.setExif({\n\t\t\t\t\t\t\t\t\tPixelXDimension: this.width,\n\t\t\t\t\t\t\t\t\tPixelYDimension: this.height\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// re-inject the headers\n\t\t\t\t\t\t\t_binStr = _imgInfo.writeHeaders(_binStr);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// will be re-created from fresh on next getInfo call\n\t\t\t\t\t\t_imgInfo.purge();\n\t\t\t\t\t\t_imgInfo = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t_modified = false;\n\n\t\t\t\treturn _binStr;\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\tme = null;\n\t\t\t\t_purge.call(this);\n\t\t\t\tthis.getRuntime().getShim().removeInstance(this.uid);\n\t\t\t}\n\t\t});\n\n\n\t\tfunction _getImg() {\n\t\t\tif (!_canvas && !_img) {\n\t\t\t\tthrow new x.ImageError(x.DOMException.INVALID_STATE_ERR);\n\t\t\t}\n\t\t\treturn _canvas || _img;\n\t\t}\n\n\n\t\tfunction _toBinary(str) {\n\t\t\treturn Encode.atob(str.substring(str.indexOf('base64,') + 7));\n\t\t}\n\n\n\t\tfunction _toDataUrl(str, type) {\n\t\t\treturn 'data:' + (type || '') + ';base64,' + Encode.btoa(str);\n\t\t}\n\n\n\t\tfunction _preload(str) {\n\t\t\tvar comp = this;\n\n\t\t\t_img = new Image();\n\t\t\t_img.onerror = function() {\n\t\t\t\t_purge.call(this);\n\t\t\t\tcomp.trigger('error', x.ImageError.WRONG_FORMAT);\n\t\t\t};\n\t\t\t_img.onload = function() {\n\t\t\t\tcomp.trigger('load');\n\t\t\t};\n\n\t\t\t_img.src = /^data:[^;]*;base64,/.test(str) ? str : _toDataUrl(str, _blob.type);\n\t\t}\n\n\n\t\tfunction _readAsDataUrl(file, callback) {\n\t\t\tvar comp = this, fr;\n\n\t\t\t// use FileReader if it's available\n\t\t\tif (window.FileReader) {\n\t\t\t\tfr = new FileReader();\n\t\t\t\tfr.onload = function() {\n\t\t\t\t\tcallback(this.result);\n\t\t\t\t};\n\t\t\t\tfr.onerror = function() {\n\t\t\t\t\tcomp.trigger('error', x.ImageError.WRONG_FORMAT);\n\t\t\t\t};\n\t\t\t\tfr.readAsDataURL(file);\n\t\t\t} else {\n\t\t\t\treturn callback(file.getAsDataURL());\n\t\t\t}\n\t\t}\n\n\t\tfunction _downsize(width, height, crop, preserveHeaders) {\n\t\t\tvar self = this\n\t\t\t, scale\n\t\t\t, mathFn\n\t\t\t, x = 0\n\t\t\t, y = 0\n\t\t\t, img\n\t\t\t, destWidth\n\t\t\t, destHeight\n\t\t\t, orientation\n\t\t\t;\n\n\t\t\t_preserveHeaders = preserveHeaders; // we will need to check this on export (see getAsBinaryString())\n\n\t\t\t// take into account orientation tag\n\t\t\torientation = (this.meta && this.meta.tiff && this.meta.tiff.Orientation) || 1;\n\n\t\t\tif (Basic.inArray(orientation, [5,6,7,8]) !== -1) { // values that require 90 degree rotation\n\t\t\t\t// swap dimensions\n\t\t\t\tvar tmp = width;\n\t\t\t\twidth = height;\n\t\t\t\theight = tmp;\n\t\t\t}\n\n\t\t\timg = _getImg();\n\n\t\t\t// unify dimensions\n\t\t\tif (!crop) {\n\t\t\t\tscale = Math.min(width/img.width, height/img.height);\n\t\t\t} else {\n\t\t\t\t// one of the dimensions may exceed the actual image dimensions - we need to take the smallest value\n\t\t\t\twidth = Math.min(width, img.width);\n\t\t\t\theight = Math.min(height, img.height);\n\n\t\t\t\tscale = Math.max(width/img.width, height/img.height);\n\t\t\t}\n\t\t\n\t\t\t// we only downsize here\n\t\t\tif (scale > 1 && !crop && preserveHeaders) {\n\t\t\t\tthis.trigger('Resize');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// prepare canvas if necessary\n\t\t\tif (!_canvas) {\n\t\t\t\t_canvas = document.createElement(\"canvas\");\n\t\t\t}\n\n\t\t\t// calculate dimensions of proportionally resized image\n\t\t\tdestWidth = Math.round(img.width * scale);\t\n\t\t\tdestHeight = Math.round(img.height * scale);\n\n\t\t\t// scale image and canvas\n\t\t\tif (crop) {\n\t\t\t\t_canvas.width = width;\n\t\t\t\t_canvas.height = height;\n\n\t\t\t\t// if dimensions of the resulting image still larger than canvas, center it\n\t\t\t\tif (destWidth > width) {\n\t\t\t\t\tx = Math.round((destWidth - width) / 2);\n\t\t\t\t}\n\n\t\t\t\tif (destHeight > height) {\n\t\t\t\t\ty = Math.round((destHeight - height) / 2);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t_canvas.width = destWidth;\n\t\t\t\t_canvas.height = destHeight;\n\t\t\t}\n\n\t\t\t// rotate if required, according to orientation tag\n\t\t\tif (!_preserveHeaders) {\n\t\t\t\t_rotateToOrientaion(_canvas.width, _canvas.height, orientation);\n\t\t\t}\n\n\t\t\t_drawToCanvas.call(this, img, _canvas, -x, -y, destWidth, destHeight);\n\n\t\t\tthis.width = _canvas.width;\n\t\t\tthis.height = _canvas.height;\n\n\t\t\t_modified = true;\n\t\t\tself.trigger('Resize');\n\t\t}\n\n\n\t\tfunction _drawToCanvas(img, canvas, x, y, w, h) {\n\t\t\tif (Env.OS === 'iOS') { \n\t\t\t\t// avoid squish bug in iOS6\n\t\t\t\tMegaPixel.renderTo(img, canvas, { width: w, height: h, x: x, y: y });\n\t\t\t} else {\n\t\t\t\tvar ctx = canvas.getContext('2d');\n\t\t\t\tctx.drawImage(img, x, y, w, h);\n\t\t\t}\n\t\t}\n\n\n\t\t/**\n\t\t* Transform canvas coordination according to specified frame size and orientation\n\t\t* Orientation value is from EXIF tag\n\t\t* @author Shinichi Tomita <shinichi.tomita@gmail.com>\n\t\t*/\n\t\tfunction _rotateToOrientaion(width, height, orientation) {\n\t\t\tswitch (orientation) {\n\t\t\t\tcase 5:\n\t\t\t\tcase 6:\n\t\t\t\tcase 7:\n\t\t\t\tcase 8:\n\t\t\t\t\t_canvas.width = height;\n\t\t\t\t\t_canvas.height = width;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t_canvas.width = width;\n\t\t\t\t\t_canvas.height = height;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t1 = The 0th row is at the visual top of the image, and the 0th column is the visual left-hand side.\n\t\t\t2 = The 0th row is at the visual top of the image, and the 0th column is the visual right-hand side.\n\t\t\t3 = The 0th row is at the visual bottom of the image, and the 0th column is the visual right-hand side.\n\t\t\t4 = The 0th row is at the visual bottom of the image, and the 0th column is the visual left-hand side.\n\t\t\t5 = The 0th row is the visual left-hand side of the image, and the 0th column is the visual top.\n\t\t\t6 = The 0th row is the visual right-hand side of the image, and the 0th column is the visual top.\n\t\t\t7 = The 0th row is the visual right-hand side of the image, and the 0th column is the visual bottom.\n\t\t\t8 = The 0th row is the visual left-hand side of the image, and the 0th column is the visual bottom.\n\t\t\t*/\n\n\t\t\tvar ctx = _canvas.getContext('2d');\n\t\t\tswitch (orientation) {\n\t\t\t\tcase 2:\n\t\t\t\t\t// horizontal flip\n\t\t\t\t\tctx.translate(width, 0);\n\t\t\t\t\tctx.scale(-1, 1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\t// 180 rotate left\n\t\t\t\t\tctx.translate(width, height);\n\t\t\t\t\tctx.rotate(Math.PI);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\t// vertical flip\n\t\t\t\t\tctx.translate(0, height);\n\t\t\t\t\tctx.scale(1, -1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 5:\n\t\t\t\t\t// vertical flip + 90 rotate right\n\t\t\t\t\tctx.rotate(0.5 * Math.PI);\n\t\t\t\t\tctx.scale(1, -1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 6:\n\t\t\t\t\t// 90 rotate right\n\t\t\t\t\tctx.rotate(0.5 * Math.PI);\n\t\t\t\t\tctx.translate(0, -height);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 7:\n\t\t\t\t\t// horizontal flip + 90 rotate right\n\t\t\t\t\tctx.rotate(0.5 * Math.PI);\n\t\t\t\t\tctx.translate(width, -height);\n\t\t\t\t\tctx.scale(-1, 1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 8:\n\t\t\t\t\t// 90 rotate left\n\t\t\t\t\tctx.rotate(-0.5 * Math.PI);\n\t\t\t\t\tctx.translate(-width, 0);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\n\t\tfunction _purge() {\n\t\t\tif (_imgInfo) {\n\t\t\t\t_imgInfo.purge();\n\t\t\t\t_imgInfo = null;\n\t\t\t}\n\t\t\t_binStr = _img = _canvas = _blob = null;\n\t\t\t_modified = false;\n\t\t}\n\t}\n\n\treturn (extensions.Image = HTML5Image);\n});\n\n// Included from: src/javascript/runtime/flash/Runtime.js\n\n/**\n * Runtime.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/*global ActiveXObject:true */\n\n/**\nDefines constructor for Flash runtime.\n\n@class moxie/runtime/flash/Runtime\n@private\n*/\ndefine(\"moxie/runtime/flash/Runtime\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Env\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/runtime/Runtime\"\n], function(Basic, Env, Dom, x, Runtime) {\n\t\n\tvar type = 'flash', extensions = {};\n\n\t/**\n\tGet the version of the Flash Player\n\n\t@method getShimVersion\n\t@private\n\t@return {Number} Flash Player version\n\t*/\n\tfunction getShimVersion() {\n\t\tvar version;\n\n\t\ttry {\n\t\t\tversion = navigator.plugins['Shockwave Flash'];\n\t\t\tversion = version.description;\n\t\t} catch (e1) {\n\t\t\ttry {\n\t\t\t\tversion = new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version');\n\t\t\t} catch (e2) {\n\t\t\t\tversion = '0.0';\n\t\t\t}\n\t\t}\n\t\tversion = version.match(/\\d+/g);\n\t\treturn parseFloat(version[0] + '.' + version[1]);\n\t}\n\n\t/**\n\tConstructor for the Flash Runtime\n\n\t@class FlashRuntime\n\t@extends Runtime\n\t*/\n\tfunction FlashRuntime(options) {\n\t\tvar I = this, initTimer;\n\n\t\toptions = Basic.extend({ swf_url: Env.swf_url }, options);\n\n\t\tRuntime.call(this, options, type, {\n\t\t\taccess_binary: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\taccess_image_binary: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\tdisplay_media: Runtime.capTrue,\n\t\t\tdo_cors: Runtime.capTrue,\n\t\t\tdrag_and_drop: false,\n\t\t\treport_upload_progress: function() {\n\t\t\t\treturn I.mode === 'client';\n\t\t\t},\n\t\t\tresize_image: Runtime.capTrue,\n\t\t\treturn_response_headers: false,\n\t\t\treturn_response_type: function(responseType) {\n\t\t\t\tif (responseType === 'json' && !!window.JSON) {\n\t\t\t\t\treturn true;\n\t\t\t\t} \n\t\t\t\treturn !Basic.arrayDiff(responseType, ['', 'text', 'document']) || I.mode === 'browser';\n\t\t\t},\n\t\t\treturn_status_code: function(code) {\n\t\t\t\treturn I.mode === 'browser' || !Basic.arrayDiff(code, [200, 404]);\n\t\t\t},\n\t\t\tselect_file: Runtime.capTrue,\n\t\t\tselect_multiple: Runtime.capTrue,\n\t\t\tsend_binary_string: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\tsend_browser_cookies: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\tsend_custom_headers: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\tsend_multipart: Runtime.capTrue,\n\t\t\tslice_blob: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\tstream_upload: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\tsummon_file_dialog: false,\n\t\t\tupload_filesize: function(size) {\n\t\t\t\treturn Basic.parseSizeStr(size) <= 2097152 || I.mode === 'client';\n\t\t\t},\n\t\t\tuse_http_method: function(methods) {\n\t\t\t\treturn !Basic.arrayDiff(methods, ['GET', 'POST']);\n\t\t\t}\n\t\t}, { \n\t\t\t// capabilities that require specific mode\n\t\t\taccess_binary: function(value) {\n\t\t\t\treturn value ? 'browser' : 'client';\n\t\t\t},\n\t\t\taccess_image_binary: function(value) {\n\t\t\t\treturn value ? 'browser' : 'client';\n\t\t\t},\n\t\t\treport_upload_progress: function(value) {\n\t\t\t\treturn value ? 'browser' : 'client';\n\t\t\t},\n\t\t\treturn_response_type: function(responseType) {\n\t\t\t\treturn Basic.arrayDiff(responseType, ['', 'text', 'json', 'document']) ? 'browser' : ['client', 'browser'];\n\t\t\t},\n\t\t\treturn_status_code: function(code) {\n\t\t\t\treturn Basic.arrayDiff(code, [200, 404]) ? 'browser' : ['client', 'browser'];\n\t\t\t},\n\t\t\tsend_binary_string: function(value) {\n\t\t\t\treturn value ? 'browser' : 'client';\n\t\t\t},\n\t\t\tsend_browser_cookies: function(value) {\n\t\t\t\treturn value ? 'browser' : 'client';\n\t\t\t},\n\t\t\tsend_custom_headers: function(value) {\n\t\t\t\treturn value ? 'browser' : 'client';\n\t\t\t},\n\t\t\tstream_upload: function(value) {\n\t\t\t\treturn value ? 'client' : 'browser';\n\t\t\t},\n\t\t\tupload_filesize: function(size) {\n\t\t\t\treturn Basic.parseSizeStr(size) >= 2097152 ? 'client' : 'browser';\n\t\t\t}\n\t\t}, 'client');\n\n\n\t\t// minimal requirement for Flash Player version\n\t\tif (getShimVersion() < 10) {\n\t\t\tthis.mode = false; // with falsy mode, runtime won't operable, no matter what the mode was before\n\t\t}\n\n\n\t\tBasic.extend(this, {\n\n\t\t\tgetShim: function() {\n\t\t\t\treturn Dom.get(this.uid);\n\t\t\t},\n\n\t\t\tshimExec: function(component, action) {\n\t\t\t\tvar args = [].slice.call(arguments, 2);\n\t\t\t\treturn I.getShim().exec(this.uid, component, action, args);\n\t\t\t},\n\n\t\t\tinit: function() {\n\t\t\t\tvar html, el, container;\n\n\t\t\t\tcontainer = this.getShimContainer();\n\n\t\t\t\t// if not the minimal height, shims are not initialized in older browsers (e.g FF3.6, IE6,7,8, Safari 4.0,5.0, etc)\n\t\t\t\tBasic.extend(container.style, {\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop: '-8px',\n\t\t\t\t\tleft: '-8px',\n\t\t\t\t\twidth: '9px',\n\t\t\t\t\theight: '9px',\n\t\t\t\t\toverflow: 'hidden'\n\t\t\t\t});\n\n\t\t\t\t// insert flash object\n\t\t\t\thtml = '<object id=\"' + this.uid + '\" type=\"application/x-shockwave-flash\" data=\"' +  options.swf_url + '\" ';\n\n\t\t\t\tif (Env.browser === 'IE') {\n\t\t\t\t\thtml += 'classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" ';\n\t\t\t\t}\n\n\t\t\t\thtml += 'width=\"100%\" height=\"100%\" style=\"outline:0\">'  +\n\t\t\t\t\t'<param name=\"movie\" value=\"' + options.swf_url + '\" />' +\n\t\t\t\t\t'<param name=\"flashvars\" value=\"uid=' + escape(this.uid) + '&target=' + Env.global_event_dispatcher + '\" />' +\n\t\t\t\t\t'<param name=\"wmode\" value=\"transparent\" />' +\n\t\t\t\t\t'<param name=\"allowscriptaccess\" value=\"always\" />' +\n\t\t\t\t'</object>';\n\n\t\t\t\tif (Env.browser === 'IE') {\n\t\t\t\t\tel = document.createElement('div');\n\t\t\t\t\tcontainer.appendChild(el);\n\t\t\t\t\tel.outerHTML = html;\n\t\t\t\t\tel = container = null; // just in case\n\t\t\t\t} else {\n\t\t\t\t\tcontainer.innerHTML = html;\n\t\t\t\t}\n\n\t\t\t\t// Init is dispatched by the shim\n\t\t\t\tinitTimer = setTimeout(function() {\n\t\t\t\t\tif (I && !I.initialized) { // runtime might be already destroyed by this moment\n\t\t\t\t\t\tI.trigger(\"Error\", new x.RuntimeError(x.RuntimeError.NOT_INIT_ERR));\n\t\t\t\t\t}\n\t\t\t\t}, 5000);\n\t\t\t},\n\n\t\t\tdestroy: (function(destroy) { // extend default destroy method\n\t\t\t\treturn function() {\n\t\t\t\t\tdestroy.call(I);\n\t\t\t\t\tclearTimeout(initTimer); // initialization check might be still onwait\n\t\t\t\t\toptions = initTimer = destroy = I = null;\n\t\t\t\t};\n\t\t\t}(this.destroy))\n\n\t\t}, extensions);\n\t}\n\n\tRuntime.addConstructor(type, FlashRuntime);\n\n\treturn extensions;\n});\n\n// Included from: src/javascript/runtime/flash/file/Blob.js\n\n/**\n * Blob.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/flash/file/Blob\n@private\n*/\ndefine(\"moxie/runtime/flash/file/Blob\", [\n\t\"moxie/runtime/flash/Runtime\",\n\t\"moxie/file/Blob\"\n], function(extensions, Blob) {\n\n\tvar FlashBlob = {\n\t\tslice: function(blob, start, end, type) {\n\t\t\tvar self = this.getRuntime();\n\n\t\t\tif (start < 0) {\n\t\t\t\tstart = Math.max(blob.size + start, 0);\n\t\t\t} else if (start > 0) {\n\t\t\t\tstart = Math.min(start, blob.size);\n\t\t\t}\n\n\t\t\tif (end < 0) {\n\t\t\t\tend = Math.max(blob.size + end, 0);\n\t\t\t} else if (end > 0) {\n\t\t\t\tend = Math.min(end, blob.size);\n\t\t\t}\n\n\t\t\tblob = self.shimExec.call(this, 'Blob', 'slice', start, end, type || '');\n\n\t\t\tif (blob) {\n\t\t\t\tblob = new Blob(self.uid, blob);\n\t\t\t}\n\t\t\treturn blob;\n\t\t}\n\t};\n\n\treturn (extensions.Blob = FlashBlob);\n});\n\n// Included from: src/javascript/runtime/flash/file/FileInput.js\n\n/**\n * FileInput.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/flash/file/FileInput\n@private\n*/\ndefine(\"moxie/runtime/flash/file/FileInput\", [\n\t\"moxie/runtime/flash/Runtime\"\n], function(extensions) {\n\t\n\tvar FileInput = {\t\t\n\t\tinit: function(options) {\n\t\t\tthis.getRuntime().shimExec.call(this, 'FileInput', 'init', {\n\t\t\t\tname: options.name,\n\t\t\t\taccept: options.accept,\n\t\t\t\tmultiple: options.multiple\n\t\t\t});\n\t\t\tthis.trigger('ready');\n\t\t}\n\t};\n\n\treturn (extensions.FileInput = FileInput);\n});\n\n// Included from: src/javascript/runtime/flash/file/FileReader.js\n\n/**\n * FileReader.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/flash/file/FileReader\n@private\n*/\ndefine(\"moxie/runtime/flash/file/FileReader\", [\n\t\"moxie/runtime/flash/Runtime\",\n\t\"moxie/core/utils/Encode\"\n], function(extensions, Encode) {\n\n\tvar _result = '';\n\n\tfunction _formatData(data, op) {\n\t\tswitch (op) {\n\t\t\tcase 'readAsText':\n\t\t\t\treturn Encode.atob(data, 'utf8');\n\t\t\tcase 'readAsBinaryString':\n\t\t\t\treturn Encode.atob(data);\n\t\t\tcase 'readAsDataURL':\n\t\t\t\treturn data;\n\t\t}\n\t\treturn null;\n\t}\n\n\tvar FileReader = {\n\t\tread: function(op, blob) {\n\t\t\tvar target = this, self = target.getRuntime();\n\n\t\t\t// special prefix for DataURL read mode\n\t\t\tif (op === 'readAsDataURL') {\n\t\t\t\t_result = 'data:' + (blob.type || '') + ';base64,';\n\t\t\t}\n\n\t\t\ttarget.bind('Progress', function(e, data) {\n\t\t\t\tif (data) {\n\t\t\t\t\t_result += _formatData(data, op);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn self.shimExec.call(this, 'FileReader', 'readAsBase64', blob.uid);\n\t\t},\n\n\t\tgetResult: function() {\n\t\t\treturn _result;\n\t\t},\n\n\t\tdestroy: function() {\n\t\t\t_result = null;\n\t\t}\n\t};\n\n\treturn (extensions.FileReader = FileReader);\n});\n\n// Included from: src/javascript/runtime/flash/file/FileReaderSync.js\n\n/**\n * FileReaderSync.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/flash/file/FileReaderSync\n@private\n*/\ndefine(\"moxie/runtime/flash/file/FileReaderSync\", [\n\t\"moxie/runtime/flash/Runtime\",\n\t\"moxie/core/utils/Encode\"\n], function(extensions, Encode) {\n\t\n\tfunction _formatData(data, op) {\n\t\tswitch (op) {\n\t\t\tcase 'readAsText':\n\t\t\t\treturn Encode.atob(data, 'utf8');\n\t\t\tcase 'readAsBinaryString':\n\t\t\t\treturn Encode.atob(data);\n\t\t\tcase 'readAsDataURL':\n\t\t\t\treturn data;\n\t\t}\n\t\treturn null;\n\t}\n\n\tvar FileReaderSync = {\n\t\tread: function(op, blob) {\n\t\t\tvar result, self = this.getRuntime();\n\n\t\t\tresult = self.shimExec.call(this, 'FileReaderSync', 'readAsBase64', blob.uid);\n\t\t\tif (!result) {\n\t\t\t\treturn null; // or throw ex\n\t\t\t}\n\n\t\t\t// special prefix for DataURL read mode\n\t\t\tif (op === 'readAsDataURL') {\n\t\t\t\tresult = 'data:' + (blob.type || '') + ';base64,' + result;\n\t\t\t}\n\n\t\t\treturn _formatData(result, op, blob.type);\n\t\t}\n\t};\n\n\treturn (extensions.FileReaderSync = FileReaderSync);\n});\n\n// Included from: src/javascript/runtime/flash/xhr/XMLHttpRequest.js\n\n/**\n * XMLHttpRequest.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/flash/xhr/XMLHttpRequest\n@private\n*/\ndefine(\"moxie/runtime/flash/xhr/XMLHttpRequest\", [\n\t\"moxie/runtime/flash/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/file/Blob\",\n\t\"moxie/file/File\",\n\t\"moxie/file/FileReaderSync\",\n\t\"moxie/xhr/FormData\",\n\t\"moxie/runtime/Transporter\"\n], function(extensions, Basic, Blob, File, FileReaderSync, FormData, Transporter) {\n\t\n\tvar XMLHttpRequest = {\n\n\t\tsend: function(meta, data) {\n\t\t\tvar target = this, self = target.getRuntime();\n\n\t\t\tfunction send() {\n\t\t\t\tmeta.transport = self.mode;\n\t\t\t\tself.shimExec.call(target, 'XMLHttpRequest', 'send', meta, data);\n\t\t\t}\n\n\n\t\t\tfunction appendBlob(name, blob) {\n\t\t\t\tself.shimExec.call(target, 'XMLHttpRequest', 'appendBlob', name, blob.uid);\n\t\t\t\tdata = null;\n\t\t\t\tsend();\n\t\t\t}\n\n\n\t\t\tfunction attachBlob(blob, cb) {\n\t\t\t\tvar tr = new Transporter();\n\n\t\t\t\ttr.bind(\"TransportingComplete\", function() {\n\t\t\t\t\tcb(this.result);\n\t\t\t\t});\n\n\t\t\t\ttr.transport(blob.getSource(), blob.type, {\n\t\t\t\t\truid: self.uid\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// copy over the headers if any\n\t\t\tif (!Basic.isEmptyObj(meta.headers)) {\n\t\t\t\tBasic.each(meta.headers, function(value, header) {\n\t\t\t\t\tself.shimExec.call(target, 'XMLHttpRequest', 'setRequestHeader', header, value.toString()); // Silverlight doesn't accept integers into the arguments of type object\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// transfer over multipart params and blob itself\n\t\t\tif (data instanceof FormData) {\n\t\t\t\tvar blobField;\n\t\t\t\tdata.each(function(value, name) {\n\t\t\t\t\tif (value instanceof Blob) {\n\t\t\t\t\t\tblobField = name;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.shimExec.call(target, 'XMLHttpRequest', 'append', name, value);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (!data.hasBlob()) {\n\t\t\t\t\tdata = null;\n\t\t\t\t\tsend();\n\t\t\t\t} else {\n\t\t\t\t\tvar blob = data.getBlob();\n\t\t\t\t\tif (blob.isDetached()) {\n\t\t\t\t\t\tattachBlob(blob, function(attachedBlob) {\n\t\t\t\t\t\t\tblob.destroy();\n\t\t\t\t\t\t\tappendBlob(blobField, attachedBlob);\t\t\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tappendBlob(blobField, blob);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (data instanceof Blob) {\n\t\t\t\tif (data.isDetached()) {\n\t\t\t\t\tattachBlob(data, function(attachedBlob) {\n\t\t\t\t\t\tdata.destroy();\n\t\t\t\t\t\tdata = attachedBlob.uid;\n\t\t\t\t\t\tsend();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tdata = data.uid;\n\t\t\t\t\tsend();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsend();\n\t\t\t}\n\t\t},\n\n\t\tgetResponse: function(responseType) {\n\t\t\tvar frs, blob, self = this.getRuntime();\n\n\t\t\tblob = self.shimExec.call(this, 'XMLHttpRequest', 'getResponseAsBlob');\n\n\t\t\tif (blob) {\n\t\t\t\tblob = new File(self.uid, blob);\n\n\t\t\t\tif ('blob' === responseType) {\n\t\t\t\t\treturn blob;\n\t\t\t\t}\n\n\t\t\t\ttry { \n\t\t\t\t\tfrs = new FileReaderSync();\n\n\t\t\t\t\tif (!!~Basic.inArray(responseType, [\"\", \"text\"])) {\n\t\t\t\t\t\treturn frs.readAsText(blob);\n\t\t\t\t\t} else if ('json' === responseType && !!window.JSON) {\n\t\t\t\t\t\treturn JSON.parse(frs.readAsText(blob));\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tblob.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\t\tabort: function(upload_complete_flag) {\n\t\t\tvar self = this.getRuntime();\n\n\t\t\tself.shimExec.call(this, 'XMLHttpRequest', 'abort');\n\n\t\t\tthis.dispatchEvent('readystatechange');\n\t\t\t// this.dispatchEvent('progress');\n\t\t\tthis.dispatchEvent('abort');\n\n\t\t\t//if (!upload_complete_flag) {\n\t\t\t\t// this.dispatchEvent('uploadprogress');\n\t\t\t//}\n\t\t}\n\t};\n\n\treturn (extensions.XMLHttpRequest = XMLHttpRequest);\n});\n\n// Included from: src/javascript/runtime/flash/runtime/Transporter.js\n\n/**\n * Transporter.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/flash/runtime/Transporter\n@private\n*/\ndefine(\"moxie/runtime/flash/runtime/Transporter\", [\n\t\"moxie/runtime/flash/Runtime\",\n\t\"moxie/file/Blob\"\n], function(extensions, Blob) {\n\n\tvar Transporter = {\n\t\tgetAsBlob: function(type) {\n\t\t\tvar self = this.getRuntime()\n\t\t\t, blob = self.shimExec.call(this, 'Transporter', 'getAsBlob', type)\n\t\t\t;\n\t\t\tif (blob) {\n\t\t\t\treturn new Blob(self.uid, blob);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t};\n\n\treturn (extensions.Transporter = Transporter);\n});\n\n// Included from: src/javascript/runtime/flash/image/Image.js\n\n/**\n * Image.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/flash/image/Image\n@private\n*/\ndefine(\"moxie/runtime/flash/image/Image\", [\n\t\"moxie/runtime/flash/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/Transporter\",\n\t\"moxie/file/Blob\",\n\t\"moxie/file/FileReaderSync\"\n], function(extensions, Basic, Transporter, Blob, FileReaderSync) {\n\t\n\tvar Image = {\n\t\tloadFromBlob: function(blob) {\n\t\t\tvar comp = this, self = comp.getRuntime();\n\n\t\t\tfunction exec(srcBlob) {\n\t\t\t\tself.shimExec.call(comp, 'Image', 'loadFromBlob', srcBlob.uid);\n\t\t\t\tcomp = self = null;\n\t\t\t}\n\n\t\t\tif (blob.isDetached()) { // binary string\n\t\t\t\tvar tr = new Transporter();\n\t\t\t\ttr.bind(\"TransportingComplete\", function() {\n\t\t\t\t\texec(tr.result.getSource());\n\t\t\t\t});\n\t\t\t\ttr.transport(blob.getSource(), blob.type, { ruid: self.uid });\n\t\t\t} else {\n\t\t\t\texec(blob.getSource());\n\t\t\t}\n\t\t},\n\n\t\tloadFromImage: function(img) {\n\t\t\tvar self = this.getRuntime();\n\t\t\treturn self.shimExec.call(this, 'Image', 'loadFromImage', img.uid);\n\t\t},\n\n\t\tgetAsBlob: function(type, quality) {\n\t\t\tvar self = this.getRuntime()\n\t\t\t, blob = self.shimExec.call(this, 'Image', 'getAsBlob', type, quality)\n\t\t\t;\n\t\t\tif (blob) {\n\t\t\t\treturn new Blob(self.uid, blob);\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\t\tgetAsDataURL: function() {\n\t\t\tvar self = this.getRuntime()\n\t\t\t, blob = self.Image.getAsBlob.apply(this, arguments)\n\t\t\t, frs\n\t\t\t;\n\t\t\tif (!blob) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tfrs = new FileReaderSync();\n\t\t\treturn frs.readAsDataURL(blob);\n\t\t}\n\t};\n\n\treturn (extensions.Image = Image);\n});\n\n// Included from: src/javascript/runtime/silverlight/Runtime.js\n\n/**\n * RunTime.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/*global ActiveXObject:true */\n\n/**\nDefines constructor for Silverlight runtime.\n\n@class moxie/runtime/silverlight/Runtime\n@private\n*/\ndefine(\"moxie/runtime/silverlight/Runtime\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Env\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/runtime/Runtime\"\n], function(Basic, Env, Dom, x, Runtime) {\n\t\n\tvar type = \"silverlight\", extensions = {};\n\n\tfunction isInstalled(version) {\n\t\tvar isVersionSupported = false, control = null, actualVer,\n\t\t\tactualVerArray, reqVerArray, requiredVersionPart, actualVersionPart, index = 0;\n\n\t\ttry {\n\t\t\ttry {\n\t\t\t\tcontrol = new ActiveXObject('AgControl.AgControl');\n\n\t\t\t\tif (control.IsVersionSupported(version)) {\n\t\t\t\t\tisVersionSupported = true;\n\t\t\t\t}\n\n\t\t\t\tcontrol = null;\n\t\t\t} catch (e) {\n\t\t\t\tvar plugin = navigator.plugins[\"Silverlight Plug-In\"];\n\n\t\t\t\tif (plugin) {\n\t\t\t\t\tactualVer = plugin.description;\n\n\t\t\t\t\tif (actualVer === \"1.0.30226.2\") {\n\t\t\t\t\t\tactualVer = \"2.0.30226.2\";\n\t\t\t\t\t}\n\n\t\t\t\t\tactualVerArray = actualVer.split(\".\");\n\n\t\t\t\t\twhile (actualVerArray.length > 3) {\n\t\t\t\t\t\tactualVerArray.pop();\n\t\t\t\t\t}\n\n\t\t\t\t\twhile ( actualVerArray.length < 4) {\n\t\t\t\t\t\tactualVerArray.push(0);\n\t\t\t\t\t}\n\n\t\t\t\t\treqVerArray = version.split(\".\");\n\n\t\t\t\t\twhile (reqVerArray.length > 4) {\n\t\t\t\t\t\treqVerArray.pop();\n\t\t\t\t\t}\n\n\t\t\t\t\tdo {\n\t\t\t\t\t\trequiredVersionPart = parseInt(reqVerArray[index], 10);\n\t\t\t\t\t\tactualVersionPart = parseInt(actualVerArray[index], 10);\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t} while (index < reqVerArray.length && requiredVersionPart === actualVersionPart);\n\n\t\t\t\t\tif (requiredVersionPart <= actualVersionPart && !isNaN(requiredVersionPart)) {\n\t\t\t\t\t\tisVersionSupported = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e2) {\n\t\t\tisVersionSupported = false;\n\t\t}\n\n\t\treturn isVersionSupported;\n\t}\n\n\t/**\n\tConstructor for the Silverlight Runtime\n\n\t@class SilverlightRuntime\n\t@extends Runtime\n\t*/\n\tfunction SilverlightRuntime(options) {\n\t\tvar I = this, initTimer;\n\n\t\toptions = Basic.extend({ xap_url: Env.xap_url }, options);\n\n\t\tRuntime.call(this, options, type, {\n\t\t\taccess_binary: Runtime.capTrue,\n\t\t\taccess_image_binary: Runtime.capTrue,\n\t\t\tdisplay_media: Runtime.capTrue,\n\t\t\tdo_cors: Runtime.capTrue,\n\t\t\tdrag_and_drop: false,\n\t\t\treport_upload_progress: Runtime.capTrue,\n\t\t\tresize_image: Runtime.capTrue,\n\t\t\treturn_response_headers: function(value) {\n\t\t\t\treturn value && I.mode === 'client';\n\t\t\t},\n\t\t\treturn_response_type: function(responseType) {\n\t\t\t\tif (responseType !== 'json') {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\treturn !!window.JSON;\n\t\t\t\t}\n\t\t\t},\n\t\t\treturn_status_code: function(code) {\n\t\t\t\treturn I.mode === 'client' || !Basic.arrayDiff(code, [200, 404]);\n\t\t\t},\n\t\t\tselect_file: Runtime.capTrue,\n\t\t\tselect_multiple: Runtime.capTrue,\n\t\t\tsend_binary_string: Runtime.capTrue,\n\t\t\tsend_browser_cookies: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\tsend_custom_headers: function(value) {\n\t\t\t\treturn value && I.mode === 'client';\n\t\t\t},\n\t\t\tsend_multipart: Runtime.capTrue,\n\t\t\tslice_blob: Runtime.capTrue,\n\t\t\tstream_upload: true,\n\t\t\tsummon_file_dialog: false,\n\t\t\tupload_filesize: Runtime.capTrue,\n\t\t\tuse_http_method: function(methods) {\n\t\t\t\treturn I.mode === 'client' || !Basic.arrayDiff(methods, ['GET', 'POST']);\n\t\t\t}\n\t\t}, { \n\t\t\t// capabilities that require specific mode\n\t\t\treturn_response_headers: function(value) {\n\t\t\t\treturn value ? 'client' : 'browser';\n\t\t\t},\n\t\t\treturn_status_code: function(code) {\n\t\t\t\treturn Basic.arrayDiff(code, [200, 404]) ? 'client' : ['client', 'browser'];\n\t\t\t},\n\t\t\tsend_browser_cookies: function(value) {\n\t\t\t\treturn value ? 'browser' : 'client';\n\t\t\t},\n\t\t\tsend_custom_headers: function(value) {\n\t\t\t\treturn value ? 'client' : 'browser';\n\t\t\t},\n\t\t\tuse_http_method: function(methods) {\n\t\t\t\treturn Basic.arrayDiff(methods, ['GET', 'POST']) ? 'client' : ['client', 'browser'];\n\t\t\t}\n\t\t});\n\n\n\t\t// minimal requirement\n\t\tif (!isInstalled('2.0.31005.0') || Env.browser === 'Opera') {\n\t\t\tthis.mode = false;\n\t\t}\n\n\n\t\tBasic.extend(this, {\n\t\t\tgetShim: function() {\n\t\t\t\treturn Dom.get(this.uid).content.Moxie;\n\t\t\t},\n\n\t\t\tshimExec: function(component, action) {\n\t\t\t\tvar args = [].slice.call(arguments, 2);\n\t\t\t\treturn I.getShim().exec(this.uid, component, action, args);\n\t\t\t},\n\n\t\t\tinit : function() {\n\t\t\t\tvar container;\n\n\t\t\t\tcontainer = this.getShimContainer();\n\n\t\t\t\tcontainer.innerHTML = '<object id=\"' + this.uid + '\" data=\"data:application/x-silverlight,\" type=\"application/x-silverlight-2\" width=\"100%\" height=\"100%\" style=\"outline:none;\">' +\n\t\t\t\t\t'<param name=\"source\" value=\"' + options.xap_url + '\"/>' +\n\t\t\t\t\t'<param name=\"background\" value=\"Transparent\"/>' +\n\t\t\t\t\t'<param name=\"windowless\" value=\"true\"/>' +\n\t\t\t\t\t'<param name=\"enablehtmlaccess\" value=\"true\"/>' +\n\t\t\t\t\t'<param name=\"initParams\" value=\"uid=' + this.uid + ',target=' + Env.global_event_dispatcher + '\"/>' +\n\t\t\t\t'</object>';\n\n\t\t\t\t// Init is dispatched by the shim\n\t\t\t\tinitTimer = setTimeout(function() {\n\t\t\t\t\tif (I && !I.initialized) { // runtime might be already destroyed by this moment\n\t\t\t\t\t\tI.trigger(\"Error\", new x.RuntimeError(x.RuntimeError.NOT_INIT_ERR));\n\t\t\t\t\t}\n\t\t\t\t}, Env.OS !== 'Windows'? 10000 : 5000); // give it more time to initialize in non Windows OS (like Mac)\n\t\t\t},\n\n\t\t\tdestroy: (function(destroy) { // extend default destroy method\n\t\t\t\treturn function() {\n\t\t\t\t\tdestroy.call(I);\n\t\t\t\t\tclearTimeout(initTimer); // initialization check might be still onwait\n\t\t\t\t\toptions = initTimer = destroy = I = null;\n\t\t\t\t};\n\t\t\t}(this.destroy))\n\n\t\t}, extensions);\n\t}\n\n\tRuntime.addConstructor(type, SilverlightRuntime); \n\n\treturn extensions;\n});\n\n// Included from: src/javascript/runtime/silverlight/file/Blob.js\n\n/**\n * Blob.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/silverlight/file/Blob\n@private\n*/\ndefine(\"moxie/runtime/silverlight/file/Blob\", [\n\t\"moxie/runtime/silverlight/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/flash/file/Blob\"\n], function(extensions, Basic, Blob) {\n\treturn (extensions.Blob = Basic.extend({}, Blob));\n});\n\n// Included from: src/javascript/runtime/silverlight/file/FileInput.js\n\n/**\n * FileInput.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/silverlight/file/FileInput\n@private\n*/\ndefine(\"moxie/runtime/silverlight/file/FileInput\", [\n\t\"moxie/runtime/silverlight/Runtime\"\n], function(extensions) {\n\t\n\tvar FileInput = {\n\t\tinit: function(options) {\n\n\t\t\tfunction toFilters(accept) {\n\t\t\t\tvar filter = '';\n\t\t\t\tfor (var i = 0; i < accept.length; i++) {\n\t\t\t\t\tfilter += (filter !== '' ? '|' : '') + accept[i].title + \" | *.\" + accept[i].extensions.replace(/,/g, ';*.');\n\t\t\t\t}\n\t\t\t\treturn filter;\n\t\t\t}\n\t\t\t\n\t\t\tthis.getRuntime().shimExec.call(this, 'FileInput', 'init', toFilters(options.accept), options.name, options.multiple);\n\t\t\tthis.trigger('ready');\n\t\t}\n\t};\n\n\treturn (extensions.FileInput = FileInput);\n});\n\n// Included from: src/javascript/runtime/silverlight/file/FileDrop.js\n\n/**\n * FileDrop.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/silverlight/file/FileDrop\n@private\n*/\ndefine(\"moxie/runtime/silverlight/file/FileDrop\", [\n\t\"moxie/runtime/silverlight/Runtime\",\n\t\"moxie/core/utils/Dom\", \n\t\"moxie/core/utils/Events\"\n], function(extensions, Dom, Events) {\n\n\t// not exactly useful, since works only in safari (...crickets...)\n\tvar FileDrop = {\n\t\tinit: function() {\n\t\t\tvar comp = this, self = comp.getRuntime(), dropZone;\n\n\t\t\tdropZone = self.getShimContainer();\n\n\t\t\tEvents.addEvent(dropZone, 'dragover', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\te.dataTransfer.dropEffect = 'copy';\n\t\t\t}, comp.uid);\n\n\t\t\tEvents.addEvent(dropZone, 'dragenter', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar flag = Dom.get(self.uid).dragEnter(e);\n\t\t\t\t// If handled, then stop propagation of event in DOM\n\t\t\t\tif (flag) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t}, comp.uid);\n\n\t\t\tEvents.addEvent(dropZone, 'drop', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar flag = Dom.get(self.uid).dragDrop(e);\n\t\t\t\t// If handled, then stop propagation of event in DOM\n\t\t\t\tif (flag) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t}, comp.uid);\n\n\t\t\treturn self.shimExec.call(this, 'FileDrop', 'init');\n\t\t}\n\t};\n\n\treturn (extensions.FileDrop = FileDrop);\n});\n\n// Included from: src/javascript/runtime/silverlight/file/FileReader.js\n\n/**\n * FileReader.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/silverlight/file/FileReader\n@private\n*/\ndefine(\"moxie/runtime/silverlight/file/FileReader\", [\n\t\"moxie/runtime/silverlight/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/flash/file/FileReader\"\n], function(extensions, Basic, FileReader) {\n\treturn (extensions.FileReader = Basic.extend({}, FileReader));\n});\n\n// Included from: src/javascript/runtime/silverlight/file/FileReaderSync.js\n\n/**\n * FileReaderSync.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/silverlight/file/FileReaderSync\n@private\n*/\ndefine(\"moxie/runtime/silverlight/file/FileReaderSync\", [\n\t\"moxie/runtime/silverlight/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/flash/file/FileReaderSync\"\n], function(extensions, Basic, FileReaderSync) {\n\treturn (extensions.FileReaderSync = Basic.extend({}, FileReaderSync));\n});\n\n// Included from: src/javascript/runtime/silverlight/xhr/XMLHttpRequest.js\n\n/**\n * XMLHttpRequest.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/silverlight/xhr/XMLHttpRequest\n@private\n*/\ndefine(\"moxie/runtime/silverlight/xhr/XMLHttpRequest\", [\n\t\"moxie/runtime/silverlight/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/flash/xhr/XMLHttpRequest\"\n], function(extensions, Basic, XMLHttpRequest) {\n\treturn (extensions.XMLHttpRequest = Basic.extend({}, XMLHttpRequest));\n});\n\n// Included from: src/javascript/runtime/silverlight/runtime/Transporter.js\n\n/**\n * Transporter.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/silverlight/runtime/Transporter\n@private\n*/\ndefine(\"moxie/runtime/silverlight/runtime/Transporter\", [\n\t\"moxie/runtime/silverlight/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/flash/runtime/Transporter\"\n], function(extensions, Basic, Transporter) {\n\treturn (extensions.Transporter = Basic.extend({}, Transporter));\n});\n\n// Included from: src/javascript/runtime/silverlight/image/Image.js\n\n/**\n * Image.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n \n/**\n@class moxie/runtime/silverlight/image/Image\n@private\n*/\ndefine(\"moxie/runtime/silverlight/image/Image\", [\n\t\"moxie/runtime/silverlight/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/flash/image/Image\"\n], function(extensions, Basic, Image) {\n\treturn (extensions.Image = Basic.extend({}, Image, {\n\n\t\tgetInfo: function() {\n\t\t\tvar self = this.getRuntime()\n\t\t\t, grps = ['tiff', 'exif', 'gps']\n\t\t\t, info = { meta: {} }\n\t\t\t, rawInfo = self.shimExec.call(this, 'Image', 'getInfo')\n\t\t\t;\n\n\t\t\tif (rawInfo.meta) {\n\t\t\t\tBasic.each(grps, function(grp) {\n\t\t\t\t\tvar meta = rawInfo.meta[grp]\n\t\t\t\t\t, tag\n\t\t\t\t\t, i\n\t\t\t\t\t, length\n\t\t\t\t\t, value\n\t\t\t\t\t;\n\t\t\t\t\tif (meta && meta.keys) {\n\t\t\t\t\t\tinfo.meta[grp] = {};\n\t\t\t\t\t\tfor (i = 0, length = meta.keys.length; i < length; i++) {\n\t\t\t\t\t\t\ttag = meta.keys[i];\n\t\t\t\t\t\t\tvalue = meta[tag];\n\t\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\t\t// convert numbers\n\t\t\t\t\t\t\t\tif (/^(\\d|[1-9]\\d+)$/.test(value)) { // integer (make sure doesn't start with zero)\n\t\t\t\t\t\t\t\t\tvalue = parseInt(value, 10);\n\t\t\t\t\t\t\t\t} else if (/^\\d*\\.\\d+$/.test(value)) { // double\n\t\t\t\t\t\t\t\t\tvalue = parseFloat(value);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tinfo.meta[grp][tag] = value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tinfo.width = parseInt(rawInfo.width, 10);\n\t\t\tinfo.height = parseInt(rawInfo.height, 10);\n\t\t\tinfo.size = parseInt(rawInfo.size, 10);\n\t\t\tinfo.type = rawInfo.type;\n\t\t\tinfo.name = rawInfo.name;\n\n\t\t\treturn info;\n\t\t}\n\t}));\n});\n\n// Included from: src/javascript/runtime/html4/Runtime.js\n\n/**\n * Runtime.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/*global File:true */\n\n/**\nDefines constructor for HTML4 runtime.\n\n@class moxie/runtime/html4/Runtime\n@private\n*/\ndefine(\"moxie/runtime/html4/Runtime\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/runtime/Runtime\",\n\t\"moxie/core/utils/Env\"\n], function(Basic, x, Runtime, Env) {\n\t\n\tvar type = 'html4', extensions = {};\n\n\tfunction Html4Runtime(options) {\n\t\tvar I = this\n\t\t, Test = Runtime.capTest\n\t\t, True = Runtime.capTrue\n\t\t;\n\n\t\tRuntime.call(this, options, type, {\n\t\t\taccess_binary: Test(window.FileReader || window.File && File.getAsDataURL),\n\t\t\taccess_image_binary: false,\n\t\t\tdisplay_media: Test(extensions.Image && (Env.can('create_canvas') || Env.can('use_data_uri_over32kb'))),\n\t\t\tdo_cors: false,\n\t\t\tdrag_and_drop: false,\n\t\t\tfilter_by_extension: Test(function() { // if you know how to feature-detect this, please suggest\n\t\t\t\treturn (Env.browser === 'Chrome' && Env.version >= 28) || (Env.browser === 'IE' && Env.version >= 10);\n\t\t\t}()),\n\t\t\tresize_image: function() {\n\t\t\t\treturn extensions.Image && I.can('access_binary') && Env.can('create_canvas');\n\t\t\t},\n\t\t\treport_upload_progress: false,\n\t\t\treturn_response_headers: false,\n\t\t\treturn_response_type: function(responseType) {\n\t\t\t\tif (responseType === 'json' && !!window.JSON) {\n\t\t\t\t\treturn true;\n\t\t\t\t} \n\t\t\t\treturn !!~Basic.inArray(responseType, ['text', 'document', '']);\n\t\t\t},\n\t\t\treturn_status_code: function(code) {\n\t\t\t\treturn !Basic.arrayDiff(code, [200, 404]);\n\t\t\t},\n\t\t\tselect_file: function() {\n\t\t\t\treturn Env.can('use_fileinput');\n\t\t\t},\n\t\t\tselect_multiple: false,\n\t\t\tsend_binary_string: false,\n\t\t\tsend_custom_headers: false,\n\t\t\tsend_multipart: true,\n\t\t\tslice_blob: false,\n\t\t\tstream_upload: function() {\n\t\t\t\treturn I.can('select_file');\n\t\t\t},\n\t\t\tsummon_file_dialog: Test(function() { // yeah... some dirty sniffing here...\n\t\t\t\treturn (Env.browser === 'Firefox' && Env.version >= 4) ||\n\t\t\t\t\t(Env.browser === 'Opera' && Env.version >= 12) ||\n\t\t\t\t\t!!~Basic.inArray(Env.browser, ['Chrome', 'Safari']);\n\t\t\t}()),\n\t\t\tupload_filesize: True,\n\t\t\tuse_http_method: function(methods) {\n\t\t\t\treturn !Basic.arrayDiff(methods, ['GET', 'POST']);\n\t\t\t}\n\t\t});\n\n\n\t\tBasic.extend(this, {\n\t\t\tinit : function() {\n\t\t\t\tthis.trigger(\"Init\");\n\t\t\t},\n\n\t\t\tdestroy: (function(destroy) { // extend default destroy method\n\t\t\t\treturn function() {\n\t\t\t\t\tdestroy.call(I);\n\t\t\t\t\tdestroy = I = null;\n\t\t\t\t};\n\t\t\t}(this.destroy))\n\t\t});\n\n\t\tBasic.extend(this.getShim(), extensions);\n\t}\n\n\tRuntime.addConstructor(type, Html4Runtime);\n\n\treturn extensions;\n});\n\n// Included from: src/javascript/runtime/html4/file/FileInput.js\n\n/**\n * FileInput.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html4/file/FileInput\n@private\n*/\ndefine(\"moxie/runtime/html4/file/FileInput\", [\n\t\"moxie/runtime/html4/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/utils/Events\",\n\t\"moxie/core/utils/Mime\",\n\t\"moxie/core/utils/Env\"\n], function(extensions, Basic, Dom, Events, Mime, Env) {\n\t\n\tfunction FileInput() {\n\t\tvar _uid, _files = [], _mimes = [], _options;\n\n\t\tfunction addInput() {\n\t\t\tvar comp = this, I = comp.getRuntime(), shimContainer, browseButton, currForm, form, input, uid;\n\n\t\t\tuid = Basic.guid('uid_');\n\n\t\t\tshimContainer = I.getShimContainer(); // we get new ref everytime to avoid memory leaks in IE\n\n\t\t\tif (_uid) { // move previous form out of the view\n\t\t\t\tcurrForm = Dom.get(_uid + '_form');\n\t\t\t\tif (currForm) {\n\t\t\t\t\tBasic.extend(currForm.style, { top: '100%' });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// build form in DOM, since innerHTML version not able to submit file for some reason\n\t\t\tform = document.createElement('form');\n\t\t\tform.setAttribute('id', uid + '_form');\n\t\t\tform.setAttribute('method', 'post');\n\t\t\tform.setAttribute('enctype', 'multipart/form-data');\n\t\t\tform.setAttribute('encoding', 'multipart/form-data');\n\n\t\t\tBasic.extend(form.style, {\n\t\t\t\toverflow: 'hidden',\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0,\n\t\t\t\twidth: '100%',\n\t\t\t\theight: '100%'\n\t\t\t});\n\n\t\t\tinput = document.createElement('input');\n\t\t\tinput.setAttribute('id', uid);\n\t\t\tinput.setAttribute('type', 'file');\n\t\t\tinput.setAttribute('name', _options.name || 'Filedata');\n\t\t\tinput.setAttribute('accept', _mimes.join(','));\n\n\t\t\tBasic.extend(input.style, {\n\t\t\t\tfontSize: '999px',\n\t\t\t\topacity: 0\n\t\t\t});\n\n\t\t\tform.appendChild(input);\n\t\t\tshimContainer.appendChild(form);\n\n\t\t\t// prepare file input to be placed underneath the browse_button element\n\t\t\tBasic.extend(input.style, {\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0,\n\t\t\t\twidth: '100%',\n\t\t\t\theight: '100%'\n\t\t\t});\n\n\t\t\tif (Env.browser === 'IE' && Env.version < 10) {\n\t\t\t\tBasic.extend(input.style, {\n\t\t\t\t\tfilter : \"progid:DXImageTransform.Microsoft.Alpha(opacity=0)\"\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tinput.onchange = function() { // there should be only one handler for this\n\t\t\t\tvar file;\n\n\t\t\t\tif (!this.value) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (this.files) {\n\t\t\t\t\tfile = this.files[0];\n\t\t\t\t} else {\n\t\t\t\t\tfile = {\n\t\t\t\t\t\tname: this.value\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t_files = [file];\n\n\t\t\t\tthis.onchange = function() {}; // clear event handler\n\t\t\t\taddInput.call(comp);\n\n\t\t\t\t// after file is initialized as o.File, we need to update form and input ids\n\t\t\t\tcomp.bind('change', function onChange() {\n\t\t\t\t\tvar input = Dom.get(uid), form = Dom.get(uid + '_form'), file;\n\n\t\t\t\t\tcomp.unbind('change', onChange);\n\n\t\t\t\t\tif (comp.files.length && input && form) {\n\t\t\t\t\t\tfile = comp.files[0];\n\n\t\t\t\t\t\tinput.setAttribute('id', file.uid);\n\t\t\t\t\t\tform.setAttribute('id', file.uid + '_form');\n\n\t\t\t\t\t\t// set upload target\n\t\t\t\t\t\tform.setAttribute('target', file.uid + '_iframe');\n\t\t\t\t\t}\n\t\t\t\t\tinput = form = null;\n\t\t\t\t}, 998);\n\n\t\t\t\tinput = form = null;\n\t\t\t\tcomp.trigger('change');\n\t\t\t};\n\n\n\t\t\t// route click event to the input\n\t\t\tif (I.can('summon_file_dialog')) {\n\t\t\t\tbrowseButton = Dom.get(_options.browse_button);\n\t\t\t\tEvents.removeEvent(browseButton, 'click', comp.uid);\n\t\t\t\tEvents.addEvent(browseButton, 'click', function(e) {\n\t\t\t\t\tif (input && !input.disabled) { // for some reason FF (up to 8.0.1 so far) lets to click disabled input[type=file]\n\t\t\t\t\t\tinput.click();\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}, comp.uid);\n\t\t\t}\n\n\t\t\t_uid = uid;\n\n\t\t\tshimContainer = currForm = browseButton = null;\n\t\t}\n\n\t\tBasic.extend(this, {\n\t\t\tinit: function(options) {\n\t\t\t\tvar comp = this, I = comp.getRuntime(), shimContainer;\n\n\t\t\t\t// figure out accept string\n\t\t\t\t_options = options;\n\t\t\t\t_mimes = options.accept.mimes || Mime.extList2mimes(options.accept, I.can('filter_by_extension'));\n\n\t\t\t\tshimContainer = I.getShimContainer();\n\n\t\t\t\t(function() {\n\t\t\t\t\tvar browseButton, zIndex, top;\n\n\t\t\t\t\tbrowseButton = Dom.get(options.browse_button);\n\n\t\t\t\t\t// Route click event to the input[type=file] element for browsers that support such behavior\n\t\t\t\t\tif (I.can('summon_file_dialog')) {\n\t\t\t\t\t\tif (Dom.getStyle(browseButton, 'position') === 'static') {\n\t\t\t\t\t\t\tbrowseButton.style.position = 'relative';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tzIndex = parseInt(Dom.getStyle(browseButton, 'z-index'), 10) || 1;\n\n\t\t\t\t\t\tbrowseButton.style.zIndex = zIndex;\n\t\t\t\t\t\tshimContainer.style.zIndex = zIndex - 1;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* Since we have to place input[type=file] on top of the browse_button for some browsers,\n\t\t\t\t\tbrowse_button loses interactivity, so we restore it here */\n\t\t\t\t\ttop = I.can('summon_file_dialog') ? browseButton : shimContainer;\n\n\t\t\t\t\tEvents.addEvent(top, 'mouseover', function() {\n\t\t\t\t\t\tcomp.trigger('mouseenter');\n\t\t\t\t\t}, comp.uid);\n\n\t\t\t\t\tEvents.addEvent(top, 'mouseout', function() {\n\t\t\t\t\t\tcomp.trigger('mouseleave');\n\t\t\t\t\t}, comp.uid);\n\n\t\t\t\t\tEvents.addEvent(top, 'mousedown', function() {\n\t\t\t\t\t\tcomp.trigger('mousedown');\n\t\t\t\t\t}, comp.uid);\n\n\t\t\t\t\tEvents.addEvent(Dom.get(options.container), 'mouseup', function() {\n\t\t\t\t\t\tcomp.trigger('mouseup');\n\t\t\t\t\t}, comp.uid);\n\n\t\t\t\t\tbrowseButton = null;\n\t\t\t\t}());\n\n\t\t\t\taddInput.call(this);\n\n\t\t\t\tshimContainer = null;\n\n\t\t\t\t// trigger ready event asynchronously\n\t\t\t\tcomp.trigger({\n\t\t\t\t\ttype: 'ready',\n\t\t\t\t\tasync: true\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tgetFiles: function() {\n\t\t\t\treturn _files;\n\t\t\t},\n\n\t\t\tdisable: function(state) {\n\t\t\t\tvar input;\n\n\t\t\t\tif ((input = Dom.get(_uid))) {\n\t\t\t\t\tinput.disabled = !!state;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\tvar I = this.getRuntime()\n\t\t\t\t, shim = I.getShim()\n\t\t\t\t, shimContainer = I.getShimContainer()\n\t\t\t\t;\n\t\t\t\t\n\t\t\t\tEvents.removeAllEvents(shimContainer, this.uid);\n\t\t\t\tEvents.removeAllEvents(_options && Dom.get(_options.container), this.uid);\n\t\t\t\tEvents.removeAllEvents(_options && Dom.get(_options.browse_button), this.uid);\n\t\t\t\t\n\t\t\t\tif (shimContainer) {\n\t\t\t\t\tshimContainer.innerHTML = '';\n\t\t\t\t}\n\n\t\t\t\tshim.removeInstance(this.uid);\n\n\t\t\t\t_uid = _files = _mimes = _options = shimContainer = shim = null;\n\t\t\t}\n\t\t});\n\t}\n\n\treturn (extensions.FileInput = FileInput);\n});\n\n// Included from: src/javascript/runtime/html4/file/FileReader.js\n\n/**\n * FileReader.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html4/file/FileReader\n@private\n*/\ndefine(\"moxie/runtime/html4/file/FileReader\", [\n\t\"moxie/runtime/html4/Runtime\",\n\t\"moxie/runtime/html5/file/FileReader\"\n], function(extensions, FileReader) {\n\treturn (extensions.FileReader = FileReader);\n});\n\n// Included from: src/javascript/runtime/html4/xhr/XMLHttpRequest.js\n\n/**\n * XMLHttpRequest.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html4/xhr/XMLHttpRequest\n@private\n*/\ndefine(\"moxie/runtime/html4/xhr/XMLHttpRequest\", [\n\t\"moxie/runtime/html4/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/utils/Url\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/core/utils/Events\",\n\t\"moxie/file/Blob\",\n\t\"moxie/xhr/FormData\"\n], function(extensions, Basic, Dom, Url, x, Events, Blob, FormData) {\n\t\n\tfunction XMLHttpRequest() {\n\t\tvar _status, _response, _iframe;\n\n\t\tfunction cleanup(cb) {\n\t\t\tvar target = this, uid, form, inputs, i, hasFile = false;\n\n\t\t\tif (!_iframe) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tuid = _iframe.id.replace(/_iframe$/, '');\n\n\t\t\tform = Dom.get(uid + '_form');\n\t\t\tif (form) {\n\t\t\t\tinputs = form.getElementsByTagName('input');\n\t\t\t\ti = inputs.length;\n\n\t\t\t\twhile (i--) {\n\t\t\t\t\tswitch (inputs[i].getAttribute('type')) {\n\t\t\t\t\t\tcase 'hidden':\n\t\t\t\t\t\t\tinputs[i].parentNode.removeChild(inputs[i]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'file':\n\t\t\t\t\t\t\thasFile = true; // flag the case for later\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tinputs = [];\n\n\t\t\t\tif (!hasFile) { // we need to keep the form for sake of possible retries\n\t\t\t\t\tform.parentNode.removeChild(form);\n\t\t\t\t}\n\t\t\t\tform = null;\n\t\t\t}\n\n\t\t\t// without timeout, request is marked as canceled (in console)\n\t\t\tsetTimeout(function() {\n\t\t\t\tEvents.removeEvent(_iframe, 'load', target.uid);\n\t\t\t\tif (_iframe.parentNode) { // #382\n\t\t\t\t\t_iframe.parentNode.removeChild(_iframe);\n\t\t\t\t}\n\n\t\t\t\t// check if shim container has any other children, if - not, remove it as well\n\t\t\t\tvar shimContainer = target.getRuntime().getShimContainer();\n\t\t\t\tif (!shimContainer.children.length) {\n\t\t\t\t\tshimContainer.parentNode.removeChild(shimContainer);\n\t\t\t\t}\n\n\t\t\t\tshimContainer = _iframe = null;\n\t\t\t\tcb();\n\t\t\t}, 1);\n\t\t}\n\n\t\tBasic.extend(this, {\n\t\t\tsend: function(meta, data) {\n\t\t\t\tvar target = this, I = target.getRuntime(), uid, form, input, blob;\n\n\t\t\t\t_status = _response = null;\n\n\t\t\t\tfunction createIframe() {\n\t\t\t\t\tvar container = I.getShimContainer() || document.body\n\t\t\t\t\t, temp = document.createElement('div')\n\t\t\t\t\t;\n\n\t\t\t\t\t// IE 6 won't be able to set the name using setAttribute or iframe.name\n\t\t\t\t\ttemp.innerHTML = '<iframe id=\"' + uid + '_iframe\" name=\"' + uid + '_iframe\" src=\"javascript:&quot;&quot;\" style=\"display:none\"></iframe>';\n\t\t\t\t\t_iframe = temp.firstChild;\n\t\t\t\t\tcontainer.appendChild(_iframe);\n\n\t\t\t\t\t/* _iframe.onreadystatechange = function() {\n\t\t\t\t\t\tconsole.info(_iframe.readyState);\n\t\t\t\t\t};*/\n\n\t\t\t\t\tEvents.addEvent(_iframe, 'load', function() { // _iframe.onload doesn't work in IE lte 8\n\t\t\t\t\t\tvar el;\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tel = _iframe.contentWindow.document || _iframe.contentDocument || window.frames[_iframe.id].document;\n\n\t\t\t\t\t\t\t// try to detect some standard error pages\n\t\t\t\t\t\t\tif (/^4(0[0-9]|1[0-7]|2[2346])\\s/.test(el.title)) { // test if title starts with 4xx HTTP error\n\t\t\t\t\t\t\t\t_status = el.title.replace(/^(\\d+).*$/, '$1');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_status = 200;\n\t\t\t\t\t\t\t\t// get result\n\t\t\t\t\t\t\t\t_response = Basic.trim(el.body.innerHTML);\n\n\t\t\t\t\t\t\t\t// we need to fire these at least once\n\t\t\t\t\t\t\t\ttarget.trigger({\n\t\t\t\t\t\t\t\t\ttype: 'progress',\n\t\t\t\t\t\t\t\t\tloaded: _response.length,\n\t\t\t\t\t\t\t\t\ttotal: _response.length\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tif (blob) { // if we were uploading a file\n\t\t\t\t\t\t\t\t\ttarget.trigger({\n\t\t\t\t\t\t\t\t\t\ttype: 'uploadprogress',\n\t\t\t\t\t\t\t\t\t\tloaded: blob.size || 1025,\n\t\t\t\t\t\t\t\t\t\ttotal: blob.size || 1025\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\tif (Url.hasSameOrigin(meta.url)) {\n\t\t\t\t\t\t\t\t// if response is sent with error code, iframe in IE gets redirected to res://ieframe.dll/http_x.htm\n\t\t\t\t\t\t\t\t// which obviously results to cross domain error (wtf?)\n\t\t\t\t\t\t\t\t_status = 404;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcleanup.call(target, function() {\n\t\t\t\t\t\t\t\t\ttarget.trigger('error');\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\t\n\t\t\t\t\t\n\t\t\t\t\t\tcleanup.call(target, function() {\n\t\t\t\t\t\t\ttarget.trigger('load');\n\t\t\t\t\t\t});\n\t\t\t\t\t}, target.uid);\n\t\t\t\t} // end createIframe\n\n\t\t\t\t// prepare data to be sent and convert if required\n\t\t\t\tif (data instanceof FormData && data.hasBlob()) {\n\t\t\t\t\tblob = data.getBlob();\n\t\t\t\t\tuid = blob.uid;\n\t\t\t\t\tinput = Dom.get(uid);\n\t\t\t\t\tform = Dom.get(uid + '_form');\n\t\t\t\t\tif (!form) {\n\t\t\t\t\t\tthrow new x.DOMException(x.DOMException.NOT_FOUND_ERR);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tuid = Basic.guid('uid_');\n\n\t\t\t\t\tform = document.createElement('form');\n\t\t\t\t\tform.setAttribute('id', uid + '_form');\n\t\t\t\t\tform.setAttribute('method', meta.method);\n\t\t\t\t\tform.setAttribute('enctype', 'multipart/form-data');\n\t\t\t\t\tform.setAttribute('encoding', 'multipart/form-data');\n\t\t\t\t\tform.setAttribute('target', uid + '_iframe');\n\n\t\t\t\t\tI.getShimContainer().appendChild(form);\n\t\t\t\t}\n\n\t\t\t\tif (data instanceof FormData) {\n\t\t\t\t\tdata.each(function(value, name) {\n\t\t\t\t\t\tif (value instanceof Blob) {\n\t\t\t\t\t\t\tif (input) {\n\t\t\t\t\t\t\t\tinput.setAttribute('name', name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar hidden = document.createElement('input');\n\n\t\t\t\t\t\t\tBasic.extend(hidden, {\n\t\t\t\t\t\t\t\ttype : 'hidden',\n\t\t\t\t\t\t\t\tname : name,\n\t\t\t\t\t\t\t\tvalue : value\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// make sure that input[type=\"file\"], if it's there, comes last\n\t\t\t\t\t\t\tif (input) {\n\t\t\t\t\t\t\t\tform.insertBefore(hidden, input);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tform.appendChild(hidden);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// set destination url\n\t\t\t\tform.setAttribute(\"action\", meta.url);\n\n\t\t\t\tcreateIframe();\n\t\t\t\tform.submit();\n\t\t\t\ttarget.trigger('loadstart');\n\t\t\t},\n\n\t\t\tgetStatus: function() {\n\t\t\t\treturn _status;\n\t\t\t},\n\n\t\t\tgetResponse: function(responseType) {\n\t\t\t\tif ('json' === responseType) {\n\t\t\t\t\t// strip off <pre>..</pre> tags that might be enclosing the response\n\t\t\t\t\tif (Basic.typeOf(_response) === 'string' && !!window.JSON) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\treturn JSON.parse(_response.replace(/^\\s*<pre[^>]*>/, '').replace(/<\\/pre>\\s*$/, ''));\n\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t} \n\t\t\t\t} else if ('document' === responseType) {\n\n\t\t\t\t}\n\t\t\t\treturn _response;\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tvar target = this;\n\n\t\t\t\tif (_iframe && _iframe.contentWindow) {\n\t\t\t\t\tif (_iframe.contentWindow.stop) { // FireFox/Safari/Chrome\n\t\t\t\t\t\t_iframe.contentWindow.stop();\n\t\t\t\t\t} else if (_iframe.contentWindow.document.execCommand) { // IE\n\t\t\t\t\t\t_iframe.contentWindow.document.execCommand('Stop');\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_iframe.src = \"about:blank\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcleanup.call(this, function() {\n\t\t\t\t\t// target.dispatchEvent('readystatechange');\n\t\t\t\t\ttarget.dispatchEvent('abort');\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\treturn (extensions.XMLHttpRequest = XMLHttpRequest);\n});\n\n// Included from: src/javascript/runtime/html4/image/Image.js\n\n/**\n * Image.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html4/image/Image\n@private\n*/\ndefine(\"moxie/runtime/html4/image/Image\", [\n\t\"moxie/runtime/html4/Runtime\",\n\t\"moxie/runtime/html5/image/Image\"\n], function(extensions, Image) {\n\treturn (extensions.Image = Image);\n});\n\nexpose([\"moxie/core/utils/Basic\",\"moxie/core/I18n\",\"moxie/core/utils/Mime\",\"moxie/core/utils/Env\",\"moxie/core/utils/Dom\",\"moxie/core/Exceptions\",\"moxie/core/EventTarget\",\"moxie/core/utils/Encode\",\"moxie/runtime/Runtime\",\"moxie/runtime/RuntimeClient\",\"moxie/file/Blob\",\"moxie/file/File\",\"moxie/file/FileInput\",\"moxie/file/FileDrop\",\"moxie/runtime/RuntimeTarget\",\"moxie/file/FileReader\",\"moxie/core/utils/Url\",\"moxie/file/FileReaderSync\",\"moxie/xhr/FormData\",\"moxie/xhr/XMLHttpRequest\",\"moxie/runtime/Transporter\",\"moxie/image/Image\",\"moxie/core/utils/Events\"]);\n})(window);/**\n * o.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/*global moxie:true */\n\n/**\nGlobally exposed namespace with the most frequently used public classes and handy methods.\n\n@class o\n@static\n@private\n*/\n(function(exports) {\n\t\"use strict\";\n\n\tvar o = {}, inArray = exports.moxie.core.utils.Basic.inArray;\n\n\t// directly add some public classes\n\t// (we do it dynamically here, since for custom builds we cannot know beforehand what modules were included)\n\t(function addAlias(ns) {\n\t\tvar name, itemType;\n\t\tfor (name in ns) {\n\t\t\titemType = typeof(ns[name]);\n\t\t\tif (itemType === 'object' && !~inArray(name, ['Exceptions', 'Env', 'Mime'])) {\n\t\t\t\taddAlias(ns[name]);\n\t\t\t} else if (itemType === 'function') {\n\t\t\t\to[name] = ns[name];\n\t\t\t}\n\t\t}\n\t})(exports.moxie);\n\n\t// add some manually\n\to.Env = exports.moxie.core.utils.Env;\n\to.Mime = exports.moxie.core.utils.Mime;\n\to.Exceptions = exports.moxie.core.Exceptions;\n\n\t// expose globally\n\texports.mOxie = o;\n\tif (!exports.o) {\n\t\texports.o = o;\n\t}\n\treturn o;\n})(window);\n\n/* unused harmony default export */ var _unused_webpack_default_export = (mOxie);\n\n/***/ }),\n\n/***/ \"L5uX\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"LFXr\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = {\n    name: 'uploadImg',\n    data: function data() {\n        return {\n            accessid: '',\n            host: '',\n            policyBase64: '',\n            signature: '',\n            key: '',\n            expire: 0,\n            uploadfilename: {}\n        };\n    },\n\n    props: ['type', 'select', 'container'],\n    methods: {\n        getParam: function getParam(cb) {\n            var _this = this;\n\n            this.$store.dispatch('common_getPolicyAndAccess', {\n                type: this.type || 1\n            }).then(function (res) {\n                _this.host = res.host;\n                _this.policyBase64 = res.policy;\n                _this.accessid = res.accessid;\n                _this.signature = res.signature;\n                _this.expire = parseInt(res.expire);\n                _this.key = res.dir;\n\n                cb && cb();\n                _this.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        random_string: function random_string(len) {\n            var len = len || 32;\n            var chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';\n            var maxPos = chars.length;\n            var pwd = '';\n            for (var i = 0; i < len; i++) {\n                pwd += chars.charAt(Math.floor(Math.random() * maxPos));\n            }\n            return pwd;\n        },\n        upload: function upload(file) {\n            var imgURL;\n            try {\n                try {\n                    imgURL = file.getAsDataURL();\n                } catch (e) {\n                    imgURL = window.URL.createObjectURL(file);\n                }\n            } catch (e) {\n                var reader = new FileReader();\n                reader.onload = function (e) {\n                    imgURL = e.target.result;\n                };\n                reader.readAsDataURL(file);\n            }\n            return imgURL;\n        },\n        send_request: function send_request(filename) {\n            var pos = filename.lastIndexOf('.');\n            var suffix = filename.substring(pos);\n            var uploadfilename = this.key + this.random_string(10) + suffix;\n            this.uploadfilename[filename] = {\n                src: this.host + '/' + uploadfilename,\n                load: 0\n            };\n\n            this.uploader.setOption({\n                'url': this.host,\n                'multipart_params': {\n                    'key': uploadfilename,\n                    'policy': this.policyBase64,\n                    'OSSAccessKeyId': this.accessid,\n                    'signature': this.signature,\n                    'success_action_status': '200' }\n            });\n            this.uploader.start();\n        }\n    },\n    mounted: function mounted() {\n        var _this2 = this;\n\n        var that = this;\n        this.getParam();\n        this.uploader = new this.$plupload.Uploader({\n            runtimes: 'html5, flash, silverlight, html4',\n            browse_button: this.select,\n            container: document.getElementById(this.container),\n            flash_swf_url: 'lib/plupload-2.1.2/js/Moxie.swf',\n            silverlight_xap_url: 'lib/plupload-2.1.2/js/Moxie.xap',\n            url: 'https://oss.aliyuncs.com',\n            filters: {\n                mime_types: [{\n                    title: \"Image files\",\n                    extensions: \"jpg,gif,png,bmp\"\n                }],\n                max_file_size: '10mb',\n                prevent_duplicates: true },\n            init: {\n                PostInit: function PostInit() {},\n\n                FilesAdded: function FilesAdded(up, files) {\n                    var now = Date.parse(new Date()) / 1000;\n                    if (_this2.expire < now + 3) {\n                        _this2.getParam(function (res) {\n                            _this2.uploader.start();\n                        });\n                    } else {\n                        _this2.uploader.start();\n                    }\n                },\n\n                BeforeUpload: function BeforeUpload(up, file) {\n                    that.send_request(file.name);\n                },\n\n                UploadProgress: function UploadProgress(up, file) {},\n\n                FileUploaded: function FileUploaded(up, file, info) {\n                    var fileUrl = _this2.uploadfilename[file.name].src;\n                    _this2.uploadfilename[file.name].load = 1;\n                    _this2.$emit('uploadImg_uploaded', fileUrl);\n                },\n\n                Error: function Error(up, err) {\n                    if (err.code == -602) {\n                        var fileUrl = _this2.uploadfilename[err.file.name].src;\n                        _this2.$emit('uploadImg_uploaded', fileUrl);\n                    } else {\n                        _this2.$emit('uploadImg_error', err);\n                    }\n                }\n            }\n        });\n        this.uploader.init();\n    }\n};\n\n/***/ }),\n\n/***/ \"LJ/l\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _vuex = __webpack_require__(\"NYxO\");\n\nvar _catalog = __webpack_require__(\"cSj+\");\n\nvar _catalog2 = _interopRequireDefault(_catalog);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n    data: function data() {\n        return {\n            show: false,\n            tagsshow: false,\n            create: false,\n\n            image: _catalog2.default,\n            articlename: '',\n            control: '翻译授权',\n            control_id: -1,\n            oldname: '',\n            oldimg: '',\n            oldurl: '',\n            oldauthor: '',\n            share: '允许转载',\n            share_id: -1,\n            articletype: '类型',\n            status: '状态',\n            level: '等级',\n            category_id: -1,\n            audit_status: -1,\n            level_id: -1,\n            tags: [],\n            tagsVal: '',\n            intro: '',\n            agree: true,\n\n            reg_img: true,\n            reg_name: true,\n            reg_type: true,\n            reg_control: true,\n            reg_old_name: true,\n            reg_old_url: true,\n            reg_old_author: true,\n            reg_old_img: true,\n            reg_share: true,\n            reg_status: true,\n            reg_level: true,\n            reg_tag: true,\n            reg_intro: true,\n            reg_img_con: '',\n            reg_name_con: '',\n            reg_control_con: '',\n            reg_old_name_con: '',\n            reg_old_url_con: '',\n            reg_old_img_con: '',\n            reg_old_author_con: '',\n            reg_share_con: '',\n            reg_type_con: '',\n            reg_status_con: '',\n            reg_level_con: '',\n            reg_tag_con: '',\n            reg_intro_con: '',\n\n            count: 8\n        };\n    },\n\n    props: ['resType'],\n    computed: (0, _vuex.mapState)({\n        catalog: function catalog(state) {\n            return state.opus.catalog;\n        },\n        category: function category(state) {\n            return state.opus.category;\n        }\n    }),\n    methods: {\n        focus: function focus(e) {\n            $(e.currentTarget).parents('.create-top-item').addClass('z-active');\n        },\n        blur: function blur(e) {\n            $(e.currentTarget).parents('.create-top-item').removeClass('z-active');\n        },\n        cancel: function cancel() {\n            this.show = false;\n        },\n        agreeSwitch: function agreeSwitch(e) {\n            this.agree = !this.agree;\n        },\n        selctEnter: function selctEnter(e) {\n            $(e.currentTarget).addClass('z-active');\n        },\n        selctOut: function selctOut(e) {\n            $(e.currentTarget).removeClass('z-active');\n        },\n        typeShowValue: function typeShowValue(e) {\n            this.articletype = $(e.currentTarget).text();\n            this.category_id = $(e.currentTarget).attr('data-id');\n            $(e.currentTarget).parents('.create-top-select').removeClass('z-active');\n        },\n        statusShowValue: function statusShowValue(e) {\n            this.status = $(e.currentTarget).text();\n            this.audit_status = $(e.currentTarget).attr('data-audit_status');\n            $(e.currentTarget).parents('.create-top-select').removeClass('z-active');\n        },\n        levelShowValue: function levelShowValue(e) {\n            this.level = $(e.currentTarget).text();\n            this.level_id = $(e.currentTarget).attr('data-level_id');\n            $(e.currentTarget).parents('.create-top-select').removeClass('z-active');\n        },\n        controlShowValue: function controlShowValue(e) {\n            this.control = $(e.currentTarget).text();\n            this.control_id = Number($(e.currentTarget).attr('data-control_id'));\n            $(e.currentTarget).parents('.create-top-select').removeClass('z-active');\n        },\n        shareShowValue: function shareShowValue(e) {\n            this.share = $(e.currentTarget).text();\n            this.share_id = Number($(e.currentTarget).attr('data-share_id'));\n            $(e.currentTarget).parents('.create-top-select').removeClass('z-active');\n        },\n        tagsshowOpen: function tagsshowOpen(e) {\n            this.tagsshow = true;\n            var node = e.currentTarget;\n            node = $(node);\n            node.find('input').focus();\n            setTimeout(function () {\n                node.find('input').focus();\n            }, 20);\n        },\n        deleteTag: function deleteTag(e) {\n            var index = e.currentTarget.dataset['index'];\n            index = Number(index);\n            this.tags.splice(index, 1);\n            return false;\n        },\n        enter: function enter(e) {\n            if (this.tags.length >= 3) {\n                return false;\n            }\n\n            this.tagsVal = $.trim(this.tagsVal);\n            var text = this.tagsVal;\n            if ($.trim(text) == '') {\n                this.$store.dispatch('bubble_showBubble', {\n                    show: true,\n                    type: 'top',\n                    top: {\n                        status: 'z-warn',\n                        msg: '标签内容不能为空'\n                    }\n                });\n                return false;\n            }\n            if ($.trim(text).length > 5) {\n                this.$store.dispatch('bubble_showBubble', {\n                    show: true,\n                    type: 'top',\n                    top: {\n                        status: 'z-warn',\n                        msg: '标签内容不能超出5个字'\n                    }\n                });\n                return false;\n            }\n            this.tags.push(text);\n            this.tagsVal = '';\n        },\n        tagsSelect: function tagsSelect(e) {\n            var node = $(e.currentTarget);\n            if (node.hasClass('z-select')) {\n                return false;\n            }\n            if (this.tags.length >= 3) {\n                return false;\n            }\n            var tag = node.text();\n            this.tags.push(tag);\n        },\n        uploaded: function uploaded(fileUrl) {\n            this.image = fileUrl;\n        },\n        old_uploaded: function old_uploaded(fileUrl) {\n            this.oldimg = fileUrl;\n        },\n        save: function save() {\n            this.reg_img = true;\n            this.reg_name = true;\n            this.reg_type = true;\n            this.reg_control = true;\n            this.reg_old_name = true;\n            this.reg_old_url = true;\n            this.reg_old_author = true;\n            this.reg_old_img = true;\n            this.reg_share = true;\n            this.reg_status = true;\n            this.reg_level = true;\n            this.reg_tag = true;\n            this.reg_intro = true;\n\n            if (!this.image || this.image == _catalog2.default) {\n                this.reg_img = false;\n                this.reg_img_con = '添加封面';\n                return false;\n            } else {\n                this.reg_img = true;\n                this.reg_img_con = '';\n            }\n\n            if (!$.trim(this.articlename)) {\n                this.reg_name = false;\n                this.reg_name_con = '填写30字中文以内故事名字';\n                return false;\n            } else if ($.trim(this.articlename).length > 30) {\n                this.reg_name = false;\n                this.reg_name_con = '超出最大30个字数';\n                return false;\n            } else {\n                this.reg_name = true;\n                this.reg_name_con = '';\n            }\n\n            if ($.trim(this.control_id) == -1) {\n                this.reg_control = false;\n                this.reg_control_con = '是否为翻译授权作品';\n                return false;\n            } else {\n                this.reg_control = true;\n                this.reg_control_con = '';\n            }\n\n            if ($.trim(this.oldname) == '' && this.control_id == 1) {\n                this.reg_old_name = false;\n                this.reg_old_name_con = '填写原作品故事名';\n                return false;\n            } else {\n                this.reg_old_name = true;\n                this.reg_old_name_con = '';\n            }\n\n            if ($.trim(this.oldauthor) == '' && this.control_id == 1) {\n                this.reg_old_author = false;\n                this.reg_old_author_con = '填写原作者';\n                return false;\n            } else {\n                this.reg_old_author = true;\n                this.reg_old_author_con = '';\n            }\n\n            if ($.trim(this.oldurl) == '' && this.control_id == 1) {\n                this.reg_old_url = false;\n                this.reg_old_url_con = '填写原作品连接';\n                return false;\n            } else {\n                this.reg_old_url = true;\n                this.reg_old_url_con = '';\n            }\n\n            if ($.trim(this.oldimg) == '' && this.control_id == 1) {\n                this.reg_old_img = false;\n                this.reg_old_img_con = '上传翻译授权截图证明';\n                return false;\n            } else {\n                this.reg_old_img = true;\n                this.reg_old_img_con = '';\n            }\n\n            if ($.trim(this.share_id) == -1) {\n                this.reg_share = false;\n                this.reg_share_con = '是否允许他人复制和转载';\n                return false;\n            } else {\n                this.reg_share = true;\n                this.reg_share_con = '';\n            }\n\n            if ($.trim(this.category_id) == -1) {\n                this.reg_type = false;\n                this.reg_type_con = '类型选定不可更改';\n                return false;\n            } else {\n                this.reg_type = true;\n                this.reg_type_con = '';\n            }\n\n            if ($.trim(this.audit_status) == -1) {\n                this.reg_status = false;\n                this.reg_status_con = '连载完请及时更改便于推荐';\n                return false;\n            } else {\n                this.reg_status = true;\n                this.reg_status_con = '';\n            }\n\n            if ($.trim(this.level_id) == -1) {\n                this.reg_level = false;\n                this.reg_level_con = '关系到推荐强度选定不可更改';\n                return false;\n            } else {\n                this.reg_level = true;\n                this.reg_level_con = '';\n            }\n\n            if (!this.tags.length) {\n                this.reg_tag = false;\n                this.reg_tag_con = '填写3个以内标签于推荐';\n                return false;\n            } else if (this.tags.length > 3) {\n                this.reg_tag = false;\n                this.reg_tag_con = '超出3个标签个数';\n                return false;\n            } else {\n                this.reg_tag = true;\n                this.reg_tag_con = '';\n            }\n\n            if (!$.trim(this.intro)) {\n                this.reg_intro = false;\n                this.reg_intro_con = '填写1000字中文以内简介';\n                return false;\n            } else if ($.trim(this.intro).length > 1000) {\n                this.reg_intro = false;\n                this.reg_intro_con = '超出最大1000个字数';\n                return false;\n            } else {\n                this.reg_intro = true;\n                this.reg_intro_con = '';\n            }\n\n            if (!this.agree) {\n                this.$store.dispatch('bubble_showBubble', {\n                    show: true,\n                    type: 'top',\n                    top: {\n                        status: 'z-warn',\n                        msg: '请同意协议'\n                    }\n                });\n                return false;\n            }\n\n            var that = this;\n            this.$store.dispatch('bubble_showBubble', {\n                show: true,\n                type: 'warn',\n                warn: {\n                    title: '再次确定创建故事?',\n                    html: '<p>为了不被相关部门请喝茶，以及本着挖掘内容更加有深度、而不是单纯靠视觉博人眼球的作品的原则</p>' + '<p>请确保你的封面和即将发布的章节中，没有涉及血腥、暴力、色情、政治等违规情节，否则不予推送首页，严重者删除内容或封号处理</p><a href=\"javascript:void(0);\">《耳语之森原创声明及相关功能使用协议》 </a>',\n                    comfireFn: function comfireFn() {\n                        that.addCatalog();\n                    }\n                }\n            });\n        },\n        addCatalog: function addCatalog() {\n            var _this = this;\n\n            var option = {\n                \"level\": this.level_id,\n                \"translate\": this.control_id,\n                \"reprint\": this.share_id,\n                \"category_id\": this.category_id,\n                \"catalog_id\": this.catalog_id,\n                \"catalog_title\": this.articlename,\n                \"catalog_desc\": this.intro,\n                \"catalog_cover_url\": this.image,\n                \"catalog_status\": this.audit_status,\n                \"catalog_label\": this.tags.join(',') };\n\n            if (this.control_id == 1) {\n                option.authorize = {\n                    \"original_title\": this.oldname,\n                    \"original_url\": this.oldurl,\n                    \"original_img_url\": this.oldimg,\n                    \"original_author\": this.oldauthor };\n            }\n            this.$store.dispatch(this.create ? 'opus_updateCatalog' : 'opus_addCatalog', option).then(function (res) {\n                var msg;\n                if (_this.create) {\n                    msg = '更新成功!';\n                } else {\n                    msg = '创建故事成功！块更新章节吧！';\n                }\n                _this.$eventHub.$emit('updateCatalog_success');\n                _this.show = false;\n\n                _this.$store.dispatch('opus_setCatalog_info', option);\n\n                _this.$store.dispatch('bubble_success', {\n                    ret: 0,\n                    type: 'top',\n                    msg: msg\n                });\n\n                if (_this.resType == 'author') {\n                    _this.refreshCatalog();\n                }\n            }).catch(function (err) {\n                _this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        getCategoryList: function getCategoryList() {\n            var _this2 = this;\n\n            this.$store.dispatch('opus_getCategoryList', {}).then(function (res) {\n\n                _this2.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this2.$store.dispatch('bubble_fail', err);\n            });\n        },\n        getLabelList: function getLabelList(number) {\n            var _this3 = this;\n\n            this.$store.dispatch('opus_getLabelList', {\n                count: number || this.count\n            }).then(function (res) {\n\n                _this3.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this3.$store.dispatch('bubble_fail', err);\n            });\n        },\n        refresh: function refresh() {\n            this.getLabelList();\n        },\n        refreshCatalog: function refreshCatalog() {\n            this.$eventHub.$emit('author_chapter_list_refresh');\n        }\n    },\n    watch: {\n        show: function show(newVal) {\n            if (newVal) {\n                this.getCategoryList();\n\n                this.getLabelList();\n            }\n        }\n    },\n    updated: function updated() {\n        var w = 0;\n        $(\".tag-item\").each(function () {\n            w += $(this).width() + 10;\n        });\n        $('.tag-edit').css('padding-left', w + 20);\n    },\n    mounted: function mounted() {\n        var _this4 = this;\n\n        this.$eventHub.$on('getLabelList', function (option) {\n            _this4.getLabelList(option.number);\n        });\n\n        this.$eventHub.$on('header_article_setShow', function (option) {\n            _this4.show = option.show;\n\n            if (option.catalog) {\n                _this4.create = true;\n                _this4.image = option.catalog.catalog_cover_url;\n                _this4.articlename = option.catalog.catalog_title;\n                _this4.category_id = option.catalog.category_id;\n                _this4.catalog_id = option.catalog.catalog_id;\n                _this4.articletype = option.catalog.category_title;\n                _this4.audit_status = option.catalog.audit_status;\n                _this4.level_id = option.catalog.level;\n                _this4.intro = option.catalog.catalog_desc;\n                _this4.share_id = option.catalog.reprint;\n                _this4.share = option.catalog.reprint == 1 ? '是' : '否';\n                _this4.control_id = option.catalog.translate;\n                _this4.control = option.catalog.translate == 1 ? '是' : '否';\n                if (option.catalog.authorize) {\n                    _this4.oldname = option.catalog.authorize.original_title;\n                    _this4.oldauthor = option.catalog.authorize.original_author;\n                    _this4.oldimg = option.catalog.authorize.original_img_url;\n                    _this4.oldurl = option.catalog.authorize.original_url;\n                }\n\n                _this4.tags = [];\n                option.catalog.labels.map(function (item, index) {\n                    _this4.tags.push(item);\n                });\n\n                for (var i = 0, len = _this4.catalog.statusArr.length; i < len; i++) {\n                    var item = _this4.catalog.statusArr[i];\n                    if (_this4.audit_status == item.audit_status) {\n                        _this4.status = item.text;\n                    }\n                }\n\n                for (var i = 0, len = _this4.catalog.levelArr.length; i < len; i++) {\n                    var item = _this4.catalog.levelArr[i];\n                    if (_this4.level_id == item.level_id) {\n                        _this4.level = item.text;\n                    }\n                }\n            } else {\n                _this4.create = false;\n                _this4.image = _catalog2.default;\n                _this4.articlename = '';\n                _this4.category_id = -1;\n                _this4.audit_status = -1;\n                _this4.level_id = -1;\n                _this4.intro = '';\n                _this4.articletype = '类型';\n                _this4.status = '状态';\n                _this4.level = '等级';\n                _this4.tags = [];\n\n                _this4.control = '翻译授权';\n                _this4.control_id = -1;\n                _this4.oldname = '';\n                _this4.oldimg = '';\n                _this4.oldurl = '';\n                _this4.oldauthor = '';\n                _this4.share = '允许转载';\n                _this4.share_id = -1;\n            }\n        });\n\n        $('body').on('click', function (e) {\n            var node = $(e.target);\n            if (!node.hasClass('j-close-1') && node.parents('.j-close-1').length == 0) {\n                _this4.typeShow = false;\n                _this4.statusShow = false;\n            }\n            if (!node.hasClass('j-close-2') && node.parents('.j-close-2').length == 0) {\n                _this4.tagsshow = false;\n                if (_this4.tags.length == 0) {\n                    $('.j-close-2').find('.tag-edit').text('填写标签便于推荐，多个标签用空格区分');\n                } else {\n                    $('.j-close-2').find('.tag-edit').text('');\n                }\n            }\n        });\n    }\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"7t+N\")))\n\n/***/ }),\n\n/***/ \"My/L\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return (_vm.show) ? _c('div', {\n    staticClass: \"c-artice-edit\"\n  }, [_c('div', {\n    staticClass: \"c-artice-edit-mask\"\n  }, [_c('div', {\n    staticClass: \"c-artice-edit-wrap\"\n  }, [_c('div', {\n    staticClass: \"c-artice-edit__create\"\n  }, [_c('div', {\n    staticClass: \"create-top\"\n  }, [_c('div', {\n    staticClass: \"create-top-left\"\n  }, [_c('div', {\n    staticClass: \"create-top-left-img\"\n  }, [(!_vm.reg_img) ? _c('div', {\n    staticClass: \"c-dialog__tip\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_img_con))])]) : _vm._e(), _vm._v(\" \"), _c('div', {\n    staticClass: \"img\"\n  }, [_c('div', {\n    staticClass: \"mask\",\n    attrs: {\n      \"id\": \"article_upload_image_select\"\n    }\n  }, [_vm._v(\"添加封面\")]), _vm._v(\" \"), (_vm.image) ? _c('img', {\n    attrs: {\n      \"src\": _vm.image\n    }\n  }) : _vm._e()]), _vm._v(\" \"), _c('UploadImg', {\n    attrs: {\n      \"type\": \"2\",\n      \"select\": \"article_upload_image_select\",\n      \"container\": \"article_container\"\n    },\n    on: {\n      \"uploadImg_uploaded\": _vm.uploaded\n    }\n  })], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-top-left-text\"\n  }, [_vm._v(\"添加封面：建议360X480以上\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-top-right\"\n  }, [_c('div', {\n    staticClass: \"create-top-item create-top-input create-top-name cpm_form_input\",\n    class: {\n      'z-limit': _vm.articlename.length > 30\n    }\n  }, [(!_vm.reg_name) ? _c('div', {\n    staticClass: \"c-dialog__tip z-right\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_name_con))])]) : _vm._e(), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.articlename),\n      expression: \"articlename\"\n    }],\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": \"作品名称\"\n    },\n    domProps: {\n      \"value\": (_vm.articlename)\n    },\n    on: {\n      \"focus\": _vm.focus,\n      \"blur\": _vm.blur,\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.articlename = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-top-item z-mini\"\n  }, [_c('div', {\n    staticClass: \"create-top-select create-top-control z-width j-close-1\",\n    on: {\n      \"mouseover\": _vm.selctEnter,\n      \"mouseout\": _vm.selctOut\n    }\n  }, [(!_vm.reg_control) ? _c('div', {\n    staticClass: \"c-dialog__tip\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_control_con))])]) : _vm._e(), _vm._v(\" \"), _c('span', [_vm._v(_vm._s(_vm.control))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"c-sub-more cpm_sub_more\"\n  }, [_c('div', {\n    staticClass: \"item\",\n    attrs: {\n      \"data-control_id\": \"1\"\n    },\n    on: {\n      \"click\": _vm.controlShowValue\n    }\n  }, [_vm._v(\"是\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\",\n    attrs: {\n      \"data-control_id\": \"0\"\n    },\n    on: {\n      \"click\": _vm.controlShowValue\n    }\n  }, [_vm._v(\"否\")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-top-select create-top-share z-width j-close-1\",\n    on: {\n      \"mouseover\": _vm.selctEnter,\n      \"mouseout\": _vm.selctOut\n    }\n  }, [(!_vm.reg_share) ? _c('div', {\n    staticClass: \"c-dialog__tip z-right\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_share_con))])]) : _vm._e(), _vm._v(\" \"), _c('span', [_vm._v(_vm._s(_vm.share))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"c-sub-more cpm_sub_more\"\n  }, [_c('div', {\n    staticClass: \"item\",\n    attrs: {\n      \"data-share_id\": \"1\"\n    },\n    on: {\n      \"click\": _vm.shareShowValue\n    }\n  }, [_vm._v(\"是\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\",\n    attrs: {\n      \"data-share_id\": \"0\"\n    },\n    on: {\n      \"click\": _vm.shareShowValue\n    }\n  }, [_vm._v(\"否\")])])])]), _vm._v(\" \"), (_vm.control_id == 1) ? _c('div', {\n    staticClass: \"create-top-item create-top-input create-top-old create-top-oldname cpm_form_input\"\n  }, [(!_vm.reg_old_name) ? _c('div', {\n    staticClass: \"c-dialog__tip z-right\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_old_name_con))])]) : _vm._e(), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.oldname),\n      expression: \"oldname\"\n    }],\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": \"原作品故事名字\"\n    },\n    domProps: {\n      \"value\": (_vm.oldname)\n    },\n    on: {\n      \"focus\": _vm.focus,\n      \"blur\": _vm.blur,\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.oldname = $event.target.value\n      }\n    }\n  })]) : _vm._e(), _vm._v(\" \"), (_vm.control_id == 1) ? _c('div', {\n    staticClass: \"create-top-item create-top-input create-top-old create-top-oldauthor cpm_form_input\"\n  }, [(!_vm.reg_old_author) ? _c('div', {\n    staticClass: \"c-dialog__tip z-right\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_old_author_con))])]) : _vm._e(), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.oldauthor),\n      expression: \"oldauthor\"\n    }],\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": \"原作者\"\n    },\n    domProps: {\n      \"value\": (_vm.oldauthor)\n    },\n    on: {\n      \"focus\": _vm.focus,\n      \"blur\": _vm.blur,\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.oldauthor = $event.target.value\n      }\n    }\n  })]) : _vm._e(), _vm._v(\" \"), (_vm.control_id == 1) ? _c('div', {\n    staticClass: \"create-top-item create-top-input create-top-old create-top-oldurl cpm_form_input\"\n  }, [(!_vm.reg_old_url) ? _c('div', {\n    staticClass: \"c-dialog__tip z-right\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_old_url_con))])]) : _vm._e(), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.oldurl),\n      expression: \"oldurl\"\n    }],\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": \"原作品连接\"\n    },\n    domProps: {\n      \"value\": (_vm.oldurl)\n    },\n    on: {\n      \"focus\": _vm.focus,\n      \"blur\": _vm.blur,\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.oldurl = $event.target.value\n      }\n    }\n  })]) : _vm._e(), _vm._v(\" \"), (_vm.control_id == 1) ? _c('div', {\n    staticClass: \"create-top-item create-top-input create-top-old create-top-oldimg\"\n  }, [(!_vm.reg_old_img) ? _c('div', {\n    staticClass: \"c-dialog__tip z-right\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_old_img_con))])]) : _vm._e(), _vm._v(\" \"), _c('span', {\n    attrs: {\n      \"id\": \"old_upload_image_select\"\n    }\n  }), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.oldimg),\n      expression: \"oldimg\"\n    }],\n    attrs: {\n      \"type\": \"text\",\n      \"disabled\": \"\",\n      \"placeholder\": \"上传翻译授权截图证明\"\n    },\n    domProps: {\n      \"value\": (_vm.oldimg)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.oldimg = $event.target.value\n      }\n    }\n  }), _vm._v(\" \"), _c('UploadImg', {\n    attrs: {\n      \"type\": \"2\",\n      \"select\": \"old_upload_image_select\",\n      \"container\": \"old_container\"\n    },\n    on: {\n      \"uploadImg_uploaded\": _vm.old_uploaded\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-top-item z-mini\"\n  }, [_c('div', {\n    staticClass: \"create-top-select create-top-type j-close-1\",\n    on: {\n      \"mouseover\": _vm.selctEnter,\n      \"mouseout\": _vm.selctOut\n    }\n  }, [(!_vm.reg_type) ? _c('div', {\n    staticClass: \"c-dialog__tip\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_type_con))])]) : _vm._e(), _vm._v(\" \"), _c('span', [_vm._v(_vm._s(_vm.articletype))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"c-sub-more cpm_sub_more\"\n  }, _vm._l((_vm.category.laberSubnode), function(item) {\n    return _c('div', {\n      staticClass: \"item\",\n      attrs: {\n        \"data-id\": item.category_id\n      },\n      on: {\n        \"click\": _vm.typeShowValue\n      }\n    }, [_vm._v(_vm._s(item.category_title))])\n  }))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-top-select create-top-status j-close-1\",\n    on: {\n      \"mouseover\": _vm.selctEnter,\n      \"mouseout\": _vm.selctOut\n    }\n  }, [(!_vm.reg_status) ? _c('div', {\n    staticClass: \"c-dialog__tip z-top\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_status_con))])]) : _vm._e(), _vm._v(\" \"), _c('span', [_vm._v(_vm._s(_vm.status))]), _vm._v(\" \"), (_vm.catalog.statusArr.length) ? _c('div', {\n    staticClass: \"c-sub-more cpm_sub_more\"\n  }, _vm._l((_vm.catalog.statusArr), function(item) {\n    return _c('div', {\n      staticClass: \"item\",\n      attrs: {\n        \"data-audit_status\": item.audit_status\n      },\n      on: {\n        \"click\": _vm.statusShowValue\n      }\n    }, [_vm._v(_vm._s(item.text))])\n  })) : _vm._e()]), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-top-select create-top-level j-close-1\",\n    on: {\n      \"mouseover\": _vm.selctEnter,\n      \"mouseout\": _vm.selctOut\n    }\n  }, [(!_vm.reg_level) ? _c('div', {\n    staticClass: \"c-dialog__tip z-right\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_level_con))])]) : _vm._e(), _vm._v(\" \"), _c('span', [_vm._v(_vm._s(_vm.level))]), _vm._v(\" \"), (_vm.catalog.levelArr.length) ? _c('div', {\n    staticClass: \"c-sub-more cpm_sub_more\"\n  }, _vm._l((_vm.catalog.levelArr), function(item) {\n    return _c('div', {\n      staticClass: \"item\",\n      attrs: {\n        \"data-level_id\": item.level_id\n      },\n      on: {\n        \"click\": _vm.levelShowValue\n      }\n    }, [_vm._v(_vm._s(item.text))])\n  })) : _vm._e()])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-top-item create-top-tagsInput j-close-2\",\n    on: {\n      \"click\": _vm.tagsshowOpen\n    }\n  }, [(!_vm.reg_tag) ? _c('div', {\n    staticClass: \"c-dialog__tip z-right\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_tag_con))])]) : _vm._e(), _vm._v(\" \"), _c('div', {\n    staticClass: \"tag-wrap cpm_form_input\",\n    class: {\n      'z-limit': _vm.tags.length > 3, 'z-error': _vm.tagsshow\n    }\n  }, [_c('div', {\n    staticClass: \"tag-list\"\n  }, _vm._l((_vm.tags), function(item, index) {\n    return _c('div', {\n      staticClass: \"tag-item\"\n    }, [_c('div', {\n      staticClass: \"tag-item-text\"\n    }, [_vm._v(_vm._s(item))]), _c('em', {\n      attrs: {\n        \"data-index\": index\n      },\n      on: {\n        \"click\": function($event) {\n          $event.stopPropagation();\n          _vm.deleteTag($event)\n        }\n      }\n    })])\n  })), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.tagsVal),\n      expression: \"tagsVal\"\n    }],\n    staticClass: \"tag-edit\",\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": _vm.tags.length ? '' : '多个标签用空格区分'\n    },\n    domProps: {\n      \"value\": (_vm.tagsVal)\n    },\n    on: {\n      \"keyup\": [function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        $event.stopPropagation();\n        $event.preventDefault();\n        _vm.enter($event)\n      }, function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"space\", 32)) { return null; }\n        $event.stopPropagation();\n        $event.preventDefault();\n        _vm.enter($event)\n      }],\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.tagsVal = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), (_vm.tagsshow) ? _c('div', {\n    staticClass: \"create-tags-select\"\n  }, [_c('div', {\n    staticClass: \"create-tags-select-title\"\n  }, [_c('span', [_vm._v(\"热门标签\")]), _vm._v(\" \"), _c('em', {\n    on: {\n      \"click\": _vm.refresh\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-tags-select-body\"\n  }, _vm._l((_vm.category.tags), function(item) {\n    return _c('div', {\n      staticClass: \"body-item\",\n      class: {\n        'z-select': _vm.tags.indexOf(item) > -1\n      },\n      on: {\n        \"click\": _vm.tagsSelect\n      }\n    }, [_vm._v(_vm._s(item))])\n  }))]) : _vm._e()]), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-top-item create-top-form cpm_form_textarea\",\n    class: {\n      'z-limit': _vm.intro.length > 1000\n    }\n  }, [(!_vm.reg_intro) ? _c('div', {\n    staticClass: \"c-dialog__tip z-right\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_intro_con))])]) : _vm._e(), _vm._v(\" \"), _c('textarea', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.intro),\n      expression: \"intro\"\n    }],\n    attrs: {\n      \"placeholder\": \"填写作品简介...\"\n    },\n    domProps: {\n      \"value\": (_vm.intro)\n    },\n    on: {\n      \"focus\": _vm.focus,\n      \"blur\": _vm.blur,\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.intro = $event.target.value\n      }\n    }\n  })])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"cpm_clear\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-top-agree\",\n    class: {\n      'z-on': _vm.agree\n    },\n    on: {\n      \"click\": _vm.agreeSwitch\n    }\n  }, [_c('em'), _vm._v(\" \"), _vm._m(0)])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-bottom\"\n  }, [_c('div', {\n    staticClass: \"create-bottom-btn z-on\"\n  }, [_c('div', {\n    staticClass: \"create-bottom-item create-bottom-cancel\",\n    on: {\n      \"click\": _vm.cancel\n    }\n  }, [_vm._v(\"取消\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-bottom-item create-bottom-commit\",\n    on: {\n      \"click\": _vm.save\n    }\n  }, [_c('span', [_vm._v(_vm._s(_vm.create ? '更新作品' : '创建新作品'))])])])])])])])]) : _vm._e()\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('p', [_vm._v(\"我已阅读并同意遵守 \"), _c('a', {\n    attrs: {\n      \"href\": \"./about.html\"\n    }\n  }, [_vm._v(\"《耳语之森原创声明及相关功能使用协议》 \")])])\n}]}\n\n/***/ }),\n\n/***/ \"NEzH\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"rgvm\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"vvc1\"),\n  /* template */\n  __webpack_require__(\"2mP8\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"Nza8\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"B0wf\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"4k6S\"),\n  /* template */\n  __webpack_require__(\"prCX\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"OTwL\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"PCXR\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _vuex = __webpack_require__(\"NYxO\");\n\nexports.default = {\n    data: function data() {\n        return {\n            subMoreShow: false,\n            data: {},\n            index: 0,\n\n            pageSize: 5,\n            pageIndex: 1\n        };\n    },\n\n    computed: (0, _vuex.mapState)({\n        chapter: function chapter(state) {\n            return state.opus.chapter;\n        }\n    }),\n    methods: {\n        subMoreSwitch: function subMoreSwitch() {\n            this.subMoreShow = !this.subMoreShow;\n        },\n        pageSwitch: function pageSwitch(pageIndex) {\n            if (pageIndex == this.pageIndex) {\n                return false;\n            }\n            this.pageIndex = pageIndex;\n            this.getChapterList();\n        },\n        getChapterList: function getChapterList() {\n            var _this = this;\n\n            this.$store.dispatch('opus_getChapterList', {\n                \"catalogId\": this.catalog_id,\n                \"pagination\": \"1\",\n                \"page\": this.pageIndex,\n                \"pageSize\": this.pageSize }).then(function (res) {\n                _this.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        remove: function remove(chapterId) {\n            var that = this;\n            this.$store.dispatch('bubble_showBubble', {\n                show: true,\n                type: 'warn',\n                warn: {\n                    title: '确定要删除',\n                    content: '删除后将无法恢复，请谨慎处理',\n                    comfireFn: function comfireFn() {\n                        that.deleteChapter(chapterId);\n                    }\n                }\n            });\n        },\n        deleteChapter: function deleteChapter(chapterId) {\n            var _this2 = this;\n\n            this.$store.dispatch('opus_deleteChapter', {\n                \"chapterId\": chapterId\n            }).then(function (res) {\n                _this2.getChapterList();\n\n                _this2.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this2.$store.dispatch('bubble_fail', err);\n            });\n        }\n    },\n    mounted: function mounted() {\n        this.catalog_id = this.$url.getUrlParam('catalog_id');\n\n        this.getChapterList();\n    }\n};\n\n/***/ }),\n\n/***/ \"POwH\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _vuex = __webpack_require__(\"NYxO\");\n\nvar _avatar = __webpack_require__(\"mOGY\");\n\nvar _avatar2 = _interopRequireDefault(_avatar);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n    data: function data() {\n        return {\n            avatar: _avatar2.default,\n\n            pageIndex: 1,\n            pageSize: 5,\n\n            commentIndex: 1,\n            commentSize: 5,\n\n            comment_con: ''\n        };\n    },\n\n    computed: (0, _vuex.mapState)({\n        userInfo: function userInfo(state) {\n            return state.user.info;\n        },\n        comment: function comment(state) {\n            return state.opus.comment;\n        },\n        catalog: function catalog(state) {\n            return state.opus.catalog.info;\n        }\n    }),\n    props: ['type'],\n    methods: {\n        replayCommit: function replayCommit(_index, replayIndex) {\n            this.$store.dispatch('opus_setCommentList', {\n                index: _index,\n                replayIndex: replayIndex\n            });\n        },\n        pageSwitch: function pageSwitch(pageIndex) {\n            if (this.pageIndex == pageIndex) {\n                return false;\n            }\n            this.pageIndex = pageIndex;\n            this.getCommentList();\n        },\n        getCommentList: function getCommentList() {\n            var _this = this;\n\n            this.$store.dispatch('opus_getCommentList', {\n                \"page\": this.pageIndex,\n                \"pageSize\": this.pageSize,\n                \"pagination\": 1,\n                \"catalogId\": this.catalog_id,\n                \"type\": this.type || 2,\n                \"chapterId\": this.chapter_id,\n                \"subPageSize\": this.commentSize }).then(function (res) {\n                _this.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        addComment: function addComment(payload) {\n            var _this2 = this;\n\n            if (!this.userInfo.isLogin) {\n                return this.$store.dispatch('bubble_fail', {\n                    ret: -11,\n                    msg: '未登录，请登陆后操作'\n                });\n                return false;\n            }\n\n            this.$store.dispatch('opus_addComment', {\n                \"to_comment_id\": payload.to_comment_id,\n                \"to_reply_comment_id\": payload.to_reply_comment_id,\n                \"comment\": payload.comment,\n                \"catalog_id\": this.catalog_id,\n                \"chapter_id\": payload.chapter_id }).then(function (res) {\n                _this2.$eventHub.$emit('article.comment.refresh');\n                _this2.comment_con = '';\n                _this2.replayIndex = -2;\n                _this2.getCommentList();\n\n                _this2.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this2.$store.dispatch('bubble_fail', err);\n            });\n        },\n        addCommentPraise: function addCommentPraise(e) {\n            var _this3 = this;\n\n            if (!this.userInfo.isLogin) {\n                return this.$store.dispatch('bubble_fail', {\n                    ret: -11,\n                    msg: '未登录，请登陆后操作'\n                });\n                return false;\n            }\n\n            var comment_id = $(e.currentTarget).parents('.c-artice-comment-list').attr('data-comment_id');\n            this.$store.dispatch('opus_addCommentPraise', {\n                commentId: comment_id\n            }).then(function (res) {\n                _this3.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this3.$store.dispatch('bubble_fail', err);\n            });\n        },\n        addReport: function addReport(e) {\n            if (!this.userInfo.isLogin) {\n                return this.$store.dispatch('bubble_fail', {\n                    ret: -11,\n                    msg: '未登录，请登陆后操作'\n                });\n                return false;\n            }\n\n            var comment_id;\n            if ($(e.currentTarget).parents('.record__item').length > 0) {\n                comment_id = $(e.currentTarget).parents('.record__item').data('comment_id');\n            } else {\n                comment_id = $(e.currentTarget).parents('.c-artice-comment-list').data('comment_id');\n            }\n            this.$store.dispatch('bubble_showBubble', {\n                show: true,\n                type: 'report',\n                report: {\n                    content_id: comment_id,\n                    content_type: 2\n                }\n            });\n        },\n        sendComment: function sendComment(id) {\n            this.addComment({\n                comment: this.comment_con,\n                to_comment_id: id\n            });\n        },\n        sendReplyComment: function sendReplyComment(comment_id, reply_comment_id) {\n            this.addComment({\n                comment: this.comment_con,\n                to_comment_id: comment_id,\n                to_reply_comment_id: reply_comment_id\n            });\n        },\n        getSubCommentMore: function getSubCommentMore(data) {\n            var _this4 = this;\n\n            this.commentIndex++;\n            this.$store.dispatch('opus_getReplyCommentList', {\n                \"page\": this.commentIndex,\n                \"pageSize\": this.commentSize,\n                \"pagination\": 1,\n                \"commentId\": data.comment_id }).then(function (res) {\n                _this4.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this4.$store.dispatch('bubble_fail', err);\n            });\n        }\n    },\n    created: function created() {\n        var _this5 = this;\n\n        this.$eventHub.$on('article.comment.addComment', function (payload) {\n            _this5.addComment(payload);\n        });\n    },\n    mounted: function mounted() {\n        this.catalog_id = this.$url.getUrlParam('catalog_id');\n        this.chapter_id = this.$url.getUrlParam('chapter_id');\n\n        this.getCommentList();\n    }\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"7t+N\")))\n\n/***/ }),\n\n/***/ \"PSXG\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _config = __webpack_require__(\"AEPM\");\n\nexports.default = {\n    name: 'footer',\n    data: function data() {\n        return {\n            url: {\n                about: _config.distUrl + 'about.html',\n                contact: _config.distUrl + 'contact.html'\n            }\n        };\n    },\n\n    methods: {}\n};\n\n/***/ }),\n\n/***/ \"PoJi\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Vue;\n\nfunction install(_Vue) {\n\tif (Vue) {\n\t\tconsole.error('[cache] already installed. Vue.use(cache) should be called only once.');\n\t\treturn;\n\t}\n\tVue = _Vue;\n\tVue.prototype.$version = version;\n}\n\nvar version = {\n\tbanner: {\n\t\tkey: 'eryuzhisen_indexBanner',\n\t\tversion: '1.0',\n\t\ttime: 10 * 60 * 1000\n\t},\n\n\thistory: {\n\t\tkey: 'eryuzhisen_catalog_history',\n\t\tversion: '1.0',\n\t\ttime: 12 * 30 * 24 * 60 * 60 * 1000\n\t},\n\n\tuserInfo: {\n\t\tkey: 'eryuzhisen_userInfo',\n\t\tversion: '1.0',\n\t\ttime: 60 * 60 * 1000\n\t},\n\n\tchapaterEdit: {\n\t\tkey: 'eryuzhisen_chapaterEdit',\n\t\tversion: '1.0',\n\t\ttime: 1 * 60 * 1000\n\t},\n\n\tchapaterEdit_edit: {\n\t\tkey: 'eryuzhisen_chapaterEdit_edit',\n\t\tversion: '1.0',\n\t\ttime: 5 * 60 * 1000\n\t}\n};\n\nexports.default = {\n\tinstall: install\n};\n\n/***/ }),\n\n/***/ \"PwTI\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"+GE4\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"9a/S\"),\n  /* template */\n  __webpack_require__(\"r28Z\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"QZz9\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-comment-info\"\n  }, [_c('div', {\n    staticClass: \"c-comment-info-wrap\"\n  }, [_vm._l((_vm.message.list), function(data, index) {\n    return _c('div', {\n      staticClass: \"c-comment-info-list\",\n      class: {\n        'z-unread': data.read == 0\n      }\n    }, [_c('div', {\n      staticClass: \"c-comment-info__top\"\n    }, [_c('div', {\n      staticClass: \"top__img\"\n    }, [_vm._v(\"\\n                \" + _vm._s(data.message.sender.avatar_utl) + \"\\n            \")]), _vm._v(\" \"), _c('div', {\n      staticClass: \"top__name\"\n    }, [_vm._v(_vm._s(data.message.sender.nick_name))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"c-comment-info__comment\"\n    }, [_c('div', {\n      staticClass: \"comment__top\",\n      domProps: {\n        \"innerHTML\": _vm._s(data.message.content.title)\n      }\n    }), _vm._v(\" \"), _c('div', {\n      staticClass: \"comment__body\"\n    }, [_vm._v(_vm._s(data.message.content.content))]), _vm._v(\" \"), (data.message.content.cite) ? _c('div', {\n      staticClass: \"comment__bottom\"\n    }, [_vm._v(_vm._s(data.message.content.cite))]) : _vm._e()]), _vm._v(\" \"), _c('div', {\n      staticClass: \"c-comment-info__form\"\n    }, [_c('div', {\n      staticClass: \"form__top\"\n    }, [_c('div', {\n      staticClass: \"form__top__jubao\",\n      on: {\n        \"click\": function($event) {\n          _vm.addReport(data.message.sender.user_id)\n        }\n      }\n    }, [_vm._v(\"举报\")]), _vm._v(\" \"), _c('div', {\n      staticClass: \"form__top__record\",\n      on: {\n        \"click\": function($event) {\n          _vm.recordSwitch(index, data.msg_id, data.read)\n        }\n      }\n    }, [_vm._v(_vm._s(_vm.recordIndex == index ? '收起回复' : '回复'))])]), _vm._v(\" \"), (_vm.recordIndex == index) ? _c('div', {\n      staticClass: \"form__body\"\n    }, [_c('div', {\n      staticClass: \"form__body__write\"\n    }, [_c('input', {\n      directives: [{\n        name: \"model\",\n        rawName: \"v-model\",\n        value: (_vm.comment),\n        expression: \"comment\"\n      }],\n      attrs: {\n        \"type\": \"text\",\n        \"placeholder\": \"回复TA...\"\n      },\n      domProps: {\n        \"value\": (_vm.comment)\n      },\n      on: {\n        \"input\": function($event) {\n          if ($event.target.composing) { return; }\n          _vm.comment = $event.target.value\n        }\n      }\n    })]), _vm._v(\" \"), _c('div', {\n      staticClass: \"form_body__commit\",\n      on: {\n        \"click\": function($event) {\n          _vm.emitComment(data.message.arguments)\n        }\n      }\n    }, [_vm._v(\"提交\")])]) : _vm._e()])])\n  }), _vm._v(\" \"), (_vm.message.count <= 0) ? _c('Empty', {\n    staticClass: \"content-empty\"\n  }) : _vm._e()], 2), _vm._v(\" \"), _c('Page', {\n    attrs: {\n      \"count\": _vm.message.count,\n      \"length\": _vm.pageSize,\n      \"index\": _vm.pageIndex\n    },\n    on: {\n      \"page_switch\": _vm.pageSwitch\n    }\n  })], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ \"RS2Z\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"Bhe8\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"BCRs\"),\n  /* template */\n  __webpack_require__(\"xyAH\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"V9fN\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"CPmu\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"mxKd\"),\n  /* template */\n  __webpack_require__(\"euaV\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"VANs\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"lqD5\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"m127\"),\n  /* template */\n  __webpack_require__(\"gnCm\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"VHTH\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"VVx8\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"siit\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"LJ/l\"),\n  /* template */\n  __webpack_require__(\"My/L\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"W0Us\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"OTwL\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"FhuJ\"),\n  /* template */\n  __webpack_require__(\"2Gq5\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"Wbri\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports._rejectObj = exports._reject = exports.getMyCatalogList = exports.delCatalog = exports.delChapter = exports.updateChapter = exports.updateCatalog = exports.addPraise = exports.addCommentPraise = exports.addChapter = exports.addCatalog = exports.addComment = exports.getReplyCommentList = exports.getCommentList = exports.getChapterList = exports.getChapterDetail = exports.getCatalogDetail = exports.addFavorites = exports.delFavorites = exports.getFavoritesList = exports.getCatalogList = exports.getCategoryList = exports.getLabelList = undefined;\n\nvar _stringify = __webpack_require__(\"mvHQ\");\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _config = __webpack_require__(\"AEPM\");\n\nvar _jsCookie = __webpack_require__(\"lbHh\");\n\nvar _jsCookie2 = _interopRequireDefault(_jsCookie);\n\nvar _axios = __webpack_require__(\"mtWM\");\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_axios2.default.defaults.headers.get['Content-Type'] = 'application/x-www-form-urlencoded';\n_axios2.default.defaults.headers.get['X-Requested-With'] = 'XMLHttpRequest';\nvar token = _jsCookie2.default.get('token');\n\nfunction getLabelList(option) {\n\tvar url = _config.baseUrl + 'opus/getLabelList';\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction getCategoryList(option) {\n\tvar url = _config.baseUrl + 'opus/getCategoryList';\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction getCatalogList(option) {\n\tvar url = _config.baseUrl + 'opus/getCatalogList';\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'POST',\n\t\turl: url,\n\t\tparams: option.params,\n\t\tdata: option.body,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction getFavoritesList(option) {\n\tvar url = _config.baseUrl + 'opus/getFavoritesList';\n\n\tif (!token) {\n\t\treturn (0, _config._rejectObj)({\n\t\t\tret: -10,\n\t\t\tmsg: '未登录'\n\t\t});\n\t}\n\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction delFavorites(option) {\n\tvar url = _config.baseUrl + 'opus/delFavorites/' + option.catalogId;\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'DELETE',\n\t\turl: url,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction addFavorites(option) {\n\tvar url = _config.baseUrl + 'opus/addFavorites/' + option.catalogId;\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'PUT',\n\t\turl: url,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction getCatalogDetail(option) {\n\tvar url = _config.baseUrl + 'opus/getCatalogDetail';\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction getChapterDetail(option) {\n\tvar url = _config.baseUrl + 'opus/getChapterDetail';\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction getChapterList(option) {\n\tvar url = _config.baseUrl + 'opus/getChapterList';\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction getCommentList(option) {\n\tvar url = _config.baseUrl + 'opus/getCommentList';\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction getReplyCommentList(option) {\n\tvar url = _config.baseUrl + 'opus/getReplyCommentList';\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction addComment(option) {\n\tvar url = _config.baseUrl + 'opus/addComment';\n\n\tif (!token) {\n\t\treturn (0, _config._rejectObj)({\n\t\t\tret: -10,\n\t\t\tmsg: '未登录'\n\t\t});\n\t}\n\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'POST',\n\t\turl: url,\n\t\tdata: option,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction addCatalog(option) {\n\tvar url = _config.baseUrl + 'opus/addCatalog';\n\tvar _header = option._header || {};\n\tdelete option._header;\n\treturn (0, _axios2.default)({\n\t\tmethod: 'POST',\n\t\turl: url,\n\t\tdata: (0, _stringify2.default)(option),\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nfunction addChapter(option) {\n\tvar url = _config.baseUrl + 'opus/addChapter';\n\tvar _header = option._header || {};\n\tdelete option._header;\n\treturn (0, _axios2.default)({\n\t\tmethod: 'POST',\n\t\turl: url,\n\t\tdata: (0, _stringify2.default)(option),\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nfunction addCommentPraise(option) {\n\tvar url = _config.baseUrl + 'opus/addCommentPraise/' + option.commentId;\n\tvar _header = option._header || {};\n\tdelete option._header;\n\treturn (0, _axios2.default)({\n\t\tmethod: 'PUT',\n\t\turl: url,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nfunction addPraise(option) {\n\tvar url = _config.baseUrl + 'opus/addPraise/' + option.catalogId + '/' + option.chapterId;\n\tvar _header = option._header || {};\n\tdelete option._header;\n\treturn (0, _axios2.default)({\n\t\tmethod: 'PUT',\n\t\turl: url,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nfunction updateCatalog(option) {\n\tvar url = _config.baseUrl + 'opus/updateCatalog';\n\tvar _header = option._header || {};\n\tdelete option._header;\n\treturn (0, _axios2.default)({\n\t\tmethod: 'POST',\n\t\turl: url,\n\t\tdata: (0, _stringify2.default)(option),\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nfunction updateChapter(option) {\n\tvar url = _config.baseUrl + 'opus/updateChapter';\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'POST',\n\t\turl: url,\n\t\tdata: option,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction delChapter(option) {\n\tvar url = _config.baseUrl + 'opus/delChapter/' + option.chapterId;\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'DELETE',\n\t\turl: url,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction delCatalog(option) {\n\tvar url = _config.baseUrl + 'opus/delCatalog/' + option.catalogId;\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'DELETE',\n\t\turl: url,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction getMyCatalogList(option) {\n\tvar url = _config.baseUrl + 'opus/getMyCatalogList';\n\n\tif (!token) {\n\t\treturn (0, _config._rejectObj)({\n\t\t\tret: -10,\n\t\t\tmsg: '未登录'\n\t\t});\n\t}\n\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nexports.getLabelList = getLabelList;\nexports.getCategoryList = getCategoryList;\nexports.getCatalogList = getCatalogList;\nexports.getFavoritesList = getFavoritesList;\nexports.delFavorites = delFavorites;\nexports.addFavorites = addFavorites;\nexports.getCatalogDetail = getCatalogDetail;\nexports.getChapterDetail = getChapterDetail;\nexports.getChapterList = getChapterList;\nexports.getCommentList = getCommentList;\nexports.getReplyCommentList = getReplyCommentList;\nexports.addComment = addComment;\nexports.addCatalog = addCatalog;\nexports.addChapter = addChapter;\nexports.addCommentPraise = addCommentPraise;\nexports.addPraise = addPraise;\nexports.updateCatalog = updateCatalog;\nexports.updateChapter = updateChapter;\nexports.delChapter = delChapter;\nexports.delCatalog = delCatalog;\nexports.getMyCatalogList = getMyCatalogList;\nexports._reject = _config._reject;\nexports._rejectObj = _config._rejectObj;\n\n/***/ }),\n\n/***/ \"YW4o\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function($) {(function (factory) {\n    if (typeof window.define === 'function') {\n        if (window.define.amd) {\n            // AMD模式\n            window.define('wangEditor', [\"jquery\"], factory);\n        } else if (window.define.cmd) {\n            // CMD模式\n            window.define(function (require, exports, module) {\n                return factory;\n            });\n        } else {\n            // 全局模式\n            factory(window.jQuery);\n        }\n    } else if (typeof module === \"object\" && typeof module.exports === \"object\") {\n        // commonjs\n        module.exports = factory($);\n    } else {\n        // 全局模式\n        factory($);\n    }\n})(function($){\n'use strict';\n    \n// 定义扩展函数\nvar _e = function (fn) {\n    var E = window.wangEditor;\n    if (E) {\n        // 执行传入的函数\n        fn(E, $);\n    }\n};\n// 定义构造函数\n(function (window, $) {\n    if (window.wangEditor) {\n        // 重复引用\n        alert('一个页面不能重复引用 wangEditor.js 或 wangEditor.min.js ！！！');\n        return;\n    }\n\n    // 编辑器（整体）构造函数\n    var E = function (elem) {\n        // 支持 id 和 element 两种形式\n        if (typeof elem === 'string') {\n            elem = '#' + elem;\n        }\n\n        // ---------------获取基本节点------------------\n        var $elem = $(elem);\n        if ($elem.length !== 1) {\n            return;\n        }\n        var nodeName = $elem[0].nodeName;\n        if (nodeName !== 'TEXTAREA' && nodeName !== 'DIV') {\n            // 只能是 textarea 和 div ，其他类型的元素不行\n            return;   \n        }\n        this.valueNodeName = nodeName.toLowerCase();\n        this.$valueContainer = $elem;\n\n        // 记录 elem 的 prev 和 parent（最后渲染 editor 要用到）\n        this.$prev = $elem.prev();\n        this.$parent = $elem.parent();\n\n        // ------------------初始化------------------\n        this.init();\n    };\n\n    E.fn = E.prototype;\n\n    E.$body = $('body');\n    E.$document = $(document);\n    E.$window = $(window);\n    E.userAgent = navigator.userAgent;\n    E.getComputedStyle = window.getComputedStyle;\n    E.w3cRange = typeof document.createRange === 'function';\n    E.hostname = location.hostname.toLowerCase();\n    E.websiteHost = 'wangeditor.github.io|www.wangeditor.com|wangeditor.coding.me';\n    E.isOnWebsite = E.websiteHost.indexOf(E.hostname) >= 0;\n    E.docsite = 'http://www.kancloud.cn/wangfupeng/wangeditor2/113961';\n\n    // 暴露给全局对象\n    window.wangEditor = E;\n\n    // 注册 plugin 事件，用于用户自定义插件\n    // 用户在引用 wangEditor.js 之后，还可以通过 E.plugin() 注入自定义函数，\n    // 该函数将会在 editor.create() 方法的最后一步执行\n    E.plugin = function (fn) {\n        if (!E._plugins) {\n            E._plugins = [];\n        }\n\n        if (typeof fn === 'function') {\n            E._plugins.push(fn);\n        }\n    };\n})(window, $);\n// editor 绑定事件 - init\n_e(function (E, $) {\n\n    E.fn.init = function () {\n\n        // 初始化 editor 默认配置\n        this.initDefaultConfig();\n\n        // 增加container\n        this.addEditorContainer();\n\n        // 增加编辑区域\n        this.addTxt();\n\n        // 增加menuContainer\n        this.addMenuContainer();\n\n        // 初始化菜单集合\n        this.menus = {};\n\n        // 初始化commandHooks\n        this.commandHooks();\n\n    };\n});\n// editor api\n_e(function (E, $) {\n\n    // 预定义 ready 事件\n    E.fn.ready = function (fn) {\n\n        if (!this.readyFns) {\n            this.readyFns = [];\n        }\n\n        this.readyFns.push(fn);\n    };\n\n    // 处理ready事件\n    E.fn.readyHeadler = function () {\n        var fns = this.readyFns;\n\n        while (fns.length) {\n            fns.shift().call(this);\n        }\n    };\n\n    // 更新内容到 $valueContainer\n    E.fn.updateValue = function () {\n        var editor = this;\n        var $valueContainer = editor.$valueContainer;\n        var $txt = editor.txt.$txt;\n\n        if ($valueContainer === $txt) {\n            // 传入生成编辑器的div，即是编辑区域\n            return;\n        }\n\n        var value = $txt.html();\n        $valueContainer.val(value);\n    };\n\n    // 获取初始化的内容\n    E.fn.getInitValue = function () {\n        var editor = this;\n        var $valueContainer = editor.$valueContainer;\n        var currentValue = '';\n        var nodeName = editor.valueNodeName;\n        if (nodeName === 'div') {\n            currentValue = $valueContainer.html();\n        } else if (nodeName === 'textarea') {\n            currentValue = $valueContainer.val();\n        }\n\n        return currentValue;\n    };\n\n    // 触发菜单updatestyle\n    E.fn.updateMenuStyle = function () {\n        var menus = this.menus;\n\n        $.each(menus, function (k, menu) {\n            menu.updateSelected();\n        });\n    };\n\n    // 除了传入的 menuIds，其他全部启用\n    E.fn.enableMenusExcept = function (menuIds) {\n        if (this._disabled) {\n            // 编辑器处于禁用状态，则不执行改操作\n            return;\n        }\n        // menuIds参数：支持数组和字符串\n        menuIds = menuIds || [];\n        if (typeof menuIds === 'string') {\n            menuIds = [menuIds];\n        }\n\n        $.each(this.menus, function (k, menu) {\n            if (menuIds.indexOf(k) >= 0) {\n                return;\n            }\n            menu.disabled(false);\n        });\n    };\n\n    // 除了传入的 menuIds，其他全部禁用\n    E.fn.disableMenusExcept = function (menuIds) {\n        if (this._disabled) {\n            // 编辑器处于禁用状态，则不执行改操作\n            return;\n        }\n        // menuIds参数：支持数组和字符串\n        menuIds = menuIds || [];\n        if (typeof menuIds === 'string') {\n            menuIds = [menuIds];\n        }\n\n        $.each(this.menus, function (k, menu) {\n            if (menuIds.indexOf(k) >= 0) {\n                return;\n            }\n            menu.disabled(true);\n        });\n    };\n\n    // 隐藏所有 dropPanel droplist modal\n    E.fn.hideDropPanelAndModal = function () {\n        var menus = this.menus;\n\n        $.each(menus, function (k, menu) {\n            var m = menu.dropPanel || menu.dropList || menu.modal;\n            if (m && m.hide) {\n                m.hide();\n            }\n        });\n    };\n});\n// selection range API\n_e(function (E, $) {\n\n    // 用到 w3c range 的函数，如果检测到浏览器不支持 w3c range，则赋值为空函数\n    var ieRange = !E.w3cRange;\n    function emptyFn() {}\n\n    // 设置或读取当前的range\n    E.fn.currentRange = function (cr){\n        if (cr) {\n            this._rangeData = cr;\n        } else {\n            return this._rangeData;\n        }\n    };\n\n    // 将当前选区折叠\n    E.fn.collapseRange = function (range, opt) {\n        // opt 参数说明：'start'-折叠到开始; 'end'-折叠到结束\n        opt = opt || 'end';\n        opt = opt === 'start' ? true : false;\n\n        range = range || this.currentRange();\n        \n        if (range) {\n            // 合并，保存\n            range.collapse(opt);\n            this.currentRange(range);\n        }\n    };\n\n    // 获取选区的文字\n    E.fn.getRangeText = ieRange ? emptyFn : function (range) {\n        range = range || this.currentRange();\n        if (!range) {\n            return;\n        }\n        return range.toString();\n    };\n\n    // 获取选区对应的DOM对象\n    E.fn.getRangeElem = ieRange ? emptyFn : function (range) {\n        range = range || this.currentRange();\n        var dom = range.commonAncestorContainer;\n\n        if (dom.nodeType === 1) {\n            return dom;\n        } else {\n            return dom.parentNode;\n        }\n    };\n\n    // 选区内容是否为空？\n    E.fn.isRangeEmpty = ieRange ? emptyFn : function (range) {\n        range = range || this.currentRange();\n\n        if (range && range.startContainer) {\n            if (range.startContainer === range.endContainer) {\n                if (range.startOffset === range.endOffset) {\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    };\n\n    // 保存选区数据\n    E.fn.saveSelection = ieRange ? emptyFn : function (range) {\n        var self = this,\n            _parentElem,\n            selection,\n            txt = self.txt.$txt.get(0);\n\n        if (range) {\n            _parentElem = range.commonAncestorContainer;\n        } else {\n            selection = document.getSelection();\n            if (selection.getRangeAt && selection.rangeCount) {\n                range = document.getSelection().getRangeAt(0);\n                _parentElem = range.commonAncestorContainer;\n            }\n        }\n        // 确定父元素一定要包含在编辑器区域内\n        if (_parentElem && ($.contains(txt, _parentElem) || txt === _parentElem) ) {\n            // 保存选择区域\n            self.currentRange(range);\n        }\n    };\n\n    // 恢复选中区域\n    E.fn.restoreSelection = ieRange ? emptyFn : function (range) {\n        var selection;\n\n        range = range || this.currentRange();\n\n        if (!range) {\n            return;\n        }\n\n        // 使用 try catch 来防止 IE 某些情况报错\n        try {\n            selection = document.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(range);\n        } catch (ex) {\n            E.error('执行 editor.restoreSelection 时，IE可能会有异常，不影响使用');\n        }\n    };\n\n    // 根据elem恢复选区\n    E.fn.restoreSelectionByElem = ieRange ? emptyFn : function (elem, opt) {\n        // opt参数说明：'start'-折叠到开始，'end'-折叠到结束，'all'-全部选中\n        if (!elem) {\n            return;\n        }\n        opt = opt || 'end'; // 默认为折叠到结束\n\n        // 根据elem获取选区\n        this.setRangeByElem(elem);\n\n        // 根据 opt 折叠选区\n        if (opt === 'start') {\n            this.collapseRange(this.currentRange(), 'start');\n        }\n        if (opt === 'end') {\n            this.collapseRange(this.currentRange(), 'end');\n        }\n        \n        // 恢复选区\n        this.restoreSelection();\n    };\n\n    // 初始化选区\n    E.fn.initSelection = ieRange ? emptyFn : function () {\n        var editor = this;\n        if( editor.currentRange() ){\n            //如果currentRange有值，则不用再初始化\n            return;\n        }\n\n        var range;\n        var $txt = editor.txt.$txt;\n        var $firstChild = $txt.children().first();\n        \n        if ($firstChild.length) {\n            editor.restoreSelectionByElem($firstChild.get(0));\n        }\n    };\n\n    // 根据元素创建选区\n    E.fn.setRangeByElem = ieRange ? emptyFn : function (elem) {\n        var editor = this;\n        var txtElem = editor.txt.$txt.get(0);\n        if (!elem || !$.contains(txtElem, elem)) {\n            return;\n        }\n\n        // 找到elem的第一个 textNode 和 最后一个 textNode\n        var firstTextNode = elem.firstChild;\n        while (firstTextNode) {\n            if (firstTextNode.nodeType === 3) {\n                break;\n            }\n            // 继续向下\n            firstTextNode = firstTextNode.firstChild;\n        }\n        var lastTextNode = elem.lastChild;\n        while (lastTextNode) {\n            if (lastTextNode.nodeType === 3) {\n                break;\n            }\n            // 继续向下\n            lastTextNode = lastTextNode.lastChild;\n        }\n        \n        var range = document.createRange();\n        if (firstTextNode && lastTextNode) {\n            // 说明 elem 有内容，能取到子元素\n            range.setStart(firstTextNode, 0);\n            range.setEnd(lastTextNode, lastTextNode.textContent.length);\n        } else {\n            // 说明 elem 无内容\n            range.setStart(elem, 0);\n            range.setEnd(elem, 0);\n        }\n\n        // 保存选区\n        editor.saveSelection(range);\n    };\n});\n// selection range API - IE8及以下\n_e(function (E, $) {\n\n    if (E.w3cRange) {\n        // 说明支持 W3C 的range方法\n        return;\n    }\n\n    // -----------------IE8时，需要重写以下方法-------------------\n\n    // 获取选区的文字\n    E.fn.getRangeText = function (range) {\n        range = range || this.currentRange();\n        if (!range) {\n            return;\n        }\n        return range.text;\n    };\n\n    // 获取选区对应的DOM对象\n    E.fn.getRangeElem = function (range) {\n        range = range || this.currentRange();\n        if (!range) {\n            return;\n        }\n        var dom = range.parentElement();\n\n        if (dom.nodeType === 1) {\n            return dom;\n        } else {\n            return dom.parentNode;\n        }\n    };\n\n    // 选区内容是否为空？\n    E.fn.isRangeEmpty = function (range) {\n        range = range || this.currentRange();\n\n        if (range && range.text) {\n            return false;\n        }\n\n        return true;\n    };\n\n    // 保存选区数据\n    E.fn.saveSelection = function (range) {\n        var self = this,\n            _parentElem,\n            selection,\n            txt = self.txt.$txt.get(0);\n\n        if (range) {\n            _parentElem = range.parentElement();\n        } else {\n            range = document.selection.createRange();\n            if(typeof range.parentElement === 'undefined'){\n                //IE6、7中，insertImage后会执行此处\n                //由于找不到range.parentElement，所以干脆将_parentElem赋值为null\n                _parentElem = null;\n            }else{\n                _parentElem = range.parentElement();\n            }\n        }\n\n        // 确定父元素一定要包含在编辑器区域内\n        if (_parentElem && ($.contains(txt, _parentElem) || txt === _parentElem) ) {\n            // 保存选择区域\n            self.currentRange(range);\n        }\n    };\n\n    // 恢复选中区域\n    E.fn.restoreSelection = function (currentRange){\n        var editor = this,\n            selection,\n            range;\n\n        currentRange = currentRange || editor.currentRange();\n        if(!currentRange){\n            return;\n        }\n\n        range = document.selection.createRange();\n        try {\n            // 此处，plupload上传上传图片时，IE8-会报一个『参数无效』的错误\n            range.setEndPoint('EndToEnd', currentRange);\n        } catch (ex) {\n\n        }\n        \n        if(currentRange.text.length === 0){\n            try {\n                // IE8 插入表情会报错\n                range.collapse(false);\n            } catch (ex) {\n                \n            }\n            \n        }else{\n            range.setEndPoint('StartToStart', currentRange);\n        }\n        range.select();\n    };\n});\n// editor command hooks\n_e(function (E, $) {\n    \n    E.fn.commandHooks = function () {\n        var editor = this;\n        var commandHooks = {};\n        \n        // insertHtml\n        commandHooks.insertHtml = function (html) {\n            var $elem = $(html);\n            var rangeElem = editor.getRangeElem();\n            var targetElem;\n            \n            targetElem = editor.getLegalTags(rangeElem);\n            if (!targetElem) {\n                return;\n            }\n\n            $(targetElem).after($elem);\n        };\n\n        // 保存到对象\n        editor.commandHooks = commandHooks;\n    };\n});\n// editor command API\n_e(function (E, $) {\n\n    // 基本命令\n    E.fn.command = function (e, commandName, commandValue, callback) {\n        var editor = this;\n        var hooks;\n        \n        function commandFn() {\n            if (!commandName) {\n                return;\n            }\n            if (editor.queryCommandSupported(commandName)) {\n                // 默认命令\n                document.execCommand(commandName, false, commandValue);\n            } else {\n                // hooks 命令\n                hooks = editor.commandHooks;\n                if (commandName in hooks) {\n                    hooks[commandName](commandValue);\n                }\n            }\n        }\n\n        this.customCommand(e, commandFn, callback);\n    };\n\n    // 针对一个elem对象执行基础命令\n    E.fn.commandForElem = function (elemOpt, e, commandName, commandValue, callback) {\n        // 取得查询elem的查询条件和验证函数\n        var selector;\n        var check;\n        if (typeof elemOpt === 'string') {\n            selector = elemOpt;\n        } else {\n            selector = elemOpt.selector;\n            check = elemOpt.check;\n        }\n\n        // 查询elem\n        var rangeElem = this.getRangeElem();\n        rangeElem = this.getSelfOrParentByName(rangeElem, selector, check);\n\n        // 根据elem设置range\n        if (rangeElem) {\n            this.setRangeByElem(rangeElem);\n        }\n\n        // 然后执行基础命令\n        this.command(e, commandName, commandValue, callback);\n    };\n\n    // 自定义命令\n    E.fn.customCommand = function (e, commandFn, callback) {\n        var editor = this;\n        var range = editor.currentRange();\n\n        if (!range) {\n            // 目前没有选区，则无法执行命令\n            e && e.preventDefault();\n            return;\n        }\n        // 记录内容，以便撤销（执行命令之前就要记录）\n        editor.undoRecord();\n\n        // 恢复选区（有 range 参数）\n        this.restoreSelection(range);\n\n        // 执行命令事件\n        commandFn.call(editor);\n\n        // 保存选区（无参数，要从浏览器直接获取range信息）\n        this.saveSelection();\n        // 重新恢复选区（无参数，要取得刚刚从浏览器得到的range信息）\n        this.restoreSelection();\n\n        // 执行 callback\n        if (callback && typeof callback === 'function') {\n            callback.call(editor);\n        }\n\n        // 最后插入空行\n        editor.txt.insertEmptyP();\n\n        // 包裹暴露的img和text\n        editor.txt.wrapImgAndText();\n\n        // 更新内容\n        editor.updateValue();\n\n        // 更新菜单样式\n        editor.updateMenuStyle();\n\n        // 隐藏 dropPanel dropList modal  设置 200ms 间隔\n        function hidePanelAndModal() {\n            editor.hideDropPanelAndModal();\n        } \n        setTimeout(hidePanelAndModal, 200);\n\n        if (e) {\n            e.preventDefault();\n        }\n    };\n\n    // 封装 document.queryCommandValue 函数\n    // IE8 直接执行偶尔会报错，因此直接用 try catch 封装一下\n    E.fn.queryCommandValue = function (commandName) {\n        var result = '';\n        try {\n            result = document.queryCommandValue(commandName);\n        } catch (ex) {\n\n        }\n        return result;\n    };\n\n    // 封装 document.queryCommandState 函数\n    // IE8 直接执行偶尔会报错，因此直接用 try catch 封装一下\n    E.fn.queryCommandState = function (commandName) {\n        var result = false;\n        try {\n            result = document.queryCommandState(commandName);\n        } catch (ex) {\n\n        }\n        return result;\n    };\n\n    // 封装 document.queryCommandSupported 函数\n    E.fn.queryCommandSupported = function (commandName) {\n        var result = false;\n        try {\n            result = document.queryCommandSupported(commandName);\n        } catch (ex) {\n\n        }\n        return result;\n    };\n});\n// dom selector\n_e(function (E, $) {\n\n    var matchesSelector;\n\n    // matchesSelector hook\n    function _matchesSelectorForIE(selector) {\n        var elem = this;\n        var $elems = $(selector);\n        var result = false;\n\n        // 用jquery查找 selector 所有对象，如果其中有一个和传入 elem 相同，则证明 elem 符合 selector\n        $elems.each(function () {\n            if (this === elem) {\n                result = true;\n                return false;\n            }\n        });\n\n        return result;\n    }\n\n    // 从当前的elem，往上去查找合法标签 如 p head table blockquote ul ol 等\n    E.fn.getLegalTags = function (elem) {\n        var legalTags = this.config.legalTags;\n        if (!legalTags) {\n            E.error('配置项中缺少 legalTags 的配置');\n            return;\n        }\n        return this.getSelfOrParentByName(elem, legalTags);\n    };\n\n    // 根据条件，查询自身或者父元素，符合即返回\n    E.fn.getSelfOrParentByName = function (elem, selector, check) {\n\n        if (!elem || !selector) {\n            return;\n        }\n\n        if (!matchesSelector) {\n            // 定义 matchesSelector 函数\n            matchesSelector = elem.webkitMatchesSelector || \n                              elem.mozMatchesSelector ||\n                              elem.oMatchesSelector || \n                              elem.matchesSelector;\n        }\n        if (!matchesSelector) {\n            // 如果浏览器本身不支持 matchesSelector 则使用自定义的hook\n            matchesSelector = _matchesSelectorForIE;\n        }\n\n        var txt = this.txt.$txt.get(0);\n\n        while (elem && txt !== elem && $.contains(txt, elem)) {\n            if (matchesSelector.call(elem, selector)) {\n                // 符合 selector 查询条件\n\n                if (!check) {\n                    // 没有 check 验证函数，直接返回即可\n                    return elem;\n                }\n\n                if (check(elem)) {\n                    // 如果有 check 验证函数，还需 check 函数的确认\n                    return elem;\n                }\n            }\n\n            // 如果上一步没经过验证，则将跳转到父元素\n            elem = elem.parentNode;\n        }\n\n        return;\n    };\n});\n// undo redo\n_e(function (E, $) {\n\n    var length = 20;  // 缓存的最大长度\n    function _getRedoList(editor) {\n        if (editor._redoList == null) {\n            editor._redoList = [];\n        }\n        return editor._redoList;\n    }\n    function _getUndoList(editor) {\n        if (editor._undoList == null) {\n            editor._undoList = [];\n        }\n        return editor._undoList;\n    }\n\n    // 数据处理\n    function _handle(editor, data, type) {\n        // var range = data.range;\n        // var range2 = range.cloneRange && range.cloneRange();\n        var val = data.val;\n        var html = editor.txt.$txt.html();\n\n        if(val == null) {\n            return;\n        }\n\n        if (val === html) {\n            if (type === 'redo') { \n                editor.redo();\n                return;\n            } else if (type === 'undo') {\n                editor.undo();\n                return;\n            } else {\n                return;\n            }\n        }\n\n        // 保存数据\n        editor.txt.$txt.html(val);\n        // 更新数据到textarea（有必要的话）\n        editor.updateValue();\n\n        // onchange 事件\n        if (editor.onchange && typeof editor.onchange === 'function') {\n            editor.onchange.call(editor);\n        }\n\n        // ?????\n        // 注释：$txt 被重新赋值之后，range会被重置，cloneRange() 也不好使\n        // // 重置选区\n        // if (range2) {\n        //     editor.restoreSelection(range2);\n        // }\n    }\n\n    // 记录\n    E.fn.undoRecord = function () {\n        var editor = this;\n        var $txt = editor.txt.$txt;\n        var val = $txt.html();\n        var undoList = _getUndoList(editor);\n        var redoList = _getRedoList(editor);\n        var currentVal = undoList.length ? undoList[0] : '';\n\n        if (val === currentVal.val) {\n            return;\n        }\n\n        // 清空 redolist\n        if (redoList.length) {\n            redoList = [];\n        }\n\n        // 添加数据到 undoList\n        undoList.unshift({\n            range: editor.currentRange(),  // 将当前的range也记录下\n            val: val\n        });\n\n        // 限制 undoList 长度\n        if (undoList.length > length) {\n            undoList.pop();\n        }\n    };\n\n    // undo 操作\n    E.fn.undo = function () {\n        var editor = this;\n        var undoList = _getUndoList(editor);\n        var redoList = _getRedoList(editor);\n\n        if (!undoList.length) {\n            return;\n        }\n\n        // 取出 undolist 第一个值，加入 redolist\n        var data = undoList.shift();\n        redoList.unshift(data);\n\n        // 并修改编辑器的内容\n        _handle(this, data, 'undo');\n    };\n\n    // redo 操作\n    E.fn.redo = function () {\n        var editor = this;\n        var undoList = _getUndoList(editor);\n        var redoList = _getRedoList(editor);\n        if (!redoList.length) {\n            return;\n        }\n\n        // 取出 redolist 第一个值，加入 undolist\n        var data = redoList.shift();\n        undoList.unshift(data);\n\n        // 并修改编辑器的内容\n        _handle(this, data, 'redo');\n    };\n});\n// 暴露给用户的 API - create|disable|enable|destroy|undestroy|clear\n_e(function (E, $) {\n\n    // 创建编辑器\n    E.fn.create = function () {\n        var editor = this;\n\n        // 检查 E.$body 是否有值\n        // 如果在 body 之前引用了 js 文件，body 尚未加载，可能没有值\n        if (!E.$body || E.$body.length === 0) {\n            E.$body = $('body');\n            E.$document = $(document);\n            E.$window = $(window);\n        }\n\n        // 执行 addMenus 之前：\n        // 1. 允许用户修改 editor.UI 自定义配置UI\n        // 2. 允许用户通过修改 editor.menus 来自定义配置菜单\n        // 因此要在 create 时执行，而不是 init           \n        editor.addMenus();\n\n        // 渲染\n        editor.renderMenus();\n        editor.renderMenuContainer();\n        editor.renderTxt();\n        editor.renderEditorContainer();\n\n        // 绑定事件\n        editor.eventMenus();\n        editor.eventMenuContainer();\n        editor.eventTxt();\n\n        // 处理ready事件\n        editor.readyHeadler();\n\n        // 初始化选区\n        editor.initSelection();\n\n        // $txt 快捷方式\n        editor.$txt = editor.txt.$txt;\n\n        // 执行用户自定义事件，通过 E.ready() 添加\n        var _plugins = E._plugins;\n        if (_plugins && _plugins.length) {\n            $.each(_plugins, function (k, val) {\n                val.call(editor);\n            });\n        }\n    };\n\n    // 禁用编辑器\n    E.fn.disable = function () {\n        this.txt.$txt.removeAttr('contenteditable');\n        this.disableMenusExcept();\n\n        // 先禁用，再记录状态\n        this._disabled = true;\n    };\n    // 启用编辑器\n    E.fn.enable = function () {\n        // 先解除状态记录，再启用\n        this._disabled = false;\n        this.txt.$txt.attr('contenteditable', 'true');\n        this.enableMenusExcept();\n    };\n    // 销毁编辑器\n    E.fn.destroy = function () {\n        var self = this;\n        var $valueContainer = self.$valueContainer;\n        var $editorContainer = self.$editorContainer;\n        var valueNodeName = self.valueNodeName;\n\n        if (valueNodeName === 'div') {\n            // div 生成的编辑器\n            $valueContainer.removeAttr('contenteditable');\n            $editorContainer.after($valueContainer);\n            $editorContainer.hide();\n        } else {\n            // textarea 生成的编辑器\n            $valueContainer.show();\n            $editorContainer.hide();\n        }\n    };\n    // 撤销 销毁编辑器\n    E.fn.undestroy = function () {\n        var self = this;\n        var $valueContainer = self.$valueContainer;\n        var $editorContainer = self.$editorContainer;\n        var $menuContainer = self.menuContainer.$menuContainer;\n        var valueNodeName = self.valueNodeName;\n\n        if (valueNodeName === 'div') {\n            // div 生成的编辑器\n            $valueContainer.attr('contenteditable', 'true');\n            $menuContainer.after($valueContainer);\n            $editorContainer.show();\n        } else {\n            // textarea 生成的编辑器\n            $valueContainer.hide();\n            $editorContainer.show();\n        }\n    };\n    // 清空内容的快捷方式\n    E.fn.clear = function () {\n        var editor = this;\n        var $txt = editor.txt.$txt;\n        $txt.html('<p><br></p>');\n        editor.restoreSelectionByElem($txt.find('p').get(0));\n    };\n});\n// menuContainer 构造函数\n_e(function (E, $) {\n\n    // 定义构造函数\n    var MenuContainer = function (editor) {\n        this.editor = editor;\n        this.init();\n    };\n\n    MenuContainer.fn = MenuContainer.prototype;\n\n    // 暴露给 E 即 window.wangEditor\n    E.MenuContainer = MenuContainer;\n});\n// MenuContainer.fn bind fn\n_e(function (E, $) {\n\n    var MenuContainer = E.MenuContainer;\n\n    // 初始化\n    MenuContainer.fn.init = function () {\n        var self = this;\n        var $menuContainer = $('<div class=\"wangEditor-menu-container clearfix\"></div>');\n\n        self.$menuContainer = $menuContainer;\n\n        // change shadow\n        self.changeShadow();\n    };\n\n    // 编辑区域滚动时，增加shadow\n    MenuContainer.fn.changeShadow = function () {\n        var $menuContainer = this.$menuContainer;\n        var editor = this.editor;\n        var $txt = editor.txt.$txt;\n\n        $txt.on('scroll', function () {\n            if ($txt.scrollTop() > 10) {\n                $menuContainer.addClass('wangEditor-menu-shadow');\n            } else {\n                $menuContainer.removeClass('wangEditor-menu-shadow');\n            }\n        });\n    };\n});\n// MenuContainer.fn API\n_e(function (E, $) {\n\n    var MenuContainer = E.MenuContainer;\n\n    MenuContainer.fn.render = function () {\n        var $menuContainer = this.$menuContainer;\n        var $editorContainer = this.editor.$editorContainer;\n\n        $editorContainer.append($menuContainer);\n    };\n    \n    // 获取菜单栏的高度\n    MenuContainer.fn.height = function () {\n        var $menuContainer = this.$menuContainer;\n        return $menuContainer.height();\n    };\n\n    // 添加菜单\n    MenuContainer.fn.appendMenu = function (groupIdx, menu) {\n        // 判断是否需要新增一个菜单组\n        this._addGroup(groupIdx);\n        // 增加菜单（返回 $menuItem）\n        return this._addOneMenu(menu);\n    };\n    MenuContainer.fn._addGroup = function (groupIdx) {\n        var $menuContainer = this.$menuContainer;\n        var $menuGroup;\n        if (!this.$currentGroup || this.currentGroupIdx !== groupIdx) {\n            $menuGroup = $('<div class=\"menu-group clearfix\"></div>');\n            $menuContainer.append($menuGroup);\n\n            this.$currentGroup = $menuGroup;\n            this.currentGroupIdx = groupIdx;\n        }\n    };\n    MenuContainer.fn._addOneMenu = function (menu) {\n        var $menuNormal = menu.$domNormal;\n        var $menuSelected = menu.$domSelected;\n\n        var $menuGroup = this.$currentGroup;\n        var $item = $('<div class=\"menu-item clearfix\"></div>');\n            $item.attr('id', menu._id);\n        $menuSelected.hide();\n        $item.append($menuNormal).append($menuSelected);\n        $menuGroup.append($item);\n\n        return $item;\n    };\n});\n// menu 构造函数\n_e(function (E, $) {\n\n    // 定义构造函数\n    var Menu = function (opt) {\n        this.editor = opt.editor;\n        this.id = opt.id;\n        this._id = opt._id;\n        this.title = opt.title;\n        this.$domNormal = opt.$domNormal;\n        this.$domSelected = opt.$domSelected || opt.$domNormal;\n\n        // document.execCommand 的参数\n        this.commandName = opt.commandName;\n        this.commandValue = opt.commandValue;\n        this.commandNameSelected = opt.commandNameSelected || opt.commandName;\n        this.commandValueSelected = opt.commandValueSelected || opt.commandValue;\n    };\n\n    Menu.fn = Menu.prototype;\n\n    // 暴露给 E 即 window.wangEditor\n    E.Menu = Menu;\n});\n// Menu.fn 初始化绑定的事件\n_e(function (E, $) {\n\n    var Menu = E.Menu;\n\n    // 初始化UI\n    Menu.fn.initUI = function () {\n        var editor = this.editor;\n        var uiConfig = editor.UI.menus;\n        var menuId = this.id;\n        var menuUI = uiConfig[menuId];\n\n        if (this.$domNormal && this.$domSelected) {\n            // 自定义的菜单中，已经传入了 $dom 无需从配置文件中查找生成\n            return;\n        }\n\n        if (menuUI == null) {\n            E.warn('editor.UI配置中，没有菜单 \"' + menuId + '\" 的UI配置，只能取默认值');\n            \n            // 必须写成 uiConfig['default'];\n            // 写成 uiConfig.default IE8会报错\n            menuUI = uiConfig['default'];\n        }\n\n        // 正常状态\n        this.$domNormal = $(menuUI.normal);\n\n        // 选中状态\n        if (/^\\./.test(menuUI.selected)) {\n            // 增加一个样式\n            this.$domSelected = this.$domNormal.clone().addClass(menuUI.selected.slice(1));\n        } else {\n            // 一个新的dom对象\n            this.$domSelected = $(menuUI.selected);\n        }\n    };\n});\n// Menu.fn API\n_e(function (E, $) {\n\n    var Menu = E.Menu;\n\n    // 渲染菜单\n    Menu.fn.render = function (groupIdx) {\n        // 渲染UI\n        this.initUI();\n        \n        var editor = this.editor;\n        var menuContainer = editor.menuContainer;\n        var $menuItem = menuContainer.appendMenu(groupIdx, this);\n        var onRender = this.onRender;\n\n        // 渲染tip\n        this._renderTip($menuItem);\n\n        // 执行 onRender 函数\n        if (onRender && typeof onRender === 'function') {\n            onRender.call(this);\n        }\n    };\n    Menu.fn._renderTip = function ($menuItem) {\n        var self = this;\n        var editor = self.editor;\n        var title = self.title;\n        var $tip = $('<div class=\"menu-tip\"></div>');\n        var $triangle = $('<i class=\"tip-triangle\"></i>'); // 小三角\n\n        // 计算 tip 宽度\n        var $tempDiv;\n        if (!self.tipWidth) {\n            // 设置一个纯透明的 p（absolute;top:-10000px;不会显示在内容区域）\n            // 内容赋值为 title ，为了计算tip宽度\n            $tempDiv = $('<p style=\"opacity:0; filter:Alpha(opacity=0); position:absolute;top:-10000px;\">' + title + '</p>');\n            // 先添加到body，计算完再 remove\n            E.$body.append($tempDiv);\n            editor.ready(function () {\n                var editor = this;\n                var titleWidth = $tempDiv.outerWidth() + 5; // 多出 5px 的冗余\n                var currentWidth = $tip.outerWidth();\n                var currentMarginLeft = parseFloat($tip.css('margin-left'), 10);\n                // 计算完，拿到数据，则弃用\n                $tempDiv.remove();\n                $tempDiv = null;\n\n                // 重新设置样式\n                $tip.css({\n                    width: titleWidth,\n                    'margin-left': currentMarginLeft + (currentWidth - titleWidth)/2\n                });\n\n                // 存储\n                self.tipWidth = titleWidth;\n            });\n        }\n\n        $tip.append($triangle);\n        $tip.append(title);\n        $menuItem.append($tip);\n\n        function show() {\n            $tip.show();\n        }\n        function hide() {\n            $tip.hide();\n        }\n\n        var timeoutId;\n        $menuItem.find('a').on('mouseenter', function (e) {\n            if (!self.active() && !self.disabled()) {\n                timeoutId = setTimeout(show, 200);\n            }\n        }).on('mouseleave', function (e) {\n            timeoutId && clearTimeout(timeoutId);\n            hide();\n        }).on('click', hide);\n    };\n\n    // 绑定事件\n    Menu.fn.bindEvent = function () {\n        var self = this;\n\n        var $domNormal = self.$domNormal;\n        var $domSelected = self.$domSelected;\n\n        // 试图获取该菜单定义的事件（未selected），没有则自己定义\n        var clickEvent = self.clickEvent;\n        if (self.clickEventCustom) {\n            self.clickEventCustom();\n            return;\n        }\n        if (!clickEvent) {\n            clickEvent = function (e) {\n                // -----------dropPanel dropList modal-----------\n                var dropObj = self.dropPanel || self.dropList || self.modal;\n                if (dropObj && dropObj.show) {\n                    if (dropObj.isShowing) {\n                        dropObj.hide();\n                    } else {\n                        dropObj.show();\n                    }\n                    return;\n                }\n\n                // -----------command-----------\n                var editor = self.editor;\n                var commandName;\n                var commandValue;\n\n                var selected = self.selected;\n                if (selected) {\n                    commandName = self.commandNameSelected;\n                    commandValue = self.commandValueSelected;\n                } else {\n                    commandName = self.commandName;\n                    commandValue = self.commandValue;\n                }\n\n                if (commandName) {\n                    // 执行命令\n                    editor.command(e, commandName, commandValue);\n                } else {\n                    // 提示\n                    E.warn('菜单 \"' + self.id + '\" 未定义click事件');\n                    e.preventDefault();\n                }\n            };\n        }\n        // 获取菜单定义的selected情况下的点击事件\n        var clickEventSelected = self.clickEventSelected || clickEvent;\n\n        // 将事件绑定到菜单dom上\n        $domNormal.click(function (e) {\n            if (!self.disabled()) {\n                clickEvent.call(self, e);\n                self.updateSelected();\n            }\n            e.preventDefault();\n        });\n        $domSelected.click(function (e) {\n            if (!self.disabled()) {\n                clickEventSelected.call(self, e);\n                self.updateSelected();\n            }\n            e.preventDefault();\n        });\n    };\n\n    // 更新选中状态\n    Menu.fn.updateSelected = function () {\n        var self = this;\n        var editor = self.editor;\n\n        // 试图获取用户自定义的判断事件\n        var updateSelectedEvent = self.updateSelectedEvent;\n        if (!updateSelectedEvent) {\n            // 用户未自定义，则设置默认值\n            updateSelectedEvent = function () {\n                var self = this;\n                var editor = self.editor;\n                var commandName = self.commandName;\n                var commandValue = self.commandValue;\n\n                if (commandValue) {\n                    if (editor.queryCommandValue(commandName).toLowerCase() === commandValue.toLowerCase()) {\n                        return true;\n                    }\n                } else if (editor.queryCommandState(commandName)) {\n                    return true;\n                }\n\n                return false;\n            };\n        }\n\n        // 获取结果\n        var result = updateSelectedEvent.call(self);\n        result = !!result;\n\n        // 存储结果、显示效果\n        self.changeSelectedState(result);\n    };\n\n    // 切换选中状态、显示效果\n    Menu.fn.changeSelectedState = function (state) {\n        var self = this;\n        var selected = self.selected;\n\n        if (state != null && typeof state === 'boolean') {\n            if (selected === state) {\n                // 计算结果和当前的状态一样\n                return;\n            }\n            // 存储结果\n            self.selected = state;\n\n            // 切换菜单的显示\n            if (state) {\n                // 选中\n                self.$domNormal.hide();\n                self.$domSelected.show();\n            } else {\n                // 未选中\n                self.$domNormal.show();\n                self.$domSelected.hide();\n            }\n        } // if\n    };\n\n    // 点击菜单，显示了 dropPanel modal 时，菜单的状态 \n    Menu.fn.active = function (active) {\n        if (active == null) {\n            return this._activeState;\n        }\n        this._activeState = active;\n    };\n    Menu.fn.activeStyle = function (active) {\n        var selected = this.selected;\n        var $dom = this.$domNormal;\n        var $domSelected = this.$domSelected;\n\n        if (active) {\n            $dom.addClass('active');\n            $domSelected.addClass('active');\n        } else {\n            $dom.removeClass('active');\n            $domSelected.removeClass('active');\n        }\n\n        // 记录状态 （ menu hover 时会取状态用 ）\n        this.active(active);\n    };\n\n    // 菜单的启用和禁用\n    Menu.fn.disabled = function (opt) {\n        // 参数为空，取值\n        if (opt == null) {\n            return !!this._disabled;\n        }\n\n        if (this._disabled === opt) {\n            // 要设置的参数值和当前参数只一样，无需再次设置\n            return;\n        }\n\n        var $dom = this.$domNormal;\n        var $domSelected = this.$domSelected;\n\n        // 设置样式\n        if (opt) {\n            $dom.addClass('disable');\n            $domSelected.addClass('disable');\n        } else {\n            $dom.removeClass('disable');\n            $domSelected.removeClass('disable');\n        }\n\n        // 存储\n        this._disabled = opt;\n    };\n});\n// dropList 构造函数\n_e(function (E, $) {\n\n    // 定义构造函数\n    var DropList = function (editor, menu, opt) {\n        this.editor = editor;\n        this.menu = menu;\n\n        // list 的数据源，格式 {'commandValue': 'title', ...}\n        this.data = opt.data;\n        // 要为每个item自定义的模板\n        this.tpl = opt.tpl;\n        // 为了执行 editor.commandForElem 而传入的elem查询方式\n        this.selectorForELemCommand = opt.selectorForELemCommand;\n\n        // 执行事件前后的钩子\n        this.beforeEvent = opt.beforeEvent;\n        this.afterEvent = opt.afterEvent;\n\n        // 初始化\n        this.init();\n    };\n\n    DropList.fn = DropList.prototype;\n\n    // 暴露给 E 即 window.wangEditor\n    E.DropList = DropList;\n});\n// dropList fn bind\n_e(function (E, $) {\n\n    var DropList = E.DropList;\n\n    // init\n    DropList.fn.init = function () {\n        var self = this;\n\n        // 生成dom对象\n        self.initDOM();\n\n        // 绑定command事件\n        self.bindEvent();\n\n        // 声明隐藏的事件\n        self.initHideEvent();\n    };\n\n    // 初始化dom结构\n    DropList.fn.initDOM = function () {\n        var self = this;\n        var data = self.data;\n        var tpl = self.tpl || '<span>{#title}</span>';\n        var $list = $('<div class=\"wangEditor-drop-list clearfix\"></div>');\n\n        var itemContent;\n        var $item;\n        $.each(data, function (commandValue, title) {\n            itemContent = tpl.replace(/{#commandValue}/ig, commandValue).replace(/{#title}/ig, title);\n            $item = $('<a href=\"#\" commandValue=\"' + commandValue + '\"></a>');\n            $item.append(itemContent);\n            $list.append($item);\n        });\n\n        self.$list = $list;\n    };\n\n    // 绑定事件\n    DropList.fn.bindEvent = function () {\n        var self = this;\n        var editor = self.editor;\n        var menu = self.menu;\n        var commandName = menu.commandName;\n        var selectorForELemCommand = self.selectorForELemCommand;\n        var $list = self.$list;\n\n        // 执行事件前后的钩子函数\n        var beforeEvent = self.beforeEvent;\n        var afterEvent = self.afterEvent;\n\n        $list.on('click', 'a[commandValue]', function (e) {\n            // 正式命令执行之前\n            if (beforeEvent && typeof beforeEvent === 'function') {\n                beforeEvent.call(e);\n            }\n\n            // 执行命令\n            var commandValue = $(e.currentTarget).attr('commandValue');\n            if (menu.selected && editor.isRangeEmpty() && selectorForELemCommand) {\n                // 当前处于选中状态，并且选中内容为空\n                editor.commandForElem(selectorForELemCommand, e, commandName, commandValue);\n            } else {\n                // 当前未处于选中状态，或者有选中内容。则执行默认命令\n                editor.command(e, commandName, commandValue);\n            }\n\n            // 正式命令之后的钩子\n            if (afterEvent && typeof afterEvent === 'function') {\n                afterEvent.call(e);\n            }\n        });\n    };\n\n    // 点击其他地方，立即隐藏 droplist\n    DropList.fn.initHideEvent = function () {\n        var self = this;\n\n        // 获取 list elem\n        var thisList = self.$list.get(0);\n\n        E.$body.on('click', function (e) {\n            if (!self.isShowing) {\n                return;\n            }\n            var trigger = e.target;\n\n            // 获取菜单elem\n            var menu = self.menu;\n            var menuDom;\n            if (menu.selected) {\n                menuDom = menu.$domSelected.get(0);\n            } else {\n                menuDom = menu.$domNormal.get(0);\n            }\n\n            if (menuDom === trigger || $.contains(menuDom, trigger)) {\n                // 说明由本菜单点击触发的\n                return;\n            }\n\n            if (thisList === trigger || $.contains(thisList, trigger)) {\n                // 说明由本list点击触发的\n                return;\n            }\n\n            // 其他情况，隐藏 list\n            self.hide();\n        });\n\n        E.$window.scroll(function () {\n            self.hide();\n        });\n\n        E.$window.on('resize', function () {\n            self.hide();\n        });\n    };\n});\n// dropListfn api\n_e(function (E, $) {\n    \n    var DropList = E.DropList;\n\n    // 渲染\n    DropList.fn._render = function () {\n        var self = this;\n        var editor = self.editor;\n        var $list = self.$list;\n\n        // 渲染到页面\n        editor.$editorContainer.append($list);\n\n        // 记录状态\n        self.rendered = true;\n    };\n\n    // 定位\n    DropList.fn._position = function () {\n        var self = this;\n        var $list = self.$list;\n        var editor = self.editor;\n        var menu = self.menu;\n        var $menuContainer = editor.menuContainer.$menuContainer;\n        var $menuDom = menu.selected ? menu.$domSelected : menu.$domNormal;\n        // 注意这里的 offsetParent() 要返回 .menu-item 的 position\n        // 因为 .menu-item 是 position:relative\n        var menuPosition = $menuDom.offsetParent().position();\n\n        // 取得 menu 的位置、尺寸属性\n        var menuTop = menuPosition.top;\n        var menuLeft = menuPosition.left;\n        var menuHeight = $menuDom.offsetParent().height();\n        var menuWidth = $menuDom.offsetParent().width();\n\n        // 取得 list 的尺寸属性\n        var listWidth = $list.outerWidth();\n        // var listHeight = $list.outerHeight();\n\n        // 取得 $txt 的尺寸\n        var txtWidth = editor.txt.$txt.outerWidth();\n\n        // ------------开始计算-------------\n\n        // 初步计算 list 位置属性\n        var top = menuTop + menuHeight;\n        var left = menuLeft + menuWidth/2;\n        var marginLeft = 0 - menuWidth/2;\n\n        // 如果超出了有边界，则要左移（且和右侧有间隙）\n        var valWithTxt = (left + listWidth) - txtWidth;\n        if (valWithTxt > -10) {\n            marginLeft = marginLeft - valWithTxt - 10;\n        }\n        // 设置样式\n        $list.css({\n            top: top,\n            left: left,\n            'margin-left': marginLeft\n        });\n\n        // 如果因为向下滚动而导致菜单fixed，则再加一步处理\n        if (editor._isMenufixed) {\n            top = top + (($menuContainer.offset().top + $menuContainer.outerHeight()) - $list.offset().top);\n\n            // 重新设置top\n            $list.css({\n                top: top\n            });\n        }\n    };\n\n    // 显示\n    DropList.fn.show = function () {\n        var self = this;\n        var menu = self.menu;\n        if (!self.rendered) {\n            // 第一次show之前，先渲染\n            self._render();\n        }\n\n        if (self.isShowing) {\n            return;\n        }\n\n        var $list = self.$list;\n        $list.show();\n\n        // 定位\n        self._position();\n\n        // 记录状态\n        self.isShowing = true;\n\n        // 菜单状态\n        menu.activeStyle(true);\n    };\n\n    // 隐藏\n    DropList.fn.hide = function () {\n        var self = this;\n        var menu = self.menu;\n        if (!self.isShowing) {\n            return;\n        }\n\n        var $list = self.$list;\n        $list.hide();\n\n        // 记录状态\n        self.isShowing = false;\n\n        // 菜单状态\n        menu.activeStyle(false);\n    };\n});\n// dropPanel 构造函数\n_e(function (E, $) {\n\n    // 定义构造函数\n    var DropPanel = function (editor, menu, opt) {\n        this.editor = editor;\n        this.menu = menu;\n        this.$content = opt.$content;\n        this.width = opt.width || 200;\n        this.height = opt.height;\n        this.onRender = opt.onRender;\n\n        // init\n        this.init();\n    };\n\n    DropPanel.fn = DropPanel.prototype;\n\n    // 暴露给 E 即 window.wangEditor\n    E.DropPanel = DropPanel;\n});\n// dropPanel fn bind\n_e(function (E, $) {\n\n    var DropPanel = E.DropPanel;\n\n    // init\n    DropPanel.fn.init = function () {\n        var self = this;\n\n        // 生成dom对象\n        self.initDOM();\n\n        // 声明隐藏的事件\n        self.initHideEvent();\n    };\n\n    // init DOM\n    DropPanel.fn.initDOM = function () {\n        var self = this;\n        var $content = self.$content;\n        var width = self.width;\n        var height = self.height;\n        var $panel = $('<div class=\"wangEditor-drop-panel clearfix\"></div>');\n        var $triangle = $('<div class=\"tip-triangle\"></div>');\n\n        $panel.css({\n            width: width,\n            height: height ? height : 'auto'\n        });\n        $panel.append($triangle);\n        $panel.append($content);\n\n        // 添加对象数据\n        self.$panel = $panel;\n        self.$triangle = $triangle;\n    };\n\n    // 点击其他地方，立即隐藏 dropPanel\n    DropPanel.fn.initHideEvent = function () {\n        var self = this;\n\n        // 获取 panel elem\n        var thisPanle = self.$panel.get(0);\n\n        E.$body.on('click', function (e) {\n            if (!self.isShowing) {\n                return;\n            }\n            var trigger = e.target;\n\n            // 获取菜单elem\n            var menu = self.menu;\n            var menuDom;\n            if (menu.selected) {\n                menuDom = menu.$domSelected.get(0);\n            } else {\n                menuDom = menu.$domNormal.get(0);\n            }\n\n            if (menuDom === trigger || $.contains(menuDom, trigger)) {\n                // 说明由本菜单点击触发的\n                return;\n            }\n\n            if (thisPanle === trigger || $.contains(thisPanle, trigger)) {\n                // 说明由本panel点击触发的\n                return;\n            }\n\n            // 其他情况，隐藏 panel\n            self.hide();\n        });\n\n        E.$window.scroll(function (e) {\n            self.hide();\n        });\n\n        E.$window.on('resize', function () {\n            self.hide();\n        });\n    };\n});\n// dropPanel fn api\n_e(function (E, $) {\n   \n    var DropPanel = E.DropPanel;\n\n    // 渲染\n    DropPanel.fn._render = function () {\n        var self = this;\n        var onRender = self.onRender;\n        var editor = self.editor;\n        var $panel = self.$panel;\n\n        // 渲染到页面\n        editor.$editorContainer.append($panel);\n\n        // 渲染后的回调事件\n        onRender && onRender.call(self);\n\n        // 记录状态\n        self.rendered = true;\n    };\n\n    // 定位\n    DropPanel.fn._position = function () {\n        var self = this;\n        var $panel = self.$panel;\n        var $triangle = self.$triangle;\n        var editor = self.editor;\n        var $menuContainer = editor.menuContainer.$menuContainer;\n        var menu = self.menu;\n        var $menuDom = menu.selected ? menu.$domSelected : menu.$domNormal;\n        // 注意这里的 offsetParent() 要返回 .menu-item 的 position\n        // 因为 .menu-item 是 position:relative\n        var menuPosition = $menuDom.offsetParent().position();\n\n        // 取得 menu 的位置、尺寸属性\n        var menuTop = menuPosition.top;\n        var menuLeft = menuPosition.left;\n        var menuHeight = $menuDom.offsetParent().height();\n        var menuWidth = $menuDom.offsetParent().width();\n\n        // 取得 panel 的尺寸属性\n        var panelWidth = $panel.outerWidth();\n        // var panelHeight = $panel.outerHeight();\n\n        // 取得 $txt 的尺寸\n        var txtWidth = editor.txt.$txt.outerWidth();\n\n        // ------------开始计算-------------\n\n        // 初步计算 panel 位置属性\n        var top = menuTop + menuHeight;\n        var left = menuLeft + menuWidth/2;\n        var marginLeft = 0 - panelWidth/2;\n        var marginLeft2 = marginLeft;  // 下文用于和 marginLeft 比较，来设置三角形tip的位置\n\n        // 如果超出了左边界，则移动回来（要和左侧有10px间隙）\n        if ((0 - marginLeft) > (left - 10)) {\n            marginLeft = 0 - (left - 10);\n        }\n\n        // 如果超出了有边界，则要左移（且和右侧有10px间隙）\n        var valWithTxt = (left + panelWidth + marginLeft) - txtWidth;\n        if (valWithTxt > -10) {\n            marginLeft = marginLeft - valWithTxt - 10;\n        }\n\n        // 设置样式\n        $panel.css({\n            top: top,\n            left: left,\n            'margin-left': marginLeft\n        });\n\n        // 如果因为向下滚动而导致菜单fixed，则再加一步处理\n        if (editor._isMenufixed) {\n            top = top + (($menuContainer.offset().top + $menuContainer.outerHeight()) - $panel.offset().top);\n\n            // 重新设置top\n            $panel.css({\n                top: top\n            });\n        }\n\n        // 设置三角形 tip 的位置\n        $triangle.css({\n            'margin-left': marginLeft2 - marginLeft - 5\n        });\n    };\n\n    // focus 第一个 input\n    DropPanel.fn.focusFirstInput = function () {\n        var self = this;\n        var $panel = self.$panel;\n        $panel.find('input[type=text],textarea').each(function () {\n            var $input = $(this);\n            if ($input.attr('disabled') == null) {\n                $input.focus();\n                return false;\n            }\n        });\n    };\n\n    // 显示\n    DropPanel.fn.show = function () {\n        var self = this;\n        var menu = self.menu;\n        if (!self.rendered) {\n            // 第一次show之前，先渲染\n            self._render();\n        }\n\n        if (self.isShowing) {\n            return;\n        }\n\n        var $panel = self.$panel;\n        $panel.show();\n\n        // 定位\n        self._position();\n\n        // 记录状态\n        self.isShowing = true;\n\n        // 菜单状态\n        menu.activeStyle(true);\n\n        if (E.w3cRange) {\n            // 高级浏览器\n            self.focusFirstInput();\n        } else {\n            // 兼容 IE8 input placeholder\n            E.placeholderForIE8($panel);\n        }\n    };\n\n    // 隐藏\n    DropPanel.fn.hide = function () {\n        var self = this;\n        var menu = self.menu;\n        if (!self.isShowing) {\n            return;\n        }\n\n        var $panel = self.$panel;\n        $panel.hide();\n\n        // 记录状态\n        self.isShowing = false;\n\n        // 菜单状态\n        menu.activeStyle(false);\n    };\n});\n// modal 构造函数\n_e(function (E, $) {\n\n    // 定义构造函数\n    var Modal = function (editor, menu, opt) {\n        this.editor = editor;\n        this.menu = menu;\n        this.$content = opt.$content;\n\n        this.init();\n    };\n\n    Modal.fn = Modal.prototype;\n\n    // 暴露给 E 即 window.wangEditor\n    E.Modal = Modal;\n});\n// modal fn bind\n_e(function (E, $) {\n\n    var Modal = E.Modal;\n\n    Modal.fn.init = function () {\n        var self = this;\n\n        // 初始化dom\n        self.initDom();\n\n        // 初始化隐藏事件\n        self.initHideEvent();\n    };\n\n    // 初始化dom\n    Modal.fn.initDom = function () {\n        var self = this;\n        var $content = self.$content;\n        var $modal = $('<div class=\"wangEditor-modal\"></div>');\n        var $close = $('<div class=\"wangEditor-modal-close\"><i class=\"wangeditor-menu-img-cancel-circle\"></i></div>');\n\n        $modal.append($close);\n        $modal.append($content);\n\n        // 记录数据\n        self.$modal = $modal;\n        self.$close = $close;\n    };\n\n    // 初始化隐藏事件\n    Modal.fn.initHideEvent = function () {\n        var self = this;\n        var $close = self.$close;\n        var modal = self.$modal.get(0);\n\n        // 点击 $close 按钮，隐藏\n        $close.click(function () {\n            self.hide();\n        });\n\n        // 点击其他部分，隐藏\n        E.$body.on('click', function (e) {\n            if (!self.isShowing) {\n                return;\n            }\n            var trigger = e.target;\n\n            // 获取菜单elem\n            var menu = self.menu;\n            var menuDom;\n            if (menu) {\n                if (menu.selected) {\n                    menuDom = menu.$domSelected.get(0);\n                } else {\n                    menuDom = menu.$domNormal.get(0);\n                }\n\n                if (menuDom === trigger || $.contains(menuDom, trigger)) {\n                    // 说明由本菜单点击触发的\n                    return;\n                }\n            }\n\n            if (modal === trigger || $.contains(modal, trigger)) {\n                // 说明由本panel点击触发的\n                return;\n            }\n\n            // 其他情况，隐藏 panel\n            self.hide();\n        });\n    };\n});\n// modal fn api\n_e(function (E, $) {\n\n    var Modal = E.Modal;\n\n    // 渲染\n    Modal.fn._render = function () {\n        var self = this;\n        var editor = self.editor;\n        var $modal = self.$modal;\n\n        // $modal的z-index，在配置的z-index基础上再 +10\n        $modal.css('z-index', editor.config.zindex + 10 + '');\n\n        // 渲染到body最后面\n        E.$body.append($modal);\n\n        // 记录状态\n        self.rendered = true;\n    };\n\n    // 定位\n    Modal.fn._position = function () {\n        var self = this;\n        var $modal = self.$modal;\n        var top = $modal.offset().top;\n        var width = $modal.outerWidth();\n        var height = $modal.outerHeight();\n        var marginLeft = 0 - (width / 2);\n        var marginTop = 0 - (height / 2);\n        var sTop = E.$window.scrollTop();\n\n        // 保证modal最顶部，不超过浏览器上边框\n        if ((height / 2) > top) {\n            marginTop = 0 - top;\n        }\n\n        $modal.css({\n            'margin-left': marginLeft + 'px',\n            'margin-top': (marginTop + sTop) + 'px'\n        });\n    };\n\n    // 显示\n    Modal.fn.show = function () {\n        var self = this;\n        var menu = self.menu;\n        if (!self.rendered) {\n            // 第一次show之前，先渲染\n            self._render();\n        }\n\n        if (self.isShowing) {\n            return;\n        }\n        // 记录状态\n        self.isShowing = true;\n\n        var $modal = self.$modal;\n        $modal.show();\n\n        // 定位\n        self._position();\n\n        // 激活菜单状态\n        menu && menu.activeStyle(true);\n    };\n\n    // 隐藏\n    Modal.fn.hide = function () {\n        var self = this;\n        var menu = self.menu;\n        if (!self.isShowing) {\n            return;\n        }\n        // 记录状态\n        self.isShowing = false;\n\n        // 隐藏\n        var $modal = self.$modal;\n        $modal.hide();\n\n        // 菜单状态\n        menu && menu.activeStyle(false);\n    };\n});\n// txt 构造函数\n_e(function (E, $) {\n\n    // 定义构造函数\n    var Txt = function (editor) {\n        this.editor = editor;\n\n        // 初始化\n        this.init();\n    };\n\n    Txt.fn = Txt.prototype;\n\n    // 暴露给 E 即 window.wangEditor\n    E.Txt = Txt;\n});\n// Txt.fn bind fn\n_e(function (E, $) {\n\n    var Txt = E.Txt;\n\n    // 初始化\n    Txt.fn.init = function () {\n        var self = this;\n        var editor = self.editor;\n        var $valueContainer = editor.$valueContainer;\n        var currentValue = editor.getInitValue();\n        var $txt;\n\n        if ($valueContainer.get(0).nodeName === 'DIV') {\n            // 如果传入生成编辑器的元素就是div，则直接使用\n            $txt = $valueContainer;\n            $txt.addClass(\"wangEditor-txt\");\n            $txt.attr('contentEditable', 'true');\n        } else {\n            // 如果不是div（是textarea），则创建一个div\n            $txt = $(\n                '<div class=\"wangEditor-txt\" contentEditable=\"true\">' +\n                    currentValue +\n                '</div>'\n            );\n        }\n\n        // 试图最后插入一个空行，ready之后才行\n        editor.ready(function () {\n            self.insertEmptyP();\n        });\n\n        self.$txt = $txt;\n\n        // 删除时，如果没有内容了，就添加一个 <p><br></p>\n        self.contentEmptyHandle();\n\n        // enter时，不能使用 div 换行\n        self.bindEnterForDiv();\n\n        // enter时，用 p 包裹 text\n        self.bindEnterForText();\n\n        // tab 插入4个空格\n        self.bindTabEvent();\n\n        // 处理粘贴内容\n        self.bindPasteFilter();\n\n        // $txt.formatText() 方法\n        self.bindFormatText();\n\n        // 定义 $txt.html() 方法\n        self.bindHtml();\n    };\n\n    // 删除时，如果没有内容了，就添加一个 <p><br></p>\n    Txt.fn.contentEmptyHandle = function () {\n        var self = this;\n        var editor = self.editor;\n        var $txt = self.$txt;\n        var $p;\n\n        $txt.on('keydown', function (e) {\n            if (e.keyCode !== 8) {\n                return;\n            }\n            var txtHtml = $.trim($txt.html().toLowerCase());\n            if (txtHtml === '<p><br></p>') {\n                // 如果最后还剩余一个空行，就不再继续删除了\n                e.preventDefault();\n                return;\n            }\n        });\n\n        $txt.on('keyup', function (e) {\n            if (e.keyCode !== 8) {\n                return;\n            }\n            var txtHtml = $.trim($txt.html().toLowerCase());\n            // ff时用 txtHtml === '<br>' 判断，其他用 !txtHtml 判断\n            if (!txtHtml || txtHtml === '<br>') {\n                // 内容空了\n                $p = $('<p><br/></p>');\n                $txt.html(''); // 一定要先清空，否则在 ff 下有问题\n                $txt.append($p);\n                editor.restoreSelectionByElem($p.get(0));\n            }\n        });\n    };\n\n    // enter时，不能使用 div 换行\n    Txt.fn.bindEnterForDiv = function () {\n        var tags = E.config.legalTags; // 配置中编辑器要求的合法标签，如 p head table blockquote ul ol 等\n        var self = this;\n        var editor = self.editor;\n        var $txt = self.$txt;\n\n        var $keydownDivElem;\n        function divHandler() {\n            if (!$keydownDivElem) {\n                return;\n            }\n\n            var $pElem = $('<p>' + $keydownDivElem.html() + '</p>');\n            $keydownDivElem.after($pElem);\n            $keydownDivElem.remove();\n        }\n\n        $txt.on('keydown keyup', function (e) {\n            if (e.keyCode !== 13) {\n                return;\n            }\n            // 查找合法标签\n            var rangeElem = editor.getRangeElem();\n            var targetElem = editor.getLegalTags(rangeElem);\n            var $targetElem;\n            var $pElem;\n\n            if (!targetElem) {\n                // 没找到合法标签，就去查找 div\n                targetElem = editor.getSelfOrParentByName(rangeElem, 'div');\n                if (!targetElem) {\n                    return;\n                }\n                $targetElem = $(targetElem);\n\n                if (e.type === 'keydown') {\n                    // 异步执行（同步执行会出现问题）\n                    $keydownDivElem = $targetElem;\n                    setTimeout(divHandler, 0);\n                }\n\n                if (e.type === 'keyup') {\n                    // 将 div 的内容移动到 p 里面，并移除 div\n                    $pElem = $('<p>' + $targetElem.html() + '</p>');\n                    $targetElem.after($pElem);\n                    $targetElem.remove();\n\n                    // 如果是回车结束，将选区定位到行首\n                    editor.restoreSelectionByElem($pElem.get(0), 'start');\n                }\n            }\n        });\n    };\n\n    // enter时，用 p 包裹 text\n    Txt.fn.bindEnterForText = function () {\n        var self = this;\n        var $txt = self.$txt;\n        var handle;\n        $txt.on('keyup', function (e) {\n            if (e.keyCode !== 13) {\n                return;\n            }\n            if (!handle) {\n                handle = function() {\n                    self.wrapImgAndText();\n                };\n            }\n            setTimeout(handle);\n        });\n    };\n\n    // tab 时，插入4个空格\n    Txt.fn.bindTabEvent = function () {\n        var self = this;\n        var editor = self.editor;\n        var $txt = self.$txt;\n\n        $txt.on('keydown', function (e) {\n            if (e.keyCode !== 9) {\n                // 只监听 tab 按钮\n                return;\n            }\n            // 如果浏览器支持 insertHtml 则插入4个空格。如果不支持，就不管了\n            if (editor.queryCommandSupported('insertHtml')) {\n                editor.command(e, 'insertHtml', '&nbsp;&nbsp;&nbsp;&nbsp;');\n            }\n        });\n    };\n\n    // 处理粘贴内容\n    Txt.fn.bindPasteFilter = function () {\n        var self = this;\n        var editor = self.editor;\n        var resultHtml = '';  //存储最终的结果\n        var $txt = self.$txt;\n        var legalTags = editor.config.legalTags;\n        var legalTagArr = legalTags.split(',');\n\n        $txt.on('paste', function (e) {\n            if (!editor.config.pasteFilter) {\n                // 配置中取消了粘贴过滤\n                return;\n            }\n\n            var currentNodeName = editor.getRangeElem().nodeName;\n            if (currentNodeName === 'TD' || currentNodeName === 'TH') {\n                // 在表格的单元格中粘贴，忽略所有内容。否则会出现异常情况\n                return;\n            }\n\n            resultHtml = ''; // 先清空 resultHtml\n\n            var pasteHtml, $paste, docSplitHtml;\n            var data = e.clipboardData || e.originalEvent.clipboardData;\n            var ieData = window.clipboardData;\n\n            if (editor.config.pasteText) {\n                // 只粘贴纯文本\n\n                if (data && data.getData) {\n                    // w3c\n                    pasteHtml = data.getData('text/plain');\n                } else if (ieData && ieData.getData) {\n                    // IE\n                    pasteHtml = ieData.getData('text');\n                } else {\n                    // 其他情况\n                    return;\n                }\n\n                // 拼接为 <p> 标签\n                if (pasteHtml) {\n                    resultHtml = '<p>' + pasteHtml + '</p>';\n                }\n\n            } else {\n                // 粘贴过滤了样式的、只有标签的 html\n\n                if (data && data.getData) {\n                    // w3c\n\n                    // 获取粘贴过来的html\n                    pasteHtml = data.getData('text/html');\n\n                    // 过滤从 word excel 粘贴过来的乱码\n                    docSplitHtml = pasteHtml.split('</html>');\n                    if (docSplitHtml.length === 2) {\n                        pasteHtml = docSplitHtml[0];\n                    }\n\n                    if (pasteHtml) {\n                        // 创建dom\n                        $paste = $('<div>' + pasteHtml + '</div>');\n                        // 处理，并将结果存储到 resultHtml 『全局』变量\n                        handle($paste.get(0));\n                    } else {\n                        // 得不到html，试图获取text\n                        pasteHtml = data.getData('text/plain');\n                        if (pasteHtml) {\n                            // 替换特殊字符\n                            pasteHtml = pasteHtml.replace(/[ ]/g, '&nbsp;')\n                                                 .replace(/</g, '&lt;')\n                                                 .replace(/>/g, '&gt;')\n                                                 .replace(/\\n/g, '</p><p>');\n                            // 拼接\n                            resultHtml = '<p>' + pasteHtml + '</p>';\n\n                            // 查询链接\n                            resultHtml = resultHtml.replace(/<p>(https?:\\/\\/.*?)<\\/p>/ig, function (match, link) {\n                                return '<p><a href=\"' + link + '\" target=\"_blank\">' + link + '</p>';\n                            });\n                        }\n                    }\n                    \n                } else if (ieData && ieData.getData) {\n                    // IE 直接从剪切板中取出纯文本格式\n                    resultHtml = ieData.getData('text');\n                    if (!resultHtml) {\n                        return;\n                    }\n                    // 拼接为 <p> 标签\n                    resultHtml = '<p>' + resultHtml + '</p>';\n                    resultHtml = resultHtml.replace(new RegExp('\\n', 'g'), '</p><p>');\n                } else {\n                    // 其他情况\n                    return;\n                }\n            }\n\n            // 执行命令\n            if (resultHtml) {\n                editor.command(e, 'insertHtml', resultHtml);\n\n                // 删除内容为空的 p 和嵌套的 p\n                self.clearEmptyOrNestP();\n            }\n        });\n\n        // 处理粘贴的内容\n        function handle(elem) {\n            if (!elem || !elem.nodeType || !elem.nodeName) {\n                return;\n            }\n            var $elem;\n            var nodeName = elem.nodeName.toLowerCase();\n            var nodeType = elem.nodeType;\n            var childNodesClone;\n\n            // 只处理文本和普通node标签\n            if (nodeType !== 3 && nodeType !== 1) {\n                return;\n            }\n\n            $elem = $(elem);\n\n            // 如果是容器，则继续深度遍历\n            if (nodeName === 'div') {\n                childNodesClone = [];\n                $.each(elem.childNodes, function (index, item) {\n                    // elem.childNodes 可获取TEXT节点，而 $elem.children() 就获取不到\n                    // 先将 elem.childNodes 拷贝一份，一面在循环递归过程中 elem 发生变化\n                    childNodesClone.push(item);\n                });\n                // 遍历子元素，执行操作\n                $.each(childNodesClone, function () {\n                    handle(this);\n                });\n                return;\n            }\n            \n            if (legalTagArr.indexOf(nodeName) >= 0) {\n                // 如果是合法标签之内的，则根据元素类型，获取值\n                resultHtml += getResult(elem);\n            } else if (nodeType === 3) {\n                // 如果是文本，则直接插入 p 标签\n                resultHtml += '<p>' + elem.textContent + '</p>';\n            } else if (nodeName === 'br') {\n                // <br>保留\n                resultHtml += '<br/>';\n            }\n            else {\n                // 忽略的标签\n                if (['meta', 'style', 'script', 'object', 'form', 'iframe', 'hr'].indexOf(nodeName) >= 0) {\n                    return;\n                }\n                // 其他标签，移除属性，插入 p 标签\n                $elem = $(removeAttrs(elem));\n                // 注意，这里的 clone() 是必须的，否则会出错\n                resultHtml += $('<div>').append($elem.clone()).html();\n            }\n        }\n\n        // 获取元素的结果\n        function getResult(elem) {\n            var nodeName = elem.nodeName.toLowerCase();\n            var $elem;\n            var htmlForP = '';\n            var htmlForLi = '';\n\n            if (['blockquote'].indexOf(nodeName) >= 0) {\n\n                // 直接取出元素text即可\n                $elem = $(elem);\n                return '<' + nodeName + '>' + $elem.text() + '</' + nodeName + '>';\n\n            } else if (['p', 'h1', 'h2', 'h3', 'h4', 'h5'].indexOf(nodeName) >= 0) {\n\n                //p head 取出 text 和链接\n                elem = removeAttrs(elem);\n                $elem = $(elem);\n                htmlForP = $elem.html();\n\n                // 剔除 a img 之外的元素\n                htmlForP = htmlForP.replace(/<.*?>/ig, function (tag) {\n                    if (tag === '</a>' || tag.indexOf('<a ') === 0 || tag.indexOf('<img ') === 0) {\n                        return tag;\n                    } else {\n                        return '';\n                    }\n                });\n\n                return '<' + nodeName + '>' + htmlForP + '</' + nodeName + '>';\n\n            } else if (['ul', 'ol'].indexOf(nodeName) >= 0) {\n                \n                // ul ol元素，获取子元素（li元素）的text link img，再拼接\n                $elem = $(elem);\n                $elem.children().each(function () {\n                    var $li = $(removeAttrs(this));\n                    var html = $li.html();\n\n                    html = html.replace(/<.*?>/ig, function (tag) {\n                        if (tag === '</a>' || tag.indexOf('<a ') === 0 || tag.indexOf('<img ') === 0) {\n                            return tag;\n                        } else {\n                            return '';\n                        }\n                    });\n\n                    htmlForLi += '<li>' + html + '</li>';\n                });\n                return '<' + nodeName + '>' + htmlForLi + '</' + nodeName + '>';\n            \n            } else {\n                \n                // 其他元素，移除元素属性\n                $elem = $(removeAttrs(elem));\n                return $('<div>').append($elem).html();\n            }\n        }\n\n        // 移除一个元素（子元素）的attr\n        function removeAttrs(elem) {\n            var attrs = elem.attributes || [];\n            var attrNames = [];\n            var exception = ['href', 'target', 'src', 'alt', 'rowspan', 'colspan']; //例外情况\n\n            // 先存储下elem中所有 attr 的名称\n            $.each(attrs, function (key, attr) {\n                if (attr && attr.nodeType === 2) {\n                    attrNames.push(attr.nodeName);\n                }\n            });\n            // 再根据名称删除所有attr\n            $.each(attrNames, function (key, attr) {\n                if (exception.indexOf(attr) < 0) {\n                    // 除了 exception 规定的例外情况，删除其他属性\n                    elem.removeAttribute(attr);\n                }\n            });\n\n\n            // 递归子节点\n            var children = elem.childNodes;\n            if (children.length) {\n                $.each(children, function (key, value) {\n                    removeAttrs(value);\n                });\n            }\n\n            return elem;\n        }\n    };\n\n    // 绑定 $txt.formatText() 方法\n    Txt.fn.bindFormatText = function () {\n        var self = this;\n        var editor = self.editor;\n        var $txt = self.$txt;\n        var legalTags = E.config.legalTags;\n        var legalTagArr = legalTags.split(',');\n        var length = legalTagArr.length;\n        var regArr = [];\n\n        // 将 E.config.legalTags 配置的有效字符，生成正则表达式\n        $.each(legalTagArr, function (k, tag) {\n            var reg = '\\>\\\\s*\\<(' + tag + ')\\>';\n            regArr.push(new RegExp(reg, 'ig'));\n        });\n\n        // 增加 li \n        regArr.push(new RegExp('\\>\\\\s*\\<(li)\\>', 'ig'));\n\n        // 增加 tr\n        regArr.push(new RegExp('\\>\\\\s*\\<(tr)\\>', 'ig'));\n\n        // 增加 code\n        regArr.push(new RegExp('\\>\\\\s*\\<(code)\\>', 'ig'));\n\n        // 生成 formatText 方法\n        $txt.formatText = function () {\n            var $temp = $('<div>');\n            var html = $txt.html();\n\n            // 去除空格\n            html = html.replace(/\\s*</ig, '<');\n\n            // 段落、表格之间换行\n            $.each(regArr, function (k, reg) {\n                if (!reg.test(html)) {\n                    return;\n                }\n                html = html.replace(reg, function (matchStr, tag) {\n                    return '>\\n<' + tag + '>';\n                });\n            });\n\n            $temp.html(html);\n            return $temp.text();\n        };\n    };\n\n    // 定制 $txt.html 方法\n    Txt.fn.bindHtml = function () {\n        var self = this;\n        var editor = self.editor;\n        var $txt = self.$txt;\n        var $valueContainer = editor.$valueContainer;\n        var valueNodeName = editor.valueNodeName;\n\n        $txt.html = function (html) {\n            var result;\n\n            if (valueNodeName === 'div') {\n                // div 生成的编辑器，取值、赋值，都直接触发jquery的html方法\n                result = $.fn.html.call($txt, html);\n            }\n\n            // textarea 生成的编辑器，则需要考虑赋值时，也给textarea赋值\n\n            if (html === undefined) {\n                // 取值，直接触发jquery原生html方法\n                result = $.fn.html.call($txt);\n\n                // 替换 html 中，src和href属性中的 & 字符。\n                // 因为 .html() 或者 .innerHTML 会把所有的 & 字符都改成 &amp; 但是 src 和 href 中的要保持 &\n                result = result.replace(/(href|src)\\=\\\"(.*)\\\"/igm, function (a, b, c) {\n                    return b + '=\"' + c.replace('&amp;', '&') + '\"';\n                });\n            } else {\n                // 赋值，需要同时给 textarea 赋值\n                result = $.fn.html.call($txt, html);\n                $valueContainer.val(html);\n            }\n\n            if (html === undefined) {\n                return result;\n            } else {\n                // 手动触发 change 事件，因为 $txt 监控了 change 事件来判断是否需要执行 editor.onchange \n                $txt.change();\n            }\n        };\n    };\n});\n// Txt.fn api\n_e(function (E, $) {\n\n    var Txt = E.Txt;\n\n    var txtChangeEventNames = 'propertychange change click keyup input paste';\n\n    // 渲染\n    Txt.fn.render = function () {\n        var $txt = this.$txt;\n        var $editorContainer = this.editor.$editorContainer;\n        $editorContainer.append($txt);\n    };\n\n    // 计算高度\n    Txt.fn.initHeight = function () {\n        var editor = this.editor;\n        var $txt = this.$txt;\n        var valueContainerHeight = editor.$valueContainer.height();\n        var menuHeight = editor.menuContainer.height();\n        var txtHeight = valueContainerHeight - menuHeight;\n\n        // 限制最小为 50px\n        txtHeight = txtHeight < 50 ? 50 : txtHeight;\n\n        $txt.height(txtHeight);\n\n        // 记录原始高度\n        editor.valueContainerHeight = valueContainerHeight;\n\n        // 设置 max-height\n        this.initMaxHeight(txtHeight, menuHeight);\n    };\n\n    // 计算最大高度\n    Txt.fn.initMaxHeight = function (txtHeight, menuHeight) {\n        var editor = this.editor;\n        var $menuContainer = editor.menuContainer.$menuContainer;\n        var $txt = this.$txt;\n        var $wrap = $('<div>');\n\n        // 需要浏览器支持 max-height，否则不管\n        if (window.getComputedStyle && 'max-height'in window.getComputedStyle($txt.get(0))) {\n            // 获取 max-height 并判断是否有值\n            var maxHeight = parseInt(editor.$valueContainer.css('max-height'));\n            if (isNaN(maxHeight)) {\n                return;\n            }\n\n            // max-height 和『全屏』暂时有冲突\n            if (editor.menus.fullscreen) {\n                E.warn('max-height和『全屏』菜单一起使用时，会有一些问题尚未解决，请暂时不要两个同时使用');\n                return;\n            }\n\n            // 标记\n            editor.useMaxHeight = true;\n\n            // 设置maxheight\n            $wrap.css({\n                'max-height': (maxHeight - menuHeight) + 'px',\n                'overflow-y': 'auto'\n            });\n            $txt.css({\n                'height': 'auto',\n                'overflow-y': 'visible',\n                'min-height': txtHeight + 'px'\n            });\n\n            // 滚动式，菜单阴影\n            $wrap.on('scroll', function () {\n                if ($txt.parent().scrollTop() > 10) {\n                    $menuContainer.addClass('wangEditor-menu-shadow');\n                } else {\n                    $menuContainer.removeClass('wangEditor-menu-shadow');\n                }\n            });\n\n            // 需在编辑器区域外面再包裹一层\n            $txt.wrap($wrap);\n        }\n    };\n\n    // 保存选区\n    Txt.fn.saveSelectionEvent = function () {\n        var $txt = this.$txt;\n        var editor = this.editor;\n        var timeoutId;\n        var dt = Date.now();\n\n        function save() {\n            editor.saveSelection();\n        }\n\n        // 同步保存选区\n        function saveSync() {\n            // 100ms之内，不重复保存\n            if (Date.now() - dt < 100) {\n                return;\n            }\n\n            dt = Date.now();\n            save();\n        }\n\n        // 异步保存选区\n        function saveAync() {\n            // 节流，防止高频率重复操作\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n            }\n            timeoutId = setTimeout(save, 300);\n        }\n\n        // txt change 、focus、blur 时随时保存选区\n        $txt.on(txtChangeEventNames + ' focus blur', function (e) {\n            // 先同步保存选区，为了让接下来就马上要执行 editor.getRangeElem() 的程序\n            // 能够获取到正确的 rangeElem\n            saveSync();\n\n            // 再异步保存选区，为了确定更加准确的选区，为后续的操作做准备\n            saveAync();\n        });\n\n        // 鼠标拖拽选择时，可能会拖拽到编辑器区域外面再松手，此时 $txt 就监听不到 click事件了\n        $txt.on('mousedown', function () {\n            $txt.on('mouseleave.saveSelection', function (e) {\n                // 先同步后异步，如上述注释\n                saveSync();\n                saveAync();\n\n                // 顺道吧菜单状态也更新了\n                editor.updateMenuStyle();\n            });\n        }).on('mouseup', function () {\n            $txt.off('mouseleave.saveSelection');\n        });\n        \n    };\n\n    // 随时更新 value\n    Txt.fn.updateValueEvent = function () {\n        var $txt = this.$txt;\n        var editor = this.editor;\n        var timeoutId, oldValue;\n\n        // 触发 onchange 事件\n        function doOnchange() {\n            var val = $txt.html();\n            if (oldValue === val) {\n                // 无变化\n                return;\n            }\n\n            // 触发 onchange 事件\n            if (editor.onchange && typeof editor.onchange === 'function') {\n                editor.onchange.call(editor);\n            }\n\n            // 更新内容\n            editor.updateValue();\n\n            // 记录最新内容\n            oldValue = val;\n        }\n\n        // txt change 时随时更新内容\n        $txt.on(txtChangeEventNames, function (e) {\n            // 初始化\n            if (oldValue == null) {\n                oldValue = $txt.html();\n            }\n\n            // 监控内容变化（停止操作 100ms 之后立即执行）\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n            }\n            timeoutId = setTimeout(doOnchange, 100);\n        });\n    };\n\n    // 随时更新 menustyle\n    Txt.fn.updateMenuStyleEvent = function () {\n        var $txt = this.$txt;\n        var editor = this.editor;\n\n        // txt change 时随时更新内容\n        $txt.on(txtChangeEventNames, function (e) {\n            editor.updateMenuStyle();\n        });\n    };\n\n    // 最后插入试图插入 <p><br><p>\n    Txt.fn.insertEmptyP = function () {\n        var $txt = this.$txt;\n        var $children = $txt.children();\n\n        if ($children.length === 0) {\n            $txt.append($('<p><br></p>'));\n            return;\n        }\n\n        if ($.trim($children.last().html()).toLowerCase() !== '<br>') {\n            $txt.append($('<p><br></p>'));\n        }\n    };\n\n    // 将编辑器暴露出来的文字和图片，都用 p 来包裹\n    Txt.fn.wrapImgAndText = function () {\n        var $txt = this.$txt;\n        var $imgs = $txt.children('img');\n        var txt = $txt[0];\n        var childNodes = txt.childNodes;\n        var childrenLength = childNodes.length;\n        var i, childNode, p;\n\n        // 处理图片\n        $imgs.length && $imgs.each(function () {\n            $(this).wrap('<p>');\n        });\n\n        // 处理文字\n        for (i = 0; i < childrenLength; i++) {\n            childNode = childNodes[i];\n            if (childNode.nodeType === 3 && childNode.textContent && $.trim(childNode.textContent)) {\n                $(childNode).wrap('<p>');\n            }\n        }\n    };\n\n    // 清空内容为空的<p>，以及重复包裹的<p>（在windows下的chrome粘贴文字之后，会出现上述情况）\n    Txt.fn.clearEmptyOrNestP = function () {\n        var $txt = this.$txt;\n        var $pList = $txt.find('p');\n\n        $pList.each(function () {\n            var $p = $(this);\n            var $children = $p.children();\n            var childrenLength = $children.length;\n            var $firstChild;\n            var content = $.trim($p.html());\n\n            // 内容为空的p\n            if (!content) {\n                $p.remove();\n                return;\n            }\n\n            // 嵌套的p\n            if (childrenLength === 1) {\n                $firstChild = $children.first();\n                if ($firstChild.get(0) && $firstChild.get(0).nodeName === 'P') {\n                    $p.html( $firstChild.html() );\n                }\n            }\n        });\n    };\n\n    // 获取 scrollTop\n    Txt.fn.scrollTop = function (val) {\n        var self = this;\n        var editor = self.editor;\n        var $txt = self.$txt;\n\n        if (editor.useMaxHeight) {\n            return $txt.parent().scrollTop(val);\n        } else {\n            return $txt.scrollTop(val);\n        }\n    };\n\n    // 鼠标hover时候，显示p、head的高度\n    Txt.fn.showHeightOnHover = function () {\n        var editor = this.editor;\n        var $editorContainer = editor.$editorContainer;\n        var menuContainer = editor.menuContainer;\n        var $txt = this.$txt;\n        var $tip = $('<i class=\"height-tip\"><i>');\n        var isTipInTxt = false;\n\n        function addAndShowTip($target) {\n            if (!isTipInTxt) {\n                $editorContainer.append($tip);\n                isTipInTxt = true;\n            }\n\n            var txtTop = $txt.position().top;\n            var txtHeight = $txt.outerHeight();\n\n            var height = $target.height();\n            var top = $target.position().top;\n            var marginTop = parseInt($target.css('margin-top'), 10);\n            var paddingTop = parseInt($target.css('padding-top'), 10);\n            var marginBottom = parseInt($target.css('margin-bottom'), 10);\n            var paddingBottom = parseInt($target.css('padding-bottom'), 10);\n\n            // 计算初步的结果\n            var resultHeight = height + paddingTop + marginTop + paddingBottom + marginBottom;\n            var resultTop = top + menuContainer.height();\n            \n            // var spaceValue;\n\n            // // 判断是否超出下边界\n            // spaceValue = (resultTop + resultHeight) - (txtTop + txtHeight);\n            // if (spaceValue > 0) {\n            //     resultHeight = resultHeight - spaceValue;\n            // }\n\n            // // 判断是否超出了下边界\n            // spaceValue = txtTop > resultTop;\n            // if (spaceValue) {\n            //     resultHeight = resultHeight - spaceValue;\n            //     top = top + spaceValue;\n            // }\n\n            // 按照最终结果渲染\n            $tip.css({\n                height: height + paddingTop + marginTop + paddingBottom + marginBottom,\n                top: top + menuContainer.height()\n            });\n        }\n        function removeTip() {\n            if (!isTipInTxt) {\n                return;\n            }\n            $tip.remove();\n            isTipInTxt = false;\n        }\n\n        $txt.on('mouseenter', 'ul,ol,blockquote,p,h1,h2,h3,h4,h5,table,pre', function (e) {\n            addAndShowTip($(e.currentTarget));\n        }).on('mouseleave', function () {\n            removeTip();\n        });\n    };\n});\n// 工具函数\n_e(function (E, $) {\n\n    // IE8 [].indexOf()\n    if(!Array.prototype.indexOf){\n        //IE低版本不支持 arr.indexOf \n        Array.prototype.indexOf = function(elem){\n            var i = 0,\n                length = this.length;\n            for(; i<length; i++){\n                if(this[i] === elem){\n                    return i;\n                }\n            }\n            return -1;\n        };\n        //IE低版本不支持 arr.lastIndexOf\n        Array.prototype.lastIndexOf = function(elem){\n            var length = this.length;\n            for(length = length - 1; length >= 0; length--){\n                if(this[length] === elem){\n                    return length;\n                }\n            }\n            return -1;\n        };\n    }\n\n    // IE8 Date.now()\n    if (!Date.now) {\n        Date.now = function () {\n            return new Date().valueOf(); \n        };\n    }\n\n    // console.log && console.warn && console.error\n    var console = window.console;\n    var emptyFn = function () {};\n    $.each(['info', 'log', 'warn', 'error'], function (key, value) {\n        if (console == null) {\n            E[value] = emptyFn;\n        } else {\n            E[value] = function (info) {\n                // 通过配置来控制打印输出\n                if (E.config && E.config.printLog) {\n                    console[value]('wangEditor提示: ' + info);\n                }\n            };\n        }\n    });\n\n    // 获取随机数\n    E.random = function () {\n        return Math.random().toString().slice(2);\n    };\n\n    // 浏览器是否支持 placeholder\n    E.placeholder = 'placeholder' in document.createElement('input');\n\n    // 兼容IE8的 input placeholder\n    E.placeholderForIE8 = function ($container) {\n        if (E.placeholder) {\n            return;\n        }\n        $container.find('input[placeholder]').each(function () {\n            var $input = $(this);\n            var placeholder = $input.attr('placeholder');\n\n            if ($input.val() === '') {\n                $input.css('color', '#666');\n                $input.val(placeholder);\n\n                $input.on('focus.placeholder click.placeholder', function () {\n                    $input.val('');\n                    $input.css('color', '#333');\n                    $input.off('focus.placeholder click.placeholder');\n                });\n            }\n        });\n    };\n});\n// 语言包\n_e(function (E, $) {\n    E.langs = {};\n    \n    // 中文\n    E.langs['zh-cn'] = {\n        bold: '粗体',\n        underline: '下划线',\n        italic: '斜体',\n        forecolor: '文字颜色',\n        bgcolor: '背景色',\n        strikethrough: '删除线',\n        eraser: '清空格式',\n        source: '源码',\n        quote: '引用',\n        fontfamily: '字体',\n        fontsize: '字号',\n        head: '标题',\n        orderlist: '有序列表',\n        unorderlist: '无序列表',\n        alignleft: '左对齐',\n        aligncenter: '居中',\n        alignright: '右对齐',\n        link: '链接',\n        text: '文本',\n        submit: '提交',\n        cancel: '取消',\n        unlink: '取消链接',\n        table: '表格',\n        emotion: '表情',\n        img: '图片',\n        uploadImg: '上传图片',\n        linkImg: '网络图片',\n        video: '视频',\n        'width': '宽',\n        'height': '高',\n        location: '位置',\n        loading: '加载中',\n        searchlocation: '搜索位置',\n        dynamicMap: '动态地图',\n        clearLocation: '清除位置',\n        langDynamicOneLocation: '动态地图只能显示一个位置',\n        insertcode: '插入代码',\n        undo: '撤销',\n        redo: '重复',\n        fullscreen: '全屏',\n        openLink: '打开链接'\n    };\n\n    // 英文\n    E.langs.en = {\n        bold: 'Bold',\n        underline: 'Underline',\n        italic: 'Italic',\n        forecolor: 'Color',\n        bgcolor: 'Backcolor',\n        strikethrough: 'Strikethrough',\n        eraser: 'Eraser',\n        source: 'Codeview',\n        quote: 'Quote',\n        fontfamily: 'Font family',\n        fontsize: 'Font size',\n        head: 'Head',\n        orderlist: 'Ordered list',\n        unorderlist: 'Unordered list',\n        alignleft: 'Align left',\n        aligncenter: 'Align center',\n        alignright: 'Align right',\n        link: 'Insert link',\n        text: 'Text',\n        submit: 'Submit',\n        cancel: 'Cancel',\n        unlink: 'Unlink',\n        table: 'Table',\n        emotion: 'Emotions',\n        img: 'Image',\n        uploadImg: 'Upload',\n        linkImg: 'Link',\n        video: 'Video',\n        'width': 'width',\n        'height': 'height',\n        location: 'Location',\n        loading: 'Loading',\n        searchlocation: 'search',\n        dynamicMap: 'Dynamic',\n        clearLocation: 'Clear',\n        langDynamicOneLocation: 'Only one location in dynamic map',\n        insertcode: 'Insert Code',\n        undo: 'Undo',\n        redo: 'Redo',\n        fullscreen: 'Full screnn',\n        openLink: 'open link'\n    };\n});\n// 全局配置\n_e(function (E, $) {\n\n    E.config = {};\n\n    // 全屏时的 z-index\n    E.config.zindex = 10000;\n\n    // 是否打印log\n    E.config.printLog = true;\n\n    // 菜单吸顶：false - 不吸顶；number - 吸顶，值为top值\n    E.config.menuFixed = 0;\n\n    // 编辑源码时，过滤 javascript\n    E.config.jsFilter = true;\n\n    // 编辑器允许的标签\n    E.config.legalTags = 'p,h1,h2,h3,h4,h5,h6,blockquote,table,ul,ol,pre';\n\n    // 语言包\n    E.config.lang = E.langs['zh-cn'];\n\n    // 菜单配置\n    E.config.menus = [\n        // 'source',\n        'indent',\n        // '|',\n        'bold',\n        // 'underline',\n        'italic',\n        'strikethrough',\n        // 'eraser',\n        // 'forecolor',\n        // 'bgcolor',\n        // '|',\n        // 'quote',\n        // 'fontfamily',\n        // 'fontsize',\n        // 'head',\n        // 'unorderlist',\n        // 'orderlist',\n        // 'alignleft',\n        // 'aligncenter',\n        // 'alignright',\n        // '|',\n        // 'link',\n        // 'unlink',\n        // 'table',\n        // 'emotion',\n        // '|',\n        'img',\n        // 'video',\n        // 'location',\n        // 'insertcode',\n        // '|',\n        // 'undo',\n        // 'redo',\n        // 'fullscreen'\n    ];\n\n    // 颜色配置\n    E.config.colors = {\n        // 'value': 'title'\n        '#880000': '暗红色',\n        '#800080': '紫色',\n        '#ff0000': '红色',\n        '#ff00ff': '鲜粉色',\n        '#000080': '深蓝色',\n        '#0000ff': '蓝色',\n        '#00ffff': '湖蓝色',\n        '#008080': '蓝绿色',\n        '#008000': '绿色',\n        '#808000': '橄榄色',\n        '#00ff00': '浅绿色',\n        '#ffcc00': '橙黄色',\n        '#808080': '灰色',\n        '#c0c0c0': '银色',\n        '#000000': '黑色',\n        '#ffffff': '白色'\n    };\n\n    // 字体\n    E.config.familys = [\n        '宋体', '黑体', '楷体', '微软雅黑',\n        'Arial', 'Verdana', 'Georgia',\n        'Times New Roman', 'Microsoft JhengHei',\n        'Trebuchet MS', 'Courier New', 'Impact', 'Comic Sans MS', 'Consolas'\n    ];\n\n    // 字号\n    E.config.fontsizes = {\n        // 格式：'value': 'title'\n        1: '12px',\n        2: '13px',\n        3: '16px',\n        4: '18px',\n        5: '24px',\n        6: '32px',\n        7: '48px'\n    };\n\n    // 表情包\n    E.config.emotionsShow = 'icon'; // 显示项，默认为'icon'，也可以配置成'value'\n    E.config.emotions = {\n        // 'default': {\n        //     title: '默认',\n        //     data: './emotions.data'\n        // },\n        'weibo': {\n            title: '微博表情',\n            data: [\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7a/shenshou_thumb.gif',\n                    value: '[草泥马]'    \n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/60/horse2_thumb.gif',\n                    value: '[神马]'    \n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/fuyun_thumb.gif',\n                    value: '[浮云]'    \n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c9/geili_thumb.gif',\n                    value: '[给力]'    \n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/f2/wg_thumb.gif',\n                    value: '[围观]'    \n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/70/vw_thumb.gif',\n                    value: '[威武]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6e/panda_thumb.gif',\n                    value: '[熊猫]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/81/rabbit_thumb.gif',\n                    value: '[兔子]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/otm_thumb.gif',\n                    value: '[奥特曼]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/15/j_thumb.gif',\n                    value: '[囧]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/89/hufen_thumb.gif',\n                    value: '[互粉]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c4/liwu_thumb.gif',\n                    value: '[礼物]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/ac/smilea_thumb.gif',\n                    value: '[呵呵]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/0b/tootha_thumb.gif',\n                    value: '[哈哈]'\n                }\n            ]\n        }\n    };\n\n    // 百度地图的key\n    E.config.mapAk = 'TVhjYjq1ICT2qqL5LdS8mwas';\n\n    // 上传图片的配置\n    // server地址\n    E.config.uploadImgUrl = true;\n    // 超时时间\n    E.config.uploadTimeout = 20 * 1000;\n    // 用于存储上传回调事件\n    E.config.uploadImgFns = {};\n    // 自定义上传图片的filename\n    // E.config.uploadImgFileName = 'customFileName';\n\n    // 自定义上传，设置为 true 之后，显示上传图标\n    E.config.customUpload = true;\n    // 自定义上传的init事件\n    // E.config.customUploadInit = function () {....};\n\n    // 自定义上传时传递的参数（如 token）\n    E.config.uploadParams = {\n        /* token: 'abcdef12345' */\n    };\n\n    // 自定义上传是的header参数\n    E.config.uploadHeaders = {\n         /* 'Accept' : 'text/x-json' */\n    };\n\n    // 跨域上传时传递 cookie，默认为 true\n    E.config.withCredentials = true;\n\n    // 隐藏网络图片，默认为 false\n    E.config.hideLinkImg = false;\n\n    // 是否过滤粘贴内容\n    E.config.pasteFilter = true;\n\n    // 是否粘贴纯文本，当 editor.config.pasteFilter === false 时候，此配置将失效\n    E.config.pasteText = false;\n\n    // 插入代码时，默认的语言\n    E.config.codeDefaultLang = 'javascript';\n});\n// 全局UI\n_e(function (E, $) {\n\n     E.UI = {};\n\n     // 为菜单自定义配置的UI\n     E.UI.menus = {\n        // 这个 default 不加引号，在 IE8 会报错\n        'default': {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-command\"></i></a>',\n            selected: '.selected'\n        },\n        bold: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-bold\"></i></a>',\n            selected: '.selected'\n        },\n        underline: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-underline\"></i></a>',\n            selected: '.selected'\n        },\n        italic: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-italic\"></i></a>',\n            selected: '.selected'\n        },\n        forecolor: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-pencil\"></i></a>',\n            selected: '.selected'\n        },\n        bgcolor: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-brush\"></i></a>',\n            selected: '.selected'\n        },\n        strikethrough: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-strikethrough\"></i></a>',\n            selected: '.selected'\n        },\n        eraser: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-eraser\"></i></a>',\n            selected: '.selected'\n        },\n        quote: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-quotes-left\"></i></a>',\n            selected: '.selected'\n        },\n        source: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-code\"></i></a>',\n            selected: '.selected'\n        },\n        fontfamily: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-font2\"></i></a>',\n            selected: '.selected'\n        },\n        fontsize: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-text-height\"></i></a>',\n            selected: '.selected'\n        },\n        head: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-header\"></i></a>',\n            selected: '.selected'\n        },\n        orderlist: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-list-numbered\"></i></a>',\n            selected: '.selected'\n        },\n        unorderlist: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-list-bullet\"></i></a>',\n            selected: '.selected'\n        },\n        alignleft: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-align-left\"></i></a>',\n            selected: '.selected'\n        },\n        aligncenter: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-align-center\"></i></a>',\n            selected: '.selected'\n        },\n        alignright: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-align-right\"></i></a>',\n            selected: '.selected'\n        },\n        link: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-link\"></i></a>',\n            selected: '.selected'\n        },\n        unlink: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-unlink\"></i></a>',\n            selected: '.selected'\n        },\n        table: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-table\"></i></a>',\n            selected: '.selected'\n        },\n        emotion: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-happy\"></i></a>',\n            selected: '.selected'\n        },\n        img: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-picture\"></i></a>',\n            selected: '.selected'\n        },\n        video: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-play\"></i></a>',\n            selected: '.selected'\n        },\n        location: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-location\"></i></a>',\n            selected: '.selected'\n        },\n        insertcode: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-terminal\"></i></a>',\n            selected: '.selected'\n        },\n        undo: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-ccw\"></i></a>',\n            selected: '.selected'\n        },\n        redo: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-cw\"></i></a>',\n            selected: '.selected'\n        },\n        fullscreen: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-enlarge2\"></i></a>',\n            selected: '<a href=\"#\" tabindex=\"-1\" class=\"selected\"><i class=\"wangeditor-menu-img-shrink2\"></i></a>'\n        }\n     };\n});\n// 对象配置\n_e(function (E, $) {\n\n    E.fn.initDefaultConfig = function () {\n        var editor = this;\n        editor.config = $.extend({}, E.config);\n        editor.UI = $.extend({}, E.UI);\n    };\n});\n// 增加 container\n_e(function (E, $) {\n\n    E.fn.addEditorContainer = function () {\n        this.$editorContainer = $('<div class=\"wangEditor-container\"></div>');\n    };\n});\n// 增加编辑区域对象\n_e(function (E, $) {\n\n    E.fn.addTxt = function () {\n        var editor = this;\n        var txt = new E.Txt(editor);\n\n        editor.txt = txt;\n    };\n});\n// 增加menuContainer对象\n_e(function (E, $) {\n\n    E.fn.addMenuContainer = function () {\n        var editor = this;\n        editor.menuContainer = new E.MenuContainer(editor);\n    };\n});\n// 增加menus - createMenu|addMenus\n_e(function (E, $) {\n\n    // 存储创建菜单的函数\n    E.createMenuFns = [];\n    E.createMenu = function (fn) {\n        E.createMenuFns.push(fn);\n    };\n    // 创建所有菜单\n    E.fn.addMenus = function () {\n        var editor = this;\n        var menuIds = editor.config.menus;\n\n        // 检验 menuId 是否在配置中存在\n        function check(menuId) {\n            if (menuIds.indexOf(menuId) >= 0) {\n                return true;\n            }\n            return false;\n        }\n\n        // 遍历所有的菜单创建函数，并执行\n        $.each(E.createMenuFns, function (k, createMenuFn) {\n            createMenuFn.call(editor, check);\n        });\n    };\n});\n// bold菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'bold';\n        if (!check(menuId)) {\n            return;\n        }\n\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.bold,\n            commandName: 'Bold'\n        });\n\n        // 定义选中状态下的click事件\n        menu.clickEventSelected = function (e) {\n            var isRangeEmpty = editor.isRangeEmpty();\n            if (!isRangeEmpty) {\n                // 如果选区有内容，则执行基础命令\n                editor.command(e, 'Bold');\n            } else {\n                // 如果选区没有内容\n                editor.commandForElem('b,strong,h1,h2,h3,h4,h5', e, 'Bold');\n            }\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});\n// underline菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'underline';\n        if (!check(menuId)) {\n            return;\n        }\n\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.underline,\n            commandName: 'Underline'\n        });\n\n        // 定义选中状态下的click事件\n        menu.clickEventSelected = function (e) {\n            var isRangeEmpty = editor.isRangeEmpty();\n            if (!isRangeEmpty) {\n                // 如果选区有内容，则执行基础命令\n                editor.command(e, 'Underline');\n            } else {\n                // 如果选区没有内容\n                editor.commandForElem('u,a', e, 'Underline');\n            }\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// italic 菜单\n_e(function (E, $) {\n    \n    E.createMenu(function (check) {\n        var menuId = 'italic';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.italic,\n            commandName: 'Italic'\n        });\n\n        // 定义选中状态下的click事件\n        menu.clickEventSelected = function (e) {\n            var isRangeEmpty = editor.isRangeEmpty();\n            if (!isRangeEmpty) {\n                // 如果选区有内容，则执行基础命令\n                editor.command(e, 'Italic');\n            } else {\n                // 如果选区没有内容\n                editor.commandForElem('i', e, 'Italic');\n            }\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});\n// forecolor 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'forecolor';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n        var configColors = editor.config.colors;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.forecolor\n        });\n\n        // 创建 dropPanel\n        var $content = $('<div></div>');\n        $.each(configColors, function (k, v) {\n            $content.append(\n                [\n                    '<a href=\"#\" class=\"color-item\"',\n                    '    title=\"' + v + '\" commandValue=\"' + k + '\" ',\n                    '    style=\"color: ' + k + '\" ',\n                    '><i class=\"wangeditor-menu-img-pencil\"></i></a>'\n                ].join('')\n            );\n        });\n        $content.on('click', 'a[commandValue]', function (e) {\n            // 执行命令\n            var $elem = $(this);\n            var commandValue = $elem.attr('commandValue');\n\n            if (menu.selected && editor.isRangeEmpty()) {\n                // 当前处于选中状态，并且选中内容为空\n                editor.commandForElem('font[color]', e, 'forecolor', commandValue);\n            } else {\n                // 当前未处于选中状态，或者有选中内容。则执行默认命令\n                editor.command(e, 'forecolor', commandValue);\n            }\n        });\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $content,\n            width: 125\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'font[color]');\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// bgcolor 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'bgcolor';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n        var configColors = editor.config.colors;\n\n        // 检查元素是否有 background-color: 内联样式\n        function checkElemFn(elem) {\n            var cssText;\n            if (elem && elem.style && elem.style.cssText != null) {\n                cssText = elem.style.cssText;\n                if (cssText && cssText.indexOf('background-color:') >= 0) {\n                    return true;\n                }\n            }\n            return false;\n        }\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.bgcolor\n        });\n\n        // 创建 dropPanel\n        var $content = $('<div></div>');\n        $.each(configColors, function (k, v) {\n            $content.append(\n                [\n                    '<a href=\"#\" class=\"color-item\"',\n                    '    title=\"' + v + '\" commandValue=\"' + k + '\" ',\n                    '    style=\"color: ' + k + '\" ',\n                    '><i class=\"wangeditor-menu-img-brush\"></i></a>'\n                ].join('')\n            );\n        });\n        $content.on('click', 'a[commandValue]', function (e) {\n            // 执行命令\n\n            var $elem = $(this);\n            var commandValue = $elem.attr('commandValue');\n\n            if (menu.selected && editor.isRangeEmpty()) {\n                // 当前处于选中状态，并且选中内容为空。使用 commandForElem 执行命令\n                editor.commandForElem({\n                    selector: 'span,font',\n                    check: checkElemFn\n                }, e, 'BackColor', commandValue);\n            } else {\n                // 当前未处于选中状态，或者有选中内容。则执行默认命令\n                editor.command(e, 'BackColor', commandValue);\n            }\n        });\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $content,\n            width: 125\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'span,font', checkElemFn);\n            \n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// strikethrough 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'strikethrough';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.strikethrough,\n            commandName: 'StrikeThrough'\n        });\n\n        // 定义选中状态下的click事件\n        menu.clickEventSelected = function (e) {\n            var isRangeEmpty = editor.isRangeEmpty();\n            if (!isRangeEmpty) {\n                // 如果选区有内容，则执行基础命令\n                editor.command(e, 'StrikeThrough');\n            } else {\n                // 如果选区没有内容\n                editor.commandForElem('strike', e, 'StrikeThrough');\n            }\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});\n// eraser 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'eraser';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.eraser,\n            commandName: 'RemoveFormat'\n        });\n\n        // 定义点击事件\n        menu.clickEvent = function (e) {\n            var isRangeEmpty = editor.isRangeEmpty();\n\n            if (!isRangeEmpty) {\n                // 选区不是空的，则执行默认命令\n                editor.command(e, 'RemoveFormat');\n                return;\n            }\n\n            var $clearElem;\n\n            // 自定义的命令函数\n            function commandFn() {\n                var editor = this;\n                var rangeElem;\n                var pElem, $pElem;\n                var quoteElem, $quoteElem;\n                var listElem, $listElem;\n\n                // 获取选区 elem\n                rangeElem = editor.getRangeElem();\n                // 第一步，获取 quote 父元素\n                quoteElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n                if (quoteElem) {\n                    $quoteElem = $(quoteElem);\n                    $clearElem = $('<p>' + $quoteElem.text() + '</p>');\n                    $quoteElem.after($clearElem).remove();\n                }\n                // 第二步，获取 p h 父元素\n                pElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5');\n                if (pElem) {\n                    $pElem = $(pElem);\n                    $clearElem = $('<p>' + $pElem.text() + '</p>');\n                    $pElem.after($clearElem).remove();\n                }\n                // 第三步，获取list\n                listElem = editor.getSelfOrParentByName(rangeElem, 'ul,ol');\n                if (listElem) {\n                    $listElem = $(listElem);\n                    $clearElem = $('<p>' + $listElem.text() + '</p>');\n                    $listElem.after($clearElem).remove();\n                }\n            }\n\n            // 自定义 callback 事件\n            function callback() {\n                // callback中，设置range为clearElem\n                var editor = this;\n                if ($clearElem) {\n                    editor.restoreSelectionByElem($clearElem.get(0));\n                }\n            }\n\n            // 执行自定义命令\n            editor.customCommand(e, commandFn, callback);\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// source 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'source';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n        var txtHtml;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.source\n        });\n\n        menu.isShowCode = false;\n\n        // 更新内容\n        function updateValue() {\n            var $code = menu.$codeTextarea;\n            var $txt = editor.txt.$txt;\n            var value = $.trim($code.val()); // 取值\n\n            if (!value) {\n                value = '<p><br></p>';\n            }\n          \n            // 过滤js代码\n            if (editor.config.jsFilter) {\n                \n                value = value.replace(/<script[\\s\\S]*?<\\/script>/ig, '');\n            }\n            // 赋值\n            try {\n                $txt.html(value);\n            } catch (ex) {\n                // 更新 html 源码出错，一般都是取消了 js 过滤之后，js报错导致的\n            }\n        }\n\n        // 定义click事件\n        menu.clickEvent = function (e) {\n            var self = this;\n            var editor = self.editor;\n            var $txt = editor.txt.$txt;\n            var txtOuterHeight = $txt.outerHeight();\n            var txtHeight = $txt.height();\n\n            if (!self.$codeTextarea) {\n                self.$codeTextarea = $('<textarea class=\"code-textarea\"></textarea>');\n            }\n            var $code = self.$codeTextarea;\n            $code.css({\n                height: txtHeight,\n                'margin-top': txtOuterHeight - txtHeight\n            });\n\n            // 赋值\n            $code.val($txt.html());\n\n            // 监控变化\n            $code.on('change', function (e) {\n                updateValue();\n            });\n\n            // 渲染\n            $txt.after($code).hide();\n            $code.show();\n\n            // 更新状态\n            menu.isShowCode = true;\n\n            // 执行 updateSelected 事件\n            this.updateSelected();\n\n            // 禁用其他菜单\n            editor.disableMenusExcept('source');\n\n            // 记录当前html值\n            txtHtml = $txt.html();\n        };\n\n        // 定义选中状态下的click事件\n        menu.clickEventSelected = function (e) {\n            var self = this;\n            var editor = self.editor;\n            var $txt = editor.txt.$txt;\n            var $code = self.$codeTextarea;\n            var value;\n\n            if (!$code) {\n                return;\n            }\n\n            // 更新内容\n            updateValue();\n\n            // 渲染\n            $code.after($txt).hide();\n            $txt.show();\n\n            // 更新状态\n            menu.isShowCode = false;\n\n            // 执行 updateSelected 事件\n            this.updateSelected();\n\n            // 启用其他菜单\n            editor.enableMenusExcept('source');\n\n            // 判断是否执行 onchange 事件\n            if ($txt.html() !== txtHtml) {\n                if (editor.onchange && typeof editor.onchange === 'function') {\n                    editor.onchange.call(editor);\n                }\n            }\n        };\n\n        // 定义切换选中状态事件\n        menu.updateSelectedEvent = function () {\n            return this.isShowCode;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});\n// quote 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'quote';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.quote,\n            commandName: 'formatBlock',\n            commandValue: 'blockquote'\n        });\n\n        // 定义click事件\n        menu.clickEvent = function (e) {\n            var rangeElem = editor.getRangeElem();\n            var $rangeElem;\n            if (!rangeElem) {\n                e.preventDefault();\n                return;\n            }\n            var currentQuote = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n            var $quote;\n\n            if (currentQuote) {\n                // 说明当前在quote之内，不做任何处理\n                e.preventDefault();\n                return;\n            }\n\n            rangeElem = editor.getLegalTags(rangeElem);\n            $rangeElem = $(rangeElem);\n\n            // 无文字，则不允许执行引用\n            if (!$rangeElem.text()) {\n                return;\n            }\n\n\n            if (!rangeElem) {\n                // 执行默认命令\n                // IE8 下执行此处（不过，经测试代码无效，也不报错）\n                editor.command(e, 'formatBlock', 'blockquote');\n                return;\n            }\n\n            // 自定义command事件\n            function commandFn() {\n                $quote = $('<p>' + $rangeElem.text() + '</p>');\n                $rangeElem.after($quote).remove();\n                $quote.wrap('<blockquote>');\n            }\n\n            // 自定义 callback 事件\n            function callback() {\n                // callback中，设置range为quote\n                var editor = this;\n                if ($quote) {\n                    editor.restoreSelectionByElem($quote.get(0));\n                }\n            }\n\n            // 执行自定义命令\n            editor.customCommand(e, commandFn, callback);\n        };\n\n        // 定义选中状态下的click事件\n        menu.clickEventSelected = function (e) {\n            var rangeElem;\n            var quoteElem;\n            var $lastChild;\n\n            // 获取当前选区的elem，并试图往上找 quote 元素\n            rangeElem = editor.getRangeElem();\n            quoteElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n            if (!quoteElem) {\n                // 没找到，则返回\n                e.preventDefault();\n                return;\n            }\n\n            // 自定义的command事件\n            function commandFn() {\n                var $quoteElem;\n                var $children;\n\n                $quoteElem = $(quoteElem);\n                $children = $quoteElem.children();\n                if ($children.length) {\n                    $children.each(function (k) {\n                        var $item = $(this);\n                        if ($item.get(0).nodeName === 'P') {\n                            $quoteElem.after($item);\n                        } else {\n                            $quoteElem.after('<p>' + $item.text() + '</p>');\n                        }\n                        $lastChild = $item;  // 记录最后一个子元素，用于callback中的range定位\n                    });\n                    $quoteElem.remove();\n                    return;\n                }\n            }\n\n            // 自定义的callback函数\n            function callback() {\n                // callback中，设置range为lastChild\n                var editor = this;\n                if ($lastChild) {\n                    editor.restoreSelectionByElem($lastChild.get(0));\n                }\n            }\n\n            // 执行自定义命令\n            editor.customCommand(e, commandFn, callback);\n        };\n\n        // 定义更新选中状态的事件\n        menu.updateSelectedEvent = function () {\n            var self = this; //菜单对象\n            var editor = self.editor;\n            var rangeElem;\n\n            rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n\n            if (rangeElem) {\n                return true;\n            }\n\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n\n        // --------------- 两次点击 enter 跳出引用 ---------------\n        editor.ready(function () {\n            var editor = this;\n            var $txt = editor.txt.$txt;\n            var isPrevEnter = false;  // 是不是刚刚在quote中按了 enter 键\n            $txt.on('keydown', function (e) {\n                if (e.keyCode !== 13) {\n                    // 不是 enter 键\n                    isPrevEnter = false;\n                    return;\n                }\n\n                var rangeElem = editor.getRangeElem();\n                rangeElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n                if (!rangeElem) {\n                    // 选区不是 quote\n                    isPrevEnter = false;\n                    return;\n                }\n\n                if (!isPrevEnter) {\n                    // 最近没有在qote中按enter键\n                    isPrevEnter = true;\n                    return;\n                }\n\n                var currentRangeElem = editor.getRangeElem();\n                var $currentRangeElem = $(currentRangeElem);\n                if ($currentRangeElem.length) {\n                    $currentRangeElem.parent().after($currentRangeElem);\n                }\n\n                // 设置选区\n                editor.restoreSelectionByElem(currentRangeElem, 'start');\n\n                isPrevEnter = false;\n                // 阻止默认行文\n                e.preventDefault();\n\n            });\n        }); // editor.ready(\n\n        // --------------- 处理quote中无内容时不能删除的问题 ---------------\n        editor.ready(function () {\n            var editor = this;\n            var $txt = editor.txt.$txt;\n            var $rangeElem;\n\n            function commandFn() {\n                $rangeElem && $rangeElem.remove();\n            }\n            function callback() {\n                if (!$rangeElem) {\n                    return;\n                }\n                var $prev = $rangeElem.prev();\n                if ($prev.length) {\n                    // 有 prev 则定位到 prev 最后\n                    editor.restoreSelectionByElem($prev.get(0));\n                } else {\n                    // 无 prev 则初始化选区\n                    editor.initSelection();\n                }\n            }\n\n            $txt.on('keydown', function (e) {\n                if (e.keyCode !== 8) {\n                    // 不是 backspace 键\n                    return;\n                }\n\n                var rangeElem = editor.getRangeElem();\n                rangeElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n                if (!rangeElem) {\n                    // 选区不是 quote\n                    return;\n                }\n                $rangeElem = $(rangeElem);\n\n                var text = $rangeElem.text();\n                if (text) {\n                    // quote 中还有内容\n                    return;\n                }\n                editor.customCommand(e, commandFn, callback);\n\n            }); // $txt.on\n        }); // editor.ready(\n    });\n});*/\n// 字体 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'fontfamily';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n        var configFamilys = editor.config.familys;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.fontfamily,\n            commandName: 'fontName'\n        });\n\n        // 初始化数据\n        var data  = {};\n        \n        $.each(configFamilys, function (k, v) {\n            // configFamilys 是数组，data 是对象\n            data[v] = v;\n        });\n\n        // 创建droplist\n        var tpl = '<span style=\"font-family:{#commandValue};\">{#title}</span>';\n        menu.dropList = new E.DropList(editor, menu, {\n            data: data,\n            tpl: tpl,\n            selectorForELemCommand: 'font[face]'  // 为了执行 editor.commandForElem 而传入的elem查询方式\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'font[face]');\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// 字号 菜单\n/*_e(function (E, $) {\n    E.createMenu(function (check) {\n        var menuId = 'fontsize';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n        var configSize = editor.config.fontsizes;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.fontsize,\n            commandName: 'fontSize'\n        });\n\n        // 初始化数据\n        var data  = configSize;\n\n        // 创建droplist\n        var tpl = '<span style=\"font-size:{#title};\">{#title}</span>';\n        menu.dropList = new E.DropList(editor, menu, {\n            data: data,\n            tpl: tpl,\n            selectorForELemCommand: 'font[size]'  // 为了执行 editor.commandForElem 而传入的elem查询方式\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'font[size]');\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// head 菜单\n/*_e(function (E, $) {\n    E.createMenu(function (check) {\n        var menuId = 'head';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.head,\n            commandName: 'formatBlock'\n        });\n\n        // 初始化数据\n        var data  = {\n            '<h1>': '标题1',\n            '<h2>': '标题2',\n            '<h3>': '标题3',\n            '<h4>': '标题4',\n            '<h5>': '标题5'\n        };\n        var isOrderedList;\n        function beforeEvent(e) {\n            if (editor.queryCommandState('InsertOrderedList')) {\n                isOrderedList = true;\n\n                // 先取消有序列表\n                editor.command(e, 'InsertOrderedList');\n            } else {\n                isOrderedList = false;\n            }\n        }\n\n        function afterEvent(e) {\n            if (isOrderedList) {\n                // 再设置有序列表\n                editor.command(e, 'InsertOrderedList');\n            }\n        }\n\n        // 创建droplist\n        var tpl = '{#commandValue}{#title}';\n        menu.dropList = new E.DropList(editor, menu, {\n            data: data,\n            tpl: tpl,\n            // 对 ol 直接设置 head，会出现每个 li 的 index 都变成 1 的问题，因此要先取消 ol，然后设置 head，最后再增加上 ol\n            beforeEvent: beforeEvent,\n            afterEvent: afterEvent\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'h1,h2,h3,h4,h5');\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// unorderlist 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'unorderlist';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.unorderlist,\n            commandName: 'InsertUnorderedList'\n        });\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// orderlist 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'orderlist';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.orderlist,\n            commandName: 'InsertOrderedList'\n        });\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// alignleft 菜单\n/*_e(function (E, $) {\n    E.createMenu(function (check) {\n        var menuId = 'alignleft';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.alignleft,\n            commandName: 'JustifyLeft'\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5,li', function (elem) {\n                var cssText;\n                if (elem && elem.style && elem.style.cssText != null) {\n                    cssText = elem.style.cssText;\n                    if (cssText && /text-align:\\s*left;/.test(cssText)) {\n                        return true;\n                    }\n                }\n                if ($(elem).attr('align') === 'left') {\n                    // ff 中，设置align-left之后，会是 <p align=\"left\">xxx</p>\n                    return true;\n                }\n                return false;\n            });\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// aligncenter 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'aligncenter';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.aligncenter,\n            commandName: 'JustifyCenter'\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5,li', function (elem) {\n                var cssText;\n                if (elem && elem.style && elem.style.cssText != null) {\n                    cssText = elem.style.cssText;\n                    if (cssText && /text-align:\\s*center;/.test(cssText)) {\n                        return true;\n                    }\n                }\n                if ($(elem).attr('align') === 'center') {\n                    // ff 中，设置align-center之后，会是 <p align=\"center\">xxx</p>\n                    return true;\n                }\n                return false;\n            });\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// alignright 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'alignright';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.alignright,\n            commandName: 'JustifyRight'\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5,li', function (elem) {\n                var cssText;\n                if (elem && elem.style && elem.style.cssText != null) {\n                    cssText = elem.style.cssText;\n                    if (cssText && /text-align:\\s*right;/.test(cssText)) {\n                        return true;\n                    }\n                }\n                if ($(elem).attr('align') === 'right') {\n                    // ff 中，设置align-right之后，会是 <p align=\"right\">xxx</p>\n                    return true;\n                }\n                return false;\n            });\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// link 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'link';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.link\n        });\n\n        // 创建 dropPanel\n        var $content = $('<div></div>');\n        var $div1 = $('<div style=\"margin:20px 10px;\" class=\"clearfix\"></div>');\n        var $div2 = $div1.clone();\n        var $div3 = $div1.clone().css('margin', '0 10px');\n        var $textInput = $('<input type=\"text\" class=\"block\" placeholder=\"' + lang.text + '\"/>');\n        var $urlInput = $('<input type=\"text\" class=\"block\" placeholder=\"' + lang.link + '\"/>');\n        var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n        var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n\n        $div1.append($textInput);\n        $div2.append($urlInput);\n        $div3.append($btnSubmit).append($btnCancel);\n        $content.append($div1).append($div2).append($div3);\n        \n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $content,\n            width: 300\n        });\n\n        // 定义click事件\n        menu.clickEvent = function (e) {\n            var menu = this;\n            var dropPanel = menu.dropPanel;\n\n            // -------------隐藏----------------\n            if (dropPanel.isShowing) {\n                dropPanel.hide();\n                return;\n            }\n\n            // -------------显示----------------\n\n            // 重置 input\n            $textInput.val('');\n            $urlInput.val('http://');\n\n            // 获取url\n            var url = '';\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'a');\n            if (rangeElem) {\n                url = rangeElem.href || '';\n            }\n\n            // 获取 text\n            var text = '';\n            var isRangeEmpty = editor.isRangeEmpty();\n            if (!isRangeEmpty) {\n                // 选区不是空\n                text = editor.getRangeText() || '';\n            } else if (rangeElem) {\n                // 如果选区空，并且在 a 标签之内\n                text = rangeElem.textContent || rangeElem.innerHTML;\n            }\n\n            // 设置 url 和 text\n            url && $urlInput.val(url);\n            text && $textInput.val(text);\n\n            // 如果有选区内容，textinput 不能修改\n            if (!isRangeEmpty) {\n                $textInput.attr('disabled', true);\n            } else {\n                $textInput.removeAttr('disabled');\n            }\n\n            // 显示（要设置好了所有input的值和属性之后再显示）\n            dropPanel.show();\n        };\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'a');\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 『取消』 按钮\n        $btnCancel.click(function (e) {\n            e.preventDefault();\n            menu.dropPanel.hide();\n        });\n\n        // 『确定』按钮\n        $btnSubmit.click(function (e) {\n            e.preventDefault();\n            var rangeElem = editor.getRangeElem();\n            var targetElem = editor.getSelfOrParentByName(rangeElem, 'a');\n            var isRangeEmpty = editor.isRangeEmpty();\n\n            var $linkElem, linkHtml;\n            var commandFn, callback;\n            var $txt = editor.txt.$txt;\n            var $oldLinks, $newLinks;\n            var uniqId = 'link' + E.random();\n\n            // 获取数据\n            var url = $.trim($urlInput.val());\n            var text = $.trim($textInput.val());\n\n            if (!url) {\n                menu.dropPanel.focusFirstInput();\n                return;\n            }\n            if (!text) {\n                text = url;\n            }\n\n            if (!isRangeEmpty) {\n                // 选中区域有内容，则执行默认命令\n\n                // 获取目前 txt 内所有链接，并为当前链接做一个标记\n                $oldLinks = $txt.find('a');\n                $oldLinks.attr(uniqId, '1');\n\n                // 执行命令 \n                editor.command(e, 'createLink', url);\n\n                // 去的没有标记的链接，即刚刚插入的链接\n                $newLinks = $txt.find('a').not('[' + uniqId + ']');\n                $newLinks.attr('target', '_blank'); // 增加 _blank\n\n                // 去掉之前做的标记\n                $oldLinks.removeAttr(uniqId);\n\n            } else if (targetElem) {\n                // 无选中区域，在 a 标签之内，修改该 a 标签的内容和链接\n                $linkElem = $(targetElem);\n                commandFn = function () {\n                    $linkElem.attr('href', url);\n                    $linkElem.text(text);\n                };\n                callback = function () {\n                    var editor = this;\n                    editor.restoreSelectionByElem(targetElem);\n                };\n                // 执行命令\n                editor.customCommand(e, commandFn, callback);\n            } else {\n                // 无选中区域，不在 a 标签之内，插入新的链接\n\n                linkHtml = '<a href=\"' + url + '\" target=\"_blank\">' + text + '</a>';\n                if (E.userAgent.indexOf('Firefox') > 0) {\n                    linkHtml += '<span>&nbsp;</span>';\n                }\n                editor.command(e, 'insertHtml', linkHtml);\n            }\n\n        });\n        \n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// unlink 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'unlink';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.unlink,\n            commandName: 'unLink'\n        });\n\n        // click 事件\n        menu.clickEvent = function  (e) {\n            var isRangeEmpty = editor.isRangeEmpty();\n            if (!isRangeEmpty) {\n                // 有选中区域，或者IE8，执行默认命令\n                editor.command(e, 'unLink');\n                return;\n            }\n\n            // 无选中区域...\n\n            var rangeElem = editor.getRangeElem();\n            var aElem = editor.getSelfOrParentByName(rangeElem, 'a');\n            if (!aElem) {\n                // 不在 a 之内，返回\n                e.preventDefault();\n                return;\n            }\n\n            // 在 a 之内\n            var $a = $(aElem);\n            var $span = $('<span>' + $a.text() + '</span>');\n            function commandFn() {\n                $a.after($span).remove();\n            }\n            function callback() {\n                editor.restoreSelectionByElem($span.get(0));\n            }\n            editor.customCommand(e, commandFn, callback);\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// table 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'table';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.table\n        });\n\n        // dropPanel 内容\n        var $content = $('<div style=\"font-size: 14px; color: #666; text-align:right;\"></div>');\n        var $table = $('<table class=\"choose-table\" style=\"margin-bottom:10px;margin-top:5px;\">');\n        var $row = $('<span>0</span>');\n        var $rowspan = $('<span> 行 </span>');\n        var $col = $('<span>0</span>');\n        var $colspan = $('<span> 列</span>');\n        var $tr;\n        var i, j;\n\n        // 创建一个n行n列的表格\n        for (i = 0; i < 15; i++) {\n            $tr = $('<tr index=\"' + (i + 1) + '\">');\n            for (j = 0; j < 20; j++) {\n                $tr.append($('<td index=\"' + (j + 1) + '\">'));\n            }\n            $table.append($tr);\n        }\n        $content.append($table);\n        $content.append($row).append($rowspan).append($col).append($colspan);\n\n        // 定义table事件\n        $table.on('mouseenter', 'td', function (e) {\n            var $currentTd = $(e.currentTarget);\n            var currentTdIndex = $currentTd.attr('index');\n            var $currentTr = $currentTd.parent();\n            var currentTrIndex = $currentTr.attr('index');\n\n            // 显示\n            $row.text(currentTrIndex);\n            $col.text(currentTdIndex);\n\n            // 遍历设置背景颜色\n            $table.find('tr').each(function () {\n                var $tr = $(this);\n                var trIndex = $tr.attr('index');\n                if (parseInt(trIndex, 10) <= parseInt(currentTrIndex, 10)) {\n                    // 该行需要可能需要设置背景色\n                    $tr.find('td').each(function () {\n                        var $td = $(this);\n                        var tdIndex = $td.attr('index');\n                        if (parseInt(tdIndex, 10) <= parseInt(currentTdIndex, 10)) {\n                            // 需要设置背景色\n                            $td.addClass('active');\n                        } else {\n                            // 需要移除背景色\n                            $td.removeClass('active');\n                        }\n                    });\n                } else {\n                    // 改行不需要设置背景色\n                    $tr.find('td').removeClass('active');\n                }\n            });\n        }).on('mouseleave', function (e) {\n            // mouseleave 删除背景色\n            $table.find('td').removeClass('active');\n\n            $row.text(0);\n            $col.text(0);\n        });\n\n        // 插入表格\n        $table.on('click', 'td', function (e) {\n            var $currentTd = $(e.currentTarget);\n            var currentTdIndex = $currentTd.attr('index');\n            var $currentTr = $currentTd.parent();\n            var currentTrIndex = $currentTr.attr('index');\n\n            var rownum = parseInt(currentTrIndex, 10);\n            var colnum = parseInt(currentTdIndex, 10);\n\n            // -------- 拼接tabel html --------\n\n            var i, j;\n            var tableHtml = '<table>';\n            for (i = 0; i < rownum; i++) {\n                tableHtml += '<tr>';\n\n                for (j = 0; j < colnum; j++) {\n                    tableHtml += '<td><span>&nbsp;</span></td>';\n                }\n                tableHtml += '</tr>';\n            }\n            tableHtml += '</table>';\n\n            // -------- 执行命令 --------\n            editor.command(e, 'insertHtml', tableHtml);\n        });\n\n        // 创建 panel\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $content,\n            width: 262\n        });\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// emotion 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'emotion';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var config = editor.config;\n        var lang = config.lang;\n        var configEmotions = config.emotions;\n        var emotionsShow = config.emotionsShow;\n\n        // 记录每一个表情图片的地址\n        editor.emotionUrls = [];\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.emotion\n        });\n\n        // 添加表情图片的函数\n        function insertEmotionImgs(data, $tabContent) {\n            // 添加表情图片\n            $.each(data, function (k, emotion) {\n                var src = emotion.icon || emotion.url;\n                var value = emotion.value || emotion.title;\n                // 通过配置 editor.config.emotionsShow 的值来修改插入到编辑器的内容（图片/value）\n                var commandValue = emotionsShow === 'icon' ? src : value;\n                var $command = $('<a href=\"#\" commandValue=\"' + commandValue + '\"></a>');\n                var $img = $('<img>');\n                $img.attr('_src', src);  // 先将 src 复制到 '_src' 属性，先不加载\n\n                $command.append($img);\n                $tabContent.append($command);\n\n                // 记录下每一个表情图片的地址\n                editor.emotionUrls.push(src);\n            });\n        }\n\n        // 拼接 dropPanel 内容\n        var $panelContent = $('<div class=\"panel-tab\"></div>');\n        var $tabContainer = $('<div class=\"tab-container\"></div>');\n        var $contentContainer = $('<div class=\"content-container emotion-content-container\"></div>');\n        $.each(configEmotions, function (k, emotion) {\n            var title = emotion.title;\n            var data = emotion.data;\n\n            E.log('正在处理 ' + title + ' 表情的数据...');\n\n            // 增加该组表情的tab和content\n            var $tab = $('<a href=\"#\">' + title +' </a>');\n            $tabContainer.append($tab);\n            var $tabContent = $('<div class=\"content\"></div>');\n            $contentContainer.append($tabContent);\n\n            // tab 切换事件\n            $tab.click(function (e) {\n                $tabContainer.children().removeClass('selected');\n                $contentContainer.children().removeClass('selected');\n                $tabContent.addClass('selected');\n                $tab.addClass('selected');\n                e.preventDefault();\n            });\n\n            // 处理data\n            if (typeof data === 'string') {\n                // url 形式，需要通过ajax从该url获取数据\n                E.log('将通过 ' + data + ' 地址ajax下载表情包');\n                $.get(data, function (result) {\n                    result = $.parseJSON(result);\n                    E.log('下载完毕，得到 ' + result.length + ' 个表情');\n                    insertEmotionImgs(result, $tabContent);\n                });\n                \n            } else if ( Object.prototype.toString.call(data).toLowerCase().indexOf('array') > 0 ) {\n                // 数组，即 data 直接就是表情包数据\n                insertEmotionImgs(data, $tabContent);\n            } else {\n                // 其他情况，data格式不对\n                E.error('data 数据格式错误，请修改为正确格式，参考文档：' + E.docsite);\n                return;\n            }\n        });\n        $panelContent.append($tabContainer).append($contentContainer);\n\n        // 默认显示第一个tab\n        $tabContainer.children().first().addClass('selected');\n        $contentContainer.children().first().addClass('selected');\n\n        // 插入表情command事件\n        $contentContainer.on('click', 'a[commandValue]', function (e) {\n            var $a = $(e.currentTarget);\n            var commandValue = $a.attr('commandValue');\n            var img;\n\n            // commandValue 有可能是图片url，也有可能是表情的 value，需要区别对待\n\n            if (emotionsShow === 'icon') {\n                // 插入图片\n                editor.command(e, 'InsertImage', commandValue);\n            } else {\n                // 插入value\n                editor.command(e, 'insertHtml', '<span>' + commandValue + '</span>');\n            }\n\n            e.preventDefault();\n        });\n\n        // 添加panel\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $panelContent,\n            width: 350\n        });\n\n        // 定义click事件（异步加载表情图片）\n        menu.clickEvent = function (e) {\n            var menu = this;\n            var dropPanel = menu.dropPanel;\n\n            // -------------隐藏-------------\n            if (dropPanel.isShowing) {\n                dropPanel.hide();\n                return;\n            }\n\n            // -------------显示-------------\n            dropPanel.show();\n\n            // 异步加载图片\n            if (menu.imgLoaded) {\n                return;\n            }\n            $contentContainer.find('img').each(function () {\n                var $img = $(this);\n                var _src = $img.attr('_src');\n                $img.on('error', function () {\n                    E.error('加载不出表情图片 ' + _src);\n                });\n                $img.attr('src', _src);\n                $img.removeAttr('_src');\n            });\n            menu.imgLoaded = true;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// img 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'img';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.img,\n            _id: \"edit_upload_image_select\"\n        });\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});\n// video 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'video';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n        var reg = /^<(iframe)|(embed)/i;  // <iframe... 或者 <embed... 格式\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.video\n        });\n\n        // 创建 panel 内容\n        var $content = $('<div></div>');\n        var $linkInputContainer = $('<div style=\"margin:20px 10px;\"></div>');\n        var $linkInput = $('<input type=\"text\" class=\"block\" placeholder=\\'格式如：<iframe src=\"...\" frameborder=0 allowfullscreen></iframe>\\'/>');\n        $linkInputContainer.append($linkInput);\n        var $sizeContainer = $('<div style=\"margin:20px 10px;\"></div>');\n        var $widthInput = $('<input type=\"text\" value=\"640\" style=\"width:50px;text-align:center;\"/>');\n        var $heightInput = $('<input type=\"text\" value=\"498\" style=\"width:50px;text-align:center;\"/>');\n        $sizeContainer.append('<span> ' + lang.width + ' </span>')\n                      .append($widthInput)\n                      .append('<span> px &nbsp;&nbsp;&nbsp;</span>')\n                      .append('<span> ' + lang.height + ' </span>')\n                      .append($heightInput)\n                      .append('<span> px </span>');\n        var $btnContainer = $('<div></div>');\n        var $howToCopy = $('<a href=\"http://www.kancloud.cn/wangfupeng/wangeditor2/134973\" target=\"_blank\" style=\"display:inline-block;margin-top:10px;margin-left:10px;color:#999;\">如何复制视频链接？</a>');\n        var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n        var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n        $btnContainer.append($howToCopy).append($btnSubmit).append($btnCancel);\n        $content.append($linkInputContainer).append($sizeContainer).append($btnContainer);\n\n        // 取消按钮\n        $btnCancel.click(function (e) {\n            e.preventDefault();\n            $linkInput.val('');\n            menu.dropPanel.hide();\n        });\n\n        // 确定按钮\n        $btnSubmit.click(function (e) {\n            e.preventDefault();\n            var link = $.trim($linkInput.val());\n            var $link;\n            var width = parseInt($widthInput.val());\n            var height = parseInt($heightInput.val());\n            var $div = $('<div>');\n            var html = '<p>{content}</p>';\n\n            // 验证数据\n            if (!link) {\n                menu.dropPanel.focusFirstInput();\n                return;\n            }\n\n            if (!reg.test(link)) {\n                alert('视频链接格式错误！');\n                menu.dropPanel.focusFirstInput();\n                return;\n            }\n\n            if (isNaN(width) || isNaN(height)) {\n                alert('宽度或高度不是数字！');\n                return;\n            }\n\n            $link = $(link);\n\n            // 设置高度和宽度\n            $link.attr('width', width)\n                 .attr('height', height);\n\n            // 拼接字符串\n            html = html.replace('{content}', $div.append($link).html());\n\n            // 执行命令\n            editor.command(e, 'insertHtml', html);\n            $linkInput.val('');\n        });\n\n        // 创建panel\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $content,\n            width: 400\n        });\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// location 菜单\n/*_e(function (E, $) {\n\n    // 判断浏览器的 input 是否支持 keyup\n    var inputKeyup = (function (input) {\n        return 'onkeyup' in input;\n    })(document.createElement('input'));\n\n    // 百度地图的key\n    E.baiduMapAk = 'TVhjYjq1ICT2qqL5LdS8mwas';\n\n    // 一个页面中，如果有多个编辑器，地图会出现问题。这个参数记录一下，如果超过 1 就提示\n    E.numberOfLocation = 0;\n\n    E.createMenu(function (check) {\n        var menuId = 'location';\n        if (!check(menuId)) {\n            return;\n        }\n\n        if (++E.numberOfLocation > 1) {\n            E.error('目前不支持在一个页面多个编辑器上同时使用地图，可通过自定义菜单配置去掉地图菜单');\n            return;\n        }\n\n        var editor = this;\n        var config = editor.config;\n        var lang = config.lang;\n        var ak = config.mapAk;\n\n        // 地图的变量存储到这个地方\n        editor.mapData = {};\n        var mapData = editor.mapData;\n\n        // ---------- 地图事件 ----------\n        mapData.markers = [];\n        mapData.mapContainerId = 'map' + E.random();\n\n        mapData.clearLocations = function () {\n            var map = mapData.map;\n            if (!map) {\n                return;\n            }\n            map.clearOverlays();\n\n            //同时，清空marker数组\n            mapData.markers = [];\n        };\n\n        mapData.searchMap = function () {\n            var map = mapData.map;\n            if (!map) {\n                return;\n            }\n\n            var BMap = window.BMap;\n            var cityName = $cityInput.val();\n            var locationName = $searchInput.val();\n            var myGeo, marker;\n\n            if(cityName !== ''){\n                if(!locationName || locationName === ''){\n                    map.centerAndZoom(cityName, 11);\n                }\n\n                //地址解析\n                if(locationName && locationName !== ''){\n                    myGeo = new BMap.Geocoder();\n                    // 将地址解析结果显示在地图上,并调整地图视野\n                    myGeo.getPoint(locationName, function(point){\n                        if (point) {\n                            map.centerAndZoom(point, 13);\n                            marker = new BMap.Marker(point);\n                            map.addOverlay(marker);\n                            marker.enableDragging();  //允许拖拽\n                            mapData.markers.push(marker);  //将marker加入到数组中\n                        }else{\n                            // alert('未找到');\n                            map.centerAndZoom(cityName, 11);  //找不到则重新定位到城市\n                        }\n                    }, cityName);\n                }\n            } // if(cityName !== '')\n        };\n\n        // load script 之后的 callback\n        var hasCallback = false;\n        window.baiduMapCallBack = function(){\n            // 避免重复加载\n            if (hasCallback) {\n                return;\n            } else {\n                hasCallback = true;\n            }\n\n            var BMap = window.BMap;\n            if (!mapData.map) {\n                // 创建Map实例\n                mapData.map = new BMap.Map(mapData.mapContainerId);\n            }\n            var map = mapData.map;\n\n            map.centerAndZoom(new BMap.Point(116.404, 39.915), 11);  // 初始化地图,设置中心点坐标和地图级别\n            map.addControl(new BMap.MapTypeControl());   //添加地图类型控件\n            map.setCurrentCity(\"北京\");          // 设置地图显示的城市 此项是必须设置的\n            map.enableScrollWheelZoom(true);     //开启鼠标滚轮缩放\n\n            //根据IP定位\n            function locationFun(result){\n                var cityName = result.name;\n                map.setCenter(cityName);\n\n                // 设置城市名称\n                $cityInput.val(cityName);\n                if (E.placeholder) {\n                    $searchInput.focus();\n                }\n                var timeoutId, searchFn;\n                if (inputKeyup) {\n                   // 并绑定搜索事件 - input 支持 keyup\n                   searchFn = function (e) {\n                       if (e.type === 'keyup' && e.keyCode === 13) {\n                           e.preventDefault();\n                       }\n                       if (timeoutId) {\n                           clearTimeout(timeoutId);\n                       }\n                       timeoutId = setTimeout(mapData.searchMap, 500);\n                   };\n                   $cityInput.on('keyup change paste', searchFn);\n                   $searchInput.on('keyup change paste', searchFn); \n                } else {\n                    // 并绑定搜索事件 - input 不支持 keyup\n                    searchFn = function () {\n                        if (!$content.is(':visible')) {\n                            // panel 不显示了，就不用再监控了\n                            clearTimeout(timeoutId);\n                            return;\n                        }\n\n                        var currentCity = '';\n                        var currentSearch = '';\n                        var city = $cityInput.val();\n                        var search = $searchInput.val();\n\n                        if (city !== currentCity || search !== currentSearch) {\n                            // 刚获取的数据和之前的数据不一致，执行查询\n                            mapData.searchMap();\n                            // 更新数据\n                            currentCity = city;\n                            currentSearch = search;\n                        }\n\n                        // 继续监控\n                        if (timeoutId) {\n                            clearTimeout(timeoutId);\n                        }\n                        timeoutId = setTimeout(searchFn, 1000);\n                    };\n                    // 开始监控\n                    timeoutId = setTimeout(searchFn, 1000);\n                }\n            }\n            var myCity = new BMap.LocalCity();\n            myCity.get(locationFun);\n\n            //鼠标点击，创建位置\n            map.addEventListener(\"click\", function(e){\n                var marker = new BMap.Marker(new BMap.Point(e.point.lng, e.point.lat)); \n                map.addOverlay(marker);  \n                marker.enableDragging();\n                mapData.markers.push(marker);  //加入到数组中\n            }, false);\n        };\n\n        mapData.loadMapScript = function () {\n            var script = document.createElement(\"script\");\n            script.type = \"text/javascript\";\n            script.src = \"https://api.map.baidu.com/api?v=2.0&ak=\" + ak + \"&s=1&callback=baiduMapCallBack\";  // baiduMapCallBack是一个本地函数\n            try {\n                // IE10- 报错\n                document.body.appendChild(script);\n            } catch (ex) {\n                E.error('加载地图过程中发生错误');\n            }\n        };\n\n        // 初始化地图\n        mapData.initMap = function () {\n            if (window.BMap) {\n                // 不是第一次，直接处理地图即可\n                window.baiduMapCallBack();\n            } else {\n                // 第一次，先加载地图 script，再处理地图（script加载完自动执行处理）\n                mapData.loadMapScript();\n            }\n        };\n\n        // ---------- 创建 menu 对象 ----------\n\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.location\n        });\n\n        editor.menus[menuId] = menu;\n\n        // ---------- 构建UI ----------\n\n        // panel content \n        var $content = $('<div></div>');\n\n        // 搜索框\n        var $inputContainer = $('<div style=\"margin:10px 0;\"></div>');\n        var $cityInput = $('<input type=\"text\"/>');\n        $cityInput.css({\n            width: '80px',\n            'text-align': 'center'\n        });\n        var $searchInput = $('<input type=\"text\"/>');\n        $searchInput.css({\n            width: '300px',\n            'margin-left': '10px'\n        }).attr('placeholder', lang.searchlocation);\n        var $clearBtn = $('<button class=\"right link\">' + lang.clearLocation + '</button>');\n        $inputContainer.append($clearBtn)\n                       .append($cityInput)\n                       .append($searchInput);\n        $content.append($inputContainer);\n\n        // 清除位置按钮\n        $clearBtn.click(function (e) {\n            $searchInput.val('');\n            $searchInput.focus();\n            mapData.clearLocations();\n            e.preventDefault();\n        });\n\n        // 地图\n        var $map = $('<div id=\"' + mapData.mapContainerId + '\"></div>');\n        $map.css({\n            height: '260px',\n            width: '100%',\n            position: 'relative',\n            'margin-top': '10px',\n            border: '1px solid #f1f1f1'\n        });\n        var $mapLoading = $('<span>' + lang.loading + '</span>');\n        $mapLoading.css({\n            position: 'absolute',\n            width: '100px',\n            'text-align': 'center',\n            top: '45%',\n            left: '50%',\n            'margin-left': '-50px'\n        });\n        $map.append($mapLoading);\n        $content.append($map);\n\n        // 按钮\n        var $btnContainer = $('<div style=\"margin:10px 0;\"></div>');\n        var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n        var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n        var $checkLabel = $('<label style=\"display:inline-block;margin-top:10px;color:#666;\"></label>');\n        var $check = $('<input type=\"checkbox\">');\n        $checkLabel.append($check).append('<span style=\"display:inline-block;margin-left:5px;\">  ' + lang.dynamicMap + '</span>');\n        $btnContainer.append($checkLabel)\n                     .append($btnSubmit)\n                     .append($btnCancel);\n        $content.append($btnContainer);\n\n        function callback() {\n            $searchInput.val('');\n        }\n\n        // 『取消』按钮事件\n        $btnCancel.click(function (e) {\n            e.preventDefault();\n            callback();\n            menu.dropPanel.hide();\n        });\n\n        // 『确定』按钮事件\n        $btnSubmit.click(function (e) {\n            e.preventDefault();\n            var map = mapData.map,\n                isDynamic = $check.is(':checked'),\n                markers =  mapData.markers,\n\n                center = map.getCenter(),\n                centerLng = center.lng,\n                centerLat = center.lat,\n\n                zoom = map.getZoom(),\n\n                size = map.getSize(),\n                sizeWidth = size.width,\n                sizeHeight = size.height,\n\n                position,\n                src,\n                iframe;\n\n            if(isDynamic){\n                //动态地址\n                src = 'http://ueditor.baidu.com/ueditor/dialogs/map/show.html#';\n            }else{\n                //静态地址\n                src = 'http://api.map.baidu.com/staticimage?';\n            }\n\n            //src参数\n            src = src +'center=' + centerLng + ',' + centerLat +\n                '&zoom=' + zoom +\n                '&width=' + sizeWidth +\n                '&height=' + sizeHeight;\n            if(markers.length > 0){\n                src = src + '&markers=';\n\n                //添加所有的marker\n                $.each(markers, function(key, value){\n                    position = value.getPosition();\n                    if(key > 0){\n                        src = src + '|';\n                    }\n                    src = src + position.lng + ',' + position.lat;\n                });\n            }\n\n            if(isDynamic){\n                if(markers.length > 1){\n                    alert( lang.langDynamicOneLocation );\n                    return;\n                }\n\n                src += '&markerStyles=l,A';\n\n                //插入iframe\n                iframe = '<iframe class=\"ueditor_baidumap\" src=\"{src}\" frameborder=\"0\" width=\"' + sizeWidth + '\" height=\"' + sizeHeight + '\"></iframe>';\n                iframe = iframe.replace('{src}', src);\n                editor.command(e, 'insertHtml', iframe, callback);\n            }else{\n                //插入图片\n                editor.command(e, 'insertHtml', '<img style=\"max-width:100%;\" src=\"' + src + '\"/>', callback);\n            }\n        });\n\n        // 根据 UI 创建菜单 panel\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $content,\n            width: 500\n        });\n\n        // ---------- 事件 ----------\n\n        // render 时执行事件\n        menu.onRender = function () {\n            if (ak === E.baiduMapAk) {\n                E.warn('建议在配置中自定义百度地图的mapAk，否则可能影响地图功能，文档：' + E.docsite);\n            }\n        };\n\n        // click 事件\n        menu.clickEvent = function (e) {\n            var menu = this;\n            var dropPanel = menu.dropPanel;\n            var firstTime = false;\n\n            // -------------隐藏-------------\n            if (dropPanel.isShowing) {\n                dropPanel.hide();\n                return;\n            }\n\n            // -------------显示-------------\n            if (!mapData.map) {\n                // 第一次，先加载地图\n                firstTime = true;\n            }\n            \n            dropPanel.show();\n            mapData.initMap();\n\n            if (!firstTime) {\n                $searchInput.focus();\n            }\n        };\n\n    });\n});*/\n// insertcode 菜单\n/*_e(function (E, $) {\n\n    // 加载 highlightjs 代码\n    function loadHljs() {\n        if (E.userAgent.indexOf('MSIE 8') > 0) {\n            // 不支持 IE8\n            return;\n        }\n        if (window.hljs) {\n            // 不要重复加载\n            return;\n        }\n        var script = document.createElement(\"script\");\n        script.type = \"text/javascript\";\n        script.src = \"//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js\";\n        document.body.appendChild(script);\n    }\n    \n\n    E.createMenu(function (check) {\n        var menuId = 'insertcode';\n        if (!check(menuId)) {\n            return;\n        }\n\n        // 加载 highlightjs 代码\n        setTimeout(loadHljs, 0);\n\n        var editor = this;\n        var config = editor.config;\n        var lang = config.lang;\n        var $txt = editor.txt.$txt;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.insertcode\n        });\n\n        // click 事件\n        menu.clickEvent = function (e) {\n            var menu = this;\n            var dropPanel = menu.dropPanel;\n\n            // 隐藏\n            if (dropPanel.isShowing) {\n                dropPanel.hide();\n                return;\n            }\n\n            // 显示\n            $textarea.val('');\n            dropPanel.show();\n\n            // highlightjs 语言列表\n            var hljs = window.hljs;\n            if (hljs && hljs.listLanguages) {\n                if ($langSelect.children().length !== 0) {\n                    return;\n                }\n                $langSelect.css({\n                    'margin-top': '9px',\n                    'margin-left': '5px'\n                });\n                $.each(hljs.listLanguages(), function (key, lang) {\n                    if (lang === 'xml') {\n                        lang = 'html';\n                    }\n                    if (lang === config.codeDefaultLang) {\n                        $langSelect.append('<option value=\"' + lang + '\" selected=\"selected\">' + lang + '</option>');\n                    } else {\n                        $langSelect.append('<option value=\"' + lang + '\">' + lang + '</option>');\n                    }\n                });\n            } else {\n                $langSelect.hide();\n            }\n        };\n\n        // 选中状态下的 click 事件\n        menu.clickEventSelected = function (e) {\n            var menu = this;\n            var dropPanel = menu.dropPanel;\n\n            // 隐藏\n            if (dropPanel.isShowing) {\n                dropPanel.hide();\n                return;\n            }\n\n            // 显示\n            dropPanel.show();\n\n            var rangeElem = editor.getRangeElem();\n            var targetElem = editor.getSelfOrParentByName(rangeElem, 'pre');\n            var $targetElem;\n            var className;\n            if (targetElem) {\n                // 确定找到 pre 之后，再找 code\n                targetElem = editor.getSelfOrParentByName(rangeElem, 'code');\n            }\n            if (!targetElem) {\n                return;\n            }\n            $targetElem = $(targetElem);\n\n            // 赋值内容\n            $textarea.val($targetElem.text());\n            if ($langSelect) {\n                // 赋值语言\n                className = $targetElem.attr('class');\n                if (className) {\n                    $langSelect.val(className.split(' ')[0]);\n                }\n            }\n        };\n\n        // 定义更新选中状态的事件\n        menu.updateSelectedEvent = function () {\n            var self = this; //菜单对象\n            var editor = self.editor;\n            var rangeElem;\n\n            rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'pre');\n\n            if (rangeElem) {\n                return true;\n            }\n\n            return false;\n        };\n\n        // 创建 panel\n        var $content = $('<div></div>');\n        var $textarea = $('<textarea></textarea>');\n        var $langSelect = $('<select></select>');\n        contentHandle($content);\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $content,\n            width: 500\n        });\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n\n        // ------ 增加 content 内容 ------\n        function contentHandle($content) {\n            // textarea 区域\n            var $textareaContainer = $('<div></div>');\n            $textareaContainer.css({\n                margin: '15px 5px 5px 5px',\n                height: '160px',\n                'text-align': 'center'\n            });\n            $textarea.css({\n                width: '100%',\n                height: '100%',\n                padding: '10px'\n            });\n            $textarea.on('keydown', function (e) {\n                // 取消 tab 键默认行为\n                if (e.keyCode === 9) {\n                    e.preventDefault();\n                }\n            });\n            $textareaContainer.append($textarea);\n            $content.append($textareaContainer);\n\n            // 按钮区域\n            var $btnContainer = $('<div></div>');\n            var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n            var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n\n            $btnContainer.append($btnSubmit).append($btnCancel).append($langSelect);\n            $content.append($btnContainer);\n\n            // 取消按钮\n            $btnCancel.click(function (e) {\n                e.preventDefault();\n                menu.dropPanel.hide();\n            });\n\n            // 确定按钮\n            var codeTpl = '<pre style=\"max-width:100%;overflow-x:auto;\"><code{#langClass}>{#content}</code></pre>';\n            $btnSubmit.click(function (e) {\n                e.preventDefault();\n                var val = $textarea.val();\n                if (!val) {\n                    // 无内容\n                    $textarea.focus();\n                    return;\n                }\n\n                var rangeElem = editor.getRangeElem();\n                if ($.trim($(rangeElem).text()) && codeTpl.indexOf('<p><br></p>') !== 0) {\n                    codeTpl = '<p><br></p>' + codeTpl;\n                }\n\n                var lang = $langSelect ? $langSelect.val() : ''; // 获取高亮语言\n                var langClass = '';\n                var doHightlight = function () {\n                    $txt.find('pre code').each(function (i, block) {\n                        var $block = $(block);\n                        if ($block.attr('codemark')) {\n                            // 有 codemark 标记的代码块，就不再重新格式化了\n                            return;\n                        } else if (window.hljs) {\n                            // 新代码块，格式化之后，立即标记 codemark\n                            window.hljs.highlightBlock(block);\n                            $block.attr('codemark', '1');\n                        }\n                    });\n                };\n\n                // 语言高亮样式\n                if (lang) {\n                    langClass = ' class=\"' + lang + ' hljs\"';\n                }\n\n                // 替换标签\n                val = val.replace(/&/gm, '&amp;')\n                         .replace(/</gm, '&lt;')\n                         .replace(/>/gm, '&gt;');\n\n                // ---- menu 未选中状态 ----\n                if (!menu.selected) {\n                    // 拼接html\n                    var html = codeTpl.replace('{#langClass}', langClass).replace('{#content}', val);\n                    editor.command(e, 'insertHtml', html, doHightlight);\n                    return;\n                }\n\n                // ---- menu 选中状态 ----\n                var targetElem = editor.getSelfOrParentByName(rangeElem, 'pre');\n                var $targetElem;\n                if (targetElem) {\n                    // 确定找到 pre 之后，再找 code\n                    targetElem = editor.getSelfOrParentByName(rangeElem, 'code');\n                }\n                if (!targetElem) {\n                    return;\n                }\n                $targetElem = $(targetElem);\n\n                function commandFn() {\n                    var className;\n                    if (lang) {\n                        className = $targetElem.attr('class');\n                        if (className !== lang + ' hljs') {\n                            $targetElem.attr('class', lang + ' hljs');\n                        }\n                    }\n                    $targetElem.html(val);\n                }\n                function callback() {\n                    editor.restoreSelectionByElem(targetElem);\n                    doHightlight();\n                }\n                editor.customCommand(e, commandFn, callback);\n            });\n        }\n\n        // ------ enter 时，不另起标签，只换行 ------\n        $txt.on('keydown', function (e) {\n            if (e.keyCode !== 13) {\n                return;\n            }\n            var rangeElem = editor.getRangeElem();\n            var targetElem = editor.getSelfOrParentByName(rangeElem, 'code');\n            if (!targetElem) {\n                return;\n            }\n\n            editor.command(e, 'insertHtml', '\\n');\n        });\n\n        // ------ 点击时，禁用其他标签 ------\n        function updateMenu() {\n            var rangeElem = editor.getRangeElem();\n            var targetElem = editor.getSelfOrParentByName(rangeElem, 'code');\n            if (targetElem) {\n                // 在 code 之内，禁用其他菜单\n                editor.disableMenusExcept('insertcode');\n            } else {\n                // 不是在 code 之内，启用其他菜单\n                editor.enableMenusExcept('insertcode');\n            }\n        }\n        $txt.on('keydown click', function (e) {\n            // 此处必须使用 setTimeout 异步处理，否则不对\n            setTimeout(updateMenu);\n        });\n    });\n});*/\n// undo 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'undo';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.undo\n        });\n\n        // click 事件\n        menu.clickEvent = function (e) {\n            editor.undo();\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n\n\n        // ------------ 初始化时、enter 时、打字中断时，做记录 ------------\n        // ------------ ctrl + z 是调用记录撤销，而不是使用浏览器默认的撤销 ------------\n        editor.ready(function () {\n            var editor = this;\n            var $txt = editor.txt.$txt;\n            var timeoutId;\n\n            // 执行undo记录\n            function undo() {\n                editor.undoRecord();\n            }\n\n            $txt.on('keydown', function (e) {\n                var keyCode = e.keyCode;\n\n                // 撤销 ctrl + z\n                if (e.ctrlKey && keyCode === 90) {\n                    editor.undo();\n                    return;\n                }\n\n                if (keyCode === 13) {\n                    // enter 做记录\n                    undo();\n                } else {\n                    // keyup 之后 1s 之内不操作，则做一次记录\n                    if (timeoutId) {\n                        clearTimeout(timeoutId);\n                    }\n                    timeoutId = setTimeout(undo, 1000);\n                }\n            });\n\n            // 初始化做记录\n            editor.undoRecord();\n        });\n    });\n});*/\n// redo 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'redo';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.redo\n        });\n\n        // click 事件\n        menu.clickEvent = function (e) {\n            editor.redo();\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// 全屏 菜单\n/*_e(function (E, $) {\n\n    // 记录全屏时的scrollTop\n    var scrollTopWhenFullScreen;\n\n    E.createMenu(function (check) {\n        var menuId = 'fullscreen';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var $txt = editor.txt.$txt;\n        var config = editor.config;\n        var zIndexConfig = config.zindex || 10000;\n        var lang = config.lang;\n\n        var isSelected = false;\n        var zIndex;\n\n        var maxHeight;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.fullscreen\n        });\n\n        // 定义click事件\n        menu.clickEvent = function (e) {\n            // 增加样式\n            var $editorContainer = editor.$editorContainer;\n            $editorContainer.addClass('wangEditor-fullscreen');\n\n            // （先保存当前的）再设置z-index\n            zIndex = $editorContainer.css('z-index');\n            $editorContainer.css('z-index', zIndexConfig);\n\n            var $wrapper;\n            var txtHeight = $txt.height();\n            var txtOuterHeight = $txt.outerHeight();\n\n            if (editor.useMaxHeight) {\n                // 记录 max-height，并暂时去掉maxheight\n                maxHeight = $txt.css('max-height');\n                $txt.css('max-height', 'none');\n\n                // 如果使用了maxHeight， 将$txt从它的父元素中移出来\n                $wrapper = $txt.parent();\n                $wrapper.after($txt);\n                $wrapper.remove();\n                $txt.css('overflow-y', 'auto');\n            }\n\n            // 设置高度到全屏\n            var menuContainer = editor.menuContainer;\n            $txt.height(\n                E.$window.height() - \n                menuContainer.height() - \n                (txtOuterHeight - txtHeight)  // 去掉内边距和外边距\n            );\n\n            // 取消menuContainer的内联样式（menu吸顶时，会为 menuContainer 设置一些内联样式）\n            editor.menuContainer.$menuContainer.attr('style', '');\n\n            // 保存状态\n            isSelected = true;\n\n            // 记录编辑器是否全屏\n            editor.isFullScreen = true;\n\n            // 记录设置全屏时的高度\n            scrollTopWhenFullScreen = E.$window.scrollTop();\n        };\n\n        // 定义选中状态的 click 事件\n        menu.clickEventSelected = function (e) {\n            // 取消样式\n            var $editorContainer = editor.$editorContainer;\n            $editorContainer.removeClass('wangEditor-fullscreen');\n            $editorContainer.css('z-index', zIndex);\n\n            // 还原height\n            if (editor.useMaxHeight) {\n                $txt.css('max-height', maxHeight);\n            } else {\n                // editor.valueContainerHeight 在 editor.txt.initHeight() 中事先保存了\n                editor.$valueContainer.css('height', editor.valueContainerHeight);\n            }\n\n            // 重新计算高度\n            editor.txt.initHeight();\n\n            // 保存状态\n            isSelected = false;\n\n            // 记录编辑器是否全屏\n            editor.isFullScreen = false;\n\n            // 还原scrollTop\n            if (scrollTopWhenFullScreen != null) {\n                E.$window.scrollTop(scrollTopWhenFullScreen);\n            }\n        };\n\n        // 定义选中事件\n        menu.updateSelectedEvent = function (e) {\n            return isSelected;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// 渲染menus\n_e(function (E, $) {\n\n    E.fn.renderMenus = function () {\n\n        var editor = this;\n        var menus = editor.menus;\n        var menuIds = editor.config.menus;\n        var menuContainer = editor.menuContainer;\n\n        var menu;\n        var groupIdx = 0;\n        $.each(menuIds, function (k, v) {\n            if (v === '|') {\n                groupIdx++;\n                return;\n            }\n\n            menu = menus[v];\n            if (menu) {\n                menu.render(groupIdx);\n            }\n        });\n    };\n\n    E.fn.renderMenuContainer = function () {\n\n        var editor = this;\n        var menuContainer = editor.menuContainer;\n        var $editorContainer = editor.$editorContainer;\n\n        menuContainer.render();\n\n    };\n});\n// 渲染 txt\n_e(function (E, $) {\n\n    E.fn.renderTxt = function () {\n\n        var editor = this;\n        var txt = editor.txt;\n\n        txt.render();\n\n        // ready 时候，计算txt的高度\n        editor.ready(function () {\n            txt.initHeight();\n        });\n    };\n});\n// 渲染 container\n_e(function (E, $) {\n\n    E.fn.renderEditorContainer = function () {\n\n        var editor = this;\n        var $valueContainer = editor.$valueContainer;\n        var $editorContainer = editor.$editorContainer;\n        var $txt = editor.txt.$txt;\n        var $prev, $parent;\n\n        // 将编辑器渲染到页面中\n        if ($valueContainer === $txt) {\n            $prev = editor.$prev;\n            $parent = editor.$parent;\n\n            if ($prev && $prev.length) {\n                // 有前置节点，就插入到前置节点的后面\n                $prev.after($editorContainer);\n            } else {\n                // 没有前置节点，就直接插入到父元素\n                $parent.prepend($editorContainer);\n            }\n\n        } else {\n            $valueContainer.after($editorContainer);\n            $valueContainer.hide();\n        }\n\n        // 设置宽度（这样设置宽度有问题）\n        // $editorContainer.css('width', $valueContainer.css('width'));\n    };\n});\n// 菜单事件\n_e(function (E, $) {\n\n    // 绑定每个菜单的click事件\n    E.fn.eventMenus = function () {\n\n        var menus = this.menus;\n\n        // 绑定菜单的点击事件\n        $.each(menus, function (k, v) {\n            v.bindEvent();\n        });\n\n    };\n});\n// 菜单container事件\n_e(function (E, $) {\n\n    E.fn.eventMenuContainer = function () {\n\n    };\n});\n// 编辑区域事件\n_e(function (E, $) {\n\n    E.fn.eventTxt = function () {\n\n        var txt = this.txt;\n\n        // txt内容变化时，保存选区\n        txt.saveSelectionEvent();\n\n        // txt内容变化时，随时更新 value\n        txt.updateValueEvent();\n\n        // txt内容变化时，随时更新 menu style\n        txt.updateMenuStyleEvent();\n\n        // // 鼠标hover时，显示 p head 高度（暂时关闭这个功能）\n        // if (!/ie/i.test(E.userAgent)) {\n        //     // 暂时不支持IE\n        //     txt.showHeightOnHover();\n        // }\n    };\n});\n// 上传图片事件\n/*_e(function (E, $) {\n\n    E.plugin(function () {\n        var editor = this;\n        var fns = editor.config.uploadImgFns; // editor.config.uploadImgFns = {} 在config文件中定义了\n\n        // -------- 定义load函数 --------\n        fns.onload || (fns.onload = function (resultText, xhr) {\n            E.log('上传结束，返回结果为 ' + resultText);\n\n            var editor = this;\n            var originalName = editor.uploadImgOriginalName || '';  // 上传图片时，已经将图片的名字存在 editor.uploadImgOriginalName\n            var img;\n            if (resultText.indexOf('error|') === 0) {\n                // 提示错误\n                E.warn('上传失败：' + resultText.split('|')[1]);\n                alert(resultText.split('|')[1]);\n            } else {\n                E.log('上传成功，即将插入编辑区域，结果为：' + resultText);\n\n                // 将结果插入编辑器\n                img = document.createElement('img');\n                img.onload = function () {\n                    var html = '<img src=\"' + resultText + '\" alt=\"' + originalName + '\" style=\"max-width:100%;\"/>';\n                    editor.command(null, 'insertHtml', html);\n\n                    E.log('已插入图片，地址 ' + resultText);\n                    img = null;\n                };\n                img.onerror = function () {\n                    E.error('使用返回的结果获取图片，发生错误。请确认以下结果是否正确：' + resultText);\n                    img = null;\n                };\n                img.src = resultText;\n            }\n\n        });\n\n        // -------- 定义tiemout函数 --------\n        fns.ontimeout || (fns.ontimeout = function (xhr) {\n            E.error('上传图片超时');\n            alert('上传图片超时');\n        });\n\n        // -------- 定义error函数 --------\n        fns.onerror || (fns.onerror = function (xhr) {\n            E.error('上传上图片发生错误');\n            alert('上传上图片发生错误');\n        });\n\n    });\n});*/\n// xhr 上传图片\n/*_e(function (E, $) {\n\n    if (!window.FileReader || !window.FormData) {\n        // 如果不支持html5的文档操作，直接返回\n        return;\n    }\n\n    E.plugin(function () {\n\n        var editor = this;\n        var config = editor.config;\n        var uploadImgUrl = config.uploadImgUrl;\n        var uploadTimeout = config.uploadTimeout;\n\n        // 获取配置中的上传事件\n        var uploadImgFns = config.uploadImgFns;\n        var onload = uploadImgFns.onload;\n        var ontimeout = uploadImgFns.ontimeout;\n        var onerror = uploadImgFns.onerror;\n\n        if (!uploadImgUrl) {\n            return;\n        }\n\n        // -------- 将以base64的图片url数据转换为Blob --------\n        function convertBase64UrlToBlob(urlData, filetype){\n            //去掉url的头，并转换为byte\n            var bytes = window.atob(urlData.split(',')[1]);\n            \n            //处理异常,将ascii码小于0的转换为大于0\n            var ab = new ArrayBuffer(bytes.length);\n            var ia = new Uint8Array(ab);\n            var i;\n            for (i = 0; i < bytes.length; i++) {\n                ia[i] = bytes.charCodeAt(i);\n            }\n\n            return new Blob([ab], {type : filetype});\n        }\n\n        // -------- 插入图片的方法 --------\n        function insertImg(src, event) {\n            var img = document.createElement('img');\n            img.onload = function () {\n                var html = '<img src=\"' + src + '\" style=\"max-width:100%;\"/>';\n                editor.command(event, 'insertHtml', html);\n\n                E.log('已插入图片，地址 ' + src);\n                img = null;\n            };\n            img.onerror = function () {\n                E.error('使用返回的结果获取图片，发生错误。请确认以下结果是否正确：' + src);\n                img = null;\n            };\n            img.src = src;\n        }\n\n        // -------- onprogress 事件 --------\n        function updateProgress(e) {\n            if (e.lengthComputable) {\n                var percentComplete = e.loaded / e.total;\n                editor.showUploadProgress(percentComplete * 100);\n            }\n        }\n\n        // -------- xhr 上传图片 --------\n        editor.xhrUploadImg = function (opt) {\n            // opt 数据\n            var event = opt.event;\n            var fileName = opt.filename || '';\n            var base64 = opt.base64;\n            var fileType = opt.fileType || 'image/png'; // 无扩展名则默认使用 png\n            var name = opt.name || 'wangEditor_upload_file';\n            var loadfn = opt.loadfn || onload;\n            var errorfn = opt.errorfn || onerror;\n            var timeoutfn = opt.timeoutfn || ontimeout;\n\n            // 上传参数（如 token）\n            var params = editor.config.uploadParams || {};\n\n            // headers\n            var headers = editor.config.uploadHeaders || {};\n\n            // 获取文件扩展名\n            var fileExt = 'png';  // 默认为 png\n            if (fileName.indexOf('.') > 0) {\n                // 原来的文件名有扩展名\n                fileExt = fileName.slice(fileName.lastIndexOf('.') - fileName.length + 1);\n            } else if (fileType.indexOf('/') > 0 && fileType.split('/')[1]) {\n                // 文件名没有扩展名，通过类型获取，如从 'image/png' 取 'png'\n                fileExt = fileType.split('/')[1];\n            }\n\n            // ------------ begin 预览模拟上传 ------------\n            if (E.isOnWebsite) {\n                E.log('预览模拟上传');\n                insertImg(base64, event);\n                return;\n            }\n            // ------------ end 预览模拟上传 ------------\n\n            // 变量声明\n            var xhr = new XMLHttpRequest();\n            var timeoutId;\n            var src;\n            var formData = new FormData();\n\n            // 超时处理\n            function timeoutCallback() {\n                if (timeoutId) {\n                    clearTimeout(timeoutId);\n                }\n                if (xhr && xhr.abort) {\n                    xhr.abort();\n                }\n\n                // 超时了就阻止默认行为\n                event.preventDefault();\n\n                // 执行回调函数，提示什么内容，都应该在回调函数中定义\n                timeoutfn && timeoutfn.call(editor, xhr);\n\n                // 隐藏进度条\n                editor.hideUploadProgress();\n            }\n\n            xhr.onload = function () {\n                if (timeoutId) {\n                    clearTimeout(timeoutId);\n                }\n\n                // 记录文件名到 editor.uploadImgOriginalName ，插入图片时，可做 alt 属性用\n                editor.uploadImgOriginalName = fileName;\n                if (fileName.indexOf('.') > 0) {\n                    editor.uploadImgOriginalName = fileName.split('.')[0];\n                }\n\n                // 执行load函数，任何操作，都应该在load函数中定义\n                loadfn && loadfn.call(editor, xhr.responseText, xhr);\n\n                // 隐藏进度条\n                editor.hideUploadProgress();\n            };\n            xhr.onerror = function () {\n                if (timeoutId) {\n                    clearTimeout(timeoutId);\n                }\n\n                // 超时了就阻止默认行为\n                event.preventDefault();\n\n                // 执行error函数，错误提示，应该在error函数中定义\n                errorfn && errorfn.call(editor, xhr);\n\n                // 隐藏进度条\n                editor.hideUploadProgress();\n            };\n            // xhr.onprogress = updateProgress;\n            xhr.upload.onprogress = updateProgress;\n\n            // 填充数据\n            formData.append(name, convertBase64UrlToBlob(base64, fileType), E.random() + '.' + fileExt);\n\n            // 添加参数\n            $.each(params, function (key, value) {\n                formData.append(key, value);\n            });\n\n            // 开始上传\n            xhr.open('POST', uploadImgUrl, true);\n            // xhr.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");  // 将参数解析成传统form的方式上传\n\n            // 修改自定义配置的headers\n            $.each(headers, function (key, value) {\n                xhr.setRequestHeader(key, value);\n            });\n\n            // 跨域上传时，传cookie\n            xhr.withCredentials = editor.config.withCredentials || true;\n\n            // 发送数据\n            xhr.send(formData);\n            timeoutId = setTimeout(timeoutCallback, uploadTimeout);\n\n            E.log('开始上传...并开始超时计算');\n        };\n    });\n});*/\n// 进度条\n/*_e(function (E, $) {\n\n    E.plugin(function () {\n\n        var editor = this;\n        var menuContainer = editor.menuContainer;\n        var menuHeight = menuContainer.height();\n        var $editorContainer = editor.$editorContainer;\n        var width = $editorContainer.width();\n        var $progress = $('<div class=\"wangEditor-upload-progress\"></div>');\n\n        // 渲染事件\n        var isRender = false;\n        function render() {\n            if (isRender) {\n                return;\n            }\n            isRender = true;\n\n            $progress.css({\n                top: menuHeight + 'px'\n            });\n            $editorContainer.append($progress);\n        }\n\n        // ------ 显示进度 ------\n        editor.showUploadProgress = function (progress) {\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n            }\n\n            // 显示之前，先判断是否渲染\n            render();\n\n            $progress.show();\n            $progress.width(progress * width / 100);\n        };\n\n        // ------ 隐藏进度条 ------\n        var timeoutId;\n        function hideProgress() {\n            $progress.hide();\n            timeoutId = null;\n        }\n        editor.hideUploadProgress = function (time) {\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n            }\n            time = time || 750;\n            timeoutId = setTimeout(hideProgress, time);\n        };\n    });\n});*/\n// upload img 插件\n/*_e(function (E, $) {\n\n    E.plugin(function () {\n        var editor = this;\n        var config = editor.config;\n        var uploadImgUrl = config.uploadImgUrl;\n        var uploadTimeout = config.uploadTimeout;\n        var event;\n\n        if (!uploadImgUrl) {\n            return;\n        }\n\n        // 获取editor的上传dom\n        var $uploadContent = editor.$uploadContent;\n        if (!$uploadContent) {\n            return;\n        }\n\n        // 自定义UI，并添加到上传dom节点上\n        var $uploadIcon = $('<div class=\"upload-icon-container\"><i class=\"wangeditor-menu-img-upload\"></i></div>');\n        $uploadContent.append($uploadIcon);\n\n        // ---------- 构建上传对象 ----------\n        var upfile = new E.UploadFile({\n            editor: editor,\n            uploadUrl: uploadImgUrl,\n            timeout: uploadTimeout,\n            fileAccept: 'image/jpg,image/jpeg,image/png,image/gif,image/bmp'    // 只允许选择图片 \n        });\n\n        // 选择本地文件，上传\n        $uploadIcon.click(function (e) {\n            event = e;\n            upfile.selectFiles();\n        });\n    });\n});*/\n// h5 方式上传图片\n/*_e(function (E, $) {\n\n    if (!window.FileReader || !window.FormData) {\n        // 如果不支持html5的文档操作，直接返回\n        return;\n    }\n\n    // 构造函数\n    var UploadFile = function (opt) {\n        this.editor = opt.editor;\n        this.uploadUrl = opt.uploadUrl;\n        this.timeout = opt.timeout;\n        this.fileAccept = opt.fileAccept;\n        this.multiple = true;\n    };\n\n    UploadFile.fn = UploadFile.prototype;\n\n    // clear\n    UploadFile.fn.clear = function () {\n        this.$input.val('');\n        E.log('input value 已清空');\n    };\n\n    // 渲染\n    UploadFile.fn.render = function () {\n        var self = this;\n        if (self._hasRender) {\n            // 不要重复渲染\n            return;\n        }\n\n        E.log('渲染dom');\n\n        var fileAccept = self.fileAccept;\n        var acceptTpl = fileAccept ? 'accept=\"' + fileAccept + '\"' : '';\n        var multiple = self.multiple;\n        var multipleTpl = multiple ? 'multiple=\"multiple\"' : '';\n        var $input = $('<input type=\"file\" ' + acceptTpl + ' ' + multipleTpl + '/>');\n        var $container = $('<div style=\"display:none;\"></div>');\n\n        $container.append($input);\n        E.$body.append($container);\n\n        // onchange 事件\n        $input.on('change', function (e) {\n            self.selected(e, $input.get(0));\n        });\n\n        // 记录对象数据\n        self.$input = $input;\n\n        // 记录\n        self._hasRender = true;\n    };\n\n    // 选择\n    UploadFile.fn.selectFiles = function () {\n        var self = this;\n\n        E.log('使用 html5 方式上传');\n\n        // 先渲染\n        self.render();\n\n        // 选择\n        E.log('选择文件');\n        self.$input.click();\n    };\n\n    // 选中文件之后\n    UploadFile.fn.selected = function (e, input) {\n        var self = this;\n        var files = input.files || [];\n        if (files.length === 0) {\n            return;\n        }\n\n        E.log('选中 ' + files.length + ' 个文件');\n\n        // 遍历选中的文件，预览、上传\n        $.each(files, function (key, value) {\n            self.upload(value);\n        });\n    };\n\n    // 上传单个文件\n    UploadFile.fn.upload = function (file) {\n        var self = this;\n        var editor = self.editor;\n        var filename = file.name || '';\n        var fileType = file.type || '';\n        var uploadImgFns = editor.config.uploadImgFns;\n        var uploadFileName = editor.config.uploadImgFileName || 'wangEditorH5File';\n        var onload = uploadImgFns.onload;\n        var ontimeout = uploadImgFns.ontimeout;\n        var onerror = uploadImgFns.onerror;\n        var reader = new FileReader();\n\n        if (!onload || !ontimeout || !onerror) {\n            E.error('请为编辑器配置上传图片的 onload ontimeout onerror 回调事件');\n            return;\n        }\n\n\n        E.log('开始执行 ' + filename + ' 文件的上传');\n\n        // 清空 input 数据\n        function clearInput() {\n            self.clear();\n        }\n\n        // onload事件\n        reader.onload = function (e) {\n            E.log('已读取' + filename + '文件');\n\n            var base64 = e.target.result || this.result;\n            editor.xhrUploadImg({\n                event: e,\n                filename: filename,\n                base64: base64,\n                fileType: fileType,\n                name: uploadFileName,\n                loadfn: function (resultText, xhr) {\n                    clearInput();\n                    // 执行配置中的方法\n                    var editor = this;\n                    onload.call(editor, resultText, xhr);\n                },\n                errorfn: function (xhr) {\n                    clearInput();\n                    if (E.isOnWebsite) {\n                        alert('wangEditor官网暂时没有服务端，因此报错。实际项目中不会发生');\n                    }\n                    // 执行配置中的方法\n                    var editor = this;\n                    onerror.call(editor, xhr);\n                },\n                timeoutfn: function (xhr) {\n                    clearInput();\n                    if (E.isOnWebsite) {\n                        alert('wangEditor官网暂时没有服务端，因此超时。实际项目中不会发生');\n                    }\n                    // 执行配置中的方法\n                    var editor = this;\n                    ontimeout(editor, xhr);\n                }\n            });\n        };\n\n        // 开始取文件\n        reader.readAsDataURL(file);\n    };\n\n    // 暴露给 E\n    E.UploadFile = UploadFile;\n});\n*/// form方式上传图片\n/*_e(function (E, $) {\n\n    if (window.FileReader && window.FormData) {\n        // 如果支持 html5 上传，则返回\n        return;\n    }\n    \n    // 构造函数\n    var UploadFile = function (opt) {\n        this.editor = opt.editor;\n        this.uploadUrl = opt.uploadUrl;\n        this.timeout = opt.timeout;\n        this.fileAccept = opt.fileAccept;\n        this.multiple = false;\n    };\n\n    UploadFile.fn = UploadFile.prototype;\n\n    // clear\n    UploadFile.fn.clear = function () {\n        this.$input.val('');\n        E.log('input value 已清空');\n    };\n\n    // 隐藏modal\n    UploadFile.fn.hideModal = function () {\n        this.modal.hide();\n    };\n\n    // 渲染\n    UploadFile.fn.render = function () {\n        var self = this;\n        var editor = self.editor;\n        var uploadFileName = editor.config.uploadImgFileName || 'wangEditorFormFile';\n        if (self._hasRender) {\n            // 不要重复渲染\n            return;\n        }\n\n        // 服务器端路径\n        var uploadUrl = self.uploadUrl;\n\n        E.log('渲染dom');\n\n        // 创建 form 和 iframe\n        var iframeId = 'iframe' + E.random();\n        var $iframe = $('<iframe name=\"' + iframeId + '\" id=\"' + iframeId + '\" frameborder=\"0\" width=\"0\" height=\"0\"></iframe>');\n        var multiple = self.multiple;\n        var multipleTpl = multiple ? 'multiple=\"multiple\"' : '';\n        var $p = $('<p>选择图片并上传</p>');\n        var $input = $('<input type=\"file\" ' + multipleTpl + ' name=\"' + uploadFileName + '\"/>');\n        var $btn = $('<input type=\"submit\" value=\"上传\"/>');\n        var $form = $('<form enctype=\"multipart/form-data\" method=\"post\" action=\"' + uploadUrl + '\" target=\"' + iframeId + '\"></form>');\n        var $container = $('<div style=\"margin:10px 20px;\"></div>');\n\n        $form.append($p).append($input).append($btn);\n\n        // 增加用户配置的参数，如 token\n        $.each(editor.config.uploadParams, function (key, value) {\n            $form.append( $('<input type=\"hidden\" name=\"' + key + '\" value=\"' + value + '\"/>') );\n        });\n\n        $container.append($form);\n        $container.append($iframe);\n\n        self.$input = $input;\n        self.$iframe = $iframe;\n\n        // 生成 modal\n        var modal = new E.Modal(editor, undefined, {\n            $content: $container\n        });\n        self.modal = modal;\n\n        // 记录\n        self._hasRender = true;\n    };\n\n    // 绑定 iframe load 事件\n    UploadFile.fn.bindLoadEvent = function () {\n        var self = this;\n        if (self._hasBindLoad) {\n            // 不要重复绑定\n            return;\n        }\n\n        var editor = self.editor;\n        var $iframe = self.$iframe;\n        var iframe = $iframe.get(0);\n        var iframeWindow = iframe.contentWindow;\n        var onload = editor.config.uploadImgFns.onload;\n\n        // 定义load事件\n        function onloadFn() {\n            var resultText = $.trim(iframeWindow.document.body.innerHTML);\n            if (!resultText) {\n                return;\n            }\n\n            // 获取文件名\n            var fileFullName = self.$input.val();  // 结果如 C:\\folder\\abc.png 格式\n            var fileOriginalName = fileFullName;\n            if (fileFullName.lastIndexOf('\\\\') >= 0) {\n                // 获取 abc.png 格式\n                fileOriginalName = fileFullName.slice(fileFullName.lastIndexOf('\\\\') + 1);\n                if (fileOriginalName.indexOf('.') > 0) {\n                    // 获取 abc （即不带扩展名的文件名）\n                    fileOriginalName = fileOriginalName.split('.')[0];\n                }\n            }\n\n            // 将文件名暂存到 editor.uploadImgOriginalName ，插入图片时，可作为 alt 属性来用\n            editor.uploadImgOriginalName = fileOriginalName;\n\n            // 执行load函数，插入图片的操作，应该在load函数中执行\n            onload.call(editor, resultText);\n\n            // 清空 input 数据\n            self.clear();\n\n            // 隐藏modal\n            self.hideModal();\n        }\n\n        // 绑定 load 事件\n        if (iframe.attachEvent) {\n            iframe.attachEvent('onload', onloadFn);\n        } else {\n            iframe.onload = onloadFn;\n        }\n\n        // 记录\n        self._hasBindLoad = true;\n    };\n\n    UploadFile.fn.show = function () {\n        var self = this;\n        var modal = self.modal;\n\n        function show() {\n            modal.show();\n            self.bindLoadEvent();\n        }\n        setTimeout(show);\n    };\n\n    // 选择\n    UploadFile.fn.selectFiles = function () {\n        var self = this;\n\n        E.log('使用 form 方式上传');\n\n        // 先渲染\n        self.render();\n\n        // 先清空\n        self.clear();\n\n        // 显示\n        self.show();\n    };\n\n    // 暴露给 E\n    E.UploadFile = UploadFile;\n});*/\n// upload img 插件 粘贴图片\n/*_e(function (E, $) {\n    \n    E.plugin(function () {\n        var editor = this;\n        var txt = editor.txt;\n        var $txt = txt.$txt;\n        var config = editor.config;\n        var uploadImgUrl = config.uploadImgUrl;\n        var uploadFileName = config.uploadImgFileName || 'wangEditorPasteFile';\n        var pasteEvent;\n        var $imgsBeforePaste;\n\n        // 未配置上传图片url，则忽略\n        if (!uploadImgUrl) {\n            return;\n        }\n\n        // -------- 非 chrome 下，通过查找粘贴的图片的方式上传 --------\n        function findPasteImgAndUpload() {\n            var reg = /^data:(image\\/\\w+);base64/;\n            var $imgs = $txt.find('img');\n\n            E.log('粘贴后，检查到编辑器有' + $imgs.length + '个图片。开始遍历图片，试图找到刚刚粘贴过来的图片');\n\n            $.each($imgs, function () {\n                var img = this;\n                var $img = $(img);\n                var flag;\n                var base64 = $img.attr('src');\n                var type;\n\n                // 判断当前图片是否是粘贴之前的\n                $imgsBeforePaste.each(function () {\n                    if (img === this) {\n                        // 当前图片是粘贴之前的\n                        flag = true;\n                        return false;\n                    }\n                });\n\n                // 当前图片是粘贴之前的，则忽略\n                if (flag) {\n                    return;\n                }\n\n                E.log('找到一个粘贴过来的图片');\n\n                if (reg.test(base64)) {\n                    // 得到的粘贴的图片是 base64 格式，符合要求\n                    E.log('src 是 base64 格式，可以上传');\n                    type = base64.match(reg)[1];\n                    editor.xhrUploadImg({\n                        event: pasteEvent,\n                        base64: base64,\n                        fileType: type,\n                        name: uploadFileName\n                    });\n                } else {\n                    E.log('src 为 ' + base64 + ' ，不是 base64 格式，暂时不支持上传');\n                }\n\n                // 最终移除原图片\n                $img.remove();\n            });\n\n            E.log('遍历结束');\n        }\n\n        // 开始监控粘贴事件\n        $txt.on('paste', function (e) {\n            pasteEvent = e;\n            var data = pasteEvent.clipboardData || pasteEvent.originalEvent.clipboardData;\n            var text;\n            var items;\n\n            // -------- 试图获取剪切板中的文字，有文字的情况下，就不处理图片粘贴 --------\n            if (data == null) {\n                text = window.clipboardData && window.clipboardData.getData('text');\n            } else {\n                text = data.getData('text/plain') || data.getData('text/html');\n            }\n            if (text) {\n                return;\n            }\n\n            items = data && data.items;\n            if (items) {\n                // -------- chrome 可以用 data.items 取出图片 -----\n                E.log('通过 data.items 得到了数据');\n\n                $.each(items, function (key, value) {\n                    var fileType = value.type || '';\n                    if(fileType.indexOf('image') < 0) {\n                        // 不是图片\n                        return;\n                    }\n\n                    var file = value.getAsFile();\n                    var reader = new FileReader();\n\n                    E.log('得到一个粘贴图片');\n\n                    reader.onload = function (e) {\n                        E.log('读取到粘贴的图片');\n\n                        // 执行上传\n                        var base64 = e.target.result || this.result;\n                        editor.xhrUploadImg({\n                            event: pasteEvent,\n                            base64: base64,\n                            fileType: fileType,\n                            name: uploadFileName\n                        });\n                    };\n\n                    //读取粘贴的文件\n                    reader.readAsDataURL(file);\n                });\n            } else {\n                // -------- 非 chrome 不能用 data.items 取图片 -----\n\n                E.log('未从 data.items 得到数据，使用检测粘贴图片的方式');\n\n                // 获取\n                $imgsBeforePaste = $txt.find('img');\n                E.log('粘贴前，检查到编辑器有' + $imgsBeforePaste.length + '个图片');\n\n                // 异步上传找到的图片\n                setTimeout(findPasteImgAndUpload, 0);\n            }\n        });\n\n    });\n});*/\n// 拖拽上传图片 插件 \n/*_e(function (E, $) {\n\n    E.plugin(function () {\n\n        var editor = this;\n        var txt = editor.txt;\n        var $txt = txt.$txt;\n        var config = editor.config;\n        var uploadImgUrl = config.uploadImgUrl;\n        var uploadFileName = config.uploadImgFileName || 'wangEditorDragFile';\n\n        // 未配置上传图片url，则忽略\n        if (!uploadImgUrl) {\n            return;\n        }\n\n        // 阻止浏览器默认行为\n        E.$document.on('dragleave drop dragenter dragover', function (e) {\n            e.preventDefault();\n        });\n\n        // 监控 $txt drop 事件\n        $txt.on('drop', function (dragEvent) {\n            dragEvent.preventDefault();\n\n            var originalEvent = dragEvent.originalEvent;\n            var files = originalEvent.dataTransfer && originalEvent.dataTransfer.files;\n\n            if (!files || !files.length) {\n                return;\n            }\n\n            $.each(files, function (k, file) {\n                var type = file.type;\n                var name = file.name;\n\n                if (type.indexOf('image/') < 0) {\n                    // 只接收图片\n                    return;\n                }\n\n                E.log('得到图片 ' + name);\n\n                var reader = new FileReader();\n                reader.onload = function (e) {\n                    E.log('读取到图片 ' + name);\n\n                    // 执行上传\n                    var base64 = e.target.result || this.result;\n                    editor.xhrUploadImg({\n                        event: dragEvent,\n                        base64: base64,\n                        fileType: type,\n                        name: uploadFileName\n                    });\n                };\n\n                //读取粘贴的文件\n                reader.readAsDataURL(file);\n\n            });\n        });\n    });\n});*/\n// 编辑器区域 table toolbar\n/*_e(function (E, $) {\n\n    E.plugin(function () {\n        var editor = this;\n        var txt = editor.txt;\n        var $txt = txt.$txt;\n        var html = '';\n        // 说明：设置了 max-height 之后，$txt.parent() 负责滚动处理\n        var $currentTxt = editor.useMaxHeight ? $txt.parent() : $txt;\n        var $currentTable;\n\n        // 用到的dom节点\n        var isRendered = false;\n        var $toolbar = $('<div class=\"txt-toolbar\"></div>');\n        var $triangle = $('<div class=\"tip-triangle\"></div>');\n        var $delete = $('<a href=\"#\"><i class=\"wangeditor-menu-img-trash-o\"></i></a>');\n        var $zoomSmall = $('<a href=\"#\"><i class=\"wangeditor-menu-img-search-minus\"></i></a>');\n        var $zoomBig = $('<a href=\"#\"><i class=\"wangeditor-menu-img-search-plus\"></i></a>');\n\n        // 渲染到页面\n        function render() {\n            if (isRendered) {\n                return;\n            }\n            \n            // 绑定事件\n            bindEvent();\n\n            // 拼接 渲染到页面上\n            $toolbar.append($triangle)\n                    .append($delete)\n                    .append($zoomSmall)\n                    .append($zoomBig);\n            editor.$editorContainer.append($toolbar);\n            isRendered = true;\n        }\n\n        // 绑定事件\n        function bindEvent() {\n            // 统一执行命令的方法\n            var commandFn;\n            function command(e, callback) {\n                // 执行命令之前，先存储html内容\n                html = $txt.html();\n                // 监控内容变化\n                var cb = function  () {\n                    if (callback) {\n                        callback();\n                    }\n                    if (html !== $txt.html()) {\n                        $txt.change();\n                    }\n                };\n                // 执行命令\n                if (commandFn) {\n                    editor.customCommand(e, commandFn, cb);\n                }\n            }\n\n            // 删除\n            $delete.click(function (e) {\n                commandFn = function () {\n                    $currentTable.remove();\n                };\n                command(e, function () {\n                    setTimeout(hide, 100);\n                });\n            });\n\n            // 放大\n            $zoomBig.click(function (e) {\n                commandFn = function () {\n                    $currentTable.css({\n                        width: '100%'\n                    });\n                };\n                command(e, function () {\n                    setTimeout(show);\n                });\n            });\n\n            // 缩小\n            $zoomSmall.click(function (e) {\n                commandFn = function () {\n                    $currentTable.css({\n                        width: 'auto'\n                    });\n                };\n                command(e, function () {\n                    setTimeout(show);\n                });\n            });\n        }\n\n        // 显示 toolbar\n        function show() {\n            if (editor._disabled) {\n                // 编辑器已经被禁用，则不让显示\n                return;\n            }\n            if ($currentTable == null) {\n                return;\n            }\n            $currentTable.addClass('clicked');\n            var tablePosition = $currentTable.position();\n            var tableTop = tablePosition.top;\n            var tableLeft = tablePosition.left;\n            var tableHeight = $currentTable.outerHeight();\n            var tableWidth = $currentTable.outerWidth();\n\n            // --- 定位 toolbar ---\n\n            // 计算初步结果\n            var top = tableTop + tableHeight;\n            var left = tableLeft;\n            var marginLeft = 0;\n\n            var txtTop = $currentTxt.position().top;\n            var txtHeight = $currentTxt.outerHeight();\n            if (top > (txtTop + txtHeight)) {\n                // top 不得超出编辑范围\n                top = txtTop + txtHeight;\n            }\n\n            // 显示（方便计算 margin）\n            $toolbar.show();\n\n            // 计算 margin\n            var width = $toolbar.outerWidth();\n            marginLeft = tableWidth / 2 - width / 2;\n\n            // 定位\n            $toolbar.css({\n                top: top + 5,\n                left: left,\n                'margin-left': marginLeft\n            });\n            // 如果定位太靠左了\n            if (marginLeft < 0) {\n                // 得到三角形的margin-left\n                $toolbar.css('margin-left', '0');\n                $triangle.hide();\n            } else {\n                $triangle.show();\n            }\n        }\n        \n        // 隐藏 toolbar\n        function hide() {\n            if ($currentTable == null) {\n                return;\n            }\n            $currentTable.removeClass('clicked');\n            $currentTable = null;\n            $toolbar.hide();\n        }\n\n        // click table 事件\n        $currentTxt.on('click', 'table', function (e) {\n            var $table = $(e.currentTarget);\n\n            // 渲染\n            render();\n\n            if ($currentTable && ($currentTable.get(0) === $table.get(0))) {\n                setTimeout(hide, 100);\n                return;\n            }\n\n            // 显示 toolbar\n            $currentTable = $table;\n            show();\n\n            // 阻止冒泡\n            e.preventDefault();\n            e.stopPropagation();\n            \n        }).on('click keydown scroll', function (e) {\n            setTimeout(hide, 100);\n        });\n        E.$body.on('click keydown scroll', function (e) {\n            setTimeout(hide, 100);\n        });\n    });\n});*/\n// 编辑器区域 img toolbar\n/*_e(function (E, $) {\n\n    if (E.userAgent.indexOf('MSIE 8') > 0) {\n        return;\n    }\n    \n    E.plugin(function () {\n        var editor = this;\n        var lang = editor.config.lang;\n        var txt = editor.txt;\n        var $txt = txt.$txt;\n        var html = '';\n        // 说明：设置了 max-height 之后，$txt.parent() 负责滚动处理\n        var $currentTxt = editor.useMaxHeight ? $txt.parent() : $txt;\n        var $editorContainer = editor.$editorContainer;\n        var $currentImg;\n        var currentLink = '';\n\n        // 用到的dom节点\n        var isRendered = false;\n        var $dragPoint = $('<div class=\"img-drag-point\"></div>');\n\n        var $toolbar = $('<div class=\"txt-toolbar\"></div>');\n        var $triangle = $('<div class=\"tip-triangle\"></div>');\n\n        var $menuContainer = $('<div></div>');\n        var $delete = $('<a href=\"#\"><i class=\"wangeditor-menu-img-trash-o\"></i></a>');\n        var $zoomSmall = $('<a href=\"#\"><i class=\"wangeditor-menu-img-search-minus\"></i></a>');\n        var $zoomBig = $('<a href=\"#\"><i class=\"wangeditor-menu-img-search-plus\"></i></a>');\n        // var $floatLeft = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-left\"></i></a>');\n        // var $noFloat = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-justify\"></i></a>');\n        // var $floatRight = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-right\"></i></a>');\n        var $alignLeft = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-left\"></i></a>');\n        var $alignCenter = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-center\"></i></a>');\n        var $alignRight = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-right\"></i></a>');\n        var $link = $('<a href=\"#\"><i class=\"wangeditor-menu-img-link\"></i></a>');\n        var $unLink = $('<a href=\"#\"><i class=\"wangeditor-menu-img-unlink\"></i></a>');\n\n        var $linkInputContainer = $('<div style=\"display:none;\"></div>');\n        var $linkInput = $('<input type=\"text\" style=\"height:26px; margin-left:10px; width:200px;\"/>');\n        var $linkBtnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n        var $linkBtnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n\n        // 记录是否正在拖拽\n        var isOnDrag = false;\n\n        // 获取 / 设置 链接\n        function imgLink(e, url) {\n            if (!$currentImg) {\n                return;\n            }\n            var commandFn;\n            var callback = function () {\n                // 及时保存currentLink\n                if (url != null) {\n                    currentLink = url;\n                }\n                if (html !== $txt.html()) {\n                    $txt.change();\n                }\n            };\n            var $link;\n            var inLink = false;\n            var $parent = $currentImg.parent();\n            if ($parent.get(0).nodeName.toLowerCase() === 'a') {\n                // 父元素就是图片链接\n                $link = $parent;\n                inLink = true;\n            } else {\n                // 父元素不是图片链接，则重新创建一个链接\n                $link = $('<a target=\"_blank\"></a>');\n            }\n\n            if (url == null) {\n                // url 无值，是获取链接\n                return $link.attr('href') || '';\n            } else if (url === '') {\n                // url 是空字符串，是取消链接\n                if (inLink) {\n                    commandFn = function () {\n                        $currentImg.unwrap();\n                    };\n                }\n            } else {\n                // url 有值，是设置链接\n                if (url === currentLink) {\n                    return;\n                }\n                commandFn = function () {\n                    $link.attr('href', url);\n\n                    if (!inLink) {\n                        // 当前图片未包含在链接中，则包含进来\n                        $currentImg.wrap($link);\n                    }\n                };\n            }\n\n            // 执行命令\n            if (commandFn) {\n                // 记录下执行命令之前的html内容\n                html = $txt.html();\n                // 执行命令\n                editor.customCommand(e, commandFn, callback);\n            }\n        }\n\n        // 渲染到页面\n        function render() {\n            if (isRendered) {\n                return;\n            }\n            \n            // 绑定事件\n            bindToolbarEvent();\n            bindDragEvent();\n\n            // 菜单放入 container\n            $menuContainer.append($delete)\n                            .append($zoomSmall)\n                            .append($zoomBig)\n                            // .append($floatLeft)\n                            // .append($noFloat)\n                            // .append($floatRight);\n                            .append($alignLeft)\n                            .append($alignCenter)\n                            .append($alignRight)\n                            .append($link)\n                            .append($unLink);\n\n            // 链接input放入container\n            $linkInputContainer.append($linkInput)\n                               .append($linkBtnCancel)\n                               .append($linkBtnSubmit);\n\n            // 拼接 渲染到页面上\n            $toolbar.append($triangle)\n                    .append($menuContainer)\n                    .append($linkInputContainer);\n                    \n            editor.$editorContainer.append($toolbar).append($dragPoint);\n            isRendered = true;\n        }\n\n        // 绑定toolbar事件\n        function bindToolbarEvent() {\n            // 统一执行命令的方法\n            var commandFn;\n            function customCommand(e, callback) {\n                var cb;\n                // 记录下执行命令之前的html内容\n                html = $txt.html();\n                cb = function () {\n                    if (callback) {\n                        callback();\n                    }\n                    if (html !== $txt.html()) {\n                        $txt.change();\n                    }\n                };\n                // 执行命令\n                if (commandFn) {\n                    editor.customCommand(e, commandFn, cb);\n                }\n            }\n\n            // 删除\n            $delete.click(function (e) {\n                // 删除之前先unlink\n                imgLink(e, '');\n\n                // 删除图片\n                commandFn = function () {\n                    $currentImg.remove();\n                };\n                customCommand(e, function () {\n                    setTimeout(hide, 100);\n                });\n            });\n\n            // 放大\n            $zoomBig.click(function (e) {\n                commandFn = function () {\n                    var img = $currentImg.get(0);\n                    var width = img.width;\n                    var height = img.height;\n                    width = width * 1.1;\n                    height = height * 1.1;\n\n                    $currentImg.css({\n                        width: width + 'px',\n                        height: height + 'px'\n                    });\n                };\n                customCommand(e, function () {\n                    setTimeout(show);\n                });\n            });\n\n            // 缩小\n            $zoomSmall.click(function (e) {\n                commandFn = function () {\n                    var img = $currentImg.get(0);\n                    var width = img.width;\n                    var height = img.height;\n                    width = width * 0.9;\n                    height = height * 0.9;\n\n                    $currentImg.css({\n                        width: width + 'px',\n                        height: height + 'px'\n                    });\n                };\n                customCommand(e, function () {\n                    setTimeout(show);\n                });\n            });\n\n            // // 左浮动\n            // $floatLeft.click(function (e) {\n            //     commandFn = function () {\n            //         $currentImg.css({\n            //             float: 'left'\n            //         });\n            //     };\n            //     customCommand(e, function () {\n            //         setTimeout(hide, 100);\n            //     });\n            // });\n\n            // alignLeft\n            $alignLeft.click(function (e) {\n                commandFn = function () {\n                    // 如果 img 增加了链接，那么 img.parent() 就是 a 标签，设置 align 没用的，因此必须找到 P 父节点来设置 align\n                    $currentImg.parents('p').css({\n                        'text-align': 'left'\n                    }).attr('align', 'left');\n                };\n                customCommand(e, function () {\n                    setTimeout(hide, 100);\n                });\n            });\n\n            // // 右浮动\n            // $floatRight.click(function (e) {\n            //     commandFn = function () {\n            //         $currentImg.css({\n            //             float: 'right'\n            //         });\n            //     };\n            //     customCommand(e, function () {\n            //         setTimeout(hide, 100);\n            //     });\n            // });\n\n            // alignRight\n            $alignRight.click(function (e) {\n                commandFn = function () {\n                    // 如果 img 增加了链接，那么 img.parent() 就是 a 标签，设置 align 没用的，因此必须找到 P 父节点来设置 align\n                    $currentImg.parents('p').css({\n                        'text-align': 'right'\n                    }).attr('align', 'right');\n                };\n                customCommand(e, function () {\n                    setTimeout(hide, 100);\n                });\n            });\n\n            // // 无浮动\n            // $noFloat.click(function (e) {\n            //     commandFn = function () {\n            //         $currentImg.css({\n            //             float: 'none'\n            //         });\n            //     };\n            //     customCommand(e, function () {\n            //         setTimeout(hide, 100);\n            //     });\n            // });\n\n            // alignCenter\n            $alignCenter.click(function (e) {\n                commandFn = function () {\n                    // 如果 img 增加了链接，那么 img.parent() 就是 a 标签，设置 align 没用的，因此必须找到 P 父节点来设置 align\n                    $currentImg.parents('p').css({\n                        'text-align': 'center'\n                    }).attr('align', 'center');\n                };\n                customCommand(e, function () {\n                    setTimeout(hide, 100);\n                });\n            });\n\n            // link\n            // 显示链接input\n            $link.click(function (e) {\n                e.preventDefault();\n\n                // 获取当前链接，并显示\n                currentLink = imgLink(e);\n                $linkInput.val(currentLink);\n\n                $menuContainer.hide();\n                $linkInputContainer.show();\n            });\n            // 设置链接\n            $linkBtnSubmit.click(function (e) {\n                e.preventDefault();\n\n                var url = $.trim($linkInput.val());\n                if (url) {\n                    // 设置链接，同时会自动更新 currentLink 的值\n                    imgLink(e, url);\n                }\n\n                // 隐藏 toolbar\n                setTimeout(hide);\n            });\n            // 取消设置链接\n            $linkBtnCancel.click(function (e) {\n                e.preventDefault();\n\n                // 重置链接 input\n                $linkInput.val(currentLink);\n\n                $menuContainer.show();\n                $linkInputContainer.hide();\n            });\n\n            // unlink\n            $unLink.click(function (e) {\n                e.preventDefault();\n\n                // 执行 unlink\n                imgLink(e, '');\n\n                // 隐藏 toolbar\n                setTimeout(hide);\n            });\n        }\n\n        // 绑定drag事件\n        function bindDragEvent() {\n            var _x, _y;\n            var dragMarginLeft, dragMarginTop;\n            var imgWidth, imgHeight;\n\n            function mousemove (e) {\n                var diffX, diffY;\n\n                // 计算差额\n                diffX = e.pageX - _x;\n                diffY = e.pageY - _y;\n\n                // --------- 计算拖拽点的位置 ---------\n                var currentDragMarginLeft = dragMarginLeft + diffX;\n                var currentDragMarginTop = dragMarginTop + diffY;\n                $dragPoint.css({\n                    'margin-left': currentDragMarginLeft,\n                    'margin-top': currentDragMarginTop\n                });\n\n                // --------- 计算图片的大小 ---------\n                var currentImgWidth = imgWidth + diffX;\n                var currentImggHeight = imgHeight + diffY;\n                $currentImg && $currentImg.css({\n                    width: currentImgWidth,\n                    height: currentImggHeight\n                });\n            }\n\n            $dragPoint.on('mousedown', function(e){\n                if (!$currentImg) {\n                    return;\n                }\n                // 当前鼠标位置\n                _x = e.pageX;\n                _y = e.pageY;\n\n                // 当前拖拽点的位置\n                dragMarginLeft = parseFloat($dragPoint.css('margin-left'), 10);\n                dragMarginTop = parseFloat($dragPoint.css('margin-top'), 10);\n\n                // 当前图片的大小\n                imgWidth = $currentImg.width();\n                imgHeight = $currentImg.height();\n\n                // 隐藏 $toolbar\n                $toolbar.hide();\n\n                // 绑定计算事件\n                E.$document.on('mousemove._dragResizeImg', mousemove);\n                E.$document.on('mouseup._dragResizeImg', function (e) {\n                    // 取消绑定\n                    E.$document.off('mousemove._dragResizeImg');\n                    E.$document.off('mouseup._dragResizeImg');\n\n                    // 隐藏，并还原拖拽点的位置\n                    hide();\n                    $dragPoint.css({\n                        'margin-left': dragMarginLeft,\n                        'margin-top': dragMarginTop\n                    });\n\n                    // 记录\n                    isOnDrag = false;\n                });\n\n                // 记录\n                isOnDrag = true;\n            });\n        }\n\n        // 显示 toolbar\n        function show() {\n            if (editor._disabled) {\n                // 编辑器已经被禁用，则不让显示\n                return;\n            }\n            if ($currentImg == null) {\n                return;\n            }\n            $currentImg.addClass('clicked');\n            var imgPosition = $currentImg.position();\n            var imgTop = imgPosition.top;\n            var imgLeft = imgPosition.left;\n            var imgHeight = $currentImg.outerHeight();\n            var imgWidth = $currentImg.outerWidth();\n\n\n            // --- 定位 dragpoint ---\n            $dragPoint.css({\n                top: imgTop + imgHeight,\n                left: imgLeft + imgWidth\n            });\n\n            // --- 定位 toolbar ---\n\n            // 计算初步结果\n            var top = imgTop + imgHeight;\n            var left = imgLeft;\n            var marginLeft = 0;\n\n            var txtTop = $currentTxt.position().top;\n            var txtHeight = $currentTxt.outerHeight();\n            if (top > (txtTop + txtHeight)) {\n                // top 不得超出编辑范围\n                top = txtTop + txtHeight;\n            } else {\n                // top 超出编辑范围，dragPoint就不显示了\n                $dragPoint.show();\n            }\n\n            // 显示（方便计算 margin）\n            $toolbar.show();\n\n            // 计算 margin\n            var width = $toolbar.outerWidth();\n            marginLeft = imgWidth / 2 - width / 2;\n\n            // 定位\n            $toolbar.css({\n                top: top + 5,\n                left: left,\n                'margin-left': marginLeft\n            });\n            // 如果定位太靠左了\n            if (marginLeft < 0) {\n                // 得到三角形的margin-left\n                $toolbar.css('margin-left', '0');\n                $triangle.hide();\n            } else {\n                $triangle.show();\n            }\n\n            // disable 菜单\n            editor.disableMenusExcept();\n        }\n        \n        // 隐藏 toolbar\n        function hide() {\n            if ($currentImg == null) {\n                return;\n            }\n            $currentImg.removeClass('clicked');\n            $currentImg = null;\n\n            $toolbar.hide();\n            $dragPoint.hide();\n\n            // enable 菜单\n            editor.enableMenusExcept();\n        }\n\n        // 判断img是否是一个表情\n        function isEmotion(imgSrc) {\n            var result = false;\n            if (!editor.emotionUrls) {\n                return result;\n            }\n            $.each(editor.emotionUrls, function (index, url) {\n                var flag = false;\n                if (imgSrc === url) {\n                    result = true;\n                    flag = true;\n                }\n                if (flag) {\n                    return false;  // break 循环\n                }\n            });\n            return result;\n        }\n\n        // click img 事件\n        $currentTxt.on('mousedown', 'img', function (e) {\n            e.preventDefault();\n        }).on('click', 'img', function (e) {\n            var $img = $(e.currentTarget);\n            var src = $img.attr('src');\n\n            if (!src || isEmotion(src)) {\n                // 是一个表情图标\n                return;\n            }\n\n            // ---------- 不是表情图标 ---------- \n\n            // 渲染\n            render();\n\n            if ($currentImg && ($currentImg.get(0) === $img.get(0))) {\n                setTimeout(hide, 100);\n                return;\n            }\n\n            // 显示 toolbar\n            $currentImg = $img;\n            show();\n\n            // 默认显示menuContainer，其他默认隐藏\n            $menuContainer.show();\n            $linkInputContainer.hide();\n\n            // 阻止冒泡\n            e.preventDefault();\n            e.stopPropagation();\n            \n        }).on('click keydown scroll', function (e) {\n            if (!isOnDrag) {\n                setTimeout(hide, 100);\n            }\n        });\n\n    });\n});*/\n// 编辑区域 link toolbar\n/*_e(function (E, $) {\n    E.plugin(function () {\n        var editor = this;\n        var lang = editor.config.lang;\n        var $txt = editor.txt.$txt;\n\n        // 当前命中的链接\n        var $currentLink;\n\n        var $toolbar = $('<div class=\"txt-toolbar\"></div>');\n        var $triangle = $('<div class=\"tip-triangle\"></div>');\n        var $triggerLink = $('<a href=\"#\" target=\"_blank\"><i class=\"wangeditor-menu-img-link\"></i> ' + lang.openLink + '</a>');\n        var isRendered;\n\n        // 记录当前的显示/隐藏状态\n        var isShow = false;\n\n        var showTimeoutId, hideTimeoutId;\n        var showTimeoutIdByToolbar, hideTimeoutIdByToolbar;\n\n        // 渲染 dom\n        function render() {\n            if (isRendered) {\n                return;\n            }\n\n            $toolbar.append($triangle)\n                    .append($triggerLink);\n\n            editor.$editorContainer.append($toolbar);\n\n            isRendered = true;\n        }\n\n        // 定位\n        function setPosition() {\n            if (!$currentLink) {\n                return;\n            }\n\n            var position = $currentLink.position();\n            var left = position.left;\n            var top = position.top;\n            var height = $currentLink.height();\n\n            // 初步计算top值\n            var topResult = top + height + 5;\n\n            // 判断 toolbar 是否超过了编辑器区域的下边界\n            var menuHeight = editor.menuContainer.height();\n            var txtHeight = editor.txt.$txt.outerHeight();\n            if (topResult > menuHeight + txtHeight) {\n                topResult = menuHeight + txtHeight + 5;\n            }\n\n            // 最终设置\n            $toolbar.css({\n                top: topResult,\n                left: left\n            });\n        }\n\n        // 显示 toolbar\n        function show() {\n            if (isShow) {\n                return;\n            }\n\n            if (!$currentLink) {\n                return;\n            }\n\n            render();\n\n            $toolbar.show();\n\n            // 设置链接\n            var href = $currentLink.attr('href');\n            $triggerLink.attr('href', href);\n\n            // 定位\n            setPosition();\n\n            isShow = true;\n        }\n\n        // 隐藏 toolbar\n        function hide() {\n            if (!isShow) {\n                return;\n            }\n\n            if (!$currentLink) {\n                return;\n            }\n\n            $toolbar.hide();\n            isShow = false;\n        }\n\n        // $txt 绑定事件\n        $txt.on('mouseenter', 'a', function (e) {\n            // 延时 500ms 显示toolbar\n            if (showTimeoutId) {\n                clearTimeout(showTimeoutId);\n            }\n            showTimeoutId = setTimeout(function () {\n                var a = e.currentTarget;\n                var $a = $(a);\n                $currentLink = $a;\n\n                var $img = $a.children('img');\n                if ($img.length) {\n                    // 该链接下包含一个图片\n\n                    // 图片点击时，隐藏toolbar\n                    $img.click(function (e) {\n                        hide();\n                    });\n\n                    if ($img.hasClass('clicked')) {\n                        // 图片还处于clicked状态，则不显示toolbar\n                        return;\n                    }\n                }\n\n                // 显示toolbar\n                show();\n            }, 500);\n        }).on('mouseleave', 'a', function (e) {\n            // 延时 500ms 隐藏toolbar\n            if (hideTimeoutId) {\n                clearTimeout(hideTimeoutId);\n            }\n            hideTimeoutId = setTimeout(hide, 500);\n        }).on('click keydown scroll', function (e) {\n            setTimeout(hide, 100);\n        });\n        // $toolbar 绑定事件\n        $toolbar.on('mouseenter', function (e) {\n            // 先中断掉 $txt.mouseleave 导致的隐藏\n            if (hideTimeoutId) {\n                clearTimeout(hideTimeoutId);\n            }\n        }).on('mouseleave', function (e) {\n            // 延时 500ms 显示toolbar\n            if (showTimeoutIdByToolbar) {\n                clearTimeout(showTimeoutIdByToolbar);\n            }\n            showTimeoutIdByToolbar = setTimeout(hide, 500);\n        });\n    });\n});*/\n// menu吸顶\n/*_e(function (E, $) {\n\n    E.plugin(function () {\n        var editor = this;\n        var menuFixed = editor.config.menuFixed;\n        if (menuFixed === false || typeof menuFixed !== 'number') {\n            // 没有配置菜单吸顶\n            return;\n        }\n        var bodyMarginTop = parseFloat(E.$body.css('margin-top'), 10);\n        if (isNaN(bodyMarginTop)) {\n            bodyMarginTop = 0;\n        }\n\n        var $editorContainer = editor.$editorContainer;\n        var editorTop = $editorContainer.offset().top;\n        var editorHeight = $editorContainer.outerHeight();\n        \n        var $menuContainer = editor.menuContainer.$menuContainer;\n        var menuCssPosition = $menuContainer.css('position');\n        var menuCssTop = $menuContainer.css('top');\n        var menuTop = $menuContainer.offset().top;\n        var menuHeight = $menuContainer.outerHeight();\n        \n        var $txt = editor.txt.$txt;\n\n        E.$window.scroll(function () {\n            //全屏模式不支持\n            if (editor.isFullScreen) {\n                return;\n            }\n\n            var sTop = E.$window.scrollTop();\n\n            // 需要重新计算宽度，因为浏览器可能此时出现滚动条\n            var menuWidth = $menuContainer.width();\n\n            // 如果 menuTop === 0 说明此前编辑器一直隐藏，后来显示出来了，要重新计算相关数据\n            if (menuTop === 0) {\n                menuTop = $menuContainer.offset().top;\n                editorTop = $editorContainer.offset().top;\n                editorHeight = $editorContainer.outerHeight();\n                menuHeight = $menuContainer.outerHeight();\n            }\n\n            if (sTop >= menuTop && sTop + menuFixed + menuHeight + 30 < editorTop + editorHeight) {\n                // 吸顶\n                $menuContainer.css({\n                    position: 'fixed',\n                    top: menuFixed\n                });\n\n                // 固定宽度\n                $menuContainer.width(menuWidth);\n\n                // 增加body margin-top\n                E.$body.css({\n                    'margin-top': bodyMarginTop + menuHeight\n                });\n\n                // 记录\n                if (!editor._isMenufixed) {\n                    editor._isMenufixed = true;\n                }\n            } else {\n                // 取消吸顶\n                $menuContainer.css({\n                    position: menuCssPosition,\n                    top: menuCssTop\n                });\n\n                // 取消宽度固定\n                $menuContainer.css('width', '100%');\n\n                // 还原 body margin-top\n                E.$body.css({\n                    'margin-top': bodyMarginTop\n                });\n\n                // 撤销记录\n                if (editor._isMenufixed) {\n                    editor._isMenufixed = false;\n                }\n            }\n        });\n    });\n});*/\n// 缩进 菜单插件\n_e(function (E, $) {\n\n    // 用 createMenu 方法创建菜单\n    E.createMenu(function (check) {\n\n        // 定义菜单id，不要和其他菜单id重复。编辑器自带的所有菜单id，可通过『参数配置-自定义菜单』一节查看\n        var menuId = 'indent';\n\n        // check将检查菜单配置（『参数配置-自定义菜单』一节描述）中是否该菜单id，如果没有，则忽略下面的代码。\n        if (!check(menuId)) {\n            return;\n        }\n\n        // this 指向 editor 对象自身\n        var editor = this;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,  // 编辑器对象\n            id: menuId,  // 菜单id\n            title: '缩进', // 菜单标题\n\n            // 正常状态和选中装下的dom对象，样式需要自定义\n            $domNormal: $('<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-indent-left\"></i></a>'),\n            $domSelected: $('<a href=\"#\" tabindex=\"-1\" class=\"selected\"><i class=\"wangeditor-menu-img-indent-left\"></i></a>')\n        });\n\n        // 菜单正常状态下，点击将触发该事件\n        menu.clickEvent = function (e) {\n            var elem = editor.getRangeElem();\n            var p = editor.getSelfOrParentByName(elem, 'p');\n            var $p;\n\n            if (!p) {\n                // 未找到 p 元素，则忽略\n                return e.preventDefault();\n            }\n            $p = $(p);\n\n            // 使用自定义命令\n            function commandFn() {\n                $p.css('text-indent', '2em');\n            }\n            editor.customCommand(e, commandFn);\n        };\n\n        // 菜单选中状态下，点击将触发该事件\n        menu.clickEventSelected = function (e) {\n            var elem = editor.getRangeElem();\n            var p = editor.getSelfOrParentByName(elem, 'p');\n            var $p;\n\n            if (!p) {\n                // 未找到 p 元素，则忽略\n                return e.preventDefault();\n            }\n            $p = $(p);\n\n            // 使用自定义命令\n            function commandFn() {\n                $p.css('text-indent', '0');\n            }\n            editor.customCommand(e, commandFn);\n        };\n\n        // 根据当前选区，自定义更新菜单的选中状态或者正常状态\n        menu.updateSelectedEvent = function () {\n            // 获取当前选区所在的父元素\n            var elem = editor.getRangeElem();\n            var p = editor.getSelfOrParentByName(elem, 'p');\n            var $p;\n            var indent;\n\n            if (!p) {\n                // 未找到 p 元素，则标记为未处于选中状态\n                return false;\n            }\n            $p = $(p);\n            indent = $p.css('text-indent');\n\n            if (!indent || indent === '0px') {\n                // 得到的p，text-indent 属性是 0，则标记为未处于选中状态\n                return false;\n            }\n\n            // 找到 p 元素，并且 text-indent 不是 0，则标记为选中状态\n            return true;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});\n// 行高 菜单插件\n/*_e(function (E, $) {\n\n    // 用 createMenu 方法创建菜单\n    E.createMenu(function (check) {\n\n        // 定义菜单id，不要和其他菜单id重复。编辑器自带的所有菜单id，可通过『参数配置-自定义菜单』一节查看\n        var menuId = 'lineheight';\n\n        // check将检查菜单配置（『参数配置-自定义菜单』一节描述）中是否该菜单id，如果没有，则忽略下面的代码。\n        if (!check(menuId)) {\n            return;\n        }\n\n        // this 指向 editor 对象自身\n        var editor = this;\n\n        // 由于浏览器自身不支持 lineHeight 命令，因此要做一个hook\n        editor.commandHooks.lineHeight = function (value) {\n            var rangeElem = editor.getRangeElem();\n            var targetElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5,pre');\n            if (!targetElem) {\n                return;\n            }\n            $(targetElem).css('line-height', value + '');\n        };\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,  // 编辑器对象\n            id: menuId,  // 菜单id\n            title: '行高', // 菜单标题\n            commandName: 'lineHeight', // 命令名称\n\n            // 正常状态和选中装下的dom对象，样式需要自定义\n            $domNormal: $('<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-arrows-v\"></i></a>'),\n            $domSelected: $('<a href=\"#\" tabindex=\"-1\" class=\"selected\"><i class=\"wangeditor-menu-img-arrows-v\"></i></a>')\n        });\n\n        // 数据源\n        var data  = {\n            // 格式： 'value' : 'title'\n            '1.0': '1.0倍',\n            '1.5': '1.5倍',\n            '1.8': '1.8倍',\n            '2.0': '2.0倍',\n            '2.5': '2.5倍',\n            '3.0': '3.0倍'\n        };\n\n        // 为menu创建droplist对象\n        var tpl = '<span style=\"line-height:{#commandValue}\">{#title}</span>';\n        menu.dropList = new E.DropList(editor, menu, {\n            data: data,  // 传入数据源\n            tpl: tpl  // 传入模板\n        });\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n\n    });\n});*/\n// 自定义上传\n/*_e(function (E, $) {\n\n    E.plugin(function () {\n\n        var editor = this;\n        var customUpload = editor.config.customUpload;\n        if (!customUpload) {\n            return;\n        } else if (editor.config.uploadImgUrl) {\n            alert('自定义上传无效，详看浏览器日志console.log');\n            E.error('已经配置了 uploadImgUrl ，就不能再配置 customUpload ，两者冲突。将导致自定义上传无效。');\n            return;\n        }\n\n        var $uploadContent = editor.$uploadContent;\n        if (!$uploadContent) {\n            E.error('自定义上传，无法获取 editor.$uploadContent');\n        }\n\n        // UI\n        var $uploadIcon = $('<div class=\"upload-icon-container\"><i class=\"wangeditor-menu-img-upload\"></i></div>');\n        $uploadContent.append($uploadIcon);\n\n        // 设置id，并暴露\n        var btnId = 'upload' + E.random();\n        var containerId = 'upload' + E.random();\n        $uploadIcon.attr('id', btnId);\n        $uploadContent.attr('id', containerId);\n\n        editor.customUploadBtnId = btnId;\n        editor.customUploadContainerId = containerId;\n    });\n});*/\n\n// 插件注入到vue里面\nvar _export = (function(){\n    var Vue;\n    function install(_Vue) {\n        if (Vue) {\n            console.error(\n                '[edit] already installed. Vue.use(edit) should be called only once.'\n            );\n            return\n        }\n        Vue = _Vue;\n        Vue.prototype.$edit = window.wangEditor;\n    }\n\n    return {\n        install: install,\n        version: '1.0.0'\n    }\n})();\n\nreturn _export;\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"7t+N\")))\n\n/***/ }),\n\n/***/ \"Yh7g\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"BGNd\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"+1mQ\"),\n  /* template */\n  __webpack_require__(\"+l+3\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"YmXF\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _vuex = __webpack_require__(\"NYxO\");\n\nvar _avatar = __webpack_require__(\"mOGY\");\n\nvar _avatar2 = _interopRequireDefault(_avatar);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n    data: function data() {\n        return {\n            avatar: _avatar2.default,\n            pageIndex: 1,\n            pageSize: 5,\n            messageType: 0\n        };\n    },\n\n    computed: (0, _vuex.mapState)({\n        message: function message(state) {\n            return state.message.message;\n        }\n    }),\n    methods: {\n        getMessageList: function getMessageList() {\n            var _this = this;\n\n            this.$store.dispatch('message_getMessageList', {\n                \"page\": this.pageIndex,\n                \"pageSize\": this.pageSize,\n                \"pagination\": 1,\n                \"messageType\": this.messageType\n            }).then(function (res) {\n                _this.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        pageSwitch: function pageSwitch(pageIndex) {\n            if (this.pageIndex == pageIndex) {\n                return false;\n            }\n            this.pageIndex = pageIndex;\n            this.getMessageList();\n        }\n    },\n    mounted: function mounted() {\n        this.getMessageList();\n    }\n};\n\n/***/ }),\n\n/***/ \"dibP\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"88zL\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"4IqS\"),\n  /* template */\n  __webpack_require__(\"iK2G\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"e1CJ\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = {\n    data: function data() {\n        return {\n            hasScroll: false\n        };\n    },\n    mounted: function mounted() {\n        var _this = this;\n\n        $(window).scroll(function (e) {\n            var scrollTop = $(window).scrollTop();\n            if (scrollTop > $(window).height() / 2) {\n                _this.hasScroll = true;\n            } else {\n                _this.hasScroll = false;\n            }\n        });\n    },\n\n    methods: {\n        top: function top() {\n            $(window).scrollTop(0);\n        }\n    }\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"7t+N\")))\n\n/***/ }),\n\n/***/ \"e4Z7\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"ztWJ\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"PSXG\"),\n  /* template */\n  __webpack_require__(\"ApeN\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"eBru\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _promise = __webpack_require__(\"//Fk\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _typeof2 = __webpack_require__(\"pFYg\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _user = __webpack_require__(\"zlOF\");\n\nvar user = _interopRequireWildcard(_user);\n\nvar _jsCookie = __webpack_require__(\"lbHh\");\n\nvar _jsCookie2 = _interopRequireDefault(_jsCookie);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar token = _jsCookie2.default.get('token');\n\nexports.default = {\n\tstate: {\n\t\tinvite_code: '',\n\n\t\tpassword: '',\n\n\t\trepasswrd: '',\n\n\t\tnewpassword: '',\n\t\trenewpassword: '',\n\n\t\tpwd_err_times: 0,\n\n\t\tphone: '',\n\t\ttime: 0,\n\n\t\tinfo: {\n\t\t\tavatar_url: '',\n\t\t\tblack: '',\n\t\t\tc_age: '',\n\t\t\tfans_count: '',\n\t\t\tnick_name: '',\n\t\t\topus_count: '',\n\t\t\trelation: '',\n\t\t\tsignature: '',\n\t\t\tuid: '',\n\t\t\tgender: -1,\n\t\t\tisLogin: !!token\n\t\t},\n\n\t\tcode: {\n\t\t\tpic_code: '',\n\t\t\tpic_vid: '',\n\t\t\tpic_vcode: '',\n\t\t\tphone_vcode: ''\n\t\t},\n\n\t\tisCodeCan: false,\n\t\tisPhoneCan: false,\n\t\tisReset: true,\n\t\tisLogin: true,\n\t\tisUpdate: true,\n\t\tisRegister: true,\n\t\tisUnboundPhone: true,\n\t\tisreBindPhone: true\n\t},\n\tmutations: {\n\t\tuser_setState: function user_setState(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tif (payload.hasOwnProperty(key)) {\n\t\t\t\t\tif ((0, _typeof3.default)(payload[key]) === 'object') {\n\t\t\t\t\t\tfor (var _key in payload[key]) {\n\t\t\t\t\t\t\tstate[key][_key] = payload[key][_key];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstate[key] = payload[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tuser_setTime: function user_setTime(state) {\n\t\t\tstate.time--;\n\t\t},\n\t\tuser_setUserInfo: function user_setUserInfo(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tstate.info[key] = payload[key];\n\t\t\t}\n\t\t}\n\t},\n\tactions: {\n\t\tuser_setState: function user_setState(context, payload) {\n\t\t\tcontext.commit('user_setState', payload);\n\t\t},\n\t\tuser_setUserInfo: function user_setUserInfo(context, payload) {\n\t\t\tcontext.commit('user_setUserInfo', payload);\n\t\t\treturn _promise2.default.resolve(1);\n\t\t},\n\t\tuser_getPicVerifyCode: function user_getPicVerifyCode(context, payload) {\n\t\t\tif (!payload.init && !context.state.isCodeCan) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -21,\n\t\t\t\t\tmsg: '加载中'\n\t\t\t\t});\n\t\t\t}\n\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\"isCodeCan\": false\n\t\t\t});\n\t\t\tvar promise = user.getPicVerifyCode(payload).then(function (res) {\n\t\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\t\"isCodeCan\": true,\n\t\t\t\t\t\"isPhoneCan\": true,\n\t\t\t\t\t\"code\": {\n\t\t\t\t\t\t\"pic_vcode\": String(res.pic_vcode),\n\t\t\t\t\t\t\"pic_vid\": res.pic_vid\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\t\"isCodeCan\": true\n\t\t\t\t});\n\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tuser_getPhoneVerifyCode: function user_getPhoneVerifyCode(context, payload) {\n\t\t\tif (!context.state.isPhoneCan) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -21,\n\t\t\t\t\tmsg: '加载中'\n\t\t\t\t});\n\t\t\t}\n\t\t\tvar promise = user.getPhoneVerifyCode({\n\t\t\t\t\"verifyType\": payload.verifyType,\n\t\t\t\t\"phoneNum\": context.state.phone,\n\t\t\t\t\"picVcode\": context.state.code.pic_code,\n\t\t\t\t\"picVid\": context.state.code.pic_vid }).then(function (res) {\n\t\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\t\"isPhoneCan\": false,\n\t\t\t\t\t\"time\": 60\n\t\t\t\t});\n\t\t\t\tvar timer = setInterval(function () {\n\t\t\t\t\tif (context.state.time <= 0) {\n\t\t\t\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\t\t\t\"isPhoneCan\": true\n\t\t\t\t\t\t});\n\t\t\t\t\t\tclearInterval(timer);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tcontext.commit('user_setTime');\n\t\t\t\t}, 1000);\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tuser_sigin: function user_sigin(context, payload) {\n\t\t\tif (!context.state.isLogin) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -21,\n\t\t\t\t\tmsg: '加载中'\n\t\t\t\t});\n\t\t\t}\n\t\t\tvar promise = user.sigin({\n\t\t\t\t\"phone_num\": context.state.phone,\n\t\t\t\t\"password\": context.state.password,\n\t\t\t\t\"pic_vid\": context.state.code.pic_vid,\n\t\t\t\t\"pic_vcode\": context.state.code.pic_code,\n\t\t\t\t\"device_no\": payload.device_no }).then(function (res) {\n\t\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\t\"isLogin\": true\n\t\t\t\t});\n\n\t\t\t\t_jsCookie2.default.set('token', res.token, {\n\t\t\t\t\tpath: '/',\n\t\t\t\t\texpires: payload.isSave ? 7 : ''\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\tif (err.pwd_err_times >= 5 || err.errcode == 20020) {\n\t\t\t\t\terr.pwd_err_times = 5;\n\t\t\t\t\tcontext.dispatch('user_getPicVerifyCode', {\n\t\t\t\t\t\tinit: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\t\"pwd_err_times\": err.pwd_err_times || context.state.pwd_err_times,\n\t\t\t\t\t\"isLogin\": true\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\tuser_sigup: function user_sigup(context, payload) {\n\t\t\tif (!context.state.isRegister) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -21,\n\t\t\t\t\tmsg: '加载中'\n\t\t\t\t});\n\t\t\t}\n\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\"isRegister\": false\n\t\t\t});\n\t\t\tvar promise = user.sigup({\n\t\t\t\t\"invite_code\": context.state.invite_code,\n\t\t\t\t\"phone_num\": context.state.phone,\n\t\t\t\t\"password\": context.state.password,\n\t\t\t\t\"pic_vid\": context.state.code.pic_vid,\n\t\t\t\t\"pic_vcode\": context.state.code.pic_code,\n\t\t\t\t\"phone_vcode\": context.state.code.phone_vcode,\n\t\t\t\t\"device_no\": payload.device_no,\n\t\t\t\t\"_header\": payload._header\n\t\t\t}).then(function (res) {\n\t\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\t\"isRegister\": true\n\t\t\t\t});\n\n\t\t\t\t_jsCookie2.default.set('token', res.token, {\n\t\t\t\t\tpath: '/',\n\t\t\t\t\texpires: 7\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\t\"isRegister\": true\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tuser_backPwd: function user_backPwd(context, payload) {\n\t\t\tif (!context.state.isReset) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\"isReset\": false\n\t\t\t});\n\t\t\tvar promise = user.resetPwd({\n\t\t\t\t\"phone_num\": context.state.phone,\n\t\t\t\t\"password\": context.state.password,\n\t\t\t\t\"phone_vcode\": context.state.code.phone_vcode,\n\t\t\t\t\"device_no\": payload.device_no,\n\t\t\t\t\"_header\": payload._header\n\t\t\t}).then(function (res) {\n\t\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\t\"isReset\": true\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\t\"isReset\": true\n\t\t\t\t});\n\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tuser_resetPwd: function user_resetPwd(context, payload) {\n\t\t\tif (!context.state.isReset) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -21,\n\t\t\t\t\tmsg: '加载中'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!$.trim(context.state.password) || context.state.password.length < 6 || context.state.password.length > 12) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\t\"ret\": -2,\n\t\t\t\t\t\"msg\": '输入旧密码'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!$.trim(context.state.newpassword) || context.state.newpassword.length < 6 || context.state.newpassword.length > 12) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\t\"ret\": -2,\n\t\t\t\t\t\"msg\": '输入新密码'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (context.state.newpassword != context.state.renewpassword) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\t\"ret\": -2,\n\t\t\t\t\t\"msg\": '密码不一致'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!$.trim(context.state.code.phone_vcode)) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\t\"ret\": -2,\n\t\t\t\t\t\"msg\": '输入验证码'\n\t\t\t\t});\n\t\t\t}\n\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\"isReset\": false\n\t\t\t});\n\t\t\tvar promise = user.resetPwd({\n\t\t\t\t\"phone_num\": context.state.phone,\n\t\t\t\t\"password\": context.state.password,\n\t\t\t\t\"phone_vcode\": context.state.code.phone_vcode,\n\t\t\t\t\"device_no\": payload.device_no,\n\t\t\t\t\"_header\": payload._header\n\t\t\t}).then(function (res) {\n\t\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\t\"isReset\": true\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\t\"isReset\": true\n\t\t\t\t});\n\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tuser_updateUserInfo: function user_updateUserInfo(context, payload) {\n\t\t\tif (!context.state.isUpdate) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -21,\n\t\t\t\t\tmsg: '加载中'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!$.trim(context.state.info.gender) && !$.trim(context.state.info.nick_name) && !$.trim(context.state.info.avatar_url) && !$.trim(context.state.info.signature)) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\t\"ret\": -2,\n\t\t\t\t\t\"msg\": '参数错误！'\n\t\t\t\t});\n\t\t\t}\n\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\"isUpdate\": false\n\t\t\t});\n\n\t\t\tvar promise = user.updateUserInfo({\n\t\t\t\t\"gender\": context.state.info.gender,\n\t\t\t\t\"nick_name\": context.state.info.nick_name,\n\t\t\t\t\"avatar_url\": context.state.info.avatar_url,\n\t\t\t\t\"signature\": context.state.info.signature\n\t\t\t}).then(function (res) {\n\t\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\t\"isUpdate\": true\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\t\"isUpdate\": true\n\t\t\t\t});\n\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tuser_getUserInfo: function user_getUserInfo(context, payload) {\n\t\t\tif (payload.userId == context.state.info.uid) {\n\t\t\t\treturn _promise2.default.resolve(context.state.info);\n\t\t\t}\n\n\t\t\tvar promise = user.getUserInfo(payload).then(function (res) {\n\t\t\t\tif (!payload.userId) {\n\t\t\t\t\tcontext.commit('user_setUserInfo', res.info);\n\t\t\t\t}\n\n\t\t\t\treturn _promise2.default.resolve(res.info);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tuser_ourlogin: function user_ourlogin(context, payload) {\n\t\t\tcontext.commit('user_setUserInfo', {\n\t\t\t\tavatar_url: '',\n\t\t\t\tblack: '',\n\t\t\t\tc_age: '',\n\t\t\t\tfans_count: '',\n\t\t\t\tnick_name: '',\n\t\t\t\topus_count: '',\n\t\t\t\trelation: '',\n\t\t\t\tsignature: '',\n\t\t\t\tuid: '',\n\t\t\t\tisLogin: ''\n\t\t\t});\n\n\t\t\t_jsCookie2.default.remove('token', {});\n\t\t},\n\t\tuser_unboundPhone: function user_unboundPhone(context, payload) {\n\t\t\tif (!context.state.isUnboundPhone) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -21,\n\t\t\t\t\tmsg: '加载中'\n\t\t\t\t});\n\t\t\t}\n\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\"isUnboundPhone\": false\n\t\t\t});\n\n\t\t\tvar promise = user.unboundPhone({\n\t\t\t\t\"phone_num\": context.state.phone,\n\t\t\t\t\"phone_vcode\": context.state.code.phone_vcode }).then(function (res) {\n\t\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\t\"phone\": '',\n\t\t\t\t\t\"code\": {\n\t\t\t\t\t\tpic_code: '',\n\t\t\t\t\t\tpic_vid: '',\n\t\t\t\t\t\tpic_vcode: '',\n\t\t\t\t\t\tphone_vcode: ''\n\t\t\t\t\t},\n\t\t\t\t\t\"isUnboundPhone\": true\n\t\t\t\t});\n\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\t\"isUnboundPhone\": true\n\t\t\t\t});\n\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tuser_reBindPhone: function user_reBindPhone(context, payload) {\n\t\t\tif (!context.state.isreBindPhone) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -21,\n\t\t\t\t\tmsg: '加载中'\n\t\t\t\t});\n\t\t\t}\n\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\"isreBindPhone\": false\n\t\t\t});\n\n\t\t\tvar promise = user.reBindPhone({\n\t\t\t\t\"phone_num\": context.state.phone,\n\t\t\t\t\"phone_vcode\": context.state.code.phone_vcode }).then(function (res) {\n\t\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\t\"phone\": '',\n\t\t\t\t\t\"code\": {\n\t\t\t\t\t\tpic_code: '',\n\t\t\t\t\t\tpic_vid: '',\n\t\t\t\t\t\tpic_vcode: '',\n\t\t\t\t\t\tphone_vcode: ''\n\t\t\t\t\t},\n\t\t\t\t\t\"isreBindPhone\": true\n\t\t\t\t});\n\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\tcontext.commit('user_setState', {\n\t\t\t\t\t\"isreBindPhone\": true\n\t\t\t\t});\n\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t}\n\t}\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"7t+N\")))\n\n/***/ }),\n\n/***/ \"eemp\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"euaV\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-edit\"\n  }, [_c('div', {\n    staticClass: \"c-edit-content\",\n    attrs: {\n      \"id\": \"edit\"\n    },\n    on: {\n      \"click\": _vm.click\n    }\n  }), _vm._v(\" \"), (_vm.edit_init) ? _c('keep-alive', [_c('UploadImg', {\n    attrs: {\n      \"type\": \"2\",\n      \"select\": \"edit_upload_image_select\",\n      \"container\": \"edit_container\"\n    },\n    on: {\n      \"uploadImg_uploaded\": _vm.uploaded,\n      \"uploadImg_error\": _vm.error\n    }\n  })], 1) : _vm._e()], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ \"gnCm\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-article-header\"\n  }, [_c('div', {\n    staticClass: \"c-article-header-wrap\"\n  }, [_c('div', {\n    staticClass: \"c-article-header_left\"\n  }, [_c('div', {\n    staticClass: \"left-img\"\n  }, [_c('img', {\n    attrs: {\n      \"src\": _vm.catalog.catalog_cover_url\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"left-tag\",\n    class: {\n      'z-man': _vm.catalog.category_title == '漫画', 'z-wen': _vm.catalog.category_title == '文字'\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"c-article-header_right\"\n  }, [_c('div', {\n    staticClass: \"name\"\n  }, [_c('div', {\n    staticClass: \"name-text\"\n  }, [_vm._v(_vm._s(_vm.catalog.catalog_title))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"name-tag\"\n  }, [_vm._v(_vm._s(_vm.level['level' + _vm.catalog.level]))])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"btn\"\n  }, [_c('div', {\n    staticClass: \"btn-item btn-mark\",\n    attrs: {\n      \"data-catalog_id\": _vm.catalog.catalog_id\n    }\n  }, [(_vm.catalog.owner != 1) ? _c('span', {\n    on: {\n      \"click\": function($event) {\n        _vm.mark(_vm.catalog.catalog_id)\n      }\n    }\n  }, [_vm._v(_vm._s(_vm.catalog.is_collected == 1 ? '取消收藏' : '加入收藏'))]) : _c('span', {\n    on: {\n      \"click\": _vm.updateCatalog\n    }\n  }, [_vm._v(\"修改目录信息\")])]), _vm._v(\" \"), _vm._m(0), _vm._v(\" \"), _c('div', {\n    staticClass: \"btn-item btn-more\"\n  }, [_c('div', {\n    staticClass: \"cpm_sub_more z-left\"\n  }, [_c('div', {\n    staticClass: \"item\",\n    on: {\n      \"click\": _vm.addReport\n    }\n  }, [_c('div', {\n    staticClass: \"item-icon z-report\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"举报\")])])])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"text\"\n  }, [_c('div', {\n    staticClass: \"text-intro\"\n  }, [_vm._v(_vm._s(_vm.catalog.catalog_desc))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"text-tag\"\n  }, _vm._l((_vm.catalog.labels), function(item) {\n    return _c('p', [_vm._v(_vm._s(item))])\n  })), _vm._v(\" \"), _c('div', {\n    staticClass: \"text-number\"\n  }, [_c('div', {\n    staticClass: \"text-number-item text-zan\"\n  }, [_c('span'), _vm._v(\" \"), _c('strong', [_vm._v(_vm._s(_vm.catalog.praise_count))])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"text-number-item text-comment\"\n  }, [_c('span'), _vm._v(\" \"), _c('strong', [_vm._v(_vm._s(_vm.catalog.comment_count))])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"text-author\"\n  }, [_c('div', {\n    staticClass: \"text-author__img\"\n  }, [_c('img', {\n    attrs: {\n      \"src\": _vm.catalog.user && _vm.catalog.user.avatar_url || _vm.avatar\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"text-author__name\"\n  }, [_vm._v(_vm._s(_vm.catalog.user && _vm.catalog.user.nick_name))])])])])])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"btn-item btn-share\"\n  }, [_c('div', {\n    staticClass: \"cpm_sub_more z-left\"\n  }, [_c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-wx\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"微信\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-peng\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"朋友圈\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-wb\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"微博\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-qq\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"QQ 好友\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-kong\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"QQ 空间\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-more\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"更多\")])])])])\n}]}\n\n/***/ }),\n\n/***/ \"hyrZ\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _promise = __webpack_require__(\"//Fk\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _typeof2 = __webpack_require__(\"pFYg\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _auth = __webpack_require__(\"lI/H\");\n\nvar auth = _interopRequireWildcard(_auth);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n\tstate: {\n\t\tcount: 0,\n\t\tlists: [],\n\n\t\tcode: ''\n\t},\n\tmutations: {\n\t\tauth_setState: function auth_setState(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tif (payload.hasOwnProperty(key)) {\n\t\t\t\t\tif ((0, _typeof3.default)(payload[key]) === 'object') {\n\t\t\t\t\t\tfor (var _key in payload[key]) {\n\t\t\t\t\t\t\tstate[key][_key] = payload[key][_key];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstate[key] = payload[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tauth_setLists: function auth_setLists(state, payload) {\n\t\t\tstate.count = payload.count;\n\t\t\tstate.lists = payload.lists;\n\t\t},\n\t\tauth_setCode: function auth_setCode(state, payload) {\n\t\t\tstate.code = payload.code;\n\t\t}\n\t},\n\tactions: {\n\t\tauth_setState: function auth_setState(context, payload) {\n\t\t\tcontext.commit('auth_setState', payload);\n\t\t},\n\t\tauth_getFollowList: function auth_getFollowList(context, payload) {\n\t\t\tvar promise = auth.getFollowList(payload).then(function (res) {\n\t\t\t\tres.list.map(function (list) {\n\t\t\t\t\tlist.relation = 1;\n\t\t\t\t});\n\t\t\t\tcontext.commit('auth_setLists', {\n\t\t\t\t\t\"lists\": res.list,\n\t\t\t\t\t\"count\": res.page_info.total_count\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (res) {\n\t\t\t\treturn _promise2.default.reject(res);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tauth_getFansList: function auth_getFansList(context, payload) {\n\t\t\tvar promise = auth.getFansList(payload).then(function (res) {\n\t\t\t\tcontext.commit('auth_setLists', {\n\t\t\t\t\t\"lists\": res.list,\n\t\t\t\t\t\"count\": res.page_info.total_count\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (res) {\n\t\t\t\treturn _promise2.default.reject(res);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tauth_getUserList: function auth_getUserList(context, payload) {\n\t\t\tvar promise = auth.getUserList(payload).then(function (res) {\n\t\t\t\tcontext.commit('auth_setLists', {\n\t\t\t\t\t\"lists\": res.list,\n\t\t\t\t\t\"count\": res.page_info.total_count\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (res) {\n\t\t\t\treturn _promise2.default.reject(res);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tauth_getBlackList: function auth_getBlackList(context, payload) {\n\t\t\tvar promise = auth.getBlackList({\n\t\t\t\t\"pagination\": 1,\n\t\t\t\t\"page\": payload.pageIndex,\n\t\t\t\t\"pageSize\": payload.pageSize }).then(function (res) {\n\t\t\t\tres.list.map(function (list) {\n\t\t\t\t\tlist.relation = 3;\n\t\t\t\t});\n\t\t\t\tcontext.commit('auth_setLists', {\n\t\t\t\t\t\"lists\": res.list,\n\t\t\t\t\t\"count\": res.page_info.total_count\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (res) {\n\t\t\t\treturn _promise2.default.reject(res);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tauth_delBlack: function auth_delBlack(context, payload) {\n\t\t\tvar promise = auth.delBlack({\n\t\t\t\tuserId: payload.userId }).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (res) {\n\t\t\t\treturn _promise2.default.reject(res);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tauth_addBlack: function auth_addBlack(context, payload) {\n\t\t\tvar promise = auth.addBlack({\n\t\t\t\tuserId: payload.userId }).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (res) {\n\t\t\t\treturn _promise2.default.reject(res);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tauth_addFollow: function auth_addFollow(context, payload) {\n\t\t\tvar promise = auth.addFollow({\n\t\t\t\tuserId: payload.userId }).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (res) {\n\t\t\t\treturn _promise2.default.reject(res);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tauth_delFollow: function auth_delFollow(context, payload) {\n\t\t\tvar promise = auth.delFollow({\n\t\t\t\tuserId: payload.userId }).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (res) {\n\t\t\t\treturn _promise2.default.reject(res);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tauth_getRecommendUserList: function auth_getRecommendUserList(context, payload) {\n\t\t\tvar promise = auth.getRecommendUserList(payload).then(function (res) {\n\t\t\t\tcontext.commit('auth_setLists', {\n\t\t\t\t\t\"lists\": res.list,\n\t\t\t\t\t\"count\": res.list.length\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (res) {\n\t\t\t\treturn _promise2.default.reject(res);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tauth_getActiveUserList: function auth_getActiveUserList(context, payload) {\n\t\t\tvar promise = auth.getActiveUserList(payload).then(function (res) {\n\t\t\t\tcontext.commit('auth_setLists', {\n\t\t\t\t\t\"lists\": res.list,\n\t\t\t\t\t\"count\": res.list.length\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (res) {\n\t\t\t\treturn _promise2.default.reject(res);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tauth_getInviteCode: function auth_getInviteCode(context, payload) {\n\t\t\tvar promise = auth.getInviteCode(payload).then(function (res) {\n\t\t\t\tcontext.commit('auth_setCode', {\n\t\t\t\t\t\"code\": res.invite_code\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (res) {\n\t\t\t\treturn _promise2.default.reject(res);\n\t\t\t});\n\t\t\treturn promise;\n\t\t}\n\t}\n};\n\n/***/ }),\n\n/***/ \"iK2G\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-author-header\"\n  }, [_c('div', {\n    staticClass: \"c-author-header-wrap\"\n  }, [_c('div', {\n    staticClass: \"c-author-header_left\"\n  }, [_c('div', {\n    staticClass: \"img\"\n  }, [_c('img', {\n    attrs: {\n      \"src\": _vm.user.avatar_url || _vm.avatar\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.userInfo.uid == _vm.user_id),\n      expression: \"userInfo.uid == user_id\"\n    }],\n    staticClass: \"icon\",\n    attrs: {\n      \"id\": \"author_upload_image_select\"\n    }\n  }), _vm._v(\" \"), _c('UploadImg', {\n    attrs: {\n      \"type\": \"1\",\n      \"select\": \"author_upload_image_select\",\n      \"container\": \"author_container\"\n    },\n    on: {\n      \"uploadImg_uploaded\": _vm.uploaded\n    }\n  })], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"c-author-header_right\"\n  }, [_c('div', {\n    staticClass: \"name\"\n  }, [_c('div', {\n    staticClass: \"name-text\"\n  }, [_vm._v(_vm._s(_vm.user.nick_name))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"name-time\"\n  }, [_vm._v(\"社区年龄：\"), _c('span', [_vm._v(_vm._s(_vm.user.c_age))])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"btn\"\n  }, [_c('div', {\n    staticClass: \"btn-item btn-mark\",\n    class: [{\n      'z-width': _vm.user.relation == -1\n    }],\n    on: {\n      \"click\": _vm.follow\n    }\n  }, [(_vm.userInfo.uid != _vm.user_id) ? _c('span', [_vm._v(_vm._s(_vm.user.relation == 1 || _vm.user.relation == 3 ? '已关注' : '添加关注'))]) : _c('a', {\n    attrs: {\n      \"href\": \"setting.userinfo.html\"\n    }\n  }, [_vm._v(\"个人设置\")])]), _vm._v(\" \"), _vm._m(0), _vm._v(\" \"), (_vm.userInfo.uid != _vm.user_id) ? _c('div', {\n    staticClass: \"btn-item btn-more\"\n  }, [_c('div', {\n    staticClass: \"cpm_sub_more z-left\"\n  }, [_c('div', {\n    staticClass: \"item\",\n    on: {\n      \"click\": _vm.addBlackDialog\n    }\n  }, [_c('div', {\n    staticClass: \"item-icon z-black\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"加入黑名单\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\",\n    on: {\n      \"click\": _vm.addReport\n    }\n  }, [_c('div', {\n    staticClass: \"item-icon z-report\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"举报\")])])])]) : _vm._e()]), _vm._v(\" \"), _c('div', {\n    staticClass: \"text\"\n  }, [_vm._v(_vm._s(_vm.user.signature))])])])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"btn-item btn-share\"\n  }, [_c('div', {\n    staticClass: \"cpm_sub_more z-left\"\n  }, [_c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-wx\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"微信\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-peng\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"朋友圈\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-wb\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"微博\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-qq\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"QQ 好友\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-kong\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"QQ 空间\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-more\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"更多\")])])])])\n}]}\n\n/***/ }),\n\n/***/ \"iyE5\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-bubble\",\n    class: {\n      cpm_hide: !_vm.data.show\n    },\n    attrs: {\n      \"id\": \"bubble\"\n    }\n  }, [_c('div', {\n    staticClass: \"c-bubble-mask\",\n    on: {\n      \"click\": _vm.close\n    }\n  }), _vm._v(\" \"), (_vm.data.type == 'top') ? _c('div', {\n    staticClass: \"c-bubble-top\",\n    class: _vm.data.top.status\n  }, [_vm._v(\"\\n\\n    \\t\" + _vm._s(_vm.data.top.msg) + \"\\n    \")]) : _vm._e(), _vm._v(\" \"), (_vm.data.type == 'report') ? _c('div', {\n    staticClass: \"c-bubble-report\"\n  }, [_c('div', {\n    staticClass: \"report-title\"\n  }, [_vm._v(\"\\n    \\t\\t选择举报类型\\n    \\t\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"report-content\"\n  }, [_c('div', {\n    staticClass: \"select-item z-on\",\n    attrs: {\n      \"data-type\": \"adv\"\n    },\n    on: {\n      \"click\": _vm.radioSwitch\n    }\n  }, [_vm._m(0), _vm._v(\" \"), _c('span', {\n    staticClass: \"select-item-text\"\n  }, [_vm._v(\"广告或者垃圾信息\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"select-item\",\n    attrs: {\n      \"data-type\": \"copy\"\n    },\n    on: {\n      \"click\": _vm.radioSwitch\n    }\n  }, [_vm._m(1), _vm._v(\" \"), _c('span', {\n    staticClass: \"select-item-text\"\n  }, [_vm._v(\"抄袭或未授权转载\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"select-item\",\n    attrs: {\n      \"data-type\": \"other\"\n    },\n    on: {\n      \"click\": _vm.radioSwitch\n    }\n  }, [_vm._m(2), _vm._v(\" \"), _c('span', {\n    staticClass: \"select-item-text\"\n  }, [_vm._v(\"其他原因\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"textare-item\"\n  }, [_c('textarea', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.content),\n      expression: \"content\"\n    }],\n    attrs: {\n      \"placeholder\": \"请输入举报原因\"\n    },\n    domProps: {\n      \"value\": (_vm.content)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.content = $event.target.value\n      }\n    }\n  })])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"report-bottom\"\n  }, [_c('div', {\n    staticClass: \"report-bottom-item report-bottom-cancel\",\n    on: {\n      \"click\": _vm.close\n    }\n  }, [_vm._v(\"取消\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"report-bottom-item report-bottom-comfire\",\n    on: {\n      \"click\": _vm.addReport\n    }\n  }, [_vm._v(\"确认\")])])]) : _vm._e(), _vm._v(\" \"), (_vm.data.type == 'declaration') ? _c('div', {\n    staticClass: \"c-bubble-declaration\"\n  }, [_c('div', {\n    staticClass: \"declaration-title\"\n  }, [_vm._v(\"原创声明\")]), _vm._v(\" \"), _vm._m(3), _vm._v(\" \"), _vm._m(4)]) : _vm._e(), _vm._v(\" \"), (_vm.data.type == 'warn') ? _c('div', {\n    staticClass: \"c-bubble-warn\"\n  }, [_c('div', {\n    staticClass: \"warn-title\"\n  }, [_vm._v(_vm._s(_vm.data.warn.title))]), _vm._v(\" \"), (_vm.data.warn.html) ? _c('div', {\n    staticClass: \"warn-content\",\n    domProps: {\n      \"innerHTML\": _vm._s(_vm.data.warn.html)\n    }\n  }) : _c('div', {\n    staticClass: \"warn-content\"\n  }, [_vm._v(_vm._s(_vm.data.warn.content))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"warn-bottom\"\n  }, [_c('div', {\n    staticClass: \"warn-bottom-item warn-bottom-cancel\",\n    on: {\n      \"click\": _vm.close\n    }\n  }, [_vm._v(\"取消\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"warn-bottom-item warn-bottom-comfire\",\n    on: {\n      \"click\": _vm.comfire\n    }\n  }, [_vm._v(\"确认\")])])]) : _vm._e(), _vm._v(\" \"), (_vm.data.type == 'complete') ? _c('div', {\n    staticClass: \"c-bubble-complete\"\n  }, [_c('div', {\n    staticClass: \"complete-title\"\n  }, [_vm._v(_vm._s(_vm.data.complete.title))]), _vm._v(\" \"), _vm._m(5), _vm._v(\" \"), _c('div', {\n    staticClass: \"complete-bottom\"\n  }, [_c('div', {\n    staticClass: \"complete-bottom-item complete-bottom-cancel\",\n    on: {\n      \"click\": _vm.close\n    }\n  }, [_vm._v(\"继续创作\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"complete-bottom-item complete-bottom-comfire\",\n    on: {\n      \"click\": _vm.comfireAll\n    }\n  }, [_vm._v(\"查看作品\")])])]) : _vm._e()])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('span', {\n    staticClass: \"select-item-radio\"\n  }, [_c('em')])\n},function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('span', {\n    staticClass: \"select-item-radio\"\n  }, [_c('em')])\n},function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('span', {\n    staticClass: \"select-item-radio\"\n  }, [_c('em')])\n},function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"declaration-content\"\n  }, [_c('h3', [_vm._v(\"原创特指自己独立完成创作的作品。歪曲、篡改他人创作或者抄袭、剽窃他人创作而产生的作品，改编、翻译、注释、整理他人已有创作而产生的作品均不能说是原创。\")]), _vm._v(\" \"), _c('p', [_vm._v(\"如下情形不得对作品进行原创声明，一经发现将对作品永久收回原创声明功能使用权限，导致严重影响的还将对违规帐号予以一定期限内封号处理；\")]), _vm._v(\" \"), _c('p', [_vm._v(\"1. 未取得合法授权发布的作品；\")]), _vm._v(\" \"), _c('p', [_vm._v(\"2. 作品主要篇幅为诸如“法律、法规，国家机关的决议、决定、命令和其他具有立法、行政、司法性质的文件、时事新闻、历法、通用数表、通用表格和公式”等公共内容；\")]), _vm._v(\" \"), _c('p', [_vm._v(\"3. 大篇幅引用他人内容或作品主要内容为他人作品，如书摘、文摘、报摘等；\")]), _vm._v(\" \"), _c('p', [_vm._v(\"4. 营销性质的内容；\")]), _vm._v(\" \"), _c('p', [_vm._v(\"5. 整合的内容；\")]), _vm._v(\" \"), _c('p', [_vm._v(\"6. 对非独家代理的作品声明原创等；\")]), _vm._v(\" \"), _c('p', [_vm._v(\"7. 色情低俗内容、暴力内容、等内容；\")]), _vm._v(\" \"), _c('p', [_vm._v(\"8. 违反法律法规、政策及公序良俗、社会公德，违反《耳语作品规则》、《耳语版权声明》，或干扰耳语平台正常运营和侵犯其他用户或第三方合法权益内容的信息。\")])])\n},function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"declaration-bottom\"\n  }, [_c('div', {\n    staticClass: \"declaration-bottom-cancel cpm_button_weak z-disline\"\n  }, [_vm._v(\"取消\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"declaration-bottom-comfire cpm_button_default z-disline\"\n  }, [_vm._v(\"确认\")])])\n},function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"complete-content\"\n  }, [_c('p', [_vm._v(\"发布成功\")]), _vm._v(\" \"), _c('p', [_vm._v(\"我们审核后会推送至首页，但你可以先分享好友阅读\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"complete-share\"\n  }, [_c('div', {\n    staticClass: \"share-item share-py\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"share-item share-line\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"share-item share-qq\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"share-item share-kong\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"share-item share-wb\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"share-item share-more\"\n  })])])\n}]}\n\n/***/ }),\n\n/***/ \"jZOH\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"jz42\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"EB0Y\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"PCXR\"),\n  /* template */\n  __webpack_require__(\"1na0\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"kZEp\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\r\n * eventHub 1.0.0\r\n * @license MIT\r\n */\r\n(function(global, factory) {\r\n     true ? \r\n        module.exports = factory() :\r\n        typeof define === 'function' && define.amd ? \r\n            define(factory) :\r\n            (global.eventHub = factory());\r\n}(this, (function() {\r\n    'use strict';\r\n\r\n    var Vue;\r\n    function install(_Vue) {\r\n        if (Vue) {\r\n            console.error(\r\n                '[eventHub] already installed. Vue.use(eventHub) should be called only once.'\r\n            );\r\n            return\r\n        }\r\n        Vue = _Vue;\r\n        Vue.prototype.$eventHub = new EventHub();\r\n    }\r\n\r\n    // 创建eventHub实例\r\n    function EventHub (){\r\n        this._vm = new Vue();\r\n    }\r\n    EventHub.prototype = {\r\n        $on: function(event, fn){\r\n            this._vm.$on(event, fn);\r\n            return this;\r\n        },\r\n        $emit: function(event, payload){\r\n            this._vm.$emit(event, payload);\r\n            return this;\r\n        }\r\n    }\r\n\r\n    var index = {\r\n        install: install,\r\n        version: '1.0.0'\r\n    };\r\n\r\n    return index;\r\n})));\n\n/***/ }),\n\n/***/ \"kfRd\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = {\n    props: ['count', 'length', 'index', 'ext'],\n    computed: {\n        pages: function pages() {\n            return Math.ceil(this.count / this.length);\n        }\n    },\n    methods: {\n        pageSwitch: function pageSwitch(e) {\n            var node = e.target;\n            var index = node.dataset['index'];\n            var dist;\n            if (index == 'prev') {\n                dist = this.index - 1;\n            } else if (index == 'next') {\n                dist = this.index + 1;\n            } else {\n                dist = parseInt(index);\n            }\n            this.$emit('page_switch', dist, this.ext);\n        }\n    },\n    render: function render(h) {\n        var that = this;\n        var index = this.index;\n        var pages = this.pages;\n        var _arr = [];\n        var isloadmore = false;\n        var left = 0;\n        var right = 0;\n        for (var i = 0; i < pages; i++) {\n            _arr[i] = i;\n        }\n        if (pages == 0) {\n            return '';\n        }\n        if (index == 1 || index == pages) {\n            isloadmore = true;\n        }\n        if (index - 1 < 3) {\n            right = isloadmore ? 5 - index : 4 - index;\n        }\n        if (pages - index < 3) {\n            left = isloadmore ? 4 - (pages - index) : 3 - (pages - index);\n        }\n        return h(\n            'div',\n            { 'class': 'c-page-fenye' },\n            [index != 1 ? h(\n                'div',\n                { 'class': 'item z-prev', attrs: { 'data-index': 'prev' },\n                    on: {\n                        'click': that.pageSwitch\n                    }\n                },\n                []\n            ) : '', _arr.map(function (item, i) {\n                var _index = i + 1;\n\n                if (_index + 3 + left < index) {\n                    return '';\n                }\n\n                if (index + 3 + right < _index) {\n                    return '';\n                }\n                isloadmore--;\n                return h(\n                    'div',\n                    { 'class': \"item \" + (_index == index ? 'z-on' : ''), attrs: { 'data-index': _index },\n                        on: {\n                            'click': that.pageSwitch\n                        }\n                    },\n                    [_index]\n                );\n            }), index != pages ? h(\n                'div',\n                { 'class': 'item z-next', attrs: { 'data-index': 'next' },\n                    on: {\n                        'click': that.pageSwitch\n                    }\n                },\n                []\n            ) : '', h(\n                'div',\n                { 'class': 'text' },\n                ['\\u5171\\u9875', h(\n                    'span',\n                    null,\n                    [pages]\n                ), '\\uFF0C\\u8DF3\\u8F6C']\n            ), h(\n                'div',\n                { 'class': 'input cpm_form_input' },\n                [h(\n                    'input',\n                    {\n                        attrs: { type: 'text' }\n                    },\n                    []\n                )]\n            ), h(\n                'div',\n                { 'class': 'btn cpm_button_default' },\n                ['GO']\n            )]\n        );\n    }\n};\n\n/***/ }),\n\n/***/ \"lI/H\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports._reject = exports.getInviteCode = exports.getActiveUserList = exports.getRecommendUserList = exports.getUserList = exports.delFollow = exports.addFollow = exports.addBlack = exports.delBlack = exports.getBlackList = exports.getFollowList = exports.getFansList = undefined;\n\nvar _config = __webpack_require__(\"AEPM\");\n\nvar _jsCookie = __webpack_require__(\"lbHh\");\n\nvar _jsCookie2 = _interopRequireDefault(_jsCookie);\n\nvar _axios = __webpack_require__(\"mtWM\");\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_axios2.default.defaults.headers.get['Content-Type'] = 'application/x-www-form-urlencoded';\n_axios2.default.defaults.headers.get['X-Requested-With'] = 'XMLHttpRequest';\nvar token = _jsCookie2.default.get('token');\n\nfunction getBlackList(option) {\n\tvar url = _config.baseUrl + 'user/getBlackList';\n\n\tif (!token) {\n\t\treturn (0, _config._rejectObj)({\n\t\t\tret: -10,\n\t\t\tmsg: '未登录'\n\t\t});\n\t}\n\n\tdelete option._header;\n\treturn (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nfunction delBlack(option) {\n\tvar url = _config.baseUrl + 'user/delBlack/' + option.userId;\n\n\tif (!token) {\n\t\treturn (0, _config._rejectObj)({\n\t\t\tret: -10,\n\t\t\tmsg: '未登录'\n\t\t});\n\t}\n\n\tdelete option._header;\n\treturn (0, _axios2.default)({\n\t\tmethod: 'DELETE',\n\t\turl: url,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nfunction addBlack(option) {\n\tvar url = _config.baseUrl + 'user/addBlack/' + option.userId;\n\n\tif (!token) {\n\t\treturn (0, _config._rejectObj)({\n\t\t\tret: -10,\n\t\t\tmsg: '未登录'\n\t\t});\n\t}\n\n\tdelete option._header;\n\treturn (0, _axios2.default)({\n\t\tmethod: 'PUT',\n\t\turl: url,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nfunction addFollow(option) {\n\tvar url = _config.baseUrl + 'user/addFollow/' + option.userId;\n\n\tif (!token) {\n\t\treturn (0, _config._rejectObj)({\n\t\t\tret: -10,\n\t\t\tmsg: '未登录'\n\t\t});\n\t}\n\n\tdelete option._header;\n\treturn (0, _axios2.default)({\n\t\tmethod: 'PUT',\n\t\turl: url,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nfunction delFollow(option) {\n\tvar url = _config.baseUrl + 'user/delFollow/' + option.userId;\n\n\tif (!token) {\n\t\treturn (0, _config._rejectObj)({\n\t\t\tret: -10,\n\t\t\tmsg: '未登录'\n\t\t});\n\t}\n\n\tdelete option._header;\n\treturn (0, _axios2.default)({\n\t\tmethod: 'DELETE',\n\t\turl: url,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nfunction getUserList(option) {\n\tvar url = _config.baseUrl + 'user/getUserList';\n\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction getFollowList(option) {\n\tvar url = _config.baseUrl + 'user/getFollowList';\n\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction getFansList(option) {\n\tvar url = _config.baseUrl + 'user/getFansList';\n\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction getRecommendUserList(option) {\n\tvar url = _config.baseUrl + 'user/getRecommendUserList';\n\n\tdelete option._header;\n\treturn (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nfunction getActiveUserList(option) {\n\tvar url = _config.baseUrl + 'user/getActiveUserList';\n\n\tdelete option._header;\n\treturn (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nfunction getInviteCode(option) {\n\tvar url = _config.baseUrl + 'user/getInviteCode';\n\n\tif (!token) {\n\t\treturn (0, _config._rejectObj)({\n\t\t\tret: -10,\n\t\t\tmsg: '未登录'\n\t\t});\n\t}\n\n\tdelete option._header;\n\treturn (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nexports.getFansList = getFansList;\nexports.getFollowList = getFollowList;\nexports.getBlackList = getBlackList;\nexports.delBlack = delBlack;\nexports.addBlack = addBlack;\nexports.addFollow = addFollow;\nexports.delFollow = delFollow;\nexports.getUserList = getUserList;\nexports.getRecommendUserList = getRecommendUserList;\nexports.getActiveUserList = getActiveUserList;\nexports.getInviteCode = getInviteCode;\nexports._reject = _config._reject;\n\n/***/ }),\n\n/***/ \"lqD5\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"m127\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _vuex = __webpack_require__(\"NYxO\");\n\nvar _avatar = __webpack_require__(\"mOGY\");\n\nvar _avatar2 = _interopRequireDefault(_avatar);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n    data: function data() {\n        return {\n            avatar: _avatar2.default,\n            level: {\n                level0: '普通',\n                level1: '首发',\n                level2: '独家'\n            },\n            catalog_id: ''\n        };\n    },\n\n    computed: (0, _vuex.mapState)({\n        userInfo: function userInfo(state) {\n            return state.user.info;\n        },\n        catalog: function catalog(state) {\n            return state.opus.catalog.info;\n        }\n    }),\n    methods: {\n        updateCatalog: function updateCatalog() {\n            this.$eventHub.$emit('header_article_setShow', {\n                show: true,\n                catalog: this.catalog\n            });\n        },\n        getCatalogDetail: function getCatalogDetail() {\n            var _this = this;\n\n            this.$store.dispatch('opus_getCatalogDetail', {\n                catalogId: this.catalog_id\n            }).then(function (res) {\n                var isHas = false;\n                var cache_history = _this.$version.history;\n                var catalog_history = _this.$cache.getStore(cache_history.key, cache_history.version) || [];\n                for (var i = 0, len = catalog_history.length; i < len; i++) {\n                    if (catalog_history[i].catalog_id == res.info.catalog_id) {\n                        isHas = true;\n                        break;\n                    }\n                }\n                !isHas && catalog_history.push(res.info);\n                _this.$cache.setStore(cache_history.key, catalog_history, cache_history.version, cache_history.time);\n\n                _this.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        delFavorites: function delFavorites(catalogId) {\n            var _this2 = this;\n\n            this.$store.dispatch('opus_delFavorites', {\n                catalogId: catalogId\n            }).then(function (res) {\n                _this2.getCatalogDetail();\n\n                _this2.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this2.$store.dispatch('bubble_fail', err);\n            });\n        },\n        addFavorites: function addFavorites(catalogId) {\n            var _this3 = this;\n\n            this.$store.dispatch('opus_addFavorites', {\n                catalogId: catalogId\n            }).then(function (res) {\n                _this3.getCatalogDetail();\n\n                _this3.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this3.$store.dispatch('bubble_fail', err);\n            });\n        },\n        mark: function mark(catalogId) {\n            if (!this.userInfo.isLogin) {\n                return this.$store.dispatch('bubble_fail', {\n                    ret: -11,\n                    msg: '未登录，请登陆后操作'\n                });\n                return false;\n            }\n\n            if (this.catalog.is_collected == 1) {\n                this.delFavorites(catalogId);\n            } else {\n                this.addFavorites(catalogId);\n            }\n        },\n        addReport: function addReport() {\n            if (!this.userInfo.isLogin) {\n                return this.$store.dispatch('bubble_fail', {\n                    ret: -11,\n                    msg: '未登录，请登陆后操作'\n                });\n                return false;\n            }\n\n            this.$store.dispatch('bubble_showBubble', {\n                show: true,\n                type: 'report',\n                report: {\n                    content_id: this.catalog.catalog_id,\n                    content_type: 1\n                }\n            });\n        }\n    },\n    mounted: function mounted() {\n        this.$eventHub.$on('updateCatalog_success', function (res) {});\n\n        this.catalog_id = this.$url.getUrlParam('catalog_id');\n\n        this.getCatalogDetail();\n    }\n};\n\n/***/ }),\n\n/***/ \"mxKd\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = {\n    name: 'edit',\n    data: function data() {\n        return {\n            edit_init: false,\n            editor: null\n        };\n    },\n\n    props: ['content'],\n    methods: {\n        click: function click() {\n            this.$emit('edit_click');\n        },\n        uploaded: function uploaded(filename) {\n            var imgHtml = '<p><img style=\"max-width:100%;\" src=\"' + filename + '\"/></p>';\n            this.editor.command(null, 'insertHtml', imgHtml);\n        },\n        error: function error(err) {\n            if (err.code == -600) {\n                this.$store.dispatch('bubble_showBubble', {\n                    show: true,\n                    type: 'top',\n                    top: {\n                        status: 'z-warn',\n                        msg: '选择的文件太大了,可以根据应用情况，在upload.js 设置一下上传的最大大小'\n                    }\n                });\n            } else if (err.code == -601) {\n                this.$store.dispatch('bubble_showBubble', {\n                    show: true,\n                    type: 'top',\n                    top: {\n                        status: 'z-warn',\n                        msg: '选择的文件后缀不对,可以根据应用情况，在upload.js进行设置可允许的上传文件类型'\n                    }\n                });\n            } else if (err.code == -602) {\n                this.$store.dispatch('bubble_showBubble', {\n                    show: true,\n                    type: 'top',\n                    top: {\n                        status: 'z-warn',\n                        msg: '这个文件已经上传过一遍了'\n                    }\n                });\n            } else {\n                this.$store.dispatch('bubble_showBubble', {\n                    show: true,\n                    type: 'top',\n                    top: {\n                        status: 'z-warn',\n                        msg: err.response\n                    }\n                });\n            }\n        },\n        update: function update() {\n            var value = this.editor.$txt.html();\n            this.$emit('update', value);\n        },\n        publish: function publish() {\n            var value = this.editor.$txt.html();\n            this.$emit('publish', value);\n        },\n        scan: function scan() {\n            var value = this.editor.$txt.html();\n            this.$emit('scan', value);\n        }\n    },\n    watch: {\n        content: function content() {\n            this.editor.$txt.html(this.content);\n        }\n    },\n    mounted: function mounted() {\n        var _this = this;\n\n        this.editor = new this.$edit('edit');\n\n        this.editor.create();\n\n        this.editor.$txt.html(this.content);\n\n        var save = $('<div class=\"menu-item menu-item-save clearfix j-save-btn\"><a href=\"javascript:void(0);\">保存</a></div>');\n        var scan = $('<div class=\"menu-item menu-item-scan clearfix j-scan-btn\"><a href=\"javascript:void(0);\"></a></div>');\n        var publish = $('<div class=\"menu-item clearfix\"><a href=\"javascript:void(0);\">发布</a></div>');\n        var group = $('<div class=\"menu-group\"></div>').css('float', 'right');\n        group.append(save).append(scan).append(publish);\n        $('.wangEditor-menu-container').append(group);\n\n        save.on('click', function (res) {\n            _this.update();\n        });\n\n        publish.on('click', function (res) {\n            _this.publish();\n        });\n\n        scan.on('click', function (res) {\n            _this.scan();\n        });\n\n        this.edit_init = true;\n        this.$emit('edit_init', this.editor);\n\n        $('.c-edit-content').height($(window).height() - 120);\n        $(window).on('resize', function () {\n            $('.c-edit-content').height($(window).height() - 120);\n        });\n    }\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"7t+N\")))\n\n/***/ }),\n\n/***/ \"nFjh\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"nL7d\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-artice-list\"\n  }, [_c('div', {\n    staticClass: \"c-artice-list-wrap\"\n  }, [_vm._l((_vm.article.lists), function(data) {\n    return _c('div', {\n      staticClass: \"c-artice-item\"\n    }, [_c('div', {\n      staticClass: \"c-artice-item-wrap\",\n      attrs: {\n        \"data-catalog_id\": data.catalog_id\n      }\n    }, [_c('a', {\n      staticClass: \"c-artice-item-wrap-link\",\n      attrs: {\n        \"href\": './article.html?catalog_id=' + data.catalog_id\n      }\n    }, [_c('div', {\n      staticClass: \"item-left\"\n    }, [_c('div', {\n      staticClass: \"item-left__img\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": data.catalog_cover_url\n      }\n    })]), _vm._v(\" \"), _c('div', {\n      staticClass: \"item-left__text\"\n    }, [_vm._v(_vm._s(data.category_title))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"item-right\"\n    }, [_c('div', {\n      staticClass: \"item-right__titile\"\n    }, [_vm._v(_vm._s(data.catalog_title))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"item-right__content\"\n    }, [_vm._v(_vm._s(data.catalog_desc.length > 60 ? data.catalog_desc.substr(0, 60) + '...' : data.catalog_desc))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"item-right__tags\"\n    }, _vm._l((data.labels), function(label) {\n      return _c('a', {\n        class: {\n          'z-active': _vm.labelTag == label\n        },\n        attrs: {\n          \"href\": './page.html?labelTag=' + label\n        }\n      }, [_vm._v(_vm._s(label))])\n    })), _vm._v(\" \"), _c('div', {\n      staticClass: \"item-right__bottom\"\n    }, [(_vm.resType != 'author') ? _c('a', {\n      staticClass: \"item-right__btn\",\n      attrs: {\n        \"href\": 'author.work.html?user_id=' + data.user.uid\n      }\n    }, [_c('div', {\n      staticClass: \"item-right__img\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": data.user.avatar_url || _vm.avatar\n      }\n    })]), _vm._v(\" \"), _c('div', {\n      staticClass: \"item-right__name\"\n    }, [_vm._v(_vm._s(data.user.nick_name))])]) : _vm._e(), _vm._v(\" \"), (_vm.resType == 'history') ? _c('div', {\n      staticClass: \"item-right__btn item-right__unmark\",\n      on: {\n        \"click\": function($event) {\n          $event.preventDefault();\n          _vm.delHistory(data.catalog_id)\n        }\n      }\n    }, [_vm._v(\"删除记录\")]) : _vm._e(), _vm._v(\" \"), (_vm.resType == 'mark' && data.owner != 1 && data.is_collected == 1) ? _c('div', {\n      staticClass: \"item-right__btn item-right__unmark\",\n      on: {\n        \"click\": function($event) {\n          $event.preventDefault();\n          _vm.delFavorites($event)\n        }\n      }\n    }, [_vm._v(\"取消收藏\")]) : _vm._e(), _vm._v(\" \"), (_vm.resType == 'search' && data.owner != 1 && data.is_collected != 1) ? _c('div', {\n      staticClass: \"item-right__btn item-right__mark\"\n    }, [_vm._v(\"加入收藏\")]) : _vm._e(), _vm._v(\" \"), (_vm.resType == 'author' && data.owner == 1) ? _c('a', {\n      staticClass: \"item-right__btn item-right__add\",\n      attrs: {\n        \"href\": './article.edit.html?catalog_id=' + data.catalog_id + '&chapter_id=-1'\n      }\n    }, [_vm._v(\"添加章节\")]) : _vm._e(), _vm._v(\" \"), (_vm.resType == 'author' && data.owner == 1) ? _c('div', {\n      staticClass: \"item-right__btn item-right__del\",\n      on: {\n        \"click\": function($event) {\n          $event.stopPropagation();\n          $event.preventDefault();\n          _vm.remove(data.catalog_id)\n        }\n      }\n    }, [_vm._v(\"删除作品\")]) : _vm._e()])])])])])\n  }), _vm._v(\" \"), (_vm.article.count <= 0) ? _c('Empty') : _vm._e()], 2), _vm._v(\" \"), (_vm.loadType == 'more' && _vm.article.count != 0) ? _c('div', {\n    staticClass: \"list-more\"\n  }, [(_vm.article.more == 1 && !_vm.article.load) ? _c('div', {\n    staticClass: \"btn-more-before\"\n  }, [_vm._v(_vm._s(_vm.user.isLogin ? '加载更多' : '登录查看更多'))]) : (_vm.article.more == 1) ? _c('div', {\n    staticClass: \"btn-more-loading\"\n  }, [_c('em'), _c('span', [_vm._v(\"加载中...\")])]) : _c('div', {\n    staticClass: \"btn-more-end\"\n  }, [_c('em'), _c('span', [_vm._v(\"没有更多\")])])]) : _vm._e(), _vm._v(\" \"), (_vm.loadType != 'more') ? _c('Page', {\n    staticClass: \"list-pages\",\n    attrs: {\n      \"count\": _vm.article.count,\n      \"length\": _vm.pageSize,\n      \"index\": _vm.pageIndex\n    },\n    on: {\n      \"page_switch\": _vm.pageSwitch\n    }\n  }) : _vm._e()], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ \"nTmf\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"nFjh\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"kfRd\"),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"oIMG\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports._rejectObj = exports._reject = exports.addReport = exports.addFeedback = exports.getPolicyAndAccess = exports.getHomeBanner = undefined;\n\nvar _stringify = __webpack_require__(\"mvHQ\");\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _axios = __webpack_require__(\"mtWM\");\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _config = __webpack_require__(\"AEPM\");\n\nvar _jsCookie = __webpack_require__(\"lbHh\");\n\nvar _jsCookie2 = _interopRequireDefault(_jsCookie);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar token = _jsCookie2.default.get('token');\n\nfunction getHomeBanner(option) {\n\tvar url = _config.baseUrl + 'getHomeBanner';\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction getPolicyAndAccess(option) {\n\tvar url = _config.baseUrl + 'upload/getPolicyAndAccess';\n\n\tif (!token) {\n\t\treturn (0, _config._rejectObj)({\n\t\t\tret: -10,\n\t\t\tmsg: '未登录'\n\t\t});\n\t}\n\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction addFeedback(option) {\n\tvar url = _config.baseUrl + 'report/addFeedback';\n\n\tif (!token) {\n\t\treturn (0, _config._rejectObj)({\n\t\t\tret: -10,\n\t\t\tmsg: '未登录'\n\t\t});\n\t}\n\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'POST',\n\t\turl: url,\n\t\tdata: (0, _stringify2.default)(option),\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction addReport(option) {\n\tvar url = _config.baseUrl + 'report/addReport';\n\n\tif (!token) {\n\t\treturn (0, _config._rejectObj)({\n\t\t\tret: -10,\n\t\t\tmsg: '未登录'\n\t\t});\n\t}\n\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'POST',\n\t\turl: url,\n\t\tdata: (0, _stringify2.default)(option),\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nexports.getHomeBanner = getHomeBanner;\nexports.getPolicyAndAccess = getPolicyAndAccess;\nexports.addFeedback = addFeedback;\nexports.addReport = addReport;\nexports._reject = _config._reject;\nexports._rejectObj = _config._rejectObj;\n\n/***/ }),\n\n/***/ \"oZeH\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"or+c\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _vue = __webpack_require__(\"7+uW\");\n\nvar _vue2 = _interopRequireDefault(_vue);\n\nvar _vuex = __webpack_require__(\"NYxO\");\n\nvar _vuex2 = _interopRequireDefault(_vuex);\n\nvar _bubble = __webpack_require__(\"rGUt\");\n\nvar _bubble2 = _interopRequireDefault(_bubble);\n\nvar _user = __webpack_require__(\"eBru\");\n\nvar _user2 = _interopRequireDefault(_user);\n\nvar _auth = __webpack_require__(\"hyrZ\");\n\nvar _auth2 = _interopRequireDefault(_auth);\n\nvar _opus = __webpack_require__(\"3Tyq\");\n\nvar _opus2 = _interopRequireDefault(_opus);\n\nvar _common = __webpack_require__(\"xbkL\");\n\nvar _common2 = _interopRequireDefault(_common);\n\nvar _message = __webpack_require__(\"3jmG\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_vue2.default.use(_vuex2.default);\nvar store = new _vuex2.default.Store({\n\tmodules: {\n\t\tbubble: _bubble2.default,\n\t\tuser: _user2.default,\n\t\tauth: _auth2.default,\n\t\topus: _opus2.default,\n\t\tcommon: _common2.default,\n\t\tmessage: _message2.default\n\t},\n\tstrict: true\n});\n\nexports.default = store;\n\n/***/ }),\n\n/***/ \"prCX\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-artice-hot\"\n  }, [_c('div', {\n    staticClass: \"c-artice-hot-wrap\"\n  }, [_c('div', {\n    staticClass: \"hot-top\"\n  }, [_c('div', {\n    staticClass: \"hot-top-right\"\n  }, [_c('div', {\n    staticClass: \"item item-number\"\n  }, [_vm._v(_vm._s(_vm.pageIndex) + \"/\" + _vm._s(_vm.hot_number))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item item-btn item-left\",\n    on: {\n      \"click\": function($event) {\n        _vm.hotSwitch('left')\n      }\n    }\n  }, [_c('span'), _vm._v(\" \"), _c('span')]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item item-btn item-right\",\n    on: {\n      \"click\": function($event) {\n        _vm.hotSwitch('right')\n      }\n    }\n  }, [_c('span'), _vm._v(\" \"), _c('span')])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"hot-list\",\n    style: ({\n      width: _vm.hot.lists.length * 150 + 10 + 'px',\n      transform: 'translate(-' + _vm.move + 'px, 0)'\n    })\n  }, _vm._l((_vm.hot.lists), function(item) {\n    return _c('div', {\n      staticClass: \"hot-list-item\"\n    }, [_c('a', {\n      attrs: {\n        \"href\": 'article.html?catalog_id=' + item.catalog_id\n      }\n    }, [_c('div', {\n      staticClass: \"hot-list__hd\"\n    }, [_c('div', {\n      staticClass: \"hot-list__hd-img\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": item.catalog_cover_url\n      }\n    })]), _vm._v(\" \"), _c('div', {\n      staticClass: \"hot-list__hd-text\"\n    }, [_vm._v(_vm._s(item.category_title))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"hot-list__bd\"\n    }, [_c('div', {\n      staticClass: \"hot-list__title\"\n    }, [_vm._v(_vm._s(item.catalog_title))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"hot-list__tag\"\n    }, _vm._l((item.labels), function(label) {\n      return _c('a', {\n        attrs: {\n          \"href\": './page.html?labelTag=' + label\n        }\n      }, [_vm._v(\"\\n                            \" + _vm._s(label) + \"\\n                        \")])\n    }))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"hot-list__ft\"\n    }, [_c('div', {\n      staticClass: \"hot-list__ft-img\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": item.user.avatar_url || _vm.avatar\n      }\n    })]), _vm._v(\" \"), _c('div', {\n      staticClass: \"hot-list__ft-name\"\n    }, [_vm._v(_vm._s(item.user.nick_name))])])])])\n  }))])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ \"r28Z\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-author-list\",\n    class: 'z-' + _vm.resType\n  }, [_c('div', {\n    staticClass: \"c-author-list-wrap\"\n  }, [_vm._l((_vm.lists), function(data) {\n    return _c('a', {\n      staticClass: \"list-author__item\",\n      attrs: {\n        \"href\": 'author.work.html?user_id=' + data.uid\n      }\n    }, [_c('div', {\n      staticClass: \"list-author__img\"\n    }, [_c('div', {\n      staticClass: \"list-author__avatar\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": data.avatar_url || _vm.avatar\n      }\n    })])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"list-author__content\"\n    }, [_c('div', {\n      staticClass: \"list-author__name\"\n    }, [_vm._v(_vm._s(data.nick_name))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"list-author__text\"\n    }, [_c('div', {\n      staticClass: \"list-author__work\"\n    }, [_vm._v(\"作品：\" + _vm._s(data.opus_count))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"list-author__fans\"\n    }, [_vm._v(\"粉丝：\" + _vm._s(data.fans_count))]), _vm._v(\" \"), (data.relation == 0) ? _c('div', {\n      staticClass: \"list-author__btn list-author__btn-1\",\n      on: {\n        \"click\": function($event) {\n          $event.stopPropagation();\n          $event.preventDefault();\n          _vm.addFollow(data.uid)\n        }\n      }\n    }, [_vm._v(\"关注\")]) : _vm._e(), _vm._v(\" \"), (data.relation == 1 || data.relation == 3) ? _c('div', {\n      staticClass: \"list-author__btn list-author__btn-2\",\n      on: {\n        \"click\": function($event) {\n          $event.stopPropagation();\n          $event.preventDefault();\n          _vm.delFollow(data.uid)\n        }\n      }\n    }, [_vm._v(\"已关注\")]) : _vm._e(), _vm._v(\" \"), (data.relation == 2) ? _c('div', {\n      staticClass: \"list-author__btn list-author__btn-3\",\n      on: {\n        \"click\": function($event) {\n          $event.stopPropagation();\n          $event.preventDefault();\n          _vm.addFollow(data.uid)\n        }\n      }\n    }, [_vm._v(\"相互关注\")]) : _vm._e(), _vm._v(\" \"), (data.black == 1) ? _c('div', {\n      staticClass: \"list-author__btn list-author__btn-3\",\n      on: {\n        \"click\": function($event) {\n          $event.stopPropagation();\n          $event.preventDefault();\n          _vm.delBlack(data.uid)\n        }\n      }\n    }, [_vm._v(\"取消拉黑\")]) : _vm._e()])])])\n  }), _vm._v(\" \"), (_vm.count <= 0) ? _c('Empty') : _vm._e()], 2), _vm._v(\" \"), _c('Page', {\n    attrs: {\n      \"count\": _vm.count,\n      \"length\": _vm.pageSize,\n      \"index\": _vm.pageIndex\n    },\n    on: {\n      \"page_switch\": _vm.pageSwitch\n    }\n  })], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ \"rGUt\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof2 = __webpack_require__(\"pFYg\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _config = __webpack_require__(\"AEPM\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _default() {\n\treturn {\n\t\ttype: '',\n\t\tshow: false,\n\t\ttop: {\n\t\t\tstatus: '',\n\t\t\tmsg: '',\n\t\t\ttimeClose: 2000\n\t\t},\n\t\tdialog: {\n\t\t\ttitle: {\n\t\t\t\ttext: '',\n\t\t\t\talign: ''\n\t\t\t},\n\t\t\tcontent: {\n\t\t\t\ttitle: '',\n\t\t\t\ttext: '',\n\t\t\t\thtml: ''\n\t\t\t},\n\t\t\tbtn: {\n\t\t\t\tcancel: {\n\t\t\t\t\ttext: '取消',\n\t\t\t\t\tcallback: function callback() {}\n\t\t\t\t},\n\t\t\t\tcomfire: {\n\t\t\t\t\ttext: '确认',\n\t\t\t\t\tcallback: function callback() {}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\treport: {\n\t\t\ttype: 'adv',\n\t\t\tcontent: '',\n\t\t\tmap: {\n\t\t\t\tadv: '广告或者垃圾细腻',\n\t\t\t\tcopy: '抄袭或未授权转载',\n\t\t\t\tother: '其他原因'\n\t\t\t}\n\t\t},\n\t\twarn: {\n\t\t\ttitle: '',\n\t\t\tcontent: '',\n\t\t\tcomfireFn: function comfireFn() {}\n\t\t},\n\t\tcomplete: {\n\t\t\ttitle: ''\n\t\t},\n\t\tmethods: {},\n\t\toutlogin: false\n\t};\n}\n\nexports.default = {\n\tstate: _default(),\n\tmutations: {\n\t\tbubble_setState: function bubble_setState(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tif (payload.hasOwnProperty(key)) {\n\t\t\t\t\tif ((0, _typeof3.default)(payload[key]) === 'object') {\n\t\t\t\t\t\tfor (var _key in payload[key]) {\n\t\t\t\t\t\t\tstate[key][_key] = payload[key][_key];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstate[key] = payload[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tactions: {\n\t\tbubble_setState: function bubble_setState(context, payload) {\n\t\t\tcontext.commit('bubble_setState', payload);\n\t\t},\n\t\tbubble_showBubble: function bubble_showBubble(context, payload) {\n\t\t\tcontext.commit('bubble_setState', payload);\n\t\t\tsetTimeout(function () {\n\t\t\t\tif (context.state.type != 'top') {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tcontext.dispatch('bubble_closeBubble');\n\t\t\t}, context.state.top.timeClose);\n\t\t},\n\t\tbubble_closeBubble: function bubble_closeBubble(context, payload) {\n\t\t\tcontext.commit('bubble_setState', _default());\n\t\t},\n\t\tbubble_success: function bubble_success(context, payload) {\n\t\t\t_config.isdebug && console.log('----success----', payload);\n\n\t\t\tif (payload.ret == 0 && payload.type == 'top') {\n\t\t\t\tcontext.commit('bubble_setState', {\n\t\t\t\t\ttype: 'top',\n\t\t\t\t\tshow: true,\n\t\t\t\t\ttop: {\n\t\t\t\t\t\tstatus: 'z-default',\n\t\t\t\t\t\tmsg: payload.msg\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (!!payload.ret && payload.ret != 0) {\n\t\t\t\tcontext.commit('bubble_setState', {\n\t\t\t\t\ttype: 'top',\n\t\t\t\t\tshow: true,\n\t\t\t\t\ttop: {\n\t\t\t\t\t\tstatus: 'z-warn',\n\t\t\t\t\t\tmsg: '系统异常'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tif (context.state.type != 'top') {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tcontext.dispatch('bubble_closeBubble');\n\t\t\t}, context.state.top.timeClose);\n\t\t},\n\t\tbubble_fail: function bubble_fail(context, payload) {\n\t\t\t_config.isdebug && console.log('---error----', payload);\n\n\t\t\tif (payload.ret == -10) {\n\t\t\t\tcontext.commit('bubble_setState', {\n\t\t\t\t\toutlogin: true\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (payload.ret == -11) {\n\t\t\t\treturn window.location.href = './login.html?from=' + encodeURIComponent(location.href);\n\t\t\t}\n\n\t\t\tif (payload.ret == -21) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (payload.ret == -20) {\n\t\t\t\tcontext.commit('bubble_setState', {\n\t\t\t\t\ttype: 'top',\n\t\t\t\t\tshow: true,\n\t\t\t\t\ttop: {\n\t\t\t\t\t\tstatus: 'z-warn',\n\t\t\t\t\t\tmsg: '参数错误，系统异常'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (payload.ret > 0) {\n\t\t\t\tif (payload.errcode == '30001') {\n\t\t\t\t\tcontext.commit('bubble_setState', {\n\t\t\t\t\t\toutlogin: true\n\t\t\t\t\t});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar msg = payload.attach && payload.attach.popup ? payload.attach.popup.text : '系统异常';\n\t\t\t\tcontext.commit('bubble_setState', {\n\t\t\t\t\ttype: 'top',\n\t\t\t\t\tshow: true,\n\t\t\t\t\ttop: {\n\t\t\t\t\t\tstatus: 'z-warn',\n\t\t\t\t\t\tmsg: msg\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tif (context.state.type != 'top') {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tcontext.dispatch('bubble_closeBubble');\n\t\t\t}, context.state.top.timeClose);\n\t\t}\n\t}\n};\n\n/***/ }),\n\n/***/ \"rgvm\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"s/ku\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-author-hot\"\n  }, [_c('div', {\n    staticClass: \"list-author__title\"\n  }, [_c('div', {\n    staticClass: \"text\"\n  }, [_vm._v(\"推荐作者\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"list-author__page\"\n  }, [_c('div', {\n    staticClass: \"item item-number\"\n  }, [_vm._v(_vm._s(_vm.index) + \"/\" + _vm._s(_vm.count))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item item-btn item-left\",\n    on: {\n      \"click\": function($event) {\n        _vm.authorSwitch('left')\n      }\n    }\n  }, [_c('span'), _vm._v(\" \"), _c('span')]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item item-btn item-right\",\n    on: {\n      \"click\": function($event) {\n        _vm.authorSwitch('right')\n      }\n    }\n  }, [_c('span'), _vm._v(\" \"), _c('span')])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"list-author__body\"\n  }, _vm._l((_vm.lists.slice((_vm.index - 1) * 5, (_vm.index - 1) * 5 + 5)), function(item) {\n    return _c('div', {\n      staticClass: \"list-author__item\"\n    }, [_c('div', {\n      staticClass: \"list-author__img\"\n    }, [_c('div', {\n      staticClass: \"list-author__avatar\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": item.avatar_url || _vm.avatar\n      }\n    })])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"list-author__content\"\n    }, [_c('a', {\n      attrs: {\n        \"href\": 'author.work.html?user_id=' + item.uid\n      }\n    }, [_c('div', {\n      staticClass: \"list-author__name\"\n    }, [_vm._v(_vm._s(item.nick_name))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"list-author__text\"\n    }, [_c('div', {\n      staticClass: \"list-author__work\"\n    }, [_vm._v(\"作品：\" + _vm._s(item.opus_count))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"list-author__fans\"\n    }, [_vm._v(\"粉丝：\" + _vm._s(item.fans_count))]), _vm._v(\" \"), (item.relation == 0) ? _c('div', {\n      staticClass: \"list-author__btn\",\n      on: {\n        \"click\": function($event) {\n          $event.stopPropagation();\n          _vm.addFollow(item.uid)\n        }\n      }\n    }, [_vm._v(\"关注\")]) : _vm._e(), _vm._v(\" \"), (item.relation == 1 || item.relation == 3) ? _c('div', {\n      staticClass: \"list-author__btn z-active\"\n    }, [_vm._v(\"已关注\")]) : _vm._e()])])])])\n  }))])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ \"sEEq\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"sUpd\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"siit\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"t/6I\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"VHTH\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"e1CJ\"),\n  /* template */\n  __webpack_require__(\"DMxe\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"tftU\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"vvc1\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = {\n    props: ['data']\n};\n\n/***/ }),\n\n/***/ \"whrU\":\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function($) {/**\r\n * url 1.0.0\r\n * @license MIT\r\n */\r\n(function(global, factory) {\r\n     true ? \r\n        module.exports = factory() :\r\n        typeof define === 'function' && define.amd ? \r\n            define(factory) :\r\n            (global.url = factory());\r\n}(this, (function() {\r\n    'use strict';\r\n\r\n    var Vue;\r\n    function install(_Vue) {\r\n        if (Vue) {\r\n            console.error(\r\n                '[url] already installed. Vue.use(url) should be called only once.'\r\n            );\r\n            return\r\n        }\r\n        Vue = _Vue;\r\n        Vue.prototype.$url = new Url();\r\n    }\r\n\r\n    // 创建url实例\r\n    function Url (){}\r\n    // 创建url实例\r\n    Url.prototype = {\r\n        /**\r\n         * 设置hash\r\n         * @param name\r\n         */\r\n        setHash: function(name) {\r\n            setTimeout(function() {\r\n                location.hash = name;\r\n            }, 0);\r\n        },\r\n        /**\r\n         * 获取当前url中的hash值\r\n         * @param url\r\n         * @return String\r\n         */\r\n        getHash: function(url) {\r\n            var u = url || location.hash;\r\n            return u ? u.replace(/.*#/, \"\") : \"\";\r\n        },\r\n        /*\r\n         *   根据hash获取对应的模块名\r\n         */\r\n        getHashModelName: function() {\r\n            var hash = this.getHash();\r\n            return (hash ? hash.split(\"&\")[0].split(\"=\")[0] : []);\r\n        },\r\n        /*\r\n         *   从hash中获取action\r\n         */\r\n        getHashActionName: function() {\r\n            var hash = this.getHash();\r\n            if (hash == \"\") return \"\";\r\n            return (hash ? hash.split(\"&\") : [])[0].split(\"=\")[1];\r\n        },\r\n        /*\r\n         * 从hash中获取name对应的值\r\n         */\r\n        getHashParam: function(name) {\r\n            var result = this.getHash().match(new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\"));\r\n            return result != null ? result[2] : \"\";\r\n        },\r\n        /*\r\n         *   从URL中获取参数对应的值\r\n         */\r\n        getUrlParam: function(name, url) {\r\n            //参数：变量名，url为空则表从当前页面的url中取\r\n            var u = arguments[1] || window.location.search,\r\n                reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\"),\r\n                r = u.substr(u.indexOf(\"\\?\") + 1).match(reg);\r\n            return r != null ? r[2] : \"\";\r\n        },\r\n        /*\r\n         *   获取所有HASH的参数，剔除model.\r\n         */\r\n        getParams: function() {\r\n            var param = [],\r\n                hash = this.getHash();\r\n            paramArr = hash ? hash.split(\"&\") : [];\r\n            for (var i = 1, l = paramArr.length; i < l; i++) {\r\n                param.push(paramArr[i]);\r\n            }\r\n            return param;\r\n        },\r\n        decodeUrl: function(url) {\r\n            url = decodeURIComponent(url);\r\n            var urlObj = this.parseUrl(url),\r\n                decodedParam = [];\r\n            $.each(urlObj.params, function(key, value) {\r\n                value = decodeURIComponent(value);\r\n                decodedParam.push(key + \"=\" + value);\r\n            });\r\n            var urlPrefix = url.split(\"?\")[0];\r\n            return urlPrefix + \"?\" + decodedParam.join(\"&\");\r\n        },\r\n        parseUrl: function(url) {\r\n            var a = document.createElement('a');\r\n            a.href = url;\r\n            return {\r\n                source: url,\r\n                protocol: a.protocol.replace(':', ''),\r\n                host: a.hostname,\r\n                port: a.port,\r\n                query: a.search,\r\n                params: (function() {\r\n                    var ret = {},\r\n                        seg = a.search.replace(/^\\?/, '').split('&'),\r\n                        len = seg.length,\r\n                        i = 0,\r\n                        s;\r\n                    for (; i < len; i++) {\r\n                        if (!seg[i]) {\r\n                            continue;\r\n                        }\r\n                        s = seg[i].split('=');\r\n                        ret[s[0]] = s[1];\r\n                    }\r\n                    return ret;\r\n                })(),\r\n                file: (a.pathname.match(/([^\\/?#]+)$/i) || [, ''])[1],\r\n                hash: a.hash.replace('#', ''),\r\n                path: a.pathname.replace(/^([^\\/])/, '/$1'),\r\n                relative: (a.href.match(/tps?:\\/\\/[^\\/]+(.+)/) || [, ''])[1],\r\n                segments: a.pathname.replace(/^\\//, '').split('/')\r\n            };\r\n        },\r\n        replaceParam: function(param, value, url, forceReplace) {\r\n            url = url || location.href;\r\n            var reg = new RegExp(\"([\\\\?&]\" + param + \"=)[^&#]*\");\r\n            if (!url.match(reg)) {\r\n                return (url.indexOf(\"?\") == -1) ? (url + \"?\" + param + \"=\" + value) : (url + \"&\" + param + \"=\" + value);\r\n            }\r\n            if (forceReplace) {\r\n                return url.replace(reg, function($0, $1) {\r\n                    return $1 + value;\r\n                });\r\n            }\r\n            return url;\r\n        },\r\n        /**\r\n         * 批量替换url参数\r\n         * @param  {[type]} urlStr [description]\r\n         * @param  {[type]} param  [description]\r\n         * @return {[type]}        [description]\r\n         */\r\n        replaceParams: function(urlStr, param) {\r\n            var orginUrl = urlStr;\r\n            if (typeof param == 'string') {\r\n                var paramData = param.split('&');\r\n            } else if (typeof param == 'object' && !param.slice) {\r\n                var paramData = [];\r\n                for (var key in param) {\r\n                    paramData.push(key + '=' + param[key]);\r\n                }\r\n            }\r\n            for (var i = 0; i < paramData.length; i++) {\r\n                var keyVal = paramData[i].split('=');\r\n                orginUrl = this.replaceParam(keyVal[0], keyVal[1] || '', orginUrl, true);\r\n            }\r\n            return orginUrl;\r\n        },\r\n        getHashObj: function(v) {\r\n            var href = v || location.href;\r\n            var theRequest = {},\r\n                pound = '',\r\n                l = 0,\r\n                hash = this.getHash(),\r\n                paramArr = [];\r\n            if (hash) {\r\n                paramArr = hash.split(\"&\");\r\n                for (var i = 0, l = paramArr.length; i < l; i++) {\r\n                    theRequest[paramArr[i].split(\"=\")[0]] = unescape(paramArr[i].split(\"=\")[1]);\r\n                }\r\n            }\r\n            return theRequest;\r\n        },\r\n        getParamsObj: function(v) {\r\n            var v = v || location.href;\r\n            var theRequest = {},\r\n                hash = '',\r\n                params = '',\r\n                str = '',\r\n                paramArr = [];\r\n            if (v.indexOf(\"?\") != -1) {\r\n                str = v.substr(v.indexOf(\"?\") + 1);\r\n                if (str.indexOf('#') > -1) {\r\n                    hash = str.substr(str.indexOf('#'));\r\n                    params = str.substr(0, str.indexOf('#'));\r\n                } else {\r\n                    params = str;\r\n                }\r\n                paramArr = params.split(\"&\");\r\n                for (var i = 0; i < paramArr.length; i++) {\r\n                    theRequest[paramArr[i].split(\"=\")[0]] = unescape(paramArr[i].split(\"=\")[1]);\r\n                }\r\n                if (hash.length > 0) {\r\n                    //theRequest['#'] = hash;\r\n                }\r\n            }\r\n            return theRequest;\r\n        },\r\n        getUrlObj: function(v) {\r\n            var v = v || location.href;\r\n            return {\r\n                param: this.getParamsObj(v),\r\n                hash: this.getHashObj(v)\r\n            };\r\n        },\r\n        /**\r\n         * Build url from a object\r\n         * url.makeUrl({hash: {a: 1}: param: {b: 2}});\r\n         * url.makeUrl('www.baidu.com', {hash: {a: 1}: param: {b: 2}});\r\n         * url.makeUrl('www.baidu.com', {hash: {a: 1}: param: {b: 2}}, false);\r\n         * url.makeUrl('www.baidu.com', {a:1, b:2});\r\n         * \r\n         * @param  {string} [v]       default to window.location.href\r\n         * @param  {object} [params]  {hash: {a: 1}: param: {b: 2}}\r\n         * @param  {boolean} [keepOld] default to true, keep old params or not\r\n         * @return {string}  URL\r\n         */\r\n        makeUrl: function(v, params, keepOld) {\r\n                var paramStr = '',\r\n                    hashStr = '',\r\n                    k = null,\r\n                    obj = null,\r\n                    paramObj = null,\r\n                    hashObj = null;\r\n                (typeof(arguments[1]) === 'boolean') && (keepOld = arguments[1]);\r\n                (typeof(arguments[0]) === 'object') && (params = arguments[0]) && (v = location.href);\r\n                v = v || location.href;\r\n                obj = this.getUrlObj(v);\r\n                params = params || obj;\r\n                if (params.param || params.hash) {\r\n                    paramObj = params.param ? params.param : {};\r\n                    hashObj = params.hash ? params.hash : {};\r\n                } else {\r\n                    paramObj = params;\r\n                    hashObj = {};\r\n                }\r\n                (keepOld === undefined) && (keepOld = true);\r\n\r\n                if (keepOld) {\r\n                    for (k in paramObj)\r\n                        if (paramObj[k] === undefined)\r\n                            delete obj.param[k];\r\n                        else\r\n                            obj.param[k] = paramObj[k]\r\n                    for (k in hashObj)\r\n                        if (hashObj[k] === undefined)\r\n                            delete obj.hash[k];\r\n                        else\r\n                            obj.hash[k] = hashObj[k];\r\n\r\n                    paramObj = obj.param;\r\n                    hashObj = obj.hash;\r\n                }\r\n                for (k in paramObj) {\r\n                    paramStr += k + '=' + encodeURIComponent(paramObj[k]) + '&';\r\n                }\r\n                for (k in hashObj) {\r\n                    hashStr += k + '=' + encodeURIComponent(hashObj[k]) + '&';\r\n                }\r\n                (paramStr.length) && (paramStr = paramStr.substring(0, paramStr.length - 1));\r\n                (hashStr.length) && (hashStr = hashStr.substring(0, hashStr.length - 1));\r\n\r\n                v = v.replace(/\\?.*/i, '').replace(/\\#.*/i, '');\r\n                (paramStr) && (v += '?' + paramStr);\r\n                (hashStr) && (v += '#' + hashStr);\r\n                return v;\r\n            }\r\n            /**\r\n             * 添加url参数\r\n             * @author delanhuang\r\n             * @param string url 需要修改的url\r\n             * @param string param 参数名\r\n             * @param string value 参数值\r\n             * @examples\r\n             * var newUrl = addUrlParam('http://www.example.com?medebug=1#index=init', 'my', 1);\r\n             * //上面返回：http://www.example.com?medebug=1&my=1#index=init\r\n             */\r\n            ,\r\n        addUrlParam: function(url, param, value) {\r\n                var a = document.createElement('a'),\r\n                    regex = /(?:\\?|&amp;|&)+([^=]+)(?:=([^&]*))*/gi;\r\n                var match, str = [];\r\n                a.href = url;\r\n                while (match = regex.exec(a.search)) {\r\n                    if (encodeURIComponent(param) != match[1]) {\r\n                        str.push(match[1] + (match[2] ? \"=\" + match[2] : \"\"));\r\n                    }\r\n                }\r\n                str.push(encodeURIComponent(param) + (value ? \"=\" + encodeURIComponent(value) : \"\"));\r\n                a.search = str.join(\"&\");\r\n                return a.href;\r\n            }\r\n            /**\r\n             * 添加mdebug参数\r\n             */\r\n            ,\r\n        addDebugParam: function(url) {\r\n            var mdebug = module.exports.getUrlParam('mdebug');\r\n            if (mdebug) {\r\n                url = module.exports.addUrlParam(url, 'mdebug', mdebug);\r\n            }\r\n\r\n            return url;\r\n        }\r\n    };\r\n\r\n    var index = {\r\n        install: install,\r\n        version: '1.0.0'\r\n    };\r\n\r\n    return index;\r\n})));\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"7t+N\")))\n\n/***/ }),\n\n/***/ \"xTQR\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _vuex = __webpack_require__(\"NYxO\");\n\nvar _avatar = __webpack_require__(\"mOGY\");\n\nvar _avatar2 = _interopRequireDefault(_avatar);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n    data: function data() {\n        return {\n            avatar: _avatar2.default,\n            index: 0\n        };\n    },\n\n    props: ['resType'],\n    computed: (0, _vuex.mapState)({\n        lists: function lists(state) {\n            return state.auth.lists;\n        },\n        count: function count(state) {\n            return Math.ceil(state.auth.count / 5);\n        }\n    }),\n    methods: {\n        getActiveUserList: function getActiveUserList() {\n            var _this = this;\n\n            this.$store.dispatch('auth_getActiveUserList', {\n                \"label\": decodeURIComponent(this.labelTag),\n                \"pageSize\": \"30\" }).then(function (res) {\n                if (res.list.length > 0) {\n                    _this.index = 1;\n                }\n\n                _this.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        getRecommendUserList: function getRecommendUserList() {\n            var _this2 = this;\n\n            this.$store.dispatch('auth_getRecommendUserList', {\n                \"pageSize\": \"30\" }).then(function (res) {\n                if (res.list.length > 0) {\n                    _this2.index = 1;\n                }\n\n                _this2.$store.dispatch('bubble_success', res);\n            }).catch(function (err) {\n                _this2.$store.dispatch('bubble_fail', err);\n            });\n        },\n        authorSwitch: function authorSwitch(type) {\n            if (type == 'left' && this.index == 1) {\n                return false;\n            }\n            if (type == 'right' && this.index == this.count) {\n                return false;\n            }\n\n            if (type == 'left') {\n                this.index--;\n            } else {\n                this.index++;\n            }\n        },\n        addFollow: function addFollow(uid) {\n            var _this3 = this;\n\n            this.$store.dispatch('auth_addFollow', {\n                userId: uid\n            }).then(function (res) {\n                _this3.getRecommendUserList();\n\n                _this3.$store.dispatch('bubble_success', res);\n            }).catch(function (res) {\n                _this3.$store.dispatch('bubble_fail', err);\n            });\n        }\n    },\n    mounted: function mounted() {\n        this.labelTag = this.$url.getUrlParam('labelTag');\n\n        if (this.resType == 'active' && !this.labelTag) {\n            this.$store.dispatch('bubble_showBubble', {\n                show: true,\n                type: 'top',\n                top: {\n                    status: 'z-warn',\n                    msg: '系统繁忙'\n                }\n            });\n            return false;\n        }\n\n        if (this.resType == 'active') {\n            this.getActiveUserList();\n        } else {\n            this.getRecommendUserList();\n        }\n    }\n};\n\n/***/ }),\n\n/***/ \"xbkL\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _promise = __webpack_require__(\"//Fk\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _common = __webpack_require__(\"oIMG\");\n\nvar common = _interopRequireWildcard(_common);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _default() {\n\treturn {\n\t\tshow: false,\n\t\tbanner_images: [],\n\n\t\taccess: {}\n\t};\n}\n\nexports.default = {\n\tstate: _default(),\n\tmutations: {\n\t\tcommon_setBannerList: function common_setBannerList(state, payload) {\n\t\t\tstate.banner_images = payload.list;\n\t\t},\n\t\tcommon_switch: function common_switch(state, payload) {\n\t\t\tstate.show = payload;\n\t\t},\n\t\tcommon_access: function common_access(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tstate.access[key] = payload[key];\n\t\t\t}\n\t\t}\n\t},\n\tactions: {\n\t\tcommon_setBannerList: function common_setBannerList(context, payload) {\n\t\t\tcontext.commit('common_setBannerList', {\n\t\t\t\tlist: payload\n\t\t\t});\n\t\t\treturn _promise2.default.resolve(1);\n\t\t},\n\t\tcommon_getHomeBanner: function common_getHomeBanner(context, payload) {\n\t\t\tvar promise = common.getHomeBanner().then(function (res) {\n\t\t\t\tcontext.commit('common_setBannerList', {\n\t\t\t\t\tlist: res.list\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(res);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\tcommon_getPolicyAndAccess: function common_getPolicyAndAccess(context, payload) {\n\t\t\tif (!payload.type) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tvar promise = common.getPolicyAndAccess({\n\t\t\t\ttype: payload.type\n\t\t\t}).then(function (res) {\n\t\t\t\tvar option = {};\n\t\t\t\toption[payload.type] = res;\n\t\t\t\tcontext.commit('common_access', option);\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(res);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\tcommon_switch: function common_switch(context, payload) {\n\t\t\tcontext.commit('common_switch', payload);\n\t\t},\n\t\tcommon_addFeedback: function common_addFeedback(context, payload) {\n\t\t\tvar promise = common.addFeedback({\n\t\t\t\t\"content\": payload.content,\n\t\t\t\t\"img_url\": '',\n\t\t\t\t\"contact_info\": payload.contact_info }).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tcommon_addReport: function common_addReport(context, payload) {\n\t\t\tvar promise = common.addReport({\n\t\t\t\t\"content_id\": payload.content_id,\n\t\t\t\t\"report_reason\": payload.report_reason,\n\t\t\t\t\"content_type\": payload.content_type,\n\t\t\t\t\"add_reason\": payload.add_reason\n\t\t\t}).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t}\n\t}\n};\n\n/***/ }),\n\n/***/ \"xyAH\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-artice-better\"\n  }, [_c('div', {\n    staticClass: \"c-artice-better-wrap\"\n  }, [_vm._l((_vm.lists), function(item) {\n    return _c('div', {\n      staticClass: \"c-artice-better-item\"\n    }, [_c('div', {\n      staticClass: \"c-artice-better_content\"\n    }, [_c('div', {\n      staticClass: \"content__title\"\n    }, [_vm._v(_vm._s(item.title))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"content__time\"\n    }, [_vm._v(_vm._s(item.time))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"content__img\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": item.img\n      }\n    })]), _vm._v(\" \"), _c('div', {\n      staticClass: \"content__text\"\n    }, [_vm._v(_vm._s(item.text))])]), _vm._v(\" \"), _vm._m(0, true)])\n  }), _vm._v(\" \"), (_vm.count <= 0) ? _c('Empty') : _vm._e()], 2), _vm._v(\" \"), _c('Page', {\n    attrs: {\n      \"count\": _vm.count,\n      \"length\": _vm.pageSize,\n      \"index\": _vm.pageIndex\n    },\n    on: {\n      \"page_switch\": _vm.pageSwitch\n    }\n  })], 1)\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-artice-better_bottom\"\n  }, [_c('a', {\n    staticClass: \"bottom__link\",\n    attrs: {\n      \"href\": \"#none\"\n    }\n  }, [_vm._v(\"阅读全文\")])])\n}]}\n\n/***/ }),\n\n/***/ \"yStd\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"oZeH\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"POwH\"),\n  /* template */\n  __webpack_require__(\"FG6U\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"yfst\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _vuex = __webpack_require__(\"NYxO\");\n\nexports.default = {\n  data: function data() {\n    return {\n      content: ''\n    };\n  },\n\n  computed: (0, _vuex.mapState)({\n    data: function data(state) {\n      return state.bubble;\n    }\n  }),\n  methods: {\n    close: function close() {\n      this.data.methods.cancel && this.data.methods.cancel();\n      this.$store.dispatch('bubble_closeBubble');\n    },\n    radioSwitch: function radioSwitch(event) {\n      $('.c-bubble-report .report-content .select-item').removeClass('z-on');\n      $(event.currentTarget).addClass('z-on');\n      this.$store.dispatch('bubble_setState', {\n        report: {\n          type: event.currentTarget.dataset['type']\n        }\n      });\n    },\n    addReport: function addReport() {\n      var _this = this;\n\n      this.$store.dispatch('bubble_setState', {\n        report: {\n          content: this.content\n        }\n      }).then(function (res) {\n        return _this.$store.dispatch('common_addReport', {\n          \"content_id\": _this.data.report.content_id,\n          \"report_reason\": _this.data.report.map[_this.data.report.type],\n          \"content_type\": _this.data.report.content_type,\n          \"add_reason\": _this.data.report.content }).then(function (res) {\n          _this.$store.dispatch('bubble_showBubble', {\n            show: false\n          });\n          _this.$store.dispatch('bubble_success', res);\n        });\n      }).catch(function (err) {\n        _this.$store.dispatch('bubble_fail', err);\n      });\n    },\n    comfire: function comfire() {\n      this.data.warn.comfireFn();\n      this.$store.dispatch('bubble_setState', {\n        show: false\n      });\n    },\n    comfireAll: function comfireAll() {\n      this.data.methods.comfire();\n      this.$store.dispatch('bubble_setState', {\n        show: false\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    this.$watch('data.outlogin', function (newVal) {\n      if (newVal) {\n        console.log('-----error-----no login, clear user info');\n        _this2.$cache.removeStore(_this2.$version.userInfo.key);\n        _this2.$store.dispatch('user_ourlogin');\n      }\n    });\n  }\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"7t+N\")))\n\n/***/ }),\n\n/***/ \"zgUS\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"zlOF\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports._reject = exports.getUserInfo = exports.updateUserInfo = exports.reBindPhone = exports.unboundPhone = exports.resetPwd = exports.sigup = exports.sigin = exports.getPhoneVerifyCode = exports.getPicVerifyCode = undefined;\n\nvar _stringify = __webpack_require__(\"mvHQ\");\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _config = __webpack_require__(\"AEPM\");\n\nvar _jsCookie = __webpack_require__(\"lbHh\");\n\nvar _jsCookie2 = _interopRequireDefault(_jsCookie);\n\nvar _axios = __webpack_require__(\"mtWM\");\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar token = _jsCookie2.default.get('token');\n_axios2.default.defaults.headers.get['Content-Type'] = 'application/x-www-form-urlencoded';\n_axios2.default.defaults.headers.get['X-Requested-With'] = 'XMLHttpRequest';\n\nfunction getPicVerifyCode(option) {\n\tvar url = _config.baseUrl + 'auth/getPicVerifyCode';\n\tvar prosime = (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n\n\treturn prosime;\n}\n\nfunction getPhoneVerifyCode(option) {\n\tvar url = _config.baseUrl + 'auth/getPhoneVerifyCode';\n\treturn (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nfunction sigin(option) {\n\tvar url = _config.baseUrl + 'auth/sigin';\n\tvar _header = option._header || {};\n\tdelete option._header;\n\treturn (0, _axios2.default)({\n\t\tmethod: 'POST',\n\t\turl: url,\n\t\tdata: (0, _stringify2.default)(option)\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nfunction sigup(option) {\n\tvar url = _config.baseUrl + 'auth/sigup';\n\tvar _header = option._header || {};\n\tdelete option._header;\n\n\treturn (0, _axios2.default)({\n\t\tmethod: 'POST',\n\t\turl: url,\n\t\tdata: (0, _stringify2.default)(option),\n\t\theaders: _header\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nfunction resetPwd(option) {\n\tvar url = _config.baseUrl + 'auth/resetPwd';\n\tvar _header = option._header || {};\n\tdelete option._header;\n\treturn (0, _axios2.default)({\n\t\tmethod: 'POST',\n\t\turl: url,\n\t\tdata: (0, _stringify2.default)(option),\n\t\theaders: _header\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nfunction unboundPhone(option) {\n\tvar url = _config.baseUrl + 'auth/unboundPhone';\n\n\tif (!token) {\n\t\treturn (0, _config._rejectObj)({\n\t\t\tret: -10,\n\t\t\tmsg: '未登录'\n\t\t});\n\t}\n\n\tdelete option._header;\n\treturn (0, _axios2.default)({\n\t\tmethod: 'POST',\n\t\turl: url,\n\t\tdata: (0, _stringify2.default)(option),\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nfunction reBindPhone(option) {\n\tvar url = _config.baseUrl + 'auth/reBindPhone';\n\n\tif (!token) {\n\t\treturn (0, _config._rejectObj)({\n\t\t\tret: -10,\n\t\t\tmsg: '未登录'\n\t\t});\n\t}\n\n\tdelete option._header;\n\treturn (0, _axios2.default)({\n\t\tmethod: 'POST',\n\t\turl: url,\n\t\tdata: (0, _stringify2.default)(option),\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nfunction updateUserInfo(option) {\n\tvar url = _config.baseUrl + 'user/updateUserInfo';\n\tvar _header = option._header || {};\n\n\tif (!token) {\n\t\treturn (0, _config._rejectObj)({\n\t\t\tret: -10,\n\t\t\tmsg: '未登录'\n\t\t});\n\t}\n\n\tdelete option._header;\n\treturn (0, _axios2.default)({\n\t\tmethod: 'POST',\n\t\turl: url,\n\t\tdata: (0, _stringify2.default)(option),\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nfunction getUserInfo(option) {\n\tvar url = _config.baseUrl + 'user/getUserInfo';\n\tvar _header = option._header || {};\n\n\tif (!token && !option.userId) {\n\t\treturn (0, _config._rejectObj)({\n\t\t\tret: -10,\n\t\t\tmsg: '未登录'\n\t\t});\n\t}\n\n\tdelete option._header;\n\treturn (0, _axios2.default)({\n\t\tmethod: 'GET',\n\t\turl: url,\n\t\tparams: option,\n\t\theaders: {\n\t\t\ttoken: token\n\t\t}\n\t}).then(function (response) {\n\t\tif (response.data.ret != 0) {\n\t\t\treturn (0, _config._reject)(response.data);\n\t\t}\n\t\treturn response.data;\n\t}).catch(function (error) {\n\t\treturn (0, _config._rejectObj)(error);\n\t});\n}\n\nexports.getPicVerifyCode = getPicVerifyCode;\nexports.getPhoneVerifyCode = getPhoneVerifyCode;\nexports.sigin = sigin;\nexports.sigup = sigup;\nexports.resetPwd = resetPwd;\nexports.unboundPhone = unboundPhone;\nexports.reBindPhone = reBindPhone;\nexports.updateUserInfo = updateUserInfo;\nexports.getUserInfo = getUserInfo;\nexports._reject = _config._reject;\n\n/***/ }),\n\n/***/ \"ztWJ\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// js/vendor-business.a0a9fdc055b2193fd70d.js","<!-- style样式代码 -->\n<style lang=\"less\">\n@import (reference) '../common/css/common';\n\t@module: c-header;\n\t.@{module} {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tz-index: 20;\n\t\twidth: 100%;\n\t\tmin-width: 960px;\n\t\theight: 60px;\n\t\t.default_backgroud_6;\n\t}\n\t.@{module}-content {\n\t\t.default_width_960;\n\t\theight: 100%;\n\t\tmargin: 0 auto;\n\t\t& .logo {\n\t\t\tfloat: left;\n\t\t\twidth: 84px;\n\t\t\theight: 50px;\n\t\t\tmargin-top: 5px;\n\t\t\tmargin-right: 20px;\n\t\t\t.skin_icon_logo;\n\t\t\t.default_pointer;\n\t\t\t& a {\n\t\t\t\tdisplay: inline-block;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t}\n\t\t}\n\t\t& .menu {\n\t\t\tfloat: left;\n\t\t\tmargin-top: 10px;\n\t\t\tmargin-right: 30px;\n\t\t\toverflow-y: hidden;\n\t\t\t& .item {\n\t\t\t\tfloat: left;\n\t\t\t\theight: 40px;\n\t\t\t\tline-height: 40px;\n\t\t\t\tmargin-right: 20px;\n\t\t\t\t.default_font_size_2;\n\t\t\t\t.default_color_2;\n\t\t\t\ttext-decoration: none;\n\t\t\t\t&:hover {\n\t\t\t\t\t.default_color_10;\n\t\t\t\t}\n\t\t\t\t&.z-on {\n\t\t\t\t\t.default_color_10;\n\t\t\t\t}\n\t\t\t\t:last-child {\n\t\t\t\t\tmargin-right: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t& .search {\n\t\t\tfloat: left;\n\t\t\twidth: 270px;\n\t\t\theight: 40px;\n\t\t\toverflow: hidden;\n\t\t\tpadding-left: 20px;\n\t\t\tmargin-top: 10px;\n\t\t\t.default_border-r-4;\n\t\t\t.default_backgroud_3;\n\t\t\t& input {\n\t\t\t\tdisplay: block;\n\t\t\t\tfloat: left;\n\t\t\t\twidth: 200px;\n\t\t\t\theight: 40px;\n\t\t\t\tline-height: 40px;\n\t\t\t\t.default_color_2;\n\t\t\t\t.default_font_size_2;\n\t\t\t}\n\t\t\t& a {\n\t\t\t\tdisplay: block;\n\t\t\t\tfloat: left;\n\t\t\t\twidth: 50px;\n\t\t\t\theight: 40px;\n\t\t\t\tpadding-top: 10px;\n\t\t\t\t.default_backgroud_5;\n\t\t\t\t.default_center;\n\t\t\t\t& span {\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\twidth: 20px;\n\t\t\t\t\theight: 20px;\n\t\t\t\t\t.skin_icon_search;\n\t\t\t\t\t&:hover {\n\t\t\t\t\t\t.skin_icon_search_on;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t&:hover {\n\t\t\t\t\t.default_backgroud_4;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t& .user {\n\t\t\tfloat: right;\n\t\t\theight: 60px;\n\t\t\tmargin-right: 20px;\n\t\t\t.default_center;\n\t\t\t& .btn {\n\t\t\t\tpadding: 15px 0;\n\t\t\t\theight: 30px;\n\t\t\t\tline-height: 30px;\n\t\t\t\t.default_font_size_3;\n\t\t\t\t.default_color_2;\n\t\t\t\t.default_font_family_bolder;\n\t\t\t\t& a {\n\t\t\t\t\ttext-decoration: none;\n\t\t\t\t\t.default_color_1;\n\t\t\t\t\t&:hover {\n\t\t\t\t\t\t.default_color_10;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t& span {\n\t\t\t\t\t.default_color_2;\n\t\t\t\t\t.default_font_size_2;\n\t\t\t\t\t.default_font_bolder;\n\t\t\t\t}\n\t\t\t}\n\t\t\t& .member {\n\t\t\t\tposition: relative;\n\t\t\t\theight: 60px;\n\t\t\t\t& .member-show-item {\n\t\t\t\t\twidth: 30px;\n\t\t\t\t\theight: 60px;\n\t\t\t\t\tpadding: 15px 0;\n\t\t\t\t\t.default_float_l;\n\t\t\t\t}\n\t\t\t\t& .member-show-notice {\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tmargin-right: 20px;\n\t\t\t\t\t& .member-show-notice_img {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t.skin_icon_notice;\n\t\t\t\t\t\t.default_pointer;\n\t\t\t\t\t\t.default_border-r-50;\n\t\t\t\t\t\t.default_backgroud_2;\n\t\t\t\t\t\t&:hover {\n\t\t\t\t\t\t\t.skin_icon_notice_on;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t& .member-show-notice_number {\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\ttop: 15px;\n\t\t\t\t\t\tright: 0;\n\t\t\t\t\t\twidth: 8px;\n\t\t\t\t\t\theight: 8px;\n\t\t\t\t\t\t.default_border-r-50;\n\t\t\t\t\t\t.default_backgroud_12;\n\t\t\t\t\t}\n\t\t\t\t\t& .member-notice {\n\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\ttop: 60px;\n\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t\twidth: 180px;\n\t\t\t\t\t\tz-index: 11;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\t.default_backgroud_2;\n\t\t\t\t\t\t.default_border-r-4;\n\t\t\t\t\t\t.default_border_shadow_4;\n\t\t\t\t\t\t& .member-notice-item {\n\t\t\t\t\t\t\twidth: 180px;\n\t\t\t\t\t\t\theight: 50px;\n\t\t\t\t\t\t\tline-height: 50px;\n\t\t\t\t\t\t\t& a {\n\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\t\tpadding-left: 20px;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t& .member-notice-item__list {\n\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\tfloat: left;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t& .member-notice-item__icon { \n\t\t\t\t\t\t\t\twidth: 20px;\n\t\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\t\tmargin-right: 10px; \n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t& .member-notice-item__text { \n\t\t\t\t\t\t\t\theight: 50px;\n\t\t\t\t\t\t\t\tline-height: 50px;\n\t\t\t\t\t\t\t\t.default_font_size_2;\n\t\t\t\t\t\t\t\t.default_color_3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t& .member-notice-item__number { \n\t\t\t\t\t\t\t\tfloat: left;\n\t\t\t\t\t\t\t\theight: 50px;\n\t\t\t\t\t\t\t\tline-height: 50px;\n\t\t\t\t\t\t\t\tmargin-right: 10px; \n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t&:first-child { \n\t\t\t\t\t\t\t\t.default_border-r-t-4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t&:last-child { \n\t\t\t\t\t\t\t\t.default_border-r-b-4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t&:nth-child(1) .member-notice-item__icon { \n\t\t\t\t\t\t\t\t.skin_icon_er; \n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t&:nth-child(2) .member-notice-item__icon { \n\t\t\t\t\t\t\t\t.skin_icon_cmt; \n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t&:nth-child(3) .member-notice-item__icon { \n\t\t\t\t\t\t\t\t.skin_icon_msg; \n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t&:hover {\n\t\t\t\t\t\t\t\t.default_backgroud_6;\n\t\t\t\t\t\t\t\t.default_border_shadow_4;\n\t\t\t\t\t\t\t\t& .member-notice-item__text {\n\t\t\t\t\t\t\t\t\t.default_color_1;\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t&:nth-child(1) .member-notice-item__icon { .skin_icon_er_on; }\n\t\t\t\t\t\t\t\t&:nth-child(2) .member-notice-item__icon { .skin_icon_cmt_on; }\n\t\t\t\t\t\t\t\t&:nth-child(3) .member-notice-item__icon { .skin_icon_msg_on; }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t&:hover {\n\t\t\t\t\t\t.skin_icon_notice_on;\n\t\t\t\t\t\t& .member-notice {\n\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t& .member-show-center {\n\t\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\t\tbackground-position: center;\n\t\t\t\t\tbackground-size: contain;\n\t\t\t\t\t& .member-show-center_img {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tbackground-size: cover;\n\t\t\t\t\t\t.skin_icon;\n\t\t\t\t\t\t.default_pointer;\n\t\t\t\t\t\t.default_border-r-50;\n\t\t\t\t\t\t.default_backgroud_2;\n\t\t\t\t\t}\n\t\t\t\t\t& .member-center {\n\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\ttop: 60px;\n\t\t\t\t\t\tleft: 50px;\n\t\t\t\t\t\twidth: 180px;\n\t\t\t\t\t\tz-index: 11;\n\t\t\t\t\t\t.default_backgroud_2;\n\t\t\t\t\t\t.default_border-r-4;\n\t\t\t\t\t\t.default_pointer;\n\t\t\t\t\t\t.default_border_shadow_4;\n\t\t\t\t\t\t& .member-center-item {\n\t\t\t\t\t\t\twidth: 180px;\n\t\t\t\t\t\t\theight: 50px;\n\t\t\t\t\t\t\tline-height: 50px;\n\t\t\t\t\t\t\t& a {\n\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\t\tpadding-left: 20px;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t& .member-center-item__list {\n\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\tfloat: left;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t& .member-center-item__icon { \n\t\t\t\t\t\t\t\twidth: 20px;\n\t\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\t\tmargin-right: 10px; \n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t& .member-center-item__text { \n\t\t\t\t\t\t\t\theight: 50px;\n\t\t\t\t\t\t\t\tline-height: 50px;\n\t\t\t\t\t\t\t\t.default_font_size_2;\n\t\t\t\t\t\t\t\t.default_color_3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t&:first-child { \n\t\t\t\t\t\t\t\t.default_border-r-t-4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t&:last-child { \n\t\t\t\t\t\t\t\t.default_border-r-b-4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t&:nth-child(1) .member-center-item__icon { .skin_icon_me; }\n\t\t\t\t\t\t\t&:nth-child(2) .member-center-item__icon { .skin_icon_set; }\n\t\t\t\t\t\t\t&:nth-child(3) .member-center-item__icon { .skin_icon_back; }\n\t\t\t\t\t\t\t&:nth-child(4) .member-center-item__icon { .skin_icon_logout; }\n\t\t\t\t\t\t\t&:hover {\n\t\t\t\t\t\t\t\t.default_backgroud_6;\n\t\t\t\t\t\t\t\t.default_border_shadow_4;\n\t\t\t\t\t\t\t\t& .member-center-item__text {\n\t\t\t\t\t\t\t\t\t.default_color_1;\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t&:nth-child(1) .member-center-item__icon { .skin_icon_me_on; }\n\t\t\t\t\t\t\t\t&:nth-child(2) .member-center-item__icon { .skin_icon_set_on; }\n\t\t\t\t\t\t\t\t&:nth-child(3) .member-center-item__icon { .skin_icon_back_on; }\n\t\t\t\t\t\t\t\t&:nth-child(4) .member-center-item__icon { .skin_icon_logout_on; }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t&:hover {\n\t\t\t\t\t\t& .member-center {\n\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t& .publish {\n\t\t\tposition: relative;\n\t\t\tfloat: right;\n\t\t\theight: 60px;\n\t\t\tpadding-top: 10px;\n\t\t\t& .publish-btn {\n\t\t\t\tdisplay: block;\n\t\t\t\twidth: 70px;\n\t\t\t\ttext-decoration: none;\n\t\t\t}\n\t\t\t& .publish-show {\n\t\t\t\tdisplay: none;\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 60px;\n\t\t\t\tleft: 0;\n\t\t\t\twidth: 180px;\n\t\t\t\tz-index: 11;\n\t\t\t\t.default_backgroud_2;\n\t\t\t\t.default_border-r-4;\n\t\t\t\t.default_pointer;\n\t\t\t\t.default_border_shadow_4;\n\t\t\t\t& .publish-show-item {\n\t\t\t\t\twidth: 180px;\n\t\t\t\t\theight: 50px;\n\t\t\t\t\tline-height: 50px;\n\t\t\t\t\tpadding-left: 20px;\n\t\t\t\t\t& a {\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t}\n\t\t\t\t\t& .publish-show-item__list {\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\tfloat: left;\n\t\t\t\t\t}\n\t\t\t\t\t& .publish-show-item__icon { \n\t\t\t\t\t\twidth: 20px;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tmargin-right: 10px; \n\t\t\t\t\t}\n\t\t\t\t\t& .publish-show-item__text { \n\t\t\t\t\t\theight: 50px;\n\t\t\t\t\t\tline-height: 50px;\n\t\t\t\t\t\t.default_font_size_2;\n\t\t\t\t\t\t.default_color_3;\t\n\t\t\t\t\t}\n\t\t\t\t\t&:first-child { \n\t\t\t\t\t\t.default_border-r-t-4;\n\t\t\t\t\t}\n\t\t\t\t\t&:last-child { \n\t\t\t\t\t\t.default_border-r-b-4;\n\t\t\t\t\t}\n\t\t\t\t\t&:nth-child(2) .publish-show-item__icon { \n\t\t\t\t\t\t.skin_icon_charpt; \n\t\t\t\t\t}\n\t\t\t\t\t&:nth-child(1) .publish-show-item__icon { \n\t\t\t\t\t\t.skin_icon_article; \n\t\t\t\t\t}\n\t\t\t\t\t&:nth-child(2) .publish-show-item__icon { \n\t\t\t\t\t\t.skin_icon_charpt; \n\t\t\t\t\t}\n\t\t\t\t\t&:hover {\n\t\t\t\t\t\t.default_backgroud_6;\n\t\t\t\t\t\t.default_border_shadow_4;\n\t\t\t\t\t\t& .publish-show-item__text {\n\t\t\t\t\t\t\t.default_color_1;\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\t&:nth-child(1) .publish-show-item__icon { .skin_icon_article_on; }\n\t\t\t\t\t\t&:nth-child(2) .publish-show-item__icon { .skin_icon_charpt_on; }\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t&:hover {\n\t\t\t\t& .publish-show {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t}\t\n\t\t\t}\n\t\t}\n\t}\n</style>\n\n<!-- html代码 -->\n<template>\n<div class=\"c-header\">\n\t<div class=\"c-header-content\">\n\t\t<div class=\"logo\"><a :href='url.index'></a></div>\n\t\t<div class=\"menu\">\n\t\t\t<a class=\"item\" :class=\"{'z-on': pageIndex == 'index'}\" :href='url.index'>发现</a>\n\t\t\t<a class=\"item\" :class=\"{'z-on': pageIndex == 'mark'}\" :href='url.mark'>收藏</a>\n\t\t</div>\n\t\t<div class=\"search\">\n\t\t\t<input type=\"text\" placeholder=\"搜索\" @keyup.enter=\"seachGo\" v-model=\"search_value\">\n\t\t\t<a href=\"javascript:void(0)\" @click=\"seachGo\"><span></span></a>\n\t\t</div>\n\t\t<div v-if=\"user.isLogin\" class=\"publish\">\n\t\t\t<a class=\"publish-btn cpm_button_warn\" :href=\"url.edit\">创作</a>\n\t\t\t<!-- <div class=\"publish-show\">\n\t\t\t\t<ul class=\"publish-show-lists\">\n\t\t\t\t\t<li class=\"publish-show-item\"><a :href=\"url.edit\">\n\t\t\t\t\t\t<span class=\"publish-show-item__list publish-show-item__icon\"></span>\n\t\t\t\t\t\t<span class=\"publish-show-item__list publish-show-item__text\">创建新作品</span>\n\t\t\t\t\t</a></li>\n\t\t\t\t\t<li class=\"publish-show-item\"><a :href=\"user.isLogin ? 'author.work.html?user_id='+ user.uid : './login.html'\">\n\t\t\t\t\t\t<span class=\"publish-show-item__list publish-show-item__icon\"></span>\n\t\t\t\t\t\t<span class=\"publish-show-item__list publish-show-item__text\">填坑新章节</span>\n\t\t\t\t\t</a></li>\n\t\t\t\t</ul>\n\t\t\t</div> -->\n\t\t</div>\n\t\t<div class=\"user\">\n\t\t\t<div v-if=\"!user.isLogin\" class=\"btn\">\n\t\t\t\t<a :href=\"url.register\">注册</a><span>·</span><a :href=\"url.login\">登录</a>\n\t\t\t</div>\n\t\t\t<div v-else class=\"member\">\n\t\t\t\t<div class=\"member-show-item member-show-notice\">\n\t\t\t\t\t<div class=\"member-show-notice_img\"></div>\n\t\t\t\t\t<div v-if=\"hasMessage\" class=\"member-show-notice_number\"></div>\n\t\t\t\t\t<div class=\"member-show member-notice\">\n\t\t\t\t\t\t<ul class=\"member-notice-lists\">\n\t\t\t\t\t\t\t<li class=\"member-notice-item\"><a :href=\"url.better\">\n\t\t\t\t\t\t\t\t<span class=\"member-notice-item__list member-notice-item__icon\"></span>\n\t\t\t\t\t\t\t\t<span class=\"member-notice-item__list member-notice-item__text\">精选</span>\n\t\t\t\t\t\t\t\t<span v-if=\"!!unread.message1 && unread.message1 != 0\" class=\"member-notice-item__list member-notice-item__number\">·{{unread.message1}}</span>\n\t\t\t\t\t\t\t</a></li>\n\t\t\t\t\t\t\t<li class=\"member-notice-item\"><a :href=\"url.comment\">\n\t\t\t\t\t\t\t\t<span class=\"member-notice-item__list member-notice-item__icon\"></span>\n\t\t\t\t\t\t\t\t<span class=\"member-notice-item__list member-notice-item__text\">评论我</span>\n\t\t\t\t\t\t\t\t<span v-if=\"!!unread.message2 && unread.message2 != 0\" class=\"member-notice-item__list member-notice-item__number\">·{{unread.message2}}</span>\n\t\t\t\t\t\t\t</a></li>\n\t\t\t\t\t\t\t<li class=\"member-notice-item\"><a :href=\"url.infomation\">\n\t\t\t\t\t\t\t\t<span class=\"member-notice-item__list member-notice-item__icon\"></span>\n\t\t\t\t\t\t\t\t<span class=\"member-notice-item__list member-notice-item__text\">其他消息</span>\n\t\t\t\t\t\t\t\t<span v-if=\"!!unread.message0 && unread.message0 != 0\" class=\"member-notice-item__list member-notice-item__number\">·{{unread.message0}}</span>\n\t\t\t\t\t\t\t</a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"member-show-item member-show-center\">\n\t\t\t\t\t<div class=\"member-show-center_img\" :style=\"{'background-image': 'url('+ (!!user.avatar_url ? user.avatar_url : avatar) + ')'} \"></div>\n\t\t\t\t\t<div class=\"member-show member-center\">\n\t\t\t\t\t\t<ul class=\"member-center-lists\">\n\t\t\t\t\t\t\t<li class=\"member-center-item\"><a :href=\"url.center\">\n\t\t\t\t\t\t\t\t<span class=\"member-center-item__list member-center-item__icon\"></span>\n\t\t\t\t\t\t\t\t<span class=\"member-center-item__list member-center-item__text\">我的主页</span>\n\t\t\t\t\t\t\t</a></li>\n\t\t\t\t\t\t\t<li class=\"member-center-item\"><a :href=\"url.setting\">\n\t\t\t\t\t\t\t\t<span class=\"member-center-item__list member-center-item__icon\"></span>\n\t\t\t\t\t\t\t\t<span class=\"member-center-item__list member-center-item__text\">个人设置</span>\n\t\t\t\t\t\t\t</a></li>\n\t\t\t\t\t\t\t<li class=\"member-center-item\" @click=\"feedbackOpen\"><a href=\"javascript:void(0);\">\n\t\t\t\t\t\t\t\t<span class=\"member-center-item__list member-center-item__icon\"></span>\n\t\t\t\t\t\t\t\t<span class=\"member-center-item__list member-center-item__text\">意见反馈</span>\n\t\t\t\t\t\t\t</a></li>\n\t\t\t\t\t\t\t<li class=\"member-center-item\" @click=\"ourlogin\"><a href=\"javascript:void(0);\">\n\t\t\t\t\t\t\t\t<span class=\"member-center-item__list member-center-item__icon\"></span>\n\t\t\t\t\t\t\t\t<span class=\"member-center-item__list member-center-item__text\" >退出登录</span>\n\t\t\t\t\t\t\t</a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<Feedback />\n</div>\n</template>\n\n<script>\nimport {mapState} from 'vuex'\nimport avatar from '../common/images/img/avatar.png';\nexport default {\n\tname: 'header',\n    data () {\n    \treturn {\n    \t\tavatar: avatar,\n    \t\thasMessage: false,\n    \t\tsearch_value: ''\n    \t}\n    },\n    props: ['pageIndex', 'resType'],\n    computed: mapState({\n        user: state => state.user.info,\n        search (){\n        \tvar path = location.pathname.indexOf('search.author.html') > -1 ? 'search.author.html' : 'search.article.html';\n        \treturn './' + path + '?query=' + this.search_value\n        },\n        url (){\n        \treturn {\n    \t\t\tindex: './index.html',\n    \t\t\tmark: './mark.html',\n    \t\t\tapp: './app.html',\n    \t\t\tlogin: './login.html',\n    \t\t\tregister: './register.html',\n    \t\t\tcenter: './author.work.html?user_id=' + this.$store.state.user.info.uid,\n    \t\t\tsetting: './setting.userinfo.html',\n    \t\t\tbetter: './message.better.html',\n    \t\t\tcomment: './message.comment.html',\n    \t\t\tinfomation: './message.infomation.html',\n    \t\t\tedit: './article.edit.html?from=' + encodeURIComponent(window.location.href)\n    \t\t}\n        },\n        unread (){\n        \tvar unread = {};\n        \tvar list = this.$store.state.message.unread.list;\n        \tfor (var i = 0, len = list.length; i < len; i++) {\n        \t\tunread['message'+ list[i].message_type] = list[i].unread_count;\n        \t}\n        \tif (unread.message1 > 0 || unread.message2 > 0 || unread.message0 > 0) {\n        \t\tthis.hasMessage = true;\n        \t}\n        \treturn unread;\n        }\n    }),\n    methods: {\n    \tseachGo (){\n    \t\tif (this.resType == 'search') {\n    \t\t\tthis.$eventHub.$emit('header_serach', {\n    \t\t\t\tquery: this.search_value\n    \t\t\t});\n    \t\t} else {\n    \t\t\tlocation.href = this.search;\t\n    \t\t}\n    \t},\n    \t// 获取用户信息\n        getUserInfo () {\n\t\t\tvar cache_userInfo = this.$version.userInfo;\n        \tvar info = this.$cache.getStore(cache_userInfo.key, cache_userInfo.version);\n        \tif (info) {\n        \t\tthis.$store.dispatch('user_setUserInfo', info).then( res => {\n        \t\t\tthis.url.center = './author.work.html?user_id=' + this.user.uid;\n        \t\t})\n        \t\treturn false;\n        \t}\n            this.$store.dispatch('user_getUserInfo', {\n            \t\n            }).then( res => {\n                this.url.center = './author.work.html?user_id=' + this.user.uid;\n\n                // 缓存用户信息 - 1h\n                this.$cache.setStore(cache_userInfo.key, res, cache_userInfo.version, cache_userInfo.time);\n\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n            \tthis.$store.dispatch('bubble_fail', err);\n            }); \n        },\n        // 退出登录\n        ourlogin (){\n        \tthis.centerShow = false;\n        \tthis.$cache.removeStore(this.$version.userInfo.key);\n        \tthis.$store.dispatch('user_ourlogin');\n        },\n        // 反馈打开\n        feedbackOpen (){\n        \tthis.centerShow = false;\n        \tthis.$store.dispatch('common_switch', true);\n        },\n        // 获取未读消息\n        getUnreadMessage (){\n        \tthis.$store.dispatch('message_getUnreadMessage', {\n            \t// todo\n            }).then( res => {\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n            \tthis.$store.dispatch('bubble_fail', err);\n            });\n        }\n    },\n    mounted () {\n    \tthis.$eventHub.$on('getUnreadMessage', option => {\n    \t\t// 获取未读消息\n        \tthis.getUnreadMessage();\n    \t})\n\n    \t// 获取url的参数\n        this.search_value = decodeURIComponent(this.$url.getUrlParam('query')) || '';\n\n    \t// 获取用户信息\n        this.getUserInfo();\n\n        // 获取未读消息\n        this.getUnreadMessage();\n    }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// header.vue?5998f5a0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-header\"\n  }, [_c('div', {\n    staticClass: \"c-header-content\"\n  }, [_c('div', {\n    staticClass: \"logo\"\n  }, [_c('a', {\n    attrs: {\n      \"href\": _vm.url.index\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"menu\"\n  }, [_c('a', {\n    staticClass: \"item\",\n    class: {\n      'z-on': _vm.pageIndex == 'index'\n    },\n    attrs: {\n      \"href\": _vm.url.index\n    }\n  }, [_vm._v(\"发现\")]), _vm._v(\" \"), _c('a', {\n    staticClass: \"item\",\n    class: {\n      'z-on': _vm.pageIndex == 'mark'\n    },\n    attrs: {\n      \"href\": _vm.url.mark\n    }\n  }, [_vm._v(\"收藏\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"search\"\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.search_value),\n      expression: \"search_value\"\n    }],\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": \"搜索\"\n    },\n    domProps: {\n      \"value\": (_vm.search_value)\n    },\n    on: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.seachGo($event)\n      },\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.search_value = $event.target.value\n      }\n    }\n  }), _vm._v(\" \"), _c('a', {\n    attrs: {\n      \"href\": \"javascript:void(0)\"\n    },\n    on: {\n      \"click\": _vm.seachGo\n    }\n  }, [_c('span')])]), _vm._v(\" \"), (_vm.user.isLogin) ? _c('div', {\n    staticClass: \"publish\"\n  }, [_c('a', {\n    staticClass: \"publish-btn cpm_button_warn\",\n    attrs: {\n      \"href\": _vm.url.edit\n    }\n  }, [_vm._v(\"创作\")])]) : _vm._e(), _vm._v(\" \"), _c('div', {\n    staticClass: \"user\"\n  }, [(!_vm.user.isLogin) ? _c('div', {\n    staticClass: \"btn\"\n  }, [_c('a', {\n    attrs: {\n      \"href\": _vm.url.register\n    }\n  }, [_vm._v(\"注册\")]), _c('span', [_vm._v(\"·\")]), _c('a', {\n    attrs: {\n      \"href\": _vm.url.login\n    }\n  }, [_vm._v(\"登录\")])]) : _c('div', {\n    staticClass: \"member\"\n  }, [_c('div', {\n    staticClass: \"member-show-item member-show-notice\"\n  }, [_c('div', {\n    staticClass: \"member-show-notice_img\"\n  }), _vm._v(\" \"), (_vm.hasMessage) ? _c('div', {\n    staticClass: \"member-show-notice_number\"\n  }) : _vm._e(), _vm._v(\" \"), _c('div', {\n    staticClass: \"member-show member-notice\"\n  }, [_c('ul', {\n    staticClass: \"member-notice-lists\"\n  }, [_c('li', {\n    staticClass: \"member-notice-item\"\n  }, [_c('a', {\n    attrs: {\n      \"href\": _vm.url.better\n    }\n  }, [_c('span', {\n    staticClass: \"member-notice-item__list member-notice-item__icon\"\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"member-notice-item__list member-notice-item__text\"\n  }, [_vm._v(\"精选\")]), _vm._v(\" \"), (!!_vm.unread.message1 && _vm.unread.message1 != 0) ? _c('span', {\n    staticClass: \"member-notice-item__list member-notice-item__number\"\n  }, [_vm._v(\"·\" + _vm._s(_vm.unread.message1))]) : _vm._e()])]), _vm._v(\" \"), _c('li', {\n    staticClass: \"member-notice-item\"\n  }, [_c('a', {\n    attrs: {\n      \"href\": _vm.url.comment\n    }\n  }, [_c('span', {\n    staticClass: \"member-notice-item__list member-notice-item__icon\"\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"member-notice-item__list member-notice-item__text\"\n  }, [_vm._v(\"评论我\")]), _vm._v(\" \"), (!!_vm.unread.message2 && _vm.unread.message2 != 0) ? _c('span', {\n    staticClass: \"member-notice-item__list member-notice-item__number\"\n  }, [_vm._v(\"·\" + _vm._s(_vm.unread.message2))]) : _vm._e()])]), _vm._v(\" \"), _c('li', {\n    staticClass: \"member-notice-item\"\n  }, [_c('a', {\n    attrs: {\n      \"href\": _vm.url.infomation\n    }\n  }, [_c('span', {\n    staticClass: \"member-notice-item__list member-notice-item__icon\"\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"member-notice-item__list member-notice-item__text\"\n  }, [_vm._v(\"其他消息\")]), _vm._v(\" \"), (!!_vm.unread.message0 && _vm.unread.message0 != 0) ? _c('span', {\n    staticClass: \"member-notice-item__list member-notice-item__number\"\n  }, [_vm._v(\"·\" + _vm._s(_vm.unread.message0))]) : _vm._e()])])])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"member-show-item member-show-center\"\n  }, [_c('div', {\n    staticClass: \"member-show-center_img\",\n    style: ({\n      'background-image': 'url(' + (!!_vm.user.avatar_url ? _vm.user.avatar_url : _vm.avatar) + ')'\n    })\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"member-show member-center\"\n  }, [_c('ul', {\n    staticClass: \"member-center-lists\"\n  }, [_c('li', {\n    staticClass: \"member-center-item\"\n  }, [_c('a', {\n    attrs: {\n      \"href\": _vm.url.center\n    }\n  }, [_c('span', {\n    staticClass: \"member-center-item__list member-center-item__icon\"\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"member-center-item__list member-center-item__text\"\n  }, [_vm._v(\"我的主页\")])])]), _vm._v(\" \"), _c('li', {\n    staticClass: \"member-center-item\"\n  }, [_c('a', {\n    attrs: {\n      \"href\": _vm.url.setting\n    }\n  }, [_c('span', {\n    staticClass: \"member-center-item__list member-center-item__icon\"\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"member-center-item__list member-center-item__text\"\n  }, [_vm._v(\"个人设置\")])])]), _vm._v(\" \"), _c('li', {\n    staticClass: \"member-center-item\",\n    on: {\n      \"click\": _vm.feedbackOpen\n    }\n  }, [_c('a', {\n    attrs: {\n      \"href\": \"javascript:void(0);\"\n    }\n  }, [_c('span', {\n    staticClass: \"member-center-item__list member-center-item__icon\"\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"member-center-item__list member-center-item__text\"\n  }, [_vm._v(\"意见反馈\")])])]), _vm._v(\" \"), _c('li', {\n    staticClass: \"member-center-item\",\n    on: {\n      \"click\": _vm.ourlogin\n    }\n  }, [_c('a', {\n    attrs: {\n      \"href\": \"javascript:void(0);\"\n    }\n  }, [_c('span', {\n    staticClass: \"member-center-item__list member-center-item__icon\"\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"member-center-item__list member-center-item__text\"\n  }, [_vm._v(\"退出登录\")])])])])])])])])]), _vm._v(\" \"), _c('Feedback')], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-306a90d2\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/component/header.vue\n// module id = +l+3\n// module chunks = 0","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-2207faaf\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./author.hot.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./author.hot.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2207faaf\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./author.hot.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/author.hot.vue\n// module id = 0CNv\n// module chunks = 0","<!-- style样式代码 -->\n<style lang=\"less\">\n@import (reference) '../common/css/common';\n    @module: c-artice-list;\n    .c-artice-list {\n        width: 680px;\n        height: 100%;\n        & &-wrap {\n            width: 100%;\n            height: 100%;\n            min-height: 350px;\n            .default_backgroud_2;\n            .default_border-r-4;\n        }\n        & .list-more {\n            width: 100%;\n            .default_center;\n            .default_backgroud_2;\n            .default_border-r-b-4;\n            & .btn-more-before {\n                height: 60px;\n                line-height: 60px;\n                .default_color_1;\n                .default_font_size_2;\n                .default_pointer;\n            } \n            & .btn-more-loading {\n                height: 60px;\n                line-height: 60px;\n                & em {\n                    .default_disline;\n                    width: 20px;\n                    height: 20px;\n                    margin-right: 10px;\n                    .default_middle;\n                    .skin_icon_load;\n                    animation: loading 1.5s linear infinite;\n                }\n                & span {\n                    .default_disline;\n                    .default_color_1;\n                    .default_font_family_bolder;\n                    .default_font_size_2;\n                    .default_middle;\n                }\n            }\n            & .btn-more-end {\n                height: 60px;\n                line-height: 60px;\n                .default_color_2;\n                .default_font_size_2;\n            }\n        }\n        & .list-pages {\n            margin-top: 30px;\n        }\n    }\n    .c-artice-item {\n        width: 100%;\n        height: 180px;\n        padding: 10px 20px 10px 10px;\n        .default_backgroud_2;\n        .default_border-b-14;\n        transition: box-shadow @default_speed_1, transform @default_speed_1;\n        & &-wrap,\n        & &-wrap-link {\n            display: block;\n            width: 100%;\n            height: 160px;\n        }\n        & .item-left,\n        & .item-right {\n            float: left;\n            height: 160px;\n        }\n        & .item-left {\n            position: relative;\n            width: 120px;\n            height: 160px;\n            overflow: hidden;\n            margin-right: 20px;\n            & .item-left__img {\n                width: 100%;\n                height: 100%;\n                overflow: hidden;\n                & img {\n                    max-width: 100%;\n                }\n            }\n            & .item-left__text {\n                position: absolute;\n                right: 8px;\n                bottom: 8px;\n                width: 40px;\n                height: 20px;\n                line-height: 18px;\n                text-align: center;\n                border: 1px solid @default_backgroud_13;\n                border-radius: 10px;\n                .default_color_1;\n                .default_font_size_1;\n                .default_backgroud_3;\n            }\n        }\n        & .item-right {\n            position: relative;\n            width: 510px;\n            padding-top: 10px;\n            & .item-right__titile {\n                margin-bottom: 12px;\n                .default_color_1;\n                .default_font_size_7;\n                .default_font_family_bolder;\n                &:hover {\n                    .default_color_10;\n                }\n            }\n            & .item-right__content {\n                line-height: 1.3rem;\n                margin-bottom: 8px;\n                .default_color_2;\n                .default_font_size_2;\n            }\n            & .item-right__tags {\n                width: 100%;\n                overflow: hidden;\n                & a {\n                    float: left;\n                    margin-right: 10px;\n                    margin-bottom: 10px;\n                    .default_font_size_1;\n                    .default_color_3;  \n                    &.z-active,\n                    &:hover {\n                        .default_color_1;\n                    } \n                }\n            }\n            & .item-right__bottom {\n                position: absolute;\n                left: 0;\n                bottom: 10px;\n            }\n            & .item-right__img {\n                float: left;\n                width: 20px;\n                height: 20px;\n                overflow: hidden;\n                margin-right: 8px;\n                .default_border-r-50;\n            }\n            & .item-right__name {\n                float: left;\n                height: 20px;\n                line-height: 20px;\n                margin-right: 20px;\n                .default_color_3;\n                .default_font_size_1;\n                &:hover {\n                    .default_color_1;\n                }\n            }\n            & .item-right__btn {\n                display: inline-block;\n                height: 20px;\n                line-height: 20px;\n                margin-right: 10px;\n                .default_font_size_1;\n                .default_color_2;\n                .default_middle;\n                &:hover {\n                   .default_color_1; \n                }\n            }\n        }\n        & a {\n            text-decoration: none;\n        }\n        &:hover {\n            z-index: 2;\n            transform: translate(0, -2px) translateZ(1px);\n            .default_border_shadow_4;\n        }\n    }\n    .c-artice-list.z-small .item-left {\n        & .top-img {\n            .default_backgroud_4;\n        }\n        & .top,\n        & .content {\n            // width: 420px;\n        }\n    }\n\n    // 动画\n    @keyframes loading {\n        from { transform: rotate(0); }\n        to { transform: rotate(359deg); }\n    }\n</style>\n\n<!-- html代码 -->\n<template>\n<div class=\"c-artice-list\">\n<div class=\"c-artice-list-wrap\">\n    <div class=\"c-artice-item\" v-for=\"data in article.lists\">\n        <div class=\"c-artice-item-wrap\"\n            :data-catalog_id=\"data.catalog_id\"\n        >\n            <a :href=\"'./article.html?catalog_id=' + data.catalog_id\" class=\"c-artice-item-wrap-link\">\n                <div class=\"item-left\">\n                    <div class=\"item-left__img\">\n                        <img :src=\"data.catalog_cover_url\" />\n                    </div>\n                    <div class=\"item-left__text\">{{data.category_title}}</div>\n                </div>\n                <div class=\"item-right\">\n                    <div class=\"item-right__titile\">{{data.catalog_title}}</div>\n                    <div class=\"item-right__content\">{{data.catalog_desc.length > 60 ? data.catalog_desc.substr(0, 60) + '...' : data.catalog_desc}}</div>\n                    <div class=\"item-right__tags\">\n                        <a\n                            :href=\"'./page.html?labelTag='+ label\" \n                            v-for=\"label in data.labels\"\n                            :class=\"{'z-active': labelTag == label}\" \n                        >{{label}}</a>\n                    </div>\n                    <div class=\"item-right__bottom\">\n                        <a v-if=\"resType != 'author'\" class=\"item-right__btn\" :href=\"'author.work.html?user_id=' + data.user.uid\">\n                            <div class=\"item-right__img\">\n                                <img :src=\"data.user.avatar_url || avatar\" />\n                            </div>\n                            <div class=\"item-right__name\">{{data.user.nick_name}}</div>\n                        </a>\n\n                        <div v-if=\"resType == 'history'\" class=\"item-right__btn item-right__unmark\" @click.prevent=\"delHistory(data.catalog_id)\">删除记录</div>\n                        <div v-if=\"resType == 'mark' && data.owner != 1 && data.is_collected == 1\" class=\"item-right__btn item-right__unmark\" @click.prevent=\"delFavorites\">取消收藏</div>\n                        <div v-if=\"resType == 'search' && data.owner != 1 && data.is_collected != 1\" class=\"item-right__btn item-right__mark\">加入收藏</div>\n                        <a v-if=\"resType == 'author' && data.owner == 1\" class=\"item-right__btn item-right__add\" :href=\"'./article.edit.html?catalog_id='+ data.catalog_id + '&chapter_id=-1'\">添加章节</a>\n                        <div v-if=\"resType == 'author' && data.owner == 1\" class=\"item-right__btn item-right__del\" @click.stop.prevent=\"remove(data.catalog_id)\">删除作品</div>\n                    </div>\n                </div>\n            </a>\n        </div>\n    </div>\n    <Empty v-if=\"article.count <= 0\" />\n</div>\n\n<div v-if=\"loadType == 'more' && article.count != 0\" class=\"list-more\">\n    <div v-if=\"article.more == 1 && !article.load\" class=\"btn-more-before\">{{user.isLogin ? '加载更多' : '登录查看更多'}}</div>\n    <div v-else-if=\"article.more == 1\" class=\"btn-more-loading\"><em></em><span>加载中...</span></div>\n    <div v-else class=\"btn-more-end\"><em></em><span>没有更多</span></div>\n</div>\n\n<Page v-if=\"loadType != 'more'\"\n    class=\"list-pages\"\n    :count=\"article.count\" \n    :length=\"pageSize\"\n    :index=\"pageIndex\"\n    @page_switch=\"pageSwitch\"\n/>\n\n</div>\n</template>\n\n<script>\nimport {mapState} from 'vuex'\nimport avatar from '../common/images/img/avatar.png';\nexport default {\n    data () {\n        return {\n            avatar: avatar,\n            labelTag: '',\n            subMoreShow: false,\n            query: '', // 模糊查询文字\n            pageIndex: 1, //页数,默认不传查询第一页\n            pageSize: 5, //每页数量 默认10\n        }\n    },\n    props: ['resType', 'loadType', 'userType', 'catalog_type'],\n    computed: mapState({\n        article: state => state.opus.article,\n        tag: state => state.opus.category,\n        user: state => state.user.info\n    }),\n    methods: {\n        pageSwitch (pageIndex) {\n            if (this.pageIndex == pageIndex) {\n                return false;\n            }\n            this.pageIndex = pageIndex;\n            this.getList();\n        },\n        subMoreSwitch () {\n            this.subMoreShow = !this.subMoreShow;\n        },\n        remove (catalogId){\n            var that = this;\n            this.$store.dispatch('bubble_showBubble', {\n                show: true,\n                type: 'warn',\n                warn: {\n                    title: '确定要删除?',\n                    content: '删除后将无法恢复，请谨慎处理',\n                    comfireFn: function(){\n                        that.delCatalog(catalogId);\n                    }\n                },\n            })\n        },\n        getCatalogList (type){\n            // 未登录处理\n            /*if (!this.user.isLogin && this.resType != 'index') {\n                console.log('----error----on login, getCatalogList');\n                return false;\n            }*/\n            this.$store.dispatch('opus_getCatalogList', {\n                \"type\": type || this.loadType || '',\n                \"params\": {\n                    \"pagination\": \"1\",\n                    \"page\": this.pageIndex, //页数,默认不传查询第一页\n                    \"pageSize\": this.pageSize //每页数量 默认10\n                },\n                \"body\": {\n                    \"label\": this.resType == 'page' ? this.labelTag : '', //标签，\n                    \"catalog_type\": this.catalog_type, // 0 普通（默认） 1 热门 2 优秀 如果没有此参数则查询所有\n                    \"user_id\": this.userType == 'user_id' ? this.user_id : '',\n                    \"fuzzy_query\": this.query || '' // 模糊查询文字\n                }\n            }).then( res => {\n                this.$emit('article_count', this.article.count);\n\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            })\n        },\n        getMyCatalogList (){\n            // 未登录处理\n            if (!this.user.isLogin && this.resType != 'index') {\n                console.log('----error----on login, getCatalogList');\n                return false;\n            }\n            this.$store.dispatch('opus_getMyCatalogList', {\n                \"pagination\": \"1\",\n                \"page\": this.pageIndex, //页数,默认不传查询第一页\n                \"pageSize\": this.pageSize //每页数量 默认10\n            }).then( res => {\n                this.$emit('article_count', this.article.count);\n\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            })\n        },\n        getFavoritesList (){\n            this.$store.dispatch('opus_getFavoritesList', {\n                \"pagination\": \"1\",\n                \"page\": this.pageIndex, //页数,默认不传查询第一页\n                \"pageSize\": this.pageSize //每页数量 默认10\n            }).then( res => {\n                // todo\n                \n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            })\n        },\n        getMore (){\n            this.pageIndex++;\n            this.getList();\n        },\n        getList (){\n            if (this.resType == 'mark') {\n                this.getFavoritesList();\n            } else if (this.resType == 'history') {\n                // 从缓存中获取\n                var cache_history = this.$version.history;\n                var history = this.$cache.getStore(cache_history.key, cache_history.version);\n                var lists = history.slice((this.pageIndex-1)*this.pageSize, this.pageSize*this.pageIndex);\n                this.$store.dispatch('opus_setArticle', {\n                    lists: lists,\n                    count: history.length\n                }).then( res => {\n                    this.$emit('article_count', this.article.count);\n                })\n            } else if (this.user.uid && this.user.uid == this.user_id) {\n                this.getMyCatalogList();\n            } else {\n                this.getCatalogList();\n            }\n        },\n        delFavorites (e){\n            var catalogId = $(e.currentTarget).parents('.c-artice-item-wrap').data('catalog_id');\n            this.$store.dispatch('opus_delFavorites', {\n                catalogId: catalogId\n            }).then( res => {\n                this.getList();\n\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            })\n        },\n        delCatalog (catalogId){\n            this.$store.dispatch('opus_delCatalog', {\n                \"catalogId\": catalogId\n            }).then( res => {\n               this.getCatalogList();\n\n               this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        delHistory (catalog_id){\n            var cache_history = this.$version.history;\n            var lists = this.$cache.getStore(cache_history.key, cache_history.version);\n            for(var i = 0, len = lists.length; i < len; i++) {\n                if (lists[i].catalog_id == catalog_id) {\n                    lists.splice(i, 1);\n                    break;\n                }\n            }\n            this.$cache.setStore(cache_history.key, lists, cache_history.version, cache_history.time);\n            this.getList();\n        }\n    },\n    created (){\n        this.$eventHub.$on('header_serach', option => {\n            if (this.query == option.query) {\n                return false;\n            }\n            this.query = option.query;\n            this.getList();\n        });\n\n        this.$eventHub.$on('author_chapter_list_refresh', option => {\n            this.getList();\n        })\n    }, \n    mounted (){\n        // 加载更多\n        $(window).on('scroll', e => {\n            if ($('.btn-more-before').length <= 0) {\n                return false;\n            }\n            var top = $(window).scrollTop();\n            var height = $(window).height();\n            var _top = $('.btn-more-before').offset().top;\n            if (_top + 20 <= top + height) {\n                this.getMore();    \n            }\n        })\n\n        // 获取url的参数\n        this.query = decodeURIComponent(this.$url.getUrlParam('query'));\n        this.user_id = this.$url.getUrlParam('user_id');\n        this.labelTag = this.$url.getUrlParam('labelTag');\n\n        // watch tags change\n        this.$watch('tag.index', function(newVal, oldVal){\n            this.pageIndex = 1;\n            this.getCatalogList('page');\n        })\n\n        // 获取文章列表\n        if (!this.labelTag && this.resType == 'page') {\n            this.$store.dispatch('bubble_showBubble', {\n                show: true,\n                type: 'top',\n                top: {\n                    status: 'z-warn',\n                    msg: '系统繁忙'\n                }\n            })\n            return false;\n        }\n\n        this.getList();    \n    }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// article.list.vue?bc549e1a","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-chapter-list\"\n  }, [_c('div', {\n    staticClass: \"c-chapter-list-wrap\"\n  }, [_vm._l((_vm.chapter.lists), function(data, index) {\n    return _c('div', {\n      staticClass: \"c-chapter-list-item\"\n    }, [_c('a', {\n      staticClass: \"link\",\n      attrs: {\n        \"href\": './article.read.html?catalog_id=' + _vm.catalog_id + '&chapter_id=' + data.chapter_id\n      }\n    }, [_c('div', {\n      staticClass: \"c-chapter-list__top\"\n    }, [_c('div', {\n      staticClass: \"top-title\"\n    }, [_vm._v(_vm._s(data.chapter_title))]), _vm._v(\" \"), (data.isNew) ? _c('div', {\n      staticClass: \"top-new\"\n    }, [_vm._v(\"·new\")]) : _vm._e()]), _vm._v(\" \"), _c('div', {\n      staticClass: \"c-chapter-list__bottom\"\n    }, [_c('div', {\n      staticClass: \"bottom-time\"\n    }, [_vm._v(_vm._s(data.publish_date))]), _vm._v(\" \"), (data.owner == 1 && data.chapter_status == 1) ? _c('a', {\n      staticClass: \"bottom-manger-item bottom-manger-edit\",\n      attrs: {\n        \"href\": './article.edit.html?catalog_id=' + _vm.catalog_id + '&chapter_id=' + data.chapter_id\n      }\n    }, [_vm._v(\"修改信息\")]) : _vm._e(), _vm._v(\" \"), (data.owner == 1) ? _c('a', {\n      staticClass: \"bottom-manger-item bottom-manger-remove\",\n      attrs: {\n        \"href\": \"javascript:void(0);\"\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.remove(data.chapter_id)\n        }\n      }\n    }, [_vm._v(\"删除章节\")]) : _vm._e(), _vm._v(\" \"), _c('div', {\n      staticClass: \"bottom-follow\"\n    }, [_c('em'), _c('span', [_vm._v(_vm._s(data.praise_count))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"bottom-comment\"\n    }, [_c('em'), _c('span', [_vm._v(_vm._s(data.comment_count))])])]), _vm._v(\" \"), (data.hasHistory) ? _c('div', {\n      staticClass: \"c-chapter-list__history\"\n    }, [_c('a', {\n      attrs: {\n        \"href\": \"#none\"\n      }\n    })]) : _vm._e(), _vm._v(\" \"), _c('div', {\n      staticClass: \"bottom\"\n    })])])\n  }), _vm._v(\" \"), (_vm.chapter.count <= 0) ? _c('Empty') : _vm._e()], 2), _vm._v(\" \"), _c('Page', {\n    attrs: {\n      \"count\": _vm.chapter.count,\n      \"length\": _vm.pageSize,\n      \"index\": _vm.pageIndex\n    },\n    on: {\n      \"page_switch\": _vm.pageSwitch\n    }\n  })], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-7e6bd524\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/component/chapter.list.vue\n// module id = 1na0\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return (_vm.data.show) ? _c('div', {\n    staticClass: \"c-feedback\"\n  }, [_c('div', {\n    staticClass: \"c-feedback-wrap\"\n  }, [_c('div', {\n    staticClass: \"content-form\"\n  }, [_c('div', {\n    staticClass: \"content-textarea\",\n    class: {\n      'z-error': !_vm.content_reg\n    }\n  }, [(!_vm.content_reg) ? _c('div', {\n    staticClass: \"c-dialog__tip\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.content_reg_con))])]) : _vm._e(), _vm._v(\" \"), _c('textarea', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.content),\n      expression: \"content\"\n    }],\n    attrs: {\n      \"placeholder\": \"写下你的宝贵建议...\"\n    },\n    domProps: {\n      \"value\": (_vm.content)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.content = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"content-input\",\n    class: {\n      'z-error': !_vm.contact_reg\n    }\n  }, [(!_vm.contact_reg) ? _c('div', {\n    staticClass: \"c-dialog__tip\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.contact_reg_con))])]) : _vm._e(), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.contact),\n      expression: \"contact\"\n    }],\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": \"留下你的联系方式...\"\n    },\n    domProps: {\n      \"value\": (_vm.contact)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.contact = $event.target.value\n      }\n    }\n  })])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"content-btn\"\n  }, [_c('div', {\n    staticClass: \"content-btn-item content-btn-cancel\",\n    on: {\n      \"click\": _vm.close\n    }\n  }, [_vm._v(\"取消\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"content-btn-item content-btn-submit\",\n    on: {\n      \"click\": _vm.send\n    }\n  }, [_vm._v(\"发送\")])])])]) : _vm._e()\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-2094868a\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/component/feedback.vue\n// module id = 28R+\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _vm._m(0)\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-empty\"\n  }, [_c('div', {\n    staticClass: \"c-empty-img\"\n  }, [_c('img', {\n    attrs: {\n      \"src\": require(\"../common/images/icon/empty.png\")\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"c-empty-text\"\n  }, [_vm._v(\"没有相关结果\")])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-0415313a\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/component/content.empty.vue\n// module id = 2Gq5\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-menu-left\"\n  }, _vm._l((_vm.data), function(item) {\n    return _c('div', {\n      staticClass: \"item\",\n      class: {\n        'z-on': item.isActive\n      }\n    }, [_c('a', {\n      attrs: {\n        \"href\": item.url || 'javascript:void(0);'\n      }\n    }, [_c('span', {\n      staticClass: \"item__icon\"\n    }), _vm._v(\" \"), _c('span', {\n      staticClass: \"item__title\"\n    }, [_vm._v(_vm._s(item.title) + _vm._s(item.number ? '·' + item.number : ''))])])])\n  }))\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-ab7eccfe\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/component/menu.left.vue\n// module id = 2mP8\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-comment-info\"\n  }, [_c('div', {\n    staticClass: \"c-comment-info-wrap\"\n  }, [_vm._l((_vm.message.list), function(data) {\n    return _c('div', {\n      staticClass: \"c-comment-info-list\"\n    }, [_c('div', {\n      staticClass: \"c-comment-info__top\"\n    }, [_c('div', {\n      staticClass: \"top__img\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": data.message.sender.avatar_url || _vm.avatar\n      }\n    })]), _vm._v(\" \"), _c('div', {\n      staticClass: \"top__name\"\n    }, [_vm._v(_vm._s(data.message.sender.nick_name))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"top__time\"\n    }, [_vm._v(_vm._s(data.create_time))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"c-comment-info__content\"\n    }, [_vm._v(\"\\n            \" + _vm._s(data.message.content.content) + \"\\n        \")])])\n  }), _vm._v(\" \"), (_vm.message.count <= 0) ? _c('Empty', {\n    staticClass: \"content-empty\"\n  }) : _vm._e()], 2), _vm._v(\" \"), _c('Page', {\n    attrs: {\n      \"count\": _vm.message.count,\n      \"length\": _vm.pageSize,\n      \"index\": _vm.pageIndex\n    },\n    on: {\n      \"page_switch\": _vm.pageSwitch\n    }\n  })], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-29e2c362\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/component/comment.info.vue\n// module id = 36Po\n// module chunks = 0","/**\n * Plupload - multi-runtime File Uploader\n * v2.1.2\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n *\n * Date: 2014-05-14\n */\n/**\n * Plupload.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/*global mOxie:true */\nimport moxie from './moxie'\n;(function(window, o, undef) {\n\nvar delay = window.setTimeout\n, fileFilters = {}\n;\n\n// convert plupload features to caps acceptable by mOxie\nfunction normalizeCaps(settings) {\t\t\n\tvar features = settings.required_features, caps = {};\n\n\tfunction resolve(feature, value, strict) {\n\t\t// Feature notation is deprecated, use caps (this thing here is required for backward compatibility)\n\t\tvar map = { \n\t\t\tchunks: 'slice_blob',\n\t\t\tjpgresize: 'send_binary_string',\n\t\t\tpngresize: 'send_binary_string',\n\t\t\tprogress: 'report_upload_progress',\n\t\t\tmulti_selection: 'select_multiple',\n\t\t\tdragdrop: 'drag_and_drop',\n\t\t\tdrop_element: 'drag_and_drop',\n\t\t\theaders: 'send_custom_headers',\n\t\t\turlstream_upload: 'send_binary_string',\n\t\t\tcanSendBinary: 'send_binary',\n\t\t\ttriggerDialog: 'summon_file_dialog'\n\t\t};\n\n\t\tif (map[feature]) {\n\t\t\tcaps[map[feature]] = value;\n\t\t} else if (!strict) {\n\t\t\tcaps[feature] = value;\n\t\t}\n\t}\n\n\tif (typeof(features) === 'string') {\n\t\tplupload.each(features.split(/\\s*,\\s*/), function(feature) {\n\t\t\tresolve(feature, true);\n\t\t});\n\t} else if (typeof(features) === 'object') {\n\t\tplupload.each(features, function(value, feature) {\n\t\t\tresolve(feature, value);\n\t\t});\n\t} else if (features === true) {\n\t\t// check settings for required features\n\t\tif (settings.chunk_size > 0) {\n\t\t\tcaps.slice_blob = true;\n\t\t}\n\n\t\tif (settings.resize.enabled || !settings.multipart) {\n\t\t\tcaps.send_binary_string = true;\n\t\t}\n\t\t\n\t\tplupload.each(settings, function(value, feature) {\n\t\t\tresolve(feature, !!value, true); // strict check\n\t\t});\n\t}\n\t\n\treturn caps;\n}\n\n/** \n * @module plupload\t\n * @static\n */\nvar plupload = {\n\t/**\n\t * Plupload version will be replaced on build.\n\t *\n\t * @property VERSION\n\t * @for Plupload\n\t * @static\n\t * @final\n\t */\n\tVERSION : '2.1.2',\n\n\t/**\n\t * Inital state of the queue and also the state ones it's finished all it's uploads.\n\t *\n\t * @property STOPPED\n\t * @static\n\t * @final\n\t */\n\tSTOPPED : 1,\n\n\t/**\n\t * Upload process is running\n\t *\n\t * @property STARTED\n\t * @static\n\t * @final\n\t */\n\tSTARTED : 2,\n\n\t/**\n\t * File is queued for upload\n\t *\n\t * @property QUEUED\n\t * @static\n\t * @final\n\t */\n\tQUEUED : 1,\n\n\t/**\n\t * File is being uploaded\n\t *\n\t * @property UPLOADING\n\t * @static\n\t * @final\n\t */\n\tUPLOADING : 2,\n\n\t/**\n\t * File has failed to be uploaded\n\t *\n\t * @property FAILED\n\t * @static\n\t * @final\n\t */\n\tFAILED : 4,\n\n\t/**\n\t * File has been uploaded successfully\n\t *\n\t * @property DONE\n\t * @static\n\t * @final\n\t */\n\tDONE : 5,\n\n\t// Error constants used by the Error event\n\n\t/**\n\t * Generic error for example if an exception is thrown inside Silverlight.\n\t *\n\t * @property GENERIC_ERROR\n\t * @static\n\t * @final\n\t */\n\tGENERIC_ERROR : -100,\n\n\t/**\n\t * HTTP transport error. For example if the server produces a HTTP status other than 200.\n\t *\n\t * @property HTTP_ERROR\n\t * @static\n\t * @final\n\t */\n\tHTTP_ERROR : -200,\n\n\t/**\n\t * Generic I/O error. For example if it wasn't possible to open the file stream on local machine.\n\t *\n\t * @property IO_ERROR\n\t * @static\n\t * @final\n\t */\n\tIO_ERROR : -300,\n\n\t/**\n\t * @property SECURITY_ERROR\n\t * @static\n\t * @final\n\t */\n\tSECURITY_ERROR : -400,\n\n\t/**\n\t * Initialization error. Will be triggered if no runtime was initialized.\n\t *\n\t * @property INIT_ERROR\n\t * @static\n\t * @final\n\t */\n\tINIT_ERROR : -500,\n\n\t/**\n\t * File size error. If the user selects a file that is too large it will be blocked and an error of this type will be triggered.\n\t *\n\t * @property FILE_SIZE_ERROR\n\t * @static\n\t * @final\n\t */\n\tFILE_SIZE_ERROR : -600,\n\n\t/**\n\t * File extension error. If the user selects a file that isn't valid according to the filters setting.\n\t *\n\t * @property FILE_EXTENSION_ERROR\n\t * @static\n\t * @final\n\t */\n\tFILE_EXTENSION_ERROR : -601,\n\n\t/**\n\t * Duplicate file error. If prevent_duplicates is set to true and user selects the same file again.\n\t *\n\t * @property FILE_DUPLICATE_ERROR\n\t * @static\n\t * @final\n\t */\n\tFILE_DUPLICATE_ERROR : -602,\n\n\t/**\n\t * Runtime will try to detect if image is proper one. Otherwise will throw this error.\n\t *\n\t * @property IMAGE_FORMAT_ERROR\n\t * @static\n\t * @final\n\t */\n\tIMAGE_FORMAT_ERROR : -700,\n\n\t/**\n\t * While working on files runtime may run out of memory and will throw this error.\n\t *\n\t * @since 2.1.2\n\t * @property MEMORY_ERROR\n\t * @static\n\t * @final\n\t */\n\tMEMORY_ERROR : -701,\n\n\t/**\n\t * Each runtime has an upper limit on a dimension of the image it can handle. If bigger, will throw this error.\n\t *\n\t * @property IMAGE_DIMENSIONS_ERROR\n\t * @static\n\t * @final\n\t */\n\tIMAGE_DIMENSIONS_ERROR : -702,\n\n\t/**\n\t * Mime type lookup table.\n\t *\n\t * @property mimeTypes\n\t * @type Object\n\t * @final\n\t */\n\tmimeTypes : o.mimes,\n\n\t/**\n\t * In some cases sniffing is the only way around :(\n\t */\n\tua: o.ua,\n\n\t/**\n\t * Gets the true type of the built-in object (better version of typeof).\n\t * @credits Angus Croll (http://javascriptweblog.wordpress.com/)\n\t *\n\t * @method typeOf\n\t * @static\n\t * @param {Object} o Object to check.\n\t * @return {String} Object [[Class]]\n\t */\n\ttypeOf: o.typeOf,\n\n\t/**\n\t * Extends the specified object with another object.\n\t *\n\t * @method extend\n\t * @static\n\t * @param {Object} target Object to extend.\n\t * @param {Object..} obj Multiple objects to extend with.\n\t * @return {Object} Same as target, the extended object.\n\t */\n\textend : o.extend,\n\n\t/**\n\t * Generates an unique ID. This is 99.99% unique since it takes the current time and 5 random numbers.\n\t * The only way a user would be able to get the same ID is if the two persons at the same exact milisecond manages\n\t * to get 5 the same random numbers between 0-65535 it also uses a counter so each call will be guaranteed to be page unique.\n\t * It's more probable for the earth to be hit with an ansteriod. You can also if you want to be 100% sure set the plupload.guidPrefix property\n\t * to an user unique key.\n\t *\n\t * @method guid\n\t * @static\n\t * @return {String} Virtually unique id.\n\t */\n\tguid : o.guid,\n\n\t/**\n\t * Get array of DOM Elements by their ids.\n\t * \n\t * @method get\n\t * @for Utils\n\t * @param {String} id Identifier of the DOM Element\n\t * @return {Array}\n\t*/\n\tget : function get(ids) {\n\t\tvar els = [], el;\n\n\t\tif (o.typeOf(ids) !== 'array') {\n\t\t\tids = [ids];\n\t\t}\n\n\t\tvar i = ids.length;\n\t\twhile (i--) {\n\t\t\tel = o.get(ids[i]);\n\t\t\tif (el) {\n\t\t\t\tels.push(el);\n\t\t\t}\n\t\t}\n\n\t\treturn els.length ? els : null;\n\t},\n\n\t/**\n\t * Executes the callback function for each item in array/object. If you return false in the\n\t * callback it will break the loop.\n\t *\n\t * @method each\n\t * @static\n\t * @param {Object} obj Object to iterate.\n\t * @param {function} callback Callback function to execute for each item.\n\t */\n\teach : o.each,\n\n\t/**\n\t * Returns the absolute x, y position of an Element. The position will be returned in a object with x, y fields.\n\t *\n\t * @method getPos\n\t * @static\n\t * @param {Element} node HTML element or element id to get x, y position from.\n\t * @param {Element} root Optional root element to stop calculations at.\n\t * @return {object} Absolute position of the specified element object with x, y fields.\n\t */\n\tgetPos : o.getPos,\n\n\t/**\n\t * Returns the size of the specified node in pixels.\n\t *\n\t * @method getSize\n\t * @static\n\t * @param {Node} node Node to get the size of.\n\t * @return {Object} Object with a w and h property.\n\t */\n\tgetSize : o.getSize,\n\n\t/**\n\t * Encodes the specified string.\n\t *\n\t * @method xmlEncode\n\t * @static\n\t * @param {String} s String to encode.\n\t * @return {String} Encoded string.\n\t */\n\txmlEncode : function(str) {\n\t\tvar xmlEncodeChars = {'<' : 'lt', '>' : 'gt', '&' : 'amp', '\"' : 'quot', '\\'' : '#39'}, xmlEncodeRegExp = /[<>&\\\"\\']/g;\n\n\t\treturn str ? ('' + str).replace(xmlEncodeRegExp, function(chr) {\n\t\t\treturn xmlEncodeChars[chr] ? '&' + xmlEncodeChars[chr] + ';' : chr;\n\t\t}) : str;\n\t},\n\n\t/**\n\t * Forces anything into an array.\n\t *\n\t * @method toArray\n\t * @static\n\t * @param {Object} obj Object with length field.\n\t * @return {Array} Array object containing all items.\n\t */\n\ttoArray : o.toArray,\n\n\t/**\n\t * Find an element in array and return it's index if present, otherwise return -1.\n\t *\n\t * @method inArray\n\t * @static\n\t * @param {mixed} needle Element to find\n\t * @param {Array} array\n\t * @return {Int} Index of the element, or -1 if not found\n\t */\n\tinArray : o.inArray,\n\n\t/**\n\t * Extends the language pack object with new items.\n\t *\n\t * @method addI18n\n\t * @static\n\t * @param {Object} pack Language pack items to add.\n\t * @return {Object} Extended language pack object.\n\t */\n\taddI18n : o.addI18n,\n\n\t/**\n\t * Translates the specified string by checking for the english string in the language pack lookup.\n\t *\n\t * @method translate\n\t * @static\n\t * @param {String} str String to look for.\n\t * @return {String} Translated string or the input string if it wasn't found.\n\t */\n\ttranslate : o.translate,\n\n\t/**\n\t * Checks if object is empty.\n\t *\n\t * @method isEmptyObj\n\t * @static\n\t * @param {Object} obj Object to check.\n\t * @return {Boolean}\n\t */\n\tisEmptyObj : o.isEmptyObj,\n\n\t/**\n\t * Checks if specified DOM element has specified class.\n\t *\n\t * @method hasClass\n\t * @static\n\t * @param {Object} obj DOM element like object to add handler to.\n\t * @param {String} name Class name\n\t */\n\thasClass : o.hasClass,\n\n\t/**\n\t * Adds specified className to specified DOM element.\n\t *\n\t * @method addClass\n\t * @static\n\t * @param {Object} obj DOM element like object to add handler to.\n\t * @param {String} name Class name\n\t */\n\taddClass : o.addClass,\n\n\t/**\n\t * Removes specified className from specified DOM element.\n\t *\n\t * @method removeClass\n\t * @static\n\t * @param {Object} obj DOM element like object to add handler to.\n\t * @param {String} name Class name\n\t */\n\tremoveClass : o.removeClass,\n\n\t/**\n\t * Returns a given computed style of a DOM element.\n\t *\n\t * @method getStyle\n\t * @static\n\t * @param {Object} obj DOM element like object.\n\t * @param {String} name Style you want to get from the DOM element\n\t */\n\tgetStyle : o.getStyle,\n\n\t/**\n\t * Adds an event handler to the specified object and store reference to the handler\n\t * in objects internal Plupload registry (@see removeEvent).\n\t *\n\t * @method addEvent\n\t * @static\n\t * @param {Object} obj DOM element like object to add handler to.\n\t * @param {String} name Name to add event listener to.\n\t * @param {Function} callback Function to call when event occurs.\n\t * @param {String} (optional) key that might be used to add specifity to the event record.\n\t */\n\taddEvent : o.addEvent,\n\n\t/**\n\t * Remove event handler from the specified object. If third argument (callback)\n\t * is not specified remove all events with the specified name.\n\t *\n\t * @method removeEvent\n\t * @static\n\t * @param {Object} obj DOM element to remove event listener(s) from.\n\t * @param {String} name Name of event listener to remove.\n\t * @param {Function|String} (optional) might be a callback or unique key to match.\n\t */\n\tremoveEvent: o.removeEvent,\n\n\t/**\n\t * Remove all kind of events from the specified object\n\t *\n\t * @method removeAllEvents\n\t * @static\n\t * @param {Object} obj DOM element to remove event listeners from.\n\t * @param {String} (optional) unique key to match, when removing events.\n\t */\n\tremoveAllEvents: o.removeAllEvents,\n\n\t/**\n\t * Cleans the specified name from national characters (diacritics). The result will be a name with only a-z, 0-9 and _.\n\t *\n\t * @method cleanName\n\t * @static\n\t * @param {String} s String to clean up.\n\t * @return {String} Cleaned string.\n\t */\n\tcleanName : function(name) {\n\t\tvar i, lookup;\n\n\t\t// Replace diacritics\n\t\tlookup = [\n\t\t\t/[\\300-\\306]/g, 'A', /[\\340-\\346]/g, 'a',\n\t\t\t/\\307/g, 'C', /\\347/g, 'c',\n\t\t\t/[\\310-\\313]/g, 'E', /[\\350-\\353]/g, 'e',\n\t\t\t/[\\314-\\317]/g, 'I', /[\\354-\\357]/g, 'i',\n\t\t\t/\\321/g, 'N', /\\361/g, 'n',\n\t\t\t/[\\322-\\330]/g, 'O', /[\\362-\\370]/g, 'o',\n\t\t\t/[\\331-\\334]/g, 'U', /[\\371-\\374]/g, 'u'\n\t\t];\n\n\t\tfor (i = 0; i < lookup.length; i += 2) {\n\t\t\tname = name.replace(lookup[i], lookup[i + 1]);\n\t\t}\n\n\t\t// Replace whitespace\n\t\tname = name.replace(/\\s+/g, '_');\n\n\t\t// Remove anything else\n\t\tname = name.replace(/[^a-z0-9_\\-\\.]+/gi, '');\n\n\t\treturn name;\n\t},\n\n\t/**\n\t * Builds a full url out of a base URL and an object with items to append as query string items.\n\t *\n\t * @method buildUrl\n\t * @static\n\t * @param {String} url Base URL to append query string items to.\n\t * @param {Object} items Name/value object to serialize as a querystring.\n\t * @return {String} String with url + serialized query string items.\n\t */\n\tbuildUrl : function(url, items) {\n\t\tvar query = '';\n\n\t\tplupload.each(items, function(value, name) {\n\t\t\tquery += (query ? '&' : '') + encodeURIComponent(name) + '=' + encodeURIComponent(value);\n\t\t});\n\n\t\tif (query) {\n\t\t\turl += (url.indexOf('?') > 0 ? '&' : '?') + query;\n\t\t}\n\n\t\treturn url;\n\t},\n\n\t/**\n\t * Formats the specified number as a size string for example 1024 becomes 1 KB.\n\t *\n\t * @method formatSize\n\t * @static\n\t * @param {Number} size Size to format as string.\n\t * @return {String} Formatted size string.\n\t */\n\tformatSize : function(size) {\n\n\t\tif (size === undef || /\\D/.test(size)) {\n\t\t\treturn plupload.translate('N/A');\n\t\t}\n\n\t\tfunction round(num, precision) {\n\t\t\treturn Math.round(num * Math.pow(10, precision)) / Math.pow(10, precision);\n\t\t}\n\n\t\tvar boundary = Math.pow(1024, 4);\n\n\t\t// TB\n\t\tif (size > boundary) {\n\t\t\treturn round(size / boundary, 1) + \" \" + plupload.translate('tb');\n\t\t}\n\n\t\t// GB\n\t\tif (size > (boundary/=1024)) {\n\t\t\treturn round(size / boundary, 1) + \" \" + plupload.translate('gb');\n\t\t}\n\n\t\t// MB\n\t\tif (size > (boundary/=1024)) {\n\t\t\treturn round(size / boundary, 1) + \" \" + plupload.translate('mb');\n\t\t}\n\n\t\t// KB\n\t\tif (size > 1024) {\n\t\t\treturn Math.round(size / 1024) + \" \" + plupload.translate('kb');\n\t\t}\n\n\t\treturn size + \" \" + plupload.translate('b');\n\t},\n\n\n\t/**\n\t * Parses the specified size string into a byte value. For example 10kb becomes 10240.\n\t *\n\t * @method parseSize\n\t * @static\n\t * @param {String|Number} size String to parse or number to just pass through.\n\t * @return {Number} Size in bytes.\n\t */\n\tparseSize : o.parseSizeStr,\n\n\n\t/**\n\t * A way to predict what runtime will be choosen in the current environment with the\n\t * specified settings.\n\t *\n\t * @method predictRuntime\n\t * @static\n\t * @param {Object|String} config Plupload settings to check\n\t * @param {String} [runtimes] Comma-separated list of runtimes to check against\n\t * @return {String} Type of compatible runtime\n\t */\n\tpredictRuntime : function(config, runtimes) {\n\t\tvar up, runtime;\n\n\t\tup = new plupload.Uploader(config);\n\t\truntime = o.Runtime.thatCan(up.getOption().required_features, runtimes || config.runtimes);\n\t\tup.destroy();\n\t\treturn runtime;\n\t},\n\n\t/**\n\t * Registers a filter that will be executed for each file added to the queue.\n\t * If callback returns false, file will not be added.\n\t *\n\t * Callback receives two arguments: a value for the filter as it was specified in settings.filters\n\t * and a file to be filtered. Callback is executed in the context of uploader instance.\n\t *\n\t * @method addFileFilter\n\t * @static\n\t * @param {String} name Name of the filter by which it can be referenced in settings.filters\n\t * @param {String} cb Callback - the actual routine that every added file must pass\n\t */\n\taddFileFilter: function(name, cb) {\n\t\tfileFilters[name] = cb;\n\t}\n};\n\n\nplupload.addFileFilter('mime_types', function(filters, file, cb) {\n\tif (filters.length && !filters.regexp.test(file.name)) {\n\t\tthis.trigger('Error', {\n\t\t\tcode : plupload.FILE_EXTENSION_ERROR,\n\t\t\tmessage : plupload.translate('File extension error.'),\n\t\t\tfile : file\n\t\t});\n\t\tcb(false);\n\t} else {\n\t\tcb(true);\n\t}\n});\n\n\nplupload.addFileFilter('max_file_size', function(maxSize, file, cb) {\n\tvar undef;\n\n\tmaxSize = plupload.parseSize(maxSize);\n\n\t// Invalid file size\n\tif (file.size !== undef && maxSize && file.size > maxSize) {\n\t\tthis.trigger('Error', {\n\t\t\tcode : plupload.FILE_SIZE_ERROR,\n\t\t\tmessage : plupload.translate('File size error.'),\n\t\t\tfile : file\n\t\t});\n\t\tcb(false);\n\t} else {\n\t\tcb(true);\n\t}\n});\n\n\nplupload.addFileFilter('prevent_duplicates', function(value, file, cb) {\n\tif (value) {\n\t\tvar ii = this.files.length;\n\t\twhile (ii--) {\n\t\t\t// Compare by name and size (size might be 0 or undefined, but still equivalent for both)\n\t\t\tif (file.name === this.files[ii].name && file.size === this.files[ii].size) {\n\t\t\t\tthis.trigger('Error', {\n\t\t\t\t\tcode : plupload.FILE_DUPLICATE_ERROR,\n\t\t\t\t\tmessage : plupload.translate('Duplicate file error.'),\n\t\t\t\t\tfile : file\n\t\t\t\t});\n\t\t\t\tcb(false);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\tcb(true);\n});\n\n\n/**\n@class Uploader\n@constructor\n\n@param {Object} settings For detailed information about each option check documentation.\n\t@param {String|DOMElement} settings.browse_button id of the DOM element or DOM element itself to use as file dialog trigger.\n\t@param {String} settings.url URL of the server-side upload handler.\n\t@param {Number|String} [settings.chunk_size=0] Chunk size in bytes to slice the file into. Shorcuts with b, kb, mb, gb, tb suffixes also supported. `e.g. 204800 or \"204800b\" or \"200kb\"`. By default - disabled.\n\t@param {Boolean} [settings.send_chunk_number=true] Whether to send chunks and chunk numbers, or total and offset bytes.\n\t@param {String} [settings.container] id of the DOM element to use as a container for uploader structures. Defaults to document.body.\n\t@param {String|DOMElement} [settings.drop_element] id of the DOM element or DOM element itself to use as a drop zone for Drag-n-Drop.\n\t@param {String} [settings.file_data_name=\"file\"] Name for the file field in Multipart formated message.\n\t@param {Object} [settings.filters={}] Set of file type filters.\n\t\t@param {Array} [settings.filters.mime_types=[]] List of file types to accept, each one defined by title and list of extensions. `e.g. {title : \"Image files\", extensions : \"jpg,jpeg,gif,png\"}`. Dispatches `plupload.FILE_EXTENSION_ERROR`\n\t\t@param {String|Number} [settings.filters.max_file_size=0] Maximum file size that the user can pick, in bytes. Optionally supports b, kb, mb, gb, tb suffixes. `e.g. \"10mb\" or \"1gb\"`. By default - not set. Dispatches `plupload.FILE_SIZE_ERROR`.\n\t\t@param {Boolean} [settings.filters.prevent_duplicates=false] Do not let duplicates into the queue. Dispatches `plupload.FILE_DUPLICATE_ERROR`.\n\t@param {String} [settings.flash_swf_url] URL of the Flash swf.\n\t@param {Object} [settings.headers] Custom headers to send with the upload. Hash of name/value pairs.\n\t@param {Number} [settings.max_retries=0] How many times to retry the chunk or file, before triggering Error event.\n\t@param {Boolean} [settings.multipart=true] Whether to send file and additional parameters as Multipart formated message.\n\t@param {Object} [settings.multipart_params] Hash of key/value pairs to send with every file upload.\n\t@param {Boolean} [settings.multi_selection=true] Enable ability to select multiple files at once in file dialog.\n\t@param {String|Object} [settings.required_features] Either comma-separated list or hash of required features that chosen runtime should absolutely possess.\n\t@param {Object} [settings.resize] Enable resizng of images on client-side. Applies to `image/jpeg` and `image/png` only. `e.g. {width : 200, height : 200, quality : 90, crop: true}`\n\t\t@param {Number} [settings.resize.width] If image is bigger, it will be resized.\n\t\t@param {Number} [settings.resize.height] If image is bigger, it will be resized.\n\t\t@param {Number} [settings.resize.quality=90] Compression quality for jpegs (1-100).\n\t\t@param {Boolean} [settings.resize.crop=false] Whether to crop images to exact dimensions. By default they will be resized proportionally.\n\t@param {String} [settings.runtimes=\"html5,flash,silverlight,html4\"] Comma separated list of runtimes, that Plupload will try in turn, moving to the next if previous fails.\n\t@param {String} [settings.silverlight_xap_url] URL of the Silverlight xap.\n\t@param {Boolean} [settings.unique_names=false] If true will generate unique filenames for uploaded files.\n\t@param {Boolean} [settings.send_file_name=true] Whether to send file name as additional argument - 'name' (required for chunked uploads and some other cases where file name cannot be sent via normal ways).\n*/\nplupload.Uploader = function(options) {\n\t/**\n\t * Fires when the current RunTime has been initialized.\n\t *\n\t * @event Init\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t */\n\n\t/**\n\t * Fires after the init event incase you need to perform actions there.\n\t *\n\t * @event PostInit\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t */\n\n\t/**\n\t * Fires when the option is changed in via uploader.setOption().\n\t *\n\t * @event OptionChanged\n\t * @since 2.1\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {String} name Name of the option that was changed\n\t * @param {Mixed} value New value for the specified option\n\t * @param {Mixed} oldValue Previous value of the option\n\t */\n\n\t/**\n\t * Fires when the silverlight/flash or other shim needs to move.\n\t *\n\t * @event Refresh\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t */\n\n\t/**\n\t * Fires when the overall state is being changed for the upload queue.\n\t *\n\t * @event StateChanged\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t */\n\n\t/**\n\t * Fires when browse_button is clicked and browse dialog shows.\n\t *\n\t * @event Browse\n\t * @since 2.1.2\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t */\t\n\n\t/**\n\t * Fires for every filtered file before it is added to the queue.\n\t * \n\t * @event FileFiltered\n\t * @since 2.1\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {plupload.File} file Another file that has to be added to the queue.\n\t */\n\n\t/**\n\t * Fires when the file queue is changed. In other words when files are added/removed to the files array of the uploader instance.\n\t *\n\t * @event QueueChanged\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t */ \n\n\t/**\n\t * Fires after files were filtered and added to the queue.\n\t *\n\t * @event FilesAdded\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {Array} files Array of file objects that were added to queue by the user.\n\t */\n\n\t/**\n\t * Fires when file is removed from the queue.\n\t *\n\t * @event FilesRemoved\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {Array} files Array of files that got removed.\n\t */\n\n\t/**\n\t * Fires when just before a file is uploaded. This event enables you to override settings\n\t * on the uploader instance before the file is uploaded.\n\t *\n\t * @event BeforeUpload\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {plupload.File} file File to be uploaded.\n\t */\n\n\t/**\n\t * Fires when a file is to be uploaded by the runtime.\n\t *\n\t * @event UploadFile\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {plupload.File} file File to be uploaded.\n\t */\n\n\t/**\n\t * Fires while a file is being uploaded. Use this event to update the current file upload progress.\n\t *\n\t * @event UploadProgress\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {plupload.File} file File that is currently being uploaded.\n\t */\t\n\n\t/**\n\t * Fires when file chunk is uploaded.\n\t *\n\t * @event ChunkUploaded\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {plupload.File} file File that the chunk was uploaded for.\n\t * @param {Object} response Object with response properties.\n\t */\n\n\t/**\n\t * Fires when a file is successfully uploaded.\n\t *\n\t * @event FileUploaded\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {plupload.File} file File that was uploaded.\n\t * @param {Object} response Object with response properties.\n\t */\n\n\t/**\n\t * Fires when all files in a queue are uploaded.\n\t *\n\t * @event UploadComplete\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {Array} files Array of file objects that was added to queue/selected by the user.\n\t */\n\n\t/**\n\t * Fires when a error occurs.\n\t *\n\t * @event Error\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t * @param {Object} error Contains code, message and sometimes file and other details.\n\t */\n\n\t/**\n\t * Fires when destroy method is called.\n\t *\n\t * @event Destroy\n\t * @param {plupload.Uploader} uploader Uploader instance sending the event.\n\t */\n\tvar uid = plupload.guid()\n\t, settings\n\t, files = []\n\t, preferred_caps = {}\n\t, fileInputs = []\n\t, fileDrops = []\n\t, startTime\n\t, total\n\t, disabled = false\n\t, xhr\n\t;\n\n\n\t// Private methods\n\tfunction uploadNext() {\n\t\tvar file, count = 0, i;\n\n\t\tif (this.state == plupload.STARTED) {\n\t\t\t// Find first QUEUED file\n\t\t\tfor (i = 0; i < files.length; i++) {\n\t\t\t\tif (!file && files[i].status == plupload.QUEUED) {\n\t\t\t\t\tfile = files[i];\n\t\t\t\t\tif (this.trigger(\"BeforeUpload\", file)) {\n\t\t\t\t\t\tfile.status = plupload.UPLOADING;\n\t\t\t\t\t\tthis.trigger(\"UploadFile\", file);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// All files are DONE or FAILED\n\t\t\tif (count == files.length) {\n\t\t\t\tif (this.state !== plupload.STOPPED) {\n\t\t\t\t\tthis.state = plupload.STOPPED;\n\t\t\t\t\tthis.trigger(\"StateChanged\");\n\t\t\t\t}\n\t\t\t\tthis.trigger(\"UploadComplete\", files);\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction calcFile(file) {\n\t\tfile.percent = file.size > 0 ? Math.ceil(file.loaded / file.size * 100) : 100;\n\t\tcalc();\n\t}\n\n\n\tfunction calc() {\n\t\tvar i, file;\n\n\t\t// Reset stats\n\t\ttotal.reset();\n\n\t\t// Check status, size, loaded etc on all files\n\t\tfor (i = 0; i < files.length; i++) {\n\t\t\tfile = files[i];\n\n\t\t\tif (file.size !== undef) {\n\t\t\t\t// We calculate totals based on original file size\n\t\t\t\ttotal.size += file.origSize;\n\n\t\t\t\t// Since we cannot predict file size after resize, we do opposite and\n\t\t\t\t// interpolate loaded amount to match magnitude of total\n\t\t\t\ttotal.loaded += file.loaded * file.origSize / file.size;\n\t\t\t} else {\n\t\t\t\ttotal.size = undef;\n\t\t\t}\n\n\t\t\tif (file.status == plupload.DONE) {\n\t\t\t\ttotal.uploaded++;\n\t\t\t} else if (file.status == plupload.FAILED) {\n\t\t\t\ttotal.failed++;\n\t\t\t} else {\n\t\t\t\ttotal.queued++;\n\t\t\t}\n\t\t}\n\n\t\t// If we couldn't calculate a total file size then use the number of files to calc percent\n\t\tif (total.size === undef) {\n\t\t\ttotal.percent = files.length > 0 ? Math.ceil(total.uploaded / files.length * 100) : 0;\n\t\t} else {\n\t\t\ttotal.bytesPerSec = Math.ceil(total.loaded / ((+new Date() - startTime || 1) / 1000.0));\n\t\t\ttotal.percent = total.size > 0 ? Math.ceil(total.loaded / total.size * 100) : 0;\n\t\t}\n\t}\n\n\n\tfunction getRUID() {\n\t\tvar ctrl = fileInputs[0] || fileDrops[0];\n\t\tif (ctrl) {\n\t\t\treturn ctrl.getRuntime().uid;\n\t\t}\n\t\treturn false;\n\t}\n\n\n\tfunction runtimeCan(file, cap) {\n\t\tif (file.ruid) {\n\t\t\tvar info = o.Runtime.getInfo(file.ruid);\n\t\t\tif (info) {\n\t\t\t\treturn info.can(cap);\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\n\tfunction bindEventListeners() {\n\t\tthis.bind('FilesAdded FilesRemoved', function(up) {\n\t\t\tup.trigger('QueueChanged');\n\t\t\tup.refresh();\n\t\t});\n\n\t\tthis.bind('CancelUpload', onCancelUpload);\n\t\t\n\t\tthis.bind('BeforeUpload', onBeforeUpload);\n\n\t\tthis.bind('UploadFile', onUploadFile);\n\n\t\tthis.bind('UploadProgress', onUploadProgress);\n\n\t\tthis.bind('StateChanged', onStateChanged);\n\n\t\tthis.bind('QueueChanged', calc);\n\n\t\tthis.bind('Error', onError);\n\n\t\tthis.bind('FileUploaded', onFileUploaded);\n\n\t\tthis.bind('Destroy', onDestroy);\n\t}\n\n\n\tfunction initControls(settings, cb) {\n\t\tvar self = this, inited = 0, queue = [];\n\n\t\t// common settings\n\t\tvar options = {\n\t\t\truntime_order: settings.runtimes,\n\t\t\trequired_caps: settings.required_features,\n\t\t\tpreferred_caps: preferred_caps,\n\t\t\tswf_url: settings.flash_swf_url,\n\t\t\txap_url: settings.silverlight_xap_url\n\t\t};\n\n\t\t// add runtime specific options if any\n\t\tplupload.each(settings.runtimes.split(/\\s*,\\s*/), function(runtime) {\n\t\t\tif (settings[runtime]) {\n\t\t\t\toptions[runtime] = settings[runtime];\n\t\t\t}\n\t\t});\n\n\t\t// initialize file pickers - there can be many\n\t\tif (settings.browse_button) {\n\t\t\tplupload.each(settings.browse_button, function(el) {\n\t\t\t\tqueue.push(function(cb) {\n\t\t\t\t\tvar fileInput = new o.FileInput(plupload.extend({}, options, {\n\t\t\t\t\t\taccept: settings.filters.mime_types,\n\t\t\t\t\t\tname: settings.file_data_name,\n\t\t\t\t\t\tmultiple: settings.multi_selection,\n\t\t\t\t\t\tcontainer: settings.container,\n\t\t\t\t\t\tbrowse_button: el\n\t\t\t\t\t}));\n\n\t\t\t\t\tfileInput.onready = function() {\n\t\t\t\t\t\tvar info = o.Runtime.getInfo(this.ruid);\n\n\t\t\t\t\t\t// for backward compatibility\n\t\t\t\t\t\to.extend(self.features, {\n\t\t\t\t\t\t\tchunks: info.can('slice_blob'),\n\t\t\t\t\t\t\tmultipart: info.can('send_multipart'),\n\t\t\t\t\t\t\tmulti_selection: info.can('select_multiple')\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tinited++;\n\t\t\t\t\t\tfileInputs.push(this);\n\t\t\t\t\t\tcb();\n\t\t\t\t\t};\n\n\t\t\t\t\tfileInput.onchange = function() {\n\t\t\t\t\t\tself.addFile(this.files);\n\t\t\t\t\t};\n\n\t\t\t\t\tfileInput.bind('mouseenter mouseleave mousedown mouseup', function(e) {\n\t\t\t\t\t\tif (!disabled) {\n\t\t\t\t\t\t\tif (settings.browse_button_hover) {\n\t\t\t\t\t\t\t\tif ('mouseenter' === e.type) {\n\t\t\t\t\t\t\t\t\to.addClass(el, settings.browse_button_hover);\n\t\t\t\t\t\t\t\t} else if ('mouseleave' === e.type) {\n\t\t\t\t\t\t\t\t\to.removeClass(el, settings.browse_button_hover);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (settings.browse_button_active) {\n\t\t\t\t\t\t\t\tif ('mousedown' === e.type) {\n\t\t\t\t\t\t\t\t\to.addClass(el, settings.browse_button_active);\n\t\t\t\t\t\t\t\t} else if ('mouseup' === e.type) {\n\t\t\t\t\t\t\t\t\to.removeClass(el, settings.browse_button_active);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tfileInput.bind('mousedown', function() {\n\t\t\t\t\t\tself.trigger('Browse');\n\t\t\t\t\t});\n\n\t\t\t\t\tfileInput.bind('error runtimeerror', function() {\n\t\t\t\t\t\tfileInput = null;\n\t\t\t\t\t\tcb();\n\t\t\t\t\t});\n\n\t\t\t\t\tfileInput.init();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t// initialize drop zones\n\t\tif (settings.drop_element) {\n\t\t\tplupload.each(settings.drop_element, function(el) {\n\t\t\t\tqueue.push(function(cb) {\n\t\t\t\t\tvar fileDrop = new o.FileDrop(plupload.extend({}, options, {\n\t\t\t\t\t\tdrop_zone: el\n\t\t\t\t\t}));\n\n\t\t\t\t\tfileDrop.onready = function() {\n\t\t\t\t\t\tvar info = o.Runtime.getInfo(this.ruid);\n\n\t\t\t\t\t\tself.features.dragdrop = info.can('drag_and_drop'); // for backward compatibility\n\n\t\t\t\t\t\tinited++;\n\t\t\t\t\t\tfileDrops.push(this);\n\t\t\t\t\t\tcb();\n\t\t\t\t\t};\n\n\t\t\t\t\tfileDrop.ondrop = function() {\n\t\t\t\t\t\tself.addFile(this.files);\n\t\t\t\t\t};\n\n\t\t\t\t\tfileDrop.bind('error runtimeerror', function() {\n\t\t\t\t\t\tfileDrop = null;\n\t\t\t\t\t\tcb();\n\t\t\t\t\t});\n\n\t\t\t\t\tfileDrop.init();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\n\t\to.inSeries(queue, function() {\n\t\t\tif (typeof(cb) === 'function') {\n\t\t\t\tcb(inited);\n\t\t\t}\n\t\t});\n\t}\n\n\n\tfunction resizeImage(blob, params, cb) {\n\t\tvar img = new o.Image();\n\n\t\ttry {\n\t\t\timg.onload = function() {\n\t\t\t\t// no manipulation required if...\n\t\t\t\tif (params.width > this.width &&\n\t\t\t\t\tparams.height > this.height &&\n\t\t\t\t\tparams.quality === undef &&\n\t\t\t\t\tparams.preserve_headers &&\n\t\t\t\t\t!params.crop\n\t\t\t\t) {\n\t\t\t\t\tthis.destroy();\n\t\t\t\t\treturn cb(blob);\n\t\t\t\t}\n\t\t\t\t// otherwise downsize\n\t\t\t\timg.downsize(params.width, params.height, params.crop, params.preserve_headers);\n\t\t\t};\n\n\t\t\timg.onresize = function() {\n\t\t\t\tcb(this.getAsBlob(blob.type, params.quality));\n\t\t\t\tthis.destroy();\n\t\t\t};\n\n\t\t\timg.onerror = function() {\n\t\t\t\tcb(blob);\n\t\t\t};\n\n\t\t\timg.load(blob);\n\t\t} catch(ex) {\n\t\t\tcb(blob);\n\t\t}\n\t}\n\n\n\tfunction setOption(option, value, init) {\n\t\tvar self = this, reinitRequired = false;\n\n\t\tfunction _setOption(option, value, init) {\n\t\t\tvar oldValue = settings[option];\n\n\t\t\tswitch (option) {\n\t\t\t\tcase 'max_file_size':\n\t\t\t\t\tif (option === 'max_file_size') {\n\t\t\t\t\t\tsettings.max_file_size = settings.filters.max_file_size = value;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'chunk_size':\n\t\t\t\t\tif (value = plupload.parseSize(value)) {\n\t\t\t\t\t\tsettings[option] = value;\n\t\t\t\t\t\tsettings.send_file_name = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'multipart':\n\t\t\t\t\tsettings[option] = value;\n\t\t\t\t\tif (!value) {\n\t\t\t\t\t\tsettings.send_file_name = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'unique_names':\n\t\t\t\t\tsettings[option] = value;\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\tsettings.send_file_name = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'filters':\n\t\t\t\t\t// for sake of backward compatibility\n\t\t\t\t\tif (plupload.typeOf(value) === 'array') {\n\t\t\t\t\t\tvalue = {\n\t\t\t\t\t\t\tmime_types: value\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (init) {\n\t\t\t\t\t\tplupload.extend(settings.filters, value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsettings.filters = value;\n\t\t\t\t\t}\n\n\t\t\t\t\t// if file format filters are being updated, regenerate the matching expressions\n\t\t\t\t\tif (value.mime_types) {\n\t\t\t\t\t\tsettings.filters.mime_types.regexp = (function(filters) {\n\t\t\t\t\t\t\tvar extensionsRegExp = [];\n\n\t\t\t\t\t\t\tplupload.each(filters, function(filter) {\n\t\t\t\t\t\t\t\tplupload.each(filter.extensions.split(/,/), function(ext) {\n\t\t\t\t\t\t\t\t\tif (/^\\s*\\*\\s*$/.test(ext)) {\n\t\t\t\t\t\t\t\t\t\textensionsRegExp.push('\\\\.*');\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\textensionsRegExp.push('\\\\.' + ext.replace(new RegExp('[' + ('/^$.*+?|()[]{}\\\\'.replace(/./g, '\\\\$&')) + ']', 'g'), '\\\\$&'));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\treturn new RegExp('(' + extensionsRegExp.join('|') + ')$', 'i');\n\t\t\t\t\t\t}(settings.filters.mime_types));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\n\t\t\t\tcase 'resize':\n\t\t\t\t\tif (init) {\n\t\t\t\t\t\tplupload.extend(settings.resize, value, {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsettings.resize = value;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'prevent_duplicates':\n\t\t\t\t\tsettings.prevent_duplicates = settings.filters.prevent_duplicates = !!value;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'browse_button':\n\t\t\t\tcase 'drop_element':\n\t\t\t\t\t\tvalue = plupload.get(value);\n\n\t\t\t\tcase 'container':\n\t\t\t\tcase 'runtimes':\n\t\t\t\tcase 'multi_selection':\n\t\t\t\tcase 'flash_swf_url':\n\t\t\t\tcase 'silverlight_xap_url':\n\t\t\t\t\tsettings[option] = value;\n\t\t\t\t\tif (!init) {\n\t\t\t\t\t\treinitRequired = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tsettings[option] = value;\n\t\t\t}\n\n\t\t\tif (!init) {\n\t\t\t\tself.trigger('OptionChanged', option, value, oldValue);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof(option) === 'object') {\n\t\t\tplupload.each(option, function(value, option) {\n\t\t\t\t_setOption(option, value, init);\n\t\t\t});\n\t\t} else {\n\t\t\t_setOption(option, value, init);\n\t\t}\n\n\t\tif (init) {\n\t\t\t// Normalize the list of required capabilities\n\t\t\tsettings.required_features = normalizeCaps(plupload.extend({}, settings));\n\n\t\t\t// Come up with the list of capabilities that can affect default mode in a multi-mode runtimes\n\t\t\tpreferred_caps = normalizeCaps(plupload.extend({}, settings, {\n\t\t\t\trequired_features: true\n\t\t\t}));\n\t\t} else if (reinitRequired) {\n\t\t\tself.trigger('Destroy');\n\t\t\t\n\t\t\tinitControls.call(self, settings, function(inited) {\n\t\t\t\tif (inited) {\n\t\t\t\t\tself.runtime = o.Runtime.getInfo(getRUID()).type;\n\t\t\t\t\tself.trigger('Init', { runtime: self.runtime });\n\t\t\t\t\tself.trigger('PostInit');\n\t\t\t\t} else {\n\t\t\t\t\tself.trigger('Error', {\n\t\t\t\t\t\tcode : plupload.INIT_ERROR,\n\t\t\t\t\t\tmessage : plupload.translate('Init error.')\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\n\t// Internal event handlers\n\tfunction onBeforeUpload(up, file) {\n\t\t// Generate unique target filenames\n\t\tif (up.settings.unique_names) {\n\t\t\tvar matches = file.name.match(/\\.([^.]+)$/), ext = \"part\";\n\t\t\tif (matches) {\n\t\t\t\text = matches[1];\n\t\t\t}\n\t\t\tfile.target_name = file.id + '.' + ext;\n\t\t}\n\t}\n\n\n\tfunction onUploadFile(up, file) {\n\t\tvar url = up.settings.url\n\t\t, chunkSize = up.settings.chunk_size\n\t\t, retries = up.settings.max_retries\n\t\t, features = up.features\n\t\t, offset = 0\n\t\t, blob\n\t\t;\n\n\t\t// make sure we start at a predictable offset\n\t\tif (file.loaded) {\n\t\t\toffset = file.loaded = chunkSize ? chunkSize * Math.floor(file.loaded / chunkSize) : 0;\n\t\t}\n\n\t\tfunction handleError() {\n\t\t\tif (retries-- > 0) {\n\t\t\t\tdelay(uploadNextChunk, 1000);\n\t\t\t} else {\n\t\t\t\tfile.loaded = offset; // reset all progress\n\n\t\t\t\tup.trigger('Error', {\n\t\t\t\t\tcode : plupload.HTTP_ERROR,\n\t\t\t\t\tmessage : plupload.translate('HTTP Error.'),\n\t\t\t\t\tfile : file,\n\t\t\t\t\tresponse : xhr.responseText,\n\t\t\t\t\tstatus : xhr.status,\n\t\t\t\t\tresponseHeaders: xhr.getAllResponseHeaders()\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction uploadNextChunk() {\n\t\t\tvar chunkBlob, formData, args = {}, curChunkSize;\n\n\t\t\t// make sure that file wasn't cancelled and upload is not stopped in general\n\t\t\tif (file.status !== plupload.UPLOADING || up.state === plupload.STOPPED) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// send additional 'name' parameter only if required\n\t\t\tif (up.settings.send_file_name) {\n\t\t\t\targs.name = file.target_name || file.name;\n\t\t\t}\n\n\t\t\tif (chunkSize && features.chunks && blob.size > chunkSize) { // blob will be of type string if it was loaded in memory \n\t\t\t\tcurChunkSize = Math.min(chunkSize, blob.size - offset);\n\t\t\t\tchunkBlob = blob.slice(offset, offset + curChunkSize);\n\t\t\t} else {\n\t\t\t\tcurChunkSize = blob.size;\n\t\t\t\tchunkBlob = blob;\n\t\t\t}\n\n\t\t\t// If chunking is enabled add corresponding args, no matter if file is bigger than chunk or smaller\n\t\t\tif (chunkSize && features.chunks) {\n\t\t\t\t// Setup query string arguments\n\t\t\t\tif (up.settings.send_chunk_number) {\n\t\t\t\t\targs.chunk = Math.ceil(offset / chunkSize);\n\t\t\t\t\targs.chunks = Math.ceil(blob.size / chunkSize);\n\t\t\t\t} else { // keep support for experimental chunk format, just in case\n\t\t\t\t\targs.offset = offset;\n\t\t\t\t\targs.total = blob.size;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\txhr = new o.XMLHttpRequest();\n\n\t\t\t// Do we have upload progress support\n\t\t\tif (xhr.upload) {\n\t\t\t\txhr.upload.onprogress = function(e) {\n\t\t\t\t\tfile.loaded = Math.min(file.size, offset + e.loaded);\n\t\t\t\t\tup.trigger('UploadProgress', file);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\txhr.onload = function() {\n\t\t\t\t// check if upload made itself through\n\t\t\t\tif (xhr.status >= 400) {\n\t\t\t\t\thandleError();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tretries = up.settings.max_retries; // reset the counter\n\n\t\t\t\t// Handle chunk response\n\t\t\t\tif (curChunkSize < blob.size) {\n\t\t\t\t\tchunkBlob.destroy();\n\n\t\t\t\t\toffset += curChunkSize;\n\t\t\t\t\tfile.loaded = Math.min(offset, blob.size);\n\n\t\t\t\t\tup.trigger('ChunkUploaded', file, {\n\t\t\t\t\t\toffset : file.loaded,\n\t\t\t\t\t\ttotal : blob.size,\n\t\t\t\t\t\tresponse : xhr.responseText,\n\t\t\t\t\t\tstatus : xhr.status,\n\t\t\t\t\t\tresponseHeaders: xhr.getAllResponseHeaders()\n\t\t\t\t\t});\n\n\t\t\t\t\t// stock Android browser doesn't fire upload progress events, but in chunking mode we can fake them\n\t\t\t\t\tif (o.Env.browser === 'Android Browser') {\n\t\t\t\t\t\t// doesn't harm in general, but is not required anywhere else\n\t\t\t\t\t\tup.trigger('UploadProgress', file);\n\t\t\t\t\t} \n\t\t\t\t} else {\n\t\t\t\t\tfile.loaded = file.size;\n\t\t\t\t}\n\n\t\t\t\tchunkBlob = formData = null; // Free memory\n\n\t\t\t\t// Check if file is uploaded\n\t\t\t\tif (!offset || offset >= blob.size) {\n\t\t\t\t\t// If file was modified, destory the copy\n\t\t\t\t\tif (file.size != file.origSize) {\n\t\t\t\t\t\tblob.destroy();\n\t\t\t\t\t\tblob = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tup.trigger('UploadProgress', file);\n\n\t\t\t\t\tfile.status = plupload.DONE;\n\n\t\t\t\t\tup.trigger('FileUploaded', file, {\n\t\t\t\t\t\tresponse : xhr.responseText,\n\t\t\t\t\t\tstatus : xhr.status,\n\t\t\t\t\t\tresponseHeaders: xhr.getAllResponseHeaders()\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// Still chunks left\n\t\t\t\t\tdelay(uploadNextChunk, 1); // run detached, otherwise event handlers interfere\n\t\t\t\t}\n\t\t\t};\n\n\t\t\txhr.onerror = function() {\n\t\t\t\thandleError();\n\t\t\t};\n\n\t\t\txhr.onloadend = function() {\n\t\t\t\tthis.destroy();\n\t\t\t\txhr = null;\n\t\t\t};\n\n\t\t\t// Build multipart request\n\t\t\tif (up.settings.multipart && features.multipart) {\n\t\t\t\txhr.open(\"POST\", url, true);\n\n\t\t\t\t// Set custom headers\n\t\t\t\tplupload.each(up.settings.headers, function(value, name) {\n\t\t\t\t\txhr.setRequestHeader(name, value);\n\t\t\t\t});\n\n\t\t\t\tformData = new o.FormData();\n\n\t\t\t\t// Add multipart params\n\t\t\t\tplupload.each(plupload.extend(args, up.settings.multipart_params), function(value, name) {\n\t\t\t\t\tformData.append(name, value);\n\t\t\t\t});\n\n\t\t\t\t// Add file and send it\n\t\t\t\tformData.append(up.settings.file_data_name, chunkBlob);\n\t\t\t\txhr.send(formData, {\n\t\t\t\t\truntime_order: up.settings.runtimes,\n\t\t\t\t\trequired_caps: up.settings.required_features,\n\t\t\t\t\tpreferred_caps: preferred_caps,\n\t\t\t\t\tswf_url: up.settings.flash_swf_url,\n\t\t\t\t\txap_url: up.settings.silverlight_xap_url\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// if no multipart, send as binary stream\n\t\t\t\turl = plupload.buildUrl(up.settings.url, plupload.extend(args, up.settings.multipart_params));\n\n\t\t\t\txhr.open(\"POST\", url, true);\n\n\t\t\t\txhr.setRequestHeader('Content-Type', 'application/octet-stream'); // Binary stream header\n\n\t\t\t\t// Set custom headers\n\t\t\t\tplupload.each(up.settings.headers, function(value, name) {\n\t\t\t\t\txhr.setRequestHeader(name, value);\n\t\t\t\t});\n\n\t\t\t\txhr.send(chunkBlob, {\n\t\t\t\t\truntime_order: up.settings.runtimes,\n\t\t\t\t\trequired_caps: up.settings.required_features,\n\t\t\t\t\tpreferred_caps: preferred_caps,\n\t\t\t\t\tswf_url: up.settings.flash_swf_url,\n\t\t\t\t\txap_url: up.settings.silverlight_xap_url\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tblob = file.getSource();\n\n\t\t// Start uploading chunks\n\t\tif (up.settings.resize.enabled && runtimeCan(blob, 'send_binary_string') && !!~o.inArray(blob.type, ['image/jpeg', 'image/png'])) {\n\t\t\t// Resize if required\n\t\t\tresizeImage.call(this, blob, up.settings.resize, function(resizedBlob) {\n\t\t\t\tblob = resizedBlob;\n\t\t\t\tfile.size = resizedBlob.size;\n\t\t\t\tuploadNextChunk();\n\t\t\t});\n\t\t} else {\n\t\t\tuploadNextChunk();\n\t\t}\n\t}\n\n\n\tfunction onUploadProgress(up, file) {\n\t\tcalcFile(file);\n\t}\n\n\n\tfunction onStateChanged(up) {\n\t\tif (up.state == plupload.STARTED) {\n\t\t\t// Get start time to calculate bps\n\t\t\tstartTime = (+new Date());\n\t\t} else if (up.state == plupload.STOPPED) {\n\t\t\t// Reset currently uploading files\n\t\t\tfor (var i = up.files.length - 1; i >= 0; i--) {\n\t\t\t\tif (up.files[i].status == plupload.UPLOADING) {\n\t\t\t\t\tup.files[i].status = plupload.QUEUED;\n\t\t\t\t\tcalc();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction onCancelUpload() {\n\t\tif (xhr) {\n\t\t\txhr.abort();\n\t\t}\n\t}\n\n\n\tfunction onFileUploaded(up) {\n\t\tcalc();\n\n\t\t// Upload next file but detach it from the error event\n\t\t// since other custom listeners might want to stop the queue\n\t\tdelay(function() {\n\t\t\tuploadNext.call(up);\n\t\t}, 1);\n\t}\n\n\n\tfunction onError(up, err) {\n\t\tif (err.code === plupload.INIT_ERROR) {\n\t\t\tup.destroy();\n\t\t}\n\t\t// Set failed status if an error occured on a file\n\t\telse if (err.file) {\n\t\t\terr.file.status = plupload.FAILED;\n\t\t\tcalcFile(err.file);\n\n\t\t\t// Upload next file but detach it from the error event\n\t\t\t// since other custom listeners might want to stop the queue\n\t\t\tif (up.state == plupload.STARTED) { // upload in progress\n\t\t\t\tup.trigger('CancelUpload');\n\t\t\t\tdelay(function() {\n\t\t\t\t\tuploadNext.call(up);\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction onDestroy(up) {\n\t\tup.stop();\n\n\t\t// Purge the queue\n\t\tplupload.each(files, function(file) {\n\t\t\tfile.destroy();\n\t\t});\n\t\tfiles = [];\n\n\t\tif (fileInputs.length) {\n\t\t\tplupload.each(fileInputs, function(fileInput) {\n\t\t\t\tfileInput.destroy();\n\t\t\t});\n\t\t\tfileInputs = [];\n\t\t}\n\n\t\tif (fileDrops.length) {\n\t\t\tplupload.each(fileDrops, function(fileDrop) {\n\t\t\t\tfileDrop.destroy();\n\t\t\t});\n\t\t\tfileDrops = [];\n\t\t}\n\n\t\tpreferred_caps = {};\n\t\tdisabled = false;\n\t\tstartTime = xhr = null;\n\t\ttotal.reset();\n\t}\n\n\n\t// Default settings\n\tsettings = {\n\t\truntimes: o.Runtime.order,\n\t\tmax_retries: 0,\n\t\tchunk_size: 0,\n\t\tmultipart: true,\n\t\tmulti_selection: true,\n\t\tfile_data_name: 'file',\n\t\tflash_swf_url: 'js/Moxie.swf',\n\t\tsilverlight_xap_url: 'js/Moxie.xap',\n\t\tfilters: {\n\t\t\tmime_types: [],\n\t\t\tprevent_duplicates: false,\n\t\t\tmax_file_size: 0\n\t\t},\n\t\tresize: {\n\t\t\tenabled: false,\n\t\t\tpreserve_headers: true,\n\t\t\tcrop: false\n\t\t},\n\t\tsend_file_name: true,\n\t\tsend_chunk_number: true\n\t};\n\n\t\n\tsetOption.call(this, options, null, true);\n\n\t// Inital total state\n\ttotal = new plupload.QueueProgress(); \n\n\t// Add public methods\n\tplupload.extend(this, {\n\n\t\t/**\n\t\t * Unique id for the Uploader instance.\n\t\t *\n\t\t * @property id\n\t\t * @type String\n\t\t */\n\t\tid : uid,\n\t\tuid : uid, // mOxie uses this to differentiate between event targets\n\n\t\t/**\n\t\t * Current state of the total uploading progress. This one can either be plupload.STARTED or plupload.STOPPED.\n\t\t * These states are controlled by the stop/start methods. The default value is STOPPED.\n\t\t *\n\t\t * @property state\n\t\t * @type Number\n\t\t */\n\t\tstate : plupload.STOPPED,\n\n\t\t/**\n\t\t * Map of features that are available for the uploader runtime. Features will be filled\n\t\t * before the init event is called, these features can then be used to alter the UI for the end user.\n\t\t * Some of the current features that might be in this map is: dragdrop, chunks, jpgresize, pngresize.\n\t\t *\n\t\t * @property features\n\t\t * @type Object\n\t\t */\n\t\tfeatures : {},\n\n\t\t/**\n\t\t * Current runtime name.\n\t\t *\n\t\t * @property runtime\n\t\t * @type String\n\t\t */\n\t\truntime : null,\n\n\t\t/**\n\t\t * Current upload queue, an array of File instances.\n\t\t *\n\t\t * @property files\n\t\t * @type Array\n\t\t * @see plupload.File\n\t\t */\n\t\tfiles : files,\n\n\t\t/**\n\t\t * Object with name/value settings.\n\t\t *\n\t\t * @property settings\n\t\t * @type Object\n\t\t */\n\t\tsettings : settings,\n\n\t\t/**\n\t\t * Total progess information. How many files has been uploaded, total percent etc.\n\t\t *\n\t\t * @property total\n\t\t * @type plupload.QueueProgress\n\t\t */\n\t\ttotal : total,\n\n\n\t\t/**\n\t\t * Initializes the Uploader instance and adds internal event listeners.\n\t\t *\n\t\t * @method init\n\t\t */\n\t\tinit : function() {\n\t\t\tvar self = this;\n\n\t\t\tif (typeof(settings.preinit) == \"function\") {\n\t\t\t\tsettings.preinit(self);\n\t\t\t} else {\n\t\t\t\tplupload.each(settings.preinit, function(func, name) {\n\t\t\t\t\tself.bind(name, func);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tbindEventListeners.call(this);\n\n\t\t\t// Check for required options\n\t\t\tif (!settings.browse_button || !settings.url) {\n\t\t\t\tthis.trigger('Error', {\n\t\t\t\t\tcode : plupload.INIT_ERROR,\n\t\t\t\t\tmessage : plupload.translate('Init error.')\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tinitControls.call(this, settings, function(inited) {\n\t\t\t\tif (typeof(settings.init) == \"function\") {\n\t\t\t\t\tsettings.init(self);\n\t\t\t\t} else {\n\t\t\t\t\tplupload.each(settings.init, function(func, name) {\n\t\t\t\t\t\tself.bind(name, func);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (inited) {\n\t\t\t\t\tself.runtime = o.Runtime.getInfo(getRUID()).type;\n\t\t\t\t\tself.trigger('Init', { runtime: self.runtime });\n\t\t\t\t\tself.trigger('PostInit');\n\t\t\t\t} else {\n\t\t\t\t\tself.trigger('Error', {\n\t\t\t\t\t\tcode : plupload.INIT_ERROR,\n\t\t\t\t\t\tmessage : plupload.translate('Init error.')\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Set the value for the specified option(s).\n\t\t *\n\t\t * @method setOption\n\t\t * @since 2.1\n\t\t * @param {String|Object} option Name of the option to change or the set of key/value pairs\n\t\t * @param {Mixed} [value] Value for the option (is ignored, if first argument is object)\n\t\t */\n\t\tsetOption: function(option, value) {\n\t\t\tsetOption.call(this, option, value, !this.runtime); // until runtime not set we do not need to reinitialize\n\t\t},\n\n\t\t/**\n\t\t * Get the value for the specified option or the whole configuration, if not specified.\n\t\t * \n\t\t * @method getOption\n\t\t * @since 2.1\n\t\t * @param {String} [option] Name of the option to get\n\t\t * @return {Mixed} Value for the option or the whole set\n\t\t */\n\t\tgetOption: function(option) {\n\t\t\tif (!option) {\n\t\t\t\treturn settings;\n\t\t\t}\n\t\t\treturn settings[option];\n\t\t},\n\n\t\t/**\n\t\t * Refreshes the upload instance by dispatching out a refresh event to all runtimes.\n\t\t * This would for example reposition flash/silverlight shims on the page.\n\t\t *\n\t\t * @method refresh\n\t\t */\n\t\trefresh : function() {\n\t\t\tif (fileInputs.length) {\n\t\t\t\tplupload.each(fileInputs, function(fileInput) {\n\t\t\t\t\tfileInput.trigger('Refresh');\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.trigger('Refresh');\n\t\t},\n\n\t\t/**\n\t\t * Starts uploading the queued files.\n\t\t *\n\t\t * @method start\n\t\t */\n\t\tstart : function() {\n\t\t\tif (this.state != plupload.STARTED) {\n\t\t\t\tthis.state = plupload.STARTED;\n\t\t\t\tthis.trigger('StateChanged');\n\n\t\t\t\tuploadNext.call(this);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Stops the upload of the queued files.\n\t\t *\n\t\t * @method stop\n\t\t */\n\t\tstop : function() {\n\t\t\tif (this.state != plupload.STOPPED) {\n\t\t\t\tthis.state = plupload.STOPPED;\n\t\t\t\tthis.trigger('StateChanged');\n\t\t\t\tthis.trigger('CancelUpload');\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Disables/enables browse button on request.\n\t\t *\n\t\t * @method disableBrowse\n\t\t * @param {Boolean} disable Whether to disable or enable (default: true)\n\t\t */\n\t\tdisableBrowse : function() {\n\t\t\tdisabled = arguments[0] !== undef ? arguments[0] : true;\n\n\t\t\tif (fileInputs.length) {\n\t\t\t\tplupload.each(fileInputs, function(fileInput) {\n\t\t\t\t\tfileInput.disable(disabled);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.trigger('DisableBrowse', disabled);\n\t\t},\n\n\t\t/**\n\t\t * Returns the specified file object by id.\n\t\t *\n\t\t * @method getFile\n\t\t * @param {String} id File id to look for.\n\t\t * @return {plupload.File} File object or undefined if it wasn't found;\n\t\t */\n\t\tgetFile : function(id) {\n\t\t\tvar i;\n\t\t\tfor (i = files.length - 1; i >= 0; i--) {\n\t\t\t\tif (files[i].id === id) {\n\t\t\t\t\treturn files[i];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Adds file to the queue programmatically. Can be native file, instance of Plupload.File,\n\t\t * instance of mOxie.File, input[type=\"file\"] element, or array of these. Fires FilesAdded, \n\t\t * if any files were added to the queue. Otherwise nothing happens.\n\t\t *\n\t\t * @method addFile\n\t\t * @since 2.0\n\t\t * @param {plupload.File|mOxie.File|File|Node|Array} file File or files to add to the queue.\n\t\t * @param {String} [fileName] If specified, will be used as a name for the file\n\t\t */\n\t\taddFile : function(file, fileName) {\n\t\t\tvar self = this\n\t\t\t, queue = [] \n\t\t\t, filesAdded = []\n\t\t\t, ruid\n\t\t\t;\n\n\t\t\tfunction filterFile(file, cb) {\n\t\t\t\tvar queue = [];\n\t\t\t\to.each(self.settings.filters, function(rule, name) {\n\t\t\t\t\tif (fileFilters[name]) {\n\t\t\t\t\t\tqueue.push(function(cb) {\n\t\t\t\t\t\t\tfileFilters[name].call(self, rule, file, function(res) {\n\t\t\t\t\t\t\t\tcb(!res);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\to.inSeries(queue, cb);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * @method resolveFile\n\t\t\t * @private\n\t\t\t * @param {o.File|o.Blob|plupload.File|File|Blob|input[type=\"file\"]} file\n\t\t\t */\n\t\t\tfunction resolveFile(file) {\n\t\t\t\tvar type = o.typeOf(file);\n\n\t\t\t\t// o.File\n\t\t\t\tif (file instanceof o.File) { \n\t\t\t\t\tif (!file.ruid && !file.isDetached()) {\n\t\t\t\t\t\tif (!ruid) { // weird case\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfile.ruid = ruid;\n\t\t\t\t\t\tfile.connectRuntime(ruid);\n\t\t\t\t\t}\n\t\t\t\t\tresolveFile(new plupload.File(file));\n\t\t\t\t}\n\t\t\t\t// o.Blob \n\t\t\t\telse if (file instanceof o.Blob) {\n\t\t\t\t\tresolveFile(file.getSource());\n\t\t\t\t\tfile.destroy();\n\t\t\t\t} \n\t\t\t\t// plupload.File - final step for other branches\n\t\t\t\telse if (file instanceof plupload.File) {\n\t\t\t\t\tif (fileName) {\n\t\t\t\t\t\tfile.name = fileName;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tqueue.push(function(cb) {\n\t\t\t\t\t\t// run through the internal and user-defined filters, if any\n\t\t\t\t\t\tfilterFile(file, function(err) {\n\t\t\t\t\t\t\tif (!err) {\n\t\t\t\t\t\t\t\t// make files available for the filters by updating the main queue directly\n\t\t\t\t\t\t\t\tfiles.push(file);\n\t\t\t\t\t\t\t\t// collect the files that will be passed to FilesAdded event\n\t\t\t\t\t\t\t\tfilesAdded.push(file); \n\n\t\t\t\t\t\t\t\tself.trigger(\"FileFiltered\", file);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdelay(cb, 1); // do not build up recursions or eventually we might hit the limits\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t} \n\t\t\t\t// native File or blob\n\t\t\t\telse if (o.inArray(type, ['file', 'blob']) !== -1) {\n\t\t\t\t\tresolveFile(new o.File(null, file));\n\t\t\t\t} \n\t\t\t\t// input[type=\"file\"]\n\t\t\t\telse if (type === 'node' && o.typeOf(file.files) === 'filelist') {\n\t\t\t\t\t// if we are dealing with input[type=\"file\"]\n\t\t\t\t\to.each(file.files, resolveFile);\n\t\t\t\t} \n\t\t\t\t// mixed array of any supported types (see above)\n\t\t\t\telse if (type === 'array') {\n\t\t\t\t\tfileName = null; // should never happen, but unset anyway to avoid funny situations\n\t\t\t\t\to.each(file, resolveFile);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\truid = getRUID();\n\t\t\t\n\t\t\tresolveFile(file);\n\n\t\t\tif (queue.length) {\n\t\t\t\to.inSeries(queue, function() {\n\t\t\t\t\t// if any files left after filtration, trigger FilesAdded\n\t\t\t\t\tif (filesAdded.length) {\n\t\t\t\t\t\tself.trigger(\"FilesAdded\", filesAdded);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Removes a specific file.\n\t\t *\n\t\t * @method removeFile\n\t\t * @param {plupload.File|String} file File to remove from queue.\n\t\t */\n\t\tremoveFile : function(file) {\n\t\t\tvar id = typeof(file) === 'string' ? file : file.id;\n\n\t\t\tfor (var i = files.length - 1; i >= 0; i--) {\n\t\t\t\tif (files[i].id === id) {\n\t\t\t\t\treturn this.splice(i, 1)[0];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Removes part of the queue and returns the files removed. This will also trigger the FilesRemoved and QueueChanged events.\n\t\t *\n\t\t * @method splice\n\t\t * @param {Number} start (Optional) Start index to remove from.\n\t\t * @param {Number} length (Optional) Lengh of items to remove.\n\t\t * @return {Array} Array of files that was removed.\n\t\t */\n\t\tsplice : function(start, length) {\n\t\t\t// Splice and trigger events\n\t\t\tvar removed = files.splice(start === undef ? 0 : start, length === undef ? files.length : length);\n\n\t\t\t// if upload is in progress we need to stop it and restart after files are removed\n\t\t\tvar restartRequired = false;\n\t\t\tif (this.state == plupload.STARTED) { // upload in progress\n\t\t\t\tplupload.each(removed, function(file) {\n\t\t\t\t\tif (file.status === plupload.UPLOADING) {\n\t\t\t\t\t\trestartRequired = true; // do not restart, unless file that is being removed is uploading\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (restartRequired) {\n\t\t\t\t\tthis.stop();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.trigger(\"FilesRemoved\", removed);\n\n\t\t\t// Dispose any resources allocated by those files\n\t\t\tplupload.each(removed, function(file) {\n\t\t\t\tfile.destroy();\n\t\t\t});\n\t\t\t\n\t\t\tif (restartRequired) {\n\t\t\t\tthis.start();\n\t\t\t}\n\n\t\t\treturn removed;\n\t\t},\n\n\t\t/**\n\t\t * Dispatches the specified event name and it's arguments to all listeners.\n\t\t *\n\t\t *\n\t\t * @method trigger\n\t\t * @param {String} name Event name to fire.\n\t\t * @param {Object..} Multiple arguments to pass along to the listener functions.\n\t\t */\n\n\t\t/**\n\t\t * Check whether uploader has any listeners to the specified event.\n\t\t *\n\t\t * @method hasEventListener\n\t\t * @param {String} name Event name to check for.\n\t\t */\n\n\n\t\t/**\n\t\t * Adds an event listener by name.\n\t\t *\n\t\t * @method bind\n\t\t * @param {String} name Event name to listen for.\n\t\t * @param {function} func Function to call ones the event gets fired.\n\t\t * @param {Object} scope Optional scope to execute the specified function in.\n\t\t */\n\t\tbind : function(name, func, scope) {\n\t\t\tvar self = this;\n\t\t\t// adapt moxie EventTarget style to Plupload-like\n\t\t\tplupload.Uploader.prototype.bind.call(this, name, function() {\n\t\t\t\tvar args = [].slice.call(arguments);\n\t\t\t\targs.splice(0, 1, self); // replace event object with uploader instance\n\t\t\t\treturn func.apply(this, args);\n\t\t\t}, 0, scope);\n\t\t},\n\n\t\t/**\n\t\t * Removes the specified event listener.\n\t\t *\n\t\t * @method unbind\n\t\t * @param {String} name Name of event to remove.\n\t\t * @param {function} func Function to remove from listener.\n\t\t */\n\n\t\t/**\n\t\t * Removes all event listeners.\n\t\t *\n\t\t * @method unbindAll\n\t\t */\n\n\n\t\t/**\n\t\t * Destroys Plupload instance and cleans after itself.\n\t\t *\n\t\t * @method destroy\n\t\t */\n\t\tdestroy : function() {\n\t\t\tthis.trigger('Destroy');\n\t\t\tsettings = total = null; // purge these exclusively\n\t\t\tthis.unbindAll();\n\t\t}\n\t});\n};\n\nplupload.Uploader.prototype = o.EventTarget.instance;\n\n/**\n * Constructs a new file instance.\n *\n * @class File\n * @constructor\n * \n * @param {Object} file Object containing file properties\n * @param {String} file.name Name of the file.\n * @param {Number} file.size File size.\n */\nplupload.File = (function() {\n\tvar filepool = {};\n\n\tfunction PluploadFile(file) {\n\n\t\tplupload.extend(this, {\n\n\t\t\t/**\n\t\t\t * File id this is a globally unique id for the specific file.\n\t\t\t *\n\t\t\t * @property id\n\t\t\t * @type String\n\t\t\t */\n\t\t\tid: plupload.guid(),\n\n\t\t\t/**\n\t\t\t * File name for example \"myfile.gif\".\n\t\t\t *\n\t\t\t * @property name\n\t\t\t * @type String\n\t\t\t */\n\t\t\tname: file.name || file.fileName,\n\n\t\t\t/**\n\t\t\t * File type, `e.g image/jpeg`\n\t\t\t *\n\t\t\t * @property type\n\t\t\t * @type String\n\t\t\t */\n\t\t\ttype: file.type || '',\n\n\t\t\t/**\n\t\t\t * File size in bytes (may change after client-side manupilation).\n\t\t\t *\n\t\t\t * @property size\n\t\t\t * @type Number\n\t\t\t */\n\t\t\tsize: file.size || file.fileSize,\n\n\t\t\t/**\n\t\t\t * Original file size in bytes.\n\t\t\t *\n\t\t\t * @property origSize\n\t\t\t * @type Number\n\t\t\t */\n\t\t\torigSize: file.size || file.fileSize,\n\n\t\t\t/**\n\t\t\t * Number of bytes uploaded of the files total size.\n\t\t\t *\n\t\t\t * @property loaded\n\t\t\t * @type Number\n\t\t\t */\n\t\t\tloaded: 0,\n\n\t\t\t/**\n\t\t\t * Number of percentage uploaded of the file.\n\t\t\t *\n\t\t\t * @property percent\n\t\t\t * @type Number\n\t\t\t */\n\t\t\tpercent: 0,\n\n\t\t\t/**\n\t\t\t * Status constant matching the plupload states QUEUED, UPLOADING, FAILED, DONE.\n\t\t\t *\n\t\t\t * @property status\n\t\t\t * @type Number\n\t\t\t * @see plupload\n\t\t\t */\n\t\t\tstatus: plupload.QUEUED,\n\n\t\t\t/**\n\t\t\t * Date of last modification.\n\t\t\t *\n\t\t\t * @property lastModifiedDate\n\t\t\t * @type {String}\n\t\t\t */\n\t\t\tlastModifiedDate: file.lastModifiedDate || (new Date()).toLocaleString(), // Thu Aug 23 2012 19:40:00 GMT+0400 (GET)\n\n\t\t\t/**\n\t\t\t * Returns native window.File object, when it's available.\n\t\t\t *\n\t\t\t * @method getNative\n\t\t\t * @return {window.File} or null, if plupload.File is of different origin\n\t\t\t */\n\t\t\tgetNative: function() {\n\t\t\t\tvar file = this.getSource().getSource();\n\t\t\t\treturn o.inArray(o.typeOf(file), ['blob', 'file']) !== -1 ? file : null;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns mOxie.File - unified wrapper object that can be used across runtimes.\n\t\t\t *\n\t\t\t * @method getSource\n\t\t\t * @return {mOxie.File} or null\n\t\t\t */\n\t\t\tgetSource: function() {\n\t\t\t\tif (!filepool[this.id]) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\treturn filepool[this.id];\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Destroys plupload.File object.\n\t\t\t *\n\t\t\t * @method destroy\n\t\t\t */\n\t\t\tdestroy: function() {\n\t\t\t\tvar src = this.getSource();\n\t\t\t\tif (src) {\n\t\t\t\t\tsrc.destroy();\n\t\t\t\t\tdelete filepool[this.id];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tfilepool[this.id] = file;\n\t}\n\n\treturn PluploadFile;\n}());\n\n\n/**\n * Constructs a queue progress.\n *\n * @class QueueProgress\n * @constructor\n */\n plupload.QueueProgress = function() {\n\tvar self = this; // Setup alias for self to reduce code size when it's compressed\n\n\t/**\n\t * Total queue file size.\n\t *\n\t * @property size\n\t * @type Number\n\t */\n\tself.size = 0;\n\n\t/**\n\t * Total bytes uploaded.\n\t *\n\t * @property loaded\n\t * @type Number\n\t */\n\tself.loaded = 0;\n\n\t/**\n\t * Number of files uploaded.\n\t *\n\t * @property uploaded\n\t * @type Number\n\t */\n\tself.uploaded = 0;\n\n\t/**\n\t * Number of files failed to upload.\n\t *\n\t * @property failed\n\t * @type Number\n\t */\n\tself.failed = 0;\n\n\t/**\n\t * Number of files yet to be uploaded.\n\t *\n\t * @property queued\n\t * @type Number\n\t */\n\tself.queued = 0;\n\n\t/**\n\t * Total percent of the uploaded bytes.\n\t *\n\t * @property percent\n\t * @type Number\n\t */\n\tself.percent = 0;\n\n\t/**\n\t * Bytes uploaded per second.\n\t *\n\t * @property bytesPerSec\n\t * @type Number\n\t */\n\tself.bytesPerSec = 0;\n\n\t/**\n\t * Resets the progress to it's initial values.\n\t *\n\t * @method reset\n\t */\n\tself.reset = function() {\n\t\tself.size = self.loaded = self.uploaded = self.failed = self.queued = self.percent = self.bytesPerSec = 0;\n\t};\n};\n\nwindow.plupload = plupload;\n\n}(window, mOxie));\n\n\nvar Vue;\nfunction install(_Vue) {\n    if (Vue) {\n        console.error(\n            '[plupload] already installed. Vue.use(plupload) should be called only once.'\n        );\n        return\n    }\n    Vue = _Vue;\n    Vue.prototype.$plupload = plupload;\n}\n\nexport default {\n    install: install,\n    version: '1.0.0'\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/upload/plupload.dev.js\n// module id = 387H\n// module chunks = 0","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _promise = require(\"babel-runtime/core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _opus = require(\"../data/opus\");\n\nvar opus = _interopRequireWildcard(_opus);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n\tstate: {\n\t\tarticle: {\n\t\t\tcount: 0,\n\t\t\tlists: [],\n\t\t\tload: 0,\n\t\t\tmore: 0\n\t\t},\n\n\t\thot: {\n\t\t\tcount: 0,\n\t\t\tlists: [],\n\t\t\tmore: 0\n\t\t},\n\n\t\tcategory: {\n\t\t\tlabel: [{\n\t\t\t\tcategory_desc: \"全部\",\n\t\t\t\tcategory_id: \"0\",\n\t\t\t\tcategory_title: \"全部\"\n\t\t\t}],\n\t\t\tlaberSubnode: [],\n\t\t\tindex: 0,\n\t\t\ttags: [],\n\t\t\tload: 0\n\t\t},\n\n\t\tcatalog: {\n\t\t\tcatalog_id: '',\n\t\t\tstatusArr: [{\n\t\t\t\taudit_status: 0,\n\t\t\t\ttext: '连载中'\n\t\t\t}, {\n\t\t\t\taudit_status: 1,\n\t\t\t\ttext: '已完结'\n\t\t\t}],\n\t\t\tlevelArr: [{\n\t\t\t\ttext: '普通',\n\t\t\t\tlevel_id: 0\n\t\t\t}, {\n\t\t\t\ttext: '独家',\n\t\t\t\tlevel_id: 1\n\t\t\t}, {\n\t\t\t\ttext: '首发',\n\t\t\t\tlevel_id: 2\n\t\t\t}],\n\t\t\tinfo: {}\n\t\t},\n\n\t\tchapter: {\n\t\t\tcount: 0,\n\t\t\tlists: [],\n\t\t\tmore: 0,\n\t\t\tinfo: {},\n\t\t\tchapter_id: ''\n\t\t},\n\n\t\tcomment: {\n\t\t\tlist: [],\n\t\t\tcount: 0\n\t\t}\n\t},\n\tmutations: {\n\t\topus_setArticle: function opus_setArticle(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tstate.article[key] = payload[key];\n\t\t\t}\n\t\t},\n\t\topus_setCategory: function opus_setCategory(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tstate.category[key] = payload[key];\n\t\t\t}\n\t\t},\n\t\topus_setChapterList: function opus_setChapterList(state, payload) {\n\t\t\tstate.chapter.count = payload.count;\n\t\t\tstate.chapter.lists = payload.lists;\n\t\t\tstate.chapter.more = payload.more;\n\t\t},\n\t\topus_setCatalog_info: function opus_setCatalog_info(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tstate.catalog.info[key] = payload[key];\n\t\t\t}\n\t\t},\n\t\topus_setCatalog: function opus_setCatalog(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tstate.catalog[key] = payload[key];\n\t\t\t}\n\t\t},\n\t\topus_setChapter: function opus_setChapter(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tstate.chapter[key] = payload[key];\n\t\t\t}\n\t\t},\n\t\topus_setComment: function opus_setComment(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tstate.comment[key] = payload[key];\n\t\t\t}\n\t\t},\n\t\topus_setCommentList: function opus_setCommentList(state, payload) {\n\t\t\tstate.comment.list[payload.index].replayIndex = payload.replayIndex;\n\t\t},\n\t\topus_setHot: function opus_setHot(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tstate.hot[key] = payload[key];\n\t\t\t}\n\t\t}\n\t},\n\tactions: {\n\t\topus_setArticle: function opus_setArticle(context, payload) {\n\t\t\tcontext.commit('opus_setArticle', payload);\n\t\t\treturn _promise2.default.resolve(1);\n\t\t},\n\t\topus_setCatalog_info: function opus_setCatalog_info(context, payload) {\n\t\t\tcontext.commit('opus_setCatalog_info', payload);\n\t\t\treturn _promise2.default.resolve(1);\n\t\t},\n\t\topus_setTagIndex: function opus_setTagIndex(context, payload) {\n\t\t\tcontext.commit('opus_setCategory', {\n\t\t\t\tindex: payload\n\t\t\t});\n\t\t\treturn _promise2.default.resolve(1);\n\t\t},\n\t\topus_setCommentList: function opus_setCommentList(context, payload) {\n\t\t\tcontext.commit('opus_setCommentList', payload);\n\t\t\treturn _promise2.default.resolve(1);\n\t\t},\n\t\topus_setChapterInfo: function opus_setChapterInfo(context, payload) {\n\t\t\tcontext.commit('opus_setChapter', {\n\t\t\t\tinfo: payload\n\t\t\t});\n\t\t\treturn _promise2.default.resolve(1);\n\t\t},\n\t\topus_getCatalogList: function opus_getCatalogList(context, payload) {\n\t\t\tif (context.state.catalog.load) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -21,\n\t\t\t\t\tmsg: '加载中'\n\t\t\t\t});\n\t\t\t}\n\t\t\tcontext.commit('opus_setArticle', {\n\t\t\t\tload: 1\n\t\t\t});\n\n\t\t\tif (context.state.category.index) {\n\t\t\t\tpayload.body.category_id = context.state.category.index;\n\t\t\t}\n\n\t\t\tvar promise = opus.getCatalogList(payload).then(function (res) {\n\t\t\t\tvar lists = context.state.article.lists;\n\t\t\t\tif (payload.type == 'more') {\n\t\t\t\t\tlists = lists.concat(res.list);\n\t\t\t\t} else {\n\t\t\t\t\tlists = res.list;\n\t\t\t\t}\n\t\t\t\tcontext.commit('opus_setArticle', {\n\t\t\t\t\tcount: res.page_info.total_count,\n\t\t\t\t\tlists: lists,\n\t\t\t\t\tmore: res.more,\n\t\t\t\t\tload: 0\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\tcontext.commit('opus_setArticle', {\n\t\t\t\t\tload: 0\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\topus_getChapterList: function opus_getChapterList(context, payload) {\n\t\t\tvar promise = opus.getChapterList(payload).then(function (res) {\n\t\t\t\tres.list = res.list.reverse();\n\t\t\t\tcontext.commit('opus_setChapterList', {\n\t\t\t\t\tcount: Number(res.page_info.total_count),\n\t\t\t\t\tlists: res.list,\n\t\t\t\t\tmore: res.more\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\topus_getCategoryList: function opus_getCategoryList(context, payload) {\n\t\t\tif (context.state.category.load) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -21,\n\t\t\t\t\tmsg: '加载中'\n\t\t\t\t});\n\t\t\t}\n\t\t\tcontext.commit('opus_setCategory', {\n\t\t\t\tload: 1\n\t\t\t});\n\n\t\t\tif (context.state.category.label.length > 1) {\n\t\t\t\treturn _promise2.default.resolve(context.state.category);\n\t\t\t}\n\n\t\t\tvar promise = opus.getCategoryList(payload).then(function (res) {\n\t\t\t\tvar laberSubnode = [];\n\t\t\t\tvar label = context.state.category.label.concat(res.list);\n\t\t\t\tres.list.map(function (item, index) {\n\t\t\t\t\tlaberSubnode = laberSubnode.concat(item.sub_node);\n\t\t\t\t});\n\t\t\t\tcontext.commit('opus_setCategory', {\n\t\t\t\t\tlabel: label,\n\t\t\t\t\tlaberSubnode: laberSubnode,\n\t\t\t\t\tload: 0\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\tcontext.commit('opus_setCategory', {\n\t\t\t\t\tload: 0\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_getFavoritesList: function opus_getFavoritesList(context, payload) {\n\t\t\tvar promise = opus.getFavoritesList(payload).then(function (res) {\n\t\t\t\tcontext.commit('opus_setArticle', {\n\t\t\t\t\tcount: res.page_info.total_count,\n\t\t\t\t\tlists: res.list,\n\t\t\t\t\tmore: res.more\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_delFavorites: function opus_delFavorites(context, payload) {\n\t\t\tif (!payload.catalogId) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tvar promise = opus.delFavorites(payload).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_addFavorites: function opus_addFavorites(context, payload) {\n\t\t\tif (!payload.catalogId) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tvar promise = opus.addFavorites(payload).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_getCommentList: function opus_getCommentList(context, payload) {\n\t\t\tif (!payload.catalogId) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tvar promise = opus.getCommentList(payload).then(function (res) {\n\t\t\t\tfor (var i = 0, len = res.list.length; i < len; i++) {\n\t\t\t\t\tres.list[i].replayIndex = -2;\n\t\t\t\t}\n\t\t\t\tcontext.commit('opus_setComment', {\n\t\t\t\t\tcount: res.page_info.total_count,\n\t\t\t\t\tlist: res.list,\n\t\t\t\t\tmore: res.more\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_getReplyCommentList: function opus_getReplyCommentList(context, payload) {\n\t\t\tif (!payload.commentId) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t};\n\t\t\tvar promise = opus.getReplyCommentList(payload).then(function (res) {\n\t\t\t\tvar list = context.state.comment.list;\n\t\t\t\tfor (var i = 0, len = list.length; i < len; i++) {\n\t\t\t\t\tif (list[i].comment_id == payload.commentId) {\n\t\t\t\t\t\tlist[i].reply_page_info = res.page_info;\n\t\t\t\t\t\tlist[i].reply_more = res.more;\n\t\t\t\t\t\tlist[i].replys = list[i].replys.concat(res.list);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcontext.commit('opus_setComment', {\n\t\t\t\t\tlist: list\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_addComment: function opus_addComment(context, payload) {\n\t\t\tif (!payload.catalog_id) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tvar promise = opus.addComment(payload).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_addCatalog: function opus_addCatalog(context, payload) {\n\t\t\tvar promise = opus.addCatalog({\n\t\t\t\t\"level\": payload.level,\n\t\t\t\t\"category_id\": payload.category_id,\n\t\t\t\t\"catalog_title\": payload.catalog_title,\n\t\t\t\t\"catalog_desc\": payload.catalog_desc,\n\t\t\t\t\"catalog_cover_url\": payload.catalog_cover_url,\n\t\t\t\t\"catalog_status\": payload.catalog_status,\n\t\t\t\t\"catalog_label\": payload.catalog_label,\n\t\t\t\t\"translate\": payload.translate,\n\t\t\t\t\"authorize\": payload.authorize,\n\t\t\t\t\"reprint\": payload.reprint }).then(function (res) {\n\t\t\t\tcontext.commit('opus_setCatalog', {\n\t\t\t\t\tcatalog_id: res.catalog_id\n\t\t\t\t});\n\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\topus_updateCatalog: function opus_updateCatalog(context, payload) {\n\t\t\tvar promise = opus.updateCatalog({\n\t\t\t\t\"level\": payload.level,\n\t\t\t\t\"category_id\": payload.category_id,\n\t\t\t\t\"catalog_id\": payload.catalog_id,\n\t\t\t\t\"catalog_title\": payload.catalog_title,\n\t\t\t\t\"catalog_desc\": payload.catalog_desc,\n\t\t\t\t\"catalog_cover_url\": payload.catalog_cover_url,\n\t\t\t\t\"catalog_status\": payload.catalog_status,\n\t\t\t\t\"catalog_label\": payload.catalog_label,\n\t\t\t\t\"translate\": payload.translate,\n\t\t\t\t\"authorize\": payload.authorize,\n\t\t\t\t\"reprint\": payload.reprint }).then(function (res) {\n\t\t\t\tcontext.commit('opus_setCatalog', {\n\t\t\t\t\tcatalog_id: res.catalog_id\n\t\t\t\t});\n\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\topus_getCatalogDetail: function opus_getCatalogDetail(context, payload) {\n\t\t\tif (!payload.catalogId) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tvar promise = opus.getCatalogDetail(payload).then(function (res) {\n\t\t\t\tcontext.commit('opus_setCatalog', {\n\t\t\t\t\tinfo: res.info\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_addChapter: function opus_addChapter(context, payload) {\n\t\t\tvar promise = opus.addChapter({\n\t\t\t\t\"catalog_id\": payload.catalog_id,\n\t\t\t\t\"chapter_title\": payload.chapter_title,\n\t\t\t\t\"chapter_desc\": payload.chapter_desc,\n\t\t\t\t\"chapter_content\": payload.chapter_content,\n\t\t\t\t\"chapter_status\": payload.chapter_status }).then(function (res) {\n\t\t\t\tcontext.commit('opus_setChapter', {\n\t\t\t\t\tchapter_id: res.chapter_id\n\t\t\t\t});\n\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\topus_addCommentPraise: function opus_addCommentPraise(context, payload) {\n\t\t\tif (!payload.commentId) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t}\n\t\t\tvar promise = opus.addCommentPraise({\n\t\t\t\t\"commentId\": payload.commentId\n\t\t\t}).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\topus_addPraise: function opus_addPraise(context, payload) {\n\t\t\tif (!payload.catalogId || !payload.chapterId) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t}\n\t\t\tvar promise = opus.addPraise({\n\t\t\t\t\"catalogId\": payload.catalogId,\n\t\t\t\t\"chapterId\": payload.chapterId\n\t\t\t}).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\topus_getLabelList: function opus_getLabelList(context, payload) {\n\t\t\tvar promise = opus.getLabelList({\n\t\t\t\t\"count\": payload.count\n\t\t\t}).then(function (res) {\n\t\t\t\tcontext.commit('opus_setCategory', {\n\t\t\t\t\ttags: res.list\n\t\t\t\t});\n\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\topus_updateChapter: function opus_updateChapter(context, payload) {\n\t\t\tvar promise = opus.updateChapter({\n\t\t\t\t\"chapter_id\": payload.chapter_id,\n\t\t\t\t\"chapter_title\": payload.chapter_title,\n\t\t\t\t\"chapter_desc\": payload.chapter_desc,\n\t\t\t\t\"chapter_content\": payload.chapter_content,\n\t\t\t\t\"chapter_status\": payload.chapter_status }).then(function (res) {\n\t\t\t\tcontext.commit('opus_setChapter', {\n\t\t\t\t\tchapter_id: res.chapter_id\n\t\t\t\t});\n\t\t\t\tvar lists = context.state.chapter.lists;\n\t\t\t\tfor (var i = 0, len = lists.length; i < len; i++) {\n\t\t\t\t\tif (lists[i].chapter_id == payload.chapter_id) {\n\t\t\t\t\t\tlists[i].chapter_title = payload.chapter_title;\n\t\t\t\t\t\tlists[i].chapter_desc = payload.chapter_desc;\n\t\t\t\t\t\tlists[i].chapter_content = payload.chapter_content;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcontext.commit('opus_setChapterList', {\n\t\t\t\t\tlists: lists\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\topus_getChapterDetail: function opus_getChapterDetail(context, payload) {\n\t\t\tif (!payload.chapterId) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tvar promise = opus.getChapterDetail(payload).then(function (res) {\n\t\t\t\tcontext.commit('opus_setChapter', {\n\t\t\t\t\tinfo: res.info\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_getHotList: function opus_getHotList(context, payload) {\n\t\t\tif (context.state.category.index) {\n\t\t\t\tpayload.body.category_id = context.state.category.index;\n\t\t\t}\n\t\t\tvar promise = opus.getCatalogList(payload).then(function (res) {\n\t\t\t\tcontext.commit('opus_setHot', {\n\t\t\t\t\tcount: res.page_info.total_count,\n\t\t\t\t\tlists: res.list,\n\t\t\t\t\tmore: res.more\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t},\n\t\topus_deleteChapter: function opus_deleteChapter(context, payload) {\n\t\t\tif (!payload.chapterId) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t}\n\t\t\tvar promise = opus.delChapter(payload).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_delCatalog: function opus_delCatalog(context, payload) {\n\t\t\tif (!payload.catalogId) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t}\n\t\t\tvar promise = opus.delCatalog(payload).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\topus_getMyCatalogList: function opus_getMyCatalogList(context, payload) {\n\t\t\tvar promise = opus.getMyCatalogList(payload).then(function (res) {\n\t\t\t\tcontext.commit('opus_setArticle', {\n\t\t\t\t\tcount: res.page_info.total_count,\n\t\t\t\t\tlists: res.list,\n\t\t\t\t\tmore: res.more\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t}\n\t}\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/server/modules/opus.js\n// module id = 3Tyq\n// module chunks = 0","import * as message from '../data/message'\r\n\r\nfunction _default(){\r\n\treturn {\r\n\t\tmessage: {\r\n\t\t\tlist: [],\r\n\t\t\tcount: 0\r\n\t\t},\r\n\t\tunread: {\r\n\t\t\tlist: []\r\n\t\t},\r\n\t\tdetail: {\r\n\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default {\r\n\tstate: _default(),\r\n\tmutations: {\r\n\t\tmessage_setMessage (state, payload) {\r\n\t\t\tfor (var key in payload) {\r\n\t\t\t\tstate.message[key] = payload[key];\r\n\t\t\t}\r\n\t\t},\r\n\t\tmessage_setUnread (state, payload){\r\n\t\t\tfor (var key in payload) {\r\n\t\t\t\tstate.unread[key] = payload[key];\r\n\t\t\t}\r\n\t\t},\r\n\t\tmessage_setDetail (state, payload){\r\n\t\t\tfor (var key in payload) {\r\n\t\t\t\tstate.detail[key] = payload[key];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tactions: {\r\n\t\tmessage_getMessageList (context, payload){\r\n\t\t\tvar promise = message.getMessageList(payload).then( res => {\r\n\t\t\t\tcontext.commit('message_setMessage', {\r\n\t\t\t\t\tlist: res.list,\r\n\t\t\t\t\tmore: res.more,\r\n\t\t\t\t\tcount: res.page_info.total_count\r\n\t\t\t\t})\r\n\t\t\t\treturn Promise.resolve(res);\r\n\t\t\t}).catch( err => {\r\n\t\t\t\treturn Promise.reject(err);\r\n\t\t\t})\r\n\t\t\treturn promise;\r\n\t\t},\r\n\t\tmessage_getUnreadMessage (context, payload){\r\n\t\t\tvar promise = message.getUnreadMessage().then( res => {\r\n\t\t\t\tcontext.commit('message_setUnread', {\r\n\t\t\t\t\tlist: res.list\r\n\t\t\t\t})\r\n\t\t\t\treturn Promise.resolve(res);\r\n\t\t\t}).catch( err => {\r\n\t\t\t\treturn Promise.reject(err);\r\n\t\t\t})\r\n\t\t\treturn promise;\r\n\t\t},\r\n\t\tmessage_getMessageDetail (context, payload){\r\n\t\t\tif (!payload.msgId) {\r\n\t\t\t\treturn Promise.rejectObj();\r\n\t\t\t}\r\n\t\t\tvar promise = message.getMessageDetail(payload).then( res => {\r\n\t\t\t\tcontext.commit('message_setDetail', {\r\n\t\t\t\t\tlist: res.list\r\n\t\t\t\t})\r\n\t\t\t\treturn Promise.resolve(res);\r\n\t\t\t}).catch( err => {\r\n\t\t\t\treturn Promise.reject(err);\r\n\t\t\t})\r\n\t\t\treturn promise;\r\n\t\t},\r\n\t\tmessage_markMessage (context, payload){\r\n\t\t\tif (!payload.msgType || !payload.msgId) {\r\n\t\t\t\treturn Promise.rejectObj();\r\n\t\t\t}\r\n\t\t\tvar promise = message.markMessage(payload).then( res => {\r\n\t\t\t\treturn Promise.resolve(res);\r\n\t\t\t}).catch( err => {\r\n\t\t\t\treturn Promise.reject(err);\r\n\t\t\t})\r\n\t\t\treturn promise;\r\n\t\t}\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/server/modules/message.js","<!-- style样式代码 -->\n<style lang=\"less\">\n@import (reference) '../common/css/common';\n@module: c-feedback;\n    .@{module} {\n        position: fixed;\n        top: 0;\n        left: 0;\n        z-index: 20;\n    \twidth: 100%;\n        height: 100%;\n        background-color: rgba(0,0,0,0.5);\n        & &-wrap {\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            width: 360px;\n            transform: translate(-50%, -50%);\n        }\n        & .content-form {\n            width: 360px;\n            padding: 30px;\n            .default_backgroud_2;\n            & .content-textarea {\n                position: relative;\n                width: 300px;\n                height: 200px;\n                padding: 20px;\n                margin-bottom: 15px;\n                .default_backgroud_4;\n                & textarea {\n                    width: 100%;\n                    .default_color_4;\n                    .default_font_size_2;\n                }\n                & .c-dialog__tip {\n                    transform: translate(-114%, 0);\n                }\n            }\n            & .content-input {\n                position: relative;\n                width: 300px;\n                height: 50px;\n                line-height: 50px;\n                padding-left: 20px;\n                .default_backgroud_4;\n                & input {\n                    width: 100%;\n                    .default_color_4;\n                    .default_font_size_2;\n                }\n                & .c-dialog__tip {\n                    transform: translate(-110%, 0);\n                }\n            }\n        }\n        & .content-btn {\n            width: 100%;\n            height: 50px;\n            padding: 10px 0;\n            overflow: hidden;\n            .default_backgroud_7;\n            & .content-btn-item {\n                float: left;\n                width: 50%;\n                height: 30px;\n                line-height: 30px;\n                text-align: center;\n                .default_color_2;\n                .default_font_size_2;\n                .default_pointer;\n                &:hover {\n                    .default_color_1;\n                }\n            }\n            & .content-btn-cancel {\n                .default_border-rr-2;\n            }\n        }\n    }\n</style>\n\n<!-- html代码 -->\n<template>\n    <div v-if=\"data.show\" class=\"c-feedback\">\n\t<div class=\"c-feedback-wrap\">\n        <div class=\"content-form\">\n            <div class=\"content-textarea\" :class=\"{'z-error': !content_reg}\">\n                <div v-if=\"!content_reg\" class=\"c-dialog__tip\">\n                    <div class=\"tip-arrow\"></div>\n                    <div class=\"tip-text\">{{content_reg_con}}</div>\n                </div>\n                <textarea placeholder=\"写下你的宝贵建议...\" v-model=\"content\"></textarea>\n            </div>\n            <div class=\"content-input\" :class=\"{'z-error': !contact_reg}\">\n                <div v-if=\"!contact_reg\" class=\"c-dialog__tip\">\n                    <div class=\"tip-arrow\"></div>\n                    <div class=\"tip-text\">{{contact_reg_con}}</div>\n                </div>\n                <input type=\"text\" placeholder=\"留下你的联系方式...\" v-model=\"contact\" />\n            </div>\n        </div>\n        <div class=\"content-btn\">\n            <div class=\"content-btn-item content-btn-cancel\" @click=\"close\">取消</div>\n            <div class=\"content-btn-item content-btn-submit\" @click=\"send\">发送</div>\n        </div>\n    </div>\n    </div>\n</template>\n\n<script>\nimport {mapState} from 'vuex'\nexport default {\n    data (){\n        return {\n            content: '',\n            contact: '',\n            content_reg: true,\n            content_reg_con: '',\n            contact_reg: true,\n            contact_reg_con: ''\n        }\n    },\n    computed: mapState({\n        data: state => state.common\n    }),\n    methods: {\n        close (){\n            this.$store.dispatch('common_switch', false);\n        },\n        send (){\n            if (!$.trim(this.content)) {\n                this.content_reg = false;\n                this.content_reg_con = '输入您的建议';\n                return false\n            } else {\n                this.content_reg = true;\n                this.content_reg_con = '';\n            }\n\n            if (!$.trim(this.contact)) {\n                this.contact_reg = false;\n                this.contact_reg_con = '输入您的联系方式';\n                return false\n            } else {\n                this.contact_reg = true;\n                this.contact_reg_con = '';\n            }\n\n            this.$store.dispatch('common_addFeedback', {\n                \"content\": this.content, //文本内容\n                \"contact_info\": this.contact // 联系方式\n            }).then( res => {\n                this.$store.dispatch('common_switch', false);\n                this.$store.dispatch('bubble_success', {\n                    ret: 0,\n                    type: 'top',\n                    msg: '反馈成功'\n                });\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            })\n        }\n    }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// feedback.vue?0624cfac","<!-- style样式代码 -->\n<style lang=\"less\">\n@import (reference) '../common/css/common';\n    @module: c-author-header;\n\n    .@{module} {\n        position: relative;\n        z-index: 2;\n        width: 100%;\n        height: 260px;\n        padding-top: 40px;\n        .user_background_1;\n        & &-wrap {\n            .default_width_960;\n            .default_mar_auto;\n        }\n    }\n    .@{module}_left {\n        position: relative;\n        float: left;\n        width: 180px;\n        height: 180px;\n        margin-right: 20px;\n        .default_backgroud_4;\n        .default_border-r-50;\n        & .img {\n            width: 100%;\n            height: 100%;\n            overflow: hidden;\n            .default_border-r-50;\n        }\n        & .icon {\n            position: absolute;\n            bottom: 0;\n            right: 0;\n            width: 40px;\n            height: 40px;\n            .default_border-r-50;\n            .default_backgroud_6;\n            .skin_icon_author-6;\n            .default_pointer;\n            &:hover {\n                .skin_icon_author-6_on;\n            }\n        }\n    }\n    .@{module}_right {\n        float: left;\n        width: 760px;\n        & .name {\n            height: 30px;\n            overflow: hidden;\n            margin-bottom: 15px;\n            & .name-text {\n                float: left;\n                margin-right: 15px;\n                .default_color_1;\n                .default_font_size_6;\n                .default_font_bolder;\n            }\n            & .name-time {\n                float: left;\n                height: 30px;\n                line-height: 30px;\n                .default_font_size_2;\n                .default_color_1;\n            }\n        }\n        & .btn {\n            height: 40px;\n            margin-bottom: 15px;\n            & .btn-item {\n                float: left;\n                height: 40px;\n                line-height: 40px;\n                margin-right: 10px;\n                .default_backgroud_5;\n                .default_border-r-4;\n                .default_center;\n                .default_color_1;\n                .default_font_size_2;\n                .default_pointer;\n                & a {\n                    display: inline-block;\n                    width: 100%;\n                    height: 100%;\n                    text-decoration: none;\n                    .default_color_1;\n                    .default_font_size_2;\n                }\n                & .cpm_sub_more {\n                    width: 150px;\n                }\n                &:hover {\n                    & .cpm_sub_more {\n                        display: block;\n                    }\n                }\n            }\n            & .btn-item:last-child {\n                margin-right: 0;\n            }\n            & .btn-mark {\n                width: 600px;\n            }\n            & .btn-share {\n                width: 100px;\n                position: relative;\n                .default_pointer;\n                .skin_icon_author-5;\n                &:hover {\n                    .skin_icon_author-5_on;\n                }\n            }\n            & .btn-more {\n                width: 40px;\n                position: relative;\n                .default_pointer;\n                .skin_icon_author-4;\n                &:hover {\n                    .skin_icon_author-4_on;\n                }\n            }\n        }\n        & .text {\n            line-height: 1.5rem;\n            .default_color_1;\n            .default_font_size_2;\n        }\n    }\n</style>\n\n<!-- html代码 -->\n<template>\n<div class=\"c-author-header\">\n<div class=\"c-author-header-wrap\">\n    <div class=\"c-author-header_left\">\n        <div class=\"img\"><img :src=\"user.avatar_url || avatar\" /></div>\n        <div v-show=\"userInfo.uid == user_id\" class=\"icon\" id=\"author_upload_image_select\"></div>\n        <UploadImg \n            type=\"1\" \n            select=\"author_upload_image_select\"\n            container=\"author_container\"\n            @uploadImg_uploaded=\"uploaded\" \n        />\n    </div>\n    <div class=\"c-author-header_right\">\n        <div class=\"name\">\n            <div class=\"name-text\">{{user.nick_name}}</div>\n            <div class=\"name-time\">社区年龄：<span>{{user.c_age}}</span></div>\n        </div>\n        <div class=\"btn\">\n            <div class=\"btn-item btn-mark\" \n                :class=\"[{'z-width': user.relation == -1}]\" \n                @click=\"follow\"\n            >\n                <span v-if=\"userInfo.uid != user_id\">{{ user.relation == 1 || user.relation == 3 ? '已关注' : '添加关注' }}</span>\n                <a v-else href=\"setting.userinfo.html\">个人设置</a>\n            </div>\n            <div class=\"btn-item btn-share\">\n                <div class=\"cpm_sub_more z-left\">\n                    <div class=\"item\">\n                        <div class=\"item-icon z-wx\"></div>\n                        <div class=\"item-text\">微信</div>\n                    </div>\n                    <div class=\"item\">\n                        <div class=\"item-icon z-peng\"></div>\n                        <div class=\"item-text\">朋友圈</div>\n                    </div>\n                    <div class=\"item\">\n                        <div class=\"item-icon z-wb\"></div>\n                        <div class=\"item-text\">微博</div>\n                    </div>\n                    <div class=\"item\">\n                        <div class=\"item-icon z-qq\"></div>\n                        <div class=\"item-text\">QQ 好友</div>\n                    </div>\n                    <div class=\"item\">\n                        <div class=\"item-icon z-kong\"></div>\n                        <div class=\"item-text\">QQ 空间</div>\n                    </div>\n                    <div class=\"item\">\n                        <div class=\"item-icon z-more\"></div>\n                        <div class=\"item-text\">更多</div>\n                    </div>\n                </div>\n            </div>\n            <div v-if=\"userInfo.uid != user_id\" class=\"btn-item btn-more\">\n                <div class=\"cpm_sub_more z-left\">\n                    <div class=\"item\" @click=\"addBlackDialog\">\n                        <div class=\"item-icon z-black\"></div>\n                        <div class=\"item-text\">加入黑名单</div>\n                    </div>\n                    <div class=\"item\" @click=\"addReport\">\n                        <div class=\"item-icon z-report\"></div>\n                        <div class=\"item-text\">举报</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"text\">{{user.signature}}</div>\n    </div>\n</div>\n</div>\n</template>\n\n<script>\nimport {mapState} from 'vuex'\nimport avatar from '../common/images/img/avatar.png';\nexport default {\n    data () {\n        return  {\n            avatar: avatar,\n            user_id: '',\n            user: {}\n        }\n    },\n    computed: mapState({\n        userInfo: state => state.user.info,\n    }),\n    methods: {\n        uploaded (fileUrl, isAgain){\n            if (isAgain) {\n                return false;\n            }\n                \n            // 设置上传的图片\n            this.$store.dispatch('user_setUserInfo', {\n                avatar_url: fileUrl\n            }).then( filename => {\n                this.$store.dispatch('user_updateUserInfo', {\n                    // todo\n                }).then(() => {\n                    this.$store.dispatch('bubble_success', {\n                        ret: 0,\n                        type: 'top',\n                        msg: '保存成功！'\n                    });\n\n                    // 更新用户信息\n                    var cache_userInfo = this.$version.userInfo;\n                    this.$cache.setStore(cache_userInfo.key, this.userInfo, cache_userInfo.version, cache_userInfo.time);\n                }).catch(err => {\n                    this.$store.dispatch('bubble_fail', err);\n                }); \n            })\n        },\n        getAuthorInfo (){\n            if (!this.user_id) {\n                return false;\n            }\n            this.$store.dispatch('user_getUserInfo', {\n                userId: this.user_id\n            }).then( info => {\n                this.user = info;\n\n                this.$store.dispatch('bubble_success', info);\n            }).catch(err => {\n                this.$store.dispatch('bubble_fail', err);\n            }); \n        },\n        follow (e){\n            // 判断登陆\n            if (!this.userInfo.isLogin) {\n                return this.$store.dispatch('bubble_fail', {\n                    ret: -11,\n                    msg: '未登录，请登陆后操作'\n                });\n                return false;\n            } else if (this.user.relation == 1 || this.user.relation == 3) { // 取消关注\n                this.$store.dispatch('auth_delFollow', {\n                    userId: this.user.uid\n                }).then( res => {\n                    this.getAuthorInfo();\n\n                    this.$store.dispatch('bubble_success', res);\n                }).catch(err => {\n                    this.$store.dispatch('bubble_fail', err);\n                });\n            } else { // 关注\n                this.$store.dispatch('auth_addFollow', {\n                    userId: this.user.uid\n                }).then( res => {\n                    this.getAuthorInfo();\n\n                    this.$store.dispatch('bubble_success', res);\n                }).catch(res => {\n                    this.$store.dispatch('bubble_fail', err);\n                });\n            }\n        },\n        addBlackDialog (){\n            var that = this;\n\n            // 判断登陆\n            if (!this.userInfo.isLogin) {\n                return this.$store.dispatch('bubble_fail', {\n                    ret: -11,\n                    msg: '未登录，请登陆后操作'\n                });\n            }\n\n            this.$store.dispatch('bubble_showBubble', {\n                show: true,\n                type: 'warn',\n                warn: {\n                    title: '确定要加入加入黑名单?',\n                    content: '添加到黑名单中的用户，无法再您的作品下评论，无法回复您，TA的作品页不会向您推送',\n                    comfireFn: function(){\n                        that.addBlack();\n                    }\n                },\n            })\n        },\n        addBlack (){\n            // 判断是否已经是黑名单\n            if (this.user.black == 1) {\n                this.$store.dispatch('bubble_fail', {\n                    ret: -31,\n                    msg: '已经添加黑名单' \n                });\n                return false;\n            }\n\n            this.$store.dispatch('auth_addBlack', {\n                userId: this.user.uid\n            }).then( res => {\n                this.$store.dispatch('bubble_success', {\n                    ret: 0,\n                    type: 'top',\n                    msg: '添加成功'\n                });\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        // 举报\n        addReport (){\n            // 判断登陆\n            if (!this.userInfo.isLogin) {\n                return this.$store.dispatch('bubble_fail', {\n                    ret: -11,\n                    msg: '未登录，请登陆后操作'\n                });\n            }\n\n            this.$store.dispatch('bubble_showBubble', {\n                show: true,\n                type: 'report',\n                report: {\n                    content_id: this.user.uid,\n                    content_type: 3\n                }\n            })\n        }\n    },\n    mounted () {\n        $('body').on('click', e => {\n            var node = $(e.target);\n            if (!node.hasClass('j-close-2') && node.parents('.j-close-2').length == 0) {\n                this.subMoreMoreShow = false;\n                this.subShareMoreShow = false;\n            }\n        })\n\n        // 获取url的参数\n        this.user_id = this.$url.getUrlParam('user_id');\n\n        // 获取用户信息\n        this.getAuthorInfo();\n    }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// author.header.vue?494905af","<!-- style样式代码 -->\n<style lang=\"less\">\n@import (reference) '../common/css/common';\n    @module: c-artice;\n    .@{module}-hot {\n        width: 100%;\n        height: 500px;\n        padding-top: 40px;\n        .default_backgroud_4;\n        .@{module}-hot-wrap {\n            height: 460px;\n            width: 960px;\n            overflow: hidden;\n            .default_mar_auto;\n            & .hot-top {\n                width: 100%;\n                height: 50px;\n                padding-top: 30px;\n                margin-bottom: 20px;\n                overflow: hidden;\n                background-image: url('../common/images/img/bg-1.png');\n                background-position: top center;\n                background-repeat: no-repeat;\n                background-size: cover;\n                & .hot-top-right {\n                    float: right;\n                    height: 20px;\n                    overflow: hidden;\n                }\n                & .hot-top-right .item {\n                    float: left;\n                    height: 20px;\n                    line-height: 20px;\n                    .default_color_2;\n                    .default_font_size_2;\n                    .default_middle;\n                }\n                & .hot-top-right .item-number {\n                    margin-right: 8px;\n                }\n                & .hot-top-right .item-btn {\n                    position: relative;\n                    width: 20px;\n                    height: 20px;\n                    .default_backgroud_2;\n                    .default_border-r-4;\n                    .default_pointer;\n                    & span {\n                        position: absolute;\n                        display: block;\n                        width: 20px;\n                        height: 20px;\n                        transition: opacity @default_speed_1;\n                    }\n                }\n                & .hot-top-right .item-left {\n                    margin-right: 5px;\n                    & span:nth-child(1) {\n                        opacity: 1;\n                        .skin_icon_left-1;    \n                    }\n                    & span:nth-child(2) {\n                        opacity: 0;\n                        .skin_icon_left-1_on;    \n                    }\n                    &:hover span:nth-child(1) {\n                        opacity: 0;\n                    }\n                    &:hover span:nth-child(2) {\n                        opacity: 1;\n                    }\n                }\n                & .hot-top-right .item-right {\n                    & span:nth-child(1) {\n                        opacity: 1;\n                        .skin_icon_right-1;    \n                    }\n                    & span:nth-child(2) {\n                        opacity: 0;\n                        .skin_icon_right-1_on;    \n                    }\n                    &:hover span:nth-child(1) {\n                        opacity: 0;\n                    }\n                    &:hover span:nth-child(2) {\n                        opacity: 1;\n                    }\n                }\n            }\n            & .hot-list {\n                width: 100%;\n                height: 350px;\n                padding-left: 10px;\n                transition: transform @default_speed_1;\n                & .hot-list-item {\n                    position: relative;\n                    float: left;\n                    width: 140px;\n                    height: 350px;\n                    padding: 10px;\n                    margin-right: 10px;\n                    transition: all @default_speed_1;\n                    .default_backgroud_2;\n                    .default_border-r-4;\n                    & a {\n                        display: block;\n                        width: 100%;\n                        height: 100%;\n                        text-decoration: none;\n                    }\n                    &:hover {\n                        transform: translate(0, -2px);\n                        .default_border_shadow_4;\n                    }\n                }\n                & .hot-list__hd {\n                    position: relative;\n                    width: 120px;\n                    height: 160px;\n                    margin-bottom: 12px;\n                    & .hot-list__hd-img {\n                        width: 100%;\n                        height: 100%;\n                        overflow: hidden;\n                        .default_backgroud_5;\n                        & img {\n                            max-width: 100%;\n                        }\n                    }\n                    & .hot-list__hd-text {\n                        position: absolute;\n                        right: 8px;\n                        bottom: 8px;\n                        width: 40px;\n                        height: 20px;\n                        line-height: 18px;\n                        text-align: center;\n                        border: 1px solid @default_backgroud_13;\n                        border-radius: 10px;\n                        .default_color_1;\n                        .default_font_size_1;\n                        .default_backgroud_3;\n                    }\n                }\n                & .hot-list__title {\n                    line-height: 1.5rem;\n                    margin-bottom: 10px;\n                    .default_font_size_7;\n                    .default_color_1;\n                    .default_font_family_bolder;\n                    &:hover {\n                        .default_color_10;\n                    }\n                }\n                & .hot-list__tag a {\n                    float: left;\n                    margin-right: 8px;\n                    margin-bottom: 8px;\n                    .default_font_size_1;\n                    .default_color_3;\n                    &:hover {\n                        .default_color_1;\n                    }          \n                }\n                & .hot-list__ft {\n                    position: absolute;\n                    left: 10px;\n                    bottom: 10px;\n                    height: 20px;\n                    overflow: hidden;\n                }\n                & .hot-list__ft-img {\n                    float: left;\n                    width: 20px;\n                    height: 20px;\n                    margin-right: 8px;\n                    overflow: hidden;\n                    .default_backgroud_5;\n                    .default_border-r-50;\n                }\n                & .hot-list__ft-name {\n                    width: 90px;\n                    height: 20px;\n                    line-height: 20px;\n                    text-overflow: ellipsis;\n                    white-space: nowrap;\n                    overflow: hidden;\n                    .default_font_size_1;\n                    .default_color_3; \n                    &:hover {\n                        .default_color_1;\n                    }\n                }\n            }\n        }\n    }\n</style>\n\n<!-- html代码 -->\n<template>\n<div class=\"c-artice-hot\">\n    <div class=\"c-artice-hot-wrap\">\n        <div class=\"hot-top\">\n            <div class=\"hot-top-right\">\n                <div class=\"item item-number\">{{pageIndex}}/{{hot_number}}</div>\n                <div class=\"item item-btn item-left\" @click=\"hotSwitch('left')\">\n                    <span></span>\n                    <span></span>\n                </div>\n                <div class=\"item item-btn item-right\" @click=\"hotSwitch('right')\">\n                    <span></span>\n                    <span></span>\n                </div>\n            </div>\n        </div>\n        <div class=\"hot-list\" :style=\"{width: hot.lists.length*150+10 + 'px', transform: 'translate(-'+ move +'px, 0)'}\">\n            <div class=\"hot-list-item\" v-for=\"item in hot.lists\"><a :href=\"'article.html?catalog_id=' + item.catalog_id\">\n                <div class=\"hot-list__hd\">\n                    <div class='hot-list__hd-img'>\n                        <img :src=\"item.catalog_cover_url\" /> \n                    </div>\n                    <div class='hot-list__hd-text'>{{item.category_title}}</div>\n                </div>\n                <div class=\"hot-list__bd\">\n                    <div class=\"hot-list__title\">{{item.catalog_title}}</div>\n                    <div class=\"hot-list__tag\">\n                        <a \n                            v-for=\"label in item.labels\"\n                            :href=\"'./page.html?labelTag='+ label\" \n                        >\n                            {{label}}\n                        </a>\n                    </div>\n                </div>\n                <div class=\"hot-list__ft\">\n                    <div class=\"hot-list__ft-img\">\n                        <img :src=\"item.user.avatar_url || avatar\" />\n                    </div>\n                    <div class=\"hot-list__ft-name\">{{item.user.nick_name}}</div>\n                </div>\n            </a></div>\n        </div>\n    </div>\n</div>\n</template>\n\n<script>\nimport {mapState} from 'vuex'\nimport avatar from '../common/images/img/avatar.png';\nexport default {\n    data () {\n        return {\n            avatar: avatar,\n            // hot\n            hot_isCan: true,\n            pageIndex: 0,\n            pageSize: 20,\n            move: 0\n        }\n    },\n    props: [],\n    computed: mapState({\n        hot: state => state.opus.hot,\n        hot_number (){\n            return Math.ceil(this.$store.state.opus.hot.count/6)\n        },\n        user: state => state.user.info,\n        tag: state => state.opus.category,\n    }),\n    methods: {\n        hotSwitch (type){\n            if (!this.hot_number) {\n                return false;\n            }\n            if (type == 'left' && this.pageIndex == 1) {\n                return false;\n            }\n            if (type == 'right' && this.pageIndex == this.hot_number) {\n                return false;\n            }\n            if (!this.hot_isCan) {\n                return false;\n            }\n            this.hot_number = false;\n\n            if (type == 'left') {\n                this.pageIndex--;\n            } else {\n                this.pageIndex++;\n            }\n\n            if (type == 'left') {\n                this.move = (this.pageIndex-1)*900;\n            } else {\n                if (this.pageIndex*6 + 1 <= this.hot_number ) {\n                    this.move = (this.pageIndex-1)*900;\n                } else {\n                    this.move = this.hot.lists.length*150+10 - 960;\n                }\n            }\n\n            setTimeout( res => {\n                this.hot_isCan = true;\n            }, 500)\n        },\n        getHotList (){\n            // 未登录处理\n            /*if (!this.user.isLogin && this.resType != 'index') {\n                console.log('----error----on login, getHotList');\n                return false;\n            }*/\n\n            this.$store.dispatch('opus_getHotList', {\n                \"params\": {\n                    \"pagination\": \"1\",\n                    \"page\": this.pageIndex, //页数,默认不传查询第一页\n                    \"pageSize\": this.pageSize //每页数量 默认10\n                },\n                \"body\": {\n                    \"catalog_type\": \"1\" // 0 普通（默认） 1 热门 2 优秀 如果没有此参数则查询所有\n                }\n            }).then( res => {\n                // todo\n                if (res && !!res.list && !!res.list.length) {\n                    this.pageIndex = 1;\n                }\n\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            })\n        }\n    },\n    mounted (){\n        // watch tags change\n        this.$watch('tag.index', function(newVal, oldVal){\n            this.pageIndex = 1;\n            this.getHotList();\n        })\n\n        this.getHotList();\n    }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// article.hot.vue?99bad582","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-1c1dd24d\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./uploadImg.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./uploadImg.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1c1dd24d\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./uploadImg.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/uploadImg.vue\n// module id = 5hbK\n// module chunks = 0","import axios from 'axios'\r\nimport {baseUrl, _reject, _rejectObj} from '../config'\r\nimport Cookies from 'js-cookie';\r\nvar token = Cookies.get('token');\r\n\r\n/**\r\n * 获取用户消息列表\r\nURL:http://domain/eryuzhisen-server/user/getMessageList\r\nMethod:GET\r\nrequest:\r\nparams:\r\n\"page\":\"1\",//页数,默认不传查询第一页\r\n\"pageSize\":\"10\",//每页数量 默认10\r\n\"pagination\":1,//1表示返回页码相关信息 0 或者 不传 则不返回\r\n\"messageType\":\"1\"//消息类型 0 其他 1 精选,推荐 2 评论\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"more\":\"1\",//是否还有更多 0 没有 1 还有更多,供没有页码的客户端使用\r\n\t\"page_info\":{//pagination为1 才有\r\n\t\t\t\"total_count\":\"300\",//总数量\r\n\t\t\t\"page_count\":\"30\"//总页数\t\r\n\t\t},\r\n\t\"list\":[\r\n\t\t{\r\n\t\t\t\"msg_id\":\"111\",//消息id\r\n\t\t\t\"msg_type\":\"1\",//0 其他 1 精选 2 评论\r\n\t\t\t\"message\":{//消息体\r\n\t\t\t\t\"sender\":{\"user_id\":\"111\",\"nick_name\":\"xxxx\",\"avatar_url\":\"xxxx\"},//发送者\r\n\t\t\t\t\"receiver\":{\"user_id\":\"111\",\"nick_name\":\"xxxx\",\"avatar_url\":\"xxxx\"}//接收者\r\n\t\t\t\t\"content\":{\r\n\t\t\t\t\t\"title\":\"xxxx\",//如:对xxx在<<xxxx>>中的评论进行了回复\r\n\t\t\t\t\t\"cite\":\"xxxxxxx\",//引文,如果是回复评论,此处表示之前用户的评论\r\n\t\t\t\t\t\"content\":\"xxxxxx\",//消息内容\r\n\t\t\t\t\t\"media_url\":\"http://xxxxx\"//如果存在图片或者视频等等\t\t\r\n\t\t\t\t},\r\n\t\t\t\t\"read\":\"0\",//0 未读 1 已读\r\n\t\t\t\t\"attach\":{}//结构等同于附录,点击消息弹框或者跳转\r\n\t\t\t\t\"arguments\":{\"catalog_id\",\"xxxx\",\"chapter_id\":\"xxxx\",\"to_comment_id\":\"xxxx\",\"to_reply_comment_id\":\"xxxxx\"},//目前只有评论消息带有此参数，参数供回复评论使用\r\n\t\t\t}\r\n\t\t\t\"create_time\":\"xxx\",//创建时间\r\n\t\t},\r\n\t.....\r\n\t]\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getMessageList(option){\r\n\tvar url = baseUrl + 'user/getMessageList';\r\n\tvar prosime = axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 获取消息详情\r\nURL:http://domain/eryuzhisen-server/user/getMessageDetail\r\nMethod:GET\r\nrequest:\r\nparams:\r\n\"msgId\":\"1111\"//消息id\r\n\r\nresponse:\r\n{\r\n\t\"msg_header_icon\":\"http://xxxx\",//头像\r\n\t\"msg_id\":\"111\",//消息id\r\n\t\"msg_content\":\"xxx\",//消息文本内容\r\n\t\"msg_media_url\":\"http://xxxxx\",//消息媒体url\r\n\t\"create_time\":\"xxx\",//创建时间\r\n\t\"read\":\"0\",//0 未读 1 已读\r\n\t\"attach\":{}//结构等同于附录,点击消息弹框或者跳转\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getMessageDetail(option){\r\n\tvar url = baseUrl + 'user/getMessageDetail';\r\n\tvar prosime = axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 删除消息\r\nURL:http://domain/eryuzhisen-server/user/delMessage/{msgId}\r\nMethod:DELETE\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\"\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction delMessage(option){\r\n\tvar url = baseUrl + 'user/delMessage/'+ option.msgId;\r\n\r\n\t// 没有登录态\r\n\tif (!token) {\r\n\t\treturn _rejectObj({\r\n\t\t\tret: -10,\r\n\t\t\tmsg: '未登录'\r\n\t\t});\r\n\t}\r\n\r\n\tdelete option._header;\r\n\treturn axios({\r\n\t\tmethod: 'DELETE',\r\n\t\turl: url,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t    return _rejectObj(error);\r\n\t});\r\n}\r\n\r\n/**\r\n * 标记已读消息\r\nURL:http://domain/eryuzhisen-server/user/markMessage/{msgType}/{msgId}\r\nMethod:PUT\r\nmsgType:1//消息类型 0 其他 1 精选,推荐 2 评论\r\nmsgId:20//需要标记的消息id *******如果为-1 则表示当前类型消息全部已读******\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\"\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction markMessage(option){\r\n\tvar url = baseUrl + 'user/markMessage/'+ option.msgType +'/'+ option.msgId;\r\n\r\n\t// 没有登录态\r\n\tif (!token) {\r\n\t\treturn _rejectObj({\r\n\t\t\tret: -10,\r\n\t\t\tmsg: '未登录'\r\n\t\t});\r\n\t}\r\n\r\n\tdelete option._header;\r\n\treturn axios({\r\n\t\tmethod: 'PUT',\r\n\t\turl: url,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t    return _rejectObj(error);\r\n\t});\r\n}\r\n\r\n/**\r\n * 获取未读消息条数\r\nURL:http://domain/eryuzhisen-server/user/getUnreadMessage\r\nMethod:GET\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"list\":[\r\n\t\t{\r\n\t\t\t\"message_type\":\"1\",//消息类型 0 其他 1 精选,推荐 2 评论\r\n\t\t\t\"unread_count\":\"20\",//未读条数\r\n\t\t},\r\n\t\t.....\r\n\t]\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getUnreadMessage(option){\r\n\tvar url = baseUrl + 'user/getUnreadMessage';\r\n\r\n\t// 没有登录态\r\n\tif (!token) {\r\n\t\treturn _rejectObj({\r\n\t\t\tret: -10,\r\n\t\t\tmsg: '未登录'\r\n\t\t});\r\n\t}\r\n\r\n\tvar prosime = axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\nexport {\r\n\tgetMessageList,\r\n\tgetMessageDetail,\r\n\tdelMessage,\r\n\tmarkMessage,\r\n\tgetUnreadMessage,\r\n\r\n\t_reject,\r\n\t_rejectObj\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/data/message.js","<!-- style样式代码 -->\n<style lang=\"less\">\n@import (reference) '../common/css/common';\n    .c-author-list {\n        width: 100%;\n        height: 100%;\n        & &-wrap {\n            margin-bottom: 30px;\n            .default_backgroud_2;    \n        }\n        & a {\n            text-decoration: none;\n        }\n        & .list-author__item {\n            position: relative;\n            display: table;\n            width: 100%;\n            height: 70px;\n            padding: 0 20px;\n            .default_border-b-14;\n            &:hover {\n                .default_border_shadow_4;\n            }\n            & a {\n                text-decoration: none;\n            }\n        }\n        & .list-author__img {\n            display: table-cell;\n            vertical-align: middle;\n            width: 30px;\n        }\n        & .list-author__avatar {\n            width: 30px;\n            height: 30px;\n            overflow: hidden;\n            .default_border-r-50;\n            .default_backgroud_5;\n        }\n        & .list-author__content {\n            display: table-cell;\n            vertical-align: middle;\n            width: 610px;\n            padding-left: 10px;\n        }\n        & .list-author__name {\n            display: block;\n            margin-bottom: 6px;\n            .default_color_2;\n            .default_font_size_1;\n        }\n        & .list-author__text {\n            overflow: hidden;\n            .default_font_size_1;\n            .default_color_3;\n        }\n        & .list-author__work {\n            float: left;\n            margin-right: 10px;\n        }\n        & .list-author__fans {\n            float: left;\n        }\n        & .list-author__btn {\n            position: absolute;\n            top: 20px;\n            right: 20px;\n            height: 30px;\n            line-height: 30px;\n            .default_border-r-4;\n            .default_backgroud_3;\n            .default_font_size_2;\n            .default_color_3;\n            .default_pointer;\n            .default_center;\n            &.z-active,\n            &:hover {\n                .default_color_2;\n                .default_backgroud_5;\n            }\n        }\n        & .list-author__btn-1 {\n            width: 50px;\n        }\n        & .list-author__btn-2 {\n            width: 60px;\n        }\n        & .list-author__btn-3 {\n            width: 80px;\n        }\n        &.z-active .list-author__btn {\n            float: right;\n        }\n    }\n    .c-author-item:last-child .c-author-item-wrap {\n        .default_border-n;\n    }\n</style>\n\n<!-- html代码 -->\n<template>\n<div class=\"c-author-list\" :class=\"'z-' + resType\">\n<div class=\"c-author-list-wrap\">\n    <a class=\"list-author__item\" v-for=\"data in lists\" :href=\"'author.work.html?user_id=' + data.uid\">\n        <div class=\"list-author__img\">\n            <div class=\"list-author__avatar\">\n                <img :src=\"data.avatar_url || avatar\"  />\n            </div>\n        </div>\n        <div class=\"list-author__content\">\n            <div class=\"list-author__name\">{{data.nick_name}}</div>\n            <div class=\"list-author__text\">\n                <div class=\"list-author__work\">作品：{{data.opus_count}}</div>\n                <div class=\"list-author__fans\">粉丝：{{data.fans_count}}</div>\n                <div v-if=\"data.relation == 0\" class=\"list-author__btn list-author__btn-1\" @click.stop.prevent=\"addFollow(data.uid)\">关注</div>\n                <div v-if=\"data.relation == 1 || data.relation == 3\" class=\"list-author__btn list-author__btn-2\" @click.stop.prevent=\"delFollow(data.uid)\">已关注</div>\n                <div v-if=\"data.relation == 2\" class=\"list-author__btn list-author__btn-3\" @click.stop.prevent=\"addFollow(data.uid)\">相互关注</div>\n                <div v-if=\"data.black == 1\" class=\"list-author__btn list-author__btn-3\" @click.stop.prevent=\"delBlack(data.uid)\">取消拉黑</div>\n            </div>\n        </div>\n    </a>\n    <Empty v-if=\"count <= 0\" />\n</div>\n<Page \n    :count=\"count\" \n    :length=\"pageSize\"\n    :index=\"pageIndex\"\n    @page_switch=\"pageSwitch\"\n/>\n</div>\n</template>\n\n<script>\nimport {mapState} from 'vuex'\nimport avatar from '../common/images/img/avatar.png';\nexport default {\n    data (){\n        return {\n            avatar: avatar,\n            pageIndex: 1,\n            pageSize: 5,\n            query: ''\n        }\n    },\n    props: ['resType'],\n    computed: mapState({\n        count: state => state.auth.count,\n        user: state => state.user.info,\n        lists: state => state.auth.lists,\n        self: function(){\n            return this.resType == 'blacklist' || this.user_id == this.user.uid\n        }\n    }),\n    methods: {\n        pageSwitch (pageIndex) {\n            if (this.pageIndex == pageIndex) {\n                return false;\n            }\n            this.pageIndex = pageIndex;\n            this.getList();\n        },\n        delBlack (uid){\n            this.$store.dispatch('auth_delBlack', {\n                userId: uid\n            }).then( res => {\n                this.getList();\n\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        addFollow (uid){\n            this.$store.dispatch('auth_addFollow', {\n                userId: uid\n            }).then( res => {\n                this.getList();\n\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                tthis.$store.dispatch('bubble_fail', err);\n            });\n        },\n        delFollow (uid){\n            this.$store.dispatch('auth_delFollow', {\n                userId: uid\n            }).then( res => {\n                this.getList();\n\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        getUserList (){\n            this.$store.dispatch('auth_getUserList', {\n                \"pagination\": \"1\",\n                \"query\": this.query || '', // 模糊查询\n                \"page\": this.pageIndex, //页数,默认不传查询第一页\n                \"pageSize\": this.pageSize //每页数量 默认10\n            }).then( res => {\n                this.$emit('author_count', this.count);\n\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        getFollowList (){\n            this.$store.dispatch('auth_getFollowList', {\n                \"userId\": this.user_id ? this.user_id : '', // 用户uid\n                \"pagination\": \"1\",\n                \"page\": this.pageIndex, //页数,默认不传查询第一页\n                \"pageSize\": this.pageSize //每页数量 默认10\n            }).then( res => {\n                this.$emit('author_count', this.count);\n\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        getFansList (){\n            this.$store.dispatch('auth_getFansList', {\n                \"userId\": this.user_id ? this.user_id : '', // 用户uid\n                \"pagination\": \"1\",\n                \"page\": this.pageIndex, //页数,默认不传查询第一页\n                \"pageSize\": this.pageSize //每页数量 默认10\n            }).then( res => {\n                this.$emit('author_count', this.count);\n\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        getBlackList (){\n            this.$store.dispatch('auth_getBlackList', {\n                pageSize: this.pageSize,\n                pageIndex: this.pageIndex\n            }).then( res => {\n                this.$emit('author_count', this.count);\n\n                this.$store.dispatch('bubble_success', res);\n            }).catch( res => {\n                this.$store.dispatch('bubble_fail', err);\n            }); \n        },\n        getList (){\n            if (this.resType == 'search') {\n                // 按照搜索获取作者\n                this.getUserList();\n            } else if (this.resType == 'blacklist') {\n                // 获取黑名单列表\n                this.getBlackList();\n            } else if (this.resType == 'followList') {\n                // 获取关注人数\n                this.getFollowList();\n            } else if (this.resType == 'fansList') {\n                this.getFansList();\n            }\n        }\n    },\n    created (){\n        this.$eventHub.$on('header_serach', option => {\n            if (this.query == option.query) {\n                return false;\n            }\n            this.query = option.query;\n            this.getList();\n        });\n    },  \n    mounted (){\n        // 获取url的参数\n        this.query = this.$url.getUrlParam('query');\n        this.user_id = this.$url.getUrlParam('user_id');\n\n        // 获取用户列表\n        this.getList();\n    }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// author.list.vue?02a5e03b","/**\r\n * 配置编译环境和线上环境之间的切换\r\n * \r\n * baseUrl: 域名地址\r\n * imgBaseUrl: 图片所在域名地址\r\n */\r\nvar baseUrl; \r\nvar imgBaseUrl = '';\r\nvar distUrl = '';\r\nvar isdebug = window.location.href.indexOf('isdebug=1') > 0;\r\n\r\nif (process.env.NODE_ENV == 'development') {\r\n\tbaseUrl = 'https://api.eryuzhisen.com/java/eryuzhisen-server/';\r\n\tdistUrl = '/dist/html/';\r\n\timgBaseUrl = '';\r\n}else{\r\n\tbaseUrl = '/java/eryuzhisen-server/';\r\n\tdistUrl = '/';\r\n\timgBaseUrl = '';\r\n}\r\n\r\nfunction _reject (response){\r\n\t// 跳转登录\r\n\tif (response.errcode == 30001) {\r\n\t\t// window.location.href = './login.html';\r\n\t}\r\n\treturn Promise.reject(response);\r\n}\r\n\r\nfunction _rejectObj(error){\r\n\tif (!!error && !!error.ret && error.ret > 0) {\r\n\t\treturn _reject(error);\r\n\t}\r\n    return _reject({\r\n    \tret: error && error.ret || -1,\r\n\t\tmsg: error && error.msg || '网络异常',\r\n\t\terror: error\r\n    })\r\n}\r\n\r\nexport {\r\n\tisdebug,\r\n\tbaseUrl,\r\n\timgBaseUrl,\r\n\tdistUrl,\r\n\t_reject,\r\n\t_rejectObj\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/server/config.js","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-footer\"\n  }, [_c('div', {\n    staticClass: \"c-footer-content\"\n  }, [_c('div', {\n    staticClass: \"footer-left\"\n  }, [_c('div', {\n    staticClass: \"menu\"\n  }, [_c('a', {\n    attrs: {\n      \"href\": _vm.url.about\n    }\n  }, [_vm._v(\"关于我们\")]), _vm._v(\"\\n\\t\\t\\t · \\n\\t\\t\\t\"), _c('a', {\n    attrs: {\n      \"href\": _vm.url.about\n    }\n  }, [_vm._v(\"用户协议\")]), _vm._v(\"\\n\\t\\t\\t · \\n\\t\\t\\t\"), _c('a', {\n    attrs: {\n      \"href\": _vm.url.about\n    }\n  }, [_vm._v(\"隐私政策\")]), _vm._v(\"\\n\\t\\t\\t · \\n\\t\\t\\t\"), _c('a', {\n    attrs: {\n      \"href\": _vm.url.about\n    }\n  }, [_vm._v(\"知识产权\")]), _vm._v(\"\\n\\t\\t\\t · \\n\\t\\t\\t\"), _c('a', {\n    attrs: {\n      \"href\": _vm.url.about\n    }\n  }, [_vm._v(\"侵权举报\")]), _vm._v(\"\\n\\t\\t\\t · \\n\\t\\t\\t\"), _c('a', {\n    attrs: {\n      \"href\": _vm.url.about\n    }\n  }, [_vm._v(\"免责声明\")]), _vm._v(\"\\n\\t\\t\\t · \\n\\t\\t\\t\"), _c('a', {\n    attrs: {\n      \"href\": _vm.url.contact\n    }\n  }, [_vm._v(\"联系我们\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"text\"\n  }, [_vm._v(\"© 2017 耳语之森 BETA1.0版 All RightReserved. 沪ICP备17018710号\")])]), _vm._v(\" \"), _vm._m(0)])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"footer-right\"\n  }, [_c('div', {\n    staticClass: \"icon\"\n  }, [_c('div', {\n    staticClass: \"icon-item\"\n  }, [_c('div', {\n    staticClass: \"qr\"\n  }, [_c('img', {\n    attrs: {\n      \"src\": require(\"../common/images/img/qr-1.png\")\n    }\n  })])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"icon-item\"\n  })])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-0f382ce0\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/component/footer.vue\n// module id = ApeN\n// module chunks = 0","/**\r\n * cache 1.0.0\r\n * @license MIT\r\n */\r\n(function(global, factory) {\r\n    typeof exports === 'object' && \r\n    typeof module !== 'undefined' ? \r\n        module.exports = factory() :\r\n        typeof define === 'function' && define.amd ? \r\n            define(factory) :\r\n            (global.cache = factory());\r\n}(this, (function() {\r\n    'use strict';\r\n\r\n    var Vue;\r\n    \r\n    function install(_Vue) {\r\n        if (Vue) {\r\n            console.error(\r\n                '[cache] already installed. Vue.use(cache) should be called only once.'\r\n            );\r\n            return\r\n        }\r\n        Vue = _Vue;\r\n        Vue.prototype.$cache = new Cache();\r\n    }\r\n\r\n    // 创建Cache实例\r\n    function Cache (){\r\n        this.memStoreMap = {};\r\n    }\r\n    // 创建url实例\r\n    Cache.prototype = {\r\n        /*\r\n        *   设置缓存 version,value,cacheTime\r\n        *   @param cacheTime 毫秒\r\n        */\r\n        setStore:function(key,value,version,cacheTime){\r\n            try{\r\n                if(!window.localStorage){\r\n                    return this;\r\n                }\r\n            }\r\n            catch(e){\r\n                return this;\r\n            }\r\n            var content=\"\";\r\n            \r\n            if(!cacheTime){  //如果没有cacheTime，就返回吧，没有意义！\r\n                return this;\r\n            }\r\n            \r\n            var d = {};\r\n            d.version=\"localCachev1\";\r\n            d.dataVersion=version;\r\n            d.cacheTime=((new Date()).getTime()+(cacheTime?parseInt(cacheTime,10):0));\r\n            d.content=value;\r\n            content=JSON.stringify(d);\r\n            \r\n            try{\r\n                this.memStoreMap[key] = content;\r\n                localStorage.setItem(key, content);\r\n            }\r\n            catch(e){\r\n                return this;\r\n            }\r\n            return this;\r\n        },\r\n        /*\r\n        *   获取缓存\r\n        */\r\n        getStore:function(key,version,forceLocal){//forceLocal强制取localstory\r\n            try{\r\n                if(!window.localStorage){\r\n                    return false;\r\n                }\r\n            }\r\n            catch(e){\r\n                return \"\";\r\n            }\r\n\r\n            var content = '';\r\n            if(forceLocal){\r\n                content = localStorage.getItem(key);\r\n            }else{\r\n                content=this.memStoreMap[key] || localStorage.getItem(key);\r\n            }\r\n            if(!content){return \"\";}\r\n            if(content.indexOf(\"localCachev1\")>=0){\r\n                var d=JSON.parse(content);\r\n                //检查数据版本是否有效\r\n                if(d.dataVersion!=version){\r\n                    return \"\";\r\n                }\r\n                //检查cache是否有效\r\n                if(d.cacheTime>=(new Date()).getTime()){\r\n                    return d.content;\r\n                }else{\r\n                    this.removeStore(key);\r\n                    return \"\";\r\n                }\r\n            }else{\r\n                return content;\r\n            }\r\n        },\r\n        /*\r\n        *   删除缓存\r\n        */\r\n        removeStore:function(key){\r\n            try{\r\n                if(!window.localStorage){\r\n                    return this;\r\n                }\r\n            }\r\n            catch(e){\r\n                return this;\r\n            }\r\n            localStorage.removeItem(key);\r\n            this.memStoreMap[key] = undefined;\r\n            delete this.memStoreMap[key];\r\n            return this;\r\n        }\r\n    };\r\n\r\n    var index = {\r\n        install: install,\r\n        version: '1.0.0'\r\n    };\r\n\r\n    return index;\r\n})));\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/vue.cache.js\n// module id = B6An\n// module chunks = 0","<!-- style样式代码 -->\n<style lang=\"less\">\n@import (reference) '../common/css/common';\n@module: c-artice-better;\n\n.@{module} {\n    & &-wrap {\n        width: 100%;\n        height: 100%;\n        margin-bottom: 30px;\n    }\n    & .@{module}-item {\n        width: 100%;\n        height: 100%;\n        padding: 20px;\n        .default_backgroud_2;\n        .default_border-b-14; \n    }\n    & .@{module}_content {\n        & .content__title {\n            margin-bottom: 10px;\n            .default_font_size_7;\n            .default_color_1;\n            .default_font_family_bolder;\n        }\n        & .content__time {\n            margin-bottom: 15px;\n            .default_font_size_1;\n            .default_color_3;\n        }\n        & .content__img {\n            width: 640px;\n            height: 320px;\n            overflow: hidden;\n            margin-bottom: 20px;\n            & img {\n                width: 100%;\n            }\n        }\n        & .content__text {\n            width: 100%;\n            line-height: 1.5rem;\n            margin-bottom: 15px;\n            .default_font_size_2;\n            .default_color_2;\n        }\n    }\n    & .@{module}_bottom {\n        & .bottom__link {\n            .default_font_size_2;\n            .default_color_5;\n        }\n    }\n}\n</style>\n\n<!-- html代码 -->\n<template>\n<div class=\"c-artice-better\">\n<div class=\"c-artice-better-wrap\">\n    <div class=\"c-artice-better-item\" v-for=\"item in lists\">\n        <div class=\"c-artice-better_content\">\n            <div class=\"content__title\">{{item.title}}</div>\n            <div class=\"content__time\">{{item.time}}</div>\n            <div class=\"content__img\"><img :src=\"item.img\" /></div>\n            <div class=\"content__text\">{{item.text}}</div>\n        </div>\n        <div class=\"c-artice-better_bottom\">\n            <a class=\"bottom__link\" href=\"#none\">阅读全文</a>\n        </div>\n    </div>\n    <Empty v-if=\"count <= 0\" />\n</div>\n<Page \n    :count=\"count\" \n    :length=\"pageSize\"\n    :index=\"pageIndex\"\n    @page_switch=\"pageSwitch\"\n/>\n</div>\n</template>\n\n<script>\nimport img1 from '../common/images/discover/img-1.png'\nexport default {\n    data (){\n        return {\n            count: 4,\n            lists: [\n                {\n                    name: '奇昊大本营',\n                    time: '2小时',\n                    img: img1,\n                    title: '路边传来了歌声',\n                    text: '《姑获鸟之夏》是日本作家京极夏彦的处女作，也是“京极堂”系列推理小说的第一部。在这部作品中，人称“京极堂”的主人公中禅寺秋彦运用广博的民俗学知识、复杂的...'\n                },\n                {\n                    name: '奇昊大本营',\n                    time: '2小时',\n                    img: img1,\n                    title: '路边传来了歌声',\n                    text: '《姑获鸟之夏》是日本作家京极夏彦的处女作，也是“京极堂”系列推理小说的第一部。在这部作品中，人称“京极堂”的主人公中禅寺秋彦运用广博的民俗学知识、复杂的...',\n                    tags: ['漫画'],\n                    fabulous: 123,\n                    comment: 8134\n                },\n                {\n                    name: '奇昊大本营',\n                    time: '2小时',\n                    img: img1,\n                    title: '路边传来了歌声',\n                    text: '《姑获鸟之夏》是日本作家京极夏彦的处女作，也是“京极堂”系列推理小说的第一部。在这部作品中，人称“京极堂”的主人公中禅寺秋彦运用广博的民俗学知识、复杂的...',\n                    tags: ['文字'],\n                    fabulous: 123,\n                    comment: 8134\n                }\n            ],\n\n            pageIndex: 1,\n            pageSize: 5,\n            messageType: 1\n        }\n    },\n    methods: {\n        pageSwitch (pageIndex){\n            if (this.pageSwitch == pageIndex) {\n                return false;\n            }\n            this.pageSwitch = pageIndex;\n        },\n        getMessageList (){\n            this.$store.dispatch('message_getMessageList', {\n                \"page\": this.pageIndex,\n                \"pageSize\": this.pageSize,\n                \"pagination\": 1,\n                \"messageType\": this.messageType\n            }).then( info => {\n                this.$store.dispatch('bubble_success', info);\n            }).catch(err => {\n                this.$store.dispatch('bubble_fail', err);\n            });\n        }\n    },\n    mounted (){\n        // 获取精选列表\n        this.getMessageList();\n    }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// article.better.vue?4f637382","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-2094868a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./feedback.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./feedback.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2094868a\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./feedback.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/feedback.vue\n// module id = BFCG\n// module chunks = 0","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-29e2c362\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./comment.info.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./comment.info.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-29e2c362\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./comment.info.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/comment.info.vue\n// module id = D3lx\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.hasScroll),\n      expression: \"hasScroll\"\n    }],\n    staticClass: \"c-side-menu\",\n    on: {\n      \"click\": _vm.top\n    }\n  }, [_c('span'), _vm._v(\" \"), _c('span'), _vm._v(\" \"), _vm._m(0)])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-dialog__tip\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(\"置顶\")])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-4ccba44a\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/component/sideMenu.vue\n// module id = DMxe\n// module chunks = 0","<!-- style样式代码 -->\n<style lang=\"less\">\n@import (reference) '../common/css/common';\n    @module: c-comment-info;\n\n    .@{module} {\n        & &-wrap {\n            margin-bottom: 30px;\n        }\n    }\n    .@{module}-list {\n        padding: 20px 30px 20px 20px;\n        .default_border-b-14;\n        .default_backgroud_2;\n        &.z-unread {\n            .default_backgroud_3;\n        }\n    }\n    .@{module}__top {\n        height: 20px;\n        overflow: hidden;\n        margin-bottom: 10px;\n        & .top__img {\n            float: left;\n            width: 20px;\n            height: 20px;\n            margin-right: 10px;\n            .default_border-r-50;\n            .default_backgroud_5;\n        }\n        & .top__name {\n            float: left;\n            height: 20px;\n            line-height: 20px;\n            .default_font_size_1;\n            .default_color_3;\n        }\n        & .top__detail {\n            float: right;\n            height: 20px;\n            line-height: 20px;\n            & a {\n                .default_font_size_1;\n                .default_color_3;\n            }\n        }\n    }\n    .@{module}__comment {\n        padding-left: 30px;\n        margin-bottom: 15px;\n        .default_color_2;\n        .default_font_size_2;\n        & .comment__top {\n            margin-bottom: 15px;\n            .default_color_3;\n            & strong {\n                .default_color_6;\n            }\n            & span {\n                .default_color_5;\n            }\n        }\n        & .comment__body {\n            line-height: 1.5rem;\n            margin-bottom: 15px;\n        }\n        & .comment__bottom {\n            line-height: 1.5rem;\n            padding: 20px;\n            .default_border-r-4;\n            .default_color_3;\n            .default_font_size_2;\n            .default_backgroud_7;\n        }\n    }\n    .@{module}__form {\n        padding-left: 30px;\n        overflow: hidden;\n        & .form__top {\n            height: 12px;\n            margin-bottom: 15px;\n            .default_font_size_1;\n            .default_color_3;\n        }\n        & .form__top__jubao {\n            float: left;\n            .default_pointer;\n            .default_font_size_1;\n            .default_color_3;\n            &:hover {\n                .default_color_1;\n            }\n        }\n        & .form__top__record {\n            float: right;\n            .default_pointer;\n            .default_font_size_1;\n            .default_color_2;\n            &:hover {\n                .default_color_1;\n            }\n        }\n        & .form__body {\n            width: 100%;\n            overflow: hidden;\n        }\n        & .form__body__write {\n            float: left;\n            width: 520px;\n            height: 40px;\n            .default_backgroud_4;\n            & input {\n                width: 520px;\n                height: 40px;\n                line-height: 40px;\n                padding: 0 20px;\n                .default_color_4;\n                .default_font_size_2;    \n            }\n        }\n        & .form_body__commit {\n            float: right;\n            width: 70px;\n            height: 40px;\n            line-height: 40px;\n            text-align: center;\n            .default_border-r-4;\n            .default_color_2;\n            .default_font_size_2;\n            .default_backgroud_5;\n            .default_pointer;\n            &:hover {\n                .default_color_1;\n            }\n        }\n    }\n</style>\n\n<!-- html代码 -->\n<template>\n<div class=\"c-comment-info\">\n<div class=\"c-comment-info-wrap\">\n    <div class=\"c-comment-info-list\" v-for=\"(data, index) in message.list\" :class=\"{'z-unread': data.read == 0}\">\n        <div class=\"c-comment-info__top\">\n            <div class=\"top__img\">\n                {{data.message.sender.avatar_utl}}\n            </div>\n            <div class=\"top__name\">{{data.message.sender.nick_name}}</div>\n        </div>\n        <div class=\"c-comment-info__comment\">\n            <div class=\"comment__top\" v-html=\"data.message.content.title\"></div>\n            <div class=\"comment__body\">{{data.message.content.content}}</div>\n            <div v-if=\"data.message.content.cite\" class=\"comment__bottom\">{{data.message.content.cite}}</div>\n        </div>\n        <div class=\"c-comment-info__form\">\n            <div class=\"form__top\">\n                <div class=\"form__top__jubao\" @click=\"addReport(data.message.sender.user_id)\">举报</div>\n                <div @click=\"recordSwitch(index, data.msg_id, data.read)\" class=\"form__top__record\">{{recordIndex == index ? '收起回复' : '回复'}}</div>\n            </div>\n            <div v-if=\"recordIndex == index\" class=\"form__body\">\n                <div class=\"form__body__write\">\n                    <input type=\"text\" placeholder=\"回复TA...\" v-model=\"comment\" />\n                </div>\n                <div class=\"form_body__commit\" @click=\"emitComment(data.message.arguments)\">提交</div>\n            </div>\n        </div>\n    </div>\n    <Empty \n        class=\"content-empty\" \n        v-if=\"message.count <= 0\"\n    />\n</div>\n<Page \n    :count=\"message.count\" \n    :length=\"pageSize\"\n    :index=\"pageIndex\"\n    @page_switch=\"pageSwitch\"\n/>\n</div>\n</template>\n\n<script>\nimport {mapState} from 'vuex'\nexport default {\n    data (){\n        return {\n            recordIndex: -1,\n            pageIndex: 1,\n            pageSize: 5,\n\n            comment: '',\n            messageType: 2\n        }\n    },\n    computed: mapState({\n        message: state => state.message.message\n    }),\n    methods: {\n        recordSwitch (index, msg_id, read){\n            if (index == this.recordIndex) {\n                this.recordIndex = -1;\n            } else {\n                this.recordIndex = index;    \n            }\n\n            // 标记已读\n            if (read == 0) {\n                this.$store.dispatch('message_markMessage', {\n                    msgType: this.messageType,\n                    msgId: msg_id\n                }).then( res => {\n                    this.$eventHub.$emit('getUnreadMessage');\n                    this.getMessageList();\n\n                    this.$store.dispatch('bubble_success', res);\n                }).catch ( err => {\n                    this.$store.dispatch('bubble_fail', err);\n                })\n            }\n        },\n        getMessageList (){\n            this.$store.dispatch('message_getMessageList', {\n                \"page\": this.pageIndex,\n                \"pageSize\": this.pageSize,\n                \"pagination\": 1,\n                \"messageType\": this.messageType\n            }).then( res => {\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        pageSwitch (pageIndex){\n            if (this.pageIndex == pageIndex) {\n                return false;\n            }\n            this.pageIndex = pageIndex;\n            this.getMessageList();\n        },\n        // 举报\n        addReport (content_id){\n            this.$store.dispatch('bubble_showBubble', {\n                show: true,\n                type: 'report',\n                report: {\n                    content_id: content_id,\n                    content_type: 3\n                }\n            })\n        },\n        // 获取详情\n        getMessageDetail (msgId){\n            this.$store.dispatch('message_getMessageDetail', {\n                \"msgId\": msgId\n            }).then( res => {\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        // 新增评论\n        addComment (payload){\n            this.$store.dispatch('opus_addComment', {\n                \"to_comment_id\": payload.to_comment_id, //一级评论id,表示针对那条评论的评论(有点绕),类似所有二级评论的父级.没有则表示当前发表的就是一级评论\n                \"to_reply_comment_id\": payload.to_reply_comment_id, //一级评论下的二级回复性评论id,表示针对那条二级评论做的回复('xxx回复了xxx',在列表查询时需要使用),当前发表的是一级评论不需要带此参数.\n                \"comment\": this.comment, //评论\n                \"catalog_id\": payload.catalog_id, //目录id,必填\n                \"chapter_id\": payload.chapter_id //章节id,没有则表示针对目录的评论\n            }).then( res => {\n                this.comment = '';\n                this.recordIndex = -2;\n                this.getMessageList();\n\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            })\n        },\n        // 评论\n        emitComment (option){\n            if (!option) {\n                return false;\n            }\n            this.addComment({\n                \"to_reply_comment_id\": option.to_comment_id, //一级评论下的二级回复性评论id,表示针对那条二级评论做的回复('xxx回复了xxx',在列表查询时需要使用),当前发表的是一级评论不需要带此参数.\n                \"comment\": this.comment, //评论\n                \"catalog_id\": option.catalog_id, //目录id,必填\n                \"chapter_id\": option.chapter_id //\n            })\n        }\n    },\n    mounted (){\n        // 获取精选列表\n        this.getMessageList();\n    }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// comment.list.vue?d6aa6936","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-upload\",\n    attrs: {\n      \"id\": _vm.container\n    }\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-1c1dd24d\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/component/uploadImg.vue\n// module id = EPsp\n// module chunks = 0","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-6f7c9752\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./comment.list.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./comment.list.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6f7c9752\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./comment.list.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/comment.list.vue\n// module id = EPvs\n// module chunks = 0","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-776f695e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./bubble.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./bubble.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-776f695e\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./bubble.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/bubble.vue\n// module id = Eion\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-artice-comment\"\n  }, [_c('div', {\n    staticClass: \"c-artice-comment-wrap\"\n  }, [_vm._l((_vm.comment.list), function(data, _index) {\n    return _c('div', {\n      staticClass: \"c-artice-comment-list\",\n      attrs: {\n        \"data-uid\": data.user.uid,\n        \"data-comment_id\": data.comment_id\n      }\n    }, [_c('div', {\n      staticClass: \"comment__content\"\n    }, [_c('div', {\n      staticClass: \"content__top\"\n    }, [_c('div', {\n      staticClass: \"top-img\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": data.user.avatar_url || _vm.avatar\n      }\n    })]), _vm._v(\" \"), _c('div', {\n      staticClass: \"top-name\"\n    }, [_vm._v(_vm._s(data.user.nick_name))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"content__body\"\n    }, [_vm._v(_vm._s(data.comment))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"content__bottom\"\n    }, [_c('div', {\n      staticClass: \"bottom-jubao\",\n      on: {\n        \"click\": _vm.addReport\n      }\n    }, [_vm._v(\"举报\")]), _vm._v(\" \"), _c('div', {\n      staticClass: \"bottom-record\",\n      on: {\n        \"click\": function($event) {\n          _vm.replayCommit(_index, -1)\n        }\n      }\n    }, [_vm._v(\"回复\")]), _vm._v(\" \"), _c('div', {\n      staticClass: \"bottom-time\"\n    }, [_vm._v(_vm._s(data.publish_time))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"bottom-fabulous\",\n      on: {\n        \"click\": _vm.addCommentPraise\n      }\n    }, [_c('span', {\n      class: data.hasFabulous ? 'z-on' : ''\n    }), _c('strong', [_vm._v(_vm._s(data.praise_count))])])])]), _vm._v(\" \"), (data.replayIndex == -1) ? _c('div', {\n      staticClass: \"content__reply z-top\"\n    }, [_c('div', {\n      staticClass: \"content__reply-form\"\n    }, [_c('input', {\n      directives: [{\n        name: \"model\",\n        rawName: \"v-model\",\n        value: (_vm.comment_con),\n        expression: \"comment_con\"\n      }],\n      attrs: {\n        \"type\": \"text\",\n        \"placeholder\": \"回复评论...\"\n      },\n      domProps: {\n        \"value\": (_vm.comment_con)\n      },\n      on: {\n        \"input\": function($event) {\n          if ($event.target.composing) { return; }\n          _vm.comment_con = $event.target.value\n        }\n      }\n    })]), _vm._v(\" \"), _c('div', {\n      staticClass: \"content__reply-btn\",\n      on: {\n        \"click\": function($event) {\n          _vm.sendComment(data.comment_id)\n        }\n      }\n    }, [_vm._v(\"提交\")])]) : _vm._e(), _vm._v(\" \"), _c('div', {\n      staticClass: \"comment__record\"\n    }, [_vm._l((data.replys), function(reply, index) {\n      return _c('div', {\n        staticClass: \"record__item\",\n        attrs: {\n          \"data-uid\": reply.user.uid,\n          \"data-comment_id\": reply.comment_id,\n          \"data-index\": index\n        }\n      }, [_c('div', {\n        staticClass: \"record__item-content\"\n      }, [_c('div', {\n        staticClass: \"item-text\"\n      }, [_c('p', [_c('strong', [_vm._v(_vm._s(reply.user.nick_name))]), _vm._v(\" \"), (reply.reply_to_user) ? _c('em', [_vm._v(\" 回复 \"), _c('strong', [_vm._v(_vm._s(reply.reply_to_user.nick_name))])]) : _vm._e(), _vm._v(\"：\\n                            \" + _vm._s(reply.comment) + \"\\n                        \")])]), _vm._v(\" \"), _c('div', {\n        staticClass: \"item-bottom\"\n      }, [_c('div', {\n        staticClass: \"item-bottom-jubao\",\n        on: {\n          \"click\": _vm.addReport\n        }\n      }, [_vm._v(\"举报\")]), _vm._v(\" \"), _c('div', {\n        staticClass: \"item-bottom-record\",\n        on: {\n          \"click\": function($event) {\n            _vm.replayCommit(_index, index)\n          }\n        }\n      }, [_vm._v(\"回复\")]), _vm._v(\" \"), _c('div', {\n        staticClass: \"item-bottom-time\"\n      }, [_vm._v(_vm._s(reply.publish_time))])])]), _vm._v(\" \"), (index == data.replayIndex) ? _c('div', {\n        staticClass: \"content__reply\"\n      }, [_c('div', {\n        staticClass: \"content__reply-form\"\n      }, [_c('input', {\n        directives: [{\n          name: \"model\",\n          rawName: \"v-model\",\n          value: (_vm.comment_con),\n          expression: \"comment_con\"\n        }],\n        attrs: {\n          \"type\": \"text\",\n          \"placeholder\": \"回复评论...\"\n        },\n        domProps: {\n          \"value\": (_vm.comment_con)\n        },\n        on: {\n          \"input\": function($event) {\n            if ($event.target.composing) { return; }\n            _vm.comment_con = $event.target.value\n          }\n        }\n      })]), _vm._v(\" \"), _c('div', {\n        staticClass: \"content__reply-btn\",\n        on: {\n          \"click\": function($event) {\n            _vm.sendReplyComment(data.comment_id, reply.comment_id)\n          }\n        }\n      }, [_vm._v(\"提交\")])]) : _vm._e()])\n    }), _vm._v(\" \"), (data.replys && data.reply_page_info.total_count - data.replys.length > 0) ? _c('div', {\n      staticClass: \"record__page\"\n    }, [_vm._v(\"\\n                还有\"), _c('span', [_vm._v(_vm._s(data.reply_page_info.total_count - data.replys.length))]), _vm._v(\"条回复 \"), _c('strong', {\n      on: {\n        \"click\": function($event) {\n          _vm.getSubCommentMore(data)\n        }\n      }\n    }, [_vm._v(\"点击加载更多\")])]) : _vm._e()], 2)])\n  }), _vm._v(\" \"), (_vm.comment.count == 0) ? _c('Empty') : _vm._e()], 2), _vm._v(\" \"), _c('Page', {\n    attrs: {\n      \"count\": _vm.comment.count,\n      \"length\": _vm.pageSize,\n      \"index\": _vm.pageIndex\n    },\n    on: {\n      \"page_switch\": _vm.pageSwitch\n    }\n  })], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-400234f2\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/component/article.comment.vue\n// module id = FG6U\n// module chunks = 0","<!-- style样式代码 -->\n<style lang=\"less\">\n@import (reference) '../common/css/common';\n@module: c-empty;\n.@{module} {\n    padding-top: 60px;\n    padding-bottom: 120px;\n    .default_center;\n    .default_font_size_4;\n    .default_color_4;\n    & .c-empty-img {\n        width: 100px;\n        height: 120px;\n        .default_mar_auto;\n        margin-bottom: 20px;\n        & img {\n            width: 100%;\n        }\n    }\n    & .c-emptytext {\n        opacity: .1;\n    }\n}\n</style>\n\n<!-- html代码 -->\n<template>\n<div class=\"c-empty\">\n    <div class=\"c-empty-img\"><img src=\"../common/images/icon/empty.png\" /></div>\n    <div class=\"c-empty-text\">没有相关结果</div>\n</div>\n</template>\n\n<script>\nexport default {\n    props: ['data'],\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// content.empty.vue?45e7afce","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-b9159aca\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./article.list.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./article.list.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b9159aca\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./article.list.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/article.list.vue\n// module id = HFHI\n// module chunks = 0","/**\n * mOxie - multi-runtime File API & XMLHttpRequest L2 Polyfill\n * v1.2.1\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n *\n * Date: 2014-05-14\n */\n/**\n * Compiled inline version. (Library mode)\n */\n\n/*jshint smarttabs:true, undef:true, latedef:true, curly:true, bitwise:true, camelcase:true */\n/*globals $code */\n\n(function(exports, undefined) {\n\t\"use strict\";\n\n\tvar modules = {};\n\n\tfunction require(ids, callback) {\n\t\tvar module, defs = [];\n\n\t\tfor (var i = 0; i < ids.length; ++i) {\n\t\t\tmodule = modules[ids[i]] || resolve(ids[i]);\n\t\t\tif (!module) {\n\t\t\t\tthrow 'module definition dependecy not found: ' + ids[i];\n\t\t\t}\n\n\t\t\tdefs.push(module);\n\t\t}\n\n\t\tcallback.apply(null, defs);\n\t}\n\n\tfunction define(id, dependencies, definition) {\n\t\tif (typeof id !== 'string') {\n\t\t\tthrow 'invalid module definition, module id must be defined and be a string';\n\t\t}\n\n\t\tif (dependencies === undefined) {\n\t\t\tthrow 'invalid module definition, dependencies must be specified';\n\t\t}\n\n\t\tif (definition === undefined) {\n\t\t\tthrow 'invalid module definition, definition function must be specified';\n\t\t}\n\n\t\trequire(dependencies, function() {\n\t\t\tmodules[id] = definition.apply(null, arguments);\n\t\t});\n\t}\n\n\tfunction defined(id) {\n\t\treturn !!modules[id];\n\t}\n\n\tfunction resolve(id) {\n\t\tvar target = exports;\n\t\tvar fragments = id.split(/[.\\/]/);\n\n\t\tfor (var fi = 0; fi < fragments.length; ++fi) {\n\t\t\tif (!target[fragments[fi]]) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttarget = target[fragments[fi]];\n\t\t}\n\n\t\treturn target;\n\t}\n\n\tfunction expose(ids) {\n\t\tfor (var i = 0; i < ids.length; i++) {\n\t\t\tvar target = exports;\n\t\t\tvar id = ids[i];\n\t\t\tvar fragments = id.split(/[.\\/]/);\n\n\t\t\tfor (var fi = 0; fi < fragments.length - 1; ++fi) {\n\t\t\t\tif (target[fragments[fi]] === undefined) {\n\t\t\t\t\ttarget[fragments[fi]] = {};\n\t\t\t\t}\n\n\t\t\t\ttarget = target[fragments[fi]];\n\t\t\t}\n\n\t\t\ttarget[fragments[fragments.length - 1]] = modules[id];\n\t\t}\n\t}\n\n// Included from: src/javascript/core/utils/Basic.js\n\n/**\n * Basic.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/core/utils/Basic', [], function() {\n\t/**\n\tGets the true type of the built-in object (better version of typeof).\n\t@author Angus Croll (http://javascriptweblog.wordpress.com/)\n\n\t@method typeOf\n\t@for Utils\n\t@static\n\t@param {Object} o Object to check.\n\t@return {String} Object [[Class]]\n\t*/\n\tvar typeOf = function(o) {\n\t\tvar undef;\n\n\t\tif (o === undef) {\n\t\t\treturn 'undefined';\n\t\t} else if (o === null) {\n\t\t\treturn 'null';\n\t\t} else if (o.nodeType) {\n\t\t\treturn 'node';\n\t\t}\n\n\t\t// the snippet below is awesome, however it fails to detect null, undefined and arguments types in IE lte 8\n\t\treturn ({}).toString.call(o).match(/\\s([a-z|A-Z]+)/)[1].toLowerCase();\n\t};\n\t\t\n\t/**\n\tExtends the specified object with another object.\n\n\t@method extend\n\t@static\n\t@param {Object} target Object to extend.\n\t@param {Object} [obj]* Multiple objects to extend with.\n\t@return {Object} Same as target, the extended object.\n\t*/\n\tvar extend = function(target) {\n\t\tvar undef;\n\n\t\teach(arguments, function(arg, i) {\n\t\t\tif (i > 0) {\n\t\t\t\teach(arg, function(value, key) {\n\t\t\t\t\tif (value !== undef) {\n\t\t\t\t\t\tif (typeOf(target[key]) === typeOf(value) && !!~inArray(typeOf(value), ['array', 'object'])) {\n\t\t\t\t\t\t\textend(target[key], value);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget[key] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn target;\n\t};\n\t\t\n\t/**\n\tExecutes the callback function for each item in array/object. If you return false in the\n\tcallback it will break the loop.\n\n\t@method each\n\t@static\n\t@param {Object} obj Object to iterate.\n\t@param {function} callback Callback function to execute for each item.\n\t*/\n\tvar each = function(obj, callback) {\n\t\tvar length, key, i, undef;\n\n\t\tif (obj) {\n\t\t\ttry {\n\t\t\t\tlength = obj.length;\n\t\t\t} catch(ex) {\n\t\t\t\tlength = undef;\n\t\t\t}\n\n\t\t\tif (length === undef) {\n\t\t\t\t// Loop object items\n\t\t\t\tfor (key in obj) {\n\t\t\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\t\t\tif (callback(obj[key], key) === false) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Loop array items\n\t\t\t\tfor (i = 0; i < length; i++) {\n\t\t\t\t\tif (callback(obj[i], i) === false) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\tChecks if object is empty.\n\t\n\t@method isEmptyObj\n\t@static\n\t@param {Object} o Object to check.\n\t@return {Boolean}\n\t*/\n\tvar isEmptyObj = function(obj) {\n\t\tvar prop;\n\n\t\tif (!obj || typeOf(obj) !== 'object') {\n\t\t\treturn true;\n\t\t}\n\n\t\tfor (prop in obj) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t};\n\n\t/**\n\tRecieve an array of functions (usually async) to call in sequence, each  function\n\treceives a callback as first argument that it should call, when it completes. Finally,\n\tafter everything is complete, main callback is called. Passing truthy value to the\n\tcallback as a first argument will interrupt the sequence and invoke main callback\n\timmediately.\n\n\t@method inSeries\n\t@static\n\t@param {Array} queue Array of functions to call in sequence\n\t@param {Function} cb Main callback that is called in the end, or in case of error\n\t*/\n\tvar inSeries = function(queue, cb) {\n\t\tvar i = 0, length = queue.length;\n\n\t\tif (typeOf(cb) !== 'function') {\n\t\t\tcb = function() {};\n\t\t}\n\n\t\tif (!queue || !queue.length) {\n\t\t\tcb();\n\t\t}\n\n\t\tfunction callNext(i) {\n\t\t\tif (typeOf(queue[i]) === 'function') {\n\t\t\t\tqueue[i](function(error) {\n\t\t\t\t\t/*jshint expr:true */\n\t\t\t\t\t++i < length && !error ? callNext(i) : cb(error);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tcallNext(i);\n\t};\n\n\n\t/**\n\tRecieve an array of functions (usually async) to call in parallel, each  function\n\treceives a callback as first argument that it should call, when it completes. After \n\teverything is complete, main callback is called. Passing truthy value to the\n\tcallback as a first argument will interrupt the process and invoke main callback\n\timmediately.\n\n\t@method inParallel\n\t@static\n\t@param {Array} queue Array of functions to call in sequence\n\t@param {Function} cb Main callback that is called in the end, or in case of erro\n\t*/\n\tvar inParallel = function(queue, cb) {\n\t\tvar count = 0, num = queue.length, cbArgs = new Array(num);\n\n\t\teach(queue, function(fn, i) {\n\t\t\tfn(function(error) {\n\t\t\t\tif (error) {\n\t\t\t\t\treturn cb(error);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar args = [].slice.call(arguments);\n\t\t\t\targs.shift(); // strip error - undefined or not\n\n\t\t\t\tcbArgs[i] = args;\n\t\t\t\tcount++;\n\n\t\t\t\tif (count === num) {\n\t\t\t\t\tcbArgs.unshift(null);\n\t\t\t\t\tcb.apply(this, cbArgs);\n\t\t\t\t} \n\t\t\t});\n\t\t});\n\t};\n\t\n\t\n\t/**\n\tFind an element in array and return it's index if present, otherwise return -1.\n\t\n\t@method inArray\n\t@static\n\t@param {Mixed} needle Element to find\n\t@param {Array} array\n\t@return {Int} Index of the element, or -1 if not found\n\t*/\n\tvar inArray = function(needle, array) {\n\t\tif (array) {\n\t\t\tif (Array.prototype.indexOf) {\n\t\t\t\treturn Array.prototype.indexOf.call(array, needle);\n\t\t\t}\n\t\t\n\t\t\tfor (var i = 0, length = array.length; i < length; i++) {\n\t\t\t\tif (array[i] === needle) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t};\n\n\n\t/**\n\tReturns elements of first array if they are not present in second. And false - otherwise.\n\n\t@private\n\t@method arrayDiff\n\t@param {Array} needles\n\t@param {Array} array\n\t@return {Array|Boolean}\n\t*/\n\tvar arrayDiff = function(needles, array) {\n\t\tvar diff = [];\n\n\t\tif (typeOf(needles) !== 'array') {\n\t\t\tneedles = [needles];\n\t\t}\n\n\t\tif (typeOf(array) !== 'array') {\n\t\t\tarray = [array];\n\t\t}\n\n\t\tfor (var i in needles) {\n\t\t\tif (inArray(needles[i], array) === -1) {\n\t\t\t\tdiff.push(needles[i]);\n\t\t\t}\t\n\t\t}\n\t\treturn diff.length ? diff : false;\n\t};\n\n\n\t/**\n\tFind intersection of two arrays.\n\n\t@private\n\t@method arrayIntersect\n\t@param {Array} array1\n\t@param {Array} array2\n\t@return {Array} Intersection of two arrays or null if there is none\n\t*/\n\tvar arrayIntersect = function(array1, array2) {\n\t\tvar result = [];\n\t\teach(array1, function(item) {\n\t\t\tif (inArray(item, array2) !== -1) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\t\t});\n\t\treturn result.length ? result : null;\n\t};\n\t\n\t\n\t/**\n\tForces anything into an array.\n\t\n\t@method toArray\n\t@static\n\t@param {Object} obj Object with length field.\n\t@return {Array} Array object containing all items.\n\t*/\n\tvar toArray = function(obj) {\n\t\tvar i, arr = [];\n\n\t\tfor (i = 0; i < obj.length; i++) {\n\t\t\tarr[i] = obj[i];\n\t\t}\n\n\t\treturn arr;\n\t};\n\t\n\t\t\t\n\t/**\n\tGenerates an unique ID. This is 99.99% unique since it takes the current time and 5 random numbers.\n\tThe only way a user would be able to get the same ID is if the two persons at the same exact milisecond manages\n\tto get 5 the same random numbers between 0-65535 it also uses a counter so each call will be guaranteed to be page unique.\n\tIt's more probable for the earth to be hit with an ansteriod. Y\n\t\n\t@method guid\n\t@static\n\t@param {String} prefix to prepend (by default 'o' will be prepended).\n\t@method guid\n\t@return {String} Virtually unique id.\n\t*/\n\tvar guid = (function() {\n\t\tvar counter = 0;\n\t\t\n\t\treturn function(prefix) {\n\t\t\tvar guid = new Date().getTime().toString(32), i;\n\n\t\t\tfor (i = 0; i < 5; i++) {\n\t\t\t\tguid += Math.floor(Math.random() * 65535).toString(32);\n\t\t\t}\n\t\t\t\n\t\t\treturn (prefix || 'o_') + guid + (counter++).toString(32);\n\t\t};\n\t}());\n\t\n\n\t/**\n\tTrims white spaces around the string\n\t\n\t@method trim\n\t@static\n\t@param {String} str\n\t@return {String}\n\t*/\n\tvar trim = function(str) {\n\t\tif (!str) {\n\t\t\treturn str;\n\t\t}\n\t\treturn String.prototype.trim ? String.prototype.trim.call(str) : str.toString().replace(/^\\s*/, '').replace(/\\s*$/, '');\n\t};\n\n\n\t/**\n\tParses the specified size string into a byte value. For example 10kb becomes 10240.\n\t\n\t@method parseSizeStr\n\t@static\n\t@param {String/Number} size String to parse or number to just pass through.\n\t@return {Number} Size in bytes.\n\t*/\n\tvar parseSizeStr = function(size) {\n\t\tif (typeof(size) !== 'string') {\n\t\t\treturn size;\n\t\t}\n\t\t\n\t\tvar muls = {\n\t\t\t\tt: 1099511627776,\n\t\t\t\tg: 1073741824,\n\t\t\t\tm: 1048576,\n\t\t\t\tk: 1024\n\t\t\t},\n\t\t\tmul;\n\n\t\tsize = /^([0-9]+)([mgk]?)$/.exec(size.toLowerCase().replace(/[^0-9mkg]/g, ''));\n\t\tmul = size[2];\n\t\tsize = +size[1];\n\t\t\n\t\tif (muls.hasOwnProperty(mul)) {\n\t\t\tsize *= muls[mul];\n\t\t}\n\t\treturn size;\n\t};\n\t\n\n\treturn {\n\t\tguid: guid,\n\t\ttypeOf: typeOf,\n\t\textend: extend,\n\t\teach: each,\n\t\tisEmptyObj: isEmptyObj,\n\t\tinSeries: inSeries,\n\t\tinParallel: inParallel,\n\t\tinArray: inArray,\n\t\tarrayDiff: arrayDiff,\n\t\tarrayIntersect: arrayIntersect,\n\t\ttoArray: toArray,\n\t\ttrim: trim,\n\t\tparseSizeStr: parseSizeStr\n\t};\n});\n\n// Included from: src/javascript/core/I18n.js\n\n/**\n * I18n.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine(\"moxie/core/I18n\", [\n\t\"moxie/core/utils/Basic\"\n], function(Basic) {\n\tvar i18n = {};\n\n\treturn {\n\t\t/**\n\t\t * Extends the language pack object with new items.\n\t\t *\n\t\t * @param {Object} pack Language pack items to add.\n\t\t * @return {Object} Extended language pack object.\n\t\t */\n\t\taddI18n: function(pack) {\n\t\t\treturn Basic.extend(i18n, pack);\n\t\t},\n\n\t\t/**\n\t\t * Translates the specified string by checking for the english string in the language pack lookup.\n\t\t *\n\t\t * @param {String} str String to look for.\n\t\t * @return {String} Translated string or the input string if it wasn't found.\n\t\t */\n\t\ttranslate: function(str) {\n\t\t\treturn i18n[str] || str;\n\t\t},\n\n\t\t/**\n\t\t * Shortcut for translate function\n\t\t *\n\t\t * @param {String} str String to look for.\n\t\t * @return {String} Translated string or the input string if it wasn't found.\n\t\t */\n\t\t_: function(str) {\n\t\t\treturn this.translate(str);\n\t\t},\n\n\t\t/**\n\t\t * Pseudo sprintf implementation - simple way to replace tokens with specified values.\n\t\t *\n\t\t * @param {String} str String with tokens\n\t\t * @return {String} String with replaced tokens\n\t\t */\n\t\tsprintf: function(str) {\n\t\t\tvar args = [].slice.call(arguments, 1);\n\n\t\t\treturn str.replace(/%[a-z]/g, function() {\n\t\t\t\tvar value = args.shift();\n\t\t\t\treturn Basic.typeOf(value) !== 'undefined' ? value : '';\n\t\t\t});\n\t\t}\n\t};\n});\n\n// Included from: src/javascript/core/utils/Mime.js\n\n/**\n * Mime.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine(\"moxie/core/utils/Mime\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/I18n\"\n], function(Basic, I18n) {\n\t\n\tvar mimeData = \"\" +\n\t\t\"application/msword,doc dot,\" +\n\t\t\"application/pdf,pdf,\" +\n\t\t\"application/pgp-signature,pgp,\" +\n\t\t\"application/postscript,ps ai eps,\" +\n\t\t\"application/rtf,rtf,\" +\n\t\t\"application/vnd.ms-excel,xls xlb,\" +\n\t\t\"application/vnd.ms-powerpoint,ppt pps pot,\" +\n\t\t\"application/zip,zip,\" +\n\t\t\"application/x-shockwave-flash,swf swfl,\" +\n\t\t\"application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,\" +\n\t\t\"application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,\" +\n\t\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,\" +\n\t\t\"application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,\" +\n\t\t\"application/vnd.openxmlformats-officedocument.presentationml.template,potx,\" +\n\t\t\"application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,\" +\n\t\t\"application/x-javascript,js,\" +\n\t\t\"application/json,json,\" +\n\t\t\"audio/mpeg,mp3 mpga mpega mp2,\" +\n\t\t\"audio/x-wav,wav,\" +\n\t\t\"audio/x-m4a,m4a,\" +\n\t\t\"audio/ogg,oga ogg,\" +\n\t\t\"audio/aiff,aiff aif,\" +\n\t\t\"audio/flac,flac,\" +\n\t\t\"audio/aac,aac,\" +\n\t\t\"audio/ac3,ac3,\" +\n\t\t\"audio/x-ms-wma,wma,\" +\n\t\t\"image/bmp,bmp,\" +\n\t\t\"image/gif,gif,\" +\n\t\t\"image/jpeg,jpg jpeg jpe,\" +\n\t\t\"image/photoshop,psd,\" +\n\t\t\"image/png,png,\" +\n\t\t\"image/svg+xml,svg svgz,\" +\n\t\t\"image/tiff,tiff tif,\" +\n\t\t\"text/plain,asc txt text diff log,\" +\n\t\t\"text/html,htm html xhtml,\" +\n\t\t\"text/css,css,\" +\n\t\t\"text/csv,csv,\" +\n\t\t\"text/rtf,rtf,\" +\n\t\t\"video/mpeg,mpeg mpg mpe m2v,\" +\n\t\t\"video/quicktime,qt mov,\" +\n\t\t\"video/mp4,mp4,\" +\n\t\t\"video/x-m4v,m4v,\" +\n\t\t\"video/x-flv,flv,\" +\n\t\t\"video/x-ms-wmv,wmv,\" +\n\t\t\"video/avi,avi,\" +\n\t\t\"video/webm,webm,\" +\n\t\t\"video/3gpp,3gpp 3gp,\" +\n\t\t\"video/3gpp2,3g2,\" +\n\t\t\"video/vnd.rn-realvideo,rv,\" +\n\t\t\"video/ogg,ogv,\" + \n\t\t\"video/x-matroska,mkv,\" +\n\t\t\"application/vnd.oasis.opendocument.formula-template,otf,\" +\n\t\t\"application/octet-stream,exe\";\n\t\n\t\n\tvar Mime = {\n\n\t\tmimes: {},\n\n\t\textensions: {},\n\n\t\t// Parses the default mime types string into a mimes and extensions lookup maps\n\t\taddMimeType: function (mimeData) {\n\t\t\tvar items = mimeData.split(/,/), i, ii, ext;\n\t\t\t\n\t\t\tfor (i = 0; i < items.length; i += 2) {\n\t\t\t\text = items[i + 1].split(/ /);\n\n\t\t\t\t// extension to mime lookup\n\t\t\t\tfor (ii = 0; ii < ext.length; ii++) {\n\t\t\t\t\tthis.mimes[ext[ii]] = items[i];\n\t\t\t\t}\n\t\t\t\t// mime to extension lookup\n\t\t\t\tthis.extensions[items[i]] = ext;\n\t\t\t}\n\t\t},\n\n\n\t\textList2mimes: function (filters, addMissingExtensions) {\n\t\t\tvar self = this, ext, i, ii, type, mimes = [];\n\t\t\t\n\t\t\t// convert extensions to mime types list\n\t\t\tfor (i = 0; i < filters.length; i++) {\n\t\t\t\text = filters[i].extensions.split(/\\s*,\\s*/);\n\n\t\t\t\tfor (ii = 0; ii < ext.length; ii++) {\n\t\t\t\t\t\n\t\t\t\t\t// if there's an asterisk in the list, then accept attribute is not required\n\t\t\t\t\tif (ext[ii] === '*') {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\ttype = self.mimes[ext[ii]];\n\t\t\t\t\tif (!type) {\n\t\t\t\t\t\tif (addMissingExtensions && /^\\w+$/.test(ext[ii])) {\n\t\t\t\t\t\t\tmimes.push('.' + ext[ii]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn []; // accept all\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (Basic.inArray(type, mimes) === -1) {\n\t\t\t\t\t\tmimes.push(type);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn mimes;\n\t\t},\n\n\n\t\tmimes2exts: function(mimes) {\n\t\t\tvar self = this, exts = [];\n\t\t\t\n\t\t\tBasic.each(mimes, function(mime) {\n\t\t\t\tif (mime === '*') {\n\t\t\t\t\texts = [];\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// check if this thing looks like mime type\n\t\t\t\tvar m = mime.match(/^(\\w+)\\/(\\*|\\w+)$/);\n\t\t\t\tif (m) {\n\t\t\t\t\tif (m[2] === '*') { \n\t\t\t\t\t\t// wildcard mime type detected\n\t\t\t\t\t\tBasic.each(self.extensions, function(arr, mime) {\n\t\t\t\t\t\t\tif ((new RegExp('^' + m[1] + '/')).test(mime)) {\n\t\t\t\t\t\t\t\t[].push.apply(exts, self.extensions[mime]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (self.extensions[mime]) {\n\t\t\t\t\t\t[].push.apply(exts, self.extensions[mime]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn exts;\n\t\t},\n\n\n\t\tmimes2extList: function(mimes) {\n\t\t\tvar accept = [], exts = [];\n\n\t\t\tif (Basic.typeOf(mimes) === 'string') {\n\t\t\t\tmimes = Basic.trim(mimes).split(/\\s*,\\s*/);\n\t\t\t}\n\n\t\t\texts = this.mimes2exts(mimes);\n\t\t\t\n\t\t\taccept.push({\n\t\t\t\ttitle: I18n.translate('Files'),\n\t\t\t\textensions: exts.length ? exts.join(',') : '*'\n\t\t\t});\n\t\t\t\n\t\t\t// save original mimes string\n\t\t\taccept.mimes = mimes;\n\n\t\t\treturn accept;\n\t\t},\n\n\n\t\tgetFileExtension: function(fileName) {\n\t\t\tvar matches = fileName && fileName.match(/\\.([^.]+)$/);\n\t\t\tif (matches) {\n\t\t\t\treturn matches[1].toLowerCase();\n\t\t\t}\n\t\t\treturn '';\n\t\t},\n\n\t\tgetFileMime: function(fileName) {\n\t\t\treturn this.mimes[this.getFileExtension(fileName)] || '';\n\t\t}\n\t};\n\n\tMime.addMimeType(mimeData);\n\n\treturn Mime;\n});\n\n// Included from: src/javascript/core/utils/Env.js\n\n/**\n * Env.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine(\"moxie/core/utils/Env\", [\n\t\"moxie/core/utils/Basic\"\n], function(Basic) {\n\t\n\t// UAParser.js v0.6.2\n\t// Lightweight JavaScript-based User-Agent string parser\n\t// https://github.com/faisalman/ua-parser-js\n\t//\n\t// Copyright © 2012-2013 Faisalman <fyzlman@gmail.com>\n\t// Dual licensed under GPLv2 & MIT\n\n\tvar UAParser = (function (undefined) {\n\n\t    //////////////\n\t    // Constants\n\t    /////////////\n\n\n\t    var EMPTY       = '',\n\t        UNKNOWN     = '?',\n\t        FUNC_TYPE   = 'function',\n\t        UNDEF_TYPE  = 'undefined',\n\t        OBJ_TYPE    = 'object',\n\t        MAJOR       = 'major',\n\t        MODEL       = 'model',\n\t        NAME        = 'name',\n\t        TYPE        = 'type',\n\t        VENDOR      = 'vendor',\n\t        VERSION     = 'version',\n\t        ARCHITECTURE= 'architecture',\n\t        CONSOLE     = 'console',\n\t        MOBILE      = 'mobile',\n\t        TABLET      = 'tablet';\n\n\n\t    ///////////\n\t    // Helper\n\t    //////////\n\n\n\t    var util = {\n\t        has : function (str1, str2) {\n\t            return str2.toLowerCase().indexOf(str1.toLowerCase()) !== -1;\n\t        },\n\t        lowerize : function (str) {\n\t            return str.toLowerCase();\n\t        }\n\t    };\n\n\n\t    ///////////////\n\t    // Map helper\n\t    //////////////\n\n\n\t    var mapper = {\n\n\t        rgx : function () {\n\n\t            // loop through all regexes maps\n\t            for (var result, i = 0, j, k, p, q, matches, match, args = arguments; i < args.length; i += 2) {\n\n\t                var regex = args[i],       // even sequence (0,2,4,..)\n\t                    props = args[i + 1];   // odd sequence (1,3,5,..)\n\n\t                // construct object barebones\n\t                if (typeof(result) === UNDEF_TYPE) {\n\t                    result = {};\n\t                    for (p in props) {\n\t                        q = props[p];\n\t                        if (typeof(q) === OBJ_TYPE) {\n\t                            result[q[0]] = undefined;\n\t                        } else {\n\t                            result[q] = undefined;\n\t                        }\n\t                    }\n\t                }\n\n\t                // try matching uastring with regexes\n\t                for (j = k = 0; j < regex.length; j++) {\n\t                    matches = regex[j].exec(this.getUA());\n\t                    if (!!matches) {\n\t                        for (p = 0; p < props.length; p++) {\n\t                            match = matches[++k];\n\t                            q = props[p];\n\t                            // check if given property is actually array\n\t                            if (typeof(q) === OBJ_TYPE && q.length > 0) {\n\t                                if (q.length == 2) {\n\t                                    if (typeof(q[1]) == FUNC_TYPE) {\n\t                                        // assign modified match\n\t                                        result[q[0]] = q[1].call(this, match);\n\t                                    } else {\n\t                                        // assign given value, ignore regex match\n\t                                        result[q[0]] = q[1];\n\t                                    }\n\t                                } else if (q.length == 3) {\n\t                                    // check whether function or regex\n\t                                    if (typeof(q[1]) === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n\t                                        // call function (usually string mapper)\n\t                                        result[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n\t                                    } else {\n\t                                        // sanitize match using given regex\n\t                                        result[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n\t                                    }\n\t                                } else if (q.length == 4) {\n\t                                        result[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n\t                                }\n\t                            } else {\n\t                                result[q] = match ? match : undefined;\n\t                            }\n\t                        }\n\t                        break;\n\t                    }\n\t                }\n\n\t                if(!!matches) break; // break the loop immediately if match found\n\t            }\n\t            return result;\n\t        },\n\n\t        str : function (str, map) {\n\n\t            for (var i in map) {\n\t                // check if array\n\t                if (typeof(map[i]) === OBJ_TYPE && map[i].length > 0) {\n\t                    for (var j = 0; j < map[i].length; j++) {\n\t                        if (util.has(map[i][j], str)) {\n\t                            return (i === UNKNOWN) ? undefined : i;\n\t                        }\n\t                    }\n\t                } else if (util.has(map[i], str)) {\n\t                    return (i === UNKNOWN) ? undefined : i;\n\t                }\n\t            }\n\t            return str;\n\t        }\n\t    };\n\n\n\t    ///////////////\n\t    // String map\n\t    //////////////\n\n\n\t    var maps = {\n\n\t        browser : {\n\t            oldsafari : {\n\t                major : {\n\t                    '1' : ['/8', '/1', '/3'],\n\t                    '2' : '/4',\n\t                    '?' : '/'\n\t                },\n\t                version : {\n\t                    '1.0'   : '/8',\n\t                    '1.2'   : '/1',\n\t                    '1.3'   : '/3',\n\t                    '2.0'   : '/412',\n\t                    '2.0.2' : '/416',\n\t                    '2.0.3' : '/417',\n\t                    '2.0.4' : '/419',\n\t                    '?'     : '/'\n\t                }\n\t            }\n\t        },\n\n\t        device : {\n\t            sprint : {\n\t                model : {\n\t                    'Evo Shift 4G' : '7373KT'\n\t                },\n\t                vendor : {\n\t                    'HTC'       : 'APA',\n\t                    'Sprint'    : 'Sprint'\n\t                }\n\t            }\n\t        },\n\n\t        os : {\n\t            windows : {\n\t                version : {\n\t                    'ME'        : '4.90',\n\t                    'NT 3.11'   : 'NT3.51',\n\t                    'NT 4.0'    : 'NT4.0',\n\t                    '2000'      : 'NT 5.0',\n\t                    'XP'        : ['NT 5.1', 'NT 5.2'],\n\t                    'Vista'     : 'NT 6.0',\n\t                    '7'         : 'NT 6.1',\n\t                    '8'         : 'NT 6.2',\n\t                    '8.1'       : 'NT 6.3',\n\t                    'RT'        : 'ARM'\n\t                }\n\t            }\n\t        }\n\t    };\n\n\n\t    //////////////\n\t    // Regex map\n\t    /////////////\n\n\n\t    var regexes = {\n\n\t        browser : [[\n\n\t            // Presto based\n\t            /(opera\\smini)\\/((\\d+)?[\\w\\.-]+)/i,                                 // Opera Mini\n\t            /(opera\\s[mobiletab]+).+version\\/((\\d+)?[\\w\\.-]+)/i,                // Opera Mobi/Tablet\n\t            /(opera).+version\\/((\\d+)?[\\w\\.]+)/i,                               // Opera > 9.80\n\t            /(opera)[\\/\\s]+((\\d+)?[\\w\\.]+)/i                                    // Opera < 9.80\n\t            \n\t            ], [NAME, VERSION, MAJOR], [\n\n\t            /\\s(opr)\\/((\\d+)?[\\w\\.]+)/i                                         // Opera Webkit\n\t            ], [[NAME, 'Opera'], VERSION, MAJOR], [\n\n\t            // Mixed\n\t            /(kindle)\\/((\\d+)?[\\w\\.]+)/i,                                       // Kindle\n\t            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/\\s]?((\\d+)?[\\w\\.]+)*/i,\n\t                                                                                // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n\n\t            // Trident based\n\t            /(avant\\s|iemobile|slim|baidu)(?:browser)?[\\/\\s]?((\\d+)?[\\w\\.]*)/i,\n\t                                                                                // Avant/IEMobile/SlimBrowser/Baidu\n\t            /(?:ms|\\()(ie)\\s((\\d+)?[\\w\\.]+)/i,                                  // Internet Explorer\n\n\t            // Webkit/KHTML based\n\t            /(rekonq)((?:\\/)[\\w\\.]+)*/i,                                        // Rekonq\n\t            /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\\/((\\d+)?[\\w\\.-]+)/i\n\t                                                                                // Chromium/Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron\n\t            ], [NAME, VERSION, MAJOR], [\n\n\t            /(trident).+rv[:\\s]((\\d+)?[\\w\\.]+).+like\\sgecko/i                   // IE11\n\t            ], [[NAME, 'IE'], VERSION, MAJOR], [\n\n\t            /(yabrowser)\\/((\\d+)?[\\w\\.]+)/i                                     // Yandex\n\t            ], [[NAME, 'Yandex'], VERSION, MAJOR], [\n\n\t            /(comodo_dragon)\\/((\\d+)?[\\w\\.]+)/i                                 // Comodo Dragon\n\t            ], [[NAME, /_/g, ' '], VERSION, MAJOR], [\n\n\t            /(chrome|omniweb|arora|[tizenoka]{5}\\s?browser)\\/v?((\\d+)?[\\w\\.]+)/i\n\t                                                                                // Chrome/OmniWeb/Arora/Tizen/Nokia\n\t            ], [NAME, VERSION, MAJOR], [\n\n\t            /(dolfin)\\/((\\d+)?[\\w\\.]+)/i                                        // Dolphin\n\t            ], [[NAME, 'Dolphin'], VERSION, MAJOR], [\n\n\t            /((?:android.+)crmo|crios)\\/((\\d+)?[\\w\\.]+)/i                       // Chrome for Android/iOS\n\t            ], [[NAME, 'Chrome'], VERSION, MAJOR], [\n\n\t            /((?:android.+))version\\/((\\d+)?[\\w\\.]+)\\smobile\\ssafari/i          // Android Browser\n\t            ], [[NAME, 'Android Browser'], VERSION, MAJOR], [\n\n\t            /version\\/((\\d+)?[\\w\\.]+).+?mobile\\/\\w+\\s(safari)/i                 // Mobile Safari\n\t            ], [VERSION, MAJOR, [NAME, 'Mobile Safari']], [\n\n\t            /version\\/((\\d+)?[\\w\\.]+).+?(mobile\\s?safari|safari)/i              // Safari & Safari Mobile\n\t            ], [VERSION, MAJOR, NAME], [\n\n\t            /webkit.+?(mobile\\s?safari|safari)((\\/[\\w\\.]+))/i                   // Safari < 3.0\n\t            ], [NAME, [MAJOR, mapper.str, maps.browser.oldsafari.major], [VERSION, mapper.str, maps.browser.oldsafari.version]], [\n\n\t            /(konqueror)\\/((\\d+)?[\\w\\.]+)/i,                                    // Konqueror\n\t            /(webkit|khtml)\\/((\\d+)?[\\w\\.]+)/i\n\t            ], [NAME, VERSION, MAJOR], [\n\n\t            // Gecko based\n\t            /(navigator|netscape)\\/((\\d+)?[\\w\\.-]+)/i                           // Netscape\n\t            ], [[NAME, 'Netscape'], VERSION, MAJOR], [\n\t            /(swiftfox)/i,                                                      // Swiftfox\n\t            /(icedragon|iceweasel|camino|chimera|fennec|maemo\\sbrowser|minimo|conkeror)[\\/\\s]?((\\d+)?[\\w\\.\\+]+)/i,\n\t                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n\t            /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\\/((\\d+)?[\\w\\.-]+)/i,\n\t                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n\t            /(mozilla)\\/((\\d+)?[\\w\\.]+).+rv\\:.+gecko\\/\\d+/i,                    // Mozilla\n\n\t            // Other\n\t            /(uc\\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|qqbrowser)[\\/\\s]?((\\d+)?[\\w\\.]+)/i,\n\t                                                                                // UCBrowser/Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/QQBrowser\n\t            /(links)\\s\\(((\\d+)?[\\w\\.]+)/i,                                      // Links\n\t            /(gobrowser)\\/?((\\d+)?[\\w\\.]+)*/i,                                  // GoBrowser\n\t            /(ice\\s?browser)\\/v?((\\d+)?[\\w\\._]+)/i,                             // ICE Browser\n\t            /(mosaic)[\\/\\s]((\\d+)?[\\w\\.]+)/i                                    // Mosaic\n\t            ], [NAME, VERSION, MAJOR]\n\t        ],\n\n\t        engine : [[\n\n\t            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n\t            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\\/([\\w\\.]+)/i,     // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m\n\t            /(khtml|tasman|links)[\\/\\s]\\(?([\\w\\.]+)/i,                          // KHTML/Tasman/Links\n\t            /(icab)[\\/\\s]([23]\\.[\\d\\.]+)/i                                      // iCab\n\t            ], [NAME, VERSION], [\n\n\t            /rv\\:([\\w\\.]+).*(gecko)/i                                           // Gecko\n\t            ], [VERSION, NAME]\n\t        ],\n\n\t        os : [[\n\n\t            // Windows based\n\t            /(windows)\\snt\\s6\\.2;\\s(arm)/i,                                     // Windows RT\n\t            /(windows\\sphone(?:\\sos)*|windows\\smobile|windows)[\\s\\/]?([ntce\\d\\.\\s]+\\w)/i\n\t            ], [NAME, [VERSION, mapper.str, maps.os.windows.version]], [\n\t            /(win(?=3|9|n)|win\\s9x\\s)([nt\\d\\.]+)/i\n\t            ], [[NAME, 'Windows'], [VERSION, mapper.str, maps.os.windows.version]], [\n\n\t            // Mobile/Embedded OS\n\t            /\\((bb)(10);/i                                                      // BlackBerry 10\n\t            ], [[NAME, 'BlackBerry'], VERSION], [\n\t            /(blackberry)\\w*\\/?([\\w\\.]+)*/i,                                    // Blackberry\n\t            /(tizen)\\/([\\w\\.]+)/i,                                              // Tizen\n\t            /(android|webos|palm\\os|qnx|bada|rim\\stablet\\sos|meego)[\\/\\s-]?([\\w\\.]+)*/i\n\t                                                                                // Android/WebOS/Palm/QNX/Bada/RIM/MeeGo\n\t            ], [NAME, VERSION], [\n\t            /(symbian\\s?os|symbos|s60(?=;))[\\/\\s-]?([\\w\\.]+)*/i                 // Symbian\n\t            ], [[NAME, 'Symbian'], VERSION],[\n\t            /mozilla.+\\(mobile;.+gecko.+firefox/i                               // Firefox OS\n\t            ], [[NAME, 'Firefox OS'], VERSION], [\n\n\t            // Console\n\t            /(nintendo|playstation)\\s([wids3portablevu]+)/i,                    // Nintendo/Playstation\n\n\t            // GNU/Linux based\n\t            /(mint)[\\/\\s\\(]?(\\w+)*/i,                                           // Mint\n\t            /(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\\/\\s-]?([\\w\\.-]+)*/i,\n\t                                                                                // Joli/Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware\n\t                                                                                // Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk\n\t            /(hurd|linux)\\s?([\\w\\.]+)*/i,                                       // Hurd/Linux\n\t            /(gnu)\\s?([\\w\\.]+)*/i                                               // GNU\n\t            ], [NAME, VERSION], [\n\n\t            /(cros)\\s[\\w]+\\s([\\w\\.]+\\w)/i                                       // Chromium OS\n\t            ], [[NAME, 'Chromium OS'], VERSION],[\n\n\t            // Solaris\n\t            /(sunos)\\s?([\\w\\.]+\\d)*/i                                           // Solaris\n\t            ], [[NAME, 'Solaris'], VERSION], [\n\n\t            // BSD based\n\t            /\\s([frentopc-]{0,4}bsd|dragonfly)\\s?([\\w\\.]+)*/i                   // FreeBSD/NetBSD/OpenBSD/PC-BSD/DragonFly\n\t            ], [NAME, VERSION],[\n\n\t            /(ip[honead]+)(?:.*os\\s*([\\w]+)*\\slike\\smac|;\\sopera)/i             // iOS\n\t            ], [[NAME, 'iOS'], [VERSION, /_/g, '.']], [\n\n\t            /(mac\\sos\\sx)\\s?([\\w\\s\\.]+\\w)*/i                                    // Mac OS\n\t            ], [NAME, [VERSION, /_/g, '.']], [\n\n\t            // Other\n\t            /(haiku)\\s(\\w+)/i,                                                  // Haiku\n\t            /(aix)\\s((\\d)(?=\\.|\\)|\\s)[\\w\\.]*)*/i,                               // AIX\n\t            /(macintosh|mac(?=_powerpc)|plan\\s9|minix|beos|os\\/2|amigaos|morphos|risc\\sos)/i,\n\t                                                                                // Plan9/Minix/BeOS/OS2/AmigaOS/MorphOS/RISCOS\n\t            /(unix)\\s?([\\w\\.]+)*/i                                              // UNIX\n\t            ], [NAME, VERSION]\n\t        ]\n\t    };\n\n\n\t    /////////////////\n\t    // Constructor\n\t    ////////////////\n\n\n\t    var UAParser = function (uastring) {\n\n\t        var ua = uastring || ((window && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);\n\n\t        this.getBrowser = function () {\n\t            return mapper.rgx.apply(this, regexes.browser);\n\t        };\n\t        this.getEngine = function () {\n\t            return mapper.rgx.apply(this, regexes.engine);\n\t        };\n\t        this.getOS = function () {\n\t            return mapper.rgx.apply(this, regexes.os);\n\t        };\n\t        this.getResult = function() {\n\t            return {\n\t                ua      : this.getUA(),\n\t                browser : this.getBrowser(),\n\t                engine  : this.getEngine(),\n\t                os      : this.getOS()\n\t            };\n\t        };\n\t        this.getUA = function () {\n\t            return ua;\n\t        };\n\t        this.setUA = function (uastring) {\n\t            ua = uastring;\n\t            return this;\n\t        };\n\t        this.setUA(ua);\n\t    };\n\n\t    return new UAParser().getResult();\n\t})();\n\n\n\tfunction version_compare(v1, v2, operator) {\n\t  // From: http://phpjs.org/functions\n\t  // +      original by: Philippe Jausions (http://pear.php.net/user/jausions)\n\t  // +      original by: Aidan Lister (http://aidanlister.com/)\n\t  // + reimplemented by: Kankrelune (http://www.webfaktory.info/)\n\t  // +      improved by: Brett Zamir (http://brett-zamir.me)\n\t  // +      improved by: Scott Baker\n\t  // +      improved by: Theriault\n\t  // *        example 1: version_compare('8.2.5rc', '8.2.5a');\n\t  // *        returns 1: 1\n\t  // *        example 2: version_compare('8.2.50', '8.2.52', '<');\n\t  // *        returns 2: true\n\t  // *        example 3: version_compare('5.3.0-dev', '5.3.0');\n\t  // *        returns 3: -1\n\t  // *        example 4: version_compare('4.1.0.52','4.01.0.51');\n\t  // *        returns 4: 1\n\n\t  // Important: compare must be initialized at 0.\n\t  var i = 0,\n\t    x = 0,\n\t    compare = 0,\n\t    // vm maps textual PHP versions to negatives so they're less than 0.\n\t    // PHP currently defines these as CASE-SENSITIVE. It is important to\n\t    // leave these as negatives so that they can come before numerical versions\n\t    // and as if no letters were there to begin with.\n\t    // (1alpha is < 1 and < 1.1 but > 1dev1)\n\t    // If a non-numerical value can't be mapped to this table, it receives\n\t    // -7 as its value.\n\t    vm = {\n\t      'dev': -6,\n\t      'alpha': -5,\n\t      'a': -5,\n\t      'beta': -4,\n\t      'b': -4,\n\t      'RC': -3,\n\t      'rc': -3,\n\t      '#': -2,\n\t      'p': 1,\n\t      'pl': 1\n\t    },\n\t    // This function will be called to prepare each version argument.\n\t    // It replaces every _, -, and + with a dot.\n\t    // It surrounds any nonsequence of numbers/dots with dots.\n\t    // It replaces sequences of dots with a single dot.\n\t    //    version_compare('4..0', '4.0') == 0\n\t    // Important: A string of 0 length needs to be converted into a value\n\t    // even less than an unexisting value in vm (-7), hence [-8].\n\t    // It's also important to not strip spaces because of this.\n\t    //   version_compare('', ' ') == 1\n\t    prepVersion = function (v) {\n\t      v = ('' + v).replace(/[_\\-+]/g, '.');\n\t      v = v.replace(/([^.\\d]+)/g, '.$1.').replace(/\\.{2,}/g, '.');\n\t      return (!v.length ? [-8] : v.split('.'));\n\t    },\n\t    // This converts a version component to a number.\n\t    // Empty component becomes 0.\n\t    // Non-numerical component becomes a negative number.\n\t    // Numerical component becomes itself as an integer.\n\t    numVersion = function (v) {\n\t      return !v ? 0 : (isNaN(v) ? vm[v] || -7 : parseInt(v, 10));\n\t    };\n\n\t  v1 = prepVersion(v1);\n\t  v2 = prepVersion(v2);\n\t  x = Math.max(v1.length, v2.length);\n\t  for (i = 0; i < x; i++) {\n\t    if (v1[i] == v2[i]) {\n\t      continue;\n\t    }\n\t    v1[i] = numVersion(v1[i]);\n\t    v2[i] = numVersion(v2[i]);\n\t    if (v1[i] < v2[i]) {\n\t      compare = -1;\n\t      break;\n\t    } else if (v1[i] > v2[i]) {\n\t      compare = 1;\n\t      break;\n\t    }\n\t  }\n\t  if (!operator) {\n\t    return compare;\n\t  }\n\n\t  // Important: operator is CASE-SENSITIVE.\n\t  // \"No operator\" seems to be treated as \"<.\"\n\t  // Any other values seem to make the function return null.\n\t  switch (operator) {\n\t  case '>':\n\t  case 'gt':\n\t    return (compare > 0);\n\t  case '>=':\n\t  case 'ge':\n\t    return (compare >= 0);\n\t  case '<=':\n\t  case 'le':\n\t    return (compare <= 0);\n\t  case '==':\n\t  case '=':\n\t  case 'eq':\n\t    return (compare === 0);\n\t  case '<>':\n\t  case '!=':\n\t  case 'ne':\n\t    return (compare !== 0);\n\t  case '':\n\t  case '<':\n\t  case 'lt':\n\t    return (compare < 0);\n\t  default:\n\t    return null;\n\t  }\n\t}\n\n\n\tvar can = (function() {\n\t\tvar caps = {\n\t\t\t\tdefine_property: (function() {\n\t\t\t\t\t/* // currently too much extra code required, not exactly worth it\n\t\t\t\t\ttry { // as of IE8, getters/setters are supported only on DOM elements\n\t\t\t\t\t\tvar obj = {};\n\t\t\t\t\t\tif (Object.defineProperty) {\n\t\t\t\t\t\t\tObject.defineProperty(obj, 'prop', {\n\t\t\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(ex) {}\n\n\t\t\t\t\tif (Object.prototype.__defineGetter__ && Object.prototype.__defineSetter__) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}*/\n\t\t\t\t\treturn false;\n\t\t\t\t}()),\n\n\t\t\t\tcreate_canvas: (function() {\n\t\t\t\t\t// On the S60 and BB Storm, getContext exists, but always returns undefined\n\t\t\t\t\t// so we actually have to call getContext() to verify\n\t\t\t\t\t// github.com/Modernizr/Modernizr/issues/issue/97/\n\t\t\t\t\tvar el = document.createElement('canvas');\n\t\t\t\t\treturn !!(el.getContext && el.getContext('2d'));\n\t\t\t\t}()),\n\n\t\t\t\treturn_response_type: function(responseType) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (Basic.inArray(responseType, ['', 'text', 'document']) !== -1) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t} else if (window.XMLHttpRequest) {\n\t\t\t\t\t\t\tvar xhr = new XMLHttpRequest();\n\t\t\t\t\t\t\txhr.open('get', '/'); // otherwise Gecko throws an exception\n\t\t\t\t\t\t\tif ('responseType' in xhr) {\n\t\t\t\t\t\t\t\txhr.responseType = responseType;\n\t\t\t\t\t\t\t\t// as of 23.0.1271.64, Chrome switched from throwing exception to merely logging it to the console (why? o why?)\n\t\t\t\t\t\t\t\tif (xhr.responseType !== responseType) {\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (ex) {}\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\n\t\t\t\t// ideas for this heavily come from Modernizr (http://modernizr.com/)\n\t\t\t\tuse_data_uri: (function() {\n\t\t\t\t\tvar du = new Image();\n\n\t\t\t\t\tdu.onload = function() {\n\t\t\t\t\t\tcaps.use_data_uri = (du.width === 1 && du.height === 1);\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tdu.src = \"data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\";\n\t\t\t\t\t}, 1);\n\t\t\t\t\treturn false;\n\t\t\t\t}()),\n\n\t\t\t\tuse_data_uri_over32kb: function() { // IE8\n\t\t\t\t\treturn caps.use_data_uri && (Env.browser !== 'IE' || Env.version >= 9);\n\t\t\t\t},\n\n\t\t\t\tuse_data_uri_of: function(bytes) {\n\t\t\t\t\treturn (caps.use_data_uri && bytes < 33000 || caps.use_data_uri_over32kb());\n\t\t\t\t},\n\n\t\t\t\tuse_fileinput: function() {\n\t\t\t\t\tvar el = document.createElement('input');\n\t\t\t\t\tel.setAttribute('type', 'file');\n\t\t\t\t\treturn !el.disabled;\n\t\t\t\t}\n\t\t\t};\n\n\t\treturn function(cap) {\n\t\t\tvar args = [].slice.call(arguments);\n\t\t\targs.shift(); // shift of cap\n\t\t\treturn Basic.typeOf(caps[cap]) === 'function' ? caps[cap].apply(this, args) : !!caps[cap];\n\t\t};\n\t}());\n\n\n\tvar Env = {\n\t\tcan: can,\n\t\t\n\t\tbrowser: UAParser.browser.name,\n\t\tversion: parseFloat(UAParser.browser.major),\n\t\tos: UAParser.os.name, // everybody intuitively types it in a lowercase for some reason\n\t\tosVersion: UAParser.os.version,\n\n\t\tverComp: version_compare,\n\t\t\n\t\tswf_url: \"../flash/Moxie.swf\",\n\t\txap_url: \"../silverlight/Moxie.xap\",\n\t\tglobal_event_dispatcher: \"moxie.core.EventTarget.instance.dispatchEvent\"\n\t};\n\n\t// for backward compatibility\n\t// @deprecated Use `Env.os` instead\n\tEnv.OS = Env.os;\n\n\treturn Env;\n});\n\n// Included from: src/javascript/core/utils/Dom.js\n\n/**\n * Dom.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/core/utils/Dom', ['moxie/core/utils/Env'], function(Env) {\n\n\t/**\n\tGet DOM Element by it's id.\n\n\t@method get\n\t@for Utils\n\t@param {String} id Identifier of the DOM Element\n\t@return {DOMElement}\n\t*/\n\tvar get = function(id) {\n\t\tif (typeof id !== 'string') {\n\t\t\treturn id;\n\t\t}\n\t\treturn document.getElementById(id);\n\t};\n\n\t/**\n\tChecks if specified DOM element has specified class.\n\n\t@method hasClass\n\t@static\n\t@param {Object} obj DOM element like object to add handler to.\n\t@param {String} name Class name\n\t*/\n\tvar hasClass = function(obj, name) {\n\t\tif (!obj.className) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar regExp = new RegExp(\"(^|\\\\s+)\"+name+\"(\\\\s+|$)\");\n\t\treturn regExp.test(obj.className);\n\t};\n\n\t/**\n\tAdds specified className to specified DOM element.\n\n\t@method addClass\n\t@static\n\t@param {Object} obj DOM element like object to add handler to.\n\t@param {String} name Class name\n\t*/\n\tvar addClass = function(obj, name) {\n\t\tif (!hasClass(obj, name)) {\n\t\t\tobj.className = !obj.className ? name : obj.className.replace(/\\s+$/, '') + ' ' + name;\n\t\t}\n\t};\n\n\t/**\n\tRemoves specified className from specified DOM element.\n\n\t@method removeClass\n\t@static\n\t@param {Object} obj DOM element like object to add handler to.\n\t@param {String} name Class name\n\t*/\n\tvar removeClass = function(obj, name) {\n\t\tif (obj.className) {\n\t\t\tvar regExp = new RegExp(\"(^|\\\\s+)\"+name+\"(\\\\s+|$)\");\n\t\t\tobj.className = obj.className.replace(regExp, function($0, $1, $2) {\n\t\t\t\treturn $1 === ' ' && $2 === ' ' ? ' ' : '';\n\t\t\t});\n\t\t}\n\t};\n\n\t/**\n\tReturns a given computed style of a DOM element.\n\n\t@method getStyle\n\t@static\n\t@param {Object} obj DOM element like object.\n\t@param {String} name Style you want to get from the DOM element\n\t*/\n\tvar getStyle = function(obj, name) {\n\t\tif (obj.currentStyle) {\n\t\t\treturn obj.currentStyle[name];\n\t\t} else if (window.getComputedStyle) {\n\t\t\treturn window.getComputedStyle(obj, null)[name];\n\t\t}\n\t};\n\n\n\t/**\n\tReturns the absolute x, y position of an Element. The position will be returned in a object with x, y fields.\n\n\t@method getPos\n\t@static\n\t@param {Element} node HTML element or element id to get x, y position from.\n\t@param {Element} root Optional root element to stop calculations at.\n\t@return {object} Absolute position of the specified element object with x, y fields.\n\t*/\n\tvar getPos = function(node, root) {\n\t\tvar x = 0, y = 0, parent, doc = document, nodeRect, rootRect;\n\n\t\tnode = node;\n\t\troot = root || doc.body;\n\n\t\t// Returns the x, y cordinate for an element on IE 6 and IE 7\n\t\tfunction getIEPos(node) {\n\t\t\tvar bodyElm, rect, x = 0, y = 0;\n\n\t\t\tif (node) {\n\t\t\t\trect = node.getBoundingClientRect();\n\t\t\t\tbodyElm = doc.compatMode === \"CSS1Compat\" ? doc.documentElement : doc.body;\n\t\t\t\tx = rect.left + bodyElm.scrollLeft;\n\t\t\t\ty = rect.top + bodyElm.scrollTop;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tx : x,\n\t\t\t\ty : y\n\t\t\t};\n\t\t}\n\n\t\t// Use getBoundingClientRect on IE 6 and IE 7 but not on IE 8 in standards mode\n\t\tif (node && node.getBoundingClientRect && Env.browser === 'IE' && (!doc.documentMode || doc.documentMode < 8)) {\n\t\t\tnodeRect = getIEPos(node);\n\t\t\trootRect = getIEPos(root);\n\n\t\t\treturn {\n\t\t\t\tx : nodeRect.x - rootRect.x,\n\t\t\t\ty : nodeRect.y - rootRect.y\n\t\t\t};\n\t\t}\n\n\t\tparent = node;\n\t\twhile (parent && parent != root && parent.nodeType) {\n\t\t\tx += parent.offsetLeft || 0;\n\t\t\ty += parent.offsetTop || 0;\n\t\t\tparent = parent.offsetParent;\n\t\t}\n\n\t\tparent = node.parentNode;\n\t\twhile (parent && parent != root && parent.nodeType) {\n\t\t\tx -= parent.scrollLeft || 0;\n\t\t\ty -= parent.scrollTop || 0;\n\t\t\tparent = parent.parentNode;\n\t\t}\n\n\t\treturn {\n\t\t\tx : x,\n\t\t\ty : y\n\t\t};\n\t};\n\n\t/**\n\tReturns the size of the specified node in pixels.\n\n\t@method getSize\n\t@static\n\t@param {Node} node Node to get the size of.\n\t@return {Object} Object with a w and h property.\n\t*/\n\tvar getSize = function(node) {\n\t\treturn {\n\t\t\tw : node.offsetWidth || node.clientWidth,\n\t\t\th : node.offsetHeight || node.clientHeight\n\t\t};\n\t};\n\n\treturn {\n\t\tget: get,\n\t\thasClass: hasClass,\n\t\taddClass: addClass,\n\t\tremoveClass: removeClass,\n\t\tgetStyle: getStyle,\n\t\tgetPos: getPos,\n\t\tgetSize: getSize\n\t};\n});\n\n// Included from: src/javascript/core/Exceptions.js\n\n/**\n * Exceptions.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/core/Exceptions', [\n\t'moxie/core/utils/Basic'\n], function(Basic) {\n\tfunction _findKey(obj, value) {\n\t\tvar key;\n\t\tfor (key in obj) {\n\t\t\tif (obj[key] === value) {\n\t\t\t\treturn key;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tRuntimeError: (function() {\n\t\t\tvar namecodes = {\n\t\t\t\tNOT_INIT_ERR: 1,\n\t\t\t\tNOT_SUPPORTED_ERR: 9,\n\t\t\t\tJS_ERR: 4\n\t\t\t};\n\n\t\t\tfunction RuntimeError(code) {\n\t\t\t\tthis.code = code;\n\t\t\t\tthis.name = _findKey(namecodes, code);\n\t\t\t\tthis.message = this.name + \": RuntimeError \" + this.code;\n\t\t\t}\n\t\t\t\n\t\t\tBasic.extend(RuntimeError, namecodes);\n\t\t\tRuntimeError.prototype = Error.prototype;\n\t\t\treturn RuntimeError;\n\t\t}()),\n\t\t\n\t\tOperationNotAllowedException: (function() {\n\t\t\t\n\t\t\tfunction OperationNotAllowedException(code) {\n\t\t\t\tthis.code = code;\n\t\t\t\tthis.name = 'OperationNotAllowedException';\n\t\t\t}\n\t\t\t\n\t\t\tBasic.extend(OperationNotAllowedException, {\n\t\t\t\tNOT_ALLOWED_ERR: 1\n\t\t\t});\n\t\t\t\n\t\t\tOperationNotAllowedException.prototype = Error.prototype;\n\t\t\t\n\t\t\treturn OperationNotAllowedException;\n\t\t}()),\n\n\t\tImageError: (function() {\n\t\t\tvar namecodes = {\n\t\t\t\tWRONG_FORMAT: 1,\n\t\t\t\tMAX_RESOLUTION_ERR: 2\n\t\t\t};\n\n\t\t\tfunction ImageError(code) {\n\t\t\t\tthis.code = code;\n\t\t\t\tthis.name = _findKey(namecodes, code);\n\t\t\t\tthis.message = this.name + \": ImageError \" + this.code;\n\t\t\t}\n\t\t\t\n\t\t\tBasic.extend(ImageError, namecodes);\n\t\t\tImageError.prototype = Error.prototype;\n\n\t\t\treturn ImageError;\n\t\t}()),\n\n\t\tFileException: (function() {\n\t\t\tvar namecodes = {\n\t\t\t\tNOT_FOUND_ERR: 1,\n\t\t\t\tSECURITY_ERR: 2,\n\t\t\t\tABORT_ERR: 3,\n\t\t\t\tNOT_READABLE_ERR: 4,\n\t\t\t\tENCODING_ERR: 5,\n\t\t\t\tNO_MODIFICATION_ALLOWED_ERR: 6,\n\t\t\t\tINVALID_STATE_ERR: 7,\n\t\t\t\tSYNTAX_ERR: 8\n\t\t\t};\n\n\t\t\tfunction FileException(code) {\n\t\t\t\tthis.code = code;\n\t\t\t\tthis.name = _findKey(namecodes, code);\n\t\t\t\tthis.message = this.name + \": FileException \" + this.code;\n\t\t\t}\n\t\t\t\n\t\t\tBasic.extend(FileException, namecodes);\n\t\t\tFileException.prototype = Error.prototype;\n\t\t\treturn FileException;\n\t\t}()),\n\t\t\n\t\tDOMException: (function() {\n\t\t\tvar namecodes = {\n\t\t\t\tINDEX_SIZE_ERR: 1,\n\t\t\t\tDOMSTRING_SIZE_ERR: 2,\n\t\t\t\tHIERARCHY_REQUEST_ERR: 3,\n\t\t\t\tWRONG_DOCUMENT_ERR: 4,\n\t\t\t\tINVALID_CHARACTER_ERR: 5,\n\t\t\t\tNO_DATA_ALLOWED_ERR: 6,\n\t\t\t\tNO_MODIFICATION_ALLOWED_ERR: 7,\n\t\t\t\tNOT_FOUND_ERR: 8,\n\t\t\t\tNOT_SUPPORTED_ERR: 9,\n\t\t\t\tINUSE_ATTRIBUTE_ERR: 10,\n\t\t\t\tINVALID_STATE_ERR: 11,\n\t\t\t\tSYNTAX_ERR: 12,\n\t\t\t\tINVALID_MODIFICATION_ERR: 13,\n\t\t\t\tNAMESPACE_ERR: 14,\n\t\t\t\tINVALID_ACCESS_ERR: 15,\n\t\t\t\tVALIDATION_ERR: 16,\n\t\t\t\tTYPE_MISMATCH_ERR: 17,\n\t\t\t\tSECURITY_ERR: 18,\n\t\t\t\tNETWORK_ERR: 19,\n\t\t\t\tABORT_ERR: 20,\n\t\t\t\tURL_MISMATCH_ERR: 21,\n\t\t\t\tQUOTA_EXCEEDED_ERR: 22,\n\t\t\t\tTIMEOUT_ERR: 23,\n\t\t\t\tINVALID_NODE_TYPE_ERR: 24,\n\t\t\t\tDATA_CLONE_ERR: 25\n\t\t\t};\n\n\t\t\tfunction DOMException(code) {\n\t\t\t\tthis.code = code;\n\t\t\t\tthis.name = _findKey(namecodes, code);\n\t\t\t\tthis.message = this.name + \": DOMException \" + this.code;\n\t\t\t}\n\t\t\t\n\t\t\tBasic.extend(DOMException, namecodes);\n\t\t\tDOMException.prototype = Error.prototype;\n\t\t\treturn DOMException;\n\t\t}()),\n\t\t\n\t\tEventException: (function() {\n\t\t\tfunction EventException(code) {\n\t\t\t\tthis.code = code;\n\t\t\t\tthis.name = 'EventException';\n\t\t\t}\n\t\t\t\n\t\t\tBasic.extend(EventException, {\n\t\t\t\tUNSPECIFIED_EVENT_TYPE_ERR: 0\n\t\t\t});\n\t\t\t\n\t\t\tEventException.prototype = Error.prototype;\n\t\t\t\n\t\t\treturn EventException;\n\t\t}())\n\t};\n});\n\n// Included from: src/javascript/core/EventTarget.js\n\n/**\n * EventTarget.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/core/EventTarget', [\n\t'moxie/core/Exceptions',\n\t'moxie/core/utils/Basic'\n], function(x, Basic) {\n\t/**\n\tParent object for all event dispatching components and objects\n\n\t@class EventTarget\n\t@constructor EventTarget\n\t*/\n\tfunction EventTarget() {\n\t\t// hash of event listeners by object uid\n\t\tvar eventpool = {};\n\t\t\t\t\n\t\tBasic.extend(this, {\n\t\t\t\n\t\t\t/**\n\t\t\tUnique id of the event dispatcher, usually overriden by children\n\n\t\t\t@property uid\n\t\t\t@type String\n\t\t\t*/\n\t\t\tuid: null,\n\t\t\t\n\t\t\t/**\n\t\t\tCan be called from within a child  in order to acquire uniqie id in automated manner\n\n\t\t\t@method init\n\t\t\t*/\n\t\t\tinit: function() {\n\t\t\t\tif (!this.uid) {\n\t\t\t\t\tthis.uid = Basic.guid('uid_');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\tRegister a handler to a specific event dispatched by the object\n\n\t\t\t@method addEventListener\n\t\t\t@param {String} type Type or basically a name of the event to subscribe to\n\t\t\t@param {Function} fn Callback function that will be called when event happens\n\t\t\t@param {Number} [priority=0] Priority of the event handler - handlers with higher priorities will be called first\n\t\t\t@param {Object} [scope=this] A scope to invoke event handler in\n\t\t\t*/\n\t\t\taddEventListener: function(type, fn, priority, scope) {\n\t\t\t\tvar self = this, list;\n\t\t\t\t\n\t\t\t\ttype = Basic.trim(type);\n\t\t\t\t\n\t\t\t\tif (/\\s/.test(type)) {\n\t\t\t\t\t// multiple event types were passed for one handler\n\t\t\t\t\tBasic.each(type.split(/\\s+/), function(type) {\n\t\t\t\t\t\tself.addEventListener(type, fn, priority, scope);\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttype = type.toLowerCase();\n\t\t\t\tpriority = parseInt(priority, 10) || 0;\n\t\t\t\t\n\t\t\t\tlist = eventpool[this.uid] && eventpool[this.uid][type] || [];\n\t\t\t\tlist.push({fn : fn, priority : priority, scope : scope || this});\n\t\t\t\t\n\t\t\t\tif (!eventpool[this.uid]) {\n\t\t\t\t\teventpool[this.uid] = {};\n\t\t\t\t}\n\t\t\t\teventpool[this.uid][type] = list;\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tCheck if any handlers were registered to the specified event\n\n\t\t\t@method hasEventListener\n\t\t\t@param {String} type Type or basically a name of the event to check\n\t\t\t@return {Mixed} Returns a handler if it was found and false, if - not\n\t\t\t*/\n\t\t\thasEventListener: function(type) {\n\t\t\t\treturn type ? !!(eventpool[this.uid] && eventpool[this.uid][type]) : !!eventpool[this.uid];\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tUnregister the handler from the event, or if former was not specified - unregister all handlers\n\n\t\t\t@method removeEventListener\n\t\t\t@param {String} type Type or basically a name of the event\n\t\t\t@param {Function} [fn] Handler to unregister\n\t\t\t*/\n\t\t\tremoveEventListener: function(type, fn) {\n\t\t\t\ttype = type.toLowerCase();\n\t\n\t\t\t\tvar list = eventpool[this.uid] && eventpool[this.uid][type], i;\n\t\n\t\t\t\tif (list) {\n\t\t\t\t\tif (fn) {\n\t\t\t\t\t\tfor (i = list.length - 1; i >= 0; i--) {\n\t\t\t\t\t\t\tif (list[i].fn === fn) {\n\t\t\t\t\t\t\t\tlist.splice(i, 1);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlist = [];\n\t\t\t\t\t}\n\t\n\t\t\t\t\t// delete event list if it has become empty\n\t\t\t\t\tif (!list.length) {\n\t\t\t\t\t\tdelete eventpool[this.uid][type];\n\t\t\t\t\t\t\n\t\t\t\t\t\t// and object specific entry in a hash if it has no more listeners attached\n\t\t\t\t\t\tif (Basic.isEmptyObj(eventpool[this.uid])) {\n\t\t\t\t\t\t\tdelete eventpool[this.uid];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tRemove all event handlers from the object\n\n\t\t\t@method removeAllEventListeners\n\t\t\t*/\n\t\t\tremoveAllEventListeners: function() {\n\t\t\t\tif (eventpool[this.uid]) {\n\t\t\t\t\tdelete eventpool[this.uid];\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tDispatch the event\n\n\t\t\t@method dispatchEvent\n\t\t\t@param {String/Object} Type of event or event object to dispatch\n\t\t\t@param {Mixed} [...] Variable number of arguments to be passed to a handlers\n\t\t\t@return {Boolean} true by default and false if any handler returned false\n\t\t\t*/\n\t\t\tdispatchEvent: function(type) {\n\t\t\t\tvar uid, list, args, tmpEvt, evt = {}, result = true, undef;\n\t\t\t\t\n\t\t\t\tif (Basic.typeOf(type) !== 'string') {\n\t\t\t\t\t// we can't use original object directly (because of Silverlight)\n\t\t\t\t\ttmpEvt = type;\n\n\t\t\t\t\tif (Basic.typeOf(tmpEvt.type) === 'string') {\n\t\t\t\t\t\ttype = tmpEvt.type;\n\n\t\t\t\t\t\tif (tmpEvt.total !== undef && tmpEvt.loaded !== undef) { // progress event\n\t\t\t\t\t\t\tevt.total = tmpEvt.total;\n\t\t\t\t\t\t\tevt.loaded = tmpEvt.loaded;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevt.async = tmpEvt.async || false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new x.EventException(x.EventException.UNSPECIFIED_EVENT_TYPE_ERR);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// check if event is meant to be dispatched on an object having specific uid\n\t\t\t\tif (type.indexOf('::') !== -1) {\n\t\t\t\t\t(function(arr) {\n\t\t\t\t\t\tuid = arr[0];\n\t\t\t\t\t\ttype = arr[1];\n\t\t\t\t\t}(type.split('::')));\n\t\t\t\t} else {\n\t\t\t\t\tuid = this.uid;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttype = type.toLowerCase();\n\t\t\t\t\t\t\t\t\n\t\t\t\tlist = eventpool[uid] && eventpool[uid][type];\n\n\t\t\t\tif (list) {\n\t\t\t\t\t// sort event list by prority\n\t\t\t\t\tlist.sort(function(a, b) { return b.priority - a.priority; });\n\t\t\t\t\t\n\t\t\t\t\targs = [].slice.call(arguments);\n\t\t\t\t\t\n\t\t\t\t\t// first argument will be pseudo-event object\n\t\t\t\t\targs.shift();\n\t\t\t\t\tevt.type = type;\n\t\t\t\t\targs.unshift(evt);\n\n\t\t\t\t\t// Dispatch event to all listeners\n\t\t\t\t\tvar queue = [];\n\t\t\t\t\tBasic.each(list, function(handler) {\n\t\t\t\t\t\t// explicitly set the target, otherwise events fired from shims do not get it\n\t\t\t\t\t\targs[0].target = handler.scope;\n\t\t\t\t\t\t// if event is marked as async, detach the handler\n\t\t\t\t\t\tif (evt.async) {\n\t\t\t\t\t\t\tqueue.push(function(cb) {\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\tcb(handler.fn.apply(handler.scope, args) === false);\n\t\t\t\t\t\t\t\t}, 1);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tqueue.push(function(cb) {\n\t\t\t\t\t\t\t\tcb(handler.fn.apply(handler.scope, args) === false); // if handler returns false stop propagation\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (queue.length) {\n\t\t\t\t\t\tBasic.inSeries(queue, function(err) {\n\t\t\t\t\t\t\tresult = !err;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tAlias for addEventListener\n\n\t\t\t@method bind\n\t\t\t@protected\n\t\t\t*/\n\t\t\tbind: function() {\n\t\t\t\tthis.addEventListener.apply(this, arguments);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tAlias for removeEventListener\n\n\t\t\t@method unbind\n\t\t\t@protected\n\t\t\t*/\n\t\t\tunbind: function() {\n\t\t\t\tthis.removeEventListener.apply(this, arguments);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tAlias for removeAllEventListeners\n\n\t\t\t@method unbindAll\n\t\t\t@protected\n\t\t\t*/\n\t\t\tunbindAll: function() {\n\t\t\t\tthis.removeAllEventListeners.apply(this, arguments);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tAlias for dispatchEvent\n\n\t\t\t@method trigger\n\t\t\t@protected\n\t\t\t*/\n\t\t\ttrigger: function() {\n\t\t\t\treturn this.dispatchEvent.apply(this, arguments);\n\t\t\t},\n\t\t\t\n\t\t\t\n\t\t\t/**\n\t\t\tConverts properties of on[event] type to corresponding event handlers,\n\t\t\tis used to avoid extra hassle around the process of calling them back\n\n\t\t\t@method convertEventPropsToHandlers\n\t\t\t@private\n\t\t\t*/\n\t\t\tconvertEventPropsToHandlers: function(handlers) {\n\t\t\t\tvar h;\n\t\t\t\t\t\t\n\t\t\t\tif (Basic.typeOf(handlers) !== 'array') {\n\t\t\t\t\thandlers = [handlers];\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < handlers.length; i++) {\n\t\t\t\t\th = 'on' + handlers[i];\n\t\t\t\t\t\n\t\t\t\t\tif (Basic.typeOf(this[h]) === 'function') {\n\t\t\t\t\t\tthis.addEventListener(handlers[i], this[h]);\n\t\t\t\t\t} else if (Basic.typeOf(this[h]) === 'undefined') {\n\t\t\t\t\t\tthis[h] = null; // object must have defined event properties, even if it doesn't make use of them\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t});\n\t}\n\n\tEventTarget.instance = new EventTarget(); \n\n\treturn EventTarget;\n});\n\n// Included from: src/javascript/core/utils/Encode.js\n\n/**\n * Encode.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/core/utils/Encode', [], function() {\n\n\t/**\n\tEncode string with UTF-8\n\n\t@method utf8_encode\n\t@for Utils\n\t@static\n\t@param {String} str String to encode\n\t@return {String} UTF-8 encoded string\n\t*/\n\tvar utf8_encode = function(str) {\n\t\treturn unescape(encodeURIComponent(str));\n\t};\n\t\n\t/**\n\tDecode UTF-8 encoded string\n\n\t@method utf8_decode\n\t@static\n\t@param {String} str String to decode\n\t@return {String} Decoded string\n\t*/\n\tvar utf8_decode = function(str_data) {\n\t\treturn decodeURIComponent(escape(str_data));\n\t};\n\t\n\t/**\n\tDecode Base64 encoded string (uses browser's default method if available),\n\tfrom: https://raw.github.com/kvz/phpjs/master/functions/url/base64_decode.js\n\n\t@method atob\n\t@static\n\t@param {String} data String to decode\n\t@return {String} Decoded string\n\t*/\n\tvar atob = function(data, utf8) {\n\t\tif (typeof(window.atob) === 'function') {\n\t\t\treturn utf8 ? utf8_decode(window.atob(data)) : window.atob(data);\n\t\t}\n\n\t\t// http://kevin.vanzonneveld.net\n\t\t// +   original by: Tyler Akins (http://rumkin.com)\n\t\t// +   improved by: Thunder.m\n\t\t// +      input by: Aman Gupta\n\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t\t// +   bugfixed by: Onno Marsman\n\t\t// +   bugfixed by: Pellentesque Malesuada\n\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t\t// +      input by: Brett Zamir (http://brett-zamir.me)\n\t\t// +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t\t// *     example 1: base64_decode('S2V2aW4gdmFuIFpvbm5ldmVsZA==');\n\t\t// *     returns 1: 'Kevin van Zonneveld'\n\t\t// mozilla has this native\n\t\t// - but breaks in 2.0.0.12!\n\t\t//if (typeof this.window.atob == 'function') {\n\t\t//    return atob(data);\n\t\t//}\n\t\tvar b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\t\tvar o1, o2, o3, h1, h2, h3, h4, bits, i = 0,\n\t\t\tac = 0,\n\t\t\tdec = \"\",\n\t\t\ttmp_arr = [];\n\n\t\tif (!data) {\n\t\t\treturn data;\n\t\t}\n\n\t\tdata += '';\n\n\t\tdo { // unpack four hexets into three octets using index points in b64\n\t\t\th1 = b64.indexOf(data.charAt(i++));\n\t\t\th2 = b64.indexOf(data.charAt(i++));\n\t\t\th3 = b64.indexOf(data.charAt(i++));\n\t\t\th4 = b64.indexOf(data.charAt(i++));\n\n\t\t\tbits = h1 << 18 | h2 << 12 | h3 << 6 | h4;\n\n\t\t\to1 = bits >> 16 & 0xff;\n\t\t\to2 = bits >> 8 & 0xff;\n\t\t\to3 = bits & 0xff;\n\n\t\t\tif (h3 == 64) {\n\t\t\t\ttmp_arr[ac++] = String.fromCharCode(o1);\n\t\t\t} else if (h4 == 64) {\n\t\t\t\ttmp_arr[ac++] = String.fromCharCode(o1, o2);\n\t\t\t} else {\n\t\t\t\ttmp_arr[ac++] = String.fromCharCode(o1, o2, o3);\n\t\t\t}\n\t\t} while (i < data.length);\n\n\t\tdec = tmp_arr.join('');\n\n\t\treturn utf8 ? utf8_decode(dec) : dec;\n\t};\n\t\n\t/**\n\tBase64 encode string (uses browser's default method if available),\n\tfrom: https://raw.github.com/kvz/phpjs/master/functions/url/base64_encode.js\n\n\t@method btoa\n\t@static\n\t@param {String} data String to encode\n\t@return {String} Base64 encoded string\n\t*/\n\tvar btoa = function(data, utf8) {\n\t\tif (utf8) {\n\t\t\tutf8_encode(data);\n\t\t}\n\n\t\tif (typeof(window.btoa) === 'function') {\n\t\t\treturn window.btoa(data);\n\t\t}\n\n\t\t// http://kevin.vanzonneveld.net\n\t\t// +   original by: Tyler Akins (http://rumkin.com)\n\t\t// +   improved by: Bayron Guevara\n\t\t// +   improved by: Thunder.m\n\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t\t// +   bugfixed by: Pellentesque Malesuada\n\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t\t// +   improved by: Rafał Kukawski (http://kukawski.pl)\n\t\t// *     example 1: base64_encode('Kevin van Zonneveld');\n\t\t// *     returns 1: 'S2V2aW4gdmFuIFpvbm5ldmVsZA=='\n\t\t// mozilla has this native\n\t\t// - but breaks in 2.0.0.12!\n\t\tvar b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\t\tvar o1, o2, o3, h1, h2, h3, h4, bits, i = 0,\n\t\t\tac = 0,\n\t\t\tenc = \"\",\n\t\t\ttmp_arr = [];\n\n\t\tif (!data) {\n\t\t\treturn data;\n\t\t}\n\n\t\tdo { // pack three octets into four hexets\n\t\t\to1 = data.charCodeAt(i++);\n\t\t\to2 = data.charCodeAt(i++);\n\t\t\to3 = data.charCodeAt(i++);\n\n\t\t\tbits = o1 << 16 | o2 << 8 | o3;\n\n\t\t\th1 = bits >> 18 & 0x3f;\n\t\t\th2 = bits >> 12 & 0x3f;\n\t\t\th3 = bits >> 6 & 0x3f;\n\t\t\th4 = bits & 0x3f;\n\n\t\t\t// use hexets to index into b64, and append result to encoded string\n\t\t\ttmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n\t\t} while (i < data.length);\n\n\t\tenc = tmp_arr.join('');\n\n\t\tvar r = data.length % 3;\n\n\t\treturn (r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3);\n\t};\n\n\n\treturn {\n\t\tutf8_encode: utf8_encode,\n\t\tutf8_decode: utf8_decode,\n\t\tatob: atob,\n\t\tbtoa: btoa\n\t};\n});\n\n// Included from: src/javascript/runtime/Runtime.js\n\n/**\n * Runtime.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/runtime/Runtime', [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/EventTarget\"\n], function(Basic, Dom, EventTarget) {\n\tvar runtimeConstructors = {}, runtimes = {};\n\n\t/**\n\tCommon set of methods and properties for every runtime instance\n\n\t@class Runtime\n\n\t@param {Object} options\n\t@param {String} type Sanitized name of the runtime\n\t@param {Object} [caps] Set of capabilities that differentiate specified runtime\n\t@param {Object} [modeCaps] Set of capabilities that do require specific operational mode\n\t@param {String} [preferredMode='browser'] Preferred operational mode to choose if no required capabilities were requested\n\t*/\n\tfunction Runtime(options, type, caps, modeCaps, preferredMode) {\n\t\t/**\n\t\tDispatched when runtime is initialized and ready.\n\t\tResults in RuntimeInit on a connected component.\n\n\t\t@event Init\n\t\t*/\n\n\t\t/**\n\t\tDispatched when runtime fails to initialize.\n\t\tResults in RuntimeError on a connected component.\n\n\t\t@event Error\n\t\t*/\n\n\t\tvar self = this\n\t\t, _shim\n\t\t, _uid = Basic.guid(type + '_')\n\t\t, defaultMode = preferredMode || 'browser'\n\t\t;\n\n\t\toptions = options || {};\n\n\t\t// register runtime in private hash\n\t\truntimes[_uid] = this;\n\n\t\t/**\n\t\tDefault set of capabilities, which can be redifined later by specific runtime\n\n\t\t@private\n\t\t@property caps\n\t\t@type Object\n\t\t*/\n\t\tcaps = Basic.extend({\n\t\t\t// Runtime can: \n\t\t\t// provide access to raw binary data of the file\n\t\t\taccess_binary: false,\n\t\t\t// provide access to raw binary data of the image (image extension is optional) \n\t\t\taccess_image_binary: false,\n\t\t\t// display binary data as thumbs for example\n\t\t\tdisplay_media: false,\n\t\t\t// make cross-domain requests\n\t\t\tdo_cors: false,\n\t\t\t// accept files dragged and dropped from the desktop\n\t\t\tdrag_and_drop: false,\n\t\t\t// filter files in selection dialog by their extensions\n\t\t\tfilter_by_extension: true,\n\t\t\t// resize image (and manipulate it raw data of any file in general)\n\t\t\tresize_image: false,\n\t\t\t// periodically report how many bytes of total in the file were uploaded (loaded)\n\t\t\treport_upload_progress: false,\n\t\t\t// provide access to the headers of http response \n\t\t\treturn_response_headers: false,\n\t\t\t// support response of specific type, which should be passed as an argument\n\t\t\t// e.g. runtime.can('return_response_type', 'blob')\n\t\t\treturn_response_type: false,\n\t\t\t// return http status code of the response\n\t\t\treturn_status_code: true,\n\t\t\t// send custom http header with the request\n\t\t\tsend_custom_headers: false,\n\t\t\t// pick up the files from a dialog\n\t\t\tselect_file: false,\n\t\t\t// select whole folder in file browse dialog\n\t\t\tselect_folder: false,\n\t\t\t// select multiple files at once in file browse dialog\n\t\t\tselect_multiple: true,\n\t\t\t// send raw binary data, that is generated after image resizing or manipulation of other kind\n\t\t\tsend_binary_string: false,\n\t\t\t// send cookies with http request and therefore retain session\n\t\t\tsend_browser_cookies: true,\n\t\t\t// send data formatted as multipart/form-data\n\t\t\tsend_multipart: true,\n\t\t\t// slice the file or blob to smaller parts\n\t\t\tslice_blob: false,\n\t\t\t// upload file without preloading it to memory, stream it out directly from disk\n\t\t\tstream_upload: false,\n\t\t\t// programmatically trigger file browse dialog\n\t\t\tsummon_file_dialog: false,\n\t\t\t// upload file of specific size, size should be passed as argument\n\t\t\t// e.g. runtime.can('upload_filesize', '500mb')\n\t\t\tupload_filesize: true,\n\t\t\t// initiate http request with specific http method, method should be passed as argument\n\t\t\t// e.g. runtime.can('use_http_method', 'put')\n\t\t\tuse_http_method: true\n\t\t}, caps);\n\t\t\t\n\t\n\t\t// default to the mode that is compatible with preferred caps\n\t\tif (options.preferred_caps) {\n\t\t\tdefaultMode = Runtime.getMode(modeCaps, options.preferred_caps, defaultMode);\n\t\t}\n\t\t\n\t\t// small extension factory here (is meant to be extended with actual extensions constructors)\n\t\t_shim = (function() {\n\t\t\tvar objpool = {};\n\t\t\treturn {\n\t\t\t\texec: function(uid, comp, fn, args) {\n\t\t\t\t\tif (_shim[comp]) {\n\t\t\t\t\t\tif (!objpool[uid]) {\n\t\t\t\t\t\t\tobjpool[uid] = {\n\t\t\t\t\t\t\t\tcontext: this,\n\t\t\t\t\t\t\t\tinstance: new _shim[comp]()\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (objpool[uid].instance[fn]) {\n\t\t\t\t\t\t\treturn objpool[uid].instance[fn].apply(this, args);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tremoveInstance: function(uid) {\n\t\t\t\t\tdelete objpool[uid];\n\t\t\t\t},\n\n\t\t\t\tremoveAllInstances: function() {\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tBasic.each(objpool, function(obj, uid) {\n\t\t\t\t\t\tif (Basic.typeOf(obj.instance.destroy) === 'function') {\n\t\t\t\t\t\t\tobj.instance.destroy.call(obj.context);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.removeInstance(uid);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}());\n\n\n\t\t// public methods\n\t\tBasic.extend(this, {\n\t\t\t/**\n\t\t\tSpecifies whether runtime instance was initialized or not\n\n\t\t\t@property initialized\n\t\t\t@type {Boolean}\n\t\t\t@default false\n\t\t\t*/\n\t\t\tinitialized: false, // shims require this flag to stop initialization retries\n\n\t\t\t/**\n\t\t\tUnique ID of the runtime\n\n\t\t\t@property uid\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\tuid: _uid,\n\n\t\t\t/**\n\t\t\tRuntime type (e.g. flash, html5, etc)\n\n\t\t\t@property type\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\ttype: type,\n\n\t\t\t/**\n\t\t\tRuntime (not native one) may operate in browser or client mode.\n\n\t\t\t@property mode\n\t\t\t@private\n\t\t\t@type {String|Boolean} current mode or false, if none possible\n\t\t\t*/\n\t\t\tmode: Runtime.getMode(modeCaps, (options.required_caps), defaultMode),\n\n\t\t\t/**\n\t\t\tid of the DOM container for the runtime (if available)\n\n\t\t\t@property shimid\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\tshimid: _uid + '_container',\n\n\t\t\t/**\n\t\t\tNumber of connected clients. If equal to zero, runtime can be destroyed\n\n\t\t\t@property clients\n\t\t\t@type {Number}\n\t\t\t*/\n\t\t\tclients: 0,\n\n\t\t\t/**\n\t\t\tRuntime initialization options\n\n\t\t\t@property options\n\t\t\t@type {Object}\n\t\t\t*/\n\t\t\toptions: options,\n\n\t\t\t/**\n\t\t\tChecks if the runtime has specific capability\n\n\t\t\t@method can\n\t\t\t@param {String} cap Name of capability to check\n\t\t\t@param {Mixed} [value] If passed, capability should somehow correlate to the value\n\t\t\t@param {Object} [refCaps] Set of capabilities to check the specified cap against (defaults to internal set)\n\t\t\t@return {Boolean} true if runtime has such capability and false, if - not\n\t\t\t*/\n\t\t\tcan: function(cap, value) {\n\t\t\t\tvar refCaps = arguments[2] || caps;\n\n\t\t\t\t// if cap var is a comma-separated list of caps, convert it to object (key/value)\n\t\t\t\tif (Basic.typeOf(cap) === 'string' && Basic.typeOf(value) === 'undefined') {\n\t\t\t\t\tcap = Runtime.parseCaps(cap);\n\t\t\t\t}\n\n\t\t\t\tif (Basic.typeOf(cap) === 'object') {\n\t\t\t\t\tfor (var key in cap) {\n\t\t\t\t\t\tif (!this.can(key, cap[key], refCaps)) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t// check the individual cap\n\t\t\t\tif (Basic.typeOf(refCaps[cap]) === 'function') {\n\t\t\t\t\treturn refCaps[cap].call(this, value);\n\t\t\t\t} else {\n\t\t\t\t\treturn (value === refCaps[cap]);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\tReturns container for the runtime as DOM element\n\n\t\t\t@method getShimContainer\n\t\t\t@return {DOMElement}\n\t\t\t*/\n\t\t\tgetShimContainer: function() {\n\t\t\t\tvar container, shimContainer = Dom.get(this.shimid);\n\n\t\t\t\t// if no container for shim, create one\n\t\t\t\tif (!shimContainer) {\n\t\t\t\t\tcontainer = this.options.container ? Dom.get(this.options.container) : document.body;\n\n\t\t\t\t\t// create shim container and insert it at an absolute position into the outer container\n\t\t\t\t\tshimContainer = document.createElement('div');\n\t\t\t\t\tshimContainer.id = this.shimid;\n\t\t\t\t\tshimContainer.className = 'moxie-shim moxie-shim-' + this.type;\n\n\t\t\t\t\tBasic.extend(shimContainer.style, {\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\ttop: '0px',\n\t\t\t\t\t\tleft: '0px',\n\t\t\t\t\t\twidth: '1px',\n\t\t\t\t\t\theight: '1px',\n\t\t\t\t\t\toverflow: 'hidden'\n\t\t\t\t\t});\n\n\t\t\t\t\tcontainer.appendChild(shimContainer);\n\t\t\t\t\tcontainer = null;\n\t\t\t\t}\n\n\t\t\t\treturn shimContainer;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tReturns runtime as DOM element (if appropriate)\n\n\t\t\t@method getShim\n\t\t\t@return {DOMElement}\n\t\t\t*/\n\t\t\tgetShim: function() {\n\t\t\t\treturn _shim;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tInvokes a method within the runtime itself (might differ across the runtimes)\n\n\t\t\t@method shimExec\n\t\t\t@param {Mixed} []\n\t\t\t@protected\n\t\t\t@return {Mixed} Depends on the action and component\n\t\t\t*/\n\t\t\tshimExec: function(component, action) {\n\t\t\t\tvar args = [].slice.call(arguments, 2);\n\t\t\t\treturn self.getShim().exec.call(this, this.uid, component, action, args);\n\t\t\t},\n\n\t\t\t/**\n\t\t\tOperaional interface that is used by components to invoke specific actions on the runtime\n\t\t\t(is invoked in the scope of component)\n\n\t\t\t@method exec\n\t\t\t@param {Mixed} []*\n\t\t\t@protected\n\t\t\t@return {Mixed} Depends on the action and component\n\t\t\t*/\n\t\t\texec: function(component, action) { // this is called in the context of component, not runtime\n\t\t\t\tvar args = [].slice.call(arguments, 2);\n\n\t\t\t\tif (self[component] && self[component][action]) {\n\t\t\t\t\treturn self[component][action].apply(this, args);\n\t\t\t\t}\n\t\t\t\treturn self.shimExec.apply(this, arguments);\n\t\t\t},\n\n\t\t\t/**\n\t\t\tDestroys the runtime (removes all events and deletes DOM structures)\n\n\t\t\t@method destroy\n\t\t\t*/\n\t\t\tdestroy: function() {\n\t\t\t\tif (!self) {\n\t\t\t\t\treturn; // obviously already destroyed\n\t\t\t\t}\n\n\t\t\t\tvar shimContainer = Dom.get(this.shimid);\n\t\t\t\tif (shimContainer) {\n\t\t\t\t\tshimContainer.parentNode.removeChild(shimContainer);\n\t\t\t\t}\n\n\t\t\t\tif (_shim) {\n\t\t\t\t\t_shim.removeAllInstances();\n\t\t\t\t}\n\n\t\t\t\tthis.unbindAll();\n\t\t\t\tdelete runtimes[this.uid];\n\t\t\t\tthis.uid = null; // mark this runtime as destroyed\n\t\t\t\t_uid = self = _shim = shimContainer = null;\n\t\t\t}\n\t\t});\n\n\t\t// once we got the mode, test against all caps\n\t\tif (this.mode && options.required_caps && !this.can(options.required_caps)) {\n\t\t\tthis.mode = false;\n\t\t}\t\n\t}\n\n\n\t/**\n\tDefault order to try different runtime types\n\n\t@property order\n\t@type String\n\t@static\n\t*/\n\tRuntime.order = 'html5,flash,silverlight,html4';\n\n\n\t/**\n\tRetrieves runtime from private hash by it's uid\n\n\t@method getRuntime\n\t@private\n\t@static\n\t@param {String} uid Unique identifier of the runtime\n\t@return {Runtime|Boolean} Returns runtime, if it exists and false, if - not\n\t*/\n\tRuntime.getRuntime = function(uid) {\n\t\treturn runtimes[uid] ? runtimes[uid] : false;\n\t};\n\n\n\t/**\n\tRegister constructor for the Runtime of new (or perhaps modified) type\n\n\t@method addConstructor\n\t@static\n\t@param {String} type Runtime type (e.g. flash, html5, etc)\n\t@param {Function} construct Constructor for the Runtime type\n\t*/\n\tRuntime.addConstructor = function(type, constructor) {\n\t\tconstructor.prototype = EventTarget.instance;\n\t\truntimeConstructors[type] = constructor;\n\t};\n\n\n\t/**\n\tGet the constructor for the specified type.\n\n\tmethod getConstructor\n\t@static\n\t@param {String} type Runtime type (e.g. flash, html5, etc)\n\t@return {Function} Constructor for the Runtime type\n\t*/\n\tRuntime.getConstructor = function(type) {\n\t\treturn runtimeConstructors[type] || null;\n\t};\n\n\n\t/**\n\tGet info about the runtime (uid, type, capabilities)\n\n\t@method getInfo\n\t@static\n\t@param {String} uid Unique identifier of the runtime\n\t@return {Mixed} Info object or null if runtime doesn't exist\n\t*/\n\tRuntime.getInfo = function(uid) {\n\t\tvar runtime = Runtime.getRuntime(uid);\n\n\t\tif (runtime) {\n\t\t\treturn {\n\t\t\t\tuid: runtime.uid,\n\t\t\t\ttype: runtime.type,\n\t\t\t\tmode: runtime.mode,\n\t\t\t\tcan: function() {\n\t\t\t\t\treturn runtime.can.apply(runtime, arguments);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t};\n\n\n\t/**\n\tConvert caps represented by a comma-separated string to the object representation.\n\n\t@method parseCaps\n\t@static\n\t@param {String} capStr Comma-separated list of capabilities\n\t@return {Object}\n\t*/\n\tRuntime.parseCaps = function(capStr) {\n\t\tvar capObj = {};\n\n\t\tif (Basic.typeOf(capStr) !== 'string') {\n\t\t\treturn capStr || {};\n\t\t}\n\n\t\tBasic.each(capStr.split(','), function(key) {\n\t\t\tcapObj[key] = true; // we assume it to be - true\n\t\t});\n\n\t\treturn capObj;\n\t};\n\n\t/**\n\tTest the specified runtime for specific capabilities.\n\n\t@method can\n\t@static\n\t@param {String} type Runtime type (e.g. flash, html5, etc)\n\t@param {String|Object} caps Set of capabilities to check\n\t@return {Boolean} Result of the test\n\t*/\n\tRuntime.can = function(type, caps) {\n\t\tvar runtime\n\t\t, constructor = Runtime.getConstructor(type)\n\t\t, mode\n\t\t;\n\t\tif (constructor) {\n\t\t\truntime = new constructor({\n\t\t\t\trequired_caps: caps\n\t\t\t});\n\t\t\tmode = runtime.mode;\n\t\t\truntime.destroy();\n\t\t\treturn !!mode;\n\t\t}\n\t\treturn false;\n\t};\n\n\n\t/**\n\tFigure out a runtime that supports specified capabilities.\n\n\t@method thatCan\n\t@static\n\t@param {String|Object} caps Set of capabilities to check\n\t@param {String} [runtimeOrder] Comma-separated list of runtimes to check against\n\t@return {String} Usable runtime identifier or null\n\t*/\n\tRuntime.thatCan = function(caps, runtimeOrder) {\n\t\tvar types = (runtimeOrder || Runtime.order).split(/\\s*,\\s*/);\n\t\tfor (var i in types) {\n\t\t\tif (Runtime.can(types[i], caps)) {\n\t\t\t\treturn types[i];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\n\n\t/**\n\tFigure out an operational mode for the specified set of capabilities.\n\n\t@method getMode\n\t@static\n\t@param {Object} modeCaps Set of capabilities that depend on particular runtime mode\n\t@param {Object} [requiredCaps] Supplied set of capabilities to find operational mode for\n\t@param {String|Boolean} [defaultMode='browser'] Default mode to use \n\t@return {String|Boolean} Compatible operational mode\n\t*/\n\tRuntime.getMode = function(modeCaps, requiredCaps, defaultMode) {\n\t\tvar mode = null;\n\n\t\tif (Basic.typeOf(defaultMode) === 'undefined') { // only if not specified\n\t\t\tdefaultMode = 'browser';\n\t\t}\n\n\t\tif (requiredCaps && !Basic.isEmptyObj(modeCaps)) {\n\t\t\t// loop over required caps and check if they do require the same mode\n\t\t\tBasic.each(requiredCaps, function(value, cap) {\n\t\t\t\tif (modeCaps.hasOwnProperty(cap)) {\n\t\t\t\t\tvar capMode = modeCaps[cap](value);\n\n\t\t\t\t\t// make sure we always have an array\n\t\t\t\t\tif (typeof(capMode) === 'string') {\n\t\t\t\t\t\tcapMode = [capMode];\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (!mode) {\n\t\t\t\t\t\tmode = capMode;\n\t\t\t\t\t} else if (!(mode = Basic.arrayIntersect(mode, capMode))) {\n\t\t\t\t\t\t// if cap requires conflicting mode - runtime cannot fulfill required caps\n\t\t\t\t\t\treturn (mode = false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (mode) {\n\t\t\t\treturn Basic.inArray(defaultMode, mode) !== -1 ? defaultMode : mode[0];\n\t\t\t} else if (mode === false) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn defaultMode; \n\t};\n\n\n\t/**\n\tCapability check that always returns true\n\n\t@private\n\t@static\n\t@return {True}\n\t*/\n\tRuntime.capTrue = function() {\n\t\treturn true;\n\t};\n\n\t/**\n\tCapability check that always returns false\n\n\t@private\n\t@static\n\t@return {False}\n\t*/\n\tRuntime.capFalse = function() {\n\t\treturn false;\n\t};\n\n\t/**\n\tEvaluate the expression to boolean value and create a function that always returns it.\n\n\t@private\n\t@static\n\t@param {Mixed} expr Expression to evaluate\n\t@return {Function} Function returning the result of evaluation\n\t*/\n\tRuntime.capTest = function(expr) {\n\t\treturn function() {\n\t\t\treturn !!expr;\n\t\t};\n\t};\n\n\treturn Runtime;\n});\n\n// Included from: src/javascript/runtime/RuntimeClient.js\n\n/**\n * RuntimeClient.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/runtime/RuntimeClient', [\n\t'moxie/core/Exceptions',\n\t'moxie/core/utils/Basic',\n\t'moxie/runtime/Runtime'\n], function(x, Basic, Runtime) {\n\t/**\n\tSet of methods and properties, required by a component to acquire ability to connect to a runtime\n\n\t@class RuntimeClient\n\t*/\n\treturn function RuntimeClient() {\n\t\tvar runtime;\n\n\t\tBasic.extend(this, {\n\t\t\t/**\n\t\t\tConnects to the runtime specified by the options. Will either connect to existing runtime or create a new one.\n\t\t\tIncrements number of clients connected to the specified runtime.\n\n\t\t\t@method connectRuntime\n\t\t\t@param {Mixed} options Can be a runtme uid or a set of key-value pairs defining requirements and pre-requisites\n\t\t\t*/\n\t\t\tconnectRuntime: function(options) {\n\t\t\t\tvar comp = this, ruid;\n\n\t\t\t\tfunction initialize(items) {\n\t\t\t\t\tvar type, constructor;\n\n\t\t\t\t\t// if we ran out of runtimes\n\t\t\t\t\tif (!items.length) {\n\t\t\t\t\t\tcomp.trigger('RuntimeError', new x.RuntimeError(x.RuntimeError.NOT_INIT_ERR));\n\t\t\t\t\t\truntime = null;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\ttype = items.shift();\n\t\t\t\t\tconstructor = Runtime.getConstructor(type);\n\t\t\t\t\tif (!constructor) {\n\t\t\t\t\t\tinitialize(items);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// try initializing the runtime\n\t\t\t\t\truntime = new constructor(options);\n\n\t\t\t\t\truntime.bind('Init', function() {\n\t\t\t\t\t\t// mark runtime as initialized\n\t\t\t\t\t\truntime.initialized = true;\n\n\t\t\t\t\t\t// jailbreak ...\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\truntime.clients++;\n\t\t\t\t\t\t\t// this will be triggered on component\n\t\t\t\t\t\t\tcomp.trigger('RuntimeInit', runtime);\n\t\t\t\t\t\t}, 1);\n\t\t\t\t\t});\n\n\t\t\t\t\truntime.bind('Error', function() {\n\t\t\t\t\t\truntime.destroy(); // runtime cannot destroy itself from inside at a right moment, thus we do it here\n\t\t\t\t\t\tinitialize(items);\n\t\t\t\t\t});\n\n\t\t\t\t\t/*runtime.bind('Exception', function() { });*/\n\n\t\t\t\t\t// check if runtime managed to pick-up operational mode\n\t\t\t\t\tif (!runtime.mode) {\n\t\t\t\t\t\truntime.trigger('Error');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\truntime.init();\n\t\t\t\t}\n\n\t\t\t\t// check if a particular runtime was requested\n\t\t\t\tif (Basic.typeOf(options) === 'string') {\n\t\t\t\t\truid = options;\n\t\t\t\t} else if (Basic.typeOf(options.ruid) === 'string') {\n\t\t\t\t\truid = options.ruid;\n\t\t\t\t}\n\n\t\t\t\tif (ruid) {\n\t\t\t\t\truntime = Runtime.getRuntime(ruid);\n\t\t\t\t\tif (runtime) {\n\t\t\t\t\t\truntime.clients++;\n\t\t\t\t\t\treturn runtime;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// there should be a runtime and there's none - weird case\n\t\t\t\t\t\tthrow new x.RuntimeError(x.RuntimeError.NOT_INIT_ERR);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// initialize a fresh one, that fits runtime list and required features best\n\t\t\t\tinitialize((options.runtime_order || Runtime.order).split(/\\s*,\\s*/));\n\t\t\t},\n\n\t\t\t/**\n\t\t\tReturns the runtime to which the client is currently connected.\n\n\t\t\t@method getRuntime\n\t\t\t@return {Runtime} Runtime or null if client is not connected\n\t\t\t*/\n\t\t\tgetRuntime: function() {\n\t\t\t\tif (runtime && runtime.uid) {\n\t\t\t\t\treturn runtime;\n\t\t\t\t}\n\t\t\t\truntime = null; // make sure we do not leave zombies rambling around\n\t\t\t\treturn null;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tDisconnects from the runtime. Decrements number of clients connected to the specified runtime.\n\n\t\t\t@method disconnectRuntime\n\t\t\t*/\n\t\t\tdisconnectRuntime: function() {\n\t\t\t\tif (runtime && --runtime.clients <= 0) {\n\t\t\t\t\truntime.destroy();\n\t\t\t\t\truntime = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\t};\n\n\n});\n\n// Included from: src/javascript/file/Blob.js\n\n/**\n * Blob.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/file/Blob', [\n\t'moxie/core/utils/Basic',\n\t'moxie/core/utils/Encode',\n\t'moxie/runtime/RuntimeClient'\n], function(Basic, Encode, RuntimeClient) {\n\t\n\tvar blobpool = {};\n\n\t/**\n\t@class Blob\n\t@constructor\n\t@param {String} ruid Unique id of the runtime, to which this blob belongs to\n\t@param {Object} blob Object \"Native\" blob object, as it is represented in the runtime\n\t*/\n\tfunction Blob(ruid, blob) {\n\n\t\tfunction _sliceDetached(start, end, type) {\n\t\t\tvar blob, data = blobpool[this.uid];\n\n\t\t\tif (Basic.typeOf(data) !== 'string' || !data.length) {\n\t\t\t\treturn null; // or throw exception\n\t\t\t}\n\n\t\t\tblob = new Blob(null, {\n\t\t\t\ttype: type,\n\t\t\t\tsize: end - start\n\t\t\t});\n\t\t\tblob.detach(data.substr(start, blob.size));\n\n\t\t\treturn blob;\n\t\t}\n\n\t\tRuntimeClient.call(this);\n\n\t\tif (ruid) {\t\n\t\t\tthis.connectRuntime(ruid);\n\t\t}\n\n\t\tif (!blob) {\n\t\t\tblob = {};\n\t\t} else if (Basic.typeOf(blob) === 'string') { // dataUrl or binary string\n\t\t\tblob = { data: blob };\n\t\t}\n\n\t\tBasic.extend(this, {\n\t\t\t\n\t\t\t/**\n\t\t\tUnique id of the component\n\n\t\t\t@property uid\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\tuid: blob.uid || Basic.guid('uid_'),\n\t\t\t\n\t\t\t/**\n\t\t\tUnique id of the connected runtime, if falsy, then runtime will have to be initialized \n\t\t\tbefore this Blob can be used, modified or sent\n\n\t\t\t@property ruid\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\truid: ruid,\n\t\n\t\t\t/**\n\t\t\tSize of blob\n\n\t\t\t@property size\n\t\t\t@type {Number}\n\t\t\t@default 0\n\t\t\t*/\n\t\t\tsize: blob.size || 0,\n\t\t\t\n\t\t\t/**\n\t\t\tMime type of blob\n\n\t\t\t@property type\n\t\t\t@type {String}\n\t\t\t@default ''\n\t\t\t*/\n\t\t\ttype: blob.type || '',\n\t\t\t\n\t\t\t/**\n\t\t\t@method slice\n\t\t\t@param {Number} [start=0]\n\t\t\t*/\n\t\t\tslice: function(start, end, type) {\t\t\n\t\t\t\tif (this.isDetached()) {\n\t\t\t\t\treturn _sliceDetached.apply(this, arguments);\n\t\t\t\t}\n\t\t\t\treturn this.getRuntime().exec.call(this, 'Blob', 'slice', this.getSource(), start, end, type);\n\t\t\t},\n\n\t\t\t/**\n\t\t\tReturns \"native\" blob object (as it is represented in connected runtime) or null if not found\n\n\t\t\t@method getSource\n\t\t\t@return {Blob} Returns \"native\" blob object or null if not found\n\t\t\t*/\n\t\t\tgetSource: function() {\n\t\t\t\tif (!blobpool[this.uid]) {\n\t\t\t\t\treturn null;\t\n\t\t\t\t}\n\t\t\t\treturn blobpool[this.uid];\n\t\t\t},\n\n\t\t\t/** \n\t\t\tDetaches blob from any runtime that it depends on and initialize with standalone value\n\n\t\t\t@method detach\n\t\t\t@protected\n\t\t\t@param {DOMString} [data=''] Standalone value\n\t\t\t*/\n\t\t\tdetach: function(data) {\n\t\t\t\tif (this.ruid) {\n\t\t\t\t\tthis.getRuntime().exec.call(this, 'Blob', 'destroy');\n\t\t\t\t\tthis.disconnectRuntime();\n\t\t\t\t\tthis.ruid = null;\n\t\t\t\t}\n\n\t\t\t\tdata = data || '';\n\n\t\t\t\t// if dataUrl, convert to binary string\n\t\t\t\tvar matches = data.match(/^data:([^;]*);base64,/);\n\t\t\t\tif (matches) {\n\t\t\t\t\tthis.type = matches[1];\n\t\t\t\t\tdata = Encode.atob(data.substring(data.indexOf('base64,') + 7));\n\t\t\t\t}\n\n\t\t\t\tthis.size = data.length;\n\n\t\t\t\tblobpool[this.uid] = data;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tChecks if blob is standalone (detached of any runtime)\n\t\t\t\n\t\t\t@method isDetached\n\t\t\t@protected\n\t\t\t@return {Boolean}\n\t\t\t*/\n\t\t\tisDetached: function() {\n\t\t\t\treturn !this.ruid && Basic.typeOf(blobpool[this.uid]) === 'string';\n\t\t\t},\n\t\t\t\n\t\t\t/** \n\t\t\tDestroy Blob and free any resources it was using\n\n\t\t\t@method destroy\n\t\t\t*/\n\t\t\tdestroy: function() {\n\t\t\t\tthis.detach();\n\t\t\t\tdelete blobpool[this.uid];\n\t\t\t}\n\t\t});\n\n\t\t\n\t\tif (blob.data) {\n\t\t\tthis.detach(blob.data); // auto-detach if payload has been passed\n\t\t} else {\n\t\t\tblobpool[this.uid] = blob;\t\n\t\t}\n\t}\n\t\n\treturn Blob;\n});\n\n// Included from: src/javascript/file/File.js\n\n/**\n * File.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/file/File', [\n\t'moxie/core/utils/Basic',\n\t'moxie/core/utils/Mime',\n\t'moxie/file/Blob'\n], function(Basic, Mime, Blob) {\n\t/**\n\t@class File\n\t@extends Blob\n\t@constructor\n\t@param {String} ruid Unique id of the runtime, to which this blob belongs to\n\t@param {Object} file Object \"Native\" file object, as it is represented in the runtime\n\t*/\n\tfunction File(ruid, file) {\n\t\tvar name, type;\n\n\t\tif (!file) { // avoid extra errors in case we overlooked something\n\t\t\tfile = {};\n\t\t}\n\n\t\t// figure out the type\n\t\tif (file.type && file.type !== '') {\n\t\t\ttype = file.type;\n\t\t} else {\n\t\t\ttype = Mime.getFileMime(file.name);\n\t\t}\n\n\t\t// sanitize file name or generate new one\n\t\tif (file.name) {\n\t\t\tname = file.name.replace(/\\\\/g, '/');\n\t\t\tname = name.substr(name.lastIndexOf('/') + 1);\n\t\t} else {\n\t\t\tvar prefix = type.split('/')[0];\n\t\t\tname = Basic.guid((prefix !== '' ? prefix : 'file') + '_');\n\t\t\t\n\t\t\tif (Mime.extensions[type]) {\n\t\t\t\tname += '.' + Mime.extensions[type][0]; // append proper extension if possible\n\t\t\t}\n\t\t}\n\n\t\tBlob.apply(this, arguments);\n\t\t\n\t\tBasic.extend(this, {\n\t\t\t/**\n\t\t\tFile mime type\n\n\t\t\t@property type\n\t\t\t@type {String}\n\t\t\t@default ''\n\t\t\t*/\n\t\t\ttype: type || '',\n\n\t\t\t/**\n\t\t\tFile name\n\n\t\t\t@property name\n\t\t\t@type {String}\n\t\t\t@default UID\n\t\t\t*/\n\t\t\tname: name || Basic.guid('file_'),\n\t\t\t\n\t\t\t/**\n\t\t\tDate of last modification\n\n\t\t\t@property lastModifiedDate\n\t\t\t@type {String}\n\t\t\t@default now\n\t\t\t*/\n\t\t\tlastModifiedDate: file.lastModifiedDate || (new Date()).toLocaleString() // Thu Aug 23 2012 19:40:00 GMT+0400 (GET)\n\t\t});\n\t}\n\n\tFile.prototype = Blob.prototype;\n\n\treturn File;\n});\n\n// Included from: src/javascript/file/FileInput.js\n\n/**\n * FileInput.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/file/FileInput', [\n\t'moxie/core/utils/Basic',\n\t'moxie/core/utils/Mime',\n\t'moxie/core/utils/Dom',\n\t'moxie/core/Exceptions',\n\t'moxie/core/EventTarget',\n\t'moxie/core/I18n',\n\t'moxie/file/File',\n\t'moxie/runtime/Runtime',\n\t'moxie/runtime/RuntimeClient'\n], function(Basic, Mime, Dom, x, EventTarget, I18n, File, Runtime, RuntimeClient) {\n\t/**\n\tProvides a convenient way to create cross-browser file-picker. Generates file selection dialog on click,\n\tconverts selected files to _File_ objects, to be used in conjunction with _Image_, preloaded in memory\n\twith _FileReader_ or uploaded to a server through _XMLHttpRequest_.\n\n\t@class FileInput\n\t@constructor\n\t@extends EventTarget\n\t@uses RuntimeClient\n\t@param {Object|String|DOMElement} options If options is string or node, argument is considered as _browse\\_button_.\n\t\t@param {String|DOMElement} options.browse_button DOM Element to turn into file picker.\n\t\t@param {Array} [options.accept] Array of mime types to accept. By default accepts all.\n\t\t@param {String} [options.file='file'] Name of the file field (not the filename).\n\t\t@param {Boolean} [options.multiple=false] Enable selection of multiple files.\n\t\t@param {Boolean} [options.directory=false] Turn file input into the folder input (cannot be both at the same time).\n\t\t@param {String|DOMElement} [options.container] DOM Element to use as a container for file-picker. Defaults to parentNode \n\t\tfor _browse\\_button_.\n\t\t@param {Object|String} [options.required_caps] Set of required capabilities, that chosen runtime must support.\n\n\t@example\n\t\t<div id=\"container\">\n\t\t\t<a id=\"file-picker\" href=\"javascript:;\">Browse...</a>\n\t\t</div>\n\n\t\t<script>\n\t\t\tvar fileInput = new mOxie.FileInput({\n\t\t\t\tbrowse_button: 'file-picker', // or document.getElementById('file-picker')\n\t\t\t\tcontainer: 'container',\n\t\t\t\taccept: [\n\t\t\t\t\t{title: \"Image files\", extensions: \"jpg,gif,png\"} // accept only images\n\t\t\t\t],\n\t\t\t\tmultiple: true // allow multiple file selection\n\t\t\t});\n\n\t\t\tfileInput.onchange = function(e) {\n\t\t\t\t// do something to files array\n\t\t\t\tconsole.info(e.target.files); // or this.files or fileInput.files\n\t\t\t};\n\n\t\t\tfileInput.init(); // initialize\n\t\t</script>\n\t*/\n\tvar dispatches = [\n\t\t/**\n\t\tDispatched when runtime is connected and file-picker is ready to be used.\n\n\t\t@event ready\n\t\t@param {Object} event\n\t\t*/\n\t\t'ready',\n\n\t\t/**\n\t\tDispatched right after [ready](#event_ready) event, and whenever [refresh()](#method_refresh) is invoked. \n\t\tCheck [corresponding documentation entry](#method_refresh) for more info.\n\n\t\t@event refresh\n\t\t@param {Object} event\n\t\t*/\n\n\t\t/**\n\t\tDispatched when selection of files in the dialog is complete.\n\n\t\t@event change\n\t\t@param {Object} event\n\t\t*/\n\t\t'change',\n\n\t\t'cancel', // TODO: might be useful\n\n\t\t/**\n\t\tDispatched when mouse cursor enters file-picker area. Can be used to style element\n\t\taccordingly.\n\n\t\t@event mouseenter\n\t\t@param {Object} event\n\t\t*/\n\t\t'mouseenter',\n\n\t\t/**\n\t\tDispatched when mouse cursor leaves file-picker area. Can be used to style element\n\t\taccordingly.\n\n\t\t@event mouseleave\n\t\t@param {Object} event\n\t\t*/\n\t\t'mouseleave',\n\n\t\t/**\n\t\tDispatched when functional mouse button is pressed on top of file-picker area.\n\n\t\t@event mousedown\n\t\t@param {Object} event\n\t\t*/\n\t\t'mousedown',\n\n\t\t/**\n\t\tDispatched when functional mouse button is released on top of file-picker area.\n\n\t\t@event mouseup\n\t\t@param {Object} event\n\t\t*/\n\t\t'mouseup'\n\t];\n\n\tfunction FileInput(options) {\n\t\tvar self = this,\n\t\t\tcontainer, browseButton, defaults;\n\n\t\t// if flat argument passed it should be browse_button id\n\t\tif (Basic.inArray(Basic.typeOf(options), ['string', 'node']) !== -1) {\n\t\t\toptions = { browse_button : options };\n\t\t}\n\n\t\t// this will help us to find proper default container\n\t\tbrowseButton = Dom.get(options.browse_button);\n\t\tif (!browseButton) {\n\t\t\t// browse button is required\n\t\t\tthrow new x.DOMException(x.DOMException.NOT_FOUND_ERR);\n\t\t}\n\n\t\t// figure out the options\n\t\tdefaults = {\n\t\t\taccept: [{\n\t\t\t\ttitle: I18n.translate('All Files'),\n\t\t\t\textensions: '*'\n\t\t\t}],\n\t\t\tname: 'file',\n\t\t\tmultiple: false,\n\t\t\trequired_caps: false,\n\t\t\tcontainer: browseButton.parentNode || document.body\n\t\t};\n\t\t\n\t\toptions = Basic.extend({}, defaults, options);\n\n\t\t// convert to object representation\n\t\tif (typeof(options.required_caps) === 'string') {\n\t\t\toptions.required_caps = Runtime.parseCaps(options.required_caps);\n\t\t}\n\t\t\t\t\t\n\t\t// normalize accept option (could be list of mime types or array of title/extensions pairs)\n\t\tif (typeof(options.accept) === 'string') {\n\t\t\toptions.accept = Mime.mimes2extList(options.accept);\n\t\t}\n\n\t\tcontainer = Dom.get(options.container);\n\t\t// make sure we have container\n\t\tif (!container) {\n\t\t\tcontainer = document.body;\n\t\t}\n\n\t\t// make container relative, if it's not\n\t\tif (Dom.getStyle(container, 'position') === 'static') {\n\t\t\tcontainer.style.position = 'relative';\n\t\t}\n\n\t\tcontainer = browseButton = null; // IE\n\t\t\t\t\t\t\n\t\tRuntimeClient.call(self);\n\t\t\n\t\tBasic.extend(self, {\n\t\t\t/**\n\t\t\tUnique id of the component\n\n\t\t\t@property uid\n\t\t\t@protected\n\t\t\t@readOnly\n\t\t\t@type {String}\n\t\t\t@default UID\n\t\t\t*/\n\t\t\tuid: Basic.guid('uid_'),\n\t\t\t\n\t\t\t/**\n\t\t\tUnique id of the connected runtime, if any.\n\n\t\t\t@property ruid\n\t\t\t@protected\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\truid: null,\n\n\t\t\t/**\n\t\t\tUnique id of the runtime container. Useful to get hold of it for various manipulations.\n\n\t\t\t@property shimid\n\t\t\t@protected\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\tshimid: null,\n\t\t\t\n\t\t\t/**\n\t\t\tArray of selected mOxie.File objects\n\n\t\t\t@property files\n\t\t\t@type {Array}\n\t\t\t@default null\n\t\t\t*/\n\t\t\tfiles: null,\n\n\t\t\t/**\n\t\t\tInitializes the file-picker, connects it to runtime and dispatches event ready when done.\n\n\t\t\t@method init\n\t\t\t*/\n\t\t\tinit: function() {\n\t\t\t\tself.convertEventPropsToHandlers(dispatches);\n\n\t\t\t\tself.bind('RuntimeInit', function(e, runtime) {\n\t\t\t\t\tself.ruid = runtime.uid;\n\t\t\t\t\tself.shimid = runtime.shimid;\n\n\t\t\t\t\tself.bind(\"Ready\", function() {\n\t\t\t\t\t\tself.trigger(\"Refresh\");\n\t\t\t\t\t}, 999);\n\n\t\t\t\t\tself.bind(\"Change\", function() {\n\t\t\t\t\t\tvar files = runtime.exec.call(self, 'FileInput', 'getFiles');\n\n\t\t\t\t\t\tself.files = [];\n\n\t\t\t\t\t\tBasic.each(files, function(file) {\n\t\t\t\t\t\t\t// ignore empty files (IE10 for example hangs if you try to send them via XHR)\n\t\t\t\t\t\t\tif (file.size === 0) {\n\t\t\t\t\t\t\t\treturn true; \n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tself.files.push(new File(self.ruid, file));\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 999);\n\n\t\t\t\t\t// re-position and resize shim container\n\t\t\t\t\tself.bind('Refresh', function() {\n\t\t\t\t\t\tvar pos, size, browseButton, shimContainer;\n\t\t\t\t\t\t\n\t\t\t\t\t\tbrowseButton = Dom.get(options.browse_button);\n\t\t\t\t\t\tshimContainer = Dom.get(runtime.shimid); // do not use runtime.getShimContainer(), since it will create container if it doesn't exist\n\n\t\t\t\t\t\tif (browseButton) {\n\t\t\t\t\t\t\tpos = Dom.getPos(browseButton, Dom.get(options.container));\n\t\t\t\t\t\t\tsize = Dom.getSize(browseButton);\n\n\t\t\t\t\t\t\tif (shimContainer) {\n\t\t\t\t\t\t\t\tBasic.extend(shimContainer.style, {\n\t\t\t\t\t\t\t\t\ttop     : pos.y + 'px',\n\t\t\t\t\t\t\t\t\tleft    : pos.x + 'px',\n\t\t\t\t\t\t\t\t\twidth   : size.w + 'px',\n\t\t\t\t\t\t\t\t\theight  : size.h + 'px'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshimContainer = browseButton = null;\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\truntime.exec.call(self, 'FileInput', 'init', options);\n\t\t\t\t});\n\n\t\t\t\t// runtime needs: options.required_features, options.runtime_order and options.container\n\t\t\t\tself.connectRuntime(Basic.extend({}, options, {\n\t\t\t\t\trequired_caps: {\n\t\t\t\t\t\tselect_file: true\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t},\n\n\t\t\t/**\n\t\t\tDisables file-picker element, so that it doesn't react to mouse clicks.\n\n\t\t\t@method disable\n\t\t\t@param {Boolean} [state=true] Disable component if - true, enable if - false\n\t\t\t*/\n\t\t\tdisable: function(state) {\n\t\t\t\tvar runtime = this.getRuntime();\n\t\t\t\tif (runtime) {\n\t\t\t\t\truntime.exec.call(this, 'FileInput', 'disable', Basic.typeOf(state) === 'undefined' ? true : state);\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\tReposition and resize dialog trigger to match the position and size of browse_button element.\n\n\t\t\t@method refresh\n\t\t\t*/\n\t\t\trefresh: function() {\n\t\t\t\tself.trigger(\"Refresh\");\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\tDestroy component.\n\n\t\t\t@method destroy\n\t\t\t*/\n\t\t\tdestroy: function() {\n\t\t\t\tvar runtime = this.getRuntime();\n\t\t\t\tif (runtime) {\n\t\t\t\t\truntime.exec.call(this, 'FileInput', 'destroy');\n\t\t\t\t\tthis.disconnectRuntime();\n\t\t\t\t}\n\n\t\t\t\tif (Basic.typeOf(this.files) === 'array') {\n\t\t\t\t\t// no sense in leaving associated files behind\n\t\t\t\t\tBasic.each(this.files, function(file) {\n\t\t\t\t\t\tfile.destroy();\n\t\t\t\t\t});\n\t\t\t\t} \n\t\t\t\tthis.files = null;\n\t\t\t}\n\t\t});\n\t}\n\n\tFileInput.prototype = EventTarget.instance;\n\n\treturn FileInput;\n});\n\n// Included from: src/javascript/file/FileDrop.js\n\n/**\n * FileDrop.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/file/FileDrop', [\n\t'moxie/core/I18n',\n\t'moxie/core/utils/Dom',\n\t'moxie/core/Exceptions',\n\t'moxie/core/utils/Basic',\n\t'moxie/file/File',\n\t'moxie/runtime/RuntimeClient',\n\t'moxie/core/EventTarget',\n\t'moxie/core/utils/Mime'\n], function(I18n, Dom, x, Basic, File, RuntimeClient, EventTarget, Mime) {\n\t/**\n\tTurn arbitrary DOM element to a drop zone accepting files. Converts selected files to _File_ objects, to be used \n\tin conjunction with _Image_, preloaded in memory with _FileReader_ or uploaded to a server through \n\t_XMLHttpRequest_.\n\n\t@example\n\t\t<div id=\"drop_zone\">\n\t\t\tDrop files here\n\t\t</div>\n\t\t<br />\n\t\t<div id=\"filelist\"></div>\n\n\t\t<script type=\"text/javascript\">\n\t\t\tvar fileDrop = new mOxie.FileDrop('drop_zone'), fileList = mOxie.get('filelist');\n\n\t\t\tfileDrop.ondrop = function() {\n\t\t\t\tmOxie.each(this.files, function(file) {\n\t\t\t\t\tfileList.innerHTML += '<div>' + file.name + '</div>';\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tfileDrop.init();\n\t\t</script>\n\n\t@class FileDrop\n\t@constructor\n\t@extends EventTarget\n\t@uses RuntimeClient\n\t@param {Object|String} options If options has typeof string, argument is considered as options.drop_zone\n\t\t@param {String|DOMElement} options.drop_zone DOM Element to turn into a drop zone\n\t\t@param {Array} [options.accept] Array of mime types to accept. By default accepts all\n\t\t@param {Object|String} [options.required_caps] Set of required capabilities, that chosen runtime must support\n\t*/\n\tvar dispatches = [\n\t\t/**\n\t\tDispatched when runtime is connected and drop zone is ready to accept files.\n\n\t\t@event ready\n\t\t@param {Object} event\n\t\t*/\n\t\t'ready', \n\n\t\t/**\n\t\tDispatched when dragging cursor enters the drop zone.\n\n\t\t@event dragenter\n\t\t@param {Object} event\n\t\t*/\n\t\t'dragenter',\n\n\t\t/**\n\t\tDispatched when dragging cursor leaves the drop zone.\n\n\t\t@event dragleave\n\t\t@param {Object} event\n\t\t*/\n\t\t'dragleave', \n\n\t\t/**\n\t\tDispatched when file is dropped onto the drop zone.\n\n\t\t@event drop\n\t\t@param {Object} event\n\t\t*/\n\t\t'drop', \n\n\t\t/**\n\t\tDispatched if error occurs.\n\n\t\t@event error\n\t\t@param {Object} event\n\t\t*/\n\t\t'error'\n\t];\n\n\tfunction FileDrop(options) {\n\t\tvar self = this, defaults;\n\n\t\t// if flat argument passed it should be drop_zone id\n\t\tif (typeof(options) === 'string') {\n\t\t\toptions = { drop_zone : options };\n\t\t}\n\n\t\t// figure out the options\n\t\tdefaults = {\n\t\t\taccept: [{\n\t\t\t\ttitle: I18n.translate('All Files'),\n\t\t\t\textensions: '*'\n\t\t\t}],\n\t\t\trequired_caps: {\n\t\t\t\tdrag_and_drop: true\n\t\t\t}\n\t\t};\n\t\t\n\t\toptions = typeof(options) === 'object' ? Basic.extend({}, defaults, options) : defaults;\n\n\t\t// this will help us to find proper default container\n\t\toptions.container = Dom.get(options.drop_zone) || document.body;\n\n\t\t// make container relative, if it is not\n\t\tif (Dom.getStyle(options.container, 'position') === 'static') {\n\t\t\toptions.container.style.position = 'relative';\n\t\t}\n\t\t\t\t\t\n\t\t// normalize accept option (could be list of mime types or array of title/extensions pairs)\n\t\tif (typeof(options.accept) === 'string') {\n\t\t\toptions.accept = Mime.mimes2extList(options.accept);\n\t\t}\n\n\t\tRuntimeClient.call(self);\n\n\t\tBasic.extend(self, {\n\t\t\tuid: Basic.guid('uid_'),\n\n\t\t\truid: null,\n\n\t\t\tfiles: null,\n\n\t\t\tinit: function() {\n\t\n\t\t\t\tself.convertEventPropsToHandlers(dispatches);\n\t\t\n\t\t\t\tself.bind('RuntimeInit', function(e, runtime) {\n\t\t\t\t\tself.ruid = runtime.uid;\n\n\t\t\t\t\tself.bind(\"Drop\", function() {\n\t\t\t\t\t\tvar files = runtime.exec.call(self, 'FileDrop', 'getFiles');\n\n\t\t\t\t\t\tself.files = [];\n\n\t\t\t\t\t\tBasic.each(files, function(file) {\n\t\t\t\t\t\t\tself.files.push(new File(self.ruid, file));\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 999);\n\n\t\t\t\t\truntime.exec.call(self, 'FileDrop', 'init', options);\n\n\t\t\t\t\tself.dispatchEvent('ready');\n\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t// runtime needs: options.required_features, options.runtime_order and options.container\n\t\t\t\tself.connectRuntime(options); // throws RuntimeError\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\tvar runtime = this.getRuntime();\n\t\t\t\tif (runtime) {\n\t\t\t\t\truntime.exec.call(this, 'FileDrop', 'destroy');\n\t\t\t\t\tthis.disconnectRuntime();\n\t\t\t\t}\n\t\t\t\tthis.files = null;\n\t\t\t}\n\t\t});\n\t}\n\n\tFileDrop.prototype = EventTarget.instance;\n\n\treturn FileDrop;\n});\n\n// Included from: src/javascript/runtime/RuntimeTarget.js\n\n/**\n * RuntimeTarget.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/runtime/RuntimeTarget', [\n\t'moxie/core/utils/Basic',\n\t'moxie/runtime/RuntimeClient',\n\t\"moxie/core/EventTarget\"\n], function(Basic, RuntimeClient, EventTarget) {\n\t/**\n\tInstance of this class can be used as a target for the events dispatched by shims,\n\twhen allowing them onto components is for either reason inappropriate\n\n\t@class RuntimeTarget\n\t@constructor\n\t@protected\n\t@extends EventTarget\n\t*/\n\tfunction RuntimeTarget() {\n\t\tthis.uid = Basic.guid('uid_');\n\t\t\n\t\tRuntimeClient.call(this);\n\n\t\tthis.destroy = function() {\n\t\t\tthis.disconnectRuntime();\n\t\t\tthis.unbindAll();\n\t\t};\n\t}\n\n\tRuntimeTarget.prototype = EventTarget.instance;\n\n\treturn RuntimeTarget;\n});\n\n// Included from: src/javascript/file/FileReader.js\n\n/**\n * FileReader.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/file/FileReader', [\n\t'moxie/core/utils/Basic',\n\t'moxie/core/utils/Encode',\n\t'moxie/core/Exceptions',\n\t'moxie/core/EventTarget',\n\t'moxie/file/Blob',\n\t'moxie/file/File',\n\t'moxie/runtime/RuntimeTarget'\n], function(Basic, Encode, x, EventTarget, Blob, File, RuntimeTarget) {\n\t/**\n\tUtility for preloading o.Blob/o.File objects in memory. By design closely follows [W3C FileReader](http://www.w3.org/TR/FileAPI/#dfn-filereader)\n\tinterface. Where possible uses native FileReader, where - not falls back to shims.\n\n\t@class FileReader\n\t@constructor FileReader\n\t@extends EventTarget\n\t@uses RuntimeClient\n\t*/\n\tvar dispatches = [\n\n\t\t/** \n\t\tDispatched when the read starts.\n\n\t\t@event loadstart\n\t\t@param {Object} event\n\t\t*/\n\t\t'loadstart', \n\n\t\t/** \n\t\tDispatched while reading (and decoding) blob, and reporting partial Blob data (progess.loaded/progress.total).\n\n\t\t@event progress\n\t\t@param {Object} event\n\t\t*/\n\t\t'progress', \n\n\t\t/** \n\t\tDispatched when the read has successfully completed.\n\n\t\t@event load\n\t\t@param {Object} event\n\t\t*/\n\t\t'load', \n\n\t\t/** \n\t\tDispatched when the read has been aborted. For instance, by invoking the abort() method.\n\n\t\t@event abort\n\t\t@param {Object} event\n\t\t*/\n\t\t'abort', \n\n\t\t/** \n\t\tDispatched when the read has failed.\n\n\t\t@event error\n\t\t@param {Object} event\n\t\t*/\n\t\t'error', \n\n\t\t/** \n\t\tDispatched when the request has completed (either in success or failure).\n\n\t\t@event loadend\n\t\t@param {Object} event\n\t\t*/\n\t\t'loadend'\n\t];\n\t\n\tfunction FileReader() {\n\t\tvar self = this, _fr;\n\t\t\t\t\n\t\tBasic.extend(this, {\n\t\t\t/**\n\t\t\tUID of the component instance.\n\n\t\t\t@property uid\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\tuid: Basic.guid('uid_'),\n\n\t\t\t/**\n\t\t\tContains current state of FileReader object. Can take values of FileReader.EMPTY, FileReader.LOADING\n\t\t\tand FileReader.DONE.\n\n\t\t\t@property readyState\n\t\t\t@type {Number}\n\t\t\t@default FileReader.EMPTY\n\t\t\t*/\n\t\t\treadyState: FileReader.EMPTY,\n\t\t\t\n\t\t\t/**\n\t\t\tResult of the successful read operation.\n\n\t\t\t@property result\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\tresult: null,\n\t\t\t\n\t\t\t/**\n\t\t\tStores the error of failed asynchronous read operation.\n\n\t\t\t@property error\n\t\t\t@type {DOMError}\n\t\t\t*/\n\t\t\terror: null,\n\t\t\t\n\t\t\t/**\n\t\t\tInitiates reading of File/Blob object contents to binary string.\n\n\t\t\t@method readAsBinaryString\n\t\t\t@param {Blob|File} blob Object to preload\n\t\t\t*/\n\t\t\treadAsBinaryString: function(blob) {\n\t\t\t\t_read.call(this, 'readAsBinaryString', blob);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tInitiates reading of File/Blob object contents to dataURL string.\n\n\t\t\t@method readAsDataURL\n\t\t\t@param {Blob|File} blob Object to preload\n\t\t\t*/\n\t\t\treadAsDataURL: function(blob) {\n\t\t\t\t_read.call(this, 'readAsDataURL', blob);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tInitiates reading of File/Blob object contents to string.\n\n\t\t\t@method readAsText\n\t\t\t@param {Blob|File} blob Object to preload\n\t\t\t*/\n\t\t\treadAsText: function(blob) {\n\t\t\t\t_read.call(this, 'readAsText', blob);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tAborts preloading process.\n\n\t\t\t@method abort\n\t\t\t*/\n\t\t\tabort: function() {\n\t\t\t\tthis.result = null;\n\t\t\t\t\n\t\t\t\tif (Basic.inArray(this.readyState, [FileReader.EMPTY, FileReader.DONE]) !== -1) {\n\t\t\t\t\treturn;\n\t\t\t\t} else if (this.readyState === FileReader.LOADING) {\n\t\t\t\t\tthis.readyState = FileReader.DONE;\n\t\t\t\t}\n\n\t\t\t\tif (_fr) {\n\t\t\t\t\t_fr.getRuntime().exec.call(this, 'FileReader', 'abort');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.trigger('abort');\n\t\t\t\tthis.trigger('loadend');\n\t\t\t},\n\n\t\t\t/**\n\t\t\tDestroy component and release resources.\n\n\t\t\t@method destroy\n\t\t\t*/\n\t\t\tdestroy: function() {\n\t\t\t\tthis.abort();\n\n\t\t\t\tif (_fr) {\n\t\t\t\t\t_fr.getRuntime().exec.call(this, 'FileReader', 'destroy');\n\t\t\t\t\t_fr.disconnectRuntime();\n\t\t\t\t}\n\n\t\t\t\tself = _fr = null;\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\tfunction _read(op, blob) {\n\t\t\t_fr = new RuntimeTarget();\n\n\t\t\tfunction error(err) {\n\t\t\t\tself.readyState = FileReader.DONE;\n\t\t\t\tself.error = err;\n\t\t\t\tself.trigger('error');\n\t\t\t\tloadEnd();\n\t\t\t}\n\n\t\t\tfunction loadEnd() {\n\t\t\t\t_fr.destroy();\n\t\t\t\t_fr = null;\n\t\t\t\tself.trigger('loadend');\n\t\t\t}\n\n\t\t\tfunction exec(runtime) {\n\t\t\t\t_fr.bind('Error', function(e, err) {\n\t\t\t\t\terror(err);\n\t\t\t\t});\n\n\t\t\t\t_fr.bind('Progress', function(e) {\n\t\t\t\t\tself.result = runtime.exec.call(_fr, 'FileReader', 'getResult');\n\t\t\t\t\tself.trigger(e);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t_fr.bind('Load', function(e) {\n\t\t\t\t\tself.readyState = FileReader.DONE;\n\t\t\t\t\tself.result = runtime.exec.call(_fr, 'FileReader', 'getResult');\n\t\t\t\t\tself.trigger(e);\n\t\t\t\t\tloadEnd();\n\t\t\t\t});\n\n\t\t\t\truntime.exec.call(_fr, 'FileReader', 'read', op, blob);\n\t\t\t}\n\n\t\t\tthis.convertEventPropsToHandlers(dispatches);\n\n\t\t\tif (this.readyState === FileReader.LOADING) {\n\t\t\t\treturn error(new x.DOMException(x.DOMException.INVALID_STATE_ERR));\n\t\t\t}\n\n\t\t\tthis.readyState = FileReader.LOADING;\n\t\t\tthis.trigger('loadstart');\n\n\t\t\t// if source is o.Blob/o.File\n\t\t\tif (blob instanceof Blob) {\n\t\t\t\tif (blob.isDetached()) {\n\t\t\t\t\tvar src = blob.getSource();\n\t\t\t\t\tswitch (op) {\n\t\t\t\t\t\tcase 'readAsText':\n\t\t\t\t\t\tcase 'readAsBinaryString':\n\t\t\t\t\t\t\tthis.result = src;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'readAsDataURL':\n\t\t\t\t\t\t\tthis.result = 'data:' + blob.type + ';base64,' + Encode.btoa(src);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tthis.readyState = FileReader.DONE;\n\t\t\t\t\tthis.trigger('load');\n\t\t\t\t\tloadEnd();\n\t\t\t\t} else {\n\t\t\t\t\texec(_fr.connectRuntime(blob.ruid));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\terror(new x.DOMException(x.DOMException.NOT_FOUND_ERR));\n\t\t\t}\n\t\t}\n\t}\n\t\n\t/**\n\tInitial FileReader state\n\n\t@property EMPTY\n\t@type {Number}\n\t@final\n\t@static\n\t@default 0\n\t*/\n\tFileReader.EMPTY = 0;\n\n\t/**\n\tFileReader switches to this state when it is preloading the source\n\n\t@property LOADING\n\t@type {Number}\n\t@final\n\t@static\n\t@default 1\n\t*/\n\tFileReader.LOADING = 1;\n\n\t/**\n\tPreloading is complete, this is a final state\n\n\t@property DONE\n\t@type {Number}\n\t@final\n\t@static\n\t@default 2\n\t*/\n\tFileReader.DONE = 2;\n\n\tFileReader.prototype = EventTarget.instance;\n\n\treturn FileReader;\n});\n\n// Included from: src/javascript/core/utils/Url.js\n\n/**\n * Url.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/core/utils/Url', [], function() {\n\t/**\n\tParse url into separate components and fill in absent parts with parts from current url,\n\tbased on https://raw.github.com/kvz/phpjs/master/functions/url/parse_url.js\n\n\t@method parseUrl\n\t@for Utils\n\t@static\n\t@param {String} url Url to parse (defaults to empty string if undefined)\n\t@return {Object} Hash containing extracted uri components\n\t*/\n\tvar parseUrl = function(url, currentUrl) {\n\t\tvar key = ['source', 'scheme', 'authority', 'userInfo', 'user', 'pass', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'fragment']\n\t\t, i = key.length\n\t\t, ports = {\n\t\t\thttp: 80,\n\t\t\thttps: 443\n\t\t}\n\t\t, uri = {}\n\t\t, regex = /^(?:([^:\\/?#]+):)?(?:\\/\\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\\/?#]*)(?::(\\d*))?))?()(?:(()(?:(?:[^?#\\/]*\\/)*)()(?:[^?#]*))(?:\\\\?([^#]*))?(?:#(.*))?)/\n\t\t, m = regex.exec(url || '')\n\t\t;\n\t\t\t\t\t\n\t\twhile (i--) {\n\t\t\tif (m[i]) {\n\t\t\t\turi[key[i]] = m[i];\n\t\t\t}\n\t\t}\n\n\t\t// when url is relative, we set the origin and the path ourselves\n\t\tif (!uri.scheme) {\n\t\t\t// come up with defaults\n\t\t\tif (!currentUrl || typeof(currentUrl) === 'string') {\n\t\t\t\tcurrentUrl = parseUrl(currentUrl || document.location.href);\n\t\t\t}\n\n\t\t\turi.scheme = currentUrl.scheme;\n\t\t\turi.host = currentUrl.host;\n\t\t\turi.port = currentUrl.port;\n\n\t\t\tvar path = '';\n\t\t\t// for urls without trailing slash we need to figure out the path\n\t\t\tif (/^[^\\/]/.test(uri.path)) {\n\t\t\t\tpath = currentUrl.path;\n\t\t\t\t// if path ends with a filename, strip it\n\t\t\t\tif (!/(\\/|\\/[^\\.]+)$/.test(path)) {\n\t\t\t\t\tpath = path.replace(/\\/[^\\/]+$/, '/');\n\t\t\t\t} else {\n\t\t\t\t\tpath += '/';\n\t\t\t\t}\n\t\t\t}\n\t\t\turi.path = path + (uri.path || ''); // site may reside at domain.com or domain.com/subdir\n\t\t}\n\n\t\tif (!uri.port) {\n\t\t\turi.port = ports[uri.scheme] || 80;\n\t\t} \n\t\t\n\t\turi.port = parseInt(uri.port, 10);\n\n\t\tif (!uri.path) {\n\t\t\turi.path = \"/\";\n\t\t}\n\n\t\tdelete uri.source;\n\n\t\treturn uri;\n\t};\n\n\t/**\n\tResolve url - among other things will turn relative url to absolute\n\n\t@method resolveUrl\n\t@static\n\t@param {String} url Either absolute or relative\n\t@return {String} Resolved, absolute url\n\t*/\n\tvar resolveUrl = function(url) {\n\t\tvar ports = { // we ignore default ports\n\t\t\thttp: 80,\n\t\t\thttps: 443\n\t\t}\n\t\t, urlp = parseUrl(url)\n\t\t;\n\n\t\treturn urlp.scheme + '://' + urlp.host + (urlp.port !== ports[urlp.scheme] ? ':' + urlp.port : '') + urlp.path + (urlp.query ? urlp.query : '');\n\t};\n\n\t/**\n\tCheck if specified url has the same origin as the current document\n\n\t@method hasSameOrigin\n\t@param {String|Object} url\n\t@return {Boolean}\n\t*/\n\tvar hasSameOrigin = function(url) {\n\t\tfunction origin(url) {\n\t\t\treturn [url.scheme, url.host, url.port].join('/');\n\t\t}\n\t\t\t\n\t\tif (typeof url === 'string') {\n\t\t\turl = parseUrl(url);\n\t\t}\t\n\t\t\n\t\treturn origin(parseUrl()) === origin(url);\n\t};\n\n\treturn {\n\t\tparseUrl: parseUrl,\n\t\tresolveUrl: resolveUrl,\n\t\thasSameOrigin: hasSameOrigin\n\t};\n});\n\n// Included from: src/javascript/file/FileReaderSync.js\n\n/**\n * FileReaderSync.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/file/FileReaderSync', [\n\t'moxie/core/utils/Basic',\n\t'moxie/runtime/RuntimeClient',\n\t'moxie/core/utils/Encode'\n], function(Basic, RuntimeClient, Encode) {\n\t/**\n\tSynchronous FileReader implementation. Something like this is available in WebWorkers environment, here\n\tit can be used to read only preloaded blobs/files and only below certain size (not yet sure what that'd be,\n\tbut probably < 1mb). Not meant to be used directly by user.\n\n\t@class FileReaderSync\n\t@private\n\t@constructor\n\t*/\n\treturn function() {\n\t\tRuntimeClient.call(this);\n\n\t\tBasic.extend(this, {\n\t\t\tuid: Basic.guid('uid_'),\n\n\t\t\treadAsBinaryString: function(blob) {\n\t\t\t\treturn _read.call(this, 'readAsBinaryString', blob);\n\t\t\t},\n\t\t\t\n\t\t\treadAsDataURL: function(blob) {\n\t\t\t\treturn _read.call(this, 'readAsDataURL', blob);\n\t\t\t},\n\t\t\t\n\t\t\t/*readAsArrayBuffer: function(blob) {\n\t\t\t\treturn _read.call(this, 'readAsArrayBuffer', blob);\n\t\t\t},*/\n\t\t\t\n\t\t\treadAsText: function(blob) {\n\t\t\t\treturn _read.call(this, 'readAsText', blob);\n\t\t\t}\n\t\t});\n\n\t\tfunction _read(op, blob) {\n\t\t\tif (blob.isDetached()) {\n\t\t\t\tvar src = blob.getSource();\n\t\t\t\tswitch (op) {\n\t\t\t\t\tcase 'readAsBinaryString':\n\t\t\t\t\t\treturn src;\n\t\t\t\t\tcase 'readAsDataURL':\n\t\t\t\t\t\treturn 'data:' + blob.type + ';base64,' + Encode.btoa(src);\n\t\t\t\t\tcase 'readAsText':\n\t\t\t\t\t\tvar txt = '';\n\t\t\t\t\t\tfor (var i = 0, length = src.length; i < length; i++) {\n\t\t\t\t\t\t\ttxt += String.fromCharCode(src[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn txt;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar result = this.connectRuntime(blob.ruid).exec.call(this, 'FileReaderSync', 'read', op, blob);\n\t\t\t\tthis.disconnectRuntime();\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t};\n});\n\n// Included from: src/javascript/xhr/FormData.js\n\n/**\n * FormData.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine(\"moxie/xhr/FormData\", [\n\t\"moxie/core/Exceptions\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/file/Blob\"\n], function(x, Basic, Blob) {\n\t/**\n\tFormData\n\n\t@class FormData\n\t@constructor\n\t*/\n\tfunction FormData() {\n\t\tvar _blob, _fields = [];\n\n\t\tBasic.extend(this, {\n\t\t\t/**\n\t\t\tAppend another key-value pair to the FormData object\n\n\t\t\t@method append\n\t\t\t@param {String} name Name for the new field\n\t\t\t@param {String|Blob|Array|Object} value Value for the field\n\t\t\t*/\n\t\t\tappend: function(name, value) {\n\t\t\t\tvar self = this, valueType = Basic.typeOf(value);\n\n\t\t\t\t// according to specs value might be either Blob or String\n\t\t\t\tif (value instanceof Blob) {\n\t\t\t\t\t_blob = {\n\t\t\t\t\t\tname: name,\n\t\t\t\t\t\tvalue: value // unfortunately we can only send single Blob in one FormData\n\t\t\t\t\t};\n\t\t\t\t} else if ('array' === valueType) {\n\t\t\t\t\tname += '[]';\n\n\t\t\t\t\tBasic.each(value, function(value) {\n\t\t\t\t\t\tself.append(name, value);\n\t\t\t\t\t});\n\t\t\t\t} else if ('object' === valueType) {\n\t\t\t\t\tBasic.each(value, function(value, key) {\n\t\t\t\t\t\tself.append(name + '[' + key + ']', value);\n\t\t\t\t\t});\n\t\t\t\t} else if ('null' === valueType || 'undefined' === valueType || 'number' === valueType && isNaN(value)) {\n\t\t\t\t\tself.append(name, \"false\");\n\t\t\t\t} else {\n\t\t\t\t\t_fields.push({\n\t\t\t\t\t\tname: name,\n\t\t\t\t\t\tvalue: value.toString()\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\tChecks if FormData contains Blob.\n\n\t\t\t@method hasBlob\n\t\t\t@return {Boolean}\n\t\t\t*/\n\t\t\thasBlob: function() {\n\t\t\t\treturn !!this.getBlob();\n\t\t\t},\n\n\t\t\t/**\n\t\t\tRetrieves blob.\n\n\t\t\t@method getBlob\n\t\t\t@return {Object} Either Blob if found or null\n\t\t\t*/\n\t\t\tgetBlob: function() {\n\t\t\t\treturn _blob && _blob.value || null;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tRetrieves blob field name.\n\n\t\t\t@method getBlobName\n\t\t\t@return {String} Either Blob field name or null\n\t\t\t*/\n\t\t\tgetBlobName: function() {\n\t\t\t\treturn _blob && _blob.name || null;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tLoop over the fields in FormData and invoke the callback for each of them.\n\n\t\t\t@method each\n\t\t\t@param {Function} cb Callback to call for each field\n\t\t\t*/\n\t\t\teach: function(cb) {\n\t\t\t\tBasic.each(_fields, function(field) {\n\t\t\t\t\tcb(field.value, field.name);\n\t\t\t\t});\n\n\t\t\t\tif (_blob) {\n\t\t\t\t\tcb(_blob.value, _blob.name);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\t_blob = null;\n\t\t\t\t_fields = [];\n\t\t\t}\n\t\t});\n\t}\n\n\treturn FormData;\n});\n\n// Included from: src/javascript/xhr/XMLHttpRequest.js\n\n/**\n * XMLHttpRequest.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine(\"moxie/xhr/XMLHttpRequest\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/core/EventTarget\",\n\t\"moxie/core/utils/Encode\",\n\t\"moxie/core/utils/Url\",\n\t\"moxie/runtime/Runtime\",\n\t\"moxie/runtime/RuntimeTarget\",\n\t\"moxie/file/Blob\",\n\t\"moxie/file/FileReaderSync\",\n\t\"moxie/xhr/FormData\",\n\t\"moxie/core/utils/Env\",\n\t\"moxie/core/utils/Mime\"\n], function(Basic, x, EventTarget, Encode, Url, Runtime, RuntimeTarget, Blob, FileReaderSync, FormData, Env, Mime) {\n\n\tvar httpCode = {\n\t\t100: 'Continue',\n\t\t101: 'Switching Protocols',\n\t\t102: 'Processing',\n\n\t\t200: 'OK',\n\t\t201: 'Created',\n\t\t202: 'Accepted',\n\t\t203: 'Non-Authoritative Information',\n\t\t204: 'No Content',\n\t\t205: 'Reset Content',\n\t\t206: 'Partial Content',\n\t\t207: 'Multi-Status',\n\t\t226: 'IM Used',\n\n\t\t300: 'Multiple Choices',\n\t\t301: 'Moved Permanently',\n\t\t302: 'Found',\n\t\t303: 'See Other',\n\t\t304: 'Not Modified',\n\t\t305: 'Use Proxy',\n\t\t306: 'Reserved',\n\t\t307: 'Temporary Redirect',\n\n\t\t400: 'Bad Request',\n\t\t401: 'Unauthorized',\n\t\t402: 'Payment Required',\n\t\t403: 'Forbidden',\n\t\t404: 'Not Found',\n\t\t405: 'Method Not Allowed',\n\t\t406: 'Not Acceptable',\n\t\t407: 'Proxy Authentication Required',\n\t\t408: 'Request Timeout',\n\t\t409: 'Conflict',\n\t\t410: 'Gone',\n\t\t411: 'Length Required',\n\t\t412: 'Precondition Failed',\n\t\t413: 'Request Entity Too Large',\n\t\t414: 'Request-URI Too Long',\n\t\t415: 'Unsupported Media Type',\n\t\t416: 'Requested Range Not Satisfiable',\n\t\t417: 'Expectation Failed',\n\t\t422: 'Unprocessable Entity',\n\t\t423: 'Locked',\n\t\t424: 'Failed Dependency',\n\t\t426: 'Upgrade Required',\n\n\t\t500: 'Internal Server Error',\n\t\t501: 'Not Implemented',\n\t\t502: 'Bad Gateway',\n\t\t503: 'Service Unavailable',\n\t\t504: 'Gateway Timeout',\n\t\t505: 'HTTP Version Not Supported',\n\t\t506: 'Variant Also Negotiates',\n\t\t507: 'Insufficient Storage',\n\t\t510: 'Not Extended'\n\t};\n\n\tfunction XMLHttpRequestUpload() {\n\t\tthis.uid = Basic.guid('uid_');\n\t}\n\t\n\tXMLHttpRequestUpload.prototype = EventTarget.instance;\n\n\t/**\n\tImplementation of XMLHttpRequest\n\n\t@class XMLHttpRequest\n\t@constructor\n\t@uses RuntimeClient\n\t@extends EventTarget\n\t*/\n\tvar dispatches = ['loadstart', 'progress', 'abort', 'error', 'load', 'timeout', 'loadend']; // & readystatechange (for historical reasons)\n\t\n\tvar NATIVE = 1, RUNTIME = 2;\n\t\t\t\t\t\n\tfunction XMLHttpRequest() {\n\t\tvar self = this,\n\t\t\t// this (together with _p() @see below) is here to gracefully upgrade to setter/getter syntax where possible\n\t\t\tprops = {\n\t\t\t\t/**\n\t\t\t\tThe amount of milliseconds a request can take before being terminated. Initially zero. Zero means there is no timeout.\n\n\t\t\t\t@property timeout\n\t\t\t\t@type Number\n\t\t\t\t@default 0\n\t\t\t\t*/\n\t\t\t\ttimeout: 0,\n\n\t\t\t\t/**\n\t\t\t\tCurrent state, can take following values:\n\t\t\t\tUNSENT (numeric value 0)\n\t\t\t\tThe object has been constructed.\n\n\t\t\t\tOPENED (numeric value 1)\n\t\t\t\tThe open() method has been successfully invoked. During this state request headers can be set using setRequestHeader() and the request can be made using the send() method.\n\n\t\t\t\tHEADERS_RECEIVED (numeric value 2)\n\t\t\t\tAll redirects (if any) have been followed and all HTTP headers of the final response have been received. Several response members of the object are now available.\n\n\t\t\t\tLOADING (numeric value 3)\n\t\t\t\tThe response entity body is being received.\n\n\t\t\t\tDONE (numeric value 4)\n\n\t\t\t\t@property readyState\n\t\t\t\t@type Number\n\t\t\t\t@default 0 (UNSENT)\n\t\t\t\t*/\n\t\t\t\treadyState: XMLHttpRequest.UNSENT,\n\n\t\t\t\t/**\n\t\t\t\tTrue when user credentials are to be included in a cross-origin request. False when they are to be excluded\n\t\t\t\tin a cross-origin request and when cookies are to be ignored in its response. Initially false.\n\n\t\t\t\t@property withCredentials\n\t\t\t\t@type Boolean\n\t\t\t\t@default false\n\t\t\t\t*/\n\t\t\t\twithCredentials: false,\n\n\t\t\t\t/**\n\t\t\t\tReturns the HTTP status code.\n\n\t\t\t\t@property status\n\t\t\t\t@type Number\n\t\t\t\t@default 0\n\t\t\t\t*/\n\t\t\t\tstatus: 0,\n\n\t\t\t\t/**\n\t\t\t\tReturns the HTTP status text.\n\n\t\t\t\t@property statusText\n\t\t\t\t@type String\n\t\t\t\t*/\n\t\t\t\tstatusText: \"\",\n\n\t\t\t\t/**\n\t\t\t\tReturns the response type. Can be set to change the response type. Values are:\n\t\t\t\tthe empty string (default), \"arraybuffer\", \"blob\", \"document\", \"json\", and \"text\".\n\t\t\t\t\n\t\t\t\t@property responseType\n\t\t\t\t@type String\n\t\t\t\t*/\n\t\t\t\tresponseType: \"\",\n\n\t\t\t\t/**\n\t\t\t\tReturns the document response entity body.\n\t\t\t\t\n\t\t\t\tThrows an \"InvalidStateError\" exception if responseType is not the empty string or \"document\".\n\n\t\t\t\t@property responseXML\n\t\t\t\t@type Document\n\t\t\t\t*/\n\t\t\t\tresponseXML: null,\n\n\t\t\t\t/**\n\t\t\t\tReturns the text response entity body.\n\t\t\t\t\n\t\t\t\tThrows an \"InvalidStateError\" exception if responseType is not the empty string or \"text\".\n\n\t\t\t\t@property responseText\n\t\t\t\t@type String\n\t\t\t\t*/\n\t\t\t\tresponseText: null,\n\n\t\t\t\t/**\n\t\t\t\tReturns the response entity body (http://www.w3.org/TR/XMLHttpRequest/#response-entity-body).\n\t\t\t\tCan become: ArrayBuffer, Blob, Document, JSON, Text\n\t\t\t\t\n\t\t\t\t@property response\n\t\t\t\t@type Mixed\n\t\t\t\t*/\n\t\t\t\tresponse: null\n\t\t\t},\n\n\t\t\t_async = true,\n\t\t\t_url,\n\t\t\t_method,\n\t\t\t_headers = {},\n\t\t\t_user,\n\t\t\t_password,\n\t\t\t_encoding = null,\n\t\t\t_mimeType = null,\n\n\t\t\t// flags\n\t\t\t_sync_flag = false,\n\t\t\t_send_flag = false,\n\t\t\t_upload_events_flag = false,\n\t\t\t_upload_complete_flag = false,\n\t\t\t_error_flag = false,\n\t\t\t_same_origin_flag = false,\n\n\t\t\t// times\n\t\t\t_start_time,\n\t\t\t_timeoutset_time,\n\n\t\t\t_finalMime = null,\n\t\t\t_finalCharset = null,\n\n\t\t\t_options = {},\n\t\t\t_xhr,\n\t\t\t_responseHeaders = '',\n\t\t\t_responseHeadersBag\n\t\t\t;\n\n\t\t\n\t\tBasic.extend(this, props, {\n\t\t\t/**\n\t\t\tUnique id of the component\n\n\t\t\t@property uid\n\t\t\t@type String\n\t\t\t*/\n\t\t\tuid: Basic.guid('uid_'),\n\t\t\t\n\t\t\t/**\n\t\t\tTarget for Upload events\n\n\t\t\t@property upload\n\t\t\t@type XMLHttpRequestUpload\n\t\t\t*/\n\t\t\tupload: new XMLHttpRequestUpload(),\n\t\t\t\n\n\t\t\t/**\n\t\t\tSets the request method, request URL, synchronous flag, request username, and request password.\n\n\t\t\tThrows a \"SyntaxError\" exception if one of the following is true:\n\n\t\t\tmethod is not a valid HTTP method.\n\t\t\turl cannot be resolved.\n\t\t\turl contains the \"user:password\" format in the userinfo production.\n\t\t\tThrows a \"SecurityError\" exception if method is a case-insensitive match for CONNECT, TRACE or TRACK.\n\n\t\t\tThrows an \"InvalidAccessError\" exception if one of the following is true:\n\n\t\t\tEither user or password is passed as argument and the origin of url does not match the XMLHttpRequest origin.\n\t\t\tThere is an associated XMLHttpRequest document and either the timeout attribute is not zero,\n\t\t\tthe withCredentials attribute is true, or the responseType attribute is not the empty string.\n\n\n\t\t\t@method open\n\t\t\t@param {String} method HTTP method to use on request\n\t\t\t@param {String} url URL to request\n\t\t\t@param {Boolean} [async=true] If false request will be done in synchronous manner. Asynchronous by default.\n\t\t\t@param {String} [user] Username to use in HTTP authentication process on server-side\n\t\t\t@param {String} [password] Password to use in HTTP authentication process on server-side\n\t\t\t*/\n\t\t\topen: function(method, url, async, user, password) {\n\t\t\t\tvar urlp;\n\t\t\t\t\n\t\t\t\t// first two arguments are required\n\t\t\t\tif (!method || !url) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.SYNTAX_ERR);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 2 - check if any code point in method is higher than U+00FF or after deflating method it does not match the method\n\t\t\t\tif (/[\\u0100-\\uffff]/.test(method) || Encode.utf8_encode(method) !== method) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.SYNTAX_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 3\n\t\t\t\tif (!!~Basic.inArray(method.toUpperCase(), ['CONNECT', 'DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT', 'TRACE', 'TRACK'])) {\n\t\t\t\t\t_method = method.toUpperCase();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t// 4 - allowing these methods poses a security risk\n\t\t\t\tif (!!~Basic.inArray(_method, ['CONNECT', 'TRACE', 'TRACK'])) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.SECURITY_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 5\n\t\t\t\turl = Encode.utf8_encode(url);\n\t\t\t\t\n\t\t\t\t// 6 - Resolve url relative to the XMLHttpRequest base URL. If the algorithm returns an error, throw a \"SyntaxError\".\n\t\t\t\turlp = Url.parseUrl(url);\n\n\t\t\t\t_same_origin_flag = Url.hasSameOrigin(urlp);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t// 7 - manually build up absolute url\n\t\t\t\t_url = Url.resolveUrl(url);\n\t\t\n\t\t\t\t// 9-10, 12-13\n\t\t\t\tif ((user || password) && !_same_origin_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_ACCESS_ERR);\n\t\t\t\t}\n\n\t\t\t\t_user = user || urlp.user;\n\t\t\t\t_password = password || urlp.pass;\n\t\t\t\t\n\t\t\t\t// 11\n\t\t\t\t_async = async || true;\n\t\t\t\t\n\t\t\t\tif (_async === false && (_p('timeout') || _p('withCredentials') || _p('responseType') !== \"\")) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_ACCESS_ERR);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 14 - terminate abort()\n\t\t\t\t\n\t\t\t\t// 15 - terminate send()\n\n\t\t\t\t// 18\n\t\t\t\t_sync_flag = !_async;\n\t\t\t\t_send_flag = false;\n\t\t\t\t_headers = {};\n\t\t\t\t_reset.call(this);\n\n\t\t\t\t// 19\n\t\t\t\t_p('readyState', XMLHttpRequest.OPENED);\n\t\t\t\t\n\t\t\t\t// 20\n\t\t\t\tthis.convertEventPropsToHandlers(['readystatechange']); // unify event handlers\n\t\t\t\tthis.dispatchEvent('readystatechange');\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tAppends an header to the list of author request headers, or if header is already\n\t\t\tin the list of author request headers, combines its value with value.\n\n\t\t\tThrows an \"InvalidStateError\" exception if the state is not OPENED or if the send() flag is set.\n\t\t\tThrows a \"SyntaxError\" exception if header is not a valid HTTP header field name or if value\n\t\t\tis not a valid HTTP header field value.\n\t\t\t\n\t\t\t@method setRequestHeader\n\t\t\t@param {String} header\n\t\t\t@param {String|Number} value\n\t\t\t*/\n\t\t\tsetRequestHeader: function(header, value) {\n\t\t\t\tvar uaHeaders = [ // these headers are controlled by the user agent\n\t\t\t\t\t\t\"accept-charset\",\n\t\t\t\t\t\t\"accept-encoding\",\n\t\t\t\t\t\t\"access-control-request-headers\",\n\t\t\t\t\t\t\"access-control-request-method\",\n\t\t\t\t\t\t\"connection\",\n\t\t\t\t\t\t\"content-length\",\n\t\t\t\t\t\t\"cookie\",\n\t\t\t\t\t\t\"cookie2\",\n\t\t\t\t\t\t\"content-transfer-encoding\",\n\t\t\t\t\t\t\"date\",\n\t\t\t\t\t\t\"expect\",\n\t\t\t\t\t\t\"host\",\n\t\t\t\t\t\t\"keep-alive\",\n\t\t\t\t\t\t\"origin\",\n\t\t\t\t\t\t\"referer\",\n\t\t\t\t\t\t\"te\",\n\t\t\t\t\t\t\"trailer\",\n\t\t\t\t\t\t\"transfer-encoding\",\n\t\t\t\t\t\t\"upgrade\",\n\t\t\t\t\t\t\"user-agent\",\n\t\t\t\t\t\t\"via\"\n\t\t\t\t\t];\n\t\t\t\t\n\t\t\t\t// 1-2\n\t\t\t\tif (_p('readyState') !== XMLHttpRequest.OPENED || _send_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 3\n\t\t\t\tif (/[\\u0100-\\uffff]/.test(header) || Encode.utf8_encode(header) !== header) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.SYNTAX_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 4\n\t\t\t\t/* this step is seemingly bypassed in browsers, probably to allow various unicode characters in header values\n\t\t\t\tif (/[\\u0100-\\uffff]/.test(value) || Encode.utf8_encode(value) !== value) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.SYNTAX_ERR);\n\t\t\t\t}*/\n\n\t\t\t\theader = Basic.trim(header).toLowerCase();\n\t\t\t\t\n\t\t\t\t// setting of proxy-* and sec-* headers is prohibited by spec\n\t\t\t\tif (!!~Basic.inArray(header, uaHeaders) || /^(proxy\\-|sec\\-)/.test(header)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// camelize\n\t\t\t\t// browsers lowercase header names (at least for custom ones)\n\t\t\t\t// header = header.replace(/\\b\\w/g, function($1) { return $1.toUpperCase(); });\n\t\t\t\t\n\t\t\t\tif (!_headers[header]) {\n\t\t\t\t\t_headers[header] = value;\n\t\t\t\t} else {\n\t\t\t\t\t// http://tools.ietf.org/html/rfc2616#section-4.2 (last paragraph)\n\t\t\t\t\t_headers[header] += ', ' + value;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tReturns all headers from the response, with the exception of those whose field name is Set-Cookie or Set-Cookie2.\n\n\t\t\t@method getAllResponseHeaders\n\t\t\t@return {String} reponse headers or empty string\n\t\t\t*/\n\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\treturn _responseHeaders || '';\n\t\t\t},\n\n\t\t\t/**\n\t\t\tReturns the header field value from the response of which the field name matches header, \n\t\t\tunless the field name is Set-Cookie or Set-Cookie2.\n\n\t\t\t@method getResponseHeader\n\t\t\t@param {String} header\n\t\t\t@return {String} value(s) for the specified header or null\n\t\t\t*/\n\t\t\tgetResponseHeader: function(header) {\n\t\t\t\theader = header.toLowerCase();\n\n\t\t\t\tif (_error_flag || !!~Basic.inArray(header, ['set-cookie', 'set-cookie2'])) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (_responseHeaders && _responseHeaders !== '') {\n\t\t\t\t\t// if we didn't parse response headers until now, do it and keep for later\n\t\t\t\t\tif (!_responseHeadersBag) {\n\t\t\t\t\t\t_responseHeadersBag = {};\n\t\t\t\t\t\tBasic.each(_responseHeaders.split(/\\r\\n/), function(line) {\n\t\t\t\t\t\t\tvar pair = line.split(/:\\s+/);\n\t\t\t\t\t\t\tif (pair.length === 2) { // last line might be empty, omit\n\t\t\t\t\t\t\t\tpair[0] = Basic.trim(pair[0]); // just in case\n\t\t\t\t\t\t\t\t_responseHeadersBag[pair[0].toLowerCase()] = { // simply to retain header name in original form\n\t\t\t\t\t\t\t\t\theader: pair[0],\n\t\t\t\t\t\t\t\t\tvalue: Basic.trim(pair[1])\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (_responseHeadersBag.hasOwnProperty(header)) {\n\t\t\t\t\t\treturn _responseHeadersBag[header].header + ': ' + _responseHeadersBag[header].value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tSets the Content-Type header for the response to mime.\n\t\t\tThrows an \"InvalidStateError\" exception if the state is LOADING or DONE.\n\t\t\tThrows a \"SyntaxError\" exception if mime is not a valid media type.\n\n\t\t\t@method overrideMimeType\n\t\t\t@param String mime Mime type to set\n\t\t\t*/\n\t\t\toverrideMimeType: function(mime) {\n\t\t\t\tvar matches, charset;\n\t\t\t\n\t\t\t\t// 1\n\t\t\t\tif (!!~Basic.inArray(_p('readyState'), [XMLHttpRequest.LOADING, XMLHttpRequest.DONE])) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 2\n\t\t\t\tmime = Basic.trim(mime.toLowerCase());\n\n\t\t\t\tif (/;/.test(mime) && (matches = mime.match(/^([^;]+)(?:;\\scharset\\=)?(.*)$/))) {\n\t\t\t\t\tmime = matches[1];\n\t\t\t\t\tif (matches[2]) {\n\t\t\t\t\t\tcharset = matches[2];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!Mime.mimes[mime]) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.SYNTAX_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 3-4\n\t\t\t\t_finalMime = mime;\n\t\t\t\t_finalCharset = charset;\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tInitiates the request. The optional argument provides the request entity body.\n\t\t\tThe argument is ignored if request method is GET or HEAD.\n\n\t\t\tThrows an \"InvalidStateError\" exception if the state is not OPENED or if the send() flag is set.\n\n\t\t\t@method send\n\t\t\t@param {Blob|Document|String|FormData} [data] Request entity body\n\t\t\t@param {Object} [options] Set of requirements and pre-requisities for runtime initialization\n\t\t\t*/\n\t\t\tsend: function(data, options) {\t\t\t\t\t\n\t\t\t\tif (Basic.typeOf(options) === 'string') {\n\t\t\t\t\t_options = { ruid: options };\n\t\t\t\t} else if (!options) {\n\t\t\t\t\t_options = {};\n\t\t\t\t} else {\n\t\t\t\t\t_options = options;\n\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\tthis.convertEventPropsToHandlers(dispatches);\n\t\t\t\tthis.upload.convertEventPropsToHandlers(dispatches);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t// 1-2\n\t\t\t\tif (this.readyState !== XMLHttpRequest.OPENED || _send_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 3\t\t\t\t\t\n\t\t\t\t// sending Blob\n\t\t\t\tif (data instanceof Blob) {\n\t\t\t\t\t_options.ruid = data.ruid;\n\t\t\t\t\t_mimeType = data.type || 'application/octet-stream';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// FormData\n\t\t\t\telse if (data instanceof FormData) {\n\t\t\t\t\tif (data.hasBlob()) {\n\t\t\t\t\t\tvar blob = data.getBlob();\n\t\t\t\t\t\t_options.ruid = blob.ruid;\n\t\t\t\t\t\t_mimeType = blob.type || 'application/octet-stream';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// DOMString\n\t\t\t\telse if (typeof data === 'string') {\n\t\t\t\t\t_encoding = 'UTF-8';\n\t\t\t\t\t_mimeType = 'text/plain;charset=UTF-8';\n\t\t\t\t\t\n\t\t\t\t\t// data should be converted to Unicode and encoded as UTF-8\n\t\t\t\t\tdata = Encode.utf8_encode(data);\n\t\t\t\t}\n\n\t\t\t\t// if withCredentials not set, but requested, set it automatically\n\t\t\t\tif (!this.withCredentials) {\n\t\t\t\t\tthis.withCredentials = (_options.required_caps && _options.required_caps.send_browser_cookies) && !_same_origin_flag;\n\t\t\t\t}\n\n\t\t\t\t// 4 - storage mutex\n\t\t\t\t// 5\n\t\t\t\t_upload_events_flag = (!_sync_flag && this.upload.hasEventListener()); // DSAP\n\t\t\t\t// 6\n\t\t\t\t_error_flag = false;\n\t\t\t\t// 7\n\t\t\t\t_upload_complete_flag = !data;\n\t\t\t\t// 8 - Asynchronous steps\n\t\t\t\tif (!_sync_flag) {\n\t\t\t\t\t// 8.1\n\t\t\t\t\t_send_flag = true;\n\t\t\t\t\t// 8.2\n\t\t\t\t\t// this.dispatchEvent('loadstart'); // will be dispatched either by native or runtime xhr\n\t\t\t\t\t// 8.3\n\t\t\t\t\t//if (!_upload_complete_flag) {\n\t\t\t\t\t\t// this.upload.dispatchEvent('loadstart');\t// will be dispatched either by native or runtime xhr\n\t\t\t\t\t//}\n\t\t\t\t}\n\t\t\t\t// 8.5 - Return the send() method call, but continue running the steps in this algorithm.\n\t\t\t\t_doXHR.call(this, data);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tCancels any network activity.\n\t\t\t\n\t\t\t@method abort\n\t\t\t*/\n\t\t\tabort: function() {\n\t\t\t\t_error_flag = true;\n\t\t\t\t_sync_flag = false;\n\n\t\t\t\tif (!~Basic.inArray(_p('readyState'), [XMLHttpRequest.UNSENT, XMLHttpRequest.OPENED, XMLHttpRequest.DONE])) {\n\t\t\t\t\t_p('readyState', XMLHttpRequest.DONE);\n\t\t\t\t\t_send_flag = false;\n\n\t\t\t\t\tif (_xhr) {\n\t\t\t\t\t\t_xhr.getRuntime().exec.call(_xhr, 'XMLHttpRequest', 'abort', _upload_complete_flag);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t\t}\n\n\t\t\t\t\t_upload_complete_flag = true;\n\t\t\t\t} else {\n\t\t\t\t\t_p('readyState', XMLHttpRequest.UNSENT);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\tif (_xhr) {\n\t\t\t\t\tif (Basic.typeOf(_xhr.destroy) === 'function') {\n\t\t\t\t\t\t_xhr.destroy();\n\t\t\t\t\t}\n\t\t\t\t\t_xhr = null;\n\t\t\t\t}\n\n\t\t\t\tthis.unbindAll();\n\n\t\t\t\tif (this.upload) {\n\t\t\t\t\tthis.upload.unbindAll();\n\t\t\t\t\tthis.upload = null;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t/* this is nice, but maybe too lengthy\n\n\t\t// if supported by JS version, set getters/setters for specific properties\n\t\to.defineProperty(this, 'readyState', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\treturn _p('readyState');\n\t\t\t}\n\t\t});\n\n\t\to.defineProperty(this, 'timeout', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\treturn _p('timeout');\n\t\t\t},\n\n\t\t\tset: function(value) {\n\n\t\t\t\tif (_sync_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_ACCESS_ERR);\n\t\t\t\t}\n\n\t\t\t\t// timeout still should be measured relative to the start time of request\n\t\t\t\t_timeoutset_time = (new Date).getTime();\n\n\t\t\t\t_p('timeout', value);\n\t\t\t}\n\t\t});\n\n\t\t// the withCredentials attribute has no effect when fetching same-origin resources\n\t\to.defineProperty(this, 'withCredentials', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\treturn _p('withCredentials');\n\t\t\t},\n\n\t\t\tset: function(value) {\n\t\t\t\t// 1-2\n\t\t\t\tif (!~o.inArray(_p('readyState'), [XMLHttpRequest.UNSENT, XMLHttpRequest.OPENED]) || _send_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 3-4\n\t\t\t\tif (_anonymous_flag || _sync_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_ACCESS_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 5\n\t\t\t\t_p('withCredentials', value);\n\t\t\t}\n\t\t});\n\n\t\to.defineProperty(this, 'status', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\treturn _p('status');\n\t\t\t}\n\t\t});\n\n\t\to.defineProperty(this, 'statusText', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\treturn _p('statusText');\n\t\t\t}\n\t\t});\n\n\t\to.defineProperty(this, 'responseType', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\treturn _p('responseType');\n\t\t\t},\n\n\t\t\tset: function(value) {\n\t\t\t\t// 1\n\t\t\t\tif (!!~o.inArray(_p('readyState'), [XMLHttpRequest.LOADING, XMLHttpRequest.DONE])) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 2\n\t\t\t\tif (_sync_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_ACCESS_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 3\n\t\t\t\t_p('responseType', value.toLowerCase());\n\t\t\t}\n\t\t});\n\n\t\to.defineProperty(this, 'responseText', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\t// 1\n\t\t\t\tif (!~o.inArray(_p('responseType'), ['', 'text'])) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 2-3\n\t\t\t\tif (_p('readyState') !== XMLHttpRequest.DONE && _p('readyState') !== XMLHttpRequest.LOADING || _error_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\treturn _p('responseText');\n\t\t\t}\n\t\t});\n\n\t\to.defineProperty(this, 'responseXML', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\t// 1\n\t\t\t\tif (!~o.inArray(_p('responseType'), ['', 'document'])) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 2-3\n\t\t\t\tif (_p('readyState') !== XMLHttpRequest.DONE || _error_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\treturn _p('responseXML');\n\t\t\t}\n\t\t});\n\n\t\to.defineProperty(this, 'response', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\tif (!!~o.inArray(_p('responseType'), ['', 'text'])) {\n\t\t\t\t\tif (_p('readyState') !== XMLHttpRequest.DONE && _p('readyState') !== XMLHttpRequest.LOADING || _error_flag) {\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (_p('readyState') !== XMLHttpRequest.DONE || _error_flag) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn _p('response');\n\t\t\t}\n\t\t});\n\n\t\t*/\n\n\t\tfunction _p(prop, value) {\n\t\t\tif (!props.hasOwnProperty(prop)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (arguments.length === 1) { // get\n\t\t\t\treturn Env.can('define_property') ? props[prop] : self[prop];\n\t\t\t} else { // set\n\t\t\t\tif (Env.can('define_property')) {\n\t\t\t\t\tprops[prop] = value;\n\t\t\t\t} else {\n\t\t\t\t\tself[prop] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t/*\n\t\tfunction _toASCII(str, AllowUnassigned, UseSTD3ASCIIRules) {\n\t\t\t// TODO: http://tools.ietf.org/html/rfc3490#section-4.1\n\t\t\treturn str.toLowerCase();\n\t\t}\n\t\t*/\n\t\t\n\t\t\n\t\tfunction _doXHR(data) {\n\t\t\tvar self = this;\n\t\t\t\n\t\t\t_start_time = new Date().getTime();\n\n\t\t\t_xhr = new RuntimeTarget();\n\n\t\t\tfunction loadEnd() {\n\t\t\t\tif (_xhr) { // it could have been destroyed by now\n\t\t\t\t\t_xhr.destroy();\n\t\t\t\t\t_xhr = null;\n\t\t\t\t}\n\t\t\t\tself.dispatchEvent('loadend');\n\t\t\t\tself = null;\n\t\t\t}\n\n\t\t\tfunction exec(runtime) {\n\t\t\t\t_xhr.bind('LoadStart', function(e) {\n\t\t\t\t\t_p('readyState', XMLHttpRequest.LOADING);\n\t\t\t\t\tself.dispatchEvent('readystatechange');\n\n\t\t\t\t\tself.dispatchEvent(e);\n\t\t\t\t\t\n\t\t\t\t\tif (_upload_events_flag) {\n\t\t\t\t\t\tself.upload.dispatchEvent(e);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t_xhr.bind('Progress', function(e) {\n\t\t\t\t\tif (_p('readyState') !== XMLHttpRequest.LOADING) {\n\t\t\t\t\t\t_p('readyState', XMLHttpRequest.LOADING); // LoadStart unreliable (in Flash for example)\n\t\t\t\t\t\tself.dispatchEvent('readystatechange');\n\t\t\t\t\t}\n\t\t\t\t\tself.dispatchEvent(e);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t_xhr.bind('UploadProgress', function(e) {\n\t\t\t\t\tif (_upload_events_flag) {\n\t\t\t\t\t\tself.upload.dispatchEvent({\n\t\t\t\t\t\t\ttype: 'progress',\n\t\t\t\t\t\t\tlengthComputable: false,\n\t\t\t\t\t\t\ttotal: e.total,\n\t\t\t\t\t\t\tloaded: e.loaded\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t_xhr.bind('Load', function(e) {\n\t\t\t\t\t_p('readyState', XMLHttpRequest.DONE);\n\t\t\t\t\t_p('status', Number(runtime.exec.call(_xhr, 'XMLHttpRequest', 'getStatus') || 0));\n\t\t\t\t\t_p('statusText', httpCode[_p('status')] || \"\");\n\t\t\t\t\t\n\t\t\t\t\t_p('response', runtime.exec.call(_xhr, 'XMLHttpRequest', 'getResponse', _p('responseType')));\n\n\t\t\t\t\tif (!!~Basic.inArray(_p('responseType'), ['text', ''])) {\n\t\t\t\t\t\t_p('responseText', _p('response'));\n\t\t\t\t\t} else if (_p('responseType') === 'document') {\n\t\t\t\t\t\t_p('responseXML', _p('response'));\n\t\t\t\t\t}\n\n\t\t\t\t\t_responseHeaders = runtime.exec.call(_xhr, 'XMLHttpRequest', 'getAllResponseHeaders');\n\n\t\t\t\t\tself.dispatchEvent('readystatechange');\n\t\t\t\t\t\n\t\t\t\t\tif (_p('status') > 0) { // status 0 usually means that server is unreachable\n\t\t\t\t\t\tif (_upload_events_flag) {\n\t\t\t\t\t\t\tself.upload.dispatchEvent(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.dispatchEvent(e);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_error_flag = true;\n\t\t\t\t\t\tself.dispatchEvent('error');\n\t\t\t\t\t}\n\t\t\t\t\tloadEnd();\n\t\t\t\t});\n\n\t\t\t\t_xhr.bind('Abort', function(e) {\n\t\t\t\t\tself.dispatchEvent(e);\n\t\t\t\t\tloadEnd();\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t_xhr.bind('Error', function(e) {\n\t\t\t\t\t_error_flag = true;\n\t\t\t\t\t_p('readyState', XMLHttpRequest.DONE);\n\t\t\t\t\tself.dispatchEvent('readystatechange');\n\t\t\t\t\t_upload_complete_flag = true;\n\t\t\t\t\tself.dispatchEvent(e);\n\t\t\t\t\tloadEnd();\n\t\t\t\t});\n\n\t\t\t\truntime.exec.call(_xhr, 'XMLHttpRequest', 'send', {\n\t\t\t\t\turl: _url,\n\t\t\t\t\tmethod: _method,\n\t\t\t\t\tasync: _async,\n\t\t\t\t\tuser: _user,\n\t\t\t\t\tpassword: _password,\n\t\t\t\t\theaders: _headers,\n\t\t\t\t\tmimeType: _mimeType,\n\t\t\t\t\tencoding: _encoding,\n\t\t\t\t\tresponseType: self.responseType,\n\t\t\t\t\twithCredentials: self.withCredentials,\n\t\t\t\t\toptions: _options\n\t\t\t\t}, data);\n\t\t\t}\n\n\t\t\t// clarify our requirements\n\t\t\tif (typeof(_options.required_caps) === 'string') {\n\t\t\t\t_options.required_caps = Runtime.parseCaps(_options.required_caps);\n\t\t\t}\n\n\t\t\t_options.required_caps = Basic.extend({}, _options.required_caps, {\n\t\t\t\treturn_response_type: self.responseType\n\t\t\t});\n\n\t\t\tif (data instanceof FormData) {\n\t\t\t\t_options.required_caps.send_multipart = true;\n\t\t\t}\n\n\t\t\tif (!_same_origin_flag) {\n\t\t\t\t_options.required_caps.do_cors = true;\n\t\t\t}\n\t\t\t\n\n\t\t\tif (_options.ruid) { // we do not need to wait if we can connect directly\n\t\t\t\texec(_xhr.connectRuntime(_options));\n\t\t\t} else {\n\t\t\t\t_xhr.bind('RuntimeInit', function(e, runtime) {\n\t\t\t\t\texec(runtime);\n\t\t\t\t});\n\t\t\t\t_xhr.bind('RuntimeError', function(e, err) {\n\t\t\t\t\tself.dispatchEvent('RuntimeError', err);\n\t\t\t\t});\n\t\t\t\t_xhr.connectRuntime(_options);\n\t\t\t}\n\t\t}\n\t\n\t\t\n\t\tfunction _reset() {\n\t\t\t_p('responseText', \"\");\n\t\t\t_p('responseXML', null);\n\t\t\t_p('response', null);\n\t\t\t_p('status', 0);\n\t\t\t_p('statusText', \"\");\n\t\t\t_start_time = _timeoutset_time = null;\n\t\t}\n\t}\n\n\tXMLHttpRequest.UNSENT = 0;\n\tXMLHttpRequest.OPENED = 1;\n\tXMLHttpRequest.HEADERS_RECEIVED = 2;\n\tXMLHttpRequest.LOADING = 3;\n\tXMLHttpRequest.DONE = 4;\n\t\n\tXMLHttpRequest.prototype = EventTarget.instance;\n\n\treturn XMLHttpRequest;\n});\n\n// Included from: src/javascript/runtime/Transporter.js\n\n/**\n * Transporter.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine(\"moxie/runtime/Transporter\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Encode\",\n\t\"moxie/runtime/RuntimeClient\",\n\t\"moxie/core/EventTarget\"\n], function(Basic, Encode, RuntimeClient, EventTarget) {\n\tfunction Transporter() {\n\t\tvar mod, _runtime, _data, _size, _pos, _chunk_size;\n\n\t\tRuntimeClient.call(this);\n\n\t\tBasic.extend(this, {\n\t\t\tuid: Basic.guid('uid_'),\n\n\t\t\tstate: Transporter.IDLE,\n\n\t\t\tresult: null,\n\n\t\t\ttransport: function(data, type, options) {\n\t\t\t\tvar self = this;\n\n\t\t\t\toptions = Basic.extend({\n\t\t\t\t\tchunk_size: 204798\n\t\t\t\t}, options);\n\n\t\t\t\t// should divide by three, base64 requires this\n\t\t\t\tif ((mod = options.chunk_size % 3)) {\n\t\t\t\t\toptions.chunk_size += 3 - mod;\n\t\t\t\t}\n\n\t\t\t\t_chunk_size = options.chunk_size;\n\n\t\t\t\t_reset.call(this);\n\t\t\t\t_data = data;\n\t\t\t\t_size = data.length;\n\n\t\t\t\tif (Basic.typeOf(options) === 'string' || options.ruid) {\n\t\t\t\t\t_run.call(self, type, this.connectRuntime(options));\n\t\t\t\t} else {\n\t\t\t\t\t// we require this to run only once\n\t\t\t\t\tvar cb = function(e, runtime) {\n\t\t\t\t\t\tself.unbind(\"RuntimeInit\", cb);\n\t\t\t\t\t\t_run.call(self, type, runtime);\n\t\t\t\t\t};\n\t\t\t\t\tthis.bind(\"RuntimeInit\", cb);\n\t\t\t\t\tthis.connectRuntime(options);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tvar self = this;\n\n\t\t\t\tself.state = Transporter.IDLE;\n\t\t\t\tif (_runtime) {\n\t\t\t\t\t_runtime.exec.call(self, 'Transporter', 'clear');\n\t\t\t\t\tself.trigger(\"TransportingAborted\");\n\t\t\t\t}\n\n\t\t\t\t_reset.call(self);\n\t\t\t},\n\n\n\t\t\tdestroy: function() {\n\t\t\t\tthis.unbindAll();\n\t\t\t\t_runtime = null;\n\t\t\t\tthis.disconnectRuntime();\n\t\t\t\t_reset.call(this);\n\t\t\t}\n\t\t});\n\n\t\tfunction _reset() {\n\t\t\t_size = _pos = 0;\n\t\t\t_data = this.result = null;\n\t\t}\n\n\t\tfunction _run(type, runtime) {\n\t\t\tvar self = this;\n\n\t\t\t_runtime = runtime;\n\n\t\t\t//self.unbind(\"RuntimeInit\");\n\n\t\t\tself.bind(\"TransportingProgress\", function(e) {\n\t\t\t\t_pos = e.loaded;\n\n\t\t\t\tif (_pos < _size && Basic.inArray(self.state, [Transporter.IDLE, Transporter.DONE]) === -1) {\n\t\t\t\t\t_transport.call(self);\n\t\t\t\t}\n\t\t\t}, 999);\n\n\t\t\tself.bind(\"TransportingComplete\", function() {\n\t\t\t\t_pos = _size;\n\t\t\t\tself.state = Transporter.DONE;\n\t\t\t\t_data = null; // clean a bit\n\t\t\t\tself.result = _runtime.exec.call(self, 'Transporter', 'getAsBlob', type || '');\n\t\t\t}, 999);\n\n\t\t\tself.state = Transporter.BUSY;\n\t\t\tself.trigger(\"TransportingStarted\");\n\t\t\t_transport.call(self);\n\t\t}\n\n\t\tfunction _transport() {\n\t\t\tvar self = this,\n\t\t\t\tchunk,\n\t\t\t\tbytesLeft = _size - _pos;\n\n\t\t\tif (_chunk_size > bytesLeft) {\n\t\t\t\t_chunk_size = bytesLeft;\n\t\t\t}\n\n\t\t\tchunk = Encode.btoa(_data.substr(_pos, _chunk_size));\n\t\t\t_runtime.exec.call(self, 'Transporter', 'receive', chunk, _size);\n\t\t}\n\t}\n\n\tTransporter.IDLE = 0;\n\tTransporter.BUSY = 1;\n\tTransporter.DONE = 2;\n\n\tTransporter.prototype = EventTarget.instance;\n\n\treturn Transporter;\n});\n\n// Included from: src/javascript/image/Image.js\n\n/**\n * Image.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine(\"moxie/image/Image\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/file/FileReaderSync\",\n\t\"moxie/xhr/XMLHttpRequest\",\n\t\"moxie/runtime/Runtime\",\n\t\"moxie/runtime/RuntimeClient\",\n\t\"moxie/runtime/Transporter\",\n\t\"moxie/core/utils/Env\",\n\t\"moxie/core/EventTarget\",\n\t\"moxie/file/Blob\",\n\t\"moxie/file/File\",\n\t\"moxie/core/utils/Encode\"\n], function(Basic, Dom, x, FileReaderSync, XMLHttpRequest, Runtime, RuntimeClient, Transporter, Env, EventTarget, Blob, File, Encode) {\n\t/**\n\tImage preloading and manipulation utility. Additionally it provides access to image meta info (Exif, GPS) and raw binary data.\n\n\t@class Image\n\t@constructor\n\t@extends EventTarget\n\t*/\n\tvar dispatches = [\n\t\t'progress',\n\n\t\t/**\n\t\tDispatched when loading is complete.\n\n\t\t@event load\n\t\t@param {Object} event\n\t\t*/\n\t\t'load',\n\n\t\t'error',\n\n\t\t/**\n\t\tDispatched when resize operation is complete.\n\t\t\n\t\t@event resize\n\t\t@param {Object} event\n\t\t*/\n\t\t'resize',\n\n\t\t/**\n\t\tDispatched when visual representation of the image is successfully embedded\n\t\tinto the corresponsing container.\n\n\t\t@event embedded\n\t\t@param {Object} event\n\t\t*/\n\t\t'embedded'\n\t];\n\n\tfunction Image() {\n\t\tRuntimeClient.call(this);\n\n\t\tBasic.extend(this, {\n\t\t\t/**\n\t\t\tUnique id of the component\n\n\t\t\t@property uid\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\tuid: Basic.guid('uid_'),\n\n\t\t\t/**\n\t\t\tUnique id of the connected runtime, if any.\n\n\t\t\t@property ruid\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\truid: null,\n\n\t\t\t/**\n\t\t\tName of the file, that was used to create an image, if available. If not equals to empty string.\n\n\t\t\t@property name\n\t\t\t@type {String}\n\t\t\t@default \"\"\n\t\t\t*/\n\t\t\tname: \"\",\n\n\t\t\t/**\n\t\t\tSize of the image in bytes. Actual value is set only after image is preloaded.\n\n\t\t\t@property size\n\t\t\t@type {Number}\n\t\t\t@default 0\n\t\t\t*/\n\t\t\tsize: 0,\n\n\t\t\t/**\n\t\t\tWidth of the image. Actual value is set only after image is preloaded.\n\n\t\t\t@property width\n\t\t\t@type {Number}\n\t\t\t@default 0\n\t\t\t*/\n\t\t\twidth: 0,\n\n\t\t\t/**\n\t\t\tHeight of the image. Actual value is set only after image is preloaded.\n\n\t\t\t@property height\n\t\t\t@type {Number}\n\t\t\t@default 0\n\t\t\t*/\n\t\t\theight: 0,\n\n\t\t\t/**\n\t\t\tMime type of the image. Currently only image/jpeg and image/png are supported. Actual value is set only after image is preloaded.\n\n\t\t\t@property type\n\t\t\t@type {String}\n\t\t\t@default \"\"\n\t\t\t*/\n\t\t\ttype: \"\",\n\n\t\t\t/**\n\t\t\tHolds meta info (Exif, GPS). Is populated only for image/jpeg. Actual value is set only after image is preloaded.\n\n\t\t\t@property meta\n\t\t\t@type {Object}\n\t\t\t@default {}\n\t\t\t*/\n\t\t\tmeta: {},\n\n\t\t\t/**\n\t\t\tAlias for load method, that takes another mOxie.Image object as a source (see load).\n\n\t\t\t@method clone\n\t\t\t@param {Image} src Source for the image\n\t\t\t@param {Boolean} [exact=false] Whether to activate in-depth clone mode\n\t\t\t*/\n\t\t\tclone: function() {\n\t\t\t\tthis.load.apply(this, arguments);\n\t\t\t},\n\n\t\t\t/**\n\t\t\tLoads image from various sources. Currently the source for new image can be: mOxie.Image, mOxie.Blob/mOxie.File, \n\t\t\tnative Blob/File, dataUrl or URL. Depending on the type of the source, arguments - differ. When source is URL, \n\t\t\tImage will be downloaded from remote destination and loaded in memory.\n\n\t\t\t@example\n\t\t\t\tvar img = new mOxie.Image();\n\t\t\t\timg.onload = function() {\n\t\t\t\t\tvar blob = img.getAsBlob();\n\t\t\t\t\t\n\t\t\t\t\tvar formData = new mOxie.FormData();\n\t\t\t\t\tformData.append('file', blob);\n\n\t\t\t\t\tvar xhr = new mOxie.XMLHttpRequest();\n\t\t\t\t\txhr.onload = function() {\n\t\t\t\t\t\t// upload complete\n\t\t\t\t\t};\n\t\t\t\t\txhr.open('post', 'upload.php');\n\t\t\t\t\txhr.send(formData);\n\t\t\t\t};\n\t\t\t\timg.load(\"http://www.moxiecode.com/images/mox-logo.jpg\"); // notice file extension (.jpg)\n\t\t\t\n\n\t\t\t@method load\n\t\t\t@param {Image|Blob|File|String} src Source for the image\n\t\t\t@param {Boolean|Object} [mixed]\n\t\t\t*/\n\t\t\tload: function() {\n\t\t\t\t// this is here because to bind properly we need an uid first, which is created above\n\t\t\t\tthis.bind('Load Resize', function() {\n\t\t\t\t\t_updateInfo.call(this);\n\t\t\t\t}, 999);\n\n\t\t\t\tthis.convertEventPropsToHandlers(dispatches);\n\n\t\t\t\t_load.apply(this, arguments);\n\t\t\t},\n\n\t\t\t/**\n\t\t\tDownsizes the image to fit the specified width/height. If crop is supplied, image will be cropped to exact dimensions.\n\n\t\t\t@method downsize\n\t\t\t@param {Number} width Resulting width\n\t\t\t@param {Number} [height=width] Resulting height (optional, if not supplied will default to width)\n\t\t\t@param {Boolean} [crop=false] Whether to crop the image to exact dimensions\n\t\t\t@param {Boolean} [preserveHeaders=true] Whether to preserve meta headers (on JPEGs after resize)\n\t\t\t*/\n\t\t\tdownsize: function(opts) {\n\t\t\t\tvar defaults = {\n\t\t\t\t\twidth: this.width,\n\t\t\t\t\theight: this.height,\n\t\t\t\t\tcrop: false,\n\t\t\t\t\tpreserveHeaders: true\n\t\t\t\t};\n\n\t\t\t\tif (typeof(opts) === 'object') {\n\t\t\t\t\topts = Basic.extend(defaults, opts);\n\t\t\t\t} else {\n\t\t\t\t\topts = Basic.extend(defaults, {\n\t\t\t\t\t\twidth: arguments[0],\n\t\t\t\t\t\theight: arguments[1],\n\t\t\t\t\t\tcrop: arguments[2],\n\t\t\t\t\t\tpreserveHeaders: arguments[3]\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tif (!this.size) { // only preloaded image objects can be used as source\n\t\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t\t}\n\n\t\t\t\t\t// no way to reliably intercept the crash due to high resolution, so we simply avoid it\n\t\t\t\t\tif (this.width > Image.MAX_RESIZE_WIDTH || this.height > Image.MAX_RESIZE_HEIGHT) {\n\t\t\t\t\t\tthrow new x.ImageError(x.ImageError.MAX_RESOLUTION_ERR);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.getRuntime().exec.call(this, 'Image', 'downsize', opts.width, opts.height, opts.crop, opts.preserveHeaders);\n\t\t\t\t} catch(ex) {\n\t\t\t\t\t// for now simply trigger error event\n\t\t\t\t\tthis.trigger('error', ex.code);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\tAlias for downsize(width, height, true). (see downsize)\n\t\t\t\n\t\t\t@method crop\n\t\t\t@param {Number} width Resulting width\n\t\t\t@param {Number} [height=width] Resulting height (optional, if not supplied will default to width)\n\t\t\t@param {Boolean} [preserveHeaders=true] Whether to preserve meta headers (on JPEGs after resize)\n\t\t\t*/\n\t\t\tcrop: function(width, height, preserveHeaders) {\n\t\t\t\tthis.downsize(width, height, true, preserveHeaders);\n\t\t\t},\n\n\t\t\tgetAsCanvas: function() {\n\t\t\t\tif (!Env.can('create_canvas')) {\n\t\t\t\t\tthrow new x.RuntimeError(x.RuntimeError.NOT_SUPPORTED_ERR);\n\t\t\t\t}\n\n\t\t\t\tvar runtime = this.connectRuntime(this.ruid);\n\t\t\t\treturn runtime.exec.call(this, 'Image', 'getAsCanvas');\n\t\t\t},\n\n\t\t\t/**\n\t\t\tRetrieves image in it's current state as mOxie.Blob object. Cannot be run on empty or image in progress (throws\n\t\t\tDOMException.INVALID_STATE_ERR).\n\n\t\t\t@method getAsBlob\n\t\t\t@param {String} [type=\"image/jpeg\"] Mime type of resulting blob. Can either be image/jpeg or image/png\n\t\t\t@param {Number} [quality=90] Applicable only together with mime type image/jpeg\n\t\t\t@return {Blob} Image as Blob\n\t\t\t*/\n\t\t\tgetAsBlob: function(type, quality) {\n\t\t\t\tif (!this.size) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\tif (!type) {\n\t\t\t\t\ttype = 'image/jpeg';\n\t\t\t\t}\n\n\t\t\t\tif (type === 'image/jpeg' && !quality) {\n\t\t\t\t\tquality = 90;\n\t\t\t\t}\n\n\t\t\t\treturn this.getRuntime().exec.call(this, 'Image', 'getAsBlob', type, quality);\n\t\t\t},\n\n\t\t\t/**\n\t\t\tRetrieves image in it's current state as dataURL string. Cannot be run on empty or image in progress (throws\n\t\t\tDOMException.INVALID_STATE_ERR).\n\n\t\t\t@method getAsDataURL\n\t\t\t@param {String} [type=\"image/jpeg\"] Mime type of resulting blob. Can either be image/jpeg or image/png\n\t\t\t@param {Number} [quality=90] Applicable only together with mime type image/jpeg\n\t\t\t@return {String} Image as dataURL string\n\t\t\t*/\n\t\t\tgetAsDataURL: function(type, quality) {\n\t\t\t\tif (!this.size) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\t\t\t\treturn this.getRuntime().exec.call(this, 'Image', 'getAsDataURL', type, quality);\n\t\t\t},\n\n\t\t\t/**\n\t\t\tRetrieves image in it's current state as binary string. Cannot be run on empty or image in progress (throws\n\t\t\tDOMException.INVALID_STATE_ERR).\n\n\t\t\t@method getAsBinaryString\n\t\t\t@param {String} [type=\"image/jpeg\"] Mime type of resulting blob. Can either be image/jpeg or image/png\n\t\t\t@param {Number} [quality=90] Applicable only together with mime type image/jpeg\n\t\t\t@return {String} Image as binary string\n\t\t\t*/\n\t\t\tgetAsBinaryString: function(type, quality) {\n\t\t\t\tvar dataUrl = this.getAsDataURL(type, quality);\n\t\t\t\treturn Encode.atob(dataUrl.substring(dataUrl.indexOf('base64,') + 7));\n\t\t\t},\n\n\t\t\t/**\n\t\t\tEmbeds a visual representation of the image into the specified node. Depending on the runtime, \n\t\t\tit might be a canvas, an img node or a thrid party shim object (Flash or SilverLight - very rare, \n\t\t\tcan be used in legacy browsers that do not have canvas or proper dataURI support).\n\n\t\t\t@method embed\n\t\t\t@param {DOMElement} el DOM element to insert the image object into\n\t\t\t@param {Object} [options]\n\t\t\t\t@param {Number} [options.width] The width of an embed (defaults to the image width)\n\t\t\t\t@param {Number} [options.height] The height of an embed (defaults to the image height)\n\t\t\t\t@param {String} [type=\"image/jpeg\"] Mime type\n\t\t\t\t@param {Number} [quality=90] Quality of an embed, if mime type is image/jpeg\n\t\t\t\t@param {Boolean} [crop=false] Whether to crop an embed to the specified dimensions\n\t\t\t*/\n\t\t\tembed: function(el) {\n\t\t\t\tvar self = this\n\t\t\t\t, imgCopy\n\t\t\t\t, type, quality, crop\n\t\t\t\t, options = arguments[1] || {}\n\t\t\t\t, width = this.width\n\t\t\t\t, height = this.height\n\t\t\t\t, runtime // this has to be outside of all the closures to contain proper runtime\n\t\t\t\t;\n\n\t\t\t\tfunction onResize() {\n\t\t\t\t\t// if possible, embed a canvas element directly\n\t\t\t\t\tif (Env.can('create_canvas')) {\n\t\t\t\t\t\tvar canvas = imgCopy.getAsCanvas();\n\t\t\t\t\t\tif (canvas) {\n\t\t\t\t\t\t\tel.appendChild(canvas);\n\t\t\t\t\t\t\tcanvas = null;\n\t\t\t\t\t\t\timgCopy.destroy();\n\t\t\t\t\t\t\tself.trigger('embedded');\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar dataUrl = imgCopy.getAsDataURL(type, quality);\n\t\t\t\t\tif (!dataUrl) {\n\t\t\t\t\t\tthrow new x.ImageError(x.ImageError.WRONG_FORMAT);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Env.can('use_data_uri_of', dataUrl.length)) {\n\t\t\t\t\t\tel.innerHTML = '<img src=\"' + dataUrl + '\" width=\"' + imgCopy.width + '\" height=\"' + imgCopy.height + '\" />';\n\t\t\t\t\t\timgCopy.destroy();\n\t\t\t\t\t\tself.trigger('embedded');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar tr = new Transporter();\n\n\t\t\t\t\t\ttr.bind(\"TransportingComplete\", function() {\n\t\t\t\t\t\t\truntime = self.connectRuntime(this.result.ruid);\n\n\t\t\t\t\t\t\tself.bind(\"Embedded\", function() {\n\t\t\t\t\t\t\t\t// position and size properly\n\t\t\t\t\t\t\t\tBasic.extend(runtime.getShimContainer().style, {\n\t\t\t\t\t\t\t\t\t//position: 'relative',\n\t\t\t\t\t\t\t\t\ttop: '0px',\n\t\t\t\t\t\t\t\t\tleft: '0px',\n\t\t\t\t\t\t\t\t\twidth: imgCopy.width + 'px',\n\t\t\t\t\t\t\t\t\theight: imgCopy.height + 'px'\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t// some shims (Flash/SilverLight) reinitialize, if parent element is hidden, reordered or it's\n\t\t\t\t\t\t\t\t// position type changes (in Gecko), but since we basically need this only in IEs 6/7 and\n\t\t\t\t\t\t\t\t// sometimes 8 and they do not have this problem, we can comment this for now\n\t\t\t\t\t\t\t\t/*tr.bind(\"RuntimeInit\", function(e, runtime) {\n\t\t\t\t\t\t\t\t\ttr.destroy();\n\t\t\t\t\t\t\t\t\truntime.destroy();\n\t\t\t\t\t\t\t\t\tonResize.call(self); // re-feed our image data\n\t\t\t\t\t\t\t\t});*/\n\n\t\t\t\t\t\t\t\truntime = null;\n\t\t\t\t\t\t\t}, 999);\n\n\t\t\t\t\t\t\truntime.exec.call(self, \"ImageView\", \"display\", this.result.uid, width, height);\n\t\t\t\t\t\t\timgCopy.destroy();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\ttr.transport(Encode.atob(dataUrl.substring(dataUrl.indexOf('base64,') + 7)), type, Basic.extend({}, options, {\n\t\t\t\t\t\t\trequired_caps: {\n\t\t\t\t\t\t\t\tdisplay_media: true\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\truntime_order: 'flash,silverlight',\n\t\t\t\t\t\t\tcontainer: el\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tif (!(el = Dom.get(el))) {\n\t\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_NODE_TYPE_ERR);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!this.size) { // only preloaded image objects can be used as source\n\t\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.width > Image.MAX_RESIZE_WIDTH || this.height > Image.MAX_RESIZE_HEIGHT) {\n\t\t\t\t\t\tthrow new x.ImageError(x.ImageError.MAX_RESOLUTION_ERR);\n\t\t\t\t\t}\n\n\t\t\t\t\ttype = options.type || this.type || 'image/jpeg';\n\t\t\t\t\tquality = options.quality || 90;\n\t\t\t\t\tcrop = Basic.typeOf(options.crop) !== 'undefined' ? options.crop : false;\n\n\t\t\t\t\t// figure out dimensions for the thumb\n\t\t\t\t\tif (options.width) {\n\t\t\t\t\t\twidth = options.width;\n\t\t\t\t\t\theight = options.height || width;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// if container element has measurable dimensions, use them\n\t\t\t\t\t\tvar dimensions = Dom.getSize(el);\n\t\t\t\t\t\tif (dimensions.w && dimensions.h) { // both should be > 0\n\t\t\t\t\t\t\twidth = dimensions.w;\n\t\t\t\t\t\t\theight = dimensions.h;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\timgCopy = new Image();\n\n\t\t\t\t\timgCopy.bind(\"Resize\", function() {\n\t\t\t\t\t\tonResize.call(self);\n\t\t\t\t\t});\n\n\t\t\t\t\timgCopy.bind(\"Load\", function() {\n\t\t\t\t\t\timgCopy.downsize(width, height, crop, false);\n\t\t\t\t\t});\n\n\t\t\t\t\timgCopy.clone(this, false);\n\n\t\t\t\t\treturn imgCopy;\n\t\t\t\t} catch(ex) {\n\t\t\t\t\t// for now simply trigger error event\n\t\t\t\t\tthis.trigger('error', ex.code);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\tProperly destroys the image and frees resources in use. If any. Recommended way to dispose mOxie.Image object.\n\n\t\t\t@method destroy\n\t\t\t*/\n\t\t\tdestroy: function() {\n\t\t\t\tif (this.ruid) {\n\t\t\t\t\tthis.getRuntime().exec.call(this, 'Image', 'destroy');\n\t\t\t\t\tthis.disconnectRuntime();\n\t\t\t\t}\n\t\t\t\tthis.unbindAll();\n\t\t\t}\n\t\t});\n\n\n\t\tfunction _updateInfo(info) {\n\t\t\tif (!info) {\n\t\t\t\tinfo = this.getRuntime().exec.call(this, 'Image', 'getInfo');\n\t\t\t}\n\n\t\t\tthis.size = info.size;\n\t\t\tthis.width = info.width;\n\t\t\tthis.height = info.height;\n\t\t\tthis.type = info.type;\n\t\t\tthis.meta = info.meta;\n\n\t\t\t// update file name, only if empty\n\t\t\tif (this.name === '') {\n\t\t\t\tthis.name = info.name;\n\t\t\t}\n\t\t}\n\t\t\n\n\t\tfunction _load(src) {\n\t\t\tvar srcType = Basic.typeOf(src);\n\n\t\t\ttry {\n\t\t\t\t// if source is Image\n\t\t\t\tif (src instanceof Image) {\n\t\t\t\t\tif (!src.size) { // only preloaded image objects can be used as source\n\t\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t\t}\n\t\t\t\t\t_loadFromImage.apply(this, arguments);\n\t\t\t\t}\n\t\t\t\t// if source is o.Blob/o.File\n\t\t\t\telse if (src instanceof Blob) {\n\t\t\t\t\tif (!~Basic.inArray(src.type, ['image/jpeg', 'image/png'])) {\n\t\t\t\t\t\tthrow new x.ImageError(x.ImageError.WRONG_FORMAT);\n\t\t\t\t\t}\n\t\t\t\t\t_loadFromBlob.apply(this, arguments);\n\t\t\t\t}\n\t\t\t\t// if native blob/file\n\t\t\t\telse if (Basic.inArray(srcType, ['blob', 'file']) !== -1) {\n\t\t\t\t\t_load.call(this, new File(null, src), arguments[1]);\n\t\t\t\t}\n\t\t\t\t// if String\n\t\t\t\telse if (srcType === 'string') {\n\t\t\t\t\t// if dataUrl String\n\t\t\t\t\tif (/^data:[^;]*;base64,/.test(src)) {\n\t\t\t\t\t\t_load.call(this, new Blob(null, { data: src }), arguments[1]);\n\t\t\t\t\t}\n\t\t\t\t\t// else assume Url, either relative or absolute\n\t\t\t\t\telse {\n\t\t\t\t\t\t_loadFromUrl.apply(this, arguments);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// if source seems to be an img node\n\t\t\t\telse if (srcType === 'node' && src.nodeName.toLowerCase() === 'img') {\n\t\t\t\t\t_load.call(this, src.src, arguments[1]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.TYPE_MISMATCH_ERR);\n\t\t\t\t}\n\t\t\t} catch(ex) {\n\t\t\t\t// for now simply trigger error event\n\t\t\t\tthis.trigger('error', ex.code);\n\t\t\t}\n\t\t}\n\n\n\t\tfunction _loadFromImage(img, exact) {\n\t\t\tvar runtime = this.connectRuntime(img.ruid);\n\t\t\tthis.ruid = runtime.uid;\n\t\t\truntime.exec.call(this, 'Image', 'loadFromImage', img, (Basic.typeOf(exact) === 'undefined' ? true : exact));\n\t\t}\n\n\n\t\tfunction _loadFromBlob(blob, options) {\n\t\t\tvar self = this;\n\n\t\t\tself.name = blob.name || '';\n\n\t\t\tfunction exec(runtime) {\n\t\t\t\tself.ruid = runtime.uid;\n\t\t\t\truntime.exec.call(self, 'Image', 'loadFromBlob', blob);\n\t\t\t}\n\n\t\t\tif (blob.isDetached()) {\n\t\t\t\tthis.bind('RuntimeInit', function(e, runtime) {\n\t\t\t\t\texec(runtime);\n\t\t\t\t});\n\n\t\t\t\t// convert to object representation\n\t\t\t\tif (options && typeof(options.required_caps) === 'string') {\n\t\t\t\t\toptions.required_caps = Runtime.parseCaps(options.required_caps);\n\t\t\t\t}\n\n\t\t\t\tthis.connectRuntime(Basic.extend({\n\t\t\t\t\trequired_caps: {\n\t\t\t\t\t\taccess_image_binary: true,\n\t\t\t\t\t\tresize_image: true\n\t\t\t\t\t}\n\t\t\t\t}, options));\n\t\t\t} else {\n\t\t\t\texec(this.connectRuntime(blob.ruid));\n\t\t\t}\n\t\t}\n\n\n\t\tfunction _loadFromUrl(url, options) {\n\t\t\tvar self = this, xhr;\n\n\t\t\txhr = new XMLHttpRequest();\n\n\t\t\txhr.open('get', url);\n\t\t\txhr.responseType = 'blob';\n\n\t\t\txhr.onprogress = function(e) {\n\t\t\t\tself.trigger(e);\n\t\t\t};\n\n\t\t\txhr.onload = function() {\n\t\t\t\t_loadFromBlob.call(self, xhr.response, true);\n\t\t\t};\n\n\t\t\txhr.onerror = function(e) {\n\t\t\t\tself.trigger(e);\n\t\t\t};\n\n\t\t\txhr.onloadend = function() {\n\t\t\t\txhr.destroy();\n\t\t\t};\n\n\t\t\txhr.bind('RuntimeError', function(e, err) {\n\t\t\t\tself.trigger('RuntimeError', err);\n\t\t\t});\n\n\t\t\txhr.send(null, options);\n\t\t}\n\t}\n\n\t// virtual world will crash on you if image has a resolution higher than this:\n\tImage.MAX_RESIZE_WIDTH = 6500;\n\tImage.MAX_RESIZE_HEIGHT = 6500; \n\n\tImage.prototype = EventTarget.instance;\n\n\treturn Image;\n});\n\n// Included from: src/javascript/runtime/html5/Runtime.js\n\n/**\n * Runtime.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/*global File:true */\n\n/**\nDefines constructor for HTML5 runtime.\n\n@class moxie/runtime/html5/Runtime\n@private\n*/\ndefine(\"moxie/runtime/html5/Runtime\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/runtime/Runtime\",\n\t\"moxie/core/utils/Env\"\n], function(Basic, x, Runtime, Env) {\n\t\n\tvar type = \"html5\", extensions = {};\n\t\n\tfunction Html5Runtime(options) {\n\t\tvar I = this\n\t\t, Test = Runtime.capTest\n\t\t, True = Runtime.capTrue\n\t\t;\n\n\t\tvar caps = Basic.extend({\n\t\t\t\taccess_binary: Test(window.FileReader || window.File && window.File.getAsDataURL),\n\t\t\t\taccess_image_binary: function() {\n\t\t\t\t\treturn I.can('access_binary') && !!extensions.Image;\n\t\t\t\t},\n\t\t\t\tdisplay_media: Test(Env.can('create_canvas') || Env.can('use_data_uri_over32kb')),\n\t\t\t\tdo_cors: Test(window.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest()),\n\t\t\t\tdrag_and_drop: Test(function() {\n\t\t\t\t\t// this comes directly from Modernizr: http://www.modernizr.com/\n\t\t\t\t\tvar div = document.createElement('div');\n\t\t\t\t\t// IE has support for drag and drop since version 5, but doesn't support dropping files from desktop\n\t\t\t\t\treturn (('draggable' in div) || ('ondragstart' in div && 'ondrop' in div)) && (Env.browser !== 'IE' || Env.version > 9);\n\t\t\t\t}()),\n\t\t\t\tfilter_by_extension: Test(function() { // if you know how to feature-detect this, please suggest\n\t\t\t\t\treturn (Env.browser === 'Chrome' && Env.version >= 28) || (Env.browser === 'IE' && Env.version >= 10);\n\t\t\t\t}()),\n\t\t\t\treturn_response_headers: True,\n\t\t\t\treturn_response_type: function(responseType) {\n\t\t\t\t\tif (responseType === 'json' && !!window.JSON) { // we can fake this one even if it's not supported\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} \n\t\t\t\t\treturn Env.can('return_response_type', responseType);\n\t\t\t\t},\n\t\t\t\treturn_status_code: True,\n\t\t\t\treport_upload_progress: Test(window.XMLHttpRequest && new XMLHttpRequest().upload),\n\t\t\t\tresize_image: function() {\n\t\t\t\t\treturn I.can('access_binary') && Env.can('create_canvas');\n\t\t\t\t},\n\t\t\t\tselect_file: function() {\n\t\t\t\t\treturn Env.can('use_fileinput') && window.File;\n\t\t\t\t},\n\t\t\t\tselect_folder: function() {\n\t\t\t\t\treturn I.can('select_file') && Env.browser === 'Chrome' && Env.version >= 21;\n\t\t\t\t},\n\t\t\t\tselect_multiple: function() {\n\t\t\t\t\t// it is buggy on Safari Windows and iOS\n\t\t\t\t\treturn I.can('select_file') && \n\t\t\t\t\t\t!(Env.browser === 'Safari' && Env.os === 'Windows') && \n\t\t\t\t\t\t!(Env.os === 'iOS' && Env.verComp(Env.osVersion, \"7.0.4\", '<'));\n\t\t\t\t},\n\t\t\t\tsend_binary_string: Test(window.XMLHttpRequest && (new XMLHttpRequest().sendAsBinary || (window.Uint8Array && window.ArrayBuffer))),\n\t\t\t\tsend_custom_headers: Test(window.XMLHttpRequest),\n\t\t\t\tsend_multipart: function() {\n\t\t\t\t\treturn !!(window.XMLHttpRequest && new XMLHttpRequest().upload && window.FormData) || I.can('send_binary_string');\n\t\t\t\t},\n\t\t\t\tslice_blob: Test(window.File && (File.prototype.mozSlice || File.prototype.webkitSlice || File.prototype.slice)),\n\t\t\t\tstream_upload: function(){\n\t\t\t\t\treturn I.can('slice_blob') && I.can('send_multipart');\n\t\t\t\t},\n\t\t\t\tsummon_file_dialog: Test(function() { // yeah... some dirty sniffing here...\n\t\t\t\t\treturn (Env.browser === 'Firefox' && Env.version >= 4) ||\n\t\t\t\t\t\t(Env.browser === 'Opera' && Env.version >= 12) ||\n\t\t\t\t\t\t(Env.browser === 'IE' && Env.version >= 10) ||\n\t\t\t\t\t\t!!~Basic.inArray(Env.browser, ['Chrome', 'Safari']);\n\t\t\t\t}()),\n\t\t\t\tupload_filesize: True\n\t\t\t}, \n\t\t\targuments[2]\n\t\t);\n\n\t\tRuntime.call(this, options, (arguments[1] || type), caps);\n\n\n\t\tBasic.extend(this, {\n\n\t\t\tinit : function() {\n\t\t\t\tthis.trigger(\"Init\");\n\t\t\t},\n\n\t\t\tdestroy: (function(destroy) { // extend default destroy method\n\t\t\t\treturn function() {\n\t\t\t\t\tdestroy.call(I);\n\t\t\t\t\tdestroy = I = null;\n\t\t\t\t};\n\t\t\t}(this.destroy))\n\t\t});\n\n\t\tBasic.extend(this.getShim(), extensions);\n\t}\n\n\tRuntime.addConstructor(type, Html5Runtime);\n\n\treturn extensions;\n});\n\n// Included from: src/javascript/runtime/html5/file/Blob.js\n\n/**\n * Blob.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/file/Blob\n@private\n*/\ndefine(\"moxie/runtime/html5/file/Blob\", [\n\t\"moxie/runtime/html5/Runtime\",\n\t\"moxie/file/Blob\"\n], function(extensions, Blob) {\n\n\tfunction HTML5Blob() {\n\t\tfunction w3cBlobSlice(blob, start, end) {\n\t\t\tvar blobSlice;\n\n\t\t\tif (window.File.prototype.slice) {\n\t\t\t\ttry {\n\t\t\t\t\tblob.slice();\t// depricated version will throw WRONG_ARGUMENTS_ERR exception\n\t\t\t\t\treturn blob.slice(start, end);\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// depricated slice method\n\t\t\t\t\treturn blob.slice(start, end - start);\n\t\t\t\t}\n\t\t\t// slice method got prefixed: https://bugzilla.mozilla.org/show_bug.cgi?id=649672\n\t\t\t} else if ((blobSlice = window.File.prototype.webkitSlice || window.File.prototype.mozSlice)) {\n\t\t\t\treturn blobSlice.call(blob, start, end);\n\t\t\t} else {\n\t\t\t\treturn null; // or throw some exception\n\t\t\t}\n\t\t}\n\n\t\tthis.slice = function() {\n\t\t\treturn new Blob(this.getRuntime().uid, w3cBlobSlice.apply(this, arguments));\n\t\t};\n\t}\n\n\treturn (extensions.Blob = HTML5Blob);\n});\n\n// Included from: src/javascript/core/utils/Events.js\n\n/**\n * Events.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/core/utils/Events', [\n\t'moxie/core/utils/Basic'\n], function(Basic) {\n\tvar eventhash = {}, uid = 'moxie_' + Basic.guid();\n\t\n\t// IE W3C like event funcs\n\tfunction preventDefault() {\n\t\tthis.returnValue = false;\n\t}\n\n\tfunction stopPropagation() {\n\t\tthis.cancelBubble = true;\n\t}\n\n\t/**\n\tAdds an event handler to the specified object and store reference to the handler\n\tin objects internal Plupload registry (@see removeEvent).\n\t\n\t@method addEvent\n\t@for Utils\n\t@static\n\t@param {Object} obj DOM element like object to add handler to.\n\t@param {String} name Name to add event listener to.\n\t@param {Function} callback Function to call when event occurs.\n\t@param {String} [key] that might be used to add specifity to the event record.\n\t*/\n\tvar addEvent = function(obj, name, callback, key) {\n\t\tvar func, events;\n\t\t\t\t\t\n\t\tname = name.toLowerCase();\n\n\t\t// Add event listener\n\t\tif (obj.addEventListener) {\n\t\t\tfunc = callback;\n\t\t\t\n\t\t\tobj.addEventListener(name, func, false);\n\t\t} else if (obj.attachEvent) {\n\t\t\tfunc = function() {\n\t\t\t\tvar evt = window.event;\n\n\t\t\t\tif (!evt.target) {\n\t\t\t\t\tevt.target = evt.srcElement;\n\t\t\t\t}\n\n\t\t\t\tevt.preventDefault = preventDefault;\n\t\t\t\tevt.stopPropagation = stopPropagation;\n\n\t\t\t\tcallback(evt);\n\t\t\t};\n\n\t\t\tobj.attachEvent('on' + name, func);\n\t\t}\n\t\t\n\t\t// Log event handler to objects internal mOxie registry\n\t\tif (!obj[uid]) {\n\t\t\tobj[uid] = Basic.guid();\n\t\t}\n\t\t\n\t\tif (!eventhash.hasOwnProperty(obj[uid])) {\n\t\t\teventhash[obj[uid]] = {};\n\t\t}\n\t\t\n\t\tevents = eventhash[obj[uid]];\n\t\t\n\t\tif (!events.hasOwnProperty(name)) {\n\t\t\tevents[name] = [];\n\t\t}\n\t\t\t\t\n\t\tevents[name].push({\n\t\t\tfunc: func,\n\t\t\torig: callback, // store original callback for IE\n\t\t\tkey: key\n\t\t});\n\t};\n\t\n\t\n\t/**\n\tRemove event handler from the specified object. If third argument (callback)\n\tis not specified remove all events with the specified name.\n\t\n\t@method removeEvent\n\t@static\n\t@param {Object} obj DOM element to remove event listener(s) from.\n\t@param {String} name Name of event listener to remove.\n\t@param {Function|String} [callback] might be a callback or unique key to match.\n\t*/\n\tvar removeEvent = function(obj, name, callback) {\n\t\tvar type, undef;\n\t\t\n\t\tname = name.toLowerCase();\n\t\t\n\t\tif (obj[uid] && eventhash[obj[uid]] && eventhash[obj[uid]][name]) {\n\t\t\ttype = eventhash[obj[uid]][name];\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t\t\t\n\t\tfor (var i = type.length - 1; i >= 0; i--) {\n\t\t\t// undefined or not, key should match\n\t\t\tif (type[i].orig === callback || type[i].key === callback) {\n\t\t\t\tif (obj.removeEventListener) {\n\t\t\t\t\tobj.removeEventListener(name, type[i].func, false);\n\t\t\t\t} else if (obj.detachEvent) {\n\t\t\t\t\tobj.detachEvent('on'+name, type[i].func);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttype[i].orig = null;\n\t\t\t\ttype[i].func = null;\n\t\t\t\ttype.splice(i, 1);\n\t\t\t\t\n\t\t\t\t// If callback was passed we are done here, otherwise proceed\n\t\t\t\tif (callback !== undef) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// If event array got empty, remove it\n\t\tif (!type.length) {\n\t\t\tdelete eventhash[obj[uid]][name];\n\t\t}\n\t\t\n\t\t// If mOxie registry has become empty, remove it\n\t\tif (Basic.isEmptyObj(eventhash[obj[uid]])) {\n\t\t\tdelete eventhash[obj[uid]];\n\t\t\t\n\t\t\t// IE doesn't let you remove DOM object property with - delete\n\t\t\ttry {\n\t\t\t\tdelete obj[uid];\n\t\t\t} catch(e) {\n\t\t\t\tobj[uid] = undef;\n\t\t\t}\n\t\t}\n\t};\n\t\n\t\n\t/**\n\tRemove all kind of events from the specified object\n\t\n\t@method removeAllEvents\n\t@static\n\t@param {Object} obj DOM element to remove event listeners from.\n\t@param {String} [key] unique key to match, when removing events.\n\t*/\n\tvar removeAllEvents = function(obj, key) {\t\t\n\t\tif (!obj || !obj[uid]) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tBasic.each(eventhash[obj[uid]], function(events, name) {\n\t\t\tremoveEvent(obj, name, key);\n\t\t});\n\t};\n\n\treturn {\n\t\taddEvent: addEvent,\n\t\tremoveEvent: removeEvent,\n\t\tremoveAllEvents: removeAllEvents\n\t};\n});\n\n// Included from: src/javascript/runtime/html5/file/FileInput.js\n\n/**\n * FileInput.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/file/FileInput\n@private\n*/\ndefine(\"moxie/runtime/html5/file/FileInput\", [\n\t\"moxie/runtime/html5/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/utils/Events\",\n\t\"moxie/core/utils/Mime\",\n\t\"moxie/core/utils/Env\"\n], function(extensions, Basic, Dom, Events, Mime, Env) {\n\t\n\tfunction FileInput() {\n\t\tvar _files = [], _options;\n\n\t\tBasic.extend(this, {\n\t\t\tinit: function(options) {\n\t\t\t\tvar comp = this, I = comp.getRuntime(), input, shimContainer, mimes, browseButton, zIndex, top;\n\n\t\t\t\t_options = options;\n\t\t\t\t_files = [];\n\n\t\t\t\t// figure out accept string\n\t\t\t\tmimes = _options.accept.mimes || Mime.extList2mimes(_options.accept, I.can('filter_by_extension'));\n\n\t\t\t\tshimContainer = I.getShimContainer();\n\n\t\t\t\tshimContainer.innerHTML = '<input id=\"' + I.uid +'\" type=\"file\" style=\"font-size:999px;opacity:0;\"' +\n\t\t\t\t\t(_options.multiple && I.can('select_multiple') ? 'multiple' : '') + \n\t\t\t\t\t(_options.directory && I.can('select_folder') ? 'webkitdirectory directory' : '') + // Chrome 11+\n\t\t\t\t\t(mimes ? ' accept=\"' + mimes.join(',') + '\"' : '') + ' />';\n\n\t\t\t\tinput = Dom.get(I.uid);\n\n\t\t\t\t// prepare file input to be placed underneath the browse_button element\n\t\t\t\tBasic.extend(input.style, {\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\theight: '100%'\n\t\t\t\t});\n\n\n\t\t\t\tbrowseButton = Dom.get(_options.browse_button);\n\n\t\t\t\t// Route click event to the input[type=file] element for browsers that support such behavior\n\t\t\t\tif (I.can('summon_file_dialog')) {\n\t\t\t\t\tif (Dom.getStyle(browseButton, 'position') === 'static') {\n\t\t\t\t\t\tbrowseButton.style.position = 'relative';\n\t\t\t\t\t}\n\n\t\t\t\t\tzIndex = parseInt(Dom.getStyle(browseButton, 'z-index'), 10) || 1;\n\n\t\t\t\t\tbrowseButton.style.zIndex = zIndex;\n\t\t\t\t\tshimContainer.style.zIndex = zIndex - 1;\n\n\t\t\t\t\tEvents.addEvent(browseButton, 'click', function(e) {\n\t\t\t\t\t\tvar input = Dom.get(I.uid);\n\t\t\t\t\t\tif (input && !input.disabled) { // for some reason FF (up to 8.0.1 so far) lets to click disabled input[type=file]\n\t\t\t\t\t\t\tinput.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}, comp.uid);\n\t\t\t\t}\n\n\t\t\t\t/* Since we have to place input[type=file] on top of the browse_button for some browsers,\n\t\t\t\tbrowse_button loses interactivity, so we restore it here */\n\t\t\t\ttop = I.can('summon_file_dialog') ? browseButton : shimContainer;\n\n\t\t\t\tEvents.addEvent(top, 'mouseover', function() {\n\t\t\t\t\tcomp.trigger('mouseenter');\n\t\t\t\t}, comp.uid);\n\n\t\t\t\tEvents.addEvent(top, 'mouseout', function() {\n\t\t\t\t\tcomp.trigger('mouseleave');\n\t\t\t\t}, comp.uid);\n\n\t\t\t\tEvents.addEvent(top, 'mousedown', function() {\n\t\t\t\t\tcomp.trigger('mousedown');\n\t\t\t\t}, comp.uid);\n\n\t\t\t\tEvents.addEvent(Dom.get(_options.container), 'mouseup', function() {\n\t\t\t\t\tcomp.trigger('mouseup');\n\t\t\t\t}, comp.uid);\n\n\n\t\t\t\tinput.onchange = function onChange() { // there should be only one handler for this\n\t\t\t\t\t_files = [];\n\n\t\t\t\t\tif (_options.directory) {\n\t\t\t\t\t\t// folders are represented by dots, filter them out (Chrome 11+)\n\t\t\t\t\t\tBasic.each(this.files, function(file) {\n\t\t\t\t\t\t\tif (file.name !== \".\") { // if it doesn't looks like a folder\n\t\t\t\t\t\t\t\t_files.push(file);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_files = [].slice.call(this.files);\n\t\t\t\t\t}\n\n\t\t\t\t\t// clearing the value enables the user to select the same file again if they want to\n\t\t\t\t\tif (Env.browser !== 'IE' && Env.browser !== 'IEMobile') {\n\t\t\t\t\t\tthis.value = '';\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// in IE input[type=\"file\"] is read-only so the only way to reset it is to re-insert it\n\t\t\t\t\t\tvar clone = this.cloneNode(true);\n\t\t\t\t\t\tthis.parentNode.replaceChild(clone, this);\n\t\t\t\t\t\tclone.onchange = onChange;\n\t\t\t\t\t}\n\t\t\t\t\tcomp.trigger('change');\n\t\t\t\t};\n\n\t\t\t\t// ready event is perfectly asynchronous\n\t\t\t\tcomp.trigger({\n\t\t\t\t\ttype: 'ready',\n\t\t\t\t\tasync: true\n\t\t\t\t});\n\n\t\t\t\tshimContainer = null;\n\t\t\t},\n\n\t\t\tgetFiles: function() {\n\t\t\t\treturn _files;\n\t\t\t},\n\n\t\t\tdisable: function(state) {\n\t\t\t\tvar I = this.getRuntime(), input;\n\n\t\t\t\tif ((input = Dom.get(I.uid))) {\n\t\t\t\t\tinput.disabled = !!state;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\tvar I = this.getRuntime()\n\t\t\t\t, shim = I.getShim()\n\t\t\t\t, shimContainer = I.getShimContainer()\n\t\t\t\t;\n\t\t\t\t\n\t\t\t\tEvents.removeAllEvents(shimContainer, this.uid);\n\t\t\t\tEvents.removeAllEvents(_options && Dom.get(_options.container), this.uid);\n\t\t\t\tEvents.removeAllEvents(_options && Dom.get(_options.browse_button), this.uid);\n\t\t\t\t\n\t\t\t\tif (shimContainer) {\n\t\t\t\t\tshimContainer.innerHTML = '';\n\t\t\t\t}\n\n\t\t\t\tshim.removeInstance(this.uid);\n\n\t\t\t\t_files = _options = shimContainer = shim = null;\n\t\t\t}\n\t\t});\n\t}\n\n\treturn (extensions.FileInput = FileInput);\n});\n\n// Included from: src/javascript/runtime/html5/file/FileDrop.js\n\n/**\n * FileDrop.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/file/FileDrop\n@private\n*/\ndefine(\"moxie/runtime/html5/file/FileDrop\", [\n\t\"moxie/runtime/html5/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/utils/Events\",\n\t\"moxie/core/utils/Mime\"\n], function(extensions, Basic, Dom, Events, Mime) {\n\t\n\tfunction FileDrop() {\n\t\tvar _files = [], _allowedExts = [], _options;\n\n\t\tBasic.extend(this, {\n\t\t\tinit: function(options) {\n\t\t\t\tvar comp = this, dropZone;\n\n\t\t\t\t_options = options;\n\t\t\t\t_allowedExts = _extractExts(_options.accept);\n\t\t\t\tdropZone = _options.container;\n\n\t\t\t\tEvents.addEvent(dropZone, 'dragover', function(e) {\n\t\t\t\t\tif (!_hasFiles(e)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.dataTransfer.dropEffect = 'copy';\n\t\t\t\t}, comp.uid);\n\n\t\t\t\tEvents.addEvent(dropZone, 'drop', function(e) {\n\t\t\t\t\tif (!_hasFiles(e)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t_files = [];\n\n\t\t\t\t\t// Chrome 21+ accepts folders via Drag'n'Drop\n\t\t\t\t\tif (e.dataTransfer.items && e.dataTransfer.items[0].webkitGetAsEntry) {\n\t\t\t\t\t\t_readItems(e.dataTransfer.items, function() {\n\t\t\t\t\t\t\tcomp.trigger(\"drop\");\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tBasic.each(e.dataTransfer.files, function(file) {\n\t\t\t\t\t\t\tif (_isAcceptable(file)) {\n\t\t\t\t\t\t\t\t_files.push(file);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcomp.trigger(\"drop\");\n\t\t\t\t\t}\n\t\t\t\t}, comp.uid);\n\n\t\t\t\tEvents.addEvent(dropZone, 'dragenter', function(e) {\n\t\t\t\t\tcomp.trigger(\"dragenter\");\n\t\t\t\t}, comp.uid);\n\n\t\t\t\tEvents.addEvent(dropZone, 'dragleave', function(e) {\n\t\t\t\t\tcomp.trigger(\"dragleave\");\n\t\t\t\t}, comp.uid);\n\t\t\t},\n\n\t\t\tgetFiles: function() {\n\t\t\t\treturn _files;\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\tEvents.removeAllEvents(_options && Dom.get(_options.container), this.uid);\n\t\t\t\t_files = _allowedExts = _options = null;\n\t\t\t}\n\t\t});\n\n\n\t\tfunction _hasFiles(e) {\n\t\t\tif (!e.dataTransfer || !e.dataTransfer.types) { // e.dataTransfer.files is not available in Gecko during dragover\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar types = Basic.toArray(e.dataTransfer.types || []);\n\n\t\t\treturn Basic.inArray(\"Files\", types) !== -1 ||\n\t\t\t\tBasic.inArray(\"public.file-url\", types) !== -1 || // Safari < 5\n\t\t\t\tBasic.inArray(\"application/x-moz-file\", types) !== -1 // Gecko < 1.9.2 (< Firefox 3.6)\n\t\t\t\t;\n\t\t}\n\n\t\t\n\t\tfunction _extractExts(accept) {\n\t\t\tvar exts = [];\n\t\t\tfor (var i = 0; i < accept.length; i++) {\n\t\t\t\t[].push.apply(exts, accept[i].extensions.split(/\\s*,\\s*/));\n\t\t\t}\n\t\t\treturn Basic.inArray('*', exts) === -1 ? exts : [];\n\t\t}\n\n\n\t\tfunction _isAcceptable(file) {\n\t\t\tif (!_allowedExts.length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tvar ext = Mime.getFileExtension(file.name);\n\t\t\treturn !ext || Basic.inArray(ext, _allowedExts) !== -1;\n\t\t}\n\n\n\t\tfunction _readItems(items, cb) {\n\t\t\tvar entries = [];\n\t\t\tBasic.each(items, function(item) {\n\t\t\t\tvar entry = item.webkitGetAsEntry();\n\t\t\t\t// Address #998 (https://code.google.com/p/chromium/issues/detail?id=332579)\n\t\t\t\tif (entry) {\n\t\t\t\t\t// file() fails on OSX when the filename contains a special character (e.g. umlaut): see #61\n\t\t\t\t\tif (entry.isFile) {\n\t\t\t\t\t\tvar file = item.getAsFile();\n\t\t\t\t\t\tif (_isAcceptable(file)) {\n\t\t\t\t\t\t\t_files.push(file);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tentries.push(entry);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (entries.length) {\n\t\t\t\t_readEntries(entries, cb);\n\t\t\t} else {\n\t\t\t\tcb();\n\t\t\t}\n\t\t}\n\n\n\t\tfunction _readEntries(entries, cb) {\n\t\t\tvar queue = [];\n\t\t\tBasic.each(entries, function(entry) {\n\t\t\t\tqueue.push(function(cbcb) {\n\t\t\t\t\t_readEntry(entry, cbcb);\n\t\t\t\t});\n\t\t\t});\n\t\t\tBasic.inSeries(queue, function() {\n\t\t\t\tcb();\n\t\t\t});\n\t\t}\n\n\n\t\tfunction _readEntry(entry, cb) {\n\t\t\tif (entry.isFile) {\n\t\t\t\tentry.file(function(file) {\n\t\t\t\t\tif (_isAcceptable(file)) {\n\t\t\t\t\t\t_files.push(file);\n\t\t\t\t\t}\n\t\t\t\t\tcb();\n\t\t\t\t}, function() {\n\t\t\t\t\t// fire an error event maybe\n\t\t\t\t\tcb();\n\t\t\t\t});\n\t\t\t} else if (entry.isDirectory) {\n\t\t\t\t_readDirEntry(entry, cb);\n\t\t\t} else {\n\t\t\t\tcb(); // not file, not directory? what then?..\n\t\t\t}\n\t\t}\n\n\n\t\tfunction _readDirEntry(dirEntry, cb) {\n\t\t\tvar entries = [], dirReader = dirEntry.createReader();\n\n\t\t\t// keep quering recursively till no more entries\n\t\t\tfunction getEntries(cbcb) {\n\t\t\t\tdirReader.readEntries(function(moreEntries) {\n\t\t\t\t\tif (moreEntries.length) {\n\t\t\t\t\t\t[].push.apply(entries, moreEntries);\n\t\t\t\t\t\tgetEntries(cbcb);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcbcb();\n\t\t\t\t\t}\n\t\t\t\t}, cbcb);\n\t\t\t}\n\n\t\t\t// ...and you thought FileReader was crazy...\n\t\t\tgetEntries(function() {\n\t\t\t\t_readEntries(entries, cb);\n\t\t\t}); \n\t\t}\n\t}\n\n\treturn (extensions.FileDrop = FileDrop);\n});\n\n// Included from: src/javascript/runtime/html5/file/FileReader.js\n\n/**\n * FileReader.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/file/FileReader\n@private\n*/\ndefine(\"moxie/runtime/html5/file/FileReader\", [\n\t\"moxie/runtime/html5/Runtime\",\n\t\"moxie/core/utils/Encode\",\n\t\"moxie/core/utils/Basic\"\n], function(extensions, Encode, Basic) {\n\t\n\tfunction FileReader() {\n\t\tvar _fr, _convertToBinary = false;\n\n\t\tBasic.extend(this, {\n\n\t\t\tread: function(op, blob) {\n\t\t\t\tvar target = this;\n\n\t\t\t\t_fr = new window.FileReader();\n\n\t\t\t\t_fr.addEventListener('progress', function(e) {\n\t\t\t\t\ttarget.trigger(e);\n\t\t\t\t});\n\n\t\t\t\t_fr.addEventListener('load', function(e) {\n\t\t\t\t\ttarget.trigger(e);\n\t\t\t\t});\n\n\t\t\t\t_fr.addEventListener('error', function(e) {\n\t\t\t\t\ttarget.trigger(e, _fr.error);\n\t\t\t\t});\n\n\t\t\t\t_fr.addEventListener('loadend', function() {\n\t\t\t\t\t_fr = null;\n\t\t\t\t});\n\n\t\t\t\tif (Basic.typeOf(_fr[op]) === 'function') {\n\t\t\t\t\t_convertToBinary = false;\n\t\t\t\t\t_fr[op](blob.getSource());\n\t\t\t\t} else if (op === 'readAsBinaryString') { // readAsBinaryString is depricated in general and never existed in IE10+\n\t\t\t\t\t_convertToBinary = true;\n\t\t\t\t\t_fr.readAsDataURL(blob.getSource());\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tgetResult: function() {\n\t\t\t\treturn _fr && _fr.result ? (_convertToBinary ? _toBinary(_fr.result) : _fr.result) : null;\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif (_fr) {\n\t\t\t\t\t_fr.abort();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\t_fr = null;\n\t\t\t}\n\t\t});\n\n\t\tfunction _toBinary(str) {\n\t\t\treturn Encode.atob(str.substring(str.indexOf('base64,') + 7));\n\t\t}\n\t}\n\n\treturn (extensions.FileReader = FileReader);\n});\n\n// Included from: src/javascript/runtime/html5/xhr/XMLHttpRequest.js\n\n/**\n * XMLHttpRequest.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/*global ActiveXObject:true */\n\n/**\n@class moxie/runtime/html5/xhr/XMLHttpRequest\n@private\n*/\ndefine(\"moxie/runtime/html5/xhr/XMLHttpRequest\", [\n\t\"moxie/runtime/html5/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Mime\",\n\t\"moxie/core/utils/Url\",\n\t\"moxie/file/File\",\n\t\"moxie/file/Blob\",\n\t\"moxie/xhr/FormData\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/core/utils/Env\"\n], function(extensions, Basic, Mime, Url, File, Blob, FormData, x, Env) {\n\t\n\tfunction XMLHttpRequest() {\n\t\tvar self = this\n\t\t, _xhr\n\t\t, _filename\n\t\t;\n\n\t\tBasic.extend(this, {\n\t\t\tsend: function(meta, data) {\n\t\t\t\tvar target = this\n\t\t\t\t, isGecko2_5_6 = (Env.browser === 'Mozilla' && Env.version >= 4 && Env.version < 7)\n\t\t\t\t, isAndroidBrowser = Env.browser === 'Android Browser'\n\t\t\t\t, mustSendAsBinary = false\n\t\t\t\t;\n\n\t\t\t\t// extract file name\n\t\t\t\t_filename = meta.url.replace(/^.+?\\/([\\w\\-\\.]+)$/, '$1').toLowerCase();\n\n\t\t\t\t_xhr = _getNativeXHR();\n\t\t\t\t_xhr.open(meta.method, meta.url, meta.async, meta.user, meta.password);\n\n\n\t\t\t\t// prepare data to be sent\n\t\t\t\tif (data instanceof Blob) {\n\t\t\t\t\tif (data.isDetached()) {\n\t\t\t\t\t\tmustSendAsBinary = true;\n\t\t\t\t\t}\n\t\t\t\t\tdata = data.getSource();\n\t\t\t\t} else if (data instanceof FormData) {\n\n\t\t\t\t\tif (data.hasBlob()) {\n\t\t\t\t\t\tif (data.getBlob().isDetached()) {\n\t\t\t\t\t\t\tdata = _prepareMultipart.call(target, data); // _xhr must be instantiated and be in OPENED state\n\t\t\t\t\t\t\tmustSendAsBinary = true;\n\t\t\t\t\t\t} else if ((isGecko2_5_6 || isAndroidBrowser) && Basic.typeOf(data.getBlob().getSource()) === 'blob' && window.FileReader) {\n\t\t\t\t\t\t\t// Gecko 2/5/6 can't send blob in FormData: https://bugzilla.mozilla.org/show_bug.cgi?id=649150\n\t\t\t\t\t\t\t// Android browsers (default one and Dolphin) seem to have the same issue, see: #613\n\t\t\t\t\t\t\t_preloadAndSend.call(target, meta, data);\n\t\t\t\t\t\t\treturn; // _preloadAndSend will reinvoke send() with transmutated FormData =%D\n\t\t\t\t\t\t}\t\n\t\t\t\t\t}\n\n\t\t\t\t\t// transfer fields to real FormData\n\t\t\t\t\tif (data instanceof FormData) { // if still a FormData, e.g. not mangled by _prepareMultipart()\n\t\t\t\t\t\tvar fd = new window.FormData();\n\t\t\t\t\t\tdata.each(function(value, name) {\n\t\t\t\t\t\t\tif (value instanceof Blob) {\n\t\t\t\t\t\t\t\tfd.append(name, value.getSource());\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfd.append(name, value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdata = fd;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\t// if XHR L2\n\t\t\t\tif (_xhr.upload) {\n\t\t\t\t\tif (meta.withCredentials) {\n\t\t\t\t\t\t_xhr.withCredentials = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t_xhr.addEventListener('load', function(e) {\n\t\t\t\t\t\ttarget.trigger(e);\n\t\t\t\t\t});\n\n\t\t\t\t\t_xhr.addEventListener('error', function(e) {\n\t\t\t\t\t\ttarget.trigger(e);\n\t\t\t\t\t});\n\n\t\t\t\t\t// additionally listen to progress events\n\t\t\t\t\t_xhr.addEventListener('progress', function(e) {\n\t\t\t\t\t\ttarget.trigger(e);\n\t\t\t\t\t});\n\n\t\t\t\t\t_xhr.upload.addEventListener('progress', function(e) {\n\t\t\t\t\t\ttarget.trigger({\n\t\t\t\t\t\t\ttype: 'UploadProgress',\n\t\t\t\t\t\t\tloaded: e.loaded,\n\t\t\t\t\t\t\ttotal: e.total\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t// ... otherwise simulate XHR L2\n\t\t\t\t} else {\n\t\t\t\t\t_xhr.onreadystatechange = function onReadyStateChange() {\n\t\t\t\t\t\t\n\t\t\t\t\t\t// fake Level 2 events\n\t\t\t\t\t\tswitch (_xhr.readyState) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcase 1: // XMLHttpRequest.OPENED\n\t\t\t\t\t\t\t\t// readystatechanged is fired twice for OPENED state (in IE and Mozilla) - neu\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// looks like HEADERS_RECEIVED (state 2) is not reported in Opera (or it's old versions) - neu\n\t\t\t\t\t\t\tcase 2: // XMLHttpRequest.HEADERS_RECEIVED\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcase 3: // XMLHttpRequest.LOADING \n\t\t\t\t\t\t\t\t// try to fire progress event for not XHR L2\n\t\t\t\t\t\t\t\tvar total, loaded;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tif (Url.hasSameOrigin(meta.url)) { // Content-Length not accessible for cross-domain on some browsers\n\t\t\t\t\t\t\t\t\t\ttotal = _xhr.getResponseHeader('Content-Length') || 0; // old Safari throws an exception here\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (_xhr.responseText) { // responseText was introduced in IE7\n\t\t\t\t\t\t\t\t\t\tloaded = _xhr.responseText.length;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} catch(ex) {\n\t\t\t\t\t\t\t\t\ttotal = loaded = 0;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\ttarget.trigger({\n\t\t\t\t\t\t\t\t\ttype: 'progress',\n\t\t\t\t\t\t\t\t\tlengthComputable: !!total,\n\t\t\t\t\t\t\t\t\ttotal: parseInt(total, 10),\n\t\t\t\t\t\t\t\t\tloaded: loaded\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcase 4: // XMLHttpRequest.DONE\n\t\t\t\t\t\t\t\t// release readystatechange handler (mostly for IE)\n\t\t\t\t\t\t\t\t_xhr.onreadystatechange = function() {};\n\n\t\t\t\t\t\t\t\t// usually status 0 is returned when server is unreachable, but FF also fails to status 0 for 408 timeout\n\t\t\t\t\t\t\t\tif (_xhr.status === 0) {\n\t\t\t\t\t\t\t\t\ttarget.trigger('error');\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\ttarget.trigger('load');\n\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\n\t\t\t\t// set request headers\n\t\t\t\tif (!Basic.isEmptyObj(meta.headers)) {\n\t\t\t\t\tBasic.each(meta.headers, function(value, header) {\n\t\t\t\t\t\t_xhr.setRequestHeader(header, value);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// request response type\n\t\t\t\tif (\"\" !== meta.responseType && 'responseType' in _xhr) {\n\t\t\t\t\tif ('json' === meta.responseType && !Env.can('return_response_type', 'json')) { // we can fake this one\n\t\t\t\t\t\t_xhr.responseType = 'text';\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_xhr.responseType = meta.responseType;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// send ...\n\t\t\t\tif (!mustSendAsBinary) {\n\t\t\t\t\t_xhr.send(data);\n\t\t\t\t} else {\n\t\t\t\t\tif (_xhr.sendAsBinary) { // Gecko\n\t\t\t\t\t\t_xhr.sendAsBinary(data);\n\t\t\t\t\t} else { // other browsers having support for typed arrays\n\t\t\t\t\t\t(function() {\n\t\t\t\t\t\t\t// mimic Gecko's sendAsBinary\n\t\t\t\t\t\t\tvar ui8a = new Uint8Array(data.length);\n\t\t\t\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\t\t\t\tui8a[i] = (data.charCodeAt(i) & 0xff);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t_xhr.send(ui8a.buffer);\n\t\t\t\t\t\t}());\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttarget.trigger('loadstart');\n\t\t\t},\n\n\t\t\tgetStatus: function() {\n\t\t\t\t// according to W3C spec it should return 0 for readyState < 3, but instead it throws an exception\n\t\t\t\ttry {\n\t\t\t\t\tif (_xhr) {\n\t\t\t\t\t\treturn _xhr.status;\n\t\t\t\t\t}\n\t\t\t\t} catch(ex) {}\n\t\t\t\treturn 0;\n\t\t\t},\n\n\t\t\tgetResponse: function(responseType) {\n\t\t\t\tvar I = this.getRuntime();\n\n\t\t\t\ttry {\n\t\t\t\t\tswitch (responseType) {\n\t\t\t\t\t\tcase 'blob':\n\t\t\t\t\t\t\tvar file = new File(I.uid, _xhr.response);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// try to extract file name from content-disposition if possible (might be - not, if CORS for example)\t\n\t\t\t\t\t\t\tvar disposition = _xhr.getResponseHeader('Content-Disposition');\n\t\t\t\t\t\t\tif (disposition) {\n\t\t\t\t\t\t\t\t// extract filename from response header if available\n\t\t\t\t\t\t\t\tvar match = disposition.match(/filename=([\\'\\\"'])([^\\1]+)\\1/);\n\t\t\t\t\t\t\t\tif (match) {\n\t\t\t\t\t\t\t\t\t_filename = match[2];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfile.name = _filename;\n\n\t\t\t\t\t\t\t// pre-webkit Opera doesn't set type property on the blob response\n\t\t\t\t\t\t\tif (!file.type) {\n\t\t\t\t\t\t\t\tfile.type = Mime.getFileMime(_filename);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn file;\n\n\t\t\t\t\t\tcase 'json':\n\t\t\t\t\t\t\tif (!Env.can('return_response_type', 'json')) {\n\t\t\t\t\t\t\t\treturn _xhr.status === 200 && !!window.JSON ? JSON.parse(_xhr.responseText) : null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn _xhr.response;\n\n\t\t\t\t\t\tcase 'document':\n\t\t\t\t\t\t\treturn _getDocument(_xhr);\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn _xhr.responseText !== '' ? _xhr.responseText : null; // against the specs, but for consistency across the runtimes\n\t\t\t\t\t}\n\t\t\t\t} catch(ex) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\t\t\t\t\n\t\t\t},\n\n\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\ttry {\n\t\t\t\t\treturn _xhr.getAllResponseHeaders();\n\t\t\t\t} catch(ex) {}\n\t\t\t\treturn '';\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif (_xhr) {\n\t\t\t\t\t_xhr.abort();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\tself = _filename = null;\n\t\t\t}\n\t\t});\n\n\n\t\t// here we go... ugly fix for ugly bug\n\t\tfunction _preloadAndSend(meta, data) {\n\t\t\tvar target = this, blob, fr;\n\t\t\t\t\n\t\t\t// get original blob\n\t\t\tblob = data.getBlob().getSource();\n\t\t\t\n\t\t\t// preload blob in memory to be sent as binary string\n\t\t\tfr = new window.FileReader();\n\t\t\tfr.onload = function() {\n\t\t\t\t// overwrite original blob\n\t\t\t\tdata.append(data.getBlobName(), new Blob(null, {\n\t\t\t\t\ttype: blob.type,\n\t\t\t\t\tdata: fr.result\n\t\t\t\t}));\n\t\t\t\t// invoke send operation again\n\t\t\t\tself.send.call(target, meta, data);\n\t\t\t};\n\t\t\tfr.readAsBinaryString(blob);\n\t\t}\n\n\t\t\n\t\tfunction _getNativeXHR() {\n\t\t\tif (window.XMLHttpRequest && !(Env.browser === 'IE' && Env.version < 8)) { // IE7 has native XHR but it's buggy\n\t\t\t\treturn new window.XMLHttpRequest();\n\t\t\t} else {\n\t\t\t\treturn (function() {\n\t\t\t\t\tvar progIDs = ['Msxml2.XMLHTTP.6.0', 'Microsoft.XMLHTTP']; // if 6.0 available, use it, otherwise failback to default 3.0\n\t\t\t\t\tfor (var i = 0; i < progIDs.length; i++) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\treturn new ActiveXObject(progIDs[i]);\n\t\t\t\t\t\t} catch (ex) {}\n\t\t\t\t\t}\n\t\t\t\t})();\n\t\t\t}\n\t\t}\n\t\t\n\t\t// @credits Sergey Ilinsky\t(http://www.ilinsky.com/)\n\t\tfunction _getDocument(xhr) {\n\t\t\tvar rXML = xhr.responseXML;\n\t\t\tvar rText = xhr.responseText;\n\t\t\t\n\t\t\t// Try parsing responseText (@see: http://www.ilinsky.com/articles/XMLHttpRequest/#bugs-ie-responseXML-content-type)\n\t\t\tif (Env.browser === 'IE' && rText && rXML && !rXML.documentElement && /[^\\/]+\\/[^\\+]+\\+xml/.test(xhr.getResponseHeader(\"Content-Type\"))) {\n\t\t\t\trXML = new window.ActiveXObject(\"Microsoft.XMLDOM\");\n\t\t\t\trXML.async = false;\n\t\t\t\trXML.validateOnParse = false;\n\t\t\t\trXML.loadXML(rText);\n\t\t\t}\n\t\n\t\t\t// Check if there is no error in document\n\t\t\tif (rXML) {\n\t\t\t\tif ((Env.browser === 'IE' && rXML.parseError !== 0) || !rXML.documentElement || rXML.documentElement.tagName === \"parsererror\") {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn rXML;\n\t\t}\n\n\n\t\tfunction _prepareMultipart(fd) {\n\t\t\tvar boundary = '----moxieboundary' + new Date().getTime()\n\t\t\t, dashdash = '--'\n\t\t\t, crlf = '\\r\\n'\n\t\t\t, multipart = ''\n\t\t\t, I = this.getRuntime()\n\t\t\t;\n\n\t\t\tif (!I.can('send_binary_string')) {\n\t\t\t\tthrow new x.RuntimeError(x.RuntimeError.NOT_SUPPORTED_ERR);\n\t\t\t}\n\n\t\t\t_xhr.setRequestHeader('Content-Type', 'multipart/form-data; boundary=' + boundary);\n\n\t\t\t// append multipart parameters\n\t\t\tfd.each(function(value, name) {\n\t\t\t\t// Firefox 3.6 failed to convert multibyte characters to UTF-8 in sendAsBinary(), \n\t\t\t\t// so we try it here ourselves with: unescape(encodeURIComponent(value))\n\t\t\t\tif (value instanceof Blob) {\n\t\t\t\t\t// Build RFC2388 blob\n\t\t\t\t\tmultipart += dashdash + boundary + crlf +\n\t\t\t\t\t\t'Content-Disposition: form-data; name=\"' + name + '\"; filename=\"' + unescape(encodeURIComponent(value.name || 'blob')) + '\"' + crlf +\n\t\t\t\t\t\t'Content-Type: ' + (value.type || 'application/octet-stream') + crlf + crlf +\n\t\t\t\t\t\tvalue.getSource() + crlf;\n\t\t\t\t} else {\n\t\t\t\t\tmultipart += dashdash + boundary + crlf +\n\t\t\t\t\t\t'Content-Disposition: form-data; name=\"' + name + '\"' + crlf + crlf +\n\t\t\t\t\t\tunescape(encodeURIComponent(value)) + crlf;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tmultipart += dashdash + boundary + dashdash + crlf;\n\n\t\t\treturn multipart;\n\t\t}\n\t}\n\n\treturn (extensions.XMLHttpRequest = XMLHttpRequest);\n});\n\n// Included from: src/javascript/runtime/html5/utils/BinaryReader.js\n\n/**\n * BinaryReader.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/utils/BinaryReader\n@private\n*/\ndefine(\"moxie/runtime/html5/utils/BinaryReader\", [], function() {\n\treturn function() {\n\t\tvar II = false, bin;\n\n\t\t// Private functions\n\t\tfunction read(idx, size) {\n\t\t\tvar mv = II ? 0 : -8 * (size - 1), sum = 0, i;\n\n\t\t\tfor (i = 0; i < size; i++) {\n\t\t\t\tsum |= (bin.charCodeAt(idx + i) << Math.abs(mv + i*8));\n\t\t\t}\n\n\t\t\treturn sum;\n\t\t}\n\n\t\tfunction putstr(segment, idx, length) {\n\t\t\tlength = arguments.length === 3 ? length : bin.length - idx - 1;\n\t\t\tbin = bin.substr(0, idx) + segment + bin.substr(length + idx);\n\t\t}\n\n\t\tfunction write(idx, num, size) {\n\t\t\tvar str = '', mv = II ? 0 : -8 * (size - 1), i;\n\n\t\t\tfor (i = 0; i < size; i++) {\n\t\t\t\tstr += String.fromCharCode((num >> Math.abs(mv + i*8)) & 255);\n\t\t\t}\n\n\t\t\tputstr(str, idx, size);\n\t\t}\n\n\t\t// Public functions\n\t\treturn {\n\t\t\tII: function(order) {\n\t\t\t\tif (order === undefined) {\n\t\t\t\t\treturn II;\n\t\t\t\t} else {\n\t\t\t\t\tII = order;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tinit: function(binData) {\n\t\t\t\tII = false;\n\t\t\t\tbin = binData;\n\t\t\t},\n\n\t\t\tSEGMENT: function(idx, length, segment) {\n\t\t\t\tswitch (arguments.length) {\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\treturn bin.substr(idx, bin.length - idx - 1);\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\treturn bin.substr(idx, length);\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tputstr(segment, idx, length);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault: return bin;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tBYTE: function(idx) {\n\t\t\t\treturn read(idx, 1);\n\t\t\t},\n\n\t\t\tSHORT: function(idx) {\n\t\t\t\treturn read(idx, 2);\n\t\t\t},\n\n\t\t\tLONG: function(idx, num) {\n\t\t\t\tif (num === undefined) {\n\t\t\t\t\treturn read(idx, 4);\n\t\t\t\t} else {\n\t\t\t\t\twrite(idx, num, 4);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tSLONG: function(idx) { // 2's complement notation\n\t\t\t\tvar num = read(idx, 4);\n\n\t\t\t\treturn (num > 2147483647 ? num - 4294967296 : num);\n\t\t\t},\n\n\t\t\tSTRING: function(idx, size) {\n\t\t\t\tvar str = '';\n\n\t\t\t\tfor (size += idx; idx < size; idx++) {\n\t\t\t\t\tstr += String.fromCharCode(read(idx, 1));\n\t\t\t\t}\n\n\t\t\t\treturn str;\n\t\t\t}\n\t\t};\n\t};\n});\n\n// Included from: src/javascript/runtime/html5/image/JPEGHeaders.js\n\n/**\n * JPEGHeaders.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n \n/**\n@class moxie/runtime/html5/image/JPEGHeaders\n@private\n*/\ndefine(\"moxie/runtime/html5/image/JPEGHeaders\", [\n\t\"moxie/runtime/html5/utils/BinaryReader\"\n], function(BinaryReader) {\n\t\n\treturn function JPEGHeaders(data) {\n\t\tvar headers = [], read, idx, marker, length = 0;\n\n\t\tread = new BinaryReader();\n\t\tread.init(data);\n\n\t\t// Check if data is jpeg\n\t\tif (read.SHORT(0) !== 0xFFD8) {\n\t\t\treturn;\n\t\t}\n\n\t\tidx = 2;\n\n\t\twhile (idx <= data.length) {\n\t\t\tmarker = read.SHORT(idx);\n\n\t\t\t// omit RST (restart) markers\n\t\t\tif (marker >= 0xFFD0 && marker <= 0xFFD7) {\n\t\t\t\tidx += 2;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// no headers allowed after SOS marker\n\t\t\tif (marker === 0xFFDA || marker === 0xFFD9) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tlength = read.SHORT(idx + 2) + 2;\n\n\t\t\t// APPn marker detected\n\t\t\tif (marker >= 0xFFE1 && marker <= 0xFFEF) {\n\t\t\t\theaders.push({\n\t\t\t\t\thex: marker,\n\t\t\t\t\tname: 'APP' + (marker & 0x000F),\n\t\t\t\t\tstart: idx,\n\t\t\t\t\tlength: length,\n\t\t\t\t\tsegment: read.SEGMENT(idx, length)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tidx += length;\n\t\t}\n\n\t\tread.init(null); // free memory\n\n\t\treturn {\n\t\t\theaders: headers,\n\n\t\t\trestore: function(data) {\n\t\t\t\tvar max, i;\n\n\t\t\t\tread.init(data);\n\n\t\t\t\tidx = read.SHORT(2) == 0xFFE0 ? 4 + read.SHORT(4) : 2;\n\n\t\t\t\tfor (i = 0, max = headers.length; i < max; i++) {\n\t\t\t\t\tread.SEGMENT(idx, 0, headers[i].segment);\n\t\t\t\t\tidx += headers[i].length;\n\t\t\t\t}\n\n\t\t\t\tdata = read.SEGMENT();\n\t\t\t\tread.init(null);\n\t\t\t\treturn data;\n\t\t\t},\n\n\t\t\tstrip: function(data) {\n\t\t\t\tvar headers, jpegHeaders, i;\n\n\t\t\t\tjpegHeaders = new JPEGHeaders(data);\n\t\t\t\theaders = jpegHeaders.headers;\n\t\t\t\tjpegHeaders.purge();\n\n\t\t\t\tread.init(data);\n\n\t\t\t\ti = headers.length;\n\t\t\t\twhile (i--) {\n\t\t\t\t\tread.SEGMENT(headers[i].start, headers[i].length, '');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdata = read.SEGMENT();\n\t\t\t\tread.init(null);\n\t\t\t\treturn data;\n\t\t\t},\n\n\t\t\tget: function(name) {\n\t\t\t\tvar array = [];\n\n\t\t\t\tfor (var i = 0, max = headers.length; i < max; i++) {\n\t\t\t\t\tif (headers[i].name === name.toUpperCase()) {\n\t\t\t\t\t\tarray.push(headers[i].segment);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn array;\n\t\t\t},\n\n\t\t\tset: function(name, segment) {\n\t\t\t\tvar array = [], i, ii, max;\n\n\t\t\t\tif (typeof(segment) === 'string') {\n\t\t\t\t\tarray.push(segment);\n\t\t\t\t} else {\n\t\t\t\t\tarray = segment;\n\t\t\t\t}\n\n\t\t\t\tfor (i = ii = 0, max = headers.length; i < max; i++) {\n\t\t\t\t\tif (headers[i].name === name.toUpperCase()) {\n\t\t\t\t\t\theaders[i].segment = array[ii];\n\t\t\t\t\t\theaders[i].length = array[ii].length;\n\t\t\t\t\t\tii++;\n\t\t\t\t\t}\n\t\t\t\t\tif (ii >= array.length) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpurge: function() {\n\t\t\t\theaders = [];\n\t\t\t\tread.init(null);\n\t\t\t\tread = null;\n\t\t\t}\n\t\t};\n\t};\n});\n\n// Included from: src/javascript/runtime/html5/image/ExifParser.js\n\n/**\n * ExifParser.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/image/ExifParser\n@private\n*/\ndefine(\"moxie/runtime/html5/image/ExifParser\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/html5/utils/BinaryReader\"\n], function(Basic, BinaryReader) {\n\t\n\treturn function ExifParser() {\n\t\t// Private ExifParser fields\n\t\tvar data, tags, Tiff, offsets = {}, tagDescs;\n\n\t\tdata = new BinaryReader();\n\n\t\ttags = {\n\t\t\ttiff : {\n\t\t\t\t/*\n\t\t\t\tThe image orientation viewed in terms of rows and columns.\n\n\t\t\t\t1 = The 0th row is at the visual top of the image, and the 0th column is the visual left-hand side.\n\t\t\t\t2 = The 0th row is at the visual top of the image, and the 0th column is the visual right-hand side.\n\t\t\t\t3 = The 0th row is at the visual bottom of the image, and the 0th column is the visual right-hand side.\n\t\t\t\t4 = The 0th row is at the visual bottom of the image, and the 0th column is the visual left-hand side.\n\t\t\t\t5 = The 0th row is the visual left-hand side of the image, and the 0th column is the visual top.\n\t\t\t\t6 = The 0th row is the visual right-hand side of the image, and the 0th column is the visual top.\n\t\t\t\t7 = The 0th row is the visual right-hand side of the image, and the 0th column is the visual bottom.\n\t\t\t\t8 = The 0th row is the visual left-hand side of the image, and the 0th column is the visual bottom.\n\t\t\t\t*/\n\t\t\t\t0x0112: 'Orientation',\n\t\t\t\t0x010E: 'ImageDescription',\n\t\t\t\t0x010F: 'Make',\n\t\t\t\t0x0110: 'Model',\n\t\t\t\t0x0131: 'Software',\n\t\t\t\t0x8769: 'ExifIFDPointer',\n\t\t\t\t0x8825:\t'GPSInfoIFDPointer'\n\t\t\t},\n\t\t\texif : {\n\t\t\t\t0x9000: 'ExifVersion',\n\t\t\t\t0xA001: 'ColorSpace',\n\t\t\t\t0xA002: 'PixelXDimension',\n\t\t\t\t0xA003: 'PixelYDimension',\n\t\t\t\t0x9003: 'DateTimeOriginal',\n\t\t\t\t0x829A: 'ExposureTime',\n\t\t\t\t0x829D: 'FNumber',\n\t\t\t\t0x8827: 'ISOSpeedRatings',\n\t\t\t\t0x9201: 'ShutterSpeedValue',\n\t\t\t\t0x9202: 'ApertureValue'\t,\n\t\t\t\t0x9207: 'MeteringMode',\n\t\t\t\t0x9208: 'LightSource',\n\t\t\t\t0x9209: 'Flash',\n\t\t\t\t0x920A: 'FocalLength',\n\t\t\t\t0xA402: 'ExposureMode',\n\t\t\t\t0xA403: 'WhiteBalance',\n\t\t\t\t0xA406: 'SceneCaptureType',\n\t\t\t\t0xA404: 'DigitalZoomRatio',\n\t\t\t\t0xA408: 'Contrast',\n\t\t\t\t0xA409: 'Saturation',\n\t\t\t\t0xA40A: 'Sharpness'\n\t\t\t},\n\t\t\tgps : {\n\t\t\t\t0x0000: 'GPSVersionID',\n\t\t\t\t0x0001: 'GPSLatitudeRef',\n\t\t\t\t0x0002: 'GPSLatitude',\n\t\t\t\t0x0003: 'GPSLongitudeRef',\n\t\t\t\t0x0004: 'GPSLongitude'\n\t\t\t}\n\t\t};\n\n\t\ttagDescs = {\n\t\t\t'ColorSpace': {\n\t\t\t\t1: 'sRGB',\n\t\t\t\t0: 'Uncalibrated'\n\t\t\t},\n\n\t\t\t'MeteringMode': {\n\t\t\t\t0: 'Unknown',\n\t\t\t\t1: 'Average',\n\t\t\t\t2: 'CenterWeightedAverage',\n\t\t\t\t3: 'Spot',\n\t\t\t\t4: 'MultiSpot',\n\t\t\t\t5: 'Pattern',\n\t\t\t\t6: 'Partial',\n\t\t\t\t255: 'Other'\n\t\t\t},\n\n\t\t\t'LightSource': {\n\t\t\t\t1: 'Daylight',\n\t\t\t\t2: 'Fliorescent',\n\t\t\t\t3: 'Tungsten',\n\t\t\t\t4: 'Flash',\n\t\t\t\t9: 'Fine weather',\n\t\t\t\t10: 'Cloudy weather',\n\t\t\t\t11: 'Shade',\n\t\t\t\t12: 'Daylight fluorescent (D 5700 - 7100K)',\n\t\t\t\t13: 'Day white fluorescent (N 4600 -5400K)',\n\t\t\t\t14: 'Cool white fluorescent (W 3900 - 4500K)',\n\t\t\t\t15: 'White fluorescent (WW 3200 - 3700K)',\n\t\t\t\t17: 'Standard light A',\n\t\t\t\t18: 'Standard light B',\n\t\t\t\t19: 'Standard light C',\n\t\t\t\t20: 'D55',\n\t\t\t\t21: 'D65',\n\t\t\t\t22: 'D75',\n\t\t\t\t23: 'D50',\n\t\t\t\t24: 'ISO studio tungsten',\n\t\t\t\t255: 'Other'\n\t\t\t},\n\n\t\t\t'Flash': {\n\t\t\t\t0x0000: 'Flash did not fire.',\n\t\t\t\t0x0001: 'Flash fired.',\n\t\t\t\t0x0005: 'Strobe return light not detected.',\n\t\t\t\t0x0007: 'Strobe return light detected.',\n\t\t\t\t0x0009: 'Flash fired, compulsory flash mode',\n\t\t\t\t0x000D: 'Flash fired, compulsory flash mode, return light not detected',\n\t\t\t\t0x000F: 'Flash fired, compulsory flash mode, return light detected',\n\t\t\t\t0x0010: 'Flash did not fire, compulsory flash mode',\n\t\t\t\t0x0018: 'Flash did not fire, auto mode',\n\t\t\t\t0x0019: 'Flash fired, auto mode',\n\t\t\t\t0x001D: 'Flash fired, auto mode, return light not detected',\n\t\t\t\t0x001F: 'Flash fired, auto mode, return light detected',\n\t\t\t\t0x0020: 'No flash function',\n\t\t\t\t0x0041: 'Flash fired, red-eye reduction mode',\n\t\t\t\t0x0045: 'Flash fired, red-eye reduction mode, return light not detected',\n\t\t\t\t0x0047: 'Flash fired, red-eye reduction mode, return light detected',\n\t\t\t\t0x0049: 'Flash fired, compulsory flash mode, red-eye reduction mode',\n\t\t\t\t0x004D: 'Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected',\n\t\t\t\t0x004F: 'Flash fired, compulsory flash mode, red-eye reduction mode, return light detected',\n\t\t\t\t0x0059: 'Flash fired, auto mode, red-eye reduction mode',\n\t\t\t\t0x005D: 'Flash fired, auto mode, return light not detected, red-eye reduction mode',\n\t\t\t\t0x005F: 'Flash fired, auto mode, return light detected, red-eye reduction mode'\n\t\t\t},\n\n\t\t\t'ExposureMode': {\n\t\t\t\t0: 'Auto exposure',\n\t\t\t\t1: 'Manual exposure',\n\t\t\t\t2: 'Auto bracket'\n\t\t\t},\n\n\t\t\t'WhiteBalance': {\n\t\t\t\t0: 'Auto white balance',\n\t\t\t\t1: 'Manual white balance'\n\t\t\t},\n\n\t\t\t'SceneCaptureType': {\n\t\t\t\t0: 'Standard',\n\t\t\t\t1: 'Landscape',\n\t\t\t\t2: 'Portrait',\n\t\t\t\t3: 'Night scene'\n\t\t\t},\n\n\t\t\t'Contrast': {\n\t\t\t\t0: 'Normal',\n\t\t\t\t1: 'Soft',\n\t\t\t\t2: 'Hard'\n\t\t\t},\n\n\t\t\t'Saturation': {\n\t\t\t\t0: 'Normal',\n\t\t\t\t1: 'Low saturation',\n\t\t\t\t2: 'High saturation'\n\t\t\t},\n\n\t\t\t'Sharpness': {\n\t\t\t\t0: 'Normal',\n\t\t\t\t1: 'Soft',\n\t\t\t\t2: 'Hard'\n\t\t\t},\n\n\t\t\t// GPS related\n\t\t\t'GPSLatitudeRef': {\n\t\t\t\tN: 'North latitude',\n\t\t\t\tS: 'South latitude'\n\t\t\t},\n\n\t\t\t'GPSLongitudeRef': {\n\t\t\t\tE: 'East longitude',\n\t\t\t\tW: 'West longitude'\n\t\t\t}\n\t\t};\n\n\t\tfunction extractTags(IFD_offset, tags2extract) {\n\t\t\tvar length = data.SHORT(IFD_offset), i, ii,\n\t\t\t\ttag, type, count, tagOffset, offset, value, values = [], hash = {};\n\n\t\t\tfor (i = 0; i < length; i++) {\n\t\t\t\t// Set binary reader pointer to beginning of the next tag\n\t\t\t\toffset = tagOffset = IFD_offset + 12 * i + 2;\n\n\t\t\t\ttag = tags2extract[data.SHORT(offset)];\n\n\t\t\t\tif (tag === undefined) {\n\t\t\t\t\tcontinue; // Not the tag we requested\n\t\t\t\t}\n\n\t\t\t\ttype = data.SHORT(offset+=2);\n\t\t\t\tcount = data.LONG(offset+=2);\n\n\t\t\t\toffset += 4;\n\t\t\t\tvalues = [];\n\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase 1: // BYTE\n\t\t\t\t\tcase 7: // UNDEFINED\n\t\t\t\t\t\tif (count > 4) {\n\t\t\t\t\t\t\toffset = data.LONG(offset) + offsets.tiffHeader;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (ii = 0; ii < count; ii++) {\n\t\t\t\t\t\t\tvalues[ii] = data.BYTE(offset + ii);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 2: // STRING\n\t\t\t\t\t\tif (count > 4) {\n\t\t\t\t\t\t\toffset = data.LONG(offset) + offsets.tiffHeader;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\thash[tag] = data.STRING(offset, count - 1);\n\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tcase 3: // SHORT\n\t\t\t\t\t\tif (count > 2) {\n\t\t\t\t\t\t\toffset = data.LONG(offset) + offsets.tiffHeader;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (ii = 0; ii < count; ii++) {\n\t\t\t\t\t\t\tvalues[ii] = data.SHORT(offset + ii*2);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 4: // LONG\n\t\t\t\t\t\tif (count > 1) {\n\t\t\t\t\t\t\toffset = data.LONG(offset) + offsets.tiffHeader;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (ii = 0; ii < count; ii++) {\n\t\t\t\t\t\t\tvalues[ii] = data.LONG(offset + ii*4);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 5: // RATIONAL\n\t\t\t\t\t\toffset = data.LONG(offset) + offsets.tiffHeader;\n\n\t\t\t\t\t\tfor (ii = 0; ii < count; ii++) {\n\t\t\t\t\t\t\tvalues[ii] = data.LONG(offset + ii*4) / data.LONG(offset + ii*4 + 4);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 9: // SLONG\n\t\t\t\t\t\toffset = data.LONG(offset) + offsets.tiffHeader;\n\n\t\t\t\t\t\tfor (ii = 0; ii < count; ii++) {\n\t\t\t\t\t\t\tvalues[ii] = data.SLONG(offset + ii*4);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 10: // SRATIONAL\n\t\t\t\t\t\toffset = data.LONG(offset) + offsets.tiffHeader;\n\n\t\t\t\t\t\tfor (ii = 0; ii < count; ii++) {\n\t\t\t\t\t\t\tvalues[ii] = data.SLONG(offset + ii*4) / data.SLONG(offset + ii*4 + 4);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvalue = (count == 1 ? values[0] : values);\n\n\t\t\t\tif (tagDescs.hasOwnProperty(tag) && typeof value != 'object') {\n\t\t\t\t\thash[tag] = tagDescs[tag][value];\n\t\t\t\t} else {\n\t\t\t\t\thash[tag] = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn hash;\n\t\t}\n\n\t\tfunction getIFDOffsets() {\n\t\t\tvar idx = offsets.tiffHeader;\n\n\t\t\t// Set read order of multi-byte data\n\t\t\tdata.II(data.SHORT(idx) == 0x4949);\n\n\t\t\t// Check if always present bytes are indeed present\n\t\t\tif (data.SHORT(idx+=2) !== 0x002A) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\toffsets.IFD0 = offsets.tiffHeader + data.LONG(idx += 2);\n\t\t\tTiff = extractTags(offsets.IFD0, tags.tiff);\n\n\t\t\tif ('ExifIFDPointer' in Tiff) {\n\t\t\t\toffsets.exifIFD = offsets.tiffHeader + Tiff.ExifIFDPointer;\n\t\t\t\tdelete Tiff.ExifIFDPointer;\n\t\t\t}\n\n\t\t\tif ('GPSInfoIFDPointer' in Tiff) {\n\t\t\t\toffsets.gpsIFD = offsets.tiffHeader + Tiff.GPSInfoIFDPointer;\n\t\t\t\tdelete Tiff.GPSInfoIFDPointer;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\t// At the moment only setting of simple (LONG) values, that do not require offset recalculation, is supported\n\t\tfunction setTag(ifd, tag, value) {\n\t\t\tvar offset, length, tagOffset, valueOffset = 0;\n\n\t\t\t// If tag name passed translate into hex key\n\t\t\tif (typeof(tag) === 'string') {\n\t\t\t\tvar tmpTags = tags[ifd.toLowerCase()];\n\t\t\t\tfor (var hex in tmpTags) {\n\t\t\t\t\tif (tmpTags[hex] === tag) {\n\t\t\t\t\t\ttag = hex;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\toffset = offsets[ifd.toLowerCase() + 'IFD'];\n\t\t\tlength = data.SHORT(offset);\n\n\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\ttagOffset = offset + 12 * i + 2;\n\n\t\t\t\tif (data.SHORT(tagOffset) == tag) {\n\t\t\t\t\tvalueOffset = tagOffset + 8;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!valueOffset) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tdata.LONG(valueOffset, value);\n\t\t\treturn true;\n\t\t}\n\n\n\t\t// Public functions\n\t\treturn {\n\t\t\tinit: function(segment) {\n\t\t\t\t// Reset internal data\n\t\t\t\toffsets = {\n\t\t\t\t\ttiffHeader: 10\n\t\t\t\t};\n\n\t\t\t\tif (segment === undefined || !segment.length) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tdata.init(segment);\n\n\t\t\t\t// Check if that's APP1 and that it has EXIF\n\t\t\t\tif (data.SHORT(0) === 0xFFE1 && data.STRING(4, 5).toUpperCase() === \"EXIF\\0\") {\n\t\t\t\t\treturn getIFDOffsets();\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tTIFF: function() {\n\t\t\t\treturn Tiff;\n\t\t\t},\n\n\t\t\tEXIF: function() {\n\t\t\t\tvar Exif;\n\n\t\t\t\t// Populate EXIF hash\n\t\t\t\tExif = extractTags(offsets.exifIFD, tags.exif);\n\n\t\t\t\t// Fix formatting of some tags\n\t\t\t\tif (Exif.ExifVersion && Basic.typeOf(Exif.ExifVersion) === 'array') {\n\t\t\t\t\tfor (var i = 0, exifVersion = ''; i < Exif.ExifVersion.length; i++) {\n\t\t\t\t\t\texifVersion += String.fromCharCode(Exif.ExifVersion[i]);\n\t\t\t\t\t}\n\t\t\t\t\tExif.ExifVersion = exifVersion;\n\t\t\t\t}\n\n\t\t\t\treturn Exif;\n\t\t\t},\n\n\t\t\tGPS: function() {\n\t\t\t\tvar GPS;\n\n\t\t\t\tGPS = extractTags(offsets.gpsIFD, tags.gps);\n\n\t\t\t\t// iOS devices (and probably some others) do not put in GPSVersionID tag (why?..)\n\t\t\t\tif (GPS.GPSVersionID && Basic.typeOf(GPS.GPSVersionID) === 'array') {\n\t\t\t\t\tGPS.GPSVersionID = GPS.GPSVersionID.join('.');\n\t\t\t\t}\n\n\t\t\t\treturn GPS;\n\t\t\t},\n\n\t\t\tsetExif: function(tag, value) {\n\t\t\t\t// Right now only setting of width/height is possible\n\t\t\t\tif (tag !== 'PixelXDimension' && tag !== 'PixelYDimension') {return false;}\n\n\t\t\t\treturn setTag('exif', tag, value);\n\t\t\t},\n\n\n\t\t\tgetBinary: function() {\n\t\t\t\treturn data.SEGMENT();\n\t\t\t},\n\n\t\t\tpurge: function() {\n\t\t\t\tdata.init(null);\n\t\t\t\tdata = Tiff = null;\n\t\t\t\toffsets = {};\n\t\t\t}\n\t\t};\n\t};\n});\n\n// Included from: src/javascript/runtime/html5/image/JPEG.js\n\n/**\n * JPEG.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/image/JPEG\n@private\n*/\ndefine(\"moxie/runtime/html5/image/JPEG\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/runtime/html5/image/JPEGHeaders\",\n\t\"moxie/runtime/html5/utils/BinaryReader\",\n\t\"moxie/runtime/html5/image/ExifParser\"\n], function(Basic, x, JPEGHeaders, BinaryReader, ExifParser) {\n\t\n\tfunction JPEG(binstr) {\n\t\tvar _binstr, _br, _hm, _ep, _info, hasExif;\n\n\t\tfunction _getDimensions() {\n\t\t\tvar idx = 0, marker, length;\n\n\t\t\t// examine all through the end, since some images might have very large APP segments\n\t\t\twhile (idx <= _binstr.length) {\n\t\t\t\tmarker = _br.SHORT(idx += 2);\n\n\t\t\t\tif (marker >= 0xFFC0 && marker <= 0xFFC3) { // SOFn\n\t\t\t\t\tidx += 5; // marker (2 bytes) + length (2 bytes) + Sample precision (1 byte)\n\t\t\t\t\treturn {\n\t\t\t\t\t\theight: _br.SHORT(idx),\n\t\t\t\t\t\twidth: _br.SHORT(idx += 2)\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tlength = _br.SHORT(idx += 2);\n\t\t\t\tidx += length - 2;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\t_binstr = binstr;\n\n\t\t_br = new BinaryReader();\n\t\t_br.init(_binstr);\n\n\t\t// check if it is jpeg\n\t\tif (_br.SHORT(0) !== 0xFFD8) {\n\t\t\tthrow new x.ImageError(x.ImageError.WRONG_FORMAT);\n\t\t}\n\n\t\t// backup headers\n\t\t_hm = new JPEGHeaders(binstr);\n\n\t\t// extract exif info\n\t\t_ep = new ExifParser();\n\t\thasExif = !!_ep.init(_hm.get('app1')[0]);\n\n\t\t// get dimensions\n\t\t_info = _getDimensions.call(this);\n\n\t\tBasic.extend(this, {\n\t\t\ttype: 'image/jpeg',\n\n\t\t\tsize: _binstr.length,\n\n\t\t\twidth: _info && _info.width || 0,\n\n\t\t\theight: _info && _info.height || 0,\n\n\t\t\tsetExif: function(tag, value) {\n\t\t\t\tif (!hasExif) {\n\t\t\t\t\treturn false; // or throw an exception\n\t\t\t\t}\n\n\t\t\t\tif (Basic.typeOf(tag) === 'object') {\n\t\t\t\t\tBasic.each(tag, function(value, tag) {\n\t\t\t\t\t\t_ep.setExif(tag, value);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t_ep.setExif(tag, value);\n\t\t\t\t}\n\n\t\t\t\t// update internal headers\n\t\t\t\t_hm.set('app1', _ep.getBinary());\n\t\t\t},\n\n\t\t\twriteHeaders: function() {\n\t\t\t\tif (!arguments.length) {\n\t\t\t\t\t// if no arguments passed, update headers internally\n\t\t\t\t\treturn (_binstr = _hm.restore(_binstr));\n\t\t\t\t}\n\t\t\t\treturn _hm.restore(arguments[0]);\n\t\t\t},\n\n\t\t\tstripHeaders: function(binstr) {\n\t\t\t\treturn _hm.strip(binstr);\n\t\t\t},\n\n\t\t\tpurge: function() {\n\t\t\t\t_purge.call(this);\n\t\t\t}\n\t\t});\n\n\t\tif (hasExif) {\n\t\t\tthis.meta = {\n\t\t\t\ttiff: _ep.TIFF(),\n\t\t\t\texif: _ep.EXIF(),\n\t\t\t\tgps: _ep.GPS()\n\t\t\t};\n\t\t}\n\n\t\tfunction _purge() {\n\t\t\tif (!_ep || !_hm || !_br) { \n\t\t\t\treturn; // ignore any repeating purge requests\n\t\t\t}\n\t\t\t_ep.purge();\n\t\t\t_hm.purge();\n\t\t\t_br.init(null);\n\t\t\t_binstr = _info = _hm = _ep = _br = null;\n\t\t}\n\t}\n\n\treturn JPEG;\n});\n\n// Included from: src/javascript/runtime/html5/image/PNG.js\n\n/**\n * PNG.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/image/PNG\n@private\n*/\ndefine(\"moxie/runtime/html5/image/PNG\", [\n\t\"moxie/core/Exceptions\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/html5/utils/BinaryReader\"\n], function(x, Basic, BinaryReader) {\n\t\n\tfunction PNG(binstr) {\n\t\tvar _binstr, _br, _hm, _ep, _info;\n\n\t\t_binstr = binstr;\n\n\t\t_br = new BinaryReader();\n\t\t_br.init(_binstr);\n\n\t\t// check if it's png\n\t\t(function() {\n\t\t\tvar idx = 0, i = 0\n\t\t\t, signature = [0x8950, 0x4E47, 0x0D0A, 0x1A0A]\n\t\t\t;\n\n\t\t\tfor (i = 0; i < signature.length; i++, idx += 2) {\n\t\t\t\tif (signature[i] != _br.SHORT(idx)) {\n\t\t\t\t\tthrow new x.ImageError(x.ImageError.WRONG_FORMAT);\n\t\t\t\t}\n\t\t\t}\n\t\t}());\n\n\t\tfunction _getDimensions() {\n\t\t\tvar chunk, idx;\n\n\t\t\tchunk = _getChunkAt.call(this, 8);\n\n\t\t\tif (chunk.type == 'IHDR') {\n\t\t\t\tidx = chunk.start;\n\t\t\t\treturn {\n\t\t\t\t\twidth: _br.LONG(idx),\n\t\t\t\t\theight: _br.LONG(idx += 4)\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tfunction _purge() {\n\t\t\tif (!_br) {\n\t\t\t\treturn; // ignore any repeating purge requests\n\t\t\t}\n\t\t\t_br.init(null);\n\t\t\t_binstr = _info = _hm = _ep = _br = null;\n\t\t}\n\n\t\t_info = _getDimensions.call(this);\n\n\t\tBasic.extend(this, {\n\t\t\ttype: 'image/png',\n\n\t\t\tsize: _binstr.length,\n\n\t\t\twidth: _info.width,\n\n\t\t\theight: _info.height,\n\n\t\t\tpurge: function() {\n\t\t\t\t_purge.call(this);\n\t\t\t}\n\t\t});\n\n\t\t// for PNG we can safely trigger purge automatically, as we do not keep any data for later\n\t\t_purge.call(this);\n\n\t\tfunction _getChunkAt(idx) {\n\t\t\tvar length, type, start, CRC;\n\n\t\t\tlength = _br.LONG(idx);\n\t\t\ttype = _br.STRING(idx += 4, 4);\n\t\t\tstart = idx += 4;\n\t\t\tCRC = _br.LONG(idx + length);\n\n\t\t\treturn {\n\t\t\t\tlength: length,\n\t\t\t\ttype: type,\n\t\t\t\tstart: start,\n\t\t\t\tCRC: CRC\n\t\t\t};\n\t\t}\n\t}\n\n\treturn PNG;\n});\n\n// Included from: src/javascript/runtime/html5/image/ImageInfo.js\n\n/**\n * ImageInfo.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/image/ImageInfo\n@private\n*/\ndefine(\"moxie/runtime/html5/image/ImageInfo\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/runtime/html5/image/JPEG\",\n\t\"moxie/runtime/html5/image/PNG\"\n], function(Basic, x, JPEG, PNG) {\n\t/**\n\tOptional image investigation tool for HTML5 runtime. Provides the following features:\n\t- ability to distinguish image type (JPEG or PNG) by signature\n\t- ability to extract image width/height directly from it's internals, without preloading in memory (fast)\n\t- ability to extract APP headers from JPEGs (Exif, GPS, etc)\n\t- ability to replace width/height tags in extracted JPEG headers\n\t- ability to restore APP headers, that were for example stripped during image manipulation\n\n\t@class ImageInfo\n\t@constructor\n\t@param {String} binstr Image source as binary string\n\t*/\n\treturn function(binstr) {\n\t\tvar _cs = [JPEG, PNG], _img;\n\n\t\t// figure out the format, throw: ImageError.WRONG_FORMAT if not supported\n\t\t_img = (function() {\n\t\t\tfor (var i = 0; i < _cs.length; i++) {\n\t\t\t\ttry {\n\t\t\t\t\treturn new _cs[i](binstr);\n\t\t\t\t} catch (ex) {\n\t\t\t\t\t// console.info(ex);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthrow new x.ImageError(x.ImageError.WRONG_FORMAT);\n\t\t}());\n\n\t\tBasic.extend(this, {\n\t\t\t/**\n\t\t\tImage Mime Type extracted from it's depths\n\n\t\t\t@property type\n\t\t\t@type {String}\n\t\t\t@default ''\n\t\t\t*/\n\t\t\ttype: '',\n\n\t\t\t/**\n\t\t\tImage size in bytes\n\n\t\t\t@property size\n\t\t\t@type {Number}\n\t\t\t@default 0\n\t\t\t*/\n\t\t\tsize: 0,\n\n\t\t\t/**\n\t\t\tImage width extracted from image source\n\n\t\t\t@property width\n\t\t\t@type {Number}\n\t\t\t@default 0\n\t\t\t*/\n\t\t\twidth: 0,\n\n\t\t\t/**\n\t\t\tImage height extracted from image source\n\n\t\t\t@property height\n\t\t\t@type {Number}\n\t\t\t@default 0\n\t\t\t*/\n\t\t\theight: 0,\n\n\t\t\t/**\n\t\t\tSets Exif tag. Currently applicable only for width and height tags. Obviously works only with JPEGs.\n\n\t\t\t@method setExif\n\t\t\t@param {String} tag Tag to set\n\t\t\t@param {Mixed} value Value to assign to the tag\n\t\t\t*/\n\t\t\tsetExif: function() {},\n\n\t\t\t/**\n\t\t\tRestores headers to the source.\n\n\t\t\t@method writeHeaders\n\t\t\t@param {String} data Image source as binary string\n\t\t\t@return {String} Updated binary string\n\t\t\t*/\n\t\t\twriteHeaders: function(data) {\n\t\t\t\treturn data;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tStrip all headers from the source.\n\n\t\t\t@method stripHeaders\n\t\t\t@param {String} data Image source as binary string\n\t\t\t@return {String} Updated binary string\n\t\t\t*/\n\t\t\tstripHeaders: function(data) {\n\t\t\t\treturn data;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tDispose resources.\n\n\t\t\t@method purge\n\t\t\t*/\n\t\t\tpurge: function() {}\n\t\t});\n\n\t\tBasic.extend(this, _img);\n\n\t\tthis.purge = function() {\n\t\t\t_img.purge();\n\t\t\t_img = null;\n\t\t};\n\t};\n});\n\n// Included from: src/javascript/runtime/html5/image/MegaPixel.js\n\n/**\n(The MIT License)\n\nCopyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>;\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n'Software'), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n/**\n * Mega pixel image rendering library for iOS6 Safari\n *\n * Fixes iOS6 Safari's image file rendering issue for large size image (over mega-pixel),\n * which causes unexpected subsampling when drawing it in canvas.\n * By using this library, you can safely render the image with proper stretching.\n *\n * Copyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>\n * Released under the MIT license\n */\n\n/**\n@class moxie/runtime/html5/image/MegaPixel\n@private\n*/\ndefine(\"moxie/runtime/html5/image/MegaPixel\", [], function() {\n\n\t/**\n\t * Rendering image element (with resizing) into the canvas element\n\t */\n\tfunction renderImageToCanvas(img, canvas, options) {\n\t\tvar iw = img.naturalWidth, ih = img.naturalHeight;\n\t\tvar width = options.width, height = options.height;\n\t\tvar x = options.x || 0, y = options.y || 0;\n\t\tvar ctx = canvas.getContext('2d');\n\t\tif (detectSubsampling(img)) {\n\t\t\tiw /= 2;\n\t\t\tih /= 2;\n\t\t}\n\t\tvar d = 1024; // size of tiling canvas\n\t\tvar tmpCanvas = document.createElement('canvas');\n\t\ttmpCanvas.width = tmpCanvas.height = d;\n\t\tvar tmpCtx = tmpCanvas.getContext('2d');\n\t\tvar vertSquashRatio = detectVerticalSquash(img, iw, ih);\n\t\tvar sy = 0;\n\t\twhile (sy < ih) {\n\t\t\tvar sh = sy + d > ih ? ih - sy : d;\n\t\t\tvar sx = 0;\n\t\t\twhile (sx < iw) {\n\t\t\t\tvar sw = sx + d > iw ? iw - sx : d;\n\t\t\t\ttmpCtx.clearRect(0, 0, d, d);\n\t\t\t\ttmpCtx.drawImage(img, -sx, -sy);\n\t\t\t\tvar dx = (sx * width / iw + x) << 0;\n\t\t\t\tvar dw = Math.ceil(sw * width / iw);\n\t\t\t\tvar dy = (sy * height / ih / vertSquashRatio + y) << 0;\n\t\t\t\tvar dh = Math.ceil(sh * height / ih / vertSquashRatio);\n\t\t\t\tctx.drawImage(tmpCanvas, 0, 0, sw, sh, dx, dy, dw, dh);\n\t\t\t\tsx += d;\n\t\t\t}\n\t\t\tsy += d;\n\t\t}\n\t\ttmpCanvas = tmpCtx = null;\n\t}\n\n\t/**\n\t * Detect subsampling in loaded image.\n\t * In iOS, larger images than 2M pixels may be subsampled in rendering.\n\t */\n\tfunction detectSubsampling(img) {\n\t\tvar iw = img.naturalWidth, ih = img.naturalHeight;\n\t\tif (iw * ih > 1024 * 1024) { // subsampling may happen over megapixel image\n\t\t\tvar canvas = document.createElement('canvas');\n\t\t\tcanvas.width = canvas.height = 1;\n\t\t\tvar ctx = canvas.getContext('2d');\n\t\t\tctx.drawImage(img, -iw + 1, 0);\n\t\t\t// subsampled image becomes half smaller in rendering size.\n\t\t\t// check alpha channel value to confirm image is covering edge pixel or not.\n\t\t\t// if alpha value is 0 image is not covering, hence subsampled.\n\t\t\treturn ctx.getImageData(0, 0, 1, 1).data[3] === 0;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\n\t/**\n\t * Detecting vertical squash in loaded image.\n\t * Fixes a bug which squash image vertically while drawing into canvas for some images.\n\t */\n\tfunction detectVerticalSquash(img, iw, ih) {\n\t\tvar canvas = document.createElement('canvas');\n\t\tcanvas.width = 1;\n\t\tcanvas.height = ih;\n\t\tvar ctx = canvas.getContext('2d');\n\t\tctx.drawImage(img, 0, 0);\n\t\tvar data = ctx.getImageData(0, 0, 1, ih).data;\n\t\t// search image edge pixel position in case it is squashed vertically.\n\t\tvar sy = 0;\n\t\tvar ey = ih;\n\t\tvar py = ih;\n\t\twhile (py > sy) {\n\t\t\tvar alpha = data[(py - 1) * 4 + 3];\n\t\t\tif (alpha === 0) {\n\t\t\t\tey = py;\n\t\t\t} else {\n\t\t\tsy = py;\n\t\t\t}\n\t\t\tpy = (ey + sy) >> 1;\n\t\t}\n\t\tcanvas = null;\n\t\tvar ratio = (py / ih);\n\t\treturn (ratio === 0) ? 1 : ratio;\n\t}\n\n\treturn {\n\t\tisSubsampled: detectSubsampling,\n\t\trenderTo: renderImageToCanvas\n\t};\n});\n\n// Included from: src/javascript/runtime/html5/image/Image.js\n\n/**\n * Image.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/image/Image\n@private\n*/\ndefine(\"moxie/runtime/html5/image/Image\", [\n\t\"moxie/runtime/html5/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/core/utils/Encode\",\n\t\"moxie/file/File\",\n\t\"moxie/runtime/html5/image/ImageInfo\",\n\t\"moxie/runtime/html5/image/MegaPixel\",\n\t\"moxie/core/utils/Mime\",\n\t\"moxie/core/utils/Env\"\n], function(extensions, Basic, x, Encode, File, ImageInfo, MegaPixel, Mime, Env) {\n\t\n\tfunction HTML5Image() {\n\t\tvar me = this\n\t\t, _img, _imgInfo, _canvas, _binStr, _blob\n\t\t, _modified = false // is set true whenever image is modified\n\t\t, _preserveHeaders = true\n\t\t;\n\n\t\tBasic.extend(this, {\n\t\t\tloadFromBlob: function(blob) {\n\t\t\t\tvar comp = this, I = comp.getRuntime()\n\t\t\t\t, asBinary = arguments.length > 1 ? arguments[1] : true\n\t\t\t\t;\n\n\t\t\t\tif (!I.can('access_binary')) {\n\t\t\t\t\tthrow new x.RuntimeError(x.RuntimeError.NOT_SUPPORTED_ERR);\n\t\t\t\t}\n\n\t\t\t\t_blob = blob;\n\n\t\t\t\tif (blob.isDetached()) {\n\t\t\t\t\t_binStr = blob.getSource();\n\t\t\t\t\t_preload.call(this, _binStr);\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\t_readAsDataUrl.call(this, blob.getSource(), function(dataUrl) {\n\t\t\t\t\t\tif (asBinary) {\n\t\t\t\t\t\t\t_binStr = _toBinary(dataUrl);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_preload.call(comp, dataUrl);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tloadFromImage: function(img, exact) {\n\t\t\t\tthis.meta = img.meta;\n\n\t\t\t\t_blob = new File(null, {\n\t\t\t\t\tname: img.name,\n\t\t\t\t\tsize: img.size,\n\t\t\t\t\ttype: img.type\n\t\t\t\t});\n\n\t\t\t\t_preload.call(this, exact ? (_binStr = img.getAsBinaryString()) : img.getAsDataURL());\n\t\t\t},\n\n\t\t\tgetInfo: function() {\n\t\t\t\tvar I = this.getRuntime(), info;\n\n\t\t\t\tif (!_imgInfo && _binStr && I.can('access_image_binary')) {\n\t\t\t\t\t_imgInfo = new ImageInfo(_binStr);\n\t\t\t\t}\n\n\t\t\t\tinfo = {\n\t\t\t\t\twidth: _getImg().width || 0,\n\t\t\t\t\theight: _getImg().height || 0,\n\t\t\t\t\ttype: _blob.type || Mime.getFileMime(_blob.name),\n\t\t\t\t\tsize: _binStr && _binStr.length || _blob.size || 0,\n\t\t\t\t\tname: _blob.name || '',\n\t\t\t\t\tmeta: _imgInfo && _imgInfo.meta || this.meta || {}\n\t\t\t\t};\n\n\t\t\t\treturn info;\n\t\t\t},\n\n\t\t\tdownsize: function() {\n\t\t\t\t_downsize.apply(this, arguments);\n\t\t\t},\n\n\t\t\tgetAsCanvas: function() {\n\t\t\t\tif (_canvas) {\n\t\t\t\t\t_canvas.id = this.uid + '_canvas';\n\t\t\t\t}\n\t\t\t\treturn _canvas;\n\t\t\t},\n\n\t\t\tgetAsBlob: function(type, quality) {\n\t\t\t\tif (type !== this.type) {\n\t\t\t\t\t// if different mime type requested prepare image for conversion\n\t\t\t\t\t_downsize.call(this, this.width, this.height, false);\n\t\t\t\t}\n\t\t\t\treturn new File(null, {\n\t\t\t\t\tname: _blob.name || '',\n\t\t\t\t\ttype: type,\n\t\t\t\t\tdata: me.getAsBinaryString.call(this, type, quality)\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tgetAsDataURL: function(type) {\n\t\t\t\tvar quality = arguments[1] || 90;\n\n\t\t\t\t// if image has not been modified, return the source right away\n\t\t\t\tif (!_modified) {\n\t\t\t\t\treturn _img.src;\n\t\t\t\t}\n\n\t\t\t\tif ('image/jpeg' !== type) {\n\t\t\t\t\treturn _canvas.toDataURL('image/png');\n\t\t\t\t} else {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// older Geckos used to result in an exception on quality argument\n\t\t\t\t\t\treturn _canvas.toDataURL('image/jpeg', quality/100);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\treturn _canvas.toDataURL('image/jpeg');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tgetAsBinaryString: function(type, quality) {\n\t\t\t\t// if image has not been modified, return the source right away\n\t\t\t\tif (!_modified) {\n\t\t\t\t\t// if image was not loaded from binary string\n\t\t\t\t\tif (!_binStr) {\n\t\t\t\t\t\t_binStr = _toBinary(me.getAsDataURL(type, quality));\n\t\t\t\t\t}\n\t\t\t\t\treturn _binStr;\n\t\t\t\t}\n\n\t\t\t\tif ('image/jpeg' !== type) {\n\t\t\t\t\t_binStr = _toBinary(me.getAsDataURL(type, quality));\n\t\t\t\t} else {\n\t\t\t\t\tvar dataUrl;\n\n\t\t\t\t\t// if jpeg\n\t\t\t\t\tif (!quality) {\n\t\t\t\t\t\tquality = 90;\n\t\t\t\t\t}\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// older Geckos used to result in an exception on quality argument\n\t\t\t\t\t\tdataUrl = _canvas.toDataURL('image/jpeg', quality/100);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\tdataUrl = _canvas.toDataURL('image/jpeg');\n\t\t\t\t\t}\n\n\t\t\t\t\t_binStr = _toBinary(dataUrl);\n\n\t\t\t\t\tif (_imgInfo) {\n\t\t\t\t\t\t_binStr = _imgInfo.stripHeaders(_binStr);\n\n\t\t\t\t\t\tif (_preserveHeaders) {\n\t\t\t\t\t\t\t// update dimensions info in exif\n\t\t\t\t\t\t\tif (_imgInfo.meta && _imgInfo.meta.exif) {\n\t\t\t\t\t\t\t\t_imgInfo.setExif({\n\t\t\t\t\t\t\t\t\tPixelXDimension: this.width,\n\t\t\t\t\t\t\t\t\tPixelYDimension: this.height\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// re-inject the headers\n\t\t\t\t\t\t\t_binStr = _imgInfo.writeHeaders(_binStr);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// will be re-created from fresh on next getInfo call\n\t\t\t\t\t\t_imgInfo.purge();\n\t\t\t\t\t\t_imgInfo = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t_modified = false;\n\n\t\t\t\treturn _binStr;\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\tme = null;\n\t\t\t\t_purge.call(this);\n\t\t\t\tthis.getRuntime().getShim().removeInstance(this.uid);\n\t\t\t}\n\t\t});\n\n\n\t\tfunction _getImg() {\n\t\t\tif (!_canvas && !_img) {\n\t\t\t\tthrow new x.ImageError(x.DOMException.INVALID_STATE_ERR);\n\t\t\t}\n\t\t\treturn _canvas || _img;\n\t\t}\n\n\n\t\tfunction _toBinary(str) {\n\t\t\treturn Encode.atob(str.substring(str.indexOf('base64,') + 7));\n\t\t}\n\n\n\t\tfunction _toDataUrl(str, type) {\n\t\t\treturn 'data:' + (type || '') + ';base64,' + Encode.btoa(str);\n\t\t}\n\n\n\t\tfunction _preload(str) {\n\t\t\tvar comp = this;\n\n\t\t\t_img = new Image();\n\t\t\t_img.onerror = function() {\n\t\t\t\t_purge.call(this);\n\t\t\t\tcomp.trigger('error', x.ImageError.WRONG_FORMAT);\n\t\t\t};\n\t\t\t_img.onload = function() {\n\t\t\t\tcomp.trigger('load');\n\t\t\t};\n\n\t\t\t_img.src = /^data:[^;]*;base64,/.test(str) ? str : _toDataUrl(str, _blob.type);\n\t\t}\n\n\n\t\tfunction _readAsDataUrl(file, callback) {\n\t\t\tvar comp = this, fr;\n\n\t\t\t// use FileReader if it's available\n\t\t\tif (window.FileReader) {\n\t\t\t\tfr = new FileReader();\n\t\t\t\tfr.onload = function() {\n\t\t\t\t\tcallback(this.result);\n\t\t\t\t};\n\t\t\t\tfr.onerror = function() {\n\t\t\t\t\tcomp.trigger('error', x.ImageError.WRONG_FORMAT);\n\t\t\t\t};\n\t\t\t\tfr.readAsDataURL(file);\n\t\t\t} else {\n\t\t\t\treturn callback(file.getAsDataURL());\n\t\t\t}\n\t\t}\n\n\t\tfunction _downsize(width, height, crop, preserveHeaders) {\n\t\t\tvar self = this\n\t\t\t, scale\n\t\t\t, mathFn\n\t\t\t, x = 0\n\t\t\t, y = 0\n\t\t\t, img\n\t\t\t, destWidth\n\t\t\t, destHeight\n\t\t\t, orientation\n\t\t\t;\n\n\t\t\t_preserveHeaders = preserveHeaders; // we will need to check this on export (see getAsBinaryString())\n\n\t\t\t// take into account orientation tag\n\t\t\torientation = (this.meta && this.meta.tiff && this.meta.tiff.Orientation) || 1;\n\n\t\t\tif (Basic.inArray(orientation, [5,6,7,8]) !== -1) { // values that require 90 degree rotation\n\t\t\t\t// swap dimensions\n\t\t\t\tvar tmp = width;\n\t\t\t\twidth = height;\n\t\t\t\theight = tmp;\n\t\t\t}\n\n\t\t\timg = _getImg();\n\n\t\t\t// unify dimensions\n\t\t\tif (!crop) {\n\t\t\t\tscale = Math.min(width/img.width, height/img.height);\n\t\t\t} else {\n\t\t\t\t// one of the dimensions may exceed the actual image dimensions - we need to take the smallest value\n\t\t\t\twidth = Math.min(width, img.width);\n\t\t\t\theight = Math.min(height, img.height);\n\n\t\t\t\tscale = Math.max(width/img.width, height/img.height);\n\t\t\t}\n\t\t\n\t\t\t// we only downsize here\n\t\t\tif (scale > 1 && !crop && preserveHeaders) {\n\t\t\t\tthis.trigger('Resize');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// prepare canvas if necessary\n\t\t\tif (!_canvas) {\n\t\t\t\t_canvas = document.createElement(\"canvas\");\n\t\t\t}\n\n\t\t\t// calculate dimensions of proportionally resized image\n\t\t\tdestWidth = Math.round(img.width * scale);\t\n\t\t\tdestHeight = Math.round(img.height * scale);\n\n\t\t\t// scale image and canvas\n\t\t\tif (crop) {\n\t\t\t\t_canvas.width = width;\n\t\t\t\t_canvas.height = height;\n\n\t\t\t\t// if dimensions of the resulting image still larger than canvas, center it\n\t\t\t\tif (destWidth > width) {\n\t\t\t\t\tx = Math.round((destWidth - width) / 2);\n\t\t\t\t}\n\n\t\t\t\tif (destHeight > height) {\n\t\t\t\t\ty = Math.round((destHeight - height) / 2);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t_canvas.width = destWidth;\n\t\t\t\t_canvas.height = destHeight;\n\t\t\t}\n\n\t\t\t// rotate if required, according to orientation tag\n\t\t\tif (!_preserveHeaders) {\n\t\t\t\t_rotateToOrientaion(_canvas.width, _canvas.height, orientation);\n\t\t\t}\n\n\t\t\t_drawToCanvas.call(this, img, _canvas, -x, -y, destWidth, destHeight);\n\n\t\t\tthis.width = _canvas.width;\n\t\t\tthis.height = _canvas.height;\n\n\t\t\t_modified = true;\n\t\t\tself.trigger('Resize');\n\t\t}\n\n\n\t\tfunction _drawToCanvas(img, canvas, x, y, w, h) {\n\t\t\tif (Env.OS === 'iOS') { \n\t\t\t\t// avoid squish bug in iOS6\n\t\t\t\tMegaPixel.renderTo(img, canvas, { width: w, height: h, x: x, y: y });\n\t\t\t} else {\n\t\t\t\tvar ctx = canvas.getContext('2d');\n\t\t\t\tctx.drawImage(img, x, y, w, h);\n\t\t\t}\n\t\t}\n\n\n\t\t/**\n\t\t* Transform canvas coordination according to specified frame size and orientation\n\t\t* Orientation value is from EXIF tag\n\t\t* @author Shinichi Tomita <shinichi.tomita@gmail.com>\n\t\t*/\n\t\tfunction _rotateToOrientaion(width, height, orientation) {\n\t\t\tswitch (orientation) {\n\t\t\t\tcase 5:\n\t\t\t\tcase 6:\n\t\t\t\tcase 7:\n\t\t\t\tcase 8:\n\t\t\t\t\t_canvas.width = height;\n\t\t\t\t\t_canvas.height = width;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t_canvas.width = width;\n\t\t\t\t\t_canvas.height = height;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t1 = The 0th row is at the visual top of the image, and the 0th column is the visual left-hand side.\n\t\t\t2 = The 0th row is at the visual top of the image, and the 0th column is the visual right-hand side.\n\t\t\t3 = The 0th row is at the visual bottom of the image, and the 0th column is the visual right-hand side.\n\t\t\t4 = The 0th row is at the visual bottom of the image, and the 0th column is the visual left-hand side.\n\t\t\t5 = The 0th row is the visual left-hand side of the image, and the 0th column is the visual top.\n\t\t\t6 = The 0th row is the visual right-hand side of the image, and the 0th column is the visual top.\n\t\t\t7 = The 0th row is the visual right-hand side of the image, and the 0th column is the visual bottom.\n\t\t\t8 = The 0th row is the visual left-hand side of the image, and the 0th column is the visual bottom.\n\t\t\t*/\n\n\t\t\tvar ctx = _canvas.getContext('2d');\n\t\t\tswitch (orientation) {\n\t\t\t\tcase 2:\n\t\t\t\t\t// horizontal flip\n\t\t\t\t\tctx.translate(width, 0);\n\t\t\t\t\tctx.scale(-1, 1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\t// 180 rotate left\n\t\t\t\t\tctx.translate(width, height);\n\t\t\t\t\tctx.rotate(Math.PI);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\t// vertical flip\n\t\t\t\t\tctx.translate(0, height);\n\t\t\t\t\tctx.scale(1, -1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 5:\n\t\t\t\t\t// vertical flip + 90 rotate right\n\t\t\t\t\tctx.rotate(0.5 * Math.PI);\n\t\t\t\t\tctx.scale(1, -1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 6:\n\t\t\t\t\t// 90 rotate right\n\t\t\t\t\tctx.rotate(0.5 * Math.PI);\n\t\t\t\t\tctx.translate(0, -height);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 7:\n\t\t\t\t\t// horizontal flip + 90 rotate right\n\t\t\t\t\tctx.rotate(0.5 * Math.PI);\n\t\t\t\t\tctx.translate(width, -height);\n\t\t\t\t\tctx.scale(-1, 1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 8:\n\t\t\t\t\t// 90 rotate left\n\t\t\t\t\tctx.rotate(-0.5 * Math.PI);\n\t\t\t\t\tctx.translate(-width, 0);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\n\t\tfunction _purge() {\n\t\t\tif (_imgInfo) {\n\t\t\t\t_imgInfo.purge();\n\t\t\t\t_imgInfo = null;\n\t\t\t}\n\t\t\t_binStr = _img = _canvas = _blob = null;\n\t\t\t_modified = false;\n\t\t}\n\t}\n\n\treturn (extensions.Image = HTML5Image);\n});\n\n// Included from: src/javascript/runtime/flash/Runtime.js\n\n/**\n * Runtime.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/*global ActiveXObject:true */\n\n/**\nDefines constructor for Flash runtime.\n\n@class moxie/runtime/flash/Runtime\n@private\n*/\ndefine(\"moxie/runtime/flash/Runtime\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Env\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/runtime/Runtime\"\n], function(Basic, Env, Dom, x, Runtime) {\n\t\n\tvar type = 'flash', extensions = {};\n\n\t/**\n\tGet the version of the Flash Player\n\n\t@method getShimVersion\n\t@private\n\t@return {Number} Flash Player version\n\t*/\n\tfunction getShimVersion() {\n\t\tvar version;\n\n\t\ttry {\n\t\t\tversion = navigator.plugins['Shockwave Flash'];\n\t\t\tversion = version.description;\n\t\t} catch (e1) {\n\t\t\ttry {\n\t\t\t\tversion = new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version');\n\t\t\t} catch (e2) {\n\t\t\t\tversion = '0.0';\n\t\t\t}\n\t\t}\n\t\tversion = version.match(/\\d+/g);\n\t\treturn parseFloat(version[0] + '.' + version[1]);\n\t}\n\n\t/**\n\tConstructor for the Flash Runtime\n\n\t@class FlashRuntime\n\t@extends Runtime\n\t*/\n\tfunction FlashRuntime(options) {\n\t\tvar I = this, initTimer;\n\n\t\toptions = Basic.extend({ swf_url: Env.swf_url }, options);\n\n\t\tRuntime.call(this, options, type, {\n\t\t\taccess_binary: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\taccess_image_binary: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\tdisplay_media: Runtime.capTrue,\n\t\t\tdo_cors: Runtime.capTrue,\n\t\t\tdrag_and_drop: false,\n\t\t\treport_upload_progress: function() {\n\t\t\t\treturn I.mode === 'client';\n\t\t\t},\n\t\t\tresize_image: Runtime.capTrue,\n\t\t\treturn_response_headers: false,\n\t\t\treturn_response_type: function(responseType) {\n\t\t\t\tif (responseType === 'json' && !!window.JSON) {\n\t\t\t\t\treturn true;\n\t\t\t\t} \n\t\t\t\treturn !Basic.arrayDiff(responseType, ['', 'text', 'document']) || I.mode === 'browser';\n\t\t\t},\n\t\t\treturn_status_code: function(code) {\n\t\t\t\treturn I.mode === 'browser' || !Basic.arrayDiff(code, [200, 404]);\n\t\t\t},\n\t\t\tselect_file: Runtime.capTrue,\n\t\t\tselect_multiple: Runtime.capTrue,\n\t\t\tsend_binary_string: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\tsend_browser_cookies: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\tsend_custom_headers: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\tsend_multipart: Runtime.capTrue,\n\t\t\tslice_blob: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\tstream_upload: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\tsummon_file_dialog: false,\n\t\t\tupload_filesize: function(size) {\n\t\t\t\treturn Basic.parseSizeStr(size) <= 2097152 || I.mode === 'client';\n\t\t\t},\n\t\t\tuse_http_method: function(methods) {\n\t\t\t\treturn !Basic.arrayDiff(methods, ['GET', 'POST']);\n\t\t\t}\n\t\t}, { \n\t\t\t// capabilities that require specific mode\n\t\t\taccess_binary: function(value) {\n\t\t\t\treturn value ? 'browser' : 'client';\n\t\t\t},\n\t\t\taccess_image_binary: function(value) {\n\t\t\t\treturn value ? 'browser' : 'client';\n\t\t\t},\n\t\t\treport_upload_progress: function(value) {\n\t\t\t\treturn value ? 'browser' : 'client';\n\t\t\t},\n\t\t\treturn_response_type: function(responseType) {\n\t\t\t\treturn Basic.arrayDiff(responseType, ['', 'text', 'json', 'document']) ? 'browser' : ['client', 'browser'];\n\t\t\t},\n\t\t\treturn_status_code: function(code) {\n\t\t\t\treturn Basic.arrayDiff(code, [200, 404]) ? 'browser' : ['client', 'browser'];\n\t\t\t},\n\t\t\tsend_binary_string: function(value) {\n\t\t\t\treturn value ? 'browser' : 'client';\n\t\t\t},\n\t\t\tsend_browser_cookies: function(value) {\n\t\t\t\treturn value ? 'browser' : 'client';\n\t\t\t},\n\t\t\tsend_custom_headers: function(value) {\n\t\t\t\treturn value ? 'browser' : 'client';\n\t\t\t},\n\t\t\tstream_upload: function(value) {\n\t\t\t\treturn value ? 'client' : 'browser';\n\t\t\t},\n\t\t\tupload_filesize: function(size) {\n\t\t\t\treturn Basic.parseSizeStr(size) >= 2097152 ? 'client' : 'browser';\n\t\t\t}\n\t\t}, 'client');\n\n\n\t\t// minimal requirement for Flash Player version\n\t\tif (getShimVersion() < 10) {\n\t\t\tthis.mode = false; // with falsy mode, runtime won't operable, no matter what the mode was before\n\t\t}\n\n\n\t\tBasic.extend(this, {\n\n\t\t\tgetShim: function() {\n\t\t\t\treturn Dom.get(this.uid);\n\t\t\t},\n\n\t\t\tshimExec: function(component, action) {\n\t\t\t\tvar args = [].slice.call(arguments, 2);\n\t\t\t\treturn I.getShim().exec(this.uid, component, action, args);\n\t\t\t},\n\n\t\t\tinit: function() {\n\t\t\t\tvar html, el, container;\n\n\t\t\t\tcontainer = this.getShimContainer();\n\n\t\t\t\t// if not the minimal height, shims are not initialized in older browsers (e.g FF3.6, IE6,7,8, Safari 4.0,5.0, etc)\n\t\t\t\tBasic.extend(container.style, {\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop: '-8px',\n\t\t\t\t\tleft: '-8px',\n\t\t\t\t\twidth: '9px',\n\t\t\t\t\theight: '9px',\n\t\t\t\t\toverflow: 'hidden'\n\t\t\t\t});\n\n\t\t\t\t// insert flash object\n\t\t\t\thtml = '<object id=\"' + this.uid + '\" type=\"application/x-shockwave-flash\" data=\"' +  options.swf_url + '\" ';\n\n\t\t\t\tif (Env.browser === 'IE') {\n\t\t\t\t\thtml += 'classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" ';\n\t\t\t\t}\n\n\t\t\t\thtml += 'width=\"100%\" height=\"100%\" style=\"outline:0\">'  +\n\t\t\t\t\t'<param name=\"movie\" value=\"' + options.swf_url + '\" />' +\n\t\t\t\t\t'<param name=\"flashvars\" value=\"uid=' + escape(this.uid) + '&target=' + Env.global_event_dispatcher + '\" />' +\n\t\t\t\t\t'<param name=\"wmode\" value=\"transparent\" />' +\n\t\t\t\t\t'<param name=\"allowscriptaccess\" value=\"always\" />' +\n\t\t\t\t'</object>';\n\n\t\t\t\tif (Env.browser === 'IE') {\n\t\t\t\t\tel = document.createElement('div');\n\t\t\t\t\tcontainer.appendChild(el);\n\t\t\t\t\tel.outerHTML = html;\n\t\t\t\t\tel = container = null; // just in case\n\t\t\t\t} else {\n\t\t\t\t\tcontainer.innerHTML = html;\n\t\t\t\t}\n\n\t\t\t\t// Init is dispatched by the shim\n\t\t\t\tinitTimer = setTimeout(function() {\n\t\t\t\t\tif (I && !I.initialized) { // runtime might be already destroyed by this moment\n\t\t\t\t\t\tI.trigger(\"Error\", new x.RuntimeError(x.RuntimeError.NOT_INIT_ERR));\n\t\t\t\t\t}\n\t\t\t\t}, 5000);\n\t\t\t},\n\n\t\t\tdestroy: (function(destroy) { // extend default destroy method\n\t\t\t\treturn function() {\n\t\t\t\t\tdestroy.call(I);\n\t\t\t\t\tclearTimeout(initTimer); // initialization check might be still onwait\n\t\t\t\t\toptions = initTimer = destroy = I = null;\n\t\t\t\t};\n\t\t\t}(this.destroy))\n\n\t\t}, extensions);\n\t}\n\n\tRuntime.addConstructor(type, FlashRuntime);\n\n\treturn extensions;\n});\n\n// Included from: src/javascript/runtime/flash/file/Blob.js\n\n/**\n * Blob.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/flash/file/Blob\n@private\n*/\ndefine(\"moxie/runtime/flash/file/Blob\", [\n\t\"moxie/runtime/flash/Runtime\",\n\t\"moxie/file/Blob\"\n], function(extensions, Blob) {\n\n\tvar FlashBlob = {\n\t\tslice: function(blob, start, end, type) {\n\t\t\tvar self = this.getRuntime();\n\n\t\t\tif (start < 0) {\n\t\t\t\tstart = Math.max(blob.size + start, 0);\n\t\t\t} else if (start > 0) {\n\t\t\t\tstart = Math.min(start, blob.size);\n\t\t\t}\n\n\t\t\tif (end < 0) {\n\t\t\t\tend = Math.max(blob.size + end, 0);\n\t\t\t} else if (end > 0) {\n\t\t\t\tend = Math.min(end, blob.size);\n\t\t\t}\n\n\t\t\tblob = self.shimExec.call(this, 'Blob', 'slice', start, end, type || '');\n\n\t\t\tif (blob) {\n\t\t\t\tblob = new Blob(self.uid, blob);\n\t\t\t}\n\t\t\treturn blob;\n\t\t}\n\t};\n\n\treturn (extensions.Blob = FlashBlob);\n});\n\n// Included from: src/javascript/runtime/flash/file/FileInput.js\n\n/**\n * FileInput.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/flash/file/FileInput\n@private\n*/\ndefine(\"moxie/runtime/flash/file/FileInput\", [\n\t\"moxie/runtime/flash/Runtime\"\n], function(extensions) {\n\t\n\tvar FileInput = {\t\t\n\t\tinit: function(options) {\n\t\t\tthis.getRuntime().shimExec.call(this, 'FileInput', 'init', {\n\t\t\t\tname: options.name,\n\t\t\t\taccept: options.accept,\n\t\t\t\tmultiple: options.multiple\n\t\t\t});\n\t\t\tthis.trigger('ready');\n\t\t}\n\t};\n\n\treturn (extensions.FileInput = FileInput);\n});\n\n// Included from: src/javascript/runtime/flash/file/FileReader.js\n\n/**\n * FileReader.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/flash/file/FileReader\n@private\n*/\ndefine(\"moxie/runtime/flash/file/FileReader\", [\n\t\"moxie/runtime/flash/Runtime\",\n\t\"moxie/core/utils/Encode\"\n], function(extensions, Encode) {\n\n\tvar _result = '';\n\n\tfunction _formatData(data, op) {\n\t\tswitch (op) {\n\t\t\tcase 'readAsText':\n\t\t\t\treturn Encode.atob(data, 'utf8');\n\t\t\tcase 'readAsBinaryString':\n\t\t\t\treturn Encode.atob(data);\n\t\t\tcase 'readAsDataURL':\n\t\t\t\treturn data;\n\t\t}\n\t\treturn null;\n\t}\n\n\tvar FileReader = {\n\t\tread: function(op, blob) {\n\t\t\tvar target = this, self = target.getRuntime();\n\n\t\t\t// special prefix for DataURL read mode\n\t\t\tif (op === 'readAsDataURL') {\n\t\t\t\t_result = 'data:' + (blob.type || '') + ';base64,';\n\t\t\t}\n\n\t\t\ttarget.bind('Progress', function(e, data) {\n\t\t\t\tif (data) {\n\t\t\t\t\t_result += _formatData(data, op);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn self.shimExec.call(this, 'FileReader', 'readAsBase64', blob.uid);\n\t\t},\n\n\t\tgetResult: function() {\n\t\t\treturn _result;\n\t\t},\n\n\t\tdestroy: function() {\n\t\t\t_result = null;\n\t\t}\n\t};\n\n\treturn (extensions.FileReader = FileReader);\n});\n\n// Included from: src/javascript/runtime/flash/file/FileReaderSync.js\n\n/**\n * FileReaderSync.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/flash/file/FileReaderSync\n@private\n*/\ndefine(\"moxie/runtime/flash/file/FileReaderSync\", [\n\t\"moxie/runtime/flash/Runtime\",\n\t\"moxie/core/utils/Encode\"\n], function(extensions, Encode) {\n\t\n\tfunction _formatData(data, op) {\n\t\tswitch (op) {\n\t\t\tcase 'readAsText':\n\t\t\t\treturn Encode.atob(data, 'utf8');\n\t\t\tcase 'readAsBinaryString':\n\t\t\t\treturn Encode.atob(data);\n\t\t\tcase 'readAsDataURL':\n\t\t\t\treturn data;\n\t\t}\n\t\treturn null;\n\t}\n\n\tvar FileReaderSync = {\n\t\tread: function(op, blob) {\n\t\t\tvar result, self = this.getRuntime();\n\n\t\t\tresult = self.shimExec.call(this, 'FileReaderSync', 'readAsBase64', blob.uid);\n\t\t\tif (!result) {\n\t\t\t\treturn null; // or throw ex\n\t\t\t}\n\n\t\t\t// special prefix for DataURL read mode\n\t\t\tif (op === 'readAsDataURL') {\n\t\t\t\tresult = 'data:' + (blob.type || '') + ';base64,' + result;\n\t\t\t}\n\n\t\t\treturn _formatData(result, op, blob.type);\n\t\t}\n\t};\n\n\treturn (extensions.FileReaderSync = FileReaderSync);\n});\n\n// Included from: src/javascript/runtime/flash/xhr/XMLHttpRequest.js\n\n/**\n * XMLHttpRequest.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/flash/xhr/XMLHttpRequest\n@private\n*/\ndefine(\"moxie/runtime/flash/xhr/XMLHttpRequest\", [\n\t\"moxie/runtime/flash/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/file/Blob\",\n\t\"moxie/file/File\",\n\t\"moxie/file/FileReaderSync\",\n\t\"moxie/xhr/FormData\",\n\t\"moxie/runtime/Transporter\"\n], function(extensions, Basic, Blob, File, FileReaderSync, FormData, Transporter) {\n\t\n\tvar XMLHttpRequest = {\n\n\t\tsend: function(meta, data) {\n\t\t\tvar target = this, self = target.getRuntime();\n\n\t\t\tfunction send() {\n\t\t\t\tmeta.transport = self.mode;\n\t\t\t\tself.shimExec.call(target, 'XMLHttpRequest', 'send', meta, data);\n\t\t\t}\n\n\n\t\t\tfunction appendBlob(name, blob) {\n\t\t\t\tself.shimExec.call(target, 'XMLHttpRequest', 'appendBlob', name, blob.uid);\n\t\t\t\tdata = null;\n\t\t\t\tsend();\n\t\t\t}\n\n\n\t\t\tfunction attachBlob(blob, cb) {\n\t\t\t\tvar tr = new Transporter();\n\n\t\t\t\ttr.bind(\"TransportingComplete\", function() {\n\t\t\t\t\tcb(this.result);\n\t\t\t\t});\n\n\t\t\t\ttr.transport(blob.getSource(), blob.type, {\n\t\t\t\t\truid: self.uid\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// copy over the headers if any\n\t\t\tif (!Basic.isEmptyObj(meta.headers)) {\n\t\t\t\tBasic.each(meta.headers, function(value, header) {\n\t\t\t\t\tself.shimExec.call(target, 'XMLHttpRequest', 'setRequestHeader', header, value.toString()); // Silverlight doesn't accept integers into the arguments of type object\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// transfer over multipart params and blob itself\n\t\t\tif (data instanceof FormData) {\n\t\t\t\tvar blobField;\n\t\t\t\tdata.each(function(value, name) {\n\t\t\t\t\tif (value instanceof Blob) {\n\t\t\t\t\t\tblobField = name;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.shimExec.call(target, 'XMLHttpRequest', 'append', name, value);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (!data.hasBlob()) {\n\t\t\t\t\tdata = null;\n\t\t\t\t\tsend();\n\t\t\t\t} else {\n\t\t\t\t\tvar blob = data.getBlob();\n\t\t\t\t\tif (blob.isDetached()) {\n\t\t\t\t\t\tattachBlob(blob, function(attachedBlob) {\n\t\t\t\t\t\t\tblob.destroy();\n\t\t\t\t\t\t\tappendBlob(blobField, attachedBlob);\t\t\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tappendBlob(blobField, blob);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (data instanceof Blob) {\n\t\t\t\tif (data.isDetached()) {\n\t\t\t\t\tattachBlob(data, function(attachedBlob) {\n\t\t\t\t\t\tdata.destroy();\n\t\t\t\t\t\tdata = attachedBlob.uid;\n\t\t\t\t\t\tsend();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tdata = data.uid;\n\t\t\t\t\tsend();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsend();\n\t\t\t}\n\t\t},\n\n\t\tgetResponse: function(responseType) {\n\t\t\tvar frs, blob, self = this.getRuntime();\n\n\t\t\tblob = self.shimExec.call(this, 'XMLHttpRequest', 'getResponseAsBlob');\n\n\t\t\tif (blob) {\n\t\t\t\tblob = new File(self.uid, blob);\n\n\t\t\t\tif ('blob' === responseType) {\n\t\t\t\t\treturn blob;\n\t\t\t\t}\n\n\t\t\t\ttry { \n\t\t\t\t\tfrs = new FileReaderSync();\n\n\t\t\t\t\tif (!!~Basic.inArray(responseType, [\"\", \"text\"])) {\n\t\t\t\t\t\treturn frs.readAsText(blob);\n\t\t\t\t\t} else if ('json' === responseType && !!window.JSON) {\n\t\t\t\t\t\treturn JSON.parse(frs.readAsText(blob));\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tblob.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\t\tabort: function(upload_complete_flag) {\n\t\t\tvar self = this.getRuntime();\n\n\t\t\tself.shimExec.call(this, 'XMLHttpRequest', 'abort');\n\n\t\t\tthis.dispatchEvent('readystatechange');\n\t\t\t// this.dispatchEvent('progress');\n\t\t\tthis.dispatchEvent('abort');\n\n\t\t\t//if (!upload_complete_flag) {\n\t\t\t\t// this.dispatchEvent('uploadprogress');\n\t\t\t//}\n\t\t}\n\t};\n\n\treturn (extensions.XMLHttpRequest = XMLHttpRequest);\n});\n\n// Included from: src/javascript/runtime/flash/runtime/Transporter.js\n\n/**\n * Transporter.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/flash/runtime/Transporter\n@private\n*/\ndefine(\"moxie/runtime/flash/runtime/Transporter\", [\n\t\"moxie/runtime/flash/Runtime\",\n\t\"moxie/file/Blob\"\n], function(extensions, Blob) {\n\n\tvar Transporter = {\n\t\tgetAsBlob: function(type) {\n\t\t\tvar self = this.getRuntime()\n\t\t\t, blob = self.shimExec.call(this, 'Transporter', 'getAsBlob', type)\n\t\t\t;\n\t\t\tif (blob) {\n\t\t\t\treturn new Blob(self.uid, blob);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t};\n\n\treturn (extensions.Transporter = Transporter);\n});\n\n// Included from: src/javascript/runtime/flash/image/Image.js\n\n/**\n * Image.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/flash/image/Image\n@private\n*/\ndefine(\"moxie/runtime/flash/image/Image\", [\n\t\"moxie/runtime/flash/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/Transporter\",\n\t\"moxie/file/Blob\",\n\t\"moxie/file/FileReaderSync\"\n], function(extensions, Basic, Transporter, Blob, FileReaderSync) {\n\t\n\tvar Image = {\n\t\tloadFromBlob: function(blob) {\n\t\t\tvar comp = this, self = comp.getRuntime();\n\n\t\t\tfunction exec(srcBlob) {\n\t\t\t\tself.shimExec.call(comp, 'Image', 'loadFromBlob', srcBlob.uid);\n\t\t\t\tcomp = self = null;\n\t\t\t}\n\n\t\t\tif (blob.isDetached()) { // binary string\n\t\t\t\tvar tr = new Transporter();\n\t\t\t\ttr.bind(\"TransportingComplete\", function() {\n\t\t\t\t\texec(tr.result.getSource());\n\t\t\t\t});\n\t\t\t\ttr.transport(blob.getSource(), blob.type, { ruid: self.uid });\n\t\t\t} else {\n\t\t\t\texec(blob.getSource());\n\t\t\t}\n\t\t},\n\n\t\tloadFromImage: function(img) {\n\t\t\tvar self = this.getRuntime();\n\t\t\treturn self.shimExec.call(this, 'Image', 'loadFromImage', img.uid);\n\t\t},\n\n\t\tgetAsBlob: function(type, quality) {\n\t\t\tvar self = this.getRuntime()\n\t\t\t, blob = self.shimExec.call(this, 'Image', 'getAsBlob', type, quality)\n\t\t\t;\n\t\t\tif (blob) {\n\t\t\t\treturn new Blob(self.uid, blob);\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\t\tgetAsDataURL: function() {\n\t\t\tvar self = this.getRuntime()\n\t\t\t, blob = self.Image.getAsBlob.apply(this, arguments)\n\t\t\t, frs\n\t\t\t;\n\t\t\tif (!blob) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tfrs = new FileReaderSync();\n\t\t\treturn frs.readAsDataURL(blob);\n\t\t}\n\t};\n\n\treturn (extensions.Image = Image);\n});\n\n// Included from: src/javascript/runtime/silverlight/Runtime.js\n\n/**\n * RunTime.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/*global ActiveXObject:true */\n\n/**\nDefines constructor for Silverlight runtime.\n\n@class moxie/runtime/silverlight/Runtime\n@private\n*/\ndefine(\"moxie/runtime/silverlight/Runtime\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Env\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/runtime/Runtime\"\n], function(Basic, Env, Dom, x, Runtime) {\n\t\n\tvar type = \"silverlight\", extensions = {};\n\n\tfunction isInstalled(version) {\n\t\tvar isVersionSupported = false, control = null, actualVer,\n\t\t\tactualVerArray, reqVerArray, requiredVersionPart, actualVersionPart, index = 0;\n\n\t\ttry {\n\t\t\ttry {\n\t\t\t\tcontrol = new ActiveXObject('AgControl.AgControl');\n\n\t\t\t\tif (control.IsVersionSupported(version)) {\n\t\t\t\t\tisVersionSupported = true;\n\t\t\t\t}\n\n\t\t\t\tcontrol = null;\n\t\t\t} catch (e) {\n\t\t\t\tvar plugin = navigator.plugins[\"Silverlight Plug-In\"];\n\n\t\t\t\tif (plugin) {\n\t\t\t\t\tactualVer = plugin.description;\n\n\t\t\t\t\tif (actualVer === \"1.0.30226.2\") {\n\t\t\t\t\t\tactualVer = \"2.0.30226.2\";\n\t\t\t\t\t}\n\n\t\t\t\t\tactualVerArray = actualVer.split(\".\");\n\n\t\t\t\t\twhile (actualVerArray.length > 3) {\n\t\t\t\t\t\tactualVerArray.pop();\n\t\t\t\t\t}\n\n\t\t\t\t\twhile ( actualVerArray.length < 4) {\n\t\t\t\t\t\tactualVerArray.push(0);\n\t\t\t\t\t}\n\n\t\t\t\t\treqVerArray = version.split(\".\");\n\n\t\t\t\t\twhile (reqVerArray.length > 4) {\n\t\t\t\t\t\treqVerArray.pop();\n\t\t\t\t\t}\n\n\t\t\t\t\tdo {\n\t\t\t\t\t\trequiredVersionPart = parseInt(reqVerArray[index], 10);\n\t\t\t\t\t\tactualVersionPart = parseInt(actualVerArray[index], 10);\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t} while (index < reqVerArray.length && requiredVersionPart === actualVersionPart);\n\n\t\t\t\t\tif (requiredVersionPart <= actualVersionPart && !isNaN(requiredVersionPart)) {\n\t\t\t\t\t\tisVersionSupported = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e2) {\n\t\t\tisVersionSupported = false;\n\t\t}\n\n\t\treturn isVersionSupported;\n\t}\n\n\t/**\n\tConstructor for the Silverlight Runtime\n\n\t@class SilverlightRuntime\n\t@extends Runtime\n\t*/\n\tfunction SilverlightRuntime(options) {\n\t\tvar I = this, initTimer;\n\n\t\toptions = Basic.extend({ xap_url: Env.xap_url }, options);\n\n\t\tRuntime.call(this, options, type, {\n\t\t\taccess_binary: Runtime.capTrue,\n\t\t\taccess_image_binary: Runtime.capTrue,\n\t\t\tdisplay_media: Runtime.capTrue,\n\t\t\tdo_cors: Runtime.capTrue,\n\t\t\tdrag_and_drop: false,\n\t\t\treport_upload_progress: Runtime.capTrue,\n\t\t\tresize_image: Runtime.capTrue,\n\t\t\treturn_response_headers: function(value) {\n\t\t\t\treturn value && I.mode === 'client';\n\t\t\t},\n\t\t\treturn_response_type: function(responseType) {\n\t\t\t\tif (responseType !== 'json') {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\treturn !!window.JSON;\n\t\t\t\t}\n\t\t\t},\n\t\t\treturn_status_code: function(code) {\n\t\t\t\treturn I.mode === 'client' || !Basic.arrayDiff(code, [200, 404]);\n\t\t\t},\n\t\t\tselect_file: Runtime.capTrue,\n\t\t\tselect_multiple: Runtime.capTrue,\n\t\t\tsend_binary_string: Runtime.capTrue,\n\t\t\tsend_browser_cookies: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\tsend_custom_headers: function(value) {\n\t\t\t\treturn value && I.mode === 'client';\n\t\t\t},\n\t\t\tsend_multipart: Runtime.capTrue,\n\t\t\tslice_blob: Runtime.capTrue,\n\t\t\tstream_upload: true,\n\t\t\tsummon_file_dialog: false,\n\t\t\tupload_filesize: Runtime.capTrue,\n\t\t\tuse_http_method: function(methods) {\n\t\t\t\treturn I.mode === 'client' || !Basic.arrayDiff(methods, ['GET', 'POST']);\n\t\t\t}\n\t\t}, { \n\t\t\t// capabilities that require specific mode\n\t\t\treturn_response_headers: function(value) {\n\t\t\t\treturn value ? 'client' : 'browser';\n\t\t\t},\n\t\t\treturn_status_code: function(code) {\n\t\t\t\treturn Basic.arrayDiff(code, [200, 404]) ? 'client' : ['client', 'browser'];\n\t\t\t},\n\t\t\tsend_browser_cookies: function(value) {\n\t\t\t\treturn value ? 'browser' : 'client';\n\t\t\t},\n\t\t\tsend_custom_headers: function(value) {\n\t\t\t\treturn value ? 'client' : 'browser';\n\t\t\t},\n\t\t\tuse_http_method: function(methods) {\n\t\t\t\treturn Basic.arrayDiff(methods, ['GET', 'POST']) ? 'client' : ['client', 'browser'];\n\t\t\t}\n\t\t});\n\n\n\t\t// minimal requirement\n\t\tif (!isInstalled('2.0.31005.0') || Env.browser === 'Opera') {\n\t\t\tthis.mode = false;\n\t\t}\n\n\n\t\tBasic.extend(this, {\n\t\t\tgetShim: function() {\n\t\t\t\treturn Dom.get(this.uid).content.Moxie;\n\t\t\t},\n\n\t\t\tshimExec: function(component, action) {\n\t\t\t\tvar args = [].slice.call(arguments, 2);\n\t\t\t\treturn I.getShim().exec(this.uid, component, action, args);\n\t\t\t},\n\n\t\t\tinit : function() {\n\t\t\t\tvar container;\n\n\t\t\t\tcontainer = this.getShimContainer();\n\n\t\t\t\tcontainer.innerHTML = '<object id=\"' + this.uid + '\" data=\"data:application/x-silverlight,\" type=\"application/x-silverlight-2\" width=\"100%\" height=\"100%\" style=\"outline:none;\">' +\n\t\t\t\t\t'<param name=\"source\" value=\"' + options.xap_url + '\"/>' +\n\t\t\t\t\t'<param name=\"background\" value=\"Transparent\"/>' +\n\t\t\t\t\t'<param name=\"windowless\" value=\"true\"/>' +\n\t\t\t\t\t'<param name=\"enablehtmlaccess\" value=\"true\"/>' +\n\t\t\t\t\t'<param name=\"initParams\" value=\"uid=' + this.uid + ',target=' + Env.global_event_dispatcher + '\"/>' +\n\t\t\t\t'</object>';\n\n\t\t\t\t// Init is dispatched by the shim\n\t\t\t\tinitTimer = setTimeout(function() {\n\t\t\t\t\tif (I && !I.initialized) { // runtime might be already destroyed by this moment\n\t\t\t\t\t\tI.trigger(\"Error\", new x.RuntimeError(x.RuntimeError.NOT_INIT_ERR));\n\t\t\t\t\t}\n\t\t\t\t}, Env.OS !== 'Windows'? 10000 : 5000); // give it more time to initialize in non Windows OS (like Mac)\n\t\t\t},\n\n\t\t\tdestroy: (function(destroy) { // extend default destroy method\n\t\t\t\treturn function() {\n\t\t\t\t\tdestroy.call(I);\n\t\t\t\t\tclearTimeout(initTimer); // initialization check might be still onwait\n\t\t\t\t\toptions = initTimer = destroy = I = null;\n\t\t\t\t};\n\t\t\t}(this.destroy))\n\n\t\t}, extensions);\n\t}\n\n\tRuntime.addConstructor(type, SilverlightRuntime); \n\n\treturn extensions;\n});\n\n// Included from: src/javascript/runtime/silverlight/file/Blob.js\n\n/**\n * Blob.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/silverlight/file/Blob\n@private\n*/\ndefine(\"moxie/runtime/silverlight/file/Blob\", [\n\t\"moxie/runtime/silverlight/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/flash/file/Blob\"\n], function(extensions, Basic, Blob) {\n\treturn (extensions.Blob = Basic.extend({}, Blob));\n});\n\n// Included from: src/javascript/runtime/silverlight/file/FileInput.js\n\n/**\n * FileInput.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/silverlight/file/FileInput\n@private\n*/\ndefine(\"moxie/runtime/silverlight/file/FileInput\", [\n\t\"moxie/runtime/silverlight/Runtime\"\n], function(extensions) {\n\t\n\tvar FileInput = {\n\t\tinit: function(options) {\n\n\t\t\tfunction toFilters(accept) {\n\t\t\t\tvar filter = '';\n\t\t\t\tfor (var i = 0; i < accept.length; i++) {\n\t\t\t\t\tfilter += (filter !== '' ? '|' : '') + accept[i].title + \" | *.\" + accept[i].extensions.replace(/,/g, ';*.');\n\t\t\t\t}\n\t\t\t\treturn filter;\n\t\t\t}\n\t\t\t\n\t\t\tthis.getRuntime().shimExec.call(this, 'FileInput', 'init', toFilters(options.accept), options.name, options.multiple);\n\t\t\tthis.trigger('ready');\n\t\t}\n\t};\n\n\treturn (extensions.FileInput = FileInput);\n});\n\n// Included from: src/javascript/runtime/silverlight/file/FileDrop.js\n\n/**\n * FileDrop.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/silverlight/file/FileDrop\n@private\n*/\ndefine(\"moxie/runtime/silverlight/file/FileDrop\", [\n\t\"moxie/runtime/silverlight/Runtime\",\n\t\"moxie/core/utils/Dom\", \n\t\"moxie/core/utils/Events\"\n], function(extensions, Dom, Events) {\n\n\t// not exactly useful, since works only in safari (...crickets...)\n\tvar FileDrop = {\n\t\tinit: function() {\n\t\t\tvar comp = this, self = comp.getRuntime(), dropZone;\n\n\t\t\tdropZone = self.getShimContainer();\n\n\t\t\tEvents.addEvent(dropZone, 'dragover', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\te.dataTransfer.dropEffect = 'copy';\n\t\t\t}, comp.uid);\n\n\t\t\tEvents.addEvent(dropZone, 'dragenter', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar flag = Dom.get(self.uid).dragEnter(e);\n\t\t\t\t// If handled, then stop propagation of event in DOM\n\t\t\t\tif (flag) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t}, comp.uid);\n\n\t\t\tEvents.addEvent(dropZone, 'drop', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar flag = Dom.get(self.uid).dragDrop(e);\n\t\t\t\t// If handled, then stop propagation of event in DOM\n\t\t\t\tif (flag) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t}, comp.uid);\n\n\t\t\treturn self.shimExec.call(this, 'FileDrop', 'init');\n\t\t}\n\t};\n\n\treturn (extensions.FileDrop = FileDrop);\n});\n\n// Included from: src/javascript/runtime/silverlight/file/FileReader.js\n\n/**\n * FileReader.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/silverlight/file/FileReader\n@private\n*/\ndefine(\"moxie/runtime/silverlight/file/FileReader\", [\n\t\"moxie/runtime/silverlight/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/flash/file/FileReader\"\n], function(extensions, Basic, FileReader) {\n\treturn (extensions.FileReader = Basic.extend({}, FileReader));\n});\n\n// Included from: src/javascript/runtime/silverlight/file/FileReaderSync.js\n\n/**\n * FileReaderSync.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/silverlight/file/FileReaderSync\n@private\n*/\ndefine(\"moxie/runtime/silverlight/file/FileReaderSync\", [\n\t\"moxie/runtime/silverlight/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/flash/file/FileReaderSync\"\n], function(extensions, Basic, FileReaderSync) {\n\treturn (extensions.FileReaderSync = Basic.extend({}, FileReaderSync));\n});\n\n// Included from: src/javascript/runtime/silverlight/xhr/XMLHttpRequest.js\n\n/**\n * XMLHttpRequest.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/silverlight/xhr/XMLHttpRequest\n@private\n*/\ndefine(\"moxie/runtime/silverlight/xhr/XMLHttpRequest\", [\n\t\"moxie/runtime/silverlight/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/flash/xhr/XMLHttpRequest\"\n], function(extensions, Basic, XMLHttpRequest) {\n\treturn (extensions.XMLHttpRequest = Basic.extend({}, XMLHttpRequest));\n});\n\n// Included from: src/javascript/runtime/silverlight/runtime/Transporter.js\n\n/**\n * Transporter.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/silverlight/runtime/Transporter\n@private\n*/\ndefine(\"moxie/runtime/silverlight/runtime/Transporter\", [\n\t\"moxie/runtime/silverlight/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/flash/runtime/Transporter\"\n], function(extensions, Basic, Transporter) {\n\treturn (extensions.Transporter = Basic.extend({}, Transporter));\n});\n\n// Included from: src/javascript/runtime/silverlight/image/Image.js\n\n/**\n * Image.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n \n/**\n@class moxie/runtime/silverlight/image/Image\n@private\n*/\ndefine(\"moxie/runtime/silverlight/image/Image\", [\n\t\"moxie/runtime/silverlight/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/flash/image/Image\"\n], function(extensions, Basic, Image) {\n\treturn (extensions.Image = Basic.extend({}, Image, {\n\n\t\tgetInfo: function() {\n\t\t\tvar self = this.getRuntime()\n\t\t\t, grps = ['tiff', 'exif', 'gps']\n\t\t\t, info = { meta: {} }\n\t\t\t, rawInfo = self.shimExec.call(this, 'Image', 'getInfo')\n\t\t\t;\n\n\t\t\tif (rawInfo.meta) {\n\t\t\t\tBasic.each(grps, function(grp) {\n\t\t\t\t\tvar meta = rawInfo.meta[grp]\n\t\t\t\t\t, tag\n\t\t\t\t\t, i\n\t\t\t\t\t, length\n\t\t\t\t\t, value\n\t\t\t\t\t;\n\t\t\t\t\tif (meta && meta.keys) {\n\t\t\t\t\t\tinfo.meta[grp] = {};\n\t\t\t\t\t\tfor (i = 0, length = meta.keys.length; i < length; i++) {\n\t\t\t\t\t\t\ttag = meta.keys[i];\n\t\t\t\t\t\t\tvalue = meta[tag];\n\t\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\t\t// convert numbers\n\t\t\t\t\t\t\t\tif (/^(\\d|[1-9]\\d+)$/.test(value)) { // integer (make sure doesn't start with zero)\n\t\t\t\t\t\t\t\t\tvalue = parseInt(value, 10);\n\t\t\t\t\t\t\t\t} else if (/^\\d*\\.\\d+$/.test(value)) { // double\n\t\t\t\t\t\t\t\t\tvalue = parseFloat(value);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tinfo.meta[grp][tag] = value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tinfo.width = parseInt(rawInfo.width, 10);\n\t\t\tinfo.height = parseInt(rawInfo.height, 10);\n\t\t\tinfo.size = parseInt(rawInfo.size, 10);\n\t\t\tinfo.type = rawInfo.type;\n\t\t\tinfo.name = rawInfo.name;\n\n\t\t\treturn info;\n\t\t}\n\t}));\n});\n\n// Included from: src/javascript/runtime/html4/Runtime.js\n\n/**\n * Runtime.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/*global File:true */\n\n/**\nDefines constructor for HTML4 runtime.\n\n@class moxie/runtime/html4/Runtime\n@private\n*/\ndefine(\"moxie/runtime/html4/Runtime\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/runtime/Runtime\",\n\t\"moxie/core/utils/Env\"\n], function(Basic, x, Runtime, Env) {\n\t\n\tvar type = 'html4', extensions = {};\n\n\tfunction Html4Runtime(options) {\n\t\tvar I = this\n\t\t, Test = Runtime.capTest\n\t\t, True = Runtime.capTrue\n\t\t;\n\n\t\tRuntime.call(this, options, type, {\n\t\t\taccess_binary: Test(window.FileReader || window.File && File.getAsDataURL),\n\t\t\taccess_image_binary: false,\n\t\t\tdisplay_media: Test(extensions.Image && (Env.can('create_canvas') || Env.can('use_data_uri_over32kb'))),\n\t\t\tdo_cors: false,\n\t\t\tdrag_and_drop: false,\n\t\t\tfilter_by_extension: Test(function() { // if you know how to feature-detect this, please suggest\n\t\t\t\treturn (Env.browser === 'Chrome' && Env.version >= 28) || (Env.browser === 'IE' && Env.version >= 10);\n\t\t\t}()),\n\t\t\tresize_image: function() {\n\t\t\t\treturn extensions.Image && I.can('access_binary') && Env.can('create_canvas');\n\t\t\t},\n\t\t\treport_upload_progress: false,\n\t\t\treturn_response_headers: false,\n\t\t\treturn_response_type: function(responseType) {\n\t\t\t\tif (responseType === 'json' && !!window.JSON) {\n\t\t\t\t\treturn true;\n\t\t\t\t} \n\t\t\t\treturn !!~Basic.inArray(responseType, ['text', 'document', '']);\n\t\t\t},\n\t\t\treturn_status_code: function(code) {\n\t\t\t\treturn !Basic.arrayDiff(code, [200, 404]);\n\t\t\t},\n\t\t\tselect_file: function() {\n\t\t\t\treturn Env.can('use_fileinput');\n\t\t\t},\n\t\t\tselect_multiple: false,\n\t\t\tsend_binary_string: false,\n\t\t\tsend_custom_headers: false,\n\t\t\tsend_multipart: true,\n\t\t\tslice_blob: false,\n\t\t\tstream_upload: function() {\n\t\t\t\treturn I.can('select_file');\n\t\t\t},\n\t\t\tsummon_file_dialog: Test(function() { // yeah... some dirty sniffing here...\n\t\t\t\treturn (Env.browser === 'Firefox' && Env.version >= 4) ||\n\t\t\t\t\t(Env.browser === 'Opera' && Env.version >= 12) ||\n\t\t\t\t\t!!~Basic.inArray(Env.browser, ['Chrome', 'Safari']);\n\t\t\t}()),\n\t\t\tupload_filesize: True,\n\t\t\tuse_http_method: function(methods) {\n\t\t\t\treturn !Basic.arrayDiff(methods, ['GET', 'POST']);\n\t\t\t}\n\t\t});\n\n\n\t\tBasic.extend(this, {\n\t\t\tinit : function() {\n\t\t\t\tthis.trigger(\"Init\");\n\t\t\t},\n\n\t\t\tdestroy: (function(destroy) { // extend default destroy method\n\t\t\t\treturn function() {\n\t\t\t\t\tdestroy.call(I);\n\t\t\t\t\tdestroy = I = null;\n\t\t\t\t};\n\t\t\t}(this.destroy))\n\t\t});\n\n\t\tBasic.extend(this.getShim(), extensions);\n\t}\n\n\tRuntime.addConstructor(type, Html4Runtime);\n\n\treturn extensions;\n});\n\n// Included from: src/javascript/runtime/html4/file/FileInput.js\n\n/**\n * FileInput.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html4/file/FileInput\n@private\n*/\ndefine(\"moxie/runtime/html4/file/FileInput\", [\n\t\"moxie/runtime/html4/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/utils/Events\",\n\t\"moxie/core/utils/Mime\",\n\t\"moxie/core/utils/Env\"\n], function(extensions, Basic, Dom, Events, Mime, Env) {\n\t\n\tfunction FileInput() {\n\t\tvar _uid, _files = [], _mimes = [], _options;\n\n\t\tfunction addInput() {\n\t\t\tvar comp = this, I = comp.getRuntime(), shimContainer, browseButton, currForm, form, input, uid;\n\n\t\t\tuid = Basic.guid('uid_');\n\n\t\t\tshimContainer = I.getShimContainer(); // we get new ref everytime to avoid memory leaks in IE\n\n\t\t\tif (_uid) { // move previous form out of the view\n\t\t\t\tcurrForm = Dom.get(_uid + '_form');\n\t\t\t\tif (currForm) {\n\t\t\t\t\tBasic.extend(currForm.style, { top: '100%' });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// build form in DOM, since innerHTML version not able to submit file for some reason\n\t\t\tform = document.createElement('form');\n\t\t\tform.setAttribute('id', uid + '_form');\n\t\t\tform.setAttribute('method', 'post');\n\t\t\tform.setAttribute('enctype', 'multipart/form-data');\n\t\t\tform.setAttribute('encoding', 'multipart/form-data');\n\n\t\t\tBasic.extend(form.style, {\n\t\t\t\toverflow: 'hidden',\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0,\n\t\t\t\twidth: '100%',\n\t\t\t\theight: '100%'\n\t\t\t});\n\n\t\t\tinput = document.createElement('input');\n\t\t\tinput.setAttribute('id', uid);\n\t\t\tinput.setAttribute('type', 'file');\n\t\t\tinput.setAttribute('name', _options.name || 'Filedata');\n\t\t\tinput.setAttribute('accept', _mimes.join(','));\n\n\t\t\tBasic.extend(input.style, {\n\t\t\t\tfontSize: '999px',\n\t\t\t\topacity: 0\n\t\t\t});\n\n\t\t\tform.appendChild(input);\n\t\t\tshimContainer.appendChild(form);\n\n\t\t\t// prepare file input to be placed underneath the browse_button element\n\t\t\tBasic.extend(input.style, {\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0,\n\t\t\t\twidth: '100%',\n\t\t\t\theight: '100%'\n\t\t\t});\n\n\t\t\tif (Env.browser === 'IE' && Env.version < 10) {\n\t\t\t\tBasic.extend(input.style, {\n\t\t\t\t\tfilter : \"progid:DXImageTransform.Microsoft.Alpha(opacity=0)\"\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tinput.onchange = function() { // there should be only one handler for this\n\t\t\t\tvar file;\n\n\t\t\t\tif (!this.value) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (this.files) {\n\t\t\t\t\tfile = this.files[0];\n\t\t\t\t} else {\n\t\t\t\t\tfile = {\n\t\t\t\t\t\tname: this.value\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t_files = [file];\n\n\t\t\t\tthis.onchange = function() {}; // clear event handler\n\t\t\t\taddInput.call(comp);\n\n\t\t\t\t// after file is initialized as o.File, we need to update form and input ids\n\t\t\t\tcomp.bind('change', function onChange() {\n\t\t\t\t\tvar input = Dom.get(uid), form = Dom.get(uid + '_form'), file;\n\n\t\t\t\t\tcomp.unbind('change', onChange);\n\n\t\t\t\t\tif (comp.files.length && input && form) {\n\t\t\t\t\t\tfile = comp.files[0];\n\n\t\t\t\t\t\tinput.setAttribute('id', file.uid);\n\t\t\t\t\t\tform.setAttribute('id', file.uid + '_form');\n\n\t\t\t\t\t\t// set upload target\n\t\t\t\t\t\tform.setAttribute('target', file.uid + '_iframe');\n\t\t\t\t\t}\n\t\t\t\t\tinput = form = null;\n\t\t\t\t}, 998);\n\n\t\t\t\tinput = form = null;\n\t\t\t\tcomp.trigger('change');\n\t\t\t};\n\n\n\t\t\t// route click event to the input\n\t\t\tif (I.can('summon_file_dialog')) {\n\t\t\t\tbrowseButton = Dom.get(_options.browse_button);\n\t\t\t\tEvents.removeEvent(browseButton, 'click', comp.uid);\n\t\t\t\tEvents.addEvent(browseButton, 'click', function(e) {\n\t\t\t\t\tif (input && !input.disabled) { // for some reason FF (up to 8.0.1 so far) lets to click disabled input[type=file]\n\t\t\t\t\t\tinput.click();\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}, comp.uid);\n\t\t\t}\n\n\t\t\t_uid = uid;\n\n\t\t\tshimContainer = currForm = browseButton = null;\n\t\t}\n\n\t\tBasic.extend(this, {\n\t\t\tinit: function(options) {\n\t\t\t\tvar comp = this, I = comp.getRuntime(), shimContainer;\n\n\t\t\t\t// figure out accept string\n\t\t\t\t_options = options;\n\t\t\t\t_mimes = options.accept.mimes || Mime.extList2mimes(options.accept, I.can('filter_by_extension'));\n\n\t\t\t\tshimContainer = I.getShimContainer();\n\n\t\t\t\t(function() {\n\t\t\t\t\tvar browseButton, zIndex, top;\n\n\t\t\t\t\tbrowseButton = Dom.get(options.browse_button);\n\n\t\t\t\t\t// Route click event to the input[type=file] element for browsers that support such behavior\n\t\t\t\t\tif (I.can('summon_file_dialog')) {\n\t\t\t\t\t\tif (Dom.getStyle(browseButton, 'position') === 'static') {\n\t\t\t\t\t\t\tbrowseButton.style.position = 'relative';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tzIndex = parseInt(Dom.getStyle(browseButton, 'z-index'), 10) || 1;\n\n\t\t\t\t\t\tbrowseButton.style.zIndex = zIndex;\n\t\t\t\t\t\tshimContainer.style.zIndex = zIndex - 1;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* Since we have to place input[type=file] on top of the browse_button for some browsers,\n\t\t\t\t\tbrowse_button loses interactivity, so we restore it here */\n\t\t\t\t\ttop = I.can('summon_file_dialog') ? browseButton : shimContainer;\n\n\t\t\t\t\tEvents.addEvent(top, 'mouseover', function() {\n\t\t\t\t\t\tcomp.trigger('mouseenter');\n\t\t\t\t\t}, comp.uid);\n\n\t\t\t\t\tEvents.addEvent(top, 'mouseout', function() {\n\t\t\t\t\t\tcomp.trigger('mouseleave');\n\t\t\t\t\t}, comp.uid);\n\n\t\t\t\t\tEvents.addEvent(top, 'mousedown', function() {\n\t\t\t\t\t\tcomp.trigger('mousedown');\n\t\t\t\t\t}, comp.uid);\n\n\t\t\t\t\tEvents.addEvent(Dom.get(options.container), 'mouseup', function() {\n\t\t\t\t\t\tcomp.trigger('mouseup');\n\t\t\t\t\t}, comp.uid);\n\n\t\t\t\t\tbrowseButton = null;\n\t\t\t\t}());\n\n\t\t\t\taddInput.call(this);\n\n\t\t\t\tshimContainer = null;\n\n\t\t\t\t// trigger ready event asynchronously\n\t\t\t\tcomp.trigger({\n\t\t\t\t\ttype: 'ready',\n\t\t\t\t\tasync: true\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tgetFiles: function() {\n\t\t\t\treturn _files;\n\t\t\t},\n\n\t\t\tdisable: function(state) {\n\t\t\t\tvar input;\n\n\t\t\t\tif ((input = Dom.get(_uid))) {\n\t\t\t\t\tinput.disabled = !!state;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\tvar I = this.getRuntime()\n\t\t\t\t, shim = I.getShim()\n\t\t\t\t, shimContainer = I.getShimContainer()\n\t\t\t\t;\n\t\t\t\t\n\t\t\t\tEvents.removeAllEvents(shimContainer, this.uid);\n\t\t\t\tEvents.removeAllEvents(_options && Dom.get(_options.container), this.uid);\n\t\t\t\tEvents.removeAllEvents(_options && Dom.get(_options.browse_button), this.uid);\n\t\t\t\t\n\t\t\t\tif (shimContainer) {\n\t\t\t\t\tshimContainer.innerHTML = '';\n\t\t\t\t}\n\n\t\t\t\tshim.removeInstance(this.uid);\n\n\t\t\t\t_uid = _files = _mimes = _options = shimContainer = shim = null;\n\t\t\t}\n\t\t});\n\t}\n\n\treturn (extensions.FileInput = FileInput);\n});\n\n// Included from: src/javascript/runtime/html4/file/FileReader.js\n\n/**\n * FileReader.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html4/file/FileReader\n@private\n*/\ndefine(\"moxie/runtime/html4/file/FileReader\", [\n\t\"moxie/runtime/html4/Runtime\",\n\t\"moxie/runtime/html5/file/FileReader\"\n], function(extensions, FileReader) {\n\treturn (extensions.FileReader = FileReader);\n});\n\n// Included from: src/javascript/runtime/html4/xhr/XMLHttpRequest.js\n\n/**\n * XMLHttpRequest.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html4/xhr/XMLHttpRequest\n@private\n*/\ndefine(\"moxie/runtime/html4/xhr/XMLHttpRequest\", [\n\t\"moxie/runtime/html4/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/utils/Url\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/core/utils/Events\",\n\t\"moxie/file/Blob\",\n\t\"moxie/xhr/FormData\"\n], function(extensions, Basic, Dom, Url, x, Events, Blob, FormData) {\n\t\n\tfunction XMLHttpRequest() {\n\t\tvar _status, _response, _iframe;\n\n\t\tfunction cleanup(cb) {\n\t\t\tvar target = this, uid, form, inputs, i, hasFile = false;\n\n\t\t\tif (!_iframe) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tuid = _iframe.id.replace(/_iframe$/, '');\n\n\t\t\tform = Dom.get(uid + '_form');\n\t\t\tif (form) {\n\t\t\t\tinputs = form.getElementsByTagName('input');\n\t\t\t\ti = inputs.length;\n\n\t\t\t\twhile (i--) {\n\t\t\t\t\tswitch (inputs[i].getAttribute('type')) {\n\t\t\t\t\t\tcase 'hidden':\n\t\t\t\t\t\t\tinputs[i].parentNode.removeChild(inputs[i]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'file':\n\t\t\t\t\t\t\thasFile = true; // flag the case for later\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tinputs = [];\n\n\t\t\t\tif (!hasFile) { // we need to keep the form for sake of possible retries\n\t\t\t\t\tform.parentNode.removeChild(form);\n\t\t\t\t}\n\t\t\t\tform = null;\n\t\t\t}\n\n\t\t\t// without timeout, request is marked as canceled (in console)\n\t\t\tsetTimeout(function() {\n\t\t\t\tEvents.removeEvent(_iframe, 'load', target.uid);\n\t\t\t\tif (_iframe.parentNode) { // #382\n\t\t\t\t\t_iframe.parentNode.removeChild(_iframe);\n\t\t\t\t}\n\n\t\t\t\t// check if shim container has any other children, if - not, remove it as well\n\t\t\t\tvar shimContainer = target.getRuntime().getShimContainer();\n\t\t\t\tif (!shimContainer.children.length) {\n\t\t\t\t\tshimContainer.parentNode.removeChild(shimContainer);\n\t\t\t\t}\n\n\t\t\t\tshimContainer = _iframe = null;\n\t\t\t\tcb();\n\t\t\t}, 1);\n\t\t}\n\n\t\tBasic.extend(this, {\n\t\t\tsend: function(meta, data) {\n\t\t\t\tvar target = this, I = target.getRuntime(), uid, form, input, blob;\n\n\t\t\t\t_status = _response = null;\n\n\t\t\t\tfunction createIframe() {\n\t\t\t\t\tvar container = I.getShimContainer() || document.body\n\t\t\t\t\t, temp = document.createElement('div')\n\t\t\t\t\t;\n\n\t\t\t\t\t// IE 6 won't be able to set the name using setAttribute or iframe.name\n\t\t\t\t\ttemp.innerHTML = '<iframe id=\"' + uid + '_iframe\" name=\"' + uid + '_iframe\" src=\"javascript:&quot;&quot;\" style=\"display:none\"></iframe>';\n\t\t\t\t\t_iframe = temp.firstChild;\n\t\t\t\t\tcontainer.appendChild(_iframe);\n\n\t\t\t\t\t/* _iframe.onreadystatechange = function() {\n\t\t\t\t\t\tconsole.info(_iframe.readyState);\n\t\t\t\t\t};*/\n\n\t\t\t\t\tEvents.addEvent(_iframe, 'load', function() { // _iframe.onload doesn't work in IE lte 8\n\t\t\t\t\t\tvar el;\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tel = _iframe.contentWindow.document || _iframe.contentDocument || window.frames[_iframe.id].document;\n\n\t\t\t\t\t\t\t// try to detect some standard error pages\n\t\t\t\t\t\t\tif (/^4(0[0-9]|1[0-7]|2[2346])\\s/.test(el.title)) { // test if title starts with 4xx HTTP error\n\t\t\t\t\t\t\t\t_status = el.title.replace(/^(\\d+).*$/, '$1');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_status = 200;\n\t\t\t\t\t\t\t\t// get result\n\t\t\t\t\t\t\t\t_response = Basic.trim(el.body.innerHTML);\n\n\t\t\t\t\t\t\t\t// we need to fire these at least once\n\t\t\t\t\t\t\t\ttarget.trigger({\n\t\t\t\t\t\t\t\t\ttype: 'progress',\n\t\t\t\t\t\t\t\t\tloaded: _response.length,\n\t\t\t\t\t\t\t\t\ttotal: _response.length\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tif (blob) { // if we were uploading a file\n\t\t\t\t\t\t\t\t\ttarget.trigger({\n\t\t\t\t\t\t\t\t\t\ttype: 'uploadprogress',\n\t\t\t\t\t\t\t\t\t\tloaded: blob.size || 1025,\n\t\t\t\t\t\t\t\t\t\ttotal: blob.size || 1025\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\tif (Url.hasSameOrigin(meta.url)) {\n\t\t\t\t\t\t\t\t// if response is sent with error code, iframe in IE gets redirected to res://ieframe.dll/http_x.htm\n\t\t\t\t\t\t\t\t// which obviously results to cross domain error (wtf?)\n\t\t\t\t\t\t\t\t_status = 404;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcleanup.call(target, function() {\n\t\t\t\t\t\t\t\t\ttarget.trigger('error');\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\t\n\t\t\t\t\t\n\t\t\t\t\t\tcleanup.call(target, function() {\n\t\t\t\t\t\t\ttarget.trigger('load');\n\t\t\t\t\t\t});\n\t\t\t\t\t}, target.uid);\n\t\t\t\t} // end createIframe\n\n\t\t\t\t// prepare data to be sent and convert if required\n\t\t\t\tif (data instanceof FormData && data.hasBlob()) {\n\t\t\t\t\tblob = data.getBlob();\n\t\t\t\t\tuid = blob.uid;\n\t\t\t\t\tinput = Dom.get(uid);\n\t\t\t\t\tform = Dom.get(uid + '_form');\n\t\t\t\t\tif (!form) {\n\t\t\t\t\t\tthrow new x.DOMException(x.DOMException.NOT_FOUND_ERR);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tuid = Basic.guid('uid_');\n\n\t\t\t\t\tform = document.createElement('form');\n\t\t\t\t\tform.setAttribute('id', uid + '_form');\n\t\t\t\t\tform.setAttribute('method', meta.method);\n\t\t\t\t\tform.setAttribute('enctype', 'multipart/form-data');\n\t\t\t\t\tform.setAttribute('encoding', 'multipart/form-data');\n\t\t\t\t\tform.setAttribute('target', uid + '_iframe');\n\n\t\t\t\t\tI.getShimContainer().appendChild(form);\n\t\t\t\t}\n\n\t\t\t\tif (data instanceof FormData) {\n\t\t\t\t\tdata.each(function(value, name) {\n\t\t\t\t\t\tif (value instanceof Blob) {\n\t\t\t\t\t\t\tif (input) {\n\t\t\t\t\t\t\t\tinput.setAttribute('name', name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar hidden = document.createElement('input');\n\n\t\t\t\t\t\t\tBasic.extend(hidden, {\n\t\t\t\t\t\t\t\ttype : 'hidden',\n\t\t\t\t\t\t\t\tname : name,\n\t\t\t\t\t\t\t\tvalue : value\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// make sure that input[type=\"file\"], if it's there, comes last\n\t\t\t\t\t\t\tif (input) {\n\t\t\t\t\t\t\t\tform.insertBefore(hidden, input);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tform.appendChild(hidden);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// set destination url\n\t\t\t\tform.setAttribute(\"action\", meta.url);\n\n\t\t\t\tcreateIframe();\n\t\t\t\tform.submit();\n\t\t\t\ttarget.trigger('loadstart');\n\t\t\t},\n\n\t\t\tgetStatus: function() {\n\t\t\t\treturn _status;\n\t\t\t},\n\n\t\t\tgetResponse: function(responseType) {\n\t\t\t\tif ('json' === responseType) {\n\t\t\t\t\t// strip off <pre>..</pre> tags that might be enclosing the response\n\t\t\t\t\tif (Basic.typeOf(_response) === 'string' && !!window.JSON) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\treturn JSON.parse(_response.replace(/^\\s*<pre[^>]*>/, '').replace(/<\\/pre>\\s*$/, ''));\n\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t} \n\t\t\t\t} else if ('document' === responseType) {\n\n\t\t\t\t}\n\t\t\t\treturn _response;\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tvar target = this;\n\n\t\t\t\tif (_iframe && _iframe.contentWindow) {\n\t\t\t\t\tif (_iframe.contentWindow.stop) { // FireFox/Safari/Chrome\n\t\t\t\t\t\t_iframe.contentWindow.stop();\n\t\t\t\t\t} else if (_iframe.contentWindow.document.execCommand) { // IE\n\t\t\t\t\t\t_iframe.contentWindow.document.execCommand('Stop');\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_iframe.src = \"about:blank\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcleanup.call(this, function() {\n\t\t\t\t\t// target.dispatchEvent('readystatechange');\n\t\t\t\t\ttarget.dispatchEvent('abort');\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\treturn (extensions.XMLHttpRequest = XMLHttpRequest);\n});\n\n// Included from: src/javascript/runtime/html4/image/Image.js\n\n/**\n * Image.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html4/image/Image\n@private\n*/\ndefine(\"moxie/runtime/html4/image/Image\", [\n\t\"moxie/runtime/html4/Runtime\",\n\t\"moxie/runtime/html5/image/Image\"\n], function(extensions, Image) {\n\treturn (extensions.Image = Image);\n});\n\nexpose([\"moxie/core/utils/Basic\",\"moxie/core/I18n\",\"moxie/core/utils/Mime\",\"moxie/core/utils/Env\",\"moxie/core/utils/Dom\",\"moxie/core/Exceptions\",\"moxie/core/EventTarget\",\"moxie/core/utils/Encode\",\"moxie/runtime/Runtime\",\"moxie/runtime/RuntimeClient\",\"moxie/file/Blob\",\"moxie/file/File\",\"moxie/file/FileInput\",\"moxie/file/FileDrop\",\"moxie/runtime/RuntimeTarget\",\"moxie/file/FileReader\",\"moxie/core/utils/Url\",\"moxie/file/FileReaderSync\",\"moxie/xhr/FormData\",\"moxie/xhr/XMLHttpRequest\",\"moxie/runtime/Transporter\",\"moxie/image/Image\",\"moxie/core/utils/Events\"]);\n})(window);/**\n * o.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/*global moxie:true */\n\n/**\nGlobally exposed namespace with the most frequently used public classes and handy methods.\n\n@class o\n@static\n@private\n*/\n(function(exports) {\n\t\"use strict\";\n\n\tvar o = {}, inArray = exports.moxie.core.utils.Basic.inArray;\n\n\t// directly add some public classes\n\t// (we do it dynamically here, since for custom builds we cannot know beforehand what modules were included)\n\t(function addAlias(ns) {\n\t\tvar name, itemType;\n\t\tfor (name in ns) {\n\t\t\titemType = typeof(ns[name]);\n\t\t\tif (itemType === 'object' && !~inArray(name, ['Exceptions', 'Env', 'Mime'])) {\n\t\t\t\taddAlias(ns[name]);\n\t\t\t} else if (itemType === 'function') {\n\t\t\t\to[name] = ns[name];\n\t\t\t}\n\t\t}\n\t})(exports.moxie);\n\n\t// add some manually\n\to.Env = exports.moxie.core.utils.Env;\n\to.Mime = exports.moxie.core.utils.Mime;\n\to.Exceptions = exports.moxie.core.Exceptions;\n\n\t// expose globally\n\texports.mOxie = o;\n\tif (!exports.o) {\n\t\texports.o = o;\n\t}\n\treturn o;\n})(window);\n\nexport default mOxie;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/upload/moxie.js\n// module id = HvkJ\n// module chunks = 0","<!-- style样式代码 -->\n<style lang=\"less\">\n@import (reference) '../common/css/common';\n@module: c-upload;\n\n.@{module} {\n    width: 0;\n    height: 0;\n    opacity: 0;\n}\n</style>\n\n<!-- html代码 -->\n<template>\n    <div :id=\"container\" class=\"c-upload\"></div>\n</template>\n\n<script>\nexport default {\n    name: 'uploadImg',\n    data () {\n    \treturn {\n    \t\taccessid: '',\n            host: '',\n            policyBase64: '',\n            signature: '',\n            key: '',\n            expire: 0,\n            uploadfilename: {}\n    \t}\n    },\n    props: ['type', 'select', 'container'],\n    methods: {\n        getParam (cb){\n            this.$store.dispatch('common_getPolicyAndAccess', {\n                type: this.type || 1\n            }).then( (res) => {\n                //可以判断当前expire是否超过了当前时间,如果超过了当前时间,就重新取一下.3s 做为缓冲\n                this.host = res.host;\n                this.policyBase64 = res.policy;\n                this.accessid = res.accessid;\n                this.signature = res.signature;\n                this.expire = parseInt(res.expire);\n                this.key = res.dir;\n\n                cb && cb();\n                this.$store.dispatch('bubble_success', res);\n            }).catch( (err) => {\n                this.$store.dispatch('bubble_fail', err);\n            })\n        },\n        random_string (len){\n        　　var len = len || 32;\n        　　var chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';   \n        　　var maxPos = chars.length;\n        　　var pwd = '';\n        　　for (var i = 0; i < len; i++) {\n            　　pwd += chars.charAt(Math.floor(Math.random() * maxPos));\n            }\n            return pwd;\n        },\n        upload (file){\n            var imgURL;\n            try {  \n                //Firefox 因安全性问题已无法直接通过input[file].value 获取完整的文件路径  \n                try {  \n                    imgURL =  file.getAsDataURL();  \n                } catch(e) {  \n                    imgURL = window.URL.createObjectURL(file);  \n                }\n            } catch(e) {  \n                var reader = new FileReader();  \n                reader.onload = function (e) {  \n                    imgURL = e.target.result;  \n                };  \n                reader.readAsDataURL(file);  \n            }\n            return imgURL;\n        },\n        send_request (filename){\n            // 开始传输图片\n            var pos = filename.lastIndexOf('.')\n            var suffix = filename.substring(pos);\n            var uploadfilename = this.key + this.random_string(10) + suffix;\n            this.uploadfilename[filename] = {\n                src: this.host + '/' + uploadfilename,\n                load: 0\n            };\n\n            this.uploader.setOption({\n                'url': this.host,\n                'multipart_params': {\n                    'key' : uploadfilename,\n                    'policy': this.policyBase64,\n                    'OSSAccessKeyId': this.accessid, \n                    'signature': this.signature,\n                    'success_action_status' : '200', //让服务端返回200,不然，默认会返回204\n                }\n            });\n            this.uploader.start();\n        }\n    },\n    mounted (){\n        var that = this;\n        this.getParam();\n        this.uploader = new this.$plupload.Uploader({\n            runtimes: 'html5, flash, silverlight, html4',\n            browse_button: this.select, \n            container: document.getElementById(this.container),\n            flash_swf_url: 'lib/plupload-2.1.2/js/Moxie.swf',\n            silverlight_xap_url: 'lib/plupload-2.1.2/js/Moxie.xap',\n            url: 'https://oss.aliyuncs.com',\n            filters: {\n                mime_types: [ //只允许上传图片和zip,rar文件\n                    { \n                        title: \"Image files\", \n                        extensions: \"jpg,gif,png,bmp\" \n                    }, \n                ],\n                max_file_size: '10mb', //最大只能上传10mb的文件\n                prevent_duplicates: true //不允许选取重复文件\n            },\n            init: {\n                // 初始化完毕\n                PostInit: function() {\n                    // todo\n                },\n                // 添加图片成功\n                FilesAdded: (up, files) => {\n                    var now = Date.parse(new Date()) / 1000; \n                    if (this.expire < now + 3) {\n                        this.getParam( res => {\n                            this.uploader.start();\n                        })\n                    } else {\n                        this.uploader.start();\n                    }\n                },\n                // 上传前\n                BeforeUpload: function(up, file) {\n                    that.send_request(file.name);\n                },\n                // 上传过程中\n                UploadProgress: function(up, file) {\n                    // todo\n                },\n                // 上传成功\n                FileUploaded: (up, file, info) => {\n                    var fileUrl = this.uploadfilename[file.name].src;\n                    this.uploadfilename[file.name].load = 1;\n                    this.$emit('uploadImg_uploaded', fileUrl);\n                },\n                // 上传失败\n                Error: (up, err) => {\n                    if (err.code == -602) {\n                        var fileUrl = this.uploadfilename[err.file.name].src;\n                        this.$emit('uploadImg_uploaded', fileUrl);\n                    } else {\n                        this.$emit('uploadImg_error', err);    \n                    }\n                }\n            }\n        });\n        this.uploader.init();\n    }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// uploadImg.vue?9189a820","<!-- style样式代码 -->\n<style lang=\"less\">\n@import (reference) '../common/css/common';\n    @module: c-artice-edit;\n    .@{module} {\n        position: fixed;\n        top: 0;\n        left: 0;\n        z-index: 20;\n        width: 100%;\n        height: 100%;\n        & &-mask {\n            position: absolute;\n            top: 0;\n            left: 0;\n            z-index: 1;\n            width: 100%;\n            height: 100%;\n            background-color: rgba(0,0,0,0.5);\n        }\n        & &-wrap {\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            z-index: 2;\n            width: 660px;\n            transform: translate(-50%, -50%);\n        }\n    }\n    .@{module}__create {\n        width: 100%;\n        & .create-top {\n            width: 100%;\n            padding: 20px;\n            .default_backgroud_3;\n            .default_border-r-4;\n            & .create-top-left {\n                width: 210px;\n                margin-right: 20px;\n                .default_float_l;\n                .default_border-r-4;\n                & .create-top-left-img {\n                    position: relative;\n                    width: 220px;\n                    height: 330px;\n                    .default_backgroud_5;\n                    & .img {\n                        width: 100%;\n                        height: 100%;\n                        overflow: hidden;\n                        & img {\n                            width: 100%;\n                        }\n                    }\n                    & .mask {\n                        position: absolute;\n                        top: 0;\n                        right: 0;\n                        width: 220px;\n                        height: 330px;\n                        line-height: 330px;\n                        opacity: 0;\n                        transition: opacity @default_speed_1;\n                        background-color: rgba(0,0,0,0.6);\n                        .default_center;\n                        .default_color_1;\n                        .default_font_size_7;\n                        .default_font_bolder;\n                        .default_pointer;\n                        &:hover {\n                            opacity: 1;\n                            .skin_icon_author-6_on;\n                        }\n                    }\n                    & .c-dialog__tip {\n                        transform: translate(-115%, 0);\n                    }\n                }\n                & .create-top-left-text {\n                    width: 220px;\n                    height: 40px;\n                    line-height: 40px;\n                    .default_backgroud_2;\n                    .default_font_size_1;\n                    .default_color_2;\n                    .default_center;\n                }\n            }\n            & .create-top-right {\n                width: 380px;\n                .default_float_l;\n                & .create-top-item {\n                    width: 380px;\n                    height: 50px;\n                    margin-bottom: 10px;\n                    &:last-child {\n                        margin-bottom: 0;\n                    }\n                    &.z-mini {\n                        height: 40px;\n                    }\n                }\n                & .create-top-input {\n                    position: relative;\n                    width: 100%;\n                    height: 50px;\n                    &.create-top-oldimg {\n                        position: relative;\n                        width: 100%;\n                        height: 50px;\n                        line-height: 50px;\n                        padding: 0 20px;\n                        font-size: 14px;\n                        border: 1px solid #232323;\n                        border-radius: 4px;\n                        .default_backgroud_4;\n                        & span {\n                            display: block;\n                            float: left;\n                            width: 16px;\n                            height: 16px;\n                            margin-top: 15px;\n                            margin-right: 10px;\n                            .skin_icon_edit-12;\n                            .default_pointer;\n                            &:hover {\n                                .skin_icon_edit-12_on;\n                            }\n                        }\n                        & input {\n                            float: left;\n                            width: 300px;\n                            height: 48px;\n                            line-height: 48px;\n                            .default_color_4;\n                        }\n                    }\n                }\n                & .create-top-name,\n                & .create-top-old {\n                    & .c-dialog__tip {\n                        transform: translate(395px, 0);\n                    }\n                }\n                & .create-top-select {\n                    position: relative;\n                    float: left;\n                    width: 120px;\n                    height: 40px;\n                    line-height: 40px;\n                    margin-left: 10px;\n                    .default_border-13;\n                    .default_border-r-4;\n                    .default_backgroud_4;\n                    .default_color_2;\n                    .default_font_size_2;\n                    .default_center;\n                    .default_pointer;\n                    & span {\n                        .default_disline;\n                        vertical-align: middle;\n                    }\n                    & .c-dialog__tip {\n                        width: 200px;\n                    }\n                    &:first-child {\n                        margin-left: 0;\n                    }\n                    &:first-child .c-dialog__tip {\n                        transform: translate(-110%, 0);\n                    }\n                    &.create-top-share .c-dialog__tip {\n                        transform: translate(205px, 0);\n                    }\n                    &.create-top-level .c-dialog__tip {\n                        width: 220px;\n                        transform: translate(140px, 0);\n                    }\n                    &.create-top-status .c-dialog__tip {\n                        width: 200px;\n                    }\n                    &.z-active .cpm_sub_more {\n                        display: block;\n                    }\n                    &.z-width {\n                        width: 185px;\n                    }\n                }\n                & .create-top-tagsInput {\n                    position: relative;\n                    height: 50px;\n                    & .tag-wrap {\n                        position: relative;\n                        width: 100%;\n                        height: 50px;\n                    }\n                    & .tag-list {\n                        position: absolute;\n                        top: 10px;\n                        left: 20px;\n                        height: 50px;\n                        & .tag-item {\n                            position: relative;\n                            display: inline-block;\n                            height: 30px;\n                            line-height: 30px;\n                            padding: 0 10px 0 12px;\n                            margin-right: 10px;\n                            border-radius: 15px;\n                            .default_color_2;\n                            .default_font_size_2;\n                            .default_backgroud_3;\n                            .default_center;\n                            .default_middle;\n                            & .tag-item-text {\n                                float: left;\n                                height: 30px;\n                                line-height: 30px;\n                                margin-right: 6px;\n                            }\n                            & em {\n                                float: left;\n                                display: block;\n                                width: 16px;\n                                height: 16px;\n                                margin-top: 7px;\n                                .skin_icon_edit-15;\n                                .default_pointer;\n                            }\n                        }\n                    }\n                    & .tag-edit {\n                        display: inline-block;\n                        height: 50px;\n                        line-height: 50px;\n                        padding: 10px 0 10px 20px;\n                        .default_color_2;\n                        // .default_border-n!important;\n                    }\n                    & .c-dialog__tip {\n                        transform: translate(415px, 0);\n                    }\n                    & .cpm_form_input {\n                        position: relative;\n                        padding: 0;\n                    }\n                }\n                & .create-tags-select {\n                    position: absolute;\n                    top: 53px;\n                    left: 0;\n                    z-index: 4;\n                    width: 100%;\n                    overflow: hidden;\n                    .default_border-r-4;\n                    .default_border_shadow_3;\n                    .default_border_shadow_5;\n                    & .create-tags-select-title {\n                        position: relative;\n                        width: 100%;\n                        height: 50px;\n                        line-height: 50px;\n                        padding-left: 30px;\n                        .default_backgroud_2;\n                        .default_color_3;\n                        .default_font_size_3;\n                        & em {\n                            position: absolute;\n                            top: 50%;\n                            right: 30px;\n                            width: 20px;\n                            height: 20px;\n                            transform: translate(0, -50%);\n                            .skin_icon_refresh;\n                            .default_pointer;\n                        }\n                    }  \n                    & .create-tags-select-body {\n                        padding: 20px;\n                        overflow: hidden;\n                        .default_backgroud_3;\n                        & .body-item {\n                            padding: 13px 15px;\n                            margin-right: 10px;\n                            margin-bottom: 10px;\n                            .default_color_3;\n                            .default_float_l;\n                            .default_backgroud_5;\n                            .default_border-r-4;\n                            .default_pointer;\n                            &.z-select {\n                                .default_backgroud_7;\n                            }\n                        }\n                    }\n                }\n                & .create-top-form {\n                    height: 150px;\n                    width: 100%;\n                    & .c-dialog__tip {\n                        transform: translate(415px, 0);\n                    }\n                }\n            }\n            & .create-top-agree {\n                height: 20px;\n                overflow: hidden;\n                margin-top: 20px;\n                & em {\n                    float: left;\n                    display: block;\n                    width: 20px;\n                    height: 20px;\n                    margin-right: 10px;\n                    overflow: hidden;\n                    .default_backgroud_4;\n                    .default_border-r-4;\n                    .default_middle;\n                }\n                & p {\n                    float: left;\n                    display: block;\n                    height: 20px;\n                    line-height: 20px;\n                    .default_float_l;\n                    .default_color_2;\n                    .default_font_size_1;\n                    & a {\n                        .default_color_1;\n                    }\n                }\n                &.z-on {\n                    & em {\n                        .default_select_bg_01;\n                    }\n                }\n            }\n        }\n        & .create-bottom {\n            width: 100%;\n            height: 50px;\n            & .create-bottom-btn {\n                width: 100%;\n                height: 50px;\n                padding: 10px 0;\n                overflow: hidden;\n                .default_backgroud_7;\n                & .create-bottom-item {\n                    float: left;\n                    height: 30px;\n                    line-height: 30px;\n                    text-align: center;\n                    .default_color_2;\n                    .default_font_size_2;\n                    .default_pointer;\n                    &:hover {\n                        .default_color_1;\n                    }\n                }\n                & .create-bottom-cancel {\n                    width: 50%;\n                    .default_border-rr-2;\n                }\n                & .create-bottom-commit {\n                    width: 50%;\n                }\n            }\n        }\n    }\n</style>\n\n<!-- html代码 -->\n<template>\n<div v-if=\"show\" class=\"c-artice-edit\">\n<div class=\"c-artice-edit-mask\">\n<div class=\"c-artice-edit-wrap\">\n    <div class=\"c-artice-edit__create\">\n        <div class=\"create-top\">\n            <div class='create-top-left'>\n                <div class=\"create-top-left-img\">\n                    <div v-if=\"!reg_img\" class=\"c-dialog__tip\">\n                        <div class=\"tip-arrow\"></div>\n                        <div class=\"tip-text\">{{reg_img_con}}</div>\n                    </div>\n                    <div class=\"img\">\n                        <div class=\"mask\" id=\"article_upload_image_select\">添加封面</div>\n                        <img v-if=\"image\" :src=\"image\" />\n                    </div>\n                    <UploadImg \n                        type=\"2\" \n                        select=\"article_upload_image_select\"\n                        container=\"article_container\"\n                        @uploadImg_uploaded=\"uploaded\"\n                    />\n                </div>\n                <div class=\"create-top-left-text\">添加封面：建议360X480以上</div>\n            </div>\n            <div class='create-top-right'>\n            <!-- 名称 -->\n                <div class=\"create-top-item create-top-input create-top-name cpm_form_input\" :class=\"{'z-limit': articlename.length>30}\">\n                    <div v-if=\"!reg_name\" class=\"c-dialog__tip z-right\">\n                        <div class=\"tip-arrow\"></div>\n                        <div class=\"tip-text\">{{reg_name_con}}</div>\n                    </div>\n                    <input type=\"text\" placeholder=\"作品名称\" v-model=\"articlename\" @focus=\"focus\" @blur=\"blur\" />\n                    <!-- <span>{{articlename.length}}/10</span> -->\n                </div>\n            <!-- 授权 -->\n            <!-- 转载 -->\n                <div class=\"create-top-item z-mini\">\n                    <div @mouseover=\"selctEnter\" @mouseout=\"selctOut\" class=\"create-top-select create-top-control z-width j-close-1\">\n                        <div v-if=\"!reg_control\" class=\"c-dialog__tip\">\n                            <div class=\"tip-arrow\"></div>\n                            <div class=\"tip-text\">{{reg_control_con}}</div>\n                        </div>\n                        <span>{{control}}</span>\n                        <div class=\"c-sub-more cpm_sub_more\">\n                            <div class=\"item\" @click=\"controlShowValue\" data-control_id=\"1\">是</div>\n                            <div class=\"item\" @click=\"controlShowValue\" data-control_id=\"0\">否</div>\n                        </div>\n                    </div>\n                    <div @mouseover=\"selctEnter\" @mouseout=\"selctOut\" class=\"create-top-select create-top-share z-width j-close-1\">\n                        <div v-if=\"!reg_share\" class=\"c-dialog__tip z-right\">\n                            <div class=\"tip-arrow\"></div>\n                            <div class=\"tip-text\">{{reg_share_con}}</div>\n                        </div>\n                        <span>{{share}}</span>\n                        <div class=\"c-sub-more cpm_sub_more\">\n                            <div class=\"item\" @click=\"shareShowValue\" data-share_id=\"1\">是</div>\n                            <div class=\"item\" @click=\"shareShowValue\" data-share_id=\"0\">否</div>\n                        </div>\n                    </div>\n                </div>\n            <!-- 授权信息填写 -->\n                <div v-if=\"control_id == 1\" class=\"create-top-item create-top-input create-top-old create-top-oldname cpm_form_input\">\n                    <div v-if=\"!reg_old_name\" class=\"c-dialog__tip z-right\">\n                        <div class=\"tip-arrow\"></div>\n                        <div class=\"tip-text\">{{reg_old_name_con}}</div>\n                    </div>\n                    <input type=\"text\" placeholder=\"原作品故事名字\" v-model=\"oldname\" @focus=\"focus\" @blur=\"blur\" />\n                </div>\n                <div v-if=\"control_id == 1\" class=\"create-top-item create-top-input create-top-old create-top-oldauthor cpm_form_input\">\n                    <div v-if=\"!reg_old_author\" class=\"c-dialog__tip z-right\">\n                        <div class=\"tip-arrow\"></div>\n                        <div class=\"tip-text\">{{reg_old_author_con}}</div>\n                    </div>\n                    <input type=\"text\" placeholder=\"原作者\" v-model=\"oldauthor\" @focus=\"focus\" @blur=\"blur\" />\n                </div>\n                <div v-if=\"control_id == 1\" class=\"create-top-item create-top-input create-top-old create-top-oldurl cpm_form_input\">\n                    <div v-if=\"!reg_old_url\" class=\"c-dialog__tip z-right\">\n                        <div class=\"tip-arrow\"></div>\n                        <div class=\"tip-text\">{{reg_old_url_con}}</div>\n                    </div>\n                    <input type=\"text\" placeholder=\"原作品连接\" v-model=\"oldurl\" @focus=\"focus\" @blur=\"blur\" />\n                </div>\n                <div v-if=\"control_id == 1\" class=\"create-top-item create-top-input create-top-old create-top-oldimg\">\n                    <div v-if=\"!reg_old_img\" class=\"c-dialog__tip z-right\">\n                        <div class=\"tip-arrow\"></div>\n                        <div class=\"tip-text\">{{reg_old_img_con}}</div>\n                    </div>\n                    <span id=\"old_upload_image_select\"></span>\n                    <input type=\"text\" disabled placeholder=\"上传翻译授权截图证明\" v-model=\"oldimg\" />\n                    <UploadImg \n                        type=\"2\"\n                        select=\"old_upload_image_select\"\n                        container=\"old_container\"\n                        @uploadImg_uploaded=\"old_uploaded\"\n                    />\n                </div>\n            <!-- 类型 -->\n            <!-- 状态 -->\n            <!-- 等级 -->\n                <div class=\"create-top-item z-mini\">\n                    <div @mouseover=\"selctEnter\" @mouseout=\"selctOut\" class=\"create-top-select create-top-type j-close-1\">\n                        <div v-if=\"!reg_type\" class=\"c-dialog__tip\">\n                            <div class=\"tip-arrow\"></div>\n                            <div class=\"tip-text\">{{reg_type_con}}</div>\n                        </div>\n                        <span>{{articletype}}</span>\n                        <div class=\"c-sub-more cpm_sub_more\">\n                            <div class=\"item\" v-for=\"item in category.laberSubnode\" @click=\"typeShowValue\" :data-id=\"item.category_id\">{{item.category_title}}</div>\n                        </div>\n                    </div>\n                    <div @mouseover=\"selctEnter\" @mouseout=\"selctOut\" class=\"create-top-select create-top-status j-close-1\">\n                        <div v-if=\"!reg_status\" class=\"c-dialog__tip z-top\">\n                            <div class=\"tip-arrow\"></div>\n                            <div class=\"tip-text\">{{reg_status_con}}</div>\n                        </div>\n                        <span>{{status}}</span>\n                        <div v-if=\"catalog.statusArr.length\" class=\"c-sub-more cpm_sub_more\">\n                            <div class=\"item\" v-for=\"item in catalog.statusArr\" @click=\"statusShowValue\" :data-audit_status=\"item.audit_status\">{{item.text}}</div>\n                        </div>\n                    </div>\n                    <div @mouseover=\"selctEnter\" @mouseout=\"selctOut\" class=\"create-top-select create-top-level j-close-1\">\n                        <div v-if=\"!reg_level\" class=\"c-dialog__tip z-right\">\n                            <div class=\"tip-arrow\"></div>\n                            <div class=\"tip-text\">{{reg_level_con}}</div>\n                        </div>\n                        <span>{{level}}</span>\n                        <div v-if=\"catalog.levelArr.length\" class=\"c-sub-more cpm_sub_more\">\n                            <div class=\"item\" v-for=\"item in catalog.levelArr\" @click=\"levelShowValue\" :data-level_id=\"item.level_id\">{{item.text}}</div>\n                        </div>\n                    </div>\n                </div>\n            <!-- 标签 -->\n                <div class=\"create-top-item create-top-tagsInput j-close-2\" @click=\"tagsshowOpen\">\n                    <div v-if=\"!reg_tag\" class=\"c-dialog__tip z-right\">\n                        <div class=\"tip-arrow\"></div>\n                        <div class=\"tip-text\">{{reg_tag_con}}</div>\n                    </div>\n                    <div class=\"tag-wrap cpm_form_input\" :class=\"{'z-limit': tags.length>3, 'z-error': tagsshow}\">\n                        <div class=\"tag-list\">\n                            <div class=\"tag-item\" v-for=\"(item, index) in tags\"><div class=\"tag-item-text\">{{item}}</div><em @click.stop=\"deleteTag\" :data-index=\"index\"></em></div>\n                        </div>\n                        <input class=\"tag-edit\" @keyup.enter.stop.prevent=\"enter\" @keyup.space.stop.prevent=\"enter\" type=\"text\" v-model=\"tagsVal\" :placeholder=\"tags.length ? '' : '多个标签用空格区分'\" />\n                        <!-- <span>{{tags.length}}/3</span> -->\n                    </div>\n\n                    <div v-if=\"tagsshow\" class=\"create-tags-select\">\n                        <div class=\"create-tags-select-title\">\n                            <span>热门标签</span>\n                            <em @click=\"refresh\"></em>\n                        </div>\n                        <div class=\"create-tags-select-body\">\n                            <div v-for=\"item in category.tags\" @click=\"tagsSelect\" class=\"body-item\" :class=\"{'z-select': tags.indexOf(item) > -1}\">{{item}}</div>\n                        </div>\n                    </div>\n                </div>\n            <!-- 介绍 -->\n                <div class=\"create-top-item create-top-form cpm_form_textarea\" :class=\"{'z-limit': intro.length>1000}\">\n                    <div v-if=\"!reg_intro\" class=\"c-dialog__tip z-right\">\n                        <div class=\"tip-arrow\"></div>\n                        <div class=\"tip-text\">{{reg_intro_con}}</div>\n                    </div>\n                    <textarea placeholder=\"填写作品简介...\" v-model=\"intro\" @focus=\"focus\" @blur=\"blur\"></textarea>\n                    <!-- <span>{{intro.length}}/100</span> -->\n                </div>\n            </div>\n            <div class=\"cpm_clear\"></div>\n            <div class=\"create-top-agree\" :class=\"{'z-on': agree}\" @click=\"agreeSwitch\">\n                <em></em>\n                <p>我已阅读并同意遵守 <a href='./about.html'>《耳语之森原创声明及相关功能使用协议》 </a>\n                </p>\n            </div>\n        </div>\n        <div class=\"create-bottom\">\n            \n            <div class=\"create-bottom-btn z-on\">\n                <div class=\"create-bottom-item create-bottom-cancel\" @click=\"cancel\">取消</div>\n                <div class=\"create-bottom-item create-bottom-commit\" @click=\"save\">\n                    <span>{{create ? '更新作品' : '创建新作品'}}</span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n</div>\n</div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport image from '../common/images/img/catalog.png';\nexport default {\n    data (){\n        return {\n            show: false,\n            tagsshow: false,\n            create: false,\n\n            image: image,\n            articlename: '',\n            control: '翻译授权',\n            control_id: -1,\n            oldname: '',\n            oldimg: '',\n            oldurl: '',\n            oldauthor: '',\n            share: '允许转载',\n            share_id: -1,\n            articletype: '类型',\n            status: '状态',\n            level: '等级',\n            category_id: -1,\n            audit_status: -1,\n            level_id: -1,\n            tags: [],\n            tagsVal: '',\n            intro: '',\n            agree: true,\n\n            reg_img: true,\n            reg_name: true,\n            reg_type: true,\n            reg_control: true,\n            reg_old_name: true,\n            reg_old_url: true,\n            reg_old_author: true,\n            reg_old_img: true,\n            reg_share: true,\n            reg_status: true,\n            reg_level: true,\n            reg_tag: true,\n            reg_intro: true,\n            reg_img_con: '',\n            reg_name_con: '',\n            reg_control_con: '',\n            reg_old_name_con: '',\n            reg_old_url_con: '',\n            reg_old_img_con: '',\n            reg_old_author_con: '',\n            reg_share_con: '',\n            reg_type_con: '',\n            reg_status_con: '',\n            reg_level_con: '',\n            reg_tag_con: '',\n            reg_intro_con: '',\n\n            // 随机标签\n            count: 8\n        }\n    },\n    props: ['resType'],\n    computed: mapState({\n        catalog: state => state.opus.catalog,\n        category: state => state.opus.category\n    }),\n    methods: {\n        focus (e){\n            $(e.currentTarget).parents('.create-top-item').addClass('z-active');\n        },\n        blur (e){\n            $(e.currentTarget).parents('.create-top-item').removeClass('z-active');\n        },\n        cancel (){\n            this.show = false;\n        },\n        agreeSwitch (e) {\n            this.agree = !this.agree;\n        },\n        selctEnter (e){\n            $(e.currentTarget).addClass('z-active');\n        },\n        selctOut (e) {\n            $(e.currentTarget).removeClass('z-active');  \n        },\n        typeShowValue (e){\n            this.articletype = $(e.currentTarget).text();\n            this.category_id = $(e.currentTarget).attr('data-id');\n            $(e.currentTarget).parents('.create-top-select').removeClass('z-active');\n        },\n        statusShowValue (e){\n            this.status = $(e.currentTarget).text();\n            this.audit_status = $(e.currentTarget).attr('data-audit_status');\n            $(e.currentTarget).parents('.create-top-select').removeClass('z-active');\n        },\n        levelShowValue (e){\n            this.level = $(e.currentTarget).text();\n            this.level_id = $(e.currentTarget).attr('data-level_id');\n            $(e.currentTarget).parents('.create-top-select').removeClass('z-active');\n        },\n        controlShowValue (e){\n            this.control = $(e.currentTarget).text();\n            this.control_id = Number($(e.currentTarget).attr('data-control_id'));\n            $(e.currentTarget).parents('.create-top-select').removeClass('z-active');\n        },\n        shareShowValue (e){\n            this.share = $(e.currentTarget).text();\n            this.share_id = Number($(e.currentTarget).attr('data-share_id'));\n            $(e.currentTarget).parents('.create-top-select').removeClass('z-active');\n        },\n        tagsshowOpen (e){\n            this.tagsshow = true;\n            var node = e.currentTarget;\n                node = $(node);\n            node.find('input').focus();\n            setTimeout(()=>{\n                node.find('input').focus();\n            }, 20)\n        },\n        deleteTag (e){\n            var index = e.currentTarget.dataset['index'];\n                index = Number(index);\n            this.tags.splice(index, 1);\n            return false;\n        },\n        enter (e){\n            if (this.tags.length >= 3) {\n                return false;\n            }\n            \n            this.tagsVal = $.trim(this.tagsVal);\n            var text = this.tagsVal;\n            if ($.trim(text) == '') {\n                this.$store.dispatch('bubble_showBubble', {\n                    show: true,\n                    type: 'top',\n                    top: {\n                        status: 'z-warn',\n                        msg: '标签内容不能为空'\n                    }\n                })\n                return false;\n            }\n            if ($.trim(text).length > 5) {\n                this.$store.dispatch('bubble_showBubble', {\n                    show: true,\n                    type: 'top',\n                    top: {\n                        status: 'z-warn',\n                        msg: '标签内容不能超出5个字'\n                    }\n                })\n                return false;\n            }\n            this.tags.push(text);\n            this.tagsVal = '';\n        },\n        tagsSelect (e){\n            var node = $(e.currentTarget);\n            if (node.hasClass('z-select')) {\n                return false;\n            }\n            if (this.tags.length >= 3) {\n                return false;\n            }\n            var tag = node.text();\n            this.tags.push(tag);\n        },\n        uploaded (fileUrl){\n            // 设置上传的图片\n            this.image = fileUrl;\n        },\n        old_uploaded (fileUrl){\n            // 设置上传的图片\n            this.oldimg = fileUrl;\n        },\n        save (){\n            this.reg_img = true;\n            this.reg_name = true;\n            this.reg_type = true;\n            this.reg_control = true;\n            this.reg_old_name = true;\n            this.reg_old_url = true;\n            this.reg_old_author = true;\n            this.reg_old_img = true;\n            this.reg_share = true;\n            this.reg_status = true;\n            this.reg_level = true;\n            this.reg_tag = true;\n            this.reg_intro = true;\n\n            // 是否上传照片\n            if (!this.image || this.image == image) {\n                this.reg_img = false;\n                this.reg_img_con = '添加封面';\n                return false;\n            } else {\n                this.reg_img = true;\n                this.reg_img_con = '';\n            }\n\n            // 名字\n            if (!$.trim(this.articlename)) {\n                this.reg_name = false;\n                this.reg_name_con = '填写30字中文以内故事名字';\n                return false;\n            } else if ($.trim(this.articlename).length > 30) {\n                this.reg_name = false;\n                this.reg_name_con = '超出最大30个字数';\n                return false;\n            } else {\n                this.reg_name = true;\n                this.reg_name_con = '';\n            }\n\n            // 授权\n            if ($.trim(this.control_id) == -1) {\n                this.reg_control = false;\n                this.reg_control_con = '是否为翻译授权作品';\n                return false;\n            } else {\n                this.reg_control = true;\n                this.reg_control_con = '';\n            }\n\n            // 授权-名称\n            if ($.trim(this.oldname) == '' && this.control_id == 1) {\n                this.reg_old_name = false;\n                this.reg_old_name_con = '填写原作品故事名';\n                return false;\n            } else {\n                this.reg_old_name = true;\n                this.reg_old_name_con = '';\n            }\n\n            // 授权-作者\n            if ($.trim(this.oldauthor) == '' && this.control_id == 1) {\n                this.reg_old_author = false;\n                this.reg_old_author_con = '填写原作者';\n                return false;\n            } else {\n                this.reg_old_author = true;\n                this.reg_old_author_con = '';\n            }\n\n            // 授权-原作品连接\n            if ($.trim(this.oldurl) == '' && this.control_id == 1) {\n                this.reg_old_url = false;\n                this.reg_old_url_con = '填写原作品连接';\n                return false;\n            } else {\n                this.reg_old_url = true;\n                this.reg_old_url_con = '';\n            }\n\n            // 授权-截图证明\n            if ($.trim(this.oldimg) == '' && this.control_id == 1) {\n                this.reg_old_img = false;\n                this.reg_old_img_con = '上传翻译授权截图证明';\n                return false;\n            } else {\n                this.reg_old_img = true;\n                this.reg_old_img_con = '';\n            }\n\n            // 转载\n            if ($.trim(this.share_id) == -1) {\n                this.reg_share = false;\n                this.reg_share_con = '是否允许他人复制和转载';\n                return false;\n            } else {\n                this.reg_share = true;\n                this.reg_share_con = '';\n            }\n\n            // 类型\n            if ($.trim(this.category_id) == -1) {\n                this.reg_type = false;\n                this.reg_type_con = '类型选定不可更改';\n                return false;\n            } else {\n                this.reg_type = true;\n                this.reg_type_con = '';\n            }\n\n            // 状态\n            if ($.trim(this.audit_status) == -1) {\n                this.reg_status = false;\n                this.reg_status_con = '连载完请及时更改便于推荐';\n                return false;\n            } else {\n                this.reg_status = true;\n                this.reg_status_con = '';\n            }\n\n            // 等级\n            if ($.trim(this.level_id) == -1) {\n                this.reg_level = false;\n                this.reg_level_con = '关系到推荐强度选定不可更改';\n                return false;\n            } else {\n                this.reg_level = true;\n                this.reg_level_con = '';\n            }\n\n            // 标签\n            if (!this.tags.length) {\n                this.reg_tag = false;\n                this.reg_tag_con = '填写3个以内标签于推荐';\n                return false;\n            } else if (this.tags.length > 3) {\n                this.reg_tag = false;\n                this.reg_tag_con = '超出3个标签个数';\n                return false;\n            } else {\n                this.reg_tag = true;\n                this.reg_tag_con = '';\n            }\n\n            // 作品介绍\n            if (!$.trim(this.intro)) {\n                this.reg_intro = false;\n                this.reg_intro_con = '填写1000字中文以内简介';\n                return false\n            } else if ($.trim(this.intro).length > 1000) {\n                this.reg_intro = false;\n                this.reg_intro_con = '超出最大1000个字数';\n                return false;\n            } else {\n                this.reg_intro = true;\n                this.reg_intro_con = '';\n            }\n\n            // 协议勾选\n            if (!this.agree) {\n                this.$store.dispatch('bubble_showBubble', {\n                    show: true,\n                    type: 'top',\n                    top: {\n                        status: 'z-warn',\n                        msg: '请同意协议'\n                    }\n                })\n                return false; \n            }\n\n            var that = this;\n            this.$store.dispatch('bubble_showBubble', {\n                show: true,\n                type: 'warn',\n                warn: {\n                    title: '再次确定创建故事?',\n                    html: '<p>为了不被相关部门请喝茶，以及本着挖掘内容更加有深度、而不是单纯靠视觉博人眼球的作品的原则</p>' +\n                    '<p>请确保你的封面和即将发布的章节中，没有涉及血腥、暴力、色情、政治等违规情节，否则不予推送首页，严重者删除内容或封号处理</p><a href=\"javascript:void(0);\">《耳语之森原创声明及相关功能使用协议》 </a>',\n                    comfireFn: function(){\n                        that.addCatalog();\n                    }\n                },\n            })\n        },\n\n        addCatalog (){\n            var option = {\n                \"level\": this.level_id, // 等级\n                \"translate\": this.control_id, // 0 不是翻译类 1 翻译类\n                \"reprint\": this.share_id, // 0 不允许转载 1 允许\n                \"category_id\": this.category_id, // 类别id\n                \"catalog_id\": this.catalog_id, // 目录id\n                \"catalog_title\": this.articlename, //目录标题\n                \"catalog_desc\": this.intro, //简介\n                \"catalog_cover_url\": this.image, //封面\n                \"catalog_status\": this.audit_status, //0 连载中 1 已完结\n                \"catalog_label\": this.tags.join(',') //标签，多个标签逗号分割\n            }\n            // 如果为翻译类作品，需要增加授权信息 必填\n            if (this.control_id == 1) {\n                option.authorize = { \n                    \"original_title\": this.oldname, // 原标题\n                    \"original_url\": this.oldurl, // 原地址\n                    \"original_img_url\": this.oldimg, // 授权截图\n                    \"original_author\": this.oldauthor // 原作者\n                }\n            }\n            this.$store.dispatch(this.create ? 'opus_updateCatalog' : 'opus_addCatalog', option).then( res => {\n                var msg;\n                if (this.create) {\n                    // msg = '发布成功，作品重新进入审核中，请等待';\n                    msg = '更新成功!';\n                } else {\n                    msg = '创建故事成功！块更新章节吧！';\n                }\n                this.$eventHub.$emit('updateCatalog_success');\n                this.show = false;\n\n                // 更新目录信息\n                this.$store.dispatch('opus_setCatalog_info', option)\n\n                this.$store.dispatch('bubble_success', {\n                    ret: 0,\n                    type: 'top',\n                    msg: msg\n                });\n\n                if (this.resType == 'author') {\n                    this.refreshCatalog();\n                }\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            });\n        },\n\n        // 获取分类标签\n        getCategoryList (){\n            this.$store.dispatch('opus_getCategoryList', {}).then( res => {\n                // todo\n                \n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        // 获取标签\n        getLabelList (number){\n            this.$store.dispatch('opus_getLabelList', {\n                // categoryId: this.category_id,\n                count: number || this.count\n            }).then( res => {\n                // todo\n                \n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        refresh (){\n            this.getLabelList();\n        },\n        refreshCatalog (){\n            this.$eventHub.$emit('author_chapter_list_refresh');\n        }\n    },\n    watch: {\n        show (newVal){\n            if (newVal) {\n                // 获取分类标签\n                this.getCategoryList();\n\n                // 获取标签\n                this.getLabelList();\n            }\n        }\n    },\n    updated (){\n        var w = 0;\n        $(\".tag-item\").each(function(){\n            w += $(this).width() + 10;\n        })\n        $('.tag-edit').css('padding-left', w + 20);\n    },\n    mounted (){\n        this.$eventHub.$on('getLabelList', option => {\n            this.getLabelList(option.number);\n        });\n\n        this.$eventHub.$on('header_article_setShow', option => {\n            this.show = option.show;\n\n            if (option.catalog) {\n                this.create = true;\n                this.image = option.catalog.catalog_cover_url;\n                this.articlename = option.catalog.catalog_title;\n                this.category_id = option.catalog.category_id;\n                this.catalog_id = option.catalog.catalog_id;\n                this.articletype = option.catalog.category_title;\n                this.audit_status = option.catalog.audit_status;\n                this.level_id = option.catalog.level;\n                this.intro = option.catalog.catalog_desc;\n                this.share_id = option.catalog.reprint;\n                this.share = option.catalog.reprint == 1 ? '是' : '否';\n                this.control_id = option.catalog.translate;\n                this.control = option.catalog.translate == 1 ? '是' : '否';\n                if (option.catalog.authorize) {\n                    this.oldname = option.catalog.authorize.original_title; \n                    this.oldauthor = option.catalog.authorize.original_author; \n                    this.oldimg = option.catalog.authorize.original_img_url; \n                    this.oldurl = option.catalog.authorize.original_url;\n                }\n              \n                // 匹配标签\n                this.tags = [];\n                option.catalog.labels.map( (item, index) => {\n                    this.tags.push(item);\n                })\n\n                // 匹配状态\n                for (var i = 0, len = this.catalog.statusArr.length; i < len; i++) {\n                    var item = this.catalog.statusArr[i];\n                    if (this.audit_status == item.audit_status) {\n                        this.status = item.text;\n                    }\n                }\n\n                // 匹配等级 \n                for (var i = 0, len = this.catalog.levelArr.length; i < len; i++) {\n                    var item = this.catalog.levelArr[i];\n                    if (this.level_id == item.level_id) {\n                        this.level = item.text;\n                    }\n                }\n            } else {\n                this.create = false;\n                this.image = image;\n                this.articlename = '';\n                this.category_id = -1;\n                this.audit_status = -1;\n                this.level_id = -1;\n                this.intro = '';\n                this.articletype = '类型';\n                this.status = '状态';\n                this.level = '等级';\n                this.tags = [];\n\n                this.control = '翻译授权';\n                this.control_id = -1;\n                this.oldname = '';\n                this.oldimg = '';\n                this.oldurl = '';\n                this.oldauthor = '';\n                this.share = '允许转载';\n                this.share_id = -1;\n            }\n        })\n\n        $('body').on('click', e => {\n            var node = $(e.target);\n            if (!node.hasClass('j-close-1') && node.parents('.j-close-1').length == 0) {\n                this.typeShow = false;\n                this.statusShow = false;\n            }\n            if (!node.hasClass('j-close-2') && node.parents('.j-close-2').length == 0) {\n                this.tagsshow = false;\n                if (this.tags.length == 0) {\n                   $('.j-close-2').find('.tag-edit').text('填写标签便于推荐，多个标签用空格区分');\n                } else {\n                    $('.j-close-2').find('.tag-edit').text('');\n                }\n            }\n        })\n    }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// chapter.edit.vue?6b699a00","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return (_vm.show) ? _c('div', {\n    staticClass: \"c-artice-edit\"\n  }, [_c('div', {\n    staticClass: \"c-artice-edit-mask\"\n  }, [_c('div', {\n    staticClass: \"c-artice-edit-wrap\"\n  }, [_c('div', {\n    staticClass: \"c-artice-edit__create\"\n  }, [_c('div', {\n    staticClass: \"create-top\"\n  }, [_c('div', {\n    staticClass: \"create-top-left\"\n  }, [_c('div', {\n    staticClass: \"create-top-left-img\"\n  }, [(!_vm.reg_img) ? _c('div', {\n    staticClass: \"c-dialog__tip\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_img_con))])]) : _vm._e(), _vm._v(\" \"), _c('div', {\n    staticClass: \"img\"\n  }, [_c('div', {\n    staticClass: \"mask\",\n    attrs: {\n      \"id\": \"article_upload_image_select\"\n    }\n  }, [_vm._v(\"添加封面\")]), _vm._v(\" \"), (_vm.image) ? _c('img', {\n    attrs: {\n      \"src\": _vm.image\n    }\n  }) : _vm._e()]), _vm._v(\" \"), _c('UploadImg', {\n    attrs: {\n      \"type\": \"2\",\n      \"select\": \"article_upload_image_select\",\n      \"container\": \"article_container\"\n    },\n    on: {\n      \"uploadImg_uploaded\": _vm.uploaded\n    }\n  })], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-top-left-text\"\n  }, [_vm._v(\"添加封面：建议360X480以上\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-top-right\"\n  }, [_c('div', {\n    staticClass: \"create-top-item create-top-input create-top-name cpm_form_input\",\n    class: {\n      'z-limit': _vm.articlename.length > 30\n    }\n  }, [(!_vm.reg_name) ? _c('div', {\n    staticClass: \"c-dialog__tip z-right\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_name_con))])]) : _vm._e(), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.articlename),\n      expression: \"articlename\"\n    }],\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": \"作品名称\"\n    },\n    domProps: {\n      \"value\": (_vm.articlename)\n    },\n    on: {\n      \"focus\": _vm.focus,\n      \"blur\": _vm.blur,\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.articlename = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-top-item z-mini\"\n  }, [_c('div', {\n    staticClass: \"create-top-select create-top-control z-width j-close-1\",\n    on: {\n      \"mouseover\": _vm.selctEnter,\n      \"mouseout\": _vm.selctOut\n    }\n  }, [(!_vm.reg_control) ? _c('div', {\n    staticClass: \"c-dialog__tip\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_control_con))])]) : _vm._e(), _vm._v(\" \"), _c('span', [_vm._v(_vm._s(_vm.control))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"c-sub-more cpm_sub_more\"\n  }, [_c('div', {\n    staticClass: \"item\",\n    attrs: {\n      \"data-control_id\": \"1\"\n    },\n    on: {\n      \"click\": _vm.controlShowValue\n    }\n  }, [_vm._v(\"是\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\",\n    attrs: {\n      \"data-control_id\": \"0\"\n    },\n    on: {\n      \"click\": _vm.controlShowValue\n    }\n  }, [_vm._v(\"否\")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-top-select create-top-share z-width j-close-1\",\n    on: {\n      \"mouseover\": _vm.selctEnter,\n      \"mouseout\": _vm.selctOut\n    }\n  }, [(!_vm.reg_share) ? _c('div', {\n    staticClass: \"c-dialog__tip z-right\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_share_con))])]) : _vm._e(), _vm._v(\" \"), _c('span', [_vm._v(_vm._s(_vm.share))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"c-sub-more cpm_sub_more\"\n  }, [_c('div', {\n    staticClass: \"item\",\n    attrs: {\n      \"data-share_id\": \"1\"\n    },\n    on: {\n      \"click\": _vm.shareShowValue\n    }\n  }, [_vm._v(\"是\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\",\n    attrs: {\n      \"data-share_id\": \"0\"\n    },\n    on: {\n      \"click\": _vm.shareShowValue\n    }\n  }, [_vm._v(\"否\")])])])]), _vm._v(\" \"), (_vm.control_id == 1) ? _c('div', {\n    staticClass: \"create-top-item create-top-input create-top-old create-top-oldname cpm_form_input\"\n  }, [(!_vm.reg_old_name) ? _c('div', {\n    staticClass: \"c-dialog__tip z-right\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_old_name_con))])]) : _vm._e(), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.oldname),\n      expression: \"oldname\"\n    }],\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": \"原作品故事名字\"\n    },\n    domProps: {\n      \"value\": (_vm.oldname)\n    },\n    on: {\n      \"focus\": _vm.focus,\n      \"blur\": _vm.blur,\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.oldname = $event.target.value\n      }\n    }\n  })]) : _vm._e(), _vm._v(\" \"), (_vm.control_id == 1) ? _c('div', {\n    staticClass: \"create-top-item create-top-input create-top-old create-top-oldauthor cpm_form_input\"\n  }, [(!_vm.reg_old_author) ? _c('div', {\n    staticClass: \"c-dialog__tip z-right\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_old_author_con))])]) : _vm._e(), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.oldauthor),\n      expression: \"oldauthor\"\n    }],\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": \"原作者\"\n    },\n    domProps: {\n      \"value\": (_vm.oldauthor)\n    },\n    on: {\n      \"focus\": _vm.focus,\n      \"blur\": _vm.blur,\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.oldauthor = $event.target.value\n      }\n    }\n  })]) : _vm._e(), _vm._v(\" \"), (_vm.control_id == 1) ? _c('div', {\n    staticClass: \"create-top-item create-top-input create-top-old create-top-oldurl cpm_form_input\"\n  }, [(!_vm.reg_old_url) ? _c('div', {\n    staticClass: \"c-dialog__tip z-right\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_old_url_con))])]) : _vm._e(), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.oldurl),\n      expression: \"oldurl\"\n    }],\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": \"原作品连接\"\n    },\n    domProps: {\n      \"value\": (_vm.oldurl)\n    },\n    on: {\n      \"focus\": _vm.focus,\n      \"blur\": _vm.blur,\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.oldurl = $event.target.value\n      }\n    }\n  })]) : _vm._e(), _vm._v(\" \"), (_vm.control_id == 1) ? _c('div', {\n    staticClass: \"create-top-item create-top-input create-top-old create-top-oldimg\"\n  }, [(!_vm.reg_old_img) ? _c('div', {\n    staticClass: \"c-dialog__tip z-right\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_old_img_con))])]) : _vm._e(), _vm._v(\" \"), _c('span', {\n    attrs: {\n      \"id\": \"old_upload_image_select\"\n    }\n  }), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.oldimg),\n      expression: \"oldimg\"\n    }],\n    attrs: {\n      \"type\": \"text\",\n      \"disabled\": \"\",\n      \"placeholder\": \"上传翻译授权截图证明\"\n    },\n    domProps: {\n      \"value\": (_vm.oldimg)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.oldimg = $event.target.value\n      }\n    }\n  }), _vm._v(\" \"), _c('UploadImg', {\n    attrs: {\n      \"type\": \"2\",\n      \"select\": \"old_upload_image_select\",\n      \"container\": \"old_container\"\n    },\n    on: {\n      \"uploadImg_uploaded\": _vm.old_uploaded\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-top-item z-mini\"\n  }, [_c('div', {\n    staticClass: \"create-top-select create-top-type j-close-1\",\n    on: {\n      \"mouseover\": _vm.selctEnter,\n      \"mouseout\": _vm.selctOut\n    }\n  }, [(!_vm.reg_type) ? _c('div', {\n    staticClass: \"c-dialog__tip\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_type_con))])]) : _vm._e(), _vm._v(\" \"), _c('span', [_vm._v(_vm._s(_vm.articletype))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"c-sub-more cpm_sub_more\"\n  }, _vm._l((_vm.category.laberSubnode), function(item) {\n    return _c('div', {\n      staticClass: \"item\",\n      attrs: {\n        \"data-id\": item.category_id\n      },\n      on: {\n        \"click\": _vm.typeShowValue\n      }\n    }, [_vm._v(_vm._s(item.category_title))])\n  }))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-top-select create-top-status j-close-1\",\n    on: {\n      \"mouseover\": _vm.selctEnter,\n      \"mouseout\": _vm.selctOut\n    }\n  }, [(!_vm.reg_status) ? _c('div', {\n    staticClass: \"c-dialog__tip z-top\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_status_con))])]) : _vm._e(), _vm._v(\" \"), _c('span', [_vm._v(_vm._s(_vm.status))]), _vm._v(\" \"), (_vm.catalog.statusArr.length) ? _c('div', {\n    staticClass: \"c-sub-more cpm_sub_more\"\n  }, _vm._l((_vm.catalog.statusArr), function(item) {\n    return _c('div', {\n      staticClass: \"item\",\n      attrs: {\n        \"data-audit_status\": item.audit_status\n      },\n      on: {\n        \"click\": _vm.statusShowValue\n      }\n    }, [_vm._v(_vm._s(item.text))])\n  })) : _vm._e()]), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-top-select create-top-level j-close-1\",\n    on: {\n      \"mouseover\": _vm.selctEnter,\n      \"mouseout\": _vm.selctOut\n    }\n  }, [(!_vm.reg_level) ? _c('div', {\n    staticClass: \"c-dialog__tip z-right\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_level_con))])]) : _vm._e(), _vm._v(\" \"), _c('span', [_vm._v(_vm._s(_vm.level))]), _vm._v(\" \"), (_vm.catalog.levelArr.length) ? _c('div', {\n    staticClass: \"c-sub-more cpm_sub_more\"\n  }, _vm._l((_vm.catalog.levelArr), function(item) {\n    return _c('div', {\n      staticClass: \"item\",\n      attrs: {\n        \"data-level_id\": item.level_id\n      },\n      on: {\n        \"click\": _vm.levelShowValue\n      }\n    }, [_vm._v(_vm._s(item.text))])\n  })) : _vm._e()])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-top-item create-top-tagsInput j-close-2\",\n    on: {\n      \"click\": _vm.tagsshowOpen\n    }\n  }, [(!_vm.reg_tag) ? _c('div', {\n    staticClass: \"c-dialog__tip z-right\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_tag_con))])]) : _vm._e(), _vm._v(\" \"), _c('div', {\n    staticClass: \"tag-wrap cpm_form_input\",\n    class: {\n      'z-limit': _vm.tags.length > 3, 'z-error': _vm.tagsshow\n    }\n  }, [_c('div', {\n    staticClass: \"tag-list\"\n  }, _vm._l((_vm.tags), function(item, index) {\n    return _c('div', {\n      staticClass: \"tag-item\"\n    }, [_c('div', {\n      staticClass: \"tag-item-text\"\n    }, [_vm._v(_vm._s(item))]), _c('em', {\n      attrs: {\n        \"data-index\": index\n      },\n      on: {\n        \"click\": function($event) {\n          $event.stopPropagation();\n          _vm.deleteTag($event)\n        }\n      }\n    })])\n  })), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.tagsVal),\n      expression: \"tagsVal\"\n    }],\n    staticClass: \"tag-edit\",\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": _vm.tags.length ? '' : '多个标签用空格区分'\n    },\n    domProps: {\n      \"value\": (_vm.tagsVal)\n    },\n    on: {\n      \"keyup\": [function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        $event.stopPropagation();\n        $event.preventDefault();\n        _vm.enter($event)\n      }, function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"space\", 32)) { return null; }\n        $event.stopPropagation();\n        $event.preventDefault();\n        _vm.enter($event)\n      }],\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.tagsVal = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), (_vm.tagsshow) ? _c('div', {\n    staticClass: \"create-tags-select\"\n  }, [_c('div', {\n    staticClass: \"create-tags-select-title\"\n  }, [_c('span', [_vm._v(\"热门标签\")]), _vm._v(\" \"), _c('em', {\n    on: {\n      \"click\": _vm.refresh\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-tags-select-body\"\n  }, _vm._l((_vm.category.tags), function(item) {\n    return _c('div', {\n      staticClass: \"body-item\",\n      class: {\n        'z-select': _vm.tags.indexOf(item) > -1\n      },\n      on: {\n        \"click\": _vm.tagsSelect\n      }\n    }, [_vm._v(_vm._s(item))])\n  }))]) : _vm._e()]), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-top-item create-top-form cpm_form_textarea\",\n    class: {\n      'z-limit': _vm.intro.length > 1000\n    }\n  }, [(!_vm.reg_intro) ? _c('div', {\n    staticClass: \"c-dialog__tip z-right\"\n  }, [_c('div', {\n    staticClass: \"tip-arrow\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"tip-text\"\n  }, [_vm._v(_vm._s(_vm.reg_intro_con))])]) : _vm._e(), _vm._v(\" \"), _c('textarea', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.intro),\n      expression: \"intro\"\n    }],\n    attrs: {\n      \"placeholder\": \"填写作品简介...\"\n    },\n    domProps: {\n      \"value\": (_vm.intro)\n    },\n    on: {\n      \"focus\": _vm.focus,\n      \"blur\": _vm.blur,\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.intro = $event.target.value\n      }\n    }\n  })])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"cpm_clear\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-top-agree\",\n    class: {\n      'z-on': _vm.agree\n    },\n    on: {\n      \"click\": _vm.agreeSwitch\n    }\n  }, [_c('em'), _vm._v(\" \"), _vm._m(0)])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-bottom\"\n  }, [_c('div', {\n    staticClass: \"create-bottom-btn z-on\"\n  }, [_c('div', {\n    staticClass: \"create-bottom-item create-bottom-cancel\",\n    on: {\n      \"click\": _vm.cancel\n    }\n  }, [_vm._v(\"取消\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"create-bottom-item create-bottom-commit\",\n    on: {\n      \"click\": _vm.save\n    }\n  }, [_c('span', [_vm._v(_vm._s(_vm.create ? '更新作品' : '创建新作品'))])])])])])])])]) : _vm._e()\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('p', [_vm._v(\"我已阅读并同意遵守 \"), _c('a', {\n    attrs: {\n      \"href\": \"./about.html\"\n    }\n  }, [_vm._v(\"《耳语之森原创声明及相关功能使用协议》 \")])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-e49806e0\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/component/chapter.edit.vue\n// module id = My/L\n// module chunks = 0","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-ab7eccfe\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./menu.left.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./menu.left.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ab7eccfe\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./menu.left.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/menu.left.vue\n// module id = NEzH\n// module chunks = 0","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-b197ad40\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./article.hot.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./article.hot.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b197ad40\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./article.hot.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/article.hot.vue\n// module id = Nza8\n// module chunks = 0","<!-- style样式代码 -->\n<style lang=\"less\">\n@import (reference) '../common/css/common';\n    @module: c-chapter-list;\n    \n    .@{module} {\n        position: relative;\n        & &-wrap {\n            width: 100%;\n            height: 100%;\n            margin-bottom: 30px;\n            .default_backgroud_2;\n        }\n    }\n    .@{module}-item {\n        position: relative;\n        height: 80px;\n        padding: 0 30px;\n        .default_border-b-14;\n        & .link {\n            display: block;\n            width: 100%;\n            height: 100%;\n        }\n        & a {\n            text-decoration: none;\n        }\n    }\n    .@{module}__top {\n        position: relative;\n        overflow: hidden;\n        padding-top: 15px;\n        margin-bottom: 15px;\n        & .top-number {\n            float: left;\n            margin-right: 20px;\n            .default_color_2;\n            .default_font_size_7;\n            .default_font_family_bolder;\n        }\n        & .top-title {\n            float: left;\n            margin-right: 5px;\n            .default_color_1;\n            .default_font_size_7;\n            .default_font_family_bolder;\n        }\n        & .top-new {\n            float: left;\n            margin-top: 5px;\n            .default_color_5;\n            .default_font_size_3;\n        }\n    }\n    .@{module}__bottom {\n        .default_color_3;\n        .default_font_size_1;\n        & .bottom-time {\n            float: left;\n            height: 12px;\n            line-height: 12px;\n            margin-right: 12px;\n        }\n        & .bottom-follow {\n            float: right;\n            & em {\n                width: 12px;\n                height: 12px;\n                margin-right: 6px;\n                .default_disline;\n                .default_middle;\n                .skin_icon_read-3;\n                &:hover {\n                    .skin_icon_read-3_on;\n                }\n            }\n            & span {\n                .default_disline;\n                .default_middle;\n            }\n        }\n        & .bottom-comment {\n            float: right;\n            margin-right: 12px;\n            & em {\n                width: 12px;\n                height: 12px;\n                margin-right: 6px;\n                .default_disline;\n                .default_middle;\n                .skin_icon_read-2;\n                &:hover {\n                    .skin_icon_read-2_on;\n                }\n            }\n            & span {\n                .default_disline;\n                .default_middle;\n            }\n        }\n        & .bottom-manger-item {\n            float: left;\n            height: 12px;\n            line-height: 12px;\n            margin-right: 12px;\n            .default_color_2;\n            .default_font_size_1;\n            .default_pointer;\n            &:hover {\n                .default_color_1;\n            }\n        }\n    }\n    .@{module}__history {\n        position: absolute;\n        top: 50px;\n        right: 0;\n        width: 30px;\n        height: 30px;\n        .default_backgroud_4;\n        .skin_icon_history;\n        & a {\n            display: block;\n            width: 100%;\n            height: 100%;\n        }\n    }\n</style>\n\n<!-- html代码 -->\n<template>\n<div class=\"c-chapter-list\">\n<div class=\"c-chapter-list-wrap\">\n    <div class=\"c-chapter-list-item\" v-for=\"(data, index) in chapter.lists\">\n    <a class=\"link\" :href=\"'./article.read.html?catalog_id='+ catalog_id +'&chapter_id='+ data.chapter_id\">\n        <div class=\"c-chapter-list__top\">\n            <!-- <div class=\"top-number\">第 {{index+1}} 话</div> -->\n            <div class=\"top-title\">{{data.chapter_title}}</div>\n            <div v-if=\"data.isNew\" class=\"top-new\">·new</div>\n        </div>\n        <div class=\"c-chapter-list__bottom\">\n            <div class=\"bottom-time\">{{data.publish_date}}</div>\n            <a v-if=\"data.owner == 1 && data.chapter_status == 1\" :href=\"'./article.edit.html?catalog_id='+ catalog_id +'&chapter_id='+ data.chapter_id\" class=\"bottom-manger-item bottom-manger-edit\">修改信息</a>\n            <a href=\"javascript:void(0);\" v-if=\"data.owner == 1\" class=\"bottom-manger-item bottom-manger-remove\" @click=\"remove(data.chapter_id)\">删除章节</a>\n            <div class=\"bottom-follow\"><em></em><span>{{data.praise_count}}</span></div>\n            <div class=\"bottom-comment\"><em></em><span>{{data.comment_count}}</span></div>\n        </div>\n        <div v-if=\"data.hasHistory\" class=\"c-chapter-list__history\"><a href=\"#none\"></a></div>\n        <div class=\"bottom\"></div>\n    </a>\n    </div>\n    <Empty v-if=\"chapter.count <= 0\" />\n</div>\n<Page \n    :count=\"chapter.count\" \n    :length=\"pageSize\"\n    :index=\"pageIndex\"\n    @page_switch=\"pageSwitch\"\n/>\n</div>\n</template>\n\n<script>\nimport {mapState} from 'vuex'\nexport default {\n    data () {\n        return {\n            subMoreShow: false,\n            data: {},\n            index: 0,\n\n            pageSize: 5,\n            pageIndex: 1\n        }\n    },\n    computed: mapState({\n        chapter: state => state.opus.chapter\n    }),\n    methods: {\n        subMoreSwitch () {\n            this.subMoreShow = !this.subMoreShow;\n        },\n        pageSwitch (pageIndex){\n            if (pageIndex == this.pageIndex) {\n                return false;\n            }\n            this.pageIndex = pageIndex;\n            this.getChapterList();\n        },\n        getChapterList (){\n            this.$store.dispatch('opus_getChapterList', {\n                \"catalogId\": this.catalog_id, // 目录id\n                \"pagination\": \"1\", // 获取总数\n                \"page\": this.pageIndex, //页数,默认不传查询第一页\n                \"pageSize\": this.pageSize //每页数量 默认10\n            }).then( res => {\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        remove (chapterId){\n            var that = this;\n            this.$store.dispatch('bubble_showBubble', {\n                show: true,\n                type: 'warn',\n                warn: {\n                    title: '确定要删除',\n                    content: '删除后将无法恢复，请谨慎处理',\n                    comfireFn: function(){\n                        that.deleteChapter(chapterId)\n                    }\n                }\n            })\n        },\n        deleteChapter (chapterId){\n            this.$store.dispatch('opus_deleteChapter', {\n                \"chapterId\": chapterId\n            }).then( res => {\n               this.getChapterList();\n\n               this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            });\n        }\n    },\n    mounted (){\n        // 获取url参数\n        this.catalog_id = this.$url.getUrlParam('catalog_id');\n\n        // 获取文章列表\n        this.getChapterList();\n    }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// chapter.list.vue?075b9195","<!-- style样式代码 -->\n<style lang=\"less\">\n@import (reference) '../common/css/common';\n    .c-artice-comment {\n        width: 100%;\n        height: 100%;\n        & &-wrap {\n            margin-bottom: 30px;\n            width: 100%;\n            height: 100%;\n            .default_backgroud_2;\n            .default_border-r-4;\n        }\n    }\n    .c-artice-comment-list {\n        .default_border-b-14;\n        & .comment__content {\n            padding: 20px 30px 20px 20px;\n            & .content__top {\n                height: 20px;\n                margin-bottom: 10px;\n                & .top-img {\n                    float: left;\n                    width: 20px;\n                    height: 20px;\n                    overflow: hidden;\n                    margin-right: 10px;\n                    .default_border-r-50;\n                    .default_backgroud_5;\n                }\n                & .top-name {\n                    float: left;\n                    height: 20px;\n                    line-height: 20px;\n                    .default_color_3;\n                    .default_font_size_3;\n                }\n            }\n            & .content__body {\n                padding-left: 30px;\n                line-height: 1.5rem;\n                margin-bottom: 15px;\n                .default_color_2;\n                .default_font_size_2;\n            }\n            & .content__bottom {\n                padding-left: 30px;\n                height: 12px;\n                overflow: hidden;\n                .default_color_3;\n                .default_font_size_1;\n                & .bottom-jubao {\n                    float: left;\n                    height: 12px;\n                    line-height: 12px;\n                    .default_pointer;\n                    &:hover {\n                        .default_color_1;\n                    }\n                }\n                & .bottom-time {\n                    float: right;\n                    height: 12px;\n                    line-height: 12px;\n                    margin-right: 15px;\n                }\n                & .bottom-fabulous {\n                    float: right;\n                    height: 12px;\n                    margin-right: 12px;\n                    & span {\n                        float: left;\n                        display: block;\n                        width: 12px;\n                        height: 12px;\n                        margin-right: 4px;\n                        .skin_icon_fabulous;\n                        &:hover {\n                            .skin_icon_fabulous_on;\n                        }\n                    }\n                    & strong {\n                        float: right;\n                        height: 12px;\n                    }\n                    .default_pointer;\n                }\n                & .bottom-record {\n                    float: right;\n                    height: 12px;\n                    line-height: 12px;\n                    .default_color_2;\n                    .default_center;\n                    .default_pointer;\n                    &:hover {\n                        .default_color_1;\n                    }\n                }\n            }\n        }\n        & .comment__record {\n            & .record__item {}\n            & .record__item-content {\n                padding: 10px 30px 10px 50px;\n                & .item-text {\n                    & p {\n                        line-height: 1.5rem;\n                        margin-bottom: 15px;\n                        .default_color_2;\n                        .default_font_size_2;    \n                    }\n                    & strong {\n                        .default_color_6;\n                        .default_font_size_1;\n                    }\n                    & em {\n                        font-style: normal;\n                    }\n                }\n                & .item-bottom {\n                    overflow: hidden;\n                    .default_color_3;\n                    .default_font_size_1;\n                }\n                & .item-bottom-jubao {\n                    float: left;\n                    .default_pointer;\n                    &:hover {\n                        .default_color_1;\n                    }\n                }\n                & .item-bottom-time {\n                    float: right;\n                    margin-right: 15px;\n                }\n                & .item-bottom-record {\n                    float: right;\n                    .default_pointer;\n                    .default_color_2;\n                    &:hover {\n                        .default_color_1;\n                    }\n                }\n            }\n            & .record__page {\n                height: 50px;\n                line-height: 50px;\n                .default_center;\n                .default_font_size_2;\n                .default_color_3;\n                .default_border-t-14;\n                & span {\n                    .default_color_2;\n                }\n                & strong {\n                    .default_color_5;\n                    .default_pointer;\n                }\n            }\n        }\n        & .content__reply {\n            height: 80px;\n            padding: 20px 30px 20px 50px;\n            overflow: hidden;\n            & .content__reply-form {\n                float: left;\n                height: 40px;\n                width: 520px;\n                margin-right: 10px;\n                padding: 0 20px;\n                .default_backgroud_4;\n                .default_border-r-4;\n                .default_color_3;\n                .default_font_size_2;\n                & input {\n                    width: 100%;\n                    height: 40px;\n                    line-height: 40px;\n                    .default_font_size_2;\n                    .default_color_3;\n                }\n            }\n            & .content__reply-btn {\n                float: left;\n                width: 70px;\n                height: 40px;\n                line-height: 40px;\n                text-align: center;\n                .default_color_2;\n                .default_font_size_2;\n                .default_backgroud_5;\n                .default_border-r-4;\n                .default_pointer;\n                & {\n                    .default_color_1;\n                }\n            }\n        }\n    }\n</style>\n\n<!-- html代码 -->\n<template>\n<div class=\"c-artice-comment\">\n<div class=\"c-artice-comment-wrap\">\n    <div class=\"c-artice-comment-list\" \n        v-for=\"(data, _index) in comment.list\"\n        :data-uid=\"data.user.uid\"\n        :data-comment_id=\"data.comment_id\"\n    >\n        <div class=\"comment__content\">\n            <div class=\"content__top\">\n                <div class=\"top-img\">\n                    <img :src=\"data.user.avatar_url || avatar\" />\n                </div>\n                <div class=\"top-name\">{{data.user.nick_name}}</div>\n            </div>\n            <div class=\"content__body\">{{data.comment}}</div>\n            <div class=\"content__bottom\">\n                <div class=\"bottom-jubao\" @click=\"addReport\">举报</div>\n                <div class=\"bottom-record\" @click=\"replayCommit(_index, -1)\">回复</div>\n                <div class=\"bottom-time\">{{data.publish_time}}</div>\n                <div class=\"bottom-fabulous\" @click=\"addCommentPraise\"><span :class=\"data.hasFabulous ? 'z-on': ''\"></span><strong>{{data.praise_count}}</strong></div>\n            </div>\n        </div>\n        <div class=\"content__reply z-top\"\n            v-if=\"data.replayIndex == -1\"\n        >\n            <div class=\"content__reply-form\">\n                <input type=\"text\" placeholder=\"回复评论...\" v-model=\"comment_con\" />\n            </div>\n            <div class=\"content__reply-btn\" @click=\"sendComment(data.comment_id)\">提交</div>\n        </div>\n        <div class=\"comment__record\">\n            <div class=\"record__item\" \n                v-for=\"(reply, index) in data.replys\"\n                :data-uid=\"reply.user.uid\"\n                :data-comment_id=\"reply.comment_id\"\n                :data-index=\"index\"\n            >\n                <div class=\"record__item-content\">\n                    <div class=\"item-text\">\n                        <p>\n                            <strong>{{reply.user.nick_name}}</strong> \n                            <em v-if=\"reply.reply_to_user\"> 回复 <strong>{{reply.reply_to_user.nick_name}}</strong></em>：\n                            {{reply.comment}}\n                        </p>\n                    </div>\n                    <div class=\"item-bottom\">\n                        <div class=\"item-bottom-jubao\" @click=\"addReport\">举报</div>\n                        <div class=\"item-bottom-record\" @click=\"replayCommit(_index, index)\">回复</div>\n                        <div class=\"item-bottom-time\">{{reply.publish_time}}</div>\n                    </div>\n                </div>\n                <div class=\"content__reply\"\n                    v-if=\"index == data.replayIndex\"\n                >\n                    <div class=\"content__reply-form\">\n                        <input type=\"text\" placeholder=\"回复评论...\" v-model=\"comment_con\" />\n                    </div>\n                    <div class=\"content__reply-btn\" @click=\"sendReplyComment(data.comment_id, reply.comment_id)\">提交</div>\n                </div>\n            </div>\n            <div class=\"record__page\" v-if=\"data.replys && data.reply_page_info.total_count - data.replys.length > 0\">\n                还有<span>{{data.reply_page_info.total_count - data.replys.length}}</span>条回复 <strong @click=\"getSubCommentMore(data)\">点击加载更多</strong>\n            </div>\n        </div>\n    </div>\n    <Empty v-if=\"comment.count == 0\" />\n</div>\n<Page\n    :count=\"comment.count\" \n    :length=\"pageSize\"\n    :index=\"pageIndex\"\n    @page_switch=\"pageSwitch\"\n/>\n\n</div>\n</template>\n\n<script>\nimport {mapState} from 'vuex'\nimport avatar from '../common/images/img/avatar.png';\nexport default {\n    data () {\n        return {\n            avatar: avatar,\n\n            pageIndex: 1,\n            pageSize: 5,\n\n            commentIndex: 1,\n            commentSize: 5,\n\n            comment_con: ''\n        }\n    },\n    computed: mapState({\n        userInfo: state => state.user.info,\n        comment: state => state.opus.comment,\n        catalog: state => state.opus.catalog.info\n        // catalog_id: state => state.opus.catalog.catalog_id,\n        // chapter_id: state => state.opus.chapter.chapter_id\n    }),\n    props: ['type'],\n    methods: {\n        // 子评论回复\n        replayCommit (_index, replayIndex){\n            this.$store.dispatch('opus_setCommentList', {\n                index: _index,\n                replayIndex: replayIndex\n            })\n        },\n        // 分页查询\n        pageSwitch (pageIndex){\n            if (this.pageIndex == pageIndex) {\n                return false;\n            }\n            this.pageIndex = pageIndex;\n            this.getCommentList();\n        },\n\n        // 获取目录评论\n        getCommentList (){\n            this.$store.dispatch('opus_getCommentList', {\n                \"page\": this.pageIndex, //页数,默认不传查询第一页\n                \"pageSize\": this.pageSize, //每页数量 默认10\n                \"pagination\": 1, //1表示返回页码相关信息 0 或者 不传 则不返回\n                \"catalogId\": this.catalog_id, //目录id,必填项\n                \"type\": this.type || 2, // 排序类型  1 最热(按评论数,点赞数) 2 最新(时间) 不传表示默认(按照写入的先后顺序)\n                \"chapterId\":  this.chapter_id, //章节id,选填,如果有则获取章节下的评论,否则获取目录的所有评论\n                \"subPageSize\": this.commentSize // //子评论列表首次显示数量 默认为5\n            }).then( res => {\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            })\n        },\n        // 新增评论\n        addComment (payload){\n            // 判断登陆\n            if (!this.userInfo.isLogin) {\n                return this.$store.dispatch('bubble_fail', {\n                    ret: -11,\n                    msg: '未登录，请登陆后操作'\n                });\n                return false;\n            }\n\n            this.$store.dispatch('opus_addComment', {\n                \"to_comment_id\": payload.to_comment_id, //一级评论id,表示针对那条评论的评论(有点绕),类似所有二级评论的父级.没有则表示当前发表的就是一级评论\n                \"to_reply_comment_id\": payload.to_reply_comment_id, //一级评论下的二级回复性评论id,表示针对那条二级评论做的回复('xxx回复了xxx',在列表查询时需要使用),当前发表的是一级评论不需要带此参数.\n                \"comment\": payload.comment, //评论\n                \"catalog_id\": this.catalog_id, //目录id,必填\n                \"chapter_id\": payload.chapter_id //章节id,没有则表示针对目录的评论\n            }).then( res => {\n                this.$eventHub.$emit('article.comment.refresh');\n                this.comment_con = '';\n                this.replayIndex = -2;\n                this.getCommentList();\n\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            })\n        },\n        // 评论点赞\n        addCommentPraise (e){\n            // 判断登陆\n            if (!this.userInfo.isLogin) {\n                return this.$store.dispatch('bubble_fail', {\n                    ret: -11,\n                    msg: '未登录，请登陆后操作'\n                });\n                return false;\n            }\n\n            var comment_id = $(e.currentTarget).parents('.c-artice-comment-list').attr('data-comment_id');\n            this.$store.dispatch('opus_addCommentPraise', {\n                commentId: comment_id\n            }).then( res => {\n                this.$store.dispatch('bubble_success', res);\n            }).catch(err => {\n                this.$store.dispatch('bubble_fail', err);\n            })\n        },\n        // 举报\n        addReport (e){\n            // 判断登陆\n            if (!this.userInfo.isLogin) {\n                return this.$store.dispatch('bubble_fail', {\n                    ret: -11,\n                    msg: '未登录，请登陆后操作'\n                });\n                return false;\n            }\n            \n            var comment_id;\n            if ($(e.currentTarget).parents('.record__item').length > 0) {\n                comment_id = $(e.currentTarget).parents('.record__item').data('comment_id');\n            } else {\n                comment_id = $(e.currentTarget).parents('.c-artice-comment-list').data('comment_id');\n            }\n            this.$store.dispatch('bubble_showBubble', {\n                show: true,\n                type: 'report',\n                report: {\n                    content_id: comment_id,\n                    content_type: 2\n                }\n            })\n        },\n        // 一级评论添加评论\n        sendComment (id){\n            this.addComment({\n                comment: this.comment_con,\n                to_comment_id: id\n            })\n        },\n        // 子评论添加评论\n        sendReplyComment (comment_id, reply_comment_id){\n            this.addComment({\n                comment: this.comment_con,\n                to_comment_id: comment_id,\n                to_reply_comment_id: reply_comment_id\n            })\n        },\n        // 获取子评论\n        getSubCommentMore (data){\n            this.commentIndex++;\n            this.$store.dispatch('opus_getReplyCommentList', {\n                \"page\": this.commentIndex, //页数,默认不传查询第一页\n                \"pageSize\": this.commentSize, //每页数量 默认10\n                \"pagination\": 1, //1表示返回页码相关信息 0 或者 不传 则不返回\n                \"commentId\": data.comment_id //目录id,必填项\n            }).then( res => {\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            })\n        }\n    },\n    created () {\n        this.$eventHub.$on('article.comment.addComment', payload => {\n            this.addComment(payload);\n        });\n    },\n    mounted () {\n        // 获取url的参数\n        this.catalog_id = this.$url.getUrlParam('catalog_id');\n        this.chapter_id = this.$url.getUrlParam('chapter_id');\n\n        // 获取评论\n        this.getCommentList();\n    }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// article.comment.vue?44150bf8","<!-- style样式代码 -->\n<style lang=\"less\">\n@import (reference) '../common/css/common';\n@module: c-footer;\n\n.@{module} {\n\twidth: 100%;\n\theight: 100px;\n\t.default_backgroud_6;\n}\n.@{module}-content {\n\theight: 100%;\n\tmargin:0 auto;\n\t.default_width_960;\n\t& .footer-left {\n\t\tfloat: left;\n\t\tpadding-top: 30px;\n\t\t.default_font_size_2;\n\t\t.default_color_3;\n\t\t& .menu {\n\t\t\tmargin-bottom: 10px;\n\t\t}\n\t\t& a {\n\t\t\ttext-decoration: none;\n\t\t\t.default_color_3;\n\t\t\t&:hover {\n\t\t\t\t.default_color_1;\n\t\t\t}\n\t\t}\n\t}\n\t& .footer-right {\n\t\tfloat: right;\n\t\tmargin-top: 35px;\n\t\t& .icon-item {\n\t\t\tposition: relative;\n\t\t\tdisplay: block;\n\t\t\tfloat: left;\n\t\t\twidth: 30px; \n\t\t\theight: 30px;\n\t\t\tmargin-left: 20px;\n\t\t\t.default_border-r-50;\n\t\t\t.default_backgroud_2;\n\t\t\t.default_pointer;\n\t\t\t& .qr {\n\t\t\t\tdisplay: none;\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: -175px;\n\t\t\t\tleft: 50%;\n\t\t\t\tz-index: 300;\n\t\t\t\twidth: 140px;\n\t\t\t\theight: 140px;\n\t\t\t\tpadding: 20px;\n\t\t\t\ttransform: translate(-50%, 0);\n\t\t\t\t.default_border_shadow_4;\n\t\t\t\t.default_backgroud_2;\n\t\t\t\t.default_border-r-4;\n\t\t\t\t& img {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t& .icon-item:nth-child(1) {\n\t\t\t.skin_icon_ios_2;\n\t\t\t&:hover {\n\t\t\t\t.skin_icon_ios_1;\n\t\t\t\t& .qr {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t& .icon-item:nth-child(2) {\n\t\t\t.skin_icon_android_2;\n\t\t\t&:hover {\n\t\t\t\t.skin_icon_android_1;\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n\n<!-- html代码 -->\n<template>\n<div class=\"c-footer\">\n<div class=\"c-footer-content\">\n\t<div class=\"footer-left\">\n\t\t<div class=\"menu\">\n\t\t\t<a :href=\"url.about\">关于我们</a>\n\t\t\t · \n\t\t\t<a :href=\"url.about\">用户协议</a>\n\t\t\t · \n\t\t\t<a :href=\"url.about\">隐私政策</a>\n\t\t\t · \n\t\t\t<a :href=\"url.about\">知识产权</a>\n\t\t\t · \n\t\t\t<a :href=\"url.about\">侵权举报</a>\n\t\t\t · \n\t\t\t<a :href=\"url.about\">免责声明</a>\n\t\t\t · \n\t\t\t<a :href=\"url.contact\">联系我们</a>\n\t\t</div>\n\t\t<div class=\"text\">© 2017 耳语之森 BETA1.0版 All RightReserved. 沪ICP备17018710号</div>\n\t</div>\n\t<div class=\"footer-right\">\n\t\t<div class=\"icon\">\n\t\t\t<div class=\"icon-item\">\n\t\t\t\t<div class=\"qr\">\n\t\t\t\t\t<img src=\"../common/images/img/qr-1.png\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"icon-item\"></div>\n\t\t</div>\n\t</div>\n</div>\n</div>\n</template>\n\n<script>\nimport {distUrl} from '../server/config'\nexport default {\n    name: 'footer',\n    data () {\n    \treturn {\n    \t\turl: {\n    \t\t\tabout: distUrl + 'about.html',\n    \t\t\tcontact: distUrl + 'contact.html'\n    \t\t}\n    \t}\n    },\n    methods: {\n    \t\n    }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// footer.vue?2aff2476","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Vue;\n\nfunction install(_Vue) {\n\tif (Vue) {\n\t\tconsole.error('[cache] already installed. Vue.use(cache) should be called only once.');\n\t\treturn;\n\t}\n\tVue = _Vue;\n\tVue.prototype.$version = version;\n}\n\nvar version = {\n\tbanner: {\n\t\tkey: 'eryuzhisen_indexBanner',\n\t\tversion: '1.0',\n\t\ttime: 10 * 60 * 1000\n\t},\n\n\thistory: {\n\t\tkey: 'eryuzhisen_catalog_history',\n\t\tversion: '1.0',\n\t\ttime: 12 * 30 * 24 * 60 * 60 * 1000\n\t},\n\n\tuserInfo: {\n\t\tkey: 'eryuzhisen_userInfo',\n\t\tversion: '1.0',\n\t\ttime: 60 * 60 * 1000\n\t},\n\n\tchapaterEdit: {\n\t\tkey: 'eryuzhisen_chapaterEdit',\n\t\tversion: '1.0',\n\t\ttime: 1 * 60 * 1000\n\t},\n\n\tchapaterEdit_edit: {\n\t\tkey: 'eryuzhisen_chapaterEdit_edit',\n\t\tversion: '1.0',\n\t\ttime: 5 * 60 * 1000\n\t}\n};\n\nexports.default = {\n\tinstall: install\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/server/version.js\n// module id = PoJi\n// module chunks = 0","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-f9c8e9a8\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./author.list.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./author.list.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f9c8e9a8\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./author.list.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/author.list.vue\n// module id = PwTI\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-comment-info\"\n  }, [_c('div', {\n    staticClass: \"c-comment-info-wrap\"\n  }, [_vm._l((_vm.message.list), function(data, index) {\n    return _c('div', {\n      staticClass: \"c-comment-info-list\",\n      class: {\n        'z-unread': data.read == 0\n      }\n    }, [_c('div', {\n      staticClass: \"c-comment-info__top\"\n    }, [_c('div', {\n      staticClass: \"top__img\"\n    }, [_vm._v(\"\\n                \" + _vm._s(data.message.sender.avatar_utl) + \"\\n            \")]), _vm._v(\" \"), _c('div', {\n      staticClass: \"top__name\"\n    }, [_vm._v(_vm._s(data.message.sender.nick_name))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"c-comment-info__comment\"\n    }, [_c('div', {\n      staticClass: \"comment__top\",\n      domProps: {\n        \"innerHTML\": _vm._s(data.message.content.title)\n      }\n    }), _vm._v(\" \"), _c('div', {\n      staticClass: \"comment__body\"\n    }, [_vm._v(_vm._s(data.message.content.content))]), _vm._v(\" \"), (data.message.content.cite) ? _c('div', {\n      staticClass: \"comment__bottom\"\n    }, [_vm._v(_vm._s(data.message.content.cite))]) : _vm._e()]), _vm._v(\" \"), _c('div', {\n      staticClass: \"c-comment-info__form\"\n    }, [_c('div', {\n      staticClass: \"form__top\"\n    }, [_c('div', {\n      staticClass: \"form__top__jubao\",\n      on: {\n        \"click\": function($event) {\n          _vm.addReport(data.message.sender.user_id)\n        }\n      }\n    }, [_vm._v(\"举报\")]), _vm._v(\" \"), _c('div', {\n      staticClass: \"form__top__record\",\n      on: {\n        \"click\": function($event) {\n          _vm.recordSwitch(index, data.msg_id, data.read)\n        }\n      }\n    }, [_vm._v(_vm._s(_vm.recordIndex == index ? '收起回复' : '回复'))])]), _vm._v(\" \"), (_vm.recordIndex == index) ? _c('div', {\n      staticClass: \"form__body\"\n    }, [_c('div', {\n      staticClass: \"form__body__write\"\n    }, [_c('input', {\n      directives: [{\n        name: \"model\",\n        rawName: \"v-model\",\n        value: (_vm.comment),\n        expression: \"comment\"\n      }],\n      attrs: {\n        \"type\": \"text\",\n        \"placeholder\": \"回复TA...\"\n      },\n      domProps: {\n        \"value\": (_vm.comment)\n      },\n      on: {\n        \"input\": function($event) {\n          if ($event.target.composing) { return; }\n          _vm.comment = $event.target.value\n        }\n      }\n    })]), _vm._v(\" \"), _c('div', {\n      staticClass: \"form_body__commit\",\n      on: {\n        \"click\": function($event) {\n          _vm.emitComment(data.message.arguments)\n        }\n      }\n    }, [_vm._v(\"提交\")])]) : _vm._e()])])\n  }), _vm._v(\" \"), (_vm.message.count <= 0) ? _c('Empty', {\n    staticClass: \"content-empty\"\n  }) : _vm._e()], 2), _vm._v(\" \"), _c('Page', {\n    attrs: {\n      \"count\": _vm.message.count,\n      \"length\": _vm.pageSize,\n      \"index\": _vm.pageIndex\n    },\n    on: {\n      \"page_switch\": _vm.pageSwitch\n    }\n  })], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-6f7c9752\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/component/comment.list.vue\n// module id = QZz9\n// module chunks = 0","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-f7339ca6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./article.better.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./article.better.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f7339ca6\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./article.better.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/article.better.vue\n// module id = RS2Z\n// module chunks = 0","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-3c2fbd0f\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./edit.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3c2fbd0f\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./edit.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/edit.vue\n// module id = V9fN\n// module chunks = 0","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-3a04cfca\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./article.header.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./article.header.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3a04cfca\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./article.header.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/article.header.vue\n// module id = VANs\n// module chunks = 0","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-e49806e0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./chapter.edit.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./chapter.edit.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e49806e0\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./chapter.edit.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/chapter.edit.vue\n// module id = VVx8\n// module chunks = 0","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-0415313a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./content.empty.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./content.empty.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0415313a\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./content.empty.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/content.empty.vue\n// module id = W0Us\n// module chunks = 0","import {baseUrl, _reject, _rejectObj} from '../config'\r\nimport Cookies from 'js-cookie';\r\n// 设置基本的请求headers\r\nimport axios from 'axios'\r\naxios.defaults.headers.get['Content-Type'] = 'application/x-www-form-urlencoded';\r\naxios.defaults.headers.get['X-Requested-With'] = 'XMLHttpRequest';\r\nvar token = Cookies.get('token');\r\n\r\n/**\r\n * 获取标签列表\r\nURL:http://domain/eryuzhisen-server/opus/getLabelList\r\nMethod:GET\r\nrequest:\r\nparams:\r\n\"categoryId\":\"xxxx\"//类别Id，可选\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"list\":[\"xxxx\",\"xxxxx\",....]\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getLabelList(option){\r\n\tvar url = baseUrl + 'opus/getLabelList';\r\n\tvar prosime = axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 获取作品分类列表(******所有类别关联的数据，以二级类别为准，如目前只有一级类，会创建一个同名的二级子类，方便以后扩展********)\r\nURL:http://domain/eryuzhisen-server/opus/getCategoryList\r\nMethod:GET\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\r\n\t\"list\":[\r\n\t\t{//一级类\r\n\t\t\t\"category_id\":\"1111\",\r\n\t\t\t\"category_desc\":\"xxxx\",//描述\r\n\t\t\t\"category_title\":\"漫画\"，//标题\r\n\t\t\t\"category_cover_url\":\"http://xxxx\",//扩展字段，封面\r\n\t\t\t\"sub_node\":[{//子类\r\n\t\t\t\t\"category_id\":\"1111\",\r\n\t\t\t\t\"category_desc\":\"xxxx\",//描述\r\n\t\t\t\t\"category_title\":\"漫画\"，//标题\r\n\t\t\t\t\"category_cover_url\":\"http://xxxx\",//扩展字段，封面\r\n\t\t\t},.....]\r\n\t\t},\r\n\t\t.....\r\n\t]\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getCategoryList(option){\r\n\tvar url = baseUrl + 'opus/getCategoryList';\r\n\tvar prosime = axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 分页获取作品目录列表\r\nhttp://domain/eryuzhisen-server/opus/getCatalogList\r\nMethod:POST //由于条件较多,参用post请求\r\n\r\nrequest:\r\nparams:\r\n\"page\":\"1\",//页数,默认不传查询第一页\r\n\"pageSize\":\"10\",//每页数量 默认10\r\n\"pagination\":1,//1表示返回页码相关信息 0 或者 不传 则不返回\r\n\r\nbody://全部为可选\r\n{\r\n\t\"user_id\":\"xx\",//查询某人的作品目录列表\r\n\t\"category_id\":\"11\",//查询某一类的目录\r\n\t\"fuzzy_query\":\"xxxx\",//模糊查询文字\r\n\t\"catalog_status\":\"1\",//目录状态  0 连载中 1 已完结\r\n}\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"more\":\"1\",//是否还有更多 0 没有 1 还有更多,供没有页码的客户端使用\r\n\t\"page_info\":{//pagination为1 才有\r\n\t\t\t\"total_count\":\"300\",//总数量\r\n\t\t\t\"page_count\":\"30\"//总页数\t\r\n\t\t},\r\n\t\"list\":[\r\n\t\t{\r\n\t\t\t\"catalog_id\":\"xxx\",//目录id\r\n\t\t\t\"category_id\":\"xx\",//类别id\r\n\t\t\t\"category_title\":\"xxx\",//类别文字 如:漫画\r\n\t\t\t\"praise_count\":\"300\",//点赞总数\r\n\t\t\t\"comment_count\":\"222\",//评论总数\r\n\t\t\t\"catalog_title\":\"xxxx\",//目录标题\r\n\t\t\t\"catalog_desc\":\"xxxxx\",//目录简介\r\n\t\t\t\"catalog_cover_url\":\"http://xxx\",//目录封面\r\n\t\t\t\"publish_time\":\"xxx\",//发表时间,如:一小时前\r\n\t\t\t\"audit_status\":\"0\",//0 审核中 1 审核通过 2 审核不通过(只有本人查看自己文章才有该节点)\r\n\t\t\t\"audit_remark\":\"xxxxx\",//审核备注(只有本人查看自己文章才有该节点)\r\n\t\t\t\"user\":{\"uid\":\"xxx\",\"nick_name\":\"xxx\",\"avatar_url\":\"xxx\"},//作者信息\r\n\t\t},\r\n\t\t.....\r\n\t]\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getCatalogList(option){\r\n\tvar url = baseUrl + 'opus/getCatalogList'; \r\n\tvar prosime = axios({\r\n\t\tmethod: 'POST',\r\n\t\turl: url,\r\n\t\tparams: option.params,\r\n\t\tdata: option.body,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 获取用户收藏列表\r\nURL:http://domain/eryuzhisen-server/opus/getFavoritesList\r\nMethod:GET\r\n\r\nrequest:\r\nparams:\r\n\"page\":\"1\",//页数,默认不传查询第一页\r\n\"pageSize\":\"10\",//每页数量 默认10\r\n\"pagination\":1,//1表示返回页码相关信息 0 或者 不传 则不返回\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"more\":\"1\",\r\n\t\"page_info\":{//pagination为1 才有\r\n\t\t\t\"total_count\":\"300\",//总数量\r\n\t\t\t\"page_count\":\"30\"//总页数\t\r\n\t\t},\r\n\t\"list\":[\r\n\t\t{\r\n\t\t\t\"catalog_id\":\"xxx\",//目录id\r\n\t\t\t\"category_id\":\"xx\",//类别id\r\n\t\t\t\"category_title\":\"xxx\",//类别文字 如:漫画\r\n\t\t\t\"praise_count\":\"300\",//点赞总数\r\n\t\t\t\"comment_count\":\"222\",//评论总数\r\n\t\t\t\"catalog_title\":\"xxxx\",//目录标题\r\n\t\t\t\"catalog_desc\":\"xxxxx\",//目录简介\r\n\t\t\t\"catalog_cover_url\":\"http://xxx\",//目录封面\r\n\t\t\t\"publish_time\":\"xxx\",//发表时间,如:一小时前\r\n\t\t\t\"audit_status\":\"0\",//0 审核中 1 审核通过 2 审核不通过(只有本人查看自己文章才有该节点)\r\n\t\t\t\"audit_remark\":\"xxxxx\",//审核备注(只有本人查看自己文章才有该节点)\r\n\t\t\t\"user\":{\"uid\":\"xxx\",\"nick_name\":\"xxx\",\"avatar_url\":\"xxx\"},//作者信息\r\n\t\t},\r\n\t\t.....\r\n\t]\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getFavoritesList(option){\r\n\tvar url = baseUrl + 'opus/getFavoritesList';\r\n\r\n\t// 没有登录态\r\n\tif (!token) {\r\n\t\treturn _rejectObj({\r\n\t\t\tret: -10,\r\n\t\t\tmsg: '未登录'\r\n\t\t});\r\n\t}\r\n\r\n\tvar prosime = axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 删除收藏\r\nURL:http://domain/eryuzhisen-server/opus/delFavorites/{catalogId}/{chapterId}\r\nMethod:DELETE\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\"\r\n}\r\n\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction delFavorites(option){\r\n\tvar url = baseUrl + 'opus/delFavorites/' + option.catalogId;\r\n\tvar prosime = axios({\r\n\t\tmethod: 'DELETE',\r\n\t\turl: url,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 新增作品收藏(如果只收藏目录,chapterId请设置为0)\r\nURL:http://domain/eryuzhisen-server/opus/addFavorites/{catalogId}/{chapterId}\r\nMethod:PUT\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"favorites_id\",\"121\"//收藏id\r\n}\r\n * @param {[type]} option [description]\r\n */\r\nfunction addFavorites(option){\r\n\tvar url = baseUrl + 'opus/addFavorites/' + option.catalogId;\r\n\tvar prosime = axios({\r\n\t\tmethod: 'PUT',\r\n\t\turl: url,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 获取目录详情\r\nURL:http://domain/eryuzhisen-server/opus/getCatalogDetail\r\nMethod:GET\r\nrequest:\r\nparams:\r\n\"catalogId\":\"111\"//目录id\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"info\":{\r\n\t\t\"catalog_id\":\"xxx\",//目录id\r\n\t\t\"category_id\":\"xx\",//类别id\r\n\t\t\"category_title\":\"xxx\",//类别文字 如:漫画\r\n\t\t\"praise_count\":\"300\",//点赞总数\r\n\t\t\"comment_count\":\"222\",//评论总数\r\n\t\t\"catalog_title\":\"xxxx\",//目录标题\r\n\t\t\"catalog_desc\":\"xxxxx\",//目录简介\r\n\t\t\"catalog_cover_url\":\"http://xxx\",//目录封面\r\n\t\t\"publish_time\":\"xxx\",//发表时间,如:一小时前\r\n\t\t\"audit_status\":\"0\",//0 审核中 1 审核通过 2 审核不通过(只有本人查看自己文章才有该节点)\r\n\t\t\"audit_remark\":\"xxxxx\",//审核备注(只有本人查看自己文章才有该节点)\r\n\t\t\"user\":{\"uid\":\"xxx\",\"nick_name\":\"xxx\",\"avatar_url\":\"xxx\"},//作者信息\r\n\t\t\"is_collected\":\"1\",//是否已收藏 0未收藏 1 已收藏\t\r\n\t}\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getCatalogDetail(option){\r\n\tvar url = baseUrl + 'opus/getCatalogDetail';\r\n\tvar prosime = axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 获取章节详情\r\nURL:http://domain/eryuzhisen-server/opus/getChapterDetail\r\nMethod:GET\r\nrequest:\r\nparams:\r\n\"chapterId\":\"111\"//章节id\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"info\":{\r\n\t\t\"chapter_id\":\"xxx\",//章节id\r\n\t\t\"chapter_title\":\"xx\",//章节标题\r\n\t\t\"chapter_desc\":\"xxx\",//章节简介\r\n\t\t\"chapter_content\":\"xxxx\",//章节内容  ***base64 编码***(列表中不一定返回,根据设计图需要的来获取)\r\n\t\t\"chapter_index\":\"1\",//章节序号\r\n\t\t\"publish_date\":\"xxxx\",//发布时间\r\n\t\t\"praise_count\":\"xxxxx\",//总点赞数\r\n\t\t\"comment_count\":\"http://xxx\",//总评论数\r\n\t\t\"chapter_status\":\"xxx\",//0 已完成 1 临时保存 未完成 (只有本人查看会有临时保存,否则只会出现已完成的数据)\r\n\t\t\"is_collected\":\"1\",//是否已收藏 0未收藏 1 已收藏\r\n\t}\t\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getChapterDetail(option){\r\n\tvar url = baseUrl + 'opus/getChapterDetail';\r\n\tvar prosime = axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 分页获取章节列表\r\nhttp://domain/eryuzhisen-server/opus/getChapterList\r\nMethod:GET //由于条件较多,参用post请求\r\n\r\nrequest:\r\nparams:\r\n\"page\":\"1\",//页数,默认不传查询第一页\r\n\"pageSize\":\"10\",//每页数量 默认10\r\n\"pagination\":1,//1表示返回页码相关信息 0 或者 不传 则不返回\r\n\"catalogId\":\"111\"//目录id\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"more\":\"1\",//是否还有更多 0 没有 1 还有更多,供没有页码的客户端使用\r\n\t\"page_info\":{//pagination为1 才有\r\n\t\t\t\"total_count\":\"300\",//总数量\r\n\t\t\t\"page_count\":\"30\"//总页数\t\r\n\t\t},\r\n\t\"list\":[\r\n\t\t{\r\n\t\t\t\"chapter_id\":\"xxx\",//章节id\r\n\t\t\t\"chapter_title\":\"xx\",//章节标题\r\n\t\t\t\"chapter_desc\":\"xxx\",//章节简介\r\n\t\t\t\"chapter_content\":\"xxxx\",//章节内容  ***base64 编码***(列表中不一定返回,根据设计图需要的来获取)\r\n\t\t\t\"chapter_index\":\"1\",//章节序号\r\n\t\t\t\"publish_date\":\"xxxx\",//发布时间\r\n\t\t\t\"praise_count\":\"xxxxx\",//总点赞数\r\n\t\t\t\"comment_count\":\"http://xxx\",//总评论数\r\n\t\t\t\"chapter_status\":\"xxx\",//0 已完成 1 临时保存 未完成 (只有本人查看会有临时保存,否则只会出现已完成的数据)\r\n\t\t},\r\n\t\t.....\r\n\t]\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getChapterList(option){\r\n\tvar url = baseUrl + 'opus/getChapterList';\r\n\tvar prosime = axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 获取作品评论列表(目前只分二级评论,不同于盖楼显示方式)\r\nhttp://domain/eryuzhisen-server/opus/getCommentList\r\nMethod:GET\r\nrequest:\r\nparams:\r\n\"page\":\"1\",//页数,默认不传查询第一页\r\n\"pageSize\":\"10\",//每页数量 默认10\r\n\"pagination\":1,//1表示返回页码相关信息 0 或者 不传 则不返回\r\n\"catalogId\":\"1\"//目录id,必填项\r\n\"chapterId\":\"2\"//章节id,选填,如果有则获取章节下的评论,否则获取目录的所有评论\r\n\"type\":\"1\"// 排序类型  1 最热(按评论数,点赞数) 2 最新(时间) 不传表示默认(按照写入的先后顺序)\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"more\":\"1\",//是否还有更多 0 没有 1 还有更多,供没有页码的客户端使用\r\n\t\"page_info\":{//pagination为1 才有\r\n\t\t\t\"total_count\":\"300\",//总数量\r\n\t\t\t\"page_count\":\"30\"//总页数\t\r\n\t\t},\r\n\t\"list\":[\r\n\t\t{//一级评论\r\n\t\t\t\"comment_id\":\"111\",//评论id\r\n\t\t\t\"comment\":\"xxxxx\",//评论内容\r\n\t\t\t\"publish_time\":\"xxx\",//发表时间\r\n\t\t\t\"praise_count\":\"30\",//获得点赞数量\r\n\t\t\t\"user\":{\"uid\":\"xxx\",\"nick_name\":\"xxx\",\"avatar_url\":\"xxx\"},//发表评论人信息\r\n\t\t\t\"replys\":[{//二级评论,针对一级评论的回复\r\n\t\t\t\t\"comment_id\":\"111\",//评论id\r\n\t\t\t\t\"comment\":\"xxxxx\",//评论内容\r\n\t\t\t\t\"publish_time\":\"xxx\",//发表时间\r\n\t\t\t\t\"praise_count\":\"30\",//获得点赞数量\r\n\t\t\t\t\"user\":{\"uid\":\"xxx\",\"nick_name\":\"xxx\",\"avatar_url\":\"xxx\"},//发表评论人信息\r\n\t\t\t\t\"reply_to_user\":{\"uid\":\"xxx\",\"nick_name\":\"xxx\",\"avatar_url\":\"xxx\"},//如果是回复性评论,则有此节点,表示回复xxx\r\n\t\t\t},....]\r\n\t\t},\r\n\t\t.....\r\n\t]\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getCommentList(option){\r\n\tvar url = baseUrl + 'opus/getCommentList';\r\n\tvar prosime = axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 获取回复型评论列表\r\nURL:http://domain/eryuzhisen-server/opus/getReplyCommentList\r\nMethod:GET\r\nparams:\r\n\"page\":\"1\",//页数,默认不传查询第一页\r\n\"pageSize\":\"5\",//每页数量 默认5\r\n\"pagination\":1,//1表示返回页码相关信息 0 或者 不传 则不返回\r\n\"commentId\":\"1\"//一级评论id\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"more\":\"1\",//是否还有更多 0 没有 1 还有更多,供没有页码的客户端使用\r\n\t\"page_info\":{//pagination为1 才有\r\n\t\t\t\"total_count\":\"300\",//总数量\r\n\t\t\t\"page_count\":\"30\"//总页数\t\r\n\t\t},\r\n\t\"list\":[\r\n\t\t{\r\n\t\t\t\"comment_id\":\"111\",//评论id\r\n\t\t\t\"comment\":\"xxxxx\",//评论内容\r\n\t\t\t\"publish_time\":\"xxx\",//发表时间\r\n\t\t\t\"praise_count\":\"30\",//获得点赞数量\r\n\t\t\t\"user\":{\"uid\":\"xxx\",\"nick_name\":\"xxx\",\"avatar_url\":\"xxx\"},//发表评论人信息\r\n\t\t\t\"reply_to_user\":{\"uid\":\"xxx\",\"nick_name\":\"xxx\",\"avatar_url\":\"xxx\"},//如果是回复性评论,则有此节点,表示回复xxx\r\n\t\t},\r\n\t\t.....\r\n\t]\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getReplyCommentList(option){\r\n\tvar url = baseUrl + 'opus/getReplyCommentList';\r\n\tvar prosime = axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 新增评论\r\nhttp://domain/eryuzhisen-server/opus/addComment\r\nMethod:POST\r\nrequest:\r\n{\r\n\t\"to_comment_id\":\"xx\",//一级评论id,表示针对那条评论的评论(有点绕),类似所有二级评论的父级.没有则表示当前发表的就是一级评论\r\n\t\"to_reply_comment_id\":\"xxxx\",//一级评论下的二级回复性评论id,表示针对那条二级评论做的回复('xxx回复了xxx',在列表查询时需要使用),当前发表的是一级评论不需要带此参数.\r\n\t\"comment\":\"xxxxx\",//评论\r\n\t\"catalog_id\":\"11\",//目录id,必填\r\n\t\"chapter_id\",\"22\"//章节id,没有则表示针对目录的评论\r\n}\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"comment_id\":\"111\",//返回评论id\r\n\t\"comment\":\"xxxxx\",//返回评论内容(客户端可以直接获取则无视该节点)\r\n\t\"user\":{\"uid\":\"xxx\",\"nick_name\":\"xxx\",\"avatar_url\":\"xxx\"},//发表评论人信息(客户端可以直接获取则无视该节点)\r\n\t\"reply_to_user\":{\"uid\":\"xxx\",\"nick_name\":\"xxx\",\"avatar_url\":\"xxx\"},//如果是回复性评论,则有此节点,表示回复xxx(客户端可以直接获取则无视该节点)\r\n}\r\n * @param {[type]} option [description]\r\n */\r\nfunction addComment(option){\r\n\tvar url = baseUrl + 'opus/addComment';\r\n\r\n\t// 没有登录态\r\n\tif (!token) {\r\n\t\treturn _rejectObj({\r\n\t\t\tret: -10,\r\n\t\t\tmsg: '未登录'\r\n\t\t});\r\n\t}\r\n\t\r\n\tvar prosime = axios({\r\n\t\tmethod: 'POST',\r\n\t\turl: url,\r\n\t\tdata: option,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 创建目录\r\nURL:http://domain/eryuzhisen-server/opus/addCatalog\r\nMethod:POST\r\n\r\nrequest:\r\n{\r\n\t\"category_id\":\"1\",//类别id\r\n\t\"catalog_title\":\"xxx\",//目录标题\r\n\t\"catalog_desc\":\"xxxx\",//简介\r\n\t\"catalog_cover_url\":\"http://xxxxx\"//封面\r\n\t\"catalog_label\":\"xx,xxx,xx\",//标签，多个标签逗号分割\r\n\t\"catalog_status\":\"0\",//0 连载中 1 已完结\r\n}\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"cat\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction addCatalog(option){\r\n\tvar url = baseUrl + 'opus/addCatalog';\r\n\tvar _header = option._header || {};\r\n\tdelete option._header;\r\n\treturn axios({\r\n\t\tmethod: 'POST',\r\n\t\turl: url,\r\n\t\tdata: JSON.stringify(option),\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n}\r\n\r\n/**\r\n * 创建章节\r\nURL:http://domain/eryuzhisen-server/opus/addChapter\r\nMethod:POST\r\n\r\nrequest:\r\n{\r\n\t\"catalog_id\":\"1\",//目录id\r\n\t\"chapter_title\":\"xxx\",//章节标题\r\n\t\"chapter_desc\":\"xxxx\",//简介\r\n\t\"chapter_content\":\"xxxx\"//内容　***base64 编码***\r\n\t\"chapter_status\":\"0\"//　0 发布，已完成 1 临时保存 未完成\r\n}\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"chapter_id\":\"1111\"\r\n}\r\n * @param {[type]} option [description]\r\n */\r\nfunction addChapter(option){\r\n\tvar url = baseUrl + 'opus/addChapter';\r\n\tvar _header = option._header || {};\r\n\tdelete option._header;\r\n\treturn axios({\r\n\t\tmethod: 'POST',\r\n\t\turl: url,\r\n\t\tdata: JSON.stringify(option),\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n}\r\n\r\n/**\r\n * 针对评论的点赞\r\nhttp://domain/eryuzhisen-server/opus/addCommentPraise/{commentId}\r\nMethod:PUT\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\"\r\n}\r\n * @param {[type]} option [description]\r\n */\r\nfunction addCommentPraise(option){\r\n\tvar url = baseUrl + 'opus/addCommentPraise/' + option.commentId;\r\n\tvar _header = option._header || {};\r\n\tdelete option._header;\r\n\treturn axios({\r\n\t\tmethod: 'PUT',\r\n\t\turl: url,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n\t\t\treturn _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n}\r\n\r\n/**\r\n * 作品点赞(如果只针对目录点赞，chapterId设为0)\r\nURL:http://domain/eryuzhisen-server/opus/addPraise/{catalogId}/{chapterId}\r\nMethod:PUT\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\"\r\n}\r\n * @param {[type]} option [description]\r\n */\r\nfunction addPraise(option){\r\n\tvar url = baseUrl + 'opus/addPraise/' + option.catalogId + '/' + option.chapterId;\r\n\tvar _header = option._header || {};\r\n\tdelete option._header;\r\n\treturn axios({\r\n\t\tmethod: 'PUT',\r\n\t\turl: url,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n\t\t\treturn _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n}\r\n\r\n/**\r\n * 更新目录(更新目录会重新进入审核状态，请前端提示)\r\nURL:http://domain/eryuzhisen-server/opus/updateCatalog\r\nMethod:POST\r\n\r\nrequest:\r\n{\r\n\t\"catalog_id\":\"xxxx\",//目录id\r\n\t\"category_id\":\"1\",//类别id\r\n\t\"catalog_title\":\"xxx\",//目录标题\r\n\t\"catalog_desc\":\"xxxx\",//简介\r\n\t\"catalog_cover_url\":\"http://xxxxx\"//封面\r\n\t\"catalog_label\":\"xx,xxx,xx\",//标签，多个标签逗号分割\r\n}\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\"\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction updateCatalog(option){\r\n\tvar url = baseUrl + 'opus/updateCatalog';\r\n\tvar _header = option._header || {};\r\n\tdelete option._header;\r\n\treturn axios({\r\n\t\tmethod: 'POST',\r\n\t\turl: url,\r\n\t\tdata: JSON.stringify(option),\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n\t\t\treturn _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n}\r\n\r\n/**\r\n * 更新章节内容（已发布的是不能修改的，只针对临时保存的章节）\r\nURL:http://domain/eryuzhisen-server/opus/updateChapter\r\nMethod:POST\r\n\r\nrequest:\r\n{\r\n\t\"chapter_id\":\"111\",//章节id\r\n\t\"chapter_title\":\"xxx\",//章节标题\r\n\t\"chapter_desc\":\"xxxx\",//简介\r\n\t\"chapter_content\":\"xxxx\"//内容　***base64 编码***\r\n\t\"chapter_status\":\"0\"//　0 发布，已完成 1 临时保存 未完成\r\n}\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\"\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction updateChapter(option){\r\n\tvar url = baseUrl + 'opus/updateChapter';\r\n\tvar prosime = axios({\r\n\t\tmethod: 'POST',\r\n\t\turl: url,\r\n\t\tdata: option,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n\t\t\treturn _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n/**\r\n * 删除章节\r\nURL:http://domain/eryuzhisen-server/opus/delChapter/{chapterId}\r\nMethod:DELETE\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\"\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction delChapter(option){\r\n\tvar url = baseUrl + 'opus/delChapter/' + option.chapterId;\r\n\tvar prosime = axios({\r\n\t\tmethod: 'DELETE',\r\n\t\turl: url,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n\t\t\treturn _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 删除目录\r\nURL:http://domain/eryuzhisen-server/opus/delCatalog/{catalogId}\r\nMethod:DELETE\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\"\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction delCatalog(option){\r\n\tvar url = baseUrl + 'opus/delCatalog/' + option.catalogId;\r\n\tvar prosime = axios({\r\n\t\tmethod: 'DELETE',\r\n\t\turl: url,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n\t\t\treturn _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 获取我的主页（用户自己的目录列表）\r\nhttp://domain/eryuzhisen-server/opus/getMyCatalogList\r\nMethod:GET \r\n\r\nrequest:\r\nparams:\r\n\"page\":\"1\",//页数,默认不传查询第一页\r\n\"pageSize\":\"10\",//每页数量 默认10\r\n\"pagination\":1,//1表示返回页码相关信息 0 或者 不传 则不返回\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"more\":\"1\",//是否还有更多 0 没有 1 还有更多,供没有页码的客户端使用\r\n\t\"page_info\":{//pagination为1 才有\r\n\t\t\t\"total_count\":\"300\",//总数量\r\n\t\t\t\"page_count\":\"30\"//总页数\t\r\n\t\t},\r\n\t\"list\":[\r\n\t\t{\r\n\t\t\t\"catalog_id\":\"xxx\",//目录id\r\n\t\t\t\"category_id\":\"xx\",//类别id\r\n\t\t\t\"category_title\":\"xxx\",//类别文字 如:漫画\r\n\t\t\t\"praise_count\":\"300\",//点赞总数\r\n\t\t\t\"comment_count\":\"222\",//评论总数\r\n\t\t\t\"catalog_title\":\"xxxx\",//目录标题 ******如果为空，则表示初次创建还在审核中，具体怎么显示，需要设计给出方案******\r\n\t\t\t\"catalog_audit_title\":\"xxxx\",//待审核的目录标题 ******新增节点,新需求：audit_status 如果是 0 或者 2 在用户编辑更新时使用此处内容*******\r\n\t\t\t\"catalog_desc\":\"xxxxx\",//目录简介 ******如果为空，则表示初次创建还在审核中，具体怎么显示，需要设计给出方案******\r\n\t\t\t\"catalog_audit_desc\":\"xxxxx\",//待审核的目录简介 ******新增节点,新需求：audit_status 如果是 0 或者 2 在用户编辑更新时使用此处内容*******\r\n\t\t\t\"catalog_cover_url\":\"http://xxx\",//目录封面 ******如果为空，则表示初次创建还在审核中，具体怎么显示，需要设计给出方案******\r\n\t\t\t\"catalog_audit_cover_url\":\"xxxxx\",//待审核的目录封面 ******新增节点*******\r\n\t\t\t\"publish_time\":\"xxx\",//发表时间,如:一小时前\r\n\t\t\t\"audit_status\":\"0\",//0 审核中 1 审核通过 2 审核不通过(只有本人查看自己文章才有该节点)\r\n\t\t\t\"audit_remark\":\"xxxxx\",//审核备注(只有本人查看自己文章才有该节点)\r\n\t\t\t\"level\":\"0\",//等级 0 普通 1 首发 2 独家\r\n\t\t\t\"user\":{\"uid\":\"xxx\",\"nick_name\":\"xxx\",\"avatar_url\":\"xxx\"},//作者信息\r\n\t\t\t\"labels\":[\"xxxxx\",\"xxxx\"],//标签 ******如果为空，则表示初次创建还在审核中，具体怎么显示，需要设计给出方案******\r\n\t\t\t\"audit_labels\":[\"xxxxx\",\"xxxxx\"],//待审核的标签 ******新增节点,新需求：audit_status 如果是 0 或者 2 在用户编辑更新时使用此处内容*******\r\n\t\t\t\"collected_count\":\"200\"//目录被收藏数量\r\n\t\t},\r\n\t\t.....\r\n\t]\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getMyCatalogList(option){\r\n\tvar url = baseUrl + 'opus/getMyCatalogList';\r\n\r\n\t// 没有登录态\r\n\tif (!token) {\r\n\t\treturn _rejectObj({\r\n\t\t\tret: -10,\r\n\t\t\tmsg: '未登录'\r\n\t\t});\r\n\t}\r\n\t\r\n\tvar prosime = axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\nexport {\r\n\tgetLabelList,\r\n\tgetCategoryList,\r\n\tgetCatalogList,\r\n\tgetFavoritesList,\r\n\tdelFavorites,\r\n\taddFavorites,\r\n\tgetCatalogDetail,\r\n\tgetChapterDetail,\r\n\tgetChapterList,\r\n\tgetCommentList,\r\n\tgetReplyCommentList,\r\n\taddComment,\r\n\taddCatalog,\r\n\taddChapter,\r\n\taddCommentPraise,\r\n\taddPraise,\r\n\tupdateCatalog,\r\n\tupdateChapter,\r\n\tdelChapter,\r\n\tdelCatalog,\r\n\tgetMyCatalogList,\r\n\t_reject,\r\n\t_rejectObj\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/data/opus.js","(function (factory) {\n    if (typeof window.define === 'function') {\n        if (window.define.amd) {\n            // AMD模式\n            window.define('wangEditor', [\"jquery\"], factory);\n        } else if (window.define.cmd) {\n            // CMD模式\n            window.define(function (require, exports, module) {\n                return factory;\n            });\n        } else {\n            // 全局模式\n            factory(window.jQuery);\n        }\n    } else if (typeof module === \"object\" && typeof module.exports === \"object\") {\n        // commonjs\n        module.exports = factory($);\n    } else {\n        // 全局模式\n        factory($);\n    }\n})(function($){\n'use strict';\n    \n// 定义扩展函数\nvar _e = function (fn) {\n    var E = window.wangEditor;\n    if (E) {\n        // 执行传入的函数\n        fn(E, $);\n    }\n};\n// 定义构造函数\n(function (window, $) {\n    if (window.wangEditor) {\n        // 重复引用\n        alert('一个页面不能重复引用 wangEditor.js 或 wangEditor.min.js ！！！');\n        return;\n    }\n\n    // 编辑器（整体）构造函数\n    var E = function (elem) {\n        // 支持 id 和 element 两种形式\n        if (typeof elem === 'string') {\n            elem = '#' + elem;\n        }\n\n        // ---------------获取基本节点------------------\n        var $elem = $(elem);\n        if ($elem.length !== 1) {\n            return;\n        }\n        var nodeName = $elem[0].nodeName;\n        if (nodeName !== 'TEXTAREA' && nodeName !== 'DIV') {\n            // 只能是 textarea 和 div ，其他类型的元素不行\n            return;   \n        }\n        this.valueNodeName = nodeName.toLowerCase();\n        this.$valueContainer = $elem;\n\n        // 记录 elem 的 prev 和 parent（最后渲染 editor 要用到）\n        this.$prev = $elem.prev();\n        this.$parent = $elem.parent();\n\n        // ------------------初始化------------------\n        this.init();\n    };\n\n    E.fn = E.prototype;\n\n    E.$body = $('body');\n    E.$document = $(document);\n    E.$window = $(window);\n    E.userAgent = navigator.userAgent;\n    E.getComputedStyle = window.getComputedStyle;\n    E.w3cRange = typeof document.createRange === 'function';\n    E.hostname = location.hostname.toLowerCase();\n    E.websiteHost = 'wangeditor.github.io|www.wangeditor.com|wangeditor.coding.me';\n    E.isOnWebsite = E.websiteHost.indexOf(E.hostname) >= 0;\n    E.docsite = 'http://www.kancloud.cn/wangfupeng/wangeditor2/113961';\n\n    // 暴露给全局对象\n    window.wangEditor = E;\n\n    // 注册 plugin 事件，用于用户自定义插件\n    // 用户在引用 wangEditor.js 之后，还可以通过 E.plugin() 注入自定义函数，\n    // 该函数将会在 editor.create() 方法的最后一步执行\n    E.plugin = function (fn) {\n        if (!E._plugins) {\n            E._plugins = [];\n        }\n\n        if (typeof fn === 'function') {\n            E._plugins.push(fn);\n        }\n    };\n})(window, $);\n// editor 绑定事件 - init\n_e(function (E, $) {\n\n    E.fn.init = function () {\n\n        // 初始化 editor 默认配置\n        this.initDefaultConfig();\n\n        // 增加container\n        this.addEditorContainer();\n\n        // 增加编辑区域\n        this.addTxt();\n\n        // 增加menuContainer\n        this.addMenuContainer();\n\n        // 初始化菜单集合\n        this.menus = {};\n\n        // 初始化commandHooks\n        this.commandHooks();\n\n    };\n});\n// editor api\n_e(function (E, $) {\n\n    // 预定义 ready 事件\n    E.fn.ready = function (fn) {\n\n        if (!this.readyFns) {\n            this.readyFns = [];\n        }\n\n        this.readyFns.push(fn);\n    };\n\n    // 处理ready事件\n    E.fn.readyHeadler = function () {\n        var fns = this.readyFns;\n\n        while (fns.length) {\n            fns.shift().call(this);\n        }\n    };\n\n    // 更新内容到 $valueContainer\n    E.fn.updateValue = function () {\n        var editor = this;\n        var $valueContainer = editor.$valueContainer;\n        var $txt = editor.txt.$txt;\n\n        if ($valueContainer === $txt) {\n            // 传入生成编辑器的div，即是编辑区域\n            return;\n        }\n\n        var value = $txt.html();\n        $valueContainer.val(value);\n    };\n\n    // 获取初始化的内容\n    E.fn.getInitValue = function () {\n        var editor = this;\n        var $valueContainer = editor.$valueContainer;\n        var currentValue = '';\n        var nodeName = editor.valueNodeName;\n        if (nodeName === 'div') {\n            currentValue = $valueContainer.html();\n        } else if (nodeName === 'textarea') {\n            currentValue = $valueContainer.val();\n        }\n\n        return currentValue;\n    };\n\n    // 触发菜单updatestyle\n    E.fn.updateMenuStyle = function () {\n        var menus = this.menus;\n\n        $.each(menus, function (k, menu) {\n            menu.updateSelected();\n        });\n    };\n\n    // 除了传入的 menuIds，其他全部启用\n    E.fn.enableMenusExcept = function (menuIds) {\n        if (this._disabled) {\n            // 编辑器处于禁用状态，则不执行改操作\n            return;\n        }\n        // menuIds参数：支持数组和字符串\n        menuIds = menuIds || [];\n        if (typeof menuIds === 'string') {\n            menuIds = [menuIds];\n        }\n\n        $.each(this.menus, function (k, menu) {\n            if (menuIds.indexOf(k) >= 0) {\n                return;\n            }\n            menu.disabled(false);\n        });\n    };\n\n    // 除了传入的 menuIds，其他全部禁用\n    E.fn.disableMenusExcept = function (menuIds) {\n        if (this._disabled) {\n            // 编辑器处于禁用状态，则不执行改操作\n            return;\n        }\n        // menuIds参数：支持数组和字符串\n        menuIds = menuIds || [];\n        if (typeof menuIds === 'string') {\n            menuIds = [menuIds];\n        }\n\n        $.each(this.menus, function (k, menu) {\n            if (menuIds.indexOf(k) >= 0) {\n                return;\n            }\n            menu.disabled(true);\n        });\n    };\n\n    // 隐藏所有 dropPanel droplist modal\n    E.fn.hideDropPanelAndModal = function () {\n        var menus = this.menus;\n\n        $.each(menus, function (k, menu) {\n            var m = menu.dropPanel || menu.dropList || menu.modal;\n            if (m && m.hide) {\n                m.hide();\n            }\n        });\n    };\n});\n// selection range API\n_e(function (E, $) {\n\n    // 用到 w3c range 的函数，如果检测到浏览器不支持 w3c range，则赋值为空函数\n    var ieRange = !E.w3cRange;\n    function emptyFn() {}\n\n    // 设置或读取当前的range\n    E.fn.currentRange = function (cr){\n        if (cr) {\n            this._rangeData = cr;\n        } else {\n            return this._rangeData;\n        }\n    };\n\n    // 将当前选区折叠\n    E.fn.collapseRange = function (range, opt) {\n        // opt 参数说明：'start'-折叠到开始; 'end'-折叠到结束\n        opt = opt || 'end';\n        opt = opt === 'start' ? true : false;\n\n        range = range || this.currentRange();\n        \n        if (range) {\n            // 合并，保存\n            range.collapse(opt);\n            this.currentRange(range);\n        }\n    };\n\n    // 获取选区的文字\n    E.fn.getRangeText = ieRange ? emptyFn : function (range) {\n        range = range || this.currentRange();\n        if (!range) {\n            return;\n        }\n        return range.toString();\n    };\n\n    // 获取选区对应的DOM对象\n    E.fn.getRangeElem = ieRange ? emptyFn : function (range) {\n        range = range || this.currentRange();\n        var dom = range.commonAncestorContainer;\n\n        if (dom.nodeType === 1) {\n            return dom;\n        } else {\n            return dom.parentNode;\n        }\n    };\n\n    // 选区内容是否为空？\n    E.fn.isRangeEmpty = ieRange ? emptyFn : function (range) {\n        range = range || this.currentRange();\n\n        if (range && range.startContainer) {\n            if (range.startContainer === range.endContainer) {\n                if (range.startOffset === range.endOffset) {\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    };\n\n    // 保存选区数据\n    E.fn.saveSelection = ieRange ? emptyFn : function (range) {\n        var self = this,\n            _parentElem,\n            selection,\n            txt = self.txt.$txt.get(0);\n\n        if (range) {\n            _parentElem = range.commonAncestorContainer;\n        } else {\n            selection = document.getSelection();\n            if (selection.getRangeAt && selection.rangeCount) {\n                range = document.getSelection().getRangeAt(0);\n                _parentElem = range.commonAncestorContainer;\n            }\n        }\n        // 确定父元素一定要包含在编辑器区域内\n        if (_parentElem && ($.contains(txt, _parentElem) || txt === _parentElem) ) {\n            // 保存选择区域\n            self.currentRange(range);\n        }\n    };\n\n    // 恢复选中区域\n    E.fn.restoreSelection = ieRange ? emptyFn : function (range) {\n        var selection;\n\n        range = range || this.currentRange();\n\n        if (!range) {\n            return;\n        }\n\n        // 使用 try catch 来防止 IE 某些情况报错\n        try {\n            selection = document.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(range);\n        } catch (ex) {\n            E.error('执行 editor.restoreSelection 时，IE可能会有异常，不影响使用');\n        }\n    };\n\n    // 根据elem恢复选区\n    E.fn.restoreSelectionByElem = ieRange ? emptyFn : function (elem, opt) {\n        // opt参数说明：'start'-折叠到开始，'end'-折叠到结束，'all'-全部选中\n        if (!elem) {\n            return;\n        }\n        opt = opt || 'end'; // 默认为折叠到结束\n\n        // 根据elem获取选区\n        this.setRangeByElem(elem);\n\n        // 根据 opt 折叠选区\n        if (opt === 'start') {\n            this.collapseRange(this.currentRange(), 'start');\n        }\n        if (opt === 'end') {\n            this.collapseRange(this.currentRange(), 'end');\n        }\n        \n        // 恢复选区\n        this.restoreSelection();\n    };\n\n    // 初始化选区\n    E.fn.initSelection = ieRange ? emptyFn : function () {\n        var editor = this;\n        if( editor.currentRange() ){\n            //如果currentRange有值，则不用再初始化\n            return;\n        }\n\n        var range;\n        var $txt = editor.txt.$txt;\n        var $firstChild = $txt.children().first();\n        \n        if ($firstChild.length) {\n            editor.restoreSelectionByElem($firstChild.get(0));\n        }\n    };\n\n    // 根据元素创建选区\n    E.fn.setRangeByElem = ieRange ? emptyFn : function (elem) {\n        var editor = this;\n        var txtElem = editor.txt.$txt.get(0);\n        if (!elem || !$.contains(txtElem, elem)) {\n            return;\n        }\n\n        // 找到elem的第一个 textNode 和 最后一个 textNode\n        var firstTextNode = elem.firstChild;\n        while (firstTextNode) {\n            if (firstTextNode.nodeType === 3) {\n                break;\n            }\n            // 继续向下\n            firstTextNode = firstTextNode.firstChild;\n        }\n        var lastTextNode = elem.lastChild;\n        while (lastTextNode) {\n            if (lastTextNode.nodeType === 3) {\n                break;\n            }\n            // 继续向下\n            lastTextNode = lastTextNode.lastChild;\n        }\n        \n        var range = document.createRange();\n        if (firstTextNode && lastTextNode) {\n            // 说明 elem 有内容，能取到子元素\n            range.setStart(firstTextNode, 0);\n            range.setEnd(lastTextNode, lastTextNode.textContent.length);\n        } else {\n            // 说明 elem 无内容\n            range.setStart(elem, 0);\n            range.setEnd(elem, 0);\n        }\n\n        // 保存选区\n        editor.saveSelection(range);\n    };\n});\n// selection range API - IE8及以下\n_e(function (E, $) {\n\n    if (E.w3cRange) {\n        // 说明支持 W3C 的range方法\n        return;\n    }\n\n    // -----------------IE8时，需要重写以下方法-------------------\n\n    // 获取选区的文字\n    E.fn.getRangeText = function (range) {\n        range = range || this.currentRange();\n        if (!range) {\n            return;\n        }\n        return range.text;\n    };\n\n    // 获取选区对应的DOM对象\n    E.fn.getRangeElem = function (range) {\n        range = range || this.currentRange();\n        if (!range) {\n            return;\n        }\n        var dom = range.parentElement();\n\n        if (dom.nodeType === 1) {\n            return dom;\n        } else {\n            return dom.parentNode;\n        }\n    };\n\n    // 选区内容是否为空？\n    E.fn.isRangeEmpty = function (range) {\n        range = range || this.currentRange();\n\n        if (range && range.text) {\n            return false;\n        }\n\n        return true;\n    };\n\n    // 保存选区数据\n    E.fn.saveSelection = function (range) {\n        var self = this,\n            _parentElem,\n            selection,\n            txt = self.txt.$txt.get(0);\n\n        if (range) {\n            _parentElem = range.parentElement();\n        } else {\n            range = document.selection.createRange();\n            if(typeof range.parentElement === 'undefined'){\n                //IE6、7中，insertImage后会执行此处\n                //由于找不到range.parentElement，所以干脆将_parentElem赋值为null\n                _parentElem = null;\n            }else{\n                _parentElem = range.parentElement();\n            }\n        }\n\n        // 确定父元素一定要包含在编辑器区域内\n        if (_parentElem && ($.contains(txt, _parentElem) || txt === _parentElem) ) {\n            // 保存选择区域\n            self.currentRange(range);\n        }\n    };\n\n    // 恢复选中区域\n    E.fn.restoreSelection = function (currentRange){\n        var editor = this,\n            selection,\n            range;\n\n        currentRange = currentRange || editor.currentRange();\n        if(!currentRange){\n            return;\n        }\n\n        range = document.selection.createRange();\n        try {\n            // 此处，plupload上传上传图片时，IE8-会报一个『参数无效』的错误\n            range.setEndPoint('EndToEnd', currentRange);\n        } catch (ex) {\n\n        }\n        \n        if(currentRange.text.length === 0){\n            try {\n                // IE8 插入表情会报错\n                range.collapse(false);\n            } catch (ex) {\n                \n            }\n            \n        }else{\n            range.setEndPoint('StartToStart', currentRange);\n        }\n        range.select();\n    };\n});\n// editor command hooks\n_e(function (E, $) {\n    \n    E.fn.commandHooks = function () {\n        var editor = this;\n        var commandHooks = {};\n        \n        // insertHtml\n        commandHooks.insertHtml = function (html) {\n            var $elem = $(html);\n            var rangeElem = editor.getRangeElem();\n            var targetElem;\n            \n            targetElem = editor.getLegalTags(rangeElem);\n            if (!targetElem) {\n                return;\n            }\n\n            $(targetElem).after($elem);\n        };\n\n        // 保存到对象\n        editor.commandHooks = commandHooks;\n    };\n});\n// editor command API\n_e(function (E, $) {\n\n    // 基本命令\n    E.fn.command = function (e, commandName, commandValue, callback) {\n        var editor = this;\n        var hooks;\n        \n        function commandFn() {\n            if (!commandName) {\n                return;\n            }\n            if (editor.queryCommandSupported(commandName)) {\n                // 默认命令\n                document.execCommand(commandName, false, commandValue);\n            } else {\n                // hooks 命令\n                hooks = editor.commandHooks;\n                if (commandName in hooks) {\n                    hooks[commandName](commandValue);\n                }\n            }\n        }\n\n        this.customCommand(e, commandFn, callback);\n    };\n\n    // 针对一个elem对象执行基础命令\n    E.fn.commandForElem = function (elemOpt, e, commandName, commandValue, callback) {\n        // 取得查询elem的查询条件和验证函数\n        var selector;\n        var check;\n        if (typeof elemOpt === 'string') {\n            selector = elemOpt;\n        } else {\n            selector = elemOpt.selector;\n            check = elemOpt.check;\n        }\n\n        // 查询elem\n        var rangeElem = this.getRangeElem();\n        rangeElem = this.getSelfOrParentByName(rangeElem, selector, check);\n\n        // 根据elem设置range\n        if (rangeElem) {\n            this.setRangeByElem(rangeElem);\n        }\n\n        // 然后执行基础命令\n        this.command(e, commandName, commandValue, callback);\n    };\n\n    // 自定义命令\n    E.fn.customCommand = function (e, commandFn, callback) {\n        var editor = this;\n        var range = editor.currentRange();\n\n        if (!range) {\n            // 目前没有选区，则无法执行命令\n            e && e.preventDefault();\n            return;\n        }\n        // 记录内容，以便撤销（执行命令之前就要记录）\n        editor.undoRecord();\n\n        // 恢复选区（有 range 参数）\n        this.restoreSelection(range);\n\n        // 执行命令事件\n        commandFn.call(editor);\n\n        // 保存选区（无参数，要从浏览器直接获取range信息）\n        this.saveSelection();\n        // 重新恢复选区（无参数，要取得刚刚从浏览器得到的range信息）\n        this.restoreSelection();\n\n        // 执行 callback\n        if (callback && typeof callback === 'function') {\n            callback.call(editor);\n        }\n\n        // 最后插入空行\n        editor.txt.insertEmptyP();\n\n        // 包裹暴露的img和text\n        editor.txt.wrapImgAndText();\n\n        // 更新内容\n        editor.updateValue();\n\n        // 更新菜单样式\n        editor.updateMenuStyle();\n\n        // 隐藏 dropPanel dropList modal  设置 200ms 间隔\n        function hidePanelAndModal() {\n            editor.hideDropPanelAndModal();\n        } \n        setTimeout(hidePanelAndModal, 200);\n\n        if (e) {\n            e.preventDefault();\n        }\n    };\n\n    // 封装 document.queryCommandValue 函数\n    // IE8 直接执行偶尔会报错，因此直接用 try catch 封装一下\n    E.fn.queryCommandValue = function (commandName) {\n        var result = '';\n        try {\n            result = document.queryCommandValue(commandName);\n        } catch (ex) {\n\n        }\n        return result;\n    };\n\n    // 封装 document.queryCommandState 函数\n    // IE8 直接执行偶尔会报错，因此直接用 try catch 封装一下\n    E.fn.queryCommandState = function (commandName) {\n        var result = false;\n        try {\n            result = document.queryCommandState(commandName);\n        } catch (ex) {\n\n        }\n        return result;\n    };\n\n    // 封装 document.queryCommandSupported 函数\n    E.fn.queryCommandSupported = function (commandName) {\n        var result = false;\n        try {\n            result = document.queryCommandSupported(commandName);\n        } catch (ex) {\n\n        }\n        return result;\n    };\n});\n// dom selector\n_e(function (E, $) {\n\n    var matchesSelector;\n\n    // matchesSelector hook\n    function _matchesSelectorForIE(selector) {\n        var elem = this;\n        var $elems = $(selector);\n        var result = false;\n\n        // 用jquery查找 selector 所有对象，如果其中有一个和传入 elem 相同，则证明 elem 符合 selector\n        $elems.each(function () {\n            if (this === elem) {\n                result = true;\n                return false;\n            }\n        });\n\n        return result;\n    }\n\n    // 从当前的elem，往上去查找合法标签 如 p head table blockquote ul ol 等\n    E.fn.getLegalTags = function (elem) {\n        var legalTags = this.config.legalTags;\n        if (!legalTags) {\n            E.error('配置项中缺少 legalTags 的配置');\n            return;\n        }\n        return this.getSelfOrParentByName(elem, legalTags);\n    };\n\n    // 根据条件，查询自身或者父元素，符合即返回\n    E.fn.getSelfOrParentByName = function (elem, selector, check) {\n\n        if (!elem || !selector) {\n            return;\n        }\n\n        if (!matchesSelector) {\n            // 定义 matchesSelector 函数\n            matchesSelector = elem.webkitMatchesSelector || \n                              elem.mozMatchesSelector ||\n                              elem.oMatchesSelector || \n                              elem.matchesSelector;\n        }\n        if (!matchesSelector) {\n            // 如果浏览器本身不支持 matchesSelector 则使用自定义的hook\n            matchesSelector = _matchesSelectorForIE;\n        }\n\n        var txt = this.txt.$txt.get(0);\n\n        while (elem && txt !== elem && $.contains(txt, elem)) {\n            if (matchesSelector.call(elem, selector)) {\n                // 符合 selector 查询条件\n\n                if (!check) {\n                    // 没有 check 验证函数，直接返回即可\n                    return elem;\n                }\n\n                if (check(elem)) {\n                    // 如果有 check 验证函数，还需 check 函数的确认\n                    return elem;\n                }\n            }\n\n            // 如果上一步没经过验证，则将跳转到父元素\n            elem = elem.parentNode;\n        }\n\n        return;\n    };\n});\n// undo redo\n_e(function (E, $) {\n\n    var length = 20;  // 缓存的最大长度\n    function _getRedoList(editor) {\n        if (editor._redoList == null) {\n            editor._redoList = [];\n        }\n        return editor._redoList;\n    }\n    function _getUndoList(editor) {\n        if (editor._undoList == null) {\n            editor._undoList = [];\n        }\n        return editor._undoList;\n    }\n\n    // 数据处理\n    function _handle(editor, data, type) {\n        // var range = data.range;\n        // var range2 = range.cloneRange && range.cloneRange();\n        var val = data.val;\n        var html = editor.txt.$txt.html();\n\n        if(val == null) {\n            return;\n        }\n\n        if (val === html) {\n            if (type === 'redo') { \n                editor.redo();\n                return;\n            } else if (type === 'undo') {\n                editor.undo();\n                return;\n            } else {\n                return;\n            }\n        }\n\n        // 保存数据\n        editor.txt.$txt.html(val);\n        // 更新数据到textarea（有必要的话）\n        editor.updateValue();\n\n        // onchange 事件\n        if (editor.onchange && typeof editor.onchange === 'function') {\n            editor.onchange.call(editor);\n        }\n\n        // ?????\n        // 注释：$txt 被重新赋值之后，range会被重置，cloneRange() 也不好使\n        // // 重置选区\n        // if (range2) {\n        //     editor.restoreSelection(range2);\n        // }\n    }\n\n    // 记录\n    E.fn.undoRecord = function () {\n        var editor = this;\n        var $txt = editor.txt.$txt;\n        var val = $txt.html();\n        var undoList = _getUndoList(editor);\n        var redoList = _getRedoList(editor);\n        var currentVal = undoList.length ? undoList[0] : '';\n\n        if (val === currentVal.val) {\n            return;\n        }\n\n        // 清空 redolist\n        if (redoList.length) {\n            redoList = [];\n        }\n\n        // 添加数据到 undoList\n        undoList.unshift({\n            range: editor.currentRange(),  // 将当前的range也记录下\n            val: val\n        });\n\n        // 限制 undoList 长度\n        if (undoList.length > length) {\n            undoList.pop();\n        }\n    };\n\n    // undo 操作\n    E.fn.undo = function () {\n        var editor = this;\n        var undoList = _getUndoList(editor);\n        var redoList = _getRedoList(editor);\n\n        if (!undoList.length) {\n            return;\n        }\n\n        // 取出 undolist 第一个值，加入 redolist\n        var data = undoList.shift();\n        redoList.unshift(data);\n\n        // 并修改编辑器的内容\n        _handle(this, data, 'undo');\n    };\n\n    // redo 操作\n    E.fn.redo = function () {\n        var editor = this;\n        var undoList = _getUndoList(editor);\n        var redoList = _getRedoList(editor);\n        if (!redoList.length) {\n            return;\n        }\n\n        // 取出 redolist 第一个值，加入 undolist\n        var data = redoList.shift();\n        undoList.unshift(data);\n\n        // 并修改编辑器的内容\n        _handle(this, data, 'redo');\n    };\n});\n// 暴露给用户的 API - create|disable|enable|destroy|undestroy|clear\n_e(function (E, $) {\n\n    // 创建编辑器\n    E.fn.create = function () {\n        var editor = this;\n\n        // 检查 E.$body 是否有值\n        // 如果在 body 之前引用了 js 文件，body 尚未加载，可能没有值\n        if (!E.$body || E.$body.length === 0) {\n            E.$body = $('body');\n            E.$document = $(document);\n            E.$window = $(window);\n        }\n\n        // 执行 addMenus 之前：\n        // 1. 允许用户修改 editor.UI 自定义配置UI\n        // 2. 允许用户通过修改 editor.menus 来自定义配置菜单\n        // 因此要在 create 时执行，而不是 init           \n        editor.addMenus();\n\n        // 渲染\n        editor.renderMenus();\n        editor.renderMenuContainer();\n        editor.renderTxt();\n        editor.renderEditorContainer();\n\n        // 绑定事件\n        editor.eventMenus();\n        editor.eventMenuContainer();\n        editor.eventTxt();\n\n        // 处理ready事件\n        editor.readyHeadler();\n\n        // 初始化选区\n        editor.initSelection();\n\n        // $txt 快捷方式\n        editor.$txt = editor.txt.$txt;\n\n        // 执行用户自定义事件，通过 E.ready() 添加\n        var _plugins = E._plugins;\n        if (_plugins && _plugins.length) {\n            $.each(_plugins, function (k, val) {\n                val.call(editor);\n            });\n        }\n    };\n\n    // 禁用编辑器\n    E.fn.disable = function () {\n        this.txt.$txt.removeAttr('contenteditable');\n        this.disableMenusExcept();\n\n        // 先禁用，再记录状态\n        this._disabled = true;\n    };\n    // 启用编辑器\n    E.fn.enable = function () {\n        // 先解除状态记录，再启用\n        this._disabled = false;\n        this.txt.$txt.attr('contenteditable', 'true');\n        this.enableMenusExcept();\n    };\n    // 销毁编辑器\n    E.fn.destroy = function () {\n        var self = this;\n        var $valueContainer = self.$valueContainer;\n        var $editorContainer = self.$editorContainer;\n        var valueNodeName = self.valueNodeName;\n\n        if (valueNodeName === 'div') {\n            // div 生成的编辑器\n            $valueContainer.removeAttr('contenteditable');\n            $editorContainer.after($valueContainer);\n            $editorContainer.hide();\n        } else {\n            // textarea 生成的编辑器\n            $valueContainer.show();\n            $editorContainer.hide();\n        }\n    };\n    // 撤销 销毁编辑器\n    E.fn.undestroy = function () {\n        var self = this;\n        var $valueContainer = self.$valueContainer;\n        var $editorContainer = self.$editorContainer;\n        var $menuContainer = self.menuContainer.$menuContainer;\n        var valueNodeName = self.valueNodeName;\n\n        if (valueNodeName === 'div') {\n            // div 生成的编辑器\n            $valueContainer.attr('contenteditable', 'true');\n            $menuContainer.after($valueContainer);\n            $editorContainer.show();\n        } else {\n            // textarea 生成的编辑器\n            $valueContainer.hide();\n            $editorContainer.show();\n        }\n    };\n    // 清空内容的快捷方式\n    E.fn.clear = function () {\n        var editor = this;\n        var $txt = editor.txt.$txt;\n        $txt.html('<p><br></p>');\n        editor.restoreSelectionByElem($txt.find('p').get(0));\n    };\n});\n// menuContainer 构造函数\n_e(function (E, $) {\n\n    // 定义构造函数\n    var MenuContainer = function (editor) {\n        this.editor = editor;\n        this.init();\n    };\n\n    MenuContainer.fn = MenuContainer.prototype;\n\n    // 暴露给 E 即 window.wangEditor\n    E.MenuContainer = MenuContainer;\n});\n// MenuContainer.fn bind fn\n_e(function (E, $) {\n\n    var MenuContainer = E.MenuContainer;\n\n    // 初始化\n    MenuContainer.fn.init = function () {\n        var self = this;\n        var $menuContainer = $('<div class=\"wangEditor-menu-container clearfix\"></div>');\n\n        self.$menuContainer = $menuContainer;\n\n        // change shadow\n        self.changeShadow();\n    };\n\n    // 编辑区域滚动时，增加shadow\n    MenuContainer.fn.changeShadow = function () {\n        var $menuContainer = this.$menuContainer;\n        var editor = this.editor;\n        var $txt = editor.txt.$txt;\n\n        $txt.on('scroll', function () {\n            if ($txt.scrollTop() > 10) {\n                $menuContainer.addClass('wangEditor-menu-shadow');\n            } else {\n                $menuContainer.removeClass('wangEditor-menu-shadow');\n            }\n        });\n    };\n});\n// MenuContainer.fn API\n_e(function (E, $) {\n\n    var MenuContainer = E.MenuContainer;\n\n    MenuContainer.fn.render = function () {\n        var $menuContainer = this.$menuContainer;\n        var $editorContainer = this.editor.$editorContainer;\n\n        $editorContainer.append($menuContainer);\n    };\n    \n    // 获取菜单栏的高度\n    MenuContainer.fn.height = function () {\n        var $menuContainer = this.$menuContainer;\n        return $menuContainer.height();\n    };\n\n    // 添加菜单\n    MenuContainer.fn.appendMenu = function (groupIdx, menu) {\n        // 判断是否需要新增一个菜单组\n        this._addGroup(groupIdx);\n        // 增加菜单（返回 $menuItem）\n        return this._addOneMenu(menu);\n    };\n    MenuContainer.fn._addGroup = function (groupIdx) {\n        var $menuContainer = this.$menuContainer;\n        var $menuGroup;\n        if (!this.$currentGroup || this.currentGroupIdx !== groupIdx) {\n            $menuGroup = $('<div class=\"menu-group clearfix\"></div>');\n            $menuContainer.append($menuGroup);\n\n            this.$currentGroup = $menuGroup;\n            this.currentGroupIdx = groupIdx;\n        }\n    };\n    MenuContainer.fn._addOneMenu = function (menu) {\n        var $menuNormal = menu.$domNormal;\n        var $menuSelected = menu.$domSelected;\n\n        var $menuGroup = this.$currentGroup;\n        var $item = $('<div class=\"menu-item clearfix\"></div>');\n            $item.attr('id', menu._id);\n        $menuSelected.hide();\n        $item.append($menuNormal).append($menuSelected);\n        $menuGroup.append($item);\n\n        return $item;\n    };\n});\n// menu 构造函数\n_e(function (E, $) {\n\n    // 定义构造函数\n    var Menu = function (opt) {\n        this.editor = opt.editor;\n        this.id = opt.id;\n        this._id = opt._id;\n        this.title = opt.title;\n        this.$domNormal = opt.$domNormal;\n        this.$domSelected = opt.$domSelected || opt.$domNormal;\n\n        // document.execCommand 的参数\n        this.commandName = opt.commandName;\n        this.commandValue = opt.commandValue;\n        this.commandNameSelected = opt.commandNameSelected || opt.commandName;\n        this.commandValueSelected = opt.commandValueSelected || opt.commandValue;\n    };\n\n    Menu.fn = Menu.prototype;\n\n    // 暴露给 E 即 window.wangEditor\n    E.Menu = Menu;\n});\n// Menu.fn 初始化绑定的事件\n_e(function (E, $) {\n\n    var Menu = E.Menu;\n\n    // 初始化UI\n    Menu.fn.initUI = function () {\n        var editor = this.editor;\n        var uiConfig = editor.UI.menus;\n        var menuId = this.id;\n        var menuUI = uiConfig[menuId];\n\n        if (this.$domNormal && this.$domSelected) {\n            // 自定义的菜单中，已经传入了 $dom 无需从配置文件中查找生成\n            return;\n        }\n\n        if (menuUI == null) {\n            E.warn('editor.UI配置中，没有菜单 \"' + menuId + '\" 的UI配置，只能取默认值');\n            \n            // 必须写成 uiConfig['default'];\n            // 写成 uiConfig.default IE8会报错\n            menuUI = uiConfig['default'];\n        }\n\n        // 正常状态\n        this.$domNormal = $(menuUI.normal);\n\n        // 选中状态\n        if (/^\\./.test(menuUI.selected)) {\n            // 增加一个样式\n            this.$domSelected = this.$domNormal.clone().addClass(menuUI.selected.slice(1));\n        } else {\n            // 一个新的dom对象\n            this.$domSelected = $(menuUI.selected);\n        }\n    };\n});\n// Menu.fn API\n_e(function (E, $) {\n\n    var Menu = E.Menu;\n\n    // 渲染菜单\n    Menu.fn.render = function (groupIdx) {\n        // 渲染UI\n        this.initUI();\n        \n        var editor = this.editor;\n        var menuContainer = editor.menuContainer;\n        var $menuItem = menuContainer.appendMenu(groupIdx, this);\n        var onRender = this.onRender;\n\n        // 渲染tip\n        this._renderTip($menuItem);\n\n        // 执行 onRender 函数\n        if (onRender && typeof onRender === 'function') {\n            onRender.call(this);\n        }\n    };\n    Menu.fn._renderTip = function ($menuItem) {\n        var self = this;\n        var editor = self.editor;\n        var title = self.title;\n        var $tip = $('<div class=\"menu-tip\"></div>');\n        var $triangle = $('<i class=\"tip-triangle\"></i>'); // 小三角\n\n        // 计算 tip 宽度\n        var $tempDiv;\n        if (!self.tipWidth) {\n            // 设置一个纯透明的 p（absolute;top:-10000px;不会显示在内容区域）\n            // 内容赋值为 title ，为了计算tip宽度\n            $tempDiv = $('<p style=\"opacity:0; filter:Alpha(opacity=0); position:absolute;top:-10000px;\">' + title + '</p>');\n            // 先添加到body，计算完再 remove\n            E.$body.append($tempDiv);\n            editor.ready(function () {\n                var editor = this;\n                var titleWidth = $tempDiv.outerWidth() + 5; // 多出 5px 的冗余\n                var currentWidth = $tip.outerWidth();\n                var currentMarginLeft = parseFloat($tip.css('margin-left'), 10);\n                // 计算完，拿到数据，则弃用\n                $tempDiv.remove();\n                $tempDiv = null;\n\n                // 重新设置样式\n                $tip.css({\n                    width: titleWidth,\n                    'margin-left': currentMarginLeft + (currentWidth - titleWidth)/2\n                });\n\n                // 存储\n                self.tipWidth = titleWidth;\n            });\n        }\n\n        $tip.append($triangle);\n        $tip.append(title);\n        $menuItem.append($tip);\n\n        function show() {\n            $tip.show();\n        }\n        function hide() {\n            $tip.hide();\n        }\n\n        var timeoutId;\n        $menuItem.find('a').on('mouseenter', function (e) {\n            if (!self.active() && !self.disabled()) {\n                timeoutId = setTimeout(show, 200);\n            }\n        }).on('mouseleave', function (e) {\n            timeoutId && clearTimeout(timeoutId);\n            hide();\n        }).on('click', hide);\n    };\n\n    // 绑定事件\n    Menu.fn.bindEvent = function () {\n        var self = this;\n\n        var $domNormal = self.$domNormal;\n        var $domSelected = self.$domSelected;\n\n        // 试图获取该菜单定义的事件（未selected），没有则自己定义\n        var clickEvent = self.clickEvent;\n        if (self.clickEventCustom) {\n            self.clickEventCustom();\n            return;\n        }\n        if (!clickEvent) {\n            clickEvent = function (e) {\n                // -----------dropPanel dropList modal-----------\n                var dropObj = self.dropPanel || self.dropList || self.modal;\n                if (dropObj && dropObj.show) {\n                    if (dropObj.isShowing) {\n                        dropObj.hide();\n                    } else {\n                        dropObj.show();\n                    }\n                    return;\n                }\n\n                // -----------command-----------\n                var editor = self.editor;\n                var commandName;\n                var commandValue;\n\n                var selected = self.selected;\n                if (selected) {\n                    commandName = self.commandNameSelected;\n                    commandValue = self.commandValueSelected;\n                } else {\n                    commandName = self.commandName;\n                    commandValue = self.commandValue;\n                }\n\n                if (commandName) {\n                    // 执行命令\n                    editor.command(e, commandName, commandValue);\n                } else {\n                    // 提示\n                    E.warn('菜单 \"' + self.id + '\" 未定义click事件');\n                    e.preventDefault();\n                }\n            };\n        }\n        // 获取菜单定义的selected情况下的点击事件\n        var clickEventSelected = self.clickEventSelected || clickEvent;\n\n        // 将事件绑定到菜单dom上\n        $domNormal.click(function (e) {\n            if (!self.disabled()) {\n                clickEvent.call(self, e);\n                self.updateSelected();\n            }\n            e.preventDefault();\n        });\n        $domSelected.click(function (e) {\n            if (!self.disabled()) {\n                clickEventSelected.call(self, e);\n                self.updateSelected();\n            }\n            e.preventDefault();\n        });\n    };\n\n    // 更新选中状态\n    Menu.fn.updateSelected = function () {\n        var self = this;\n        var editor = self.editor;\n\n        // 试图获取用户自定义的判断事件\n        var updateSelectedEvent = self.updateSelectedEvent;\n        if (!updateSelectedEvent) {\n            // 用户未自定义，则设置默认值\n            updateSelectedEvent = function () {\n                var self = this;\n                var editor = self.editor;\n                var commandName = self.commandName;\n                var commandValue = self.commandValue;\n\n                if (commandValue) {\n                    if (editor.queryCommandValue(commandName).toLowerCase() === commandValue.toLowerCase()) {\n                        return true;\n                    }\n                } else if (editor.queryCommandState(commandName)) {\n                    return true;\n                }\n\n                return false;\n            };\n        }\n\n        // 获取结果\n        var result = updateSelectedEvent.call(self);\n        result = !!result;\n\n        // 存储结果、显示效果\n        self.changeSelectedState(result);\n    };\n\n    // 切换选中状态、显示效果\n    Menu.fn.changeSelectedState = function (state) {\n        var self = this;\n        var selected = self.selected;\n\n        if (state != null && typeof state === 'boolean') {\n            if (selected === state) {\n                // 计算结果和当前的状态一样\n                return;\n            }\n            // 存储结果\n            self.selected = state;\n\n            // 切换菜单的显示\n            if (state) {\n                // 选中\n                self.$domNormal.hide();\n                self.$domSelected.show();\n            } else {\n                // 未选中\n                self.$domNormal.show();\n                self.$domSelected.hide();\n            }\n        } // if\n    };\n\n    // 点击菜单，显示了 dropPanel modal 时，菜单的状态 \n    Menu.fn.active = function (active) {\n        if (active == null) {\n            return this._activeState;\n        }\n        this._activeState = active;\n    };\n    Menu.fn.activeStyle = function (active) {\n        var selected = this.selected;\n        var $dom = this.$domNormal;\n        var $domSelected = this.$domSelected;\n\n        if (active) {\n            $dom.addClass('active');\n            $domSelected.addClass('active');\n        } else {\n            $dom.removeClass('active');\n            $domSelected.removeClass('active');\n        }\n\n        // 记录状态 （ menu hover 时会取状态用 ）\n        this.active(active);\n    };\n\n    // 菜单的启用和禁用\n    Menu.fn.disabled = function (opt) {\n        // 参数为空，取值\n        if (opt == null) {\n            return !!this._disabled;\n        }\n\n        if (this._disabled === opt) {\n            // 要设置的参数值和当前参数只一样，无需再次设置\n            return;\n        }\n\n        var $dom = this.$domNormal;\n        var $domSelected = this.$domSelected;\n\n        // 设置样式\n        if (opt) {\n            $dom.addClass('disable');\n            $domSelected.addClass('disable');\n        } else {\n            $dom.removeClass('disable');\n            $domSelected.removeClass('disable');\n        }\n\n        // 存储\n        this._disabled = opt;\n    };\n});\n// dropList 构造函数\n_e(function (E, $) {\n\n    // 定义构造函数\n    var DropList = function (editor, menu, opt) {\n        this.editor = editor;\n        this.menu = menu;\n\n        // list 的数据源，格式 {'commandValue': 'title', ...}\n        this.data = opt.data;\n        // 要为每个item自定义的模板\n        this.tpl = opt.tpl;\n        // 为了执行 editor.commandForElem 而传入的elem查询方式\n        this.selectorForELemCommand = opt.selectorForELemCommand;\n\n        // 执行事件前后的钩子\n        this.beforeEvent = opt.beforeEvent;\n        this.afterEvent = opt.afterEvent;\n\n        // 初始化\n        this.init();\n    };\n\n    DropList.fn = DropList.prototype;\n\n    // 暴露给 E 即 window.wangEditor\n    E.DropList = DropList;\n});\n// dropList fn bind\n_e(function (E, $) {\n\n    var DropList = E.DropList;\n\n    // init\n    DropList.fn.init = function () {\n        var self = this;\n\n        // 生成dom对象\n        self.initDOM();\n\n        // 绑定command事件\n        self.bindEvent();\n\n        // 声明隐藏的事件\n        self.initHideEvent();\n    };\n\n    // 初始化dom结构\n    DropList.fn.initDOM = function () {\n        var self = this;\n        var data = self.data;\n        var tpl = self.tpl || '<span>{#title}</span>';\n        var $list = $('<div class=\"wangEditor-drop-list clearfix\"></div>');\n\n        var itemContent;\n        var $item;\n        $.each(data, function (commandValue, title) {\n            itemContent = tpl.replace(/{#commandValue}/ig, commandValue).replace(/{#title}/ig, title);\n            $item = $('<a href=\"#\" commandValue=\"' + commandValue + '\"></a>');\n            $item.append(itemContent);\n            $list.append($item);\n        });\n\n        self.$list = $list;\n    };\n\n    // 绑定事件\n    DropList.fn.bindEvent = function () {\n        var self = this;\n        var editor = self.editor;\n        var menu = self.menu;\n        var commandName = menu.commandName;\n        var selectorForELemCommand = self.selectorForELemCommand;\n        var $list = self.$list;\n\n        // 执行事件前后的钩子函数\n        var beforeEvent = self.beforeEvent;\n        var afterEvent = self.afterEvent;\n\n        $list.on('click', 'a[commandValue]', function (e) {\n            // 正式命令执行之前\n            if (beforeEvent && typeof beforeEvent === 'function') {\n                beforeEvent.call(e);\n            }\n\n            // 执行命令\n            var commandValue = $(e.currentTarget).attr('commandValue');\n            if (menu.selected && editor.isRangeEmpty() && selectorForELemCommand) {\n                // 当前处于选中状态，并且选中内容为空\n                editor.commandForElem(selectorForELemCommand, e, commandName, commandValue);\n            } else {\n                // 当前未处于选中状态，或者有选中内容。则执行默认命令\n                editor.command(e, commandName, commandValue);\n            }\n\n            // 正式命令之后的钩子\n            if (afterEvent && typeof afterEvent === 'function') {\n                afterEvent.call(e);\n            }\n        });\n    };\n\n    // 点击其他地方，立即隐藏 droplist\n    DropList.fn.initHideEvent = function () {\n        var self = this;\n\n        // 获取 list elem\n        var thisList = self.$list.get(0);\n\n        E.$body.on('click', function (e) {\n            if (!self.isShowing) {\n                return;\n            }\n            var trigger = e.target;\n\n            // 获取菜单elem\n            var menu = self.menu;\n            var menuDom;\n            if (menu.selected) {\n                menuDom = menu.$domSelected.get(0);\n            } else {\n                menuDom = menu.$domNormal.get(0);\n            }\n\n            if (menuDom === trigger || $.contains(menuDom, trigger)) {\n                // 说明由本菜单点击触发的\n                return;\n            }\n\n            if (thisList === trigger || $.contains(thisList, trigger)) {\n                // 说明由本list点击触发的\n                return;\n            }\n\n            // 其他情况，隐藏 list\n            self.hide();\n        });\n\n        E.$window.scroll(function () {\n            self.hide();\n        });\n\n        E.$window.on('resize', function () {\n            self.hide();\n        });\n    };\n});\n// dropListfn api\n_e(function (E, $) {\n    \n    var DropList = E.DropList;\n\n    // 渲染\n    DropList.fn._render = function () {\n        var self = this;\n        var editor = self.editor;\n        var $list = self.$list;\n\n        // 渲染到页面\n        editor.$editorContainer.append($list);\n\n        // 记录状态\n        self.rendered = true;\n    };\n\n    // 定位\n    DropList.fn._position = function () {\n        var self = this;\n        var $list = self.$list;\n        var editor = self.editor;\n        var menu = self.menu;\n        var $menuContainer = editor.menuContainer.$menuContainer;\n        var $menuDom = menu.selected ? menu.$domSelected : menu.$domNormal;\n        // 注意这里的 offsetParent() 要返回 .menu-item 的 position\n        // 因为 .menu-item 是 position:relative\n        var menuPosition = $menuDom.offsetParent().position();\n\n        // 取得 menu 的位置、尺寸属性\n        var menuTop = menuPosition.top;\n        var menuLeft = menuPosition.left;\n        var menuHeight = $menuDom.offsetParent().height();\n        var menuWidth = $menuDom.offsetParent().width();\n\n        // 取得 list 的尺寸属性\n        var listWidth = $list.outerWidth();\n        // var listHeight = $list.outerHeight();\n\n        // 取得 $txt 的尺寸\n        var txtWidth = editor.txt.$txt.outerWidth();\n\n        // ------------开始计算-------------\n\n        // 初步计算 list 位置属性\n        var top = menuTop + menuHeight;\n        var left = menuLeft + menuWidth/2;\n        var marginLeft = 0 - menuWidth/2;\n\n        // 如果超出了有边界，则要左移（且和右侧有间隙）\n        var valWithTxt = (left + listWidth) - txtWidth;\n        if (valWithTxt > -10) {\n            marginLeft = marginLeft - valWithTxt - 10;\n        }\n        // 设置样式\n        $list.css({\n            top: top,\n            left: left,\n            'margin-left': marginLeft\n        });\n\n        // 如果因为向下滚动而导致菜单fixed，则再加一步处理\n        if (editor._isMenufixed) {\n            top = top + (($menuContainer.offset().top + $menuContainer.outerHeight()) - $list.offset().top);\n\n            // 重新设置top\n            $list.css({\n                top: top\n            });\n        }\n    };\n\n    // 显示\n    DropList.fn.show = function () {\n        var self = this;\n        var menu = self.menu;\n        if (!self.rendered) {\n            // 第一次show之前，先渲染\n            self._render();\n        }\n\n        if (self.isShowing) {\n            return;\n        }\n\n        var $list = self.$list;\n        $list.show();\n\n        // 定位\n        self._position();\n\n        // 记录状态\n        self.isShowing = true;\n\n        // 菜单状态\n        menu.activeStyle(true);\n    };\n\n    // 隐藏\n    DropList.fn.hide = function () {\n        var self = this;\n        var menu = self.menu;\n        if (!self.isShowing) {\n            return;\n        }\n\n        var $list = self.$list;\n        $list.hide();\n\n        // 记录状态\n        self.isShowing = false;\n\n        // 菜单状态\n        menu.activeStyle(false);\n    };\n});\n// dropPanel 构造函数\n_e(function (E, $) {\n\n    // 定义构造函数\n    var DropPanel = function (editor, menu, opt) {\n        this.editor = editor;\n        this.menu = menu;\n        this.$content = opt.$content;\n        this.width = opt.width || 200;\n        this.height = opt.height;\n        this.onRender = opt.onRender;\n\n        // init\n        this.init();\n    };\n\n    DropPanel.fn = DropPanel.prototype;\n\n    // 暴露给 E 即 window.wangEditor\n    E.DropPanel = DropPanel;\n});\n// dropPanel fn bind\n_e(function (E, $) {\n\n    var DropPanel = E.DropPanel;\n\n    // init\n    DropPanel.fn.init = function () {\n        var self = this;\n\n        // 生成dom对象\n        self.initDOM();\n\n        // 声明隐藏的事件\n        self.initHideEvent();\n    };\n\n    // init DOM\n    DropPanel.fn.initDOM = function () {\n        var self = this;\n        var $content = self.$content;\n        var width = self.width;\n        var height = self.height;\n        var $panel = $('<div class=\"wangEditor-drop-panel clearfix\"></div>');\n        var $triangle = $('<div class=\"tip-triangle\"></div>');\n\n        $panel.css({\n            width: width,\n            height: height ? height : 'auto'\n        });\n        $panel.append($triangle);\n        $panel.append($content);\n\n        // 添加对象数据\n        self.$panel = $panel;\n        self.$triangle = $triangle;\n    };\n\n    // 点击其他地方，立即隐藏 dropPanel\n    DropPanel.fn.initHideEvent = function () {\n        var self = this;\n\n        // 获取 panel elem\n        var thisPanle = self.$panel.get(0);\n\n        E.$body.on('click', function (e) {\n            if (!self.isShowing) {\n                return;\n            }\n            var trigger = e.target;\n\n            // 获取菜单elem\n            var menu = self.menu;\n            var menuDom;\n            if (menu.selected) {\n                menuDom = menu.$domSelected.get(0);\n            } else {\n                menuDom = menu.$domNormal.get(0);\n            }\n\n            if (menuDom === trigger || $.contains(menuDom, trigger)) {\n                // 说明由本菜单点击触发的\n                return;\n            }\n\n            if (thisPanle === trigger || $.contains(thisPanle, trigger)) {\n                // 说明由本panel点击触发的\n                return;\n            }\n\n            // 其他情况，隐藏 panel\n            self.hide();\n        });\n\n        E.$window.scroll(function (e) {\n            self.hide();\n        });\n\n        E.$window.on('resize', function () {\n            self.hide();\n        });\n    };\n});\n// dropPanel fn api\n_e(function (E, $) {\n   \n    var DropPanel = E.DropPanel;\n\n    // 渲染\n    DropPanel.fn._render = function () {\n        var self = this;\n        var onRender = self.onRender;\n        var editor = self.editor;\n        var $panel = self.$panel;\n\n        // 渲染到页面\n        editor.$editorContainer.append($panel);\n\n        // 渲染后的回调事件\n        onRender && onRender.call(self);\n\n        // 记录状态\n        self.rendered = true;\n    };\n\n    // 定位\n    DropPanel.fn._position = function () {\n        var self = this;\n        var $panel = self.$panel;\n        var $triangle = self.$triangle;\n        var editor = self.editor;\n        var $menuContainer = editor.menuContainer.$menuContainer;\n        var menu = self.menu;\n        var $menuDom = menu.selected ? menu.$domSelected : menu.$domNormal;\n        // 注意这里的 offsetParent() 要返回 .menu-item 的 position\n        // 因为 .menu-item 是 position:relative\n        var menuPosition = $menuDom.offsetParent().position();\n\n        // 取得 menu 的位置、尺寸属性\n        var menuTop = menuPosition.top;\n        var menuLeft = menuPosition.left;\n        var menuHeight = $menuDom.offsetParent().height();\n        var menuWidth = $menuDom.offsetParent().width();\n\n        // 取得 panel 的尺寸属性\n        var panelWidth = $panel.outerWidth();\n        // var panelHeight = $panel.outerHeight();\n\n        // 取得 $txt 的尺寸\n        var txtWidth = editor.txt.$txt.outerWidth();\n\n        // ------------开始计算-------------\n\n        // 初步计算 panel 位置属性\n        var top = menuTop + menuHeight;\n        var left = menuLeft + menuWidth/2;\n        var marginLeft = 0 - panelWidth/2;\n        var marginLeft2 = marginLeft;  // 下文用于和 marginLeft 比较，来设置三角形tip的位置\n\n        // 如果超出了左边界，则移动回来（要和左侧有10px间隙）\n        if ((0 - marginLeft) > (left - 10)) {\n            marginLeft = 0 - (left - 10);\n        }\n\n        // 如果超出了有边界，则要左移（且和右侧有10px间隙）\n        var valWithTxt = (left + panelWidth + marginLeft) - txtWidth;\n        if (valWithTxt > -10) {\n            marginLeft = marginLeft - valWithTxt - 10;\n        }\n\n        // 设置样式\n        $panel.css({\n            top: top,\n            left: left,\n            'margin-left': marginLeft\n        });\n\n        // 如果因为向下滚动而导致菜单fixed，则再加一步处理\n        if (editor._isMenufixed) {\n            top = top + (($menuContainer.offset().top + $menuContainer.outerHeight()) - $panel.offset().top);\n\n            // 重新设置top\n            $panel.css({\n                top: top\n            });\n        }\n\n        // 设置三角形 tip 的位置\n        $triangle.css({\n            'margin-left': marginLeft2 - marginLeft - 5\n        });\n    };\n\n    // focus 第一个 input\n    DropPanel.fn.focusFirstInput = function () {\n        var self = this;\n        var $panel = self.$panel;\n        $panel.find('input[type=text],textarea').each(function () {\n            var $input = $(this);\n            if ($input.attr('disabled') == null) {\n                $input.focus();\n                return false;\n            }\n        });\n    };\n\n    // 显示\n    DropPanel.fn.show = function () {\n        var self = this;\n        var menu = self.menu;\n        if (!self.rendered) {\n            // 第一次show之前，先渲染\n            self._render();\n        }\n\n        if (self.isShowing) {\n            return;\n        }\n\n        var $panel = self.$panel;\n        $panel.show();\n\n        // 定位\n        self._position();\n\n        // 记录状态\n        self.isShowing = true;\n\n        // 菜单状态\n        menu.activeStyle(true);\n\n        if (E.w3cRange) {\n            // 高级浏览器\n            self.focusFirstInput();\n        } else {\n            // 兼容 IE8 input placeholder\n            E.placeholderForIE8($panel);\n        }\n    };\n\n    // 隐藏\n    DropPanel.fn.hide = function () {\n        var self = this;\n        var menu = self.menu;\n        if (!self.isShowing) {\n            return;\n        }\n\n        var $panel = self.$panel;\n        $panel.hide();\n\n        // 记录状态\n        self.isShowing = false;\n\n        // 菜单状态\n        menu.activeStyle(false);\n    };\n});\n// modal 构造函数\n_e(function (E, $) {\n\n    // 定义构造函数\n    var Modal = function (editor, menu, opt) {\n        this.editor = editor;\n        this.menu = menu;\n        this.$content = opt.$content;\n\n        this.init();\n    };\n\n    Modal.fn = Modal.prototype;\n\n    // 暴露给 E 即 window.wangEditor\n    E.Modal = Modal;\n});\n// modal fn bind\n_e(function (E, $) {\n\n    var Modal = E.Modal;\n\n    Modal.fn.init = function () {\n        var self = this;\n\n        // 初始化dom\n        self.initDom();\n\n        // 初始化隐藏事件\n        self.initHideEvent();\n    };\n\n    // 初始化dom\n    Modal.fn.initDom = function () {\n        var self = this;\n        var $content = self.$content;\n        var $modal = $('<div class=\"wangEditor-modal\"></div>');\n        var $close = $('<div class=\"wangEditor-modal-close\"><i class=\"wangeditor-menu-img-cancel-circle\"></i></div>');\n\n        $modal.append($close);\n        $modal.append($content);\n\n        // 记录数据\n        self.$modal = $modal;\n        self.$close = $close;\n    };\n\n    // 初始化隐藏事件\n    Modal.fn.initHideEvent = function () {\n        var self = this;\n        var $close = self.$close;\n        var modal = self.$modal.get(0);\n\n        // 点击 $close 按钮，隐藏\n        $close.click(function () {\n            self.hide();\n        });\n\n        // 点击其他部分，隐藏\n        E.$body.on('click', function (e) {\n            if (!self.isShowing) {\n                return;\n            }\n            var trigger = e.target;\n\n            // 获取菜单elem\n            var menu = self.menu;\n            var menuDom;\n            if (menu) {\n                if (menu.selected) {\n                    menuDom = menu.$domSelected.get(0);\n                } else {\n                    menuDom = menu.$domNormal.get(0);\n                }\n\n                if (menuDom === trigger || $.contains(menuDom, trigger)) {\n                    // 说明由本菜单点击触发的\n                    return;\n                }\n            }\n\n            if (modal === trigger || $.contains(modal, trigger)) {\n                // 说明由本panel点击触发的\n                return;\n            }\n\n            // 其他情况，隐藏 panel\n            self.hide();\n        });\n    };\n});\n// modal fn api\n_e(function (E, $) {\n\n    var Modal = E.Modal;\n\n    // 渲染\n    Modal.fn._render = function () {\n        var self = this;\n        var editor = self.editor;\n        var $modal = self.$modal;\n\n        // $modal的z-index，在配置的z-index基础上再 +10\n        $modal.css('z-index', editor.config.zindex + 10 + '');\n\n        // 渲染到body最后面\n        E.$body.append($modal);\n\n        // 记录状态\n        self.rendered = true;\n    };\n\n    // 定位\n    Modal.fn._position = function () {\n        var self = this;\n        var $modal = self.$modal;\n        var top = $modal.offset().top;\n        var width = $modal.outerWidth();\n        var height = $modal.outerHeight();\n        var marginLeft = 0 - (width / 2);\n        var marginTop = 0 - (height / 2);\n        var sTop = E.$window.scrollTop();\n\n        // 保证modal最顶部，不超过浏览器上边框\n        if ((height / 2) > top) {\n            marginTop = 0 - top;\n        }\n\n        $modal.css({\n            'margin-left': marginLeft + 'px',\n            'margin-top': (marginTop + sTop) + 'px'\n        });\n    };\n\n    // 显示\n    Modal.fn.show = function () {\n        var self = this;\n        var menu = self.menu;\n        if (!self.rendered) {\n            // 第一次show之前，先渲染\n            self._render();\n        }\n\n        if (self.isShowing) {\n            return;\n        }\n        // 记录状态\n        self.isShowing = true;\n\n        var $modal = self.$modal;\n        $modal.show();\n\n        // 定位\n        self._position();\n\n        // 激活菜单状态\n        menu && menu.activeStyle(true);\n    };\n\n    // 隐藏\n    Modal.fn.hide = function () {\n        var self = this;\n        var menu = self.menu;\n        if (!self.isShowing) {\n            return;\n        }\n        // 记录状态\n        self.isShowing = false;\n\n        // 隐藏\n        var $modal = self.$modal;\n        $modal.hide();\n\n        // 菜单状态\n        menu && menu.activeStyle(false);\n    };\n});\n// txt 构造函数\n_e(function (E, $) {\n\n    // 定义构造函数\n    var Txt = function (editor) {\n        this.editor = editor;\n\n        // 初始化\n        this.init();\n    };\n\n    Txt.fn = Txt.prototype;\n\n    // 暴露给 E 即 window.wangEditor\n    E.Txt = Txt;\n});\n// Txt.fn bind fn\n_e(function (E, $) {\n\n    var Txt = E.Txt;\n\n    // 初始化\n    Txt.fn.init = function () {\n        var self = this;\n        var editor = self.editor;\n        var $valueContainer = editor.$valueContainer;\n        var currentValue = editor.getInitValue();\n        var $txt;\n\n        if ($valueContainer.get(0).nodeName === 'DIV') {\n            // 如果传入生成编辑器的元素就是div，则直接使用\n            $txt = $valueContainer;\n            $txt.addClass(\"wangEditor-txt\");\n            $txt.attr('contentEditable', 'true');\n        } else {\n            // 如果不是div（是textarea），则创建一个div\n            $txt = $(\n                '<div class=\"wangEditor-txt\" contentEditable=\"true\">' +\n                    currentValue +\n                '</div>'\n            );\n        }\n\n        // 试图最后插入一个空行，ready之后才行\n        editor.ready(function () {\n            self.insertEmptyP();\n        });\n\n        self.$txt = $txt;\n\n        // 删除时，如果没有内容了，就添加一个 <p><br></p>\n        self.contentEmptyHandle();\n\n        // enter时，不能使用 div 换行\n        self.bindEnterForDiv();\n\n        // enter时，用 p 包裹 text\n        self.bindEnterForText();\n\n        // tab 插入4个空格\n        self.bindTabEvent();\n\n        // 处理粘贴内容\n        self.bindPasteFilter();\n\n        // $txt.formatText() 方法\n        self.bindFormatText();\n\n        // 定义 $txt.html() 方法\n        self.bindHtml();\n    };\n\n    // 删除时，如果没有内容了，就添加一个 <p><br></p>\n    Txt.fn.contentEmptyHandle = function () {\n        var self = this;\n        var editor = self.editor;\n        var $txt = self.$txt;\n        var $p;\n\n        $txt.on('keydown', function (e) {\n            if (e.keyCode !== 8) {\n                return;\n            }\n            var txtHtml = $.trim($txt.html().toLowerCase());\n            if (txtHtml === '<p><br></p>') {\n                // 如果最后还剩余一个空行，就不再继续删除了\n                e.preventDefault();\n                return;\n            }\n        });\n\n        $txt.on('keyup', function (e) {\n            if (e.keyCode !== 8) {\n                return;\n            }\n            var txtHtml = $.trim($txt.html().toLowerCase());\n            // ff时用 txtHtml === '<br>' 判断，其他用 !txtHtml 判断\n            if (!txtHtml || txtHtml === '<br>') {\n                // 内容空了\n                $p = $('<p><br/></p>');\n                $txt.html(''); // 一定要先清空，否则在 ff 下有问题\n                $txt.append($p);\n                editor.restoreSelectionByElem($p.get(0));\n            }\n        });\n    };\n\n    // enter时，不能使用 div 换行\n    Txt.fn.bindEnterForDiv = function () {\n        var tags = E.config.legalTags; // 配置中编辑器要求的合法标签，如 p head table blockquote ul ol 等\n        var self = this;\n        var editor = self.editor;\n        var $txt = self.$txt;\n\n        var $keydownDivElem;\n        function divHandler() {\n            if (!$keydownDivElem) {\n                return;\n            }\n\n            var $pElem = $('<p>' + $keydownDivElem.html() + '</p>');\n            $keydownDivElem.after($pElem);\n            $keydownDivElem.remove();\n        }\n\n        $txt.on('keydown keyup', function (e) {\n            if (e.keyCode !== 13) {\n                return;\n            }\n            // 查找合法标签\n            var rangeElem = editor.getRangeElem();\n            var targetElem = editor.getLegalTags(rangeElem);\n            var $targetElem;\n            var $pElem;\n\n            if (!targetElem) {\n                // 没找到合法标签，就去查找 div\n                targetElem = editor.getSelfOrParentByName(rangeElem, 'div');\n                if (!targetElem) {\n                    return;\n                }\n                $targetElem = $(targetElem);\n\n                if (e.type === 'keydown') {\n                    // 异步执行（同步执行会出现问题）\n                    $keydownDivElem = $targetElem;\n                    setTimeout(divHandler, 0);\n                }\n\n                if (e.type === 'keyup') {\n                    // 将 div 的内容移动到 p 里面，并移除 div\n                    $pElem = $('<p>' + $targetElem.html() + '</p>');\n                    $targetElem.after($pElem);\n                    $targetElem.remove();\n\n                    // 如果是回车结束，将选区定位到行首\n                    editor.restoreSelectionByElem($pElem.get(0), 'start');\n                }\n            }\n        });\n    };\n\n    // enter时，用 p 包裹 text\n    Txt.fn.bindEnterForText = function () {\n        var self = this;\n        var $txt = self.$txt;\n        var handle;\n        $txt.on('keyup', function (e) {\n            if (e.keyCode !== 13) {\n                return;\n            }\n            if (!handle) {\n                handle = function() {\n                    self.wrapImgAndText();\n                };\n            }\n            setTimeout(handle);\n        });\n    };\n\n    // tab 时，插入4个空格\n    Txt.fn.bindTabEvent = function () {\n        var self = this;\n        var editor = self.editor;\n        var $txt = self.$txt;\n\n        $txt.on('keydown', function (e) {\n            if (e.keyCode !== 9) {\n                // 只监听 tab 按钮\n                return;\n            }\n            // 如果浏览器支持 insertHtml 则插入4个空格。如果不支持，就不管了\n            if (editor.queryCommandSupported('insertHtml')) {\n                editor.command(e, 'insertHtml', '&nbsp;&nbsp;&nbsp;&nbsp;');\n            }\n        });\n    };\n\n    // 处理粘贴内容\n    Txt.fn.bindPasteFilter = function () {\n        var self = this;\n        var editor = self.editor;\n        var resultHtml = '';  //存储最终的结果\n        var $txt = self.$txt;\n        var legalTags = editor.config.legalTags;\n        var legalTagArr = legalTags.split(',');\n\n        $txt.on('paste', function (e) {\n            if (!editor.config.pasteFilter) {\n                // 配置中取消了粘贴过滤\n                return;\n            }\n\n            var currentNodeName = editor.getRangeElem().nodeName;\n            if (currentNodeName === 'TD' || currentNodeName === 'TH') {\n                // 在表格的单元格中粘贴，忽略所有内容。否则会出现异常情况\n                return;\n            }\n\n            resultHtml = ''; // 先清空 resultHtml\n\n            var pasteHtml, $paste, docSplitHtml;\n            var data = e.clipboardData || e.originalEvent.clipboardData;\n            var ieData = window.clipboardData;\n\n            if (editor.config.pasteText) {\n                // 只粘贴纯文本\n\n                if (data && data.getData) {\n                    // w3c\n                    pasteHtml = data.getData('text/plain');\n                } else if (ieData && ieData.getData) {\n                    // IE\n                    pasteHtml = ieData.getData('text');\n                } else {\n                    // 其他情况\n                    return;\n                }\n\n                // 拼接为 <p> 标签\n                if (pasteHtml) {\n                    resultHtml = '<p>' + pasteHtml + '</p>';\n                }\n\n            } else {\n                // 粘贴过滤了样式的、只有标签的 html\n\n                if (data && data.getData) {\n                    // w3c\n\n                    // 获取粘贴过来的html\n                    pasteHtml = data.getData('text/html');\n\n                    // 过滤从 word excel 粘贴过来的乱码\n                    docSplitHtml = pasteHtml.split('</html>');\n                    if (docSplitHtml.length === 2) {\n                        pasteHtml = docSplitHtml[0];\n                    }\n\n                    if (pasteHtml) {\n                        // 创建dom\n                        $paste = $('<div>' + pasteHtml + '</div>');\n                        // 处理，并将结果存储到 resultHtml 『全局』变量\n                        handle($paste.get(0));\n                    } else {\n                        // 得不到html，试图获取text\n                        pasteHtml = data.getData('text/plain');\n                        if (pasteHtml) {\n                            // 替换特殊字符\n                            pasteHtml = pasteHtml.replace(/[ ]/g, '&nbsp;')\n                                                 .replace(/</g, '&lt;')\n                                                 .replace(/>/g, '&gt;')\n                                                 .replace(/\\n/g, '</p><p>');\n                            // 拼接\n                            resultHtml = '<p>' + pasteHtml + '</p>';\n\n                            // 查询链接\n                            resultHtml = resultHtml.replace(/<p>(https?:\\/\\/.*?)<\\/p>/ig, function (match, link) {\n                                return '<p><a href=\"' + link + '\" target=\"_blank\">' + link + '</p>';\n                            });\n                        }\n                    }\n                    \n                } else if (ieData && ieData.getData) {\n                    // IE 直接从剪切板中取出纯文本格式\n                    resultHtml = ieData.getData('text');\n                    if (!resultHtml) {\n                        return;\n                    }\n                    // 拼接为 <p> 标签\n                    resultHtml = '<p>' + resultHtml + '</p>';\n                    resultHtml = resultHtml.replace(new RegExp('\\n', 'g'), '</p><p>');\n                } else {\n                    // 其他情况\n                    return;\n                }\n            }\n\n            // 执行命令\n            if (resultHtml) {\n                editor.command(e, 'insertHtml', resultHtml);\n\n                // 删除内容为空的 p 和嵌套的 p\n                self.clearEmptyOrNestP();\n            }\n        });\n\n        // 处理粘贴的内容\n        function handle(elem) {\n            if (!elem || !elem.nodeType || !elem.nodeName) {\n                return;\n            }\n            var $elem;\n            var nodeName = elem.nodeName.toLowerCase();\n            var nodeType = elem.nodeType;\n            var childNodesClone;\n\n            // 只处理文本和普通node标签\n            if (nodeType !== 3 && nodeType !== 1) {\n                return;\n            }\n\n            $elem = $(elem);\n\n            // 如果是容器，则继续深度遍历\n            if (nodeName === 'div') {\n                childNodesClone = [];\n                $.each(elem.childNodes, function (index, item) {\n                    // elem.childNodes 可获取TEXT节点，而 $elem.children() 就获取不到\n                    // 先将 elem.childNodes 拷贝一份，一面在循环递归过程中 elem 发生变化\n                    childNodesClone.push(item);\n                });\n                // 遍历子元素，执行操作\n                $.each(childNodesClone, function () {\n                    handle(this);\n                });\n                return;\n            }\n            \n            if (legalTagArr.indexOf(nodeName) >= 0) {\n                // 如果是合法标签之内的，则根据元素类型，获取值\n                resultHtml += getResult(elem);\n            } else if (nodeType === 3) {\n                // 如果是文本，则直接插入 p 标签\n                resultHtml += '<p>' + elem.textContent + '</p>';\n            } else if (nodeName === 'br') {\n                // <br>保留\n                resultHtml += '<br/>';\n            }\n            else {\n                // 忽略的标签\n                if (['meta', 'style', 'script', 'object', 'form', 'iframe', 'hr'].indexOf(nodeName) >= 0) {\n                    return;\n                }\n                // 其他标签，移除属性，插入 p 标签\n                $elem = $(removeAttrs(elem));\n                // 注意，这里的 clone() 是必须的，否则会出错\n                resultHtml += $('<div>').append($elem.clone()).html();\n            }\n        }\n\n        // 获取元素的结果\n        function getResult(elem) {\n            var nodeName = elem.nodeName.toLowerCase();\n            var $elem;\n            var htmlForP = '';\n            var htmlForLi = '';\n\n            if (['blockquote'].indexOf(nodeName) >= 0) {\n\n                // 直接取出元素text即可\n                $elem = $(elem);\n                return '<' + nodeName + '>' + $elem.text() + '</' + nodeName + '>';\n\n            } else if (['p', 'h1', 'h2', 'h3', 'h4', 'h5'].indexOf(nodeName) >= 0) {\n\n                //p head 取出 text 和链接\n                elem = removeAttrs(elem);\n                $elem = $(elem);\n                htmlForP = $elem.html();\n\n                // 剔除 a img 之外的元素\n                htmlForP = htmlForP.replace(/<.*?>/ig, function (tag) {\n                    if (tag === '</a>' || tag.indexOf('<a ') === 0 || tag.indexOf('<img ') === 0) {\n                        return tag;\n                    } else {\n                        return '';\n                    }\n                });\n\n                return '<' + nodeName + '>' + htmlForP + '</' + nodeName + '>';\n\n            } else if (['ul', 'ol'].indexOf(nodeName) >= 0) {\n                \n                // ul ol元素，获取子元素（li元素）的text link img，再拼接\n                $elem = $(elem);\n                $elem.children().each(function () {\n                    var $li = $(removeAttrs(this));\n                    var html = $li.html();\n\n                    html = html.replace(/<.*?>/ig, function (tag) {\n                        if (tag === '</a>' || tag.indexOf('<a ') === 0 || tag.indexOf('<img ') === 0) {\n                            return tag;\n                        } else {\n                            return '';\n                        }\n                    });\n\n                    htmlForLi += '<li>' + html + '</li>';\n                });\n                return '<' + nodeName + '>' + htmlForLi + '</' + nodeName + '>';\n            \n            } else {\n                \n                // 其他元素，移除元素属性\n                $elem = $(removeAttrs(elem));\n                return $('<div>').append($elem).html();\n            }\n        }\n\n        // 移除一个元素（子元素）的attr\n        function removeAttrs(elem) {\n            var attrs = elem.attributes || [];\n            var attrNames = [];\n            var exception = ['href', 'target', 'src', 'alt', 'rowspan', 'colspan']; //例外情况\n\n            // 先存储下elem中所有 attr 的名称\n            $.each(attrs, function (key, attr) {\n                if (attr && attr.nodeType === 2) {\n                    attrNames.push(attr.nodeName);\n                }\n            });\n            // 再根据名称删除所有attr\n            $.each(attrNames, function (key, attr) {\n                if (exception.indexOf(attr) < 0) {\n                    // 除了 exception 规定的例外情况，删除其他属性\n                    elem.removeAttribute(attr);\n                }\n            });\n\n\n            // 递归子节点\n            var children = elem.childNodes;\n            if (children.length) {\n                $.each(children, function (key, value) {\n                    removeAttrs(value);\n                });\n            }\n\n            return elem;\n        }\n    };\n\n    // 绑定 $txt.formatText() 方法\n    Txt.fn.bindFormatText = function () {\n        var self = this;\n        var editor = self.editor;\n        var $txt = self.$txt;\n        var legalTags = E.config.legalTags;\n        var legalTagArr = legalTags.split(',');\n        var length = legalTagArr.length;\n        var regArr = [];\n\n        // 将 E.config.legalTags 配置的有效字符，生成正则表达式\n        $.each(legalTagArr, function (k, tag) {\n            var reg = '\\>\\\\s*\\<(' + tag + ')\\>';\n            regArr.push(new RegExp(reg, 'ig'));\n        });\n\n        // 增加 li \n        regArr.push(new RegExp('\\>\\\\s*\\<(li)\\>', 'ig'));\n\n        // 增加 tr\n        regArr.push(new RegExp('\\>\\\\s*\\<(tr)\\>', 'ig'));\n\n        // 增加 code\n        regArr.push(new RegExp('\\>\\\\s*\\<(code)\\>', 'ig'));\n\n        // 生成 formatText 方法\n        $txt.formatText = function () {\n            var $temp = $('<div>');\n            var html = $txt.html();\n\n            // 去除空格\n            html = html.replace(/\\s*</ig, '<');\n\n            // 段落、表格之间换行\n            $.each(regArr, function (k, reg) {\n                if (!reg.test(html)) {\n                    return;\n                }\n                html = html.replace(reg, function (matchStr, tag) {\n                    return '>\\n<' + tag + '>';\n                });\n            });\n\n            $temp.html(html);\n            return $temp.text();\n        };\n    };\n\n    // 定制 $txt.html 方法\n    Txt.fn.bindHtml = function () {\n        var self = this;\n        var editor = self.editor;\n        var $txt = self.$txt;\n        var $valueContainer = editor.$valueContainer;\n        var valueNodeName = editor.valueNodeName;\n\n        $txt.html = function (html) {\n            var result;\n\n            if (valueNodeName === 'div') {\n                // div 生成的编辑器，取值、赋值，都直接触发jquery的html方法\n                result = $.fn.html.call($txt, html);\n            }\n\n            // textarea 生成的编辑器，则需要考虑赋值时，也给textarea赋值\n\n            if (html === undefined) {\n                // 取值，直接触发jquery原生html方法\n                result = $.fn.html.call($txt);\n\n                // 替换 html 中，src和href属性中的 & 字符。\n                // 因为 .html() 或者 .innerHTML 会把所有的 & 字符都改成 &amp; 但是 src 和 href 中的要保持 &\n                result = result.replace(/(href|src)\\=\\\"(.*)\\\"/igm, function (a, b, c) {\n                    return b + '=\"' + c.replace('&amp;', '&') + '\"';\n                });\n            } else {\n                // 赋值，需要同时给 textarea 赋值\n                result = $.fn.html.call($txt, html);\n                $valueContainer.val(html);\n            }\n\n            if (html === undefined) {\n                return result;\n            } else {\n                // 手动触发 change 事件，因为 $txt 监控了 change 事件来判断是否需要执行 editor.onchange \n                $txt.change();\n            }\n        };\n    };\n});\n// Txt.fn api\n_e(function (E, $) {\n\n    var Txt = E.Txt;\n\n    var txtChangeEventNames = 'propertychange change click keyup input paste';\n\n    // 渲染\n    Txt.fn.render = function () {\n        var $txt = this.$txt;\n        var $editorContainer = this.editor.$editorContainer;\n        $editorContainer.append($txt);\n    };\n\n    // 计算高度\n    Txt.fn.initHeight = function () {\n        var editor = this.editor;\n        var $txt = this.$txt;\n        var valueContainerHeight = editor.$valueContainer.height();\n        var menuHeight = editor.menuContainer.height();\n        var txtHeight = valueContainerHeight - menuHeight;\n\n        // 限制最小为 50px\n        txtHeight = txtHeight < 50 ? 50 : txtHeight;\n\n        $txt.height(txtHeight);\n\n        // 记录原始高度\n        editor.valueContainerHeight = valueContainerHeight;\n\n        // 设置 max-height\n        this.initMaxHeight(txtHeight, menuHeight);\n    };\n\n    // 计算最大高度\n    Txt.fn.initMaxHeight = function (txtHeight, menuHeight) {\n        var editor = this.editor;\n        var $menuContainer = editor.menuContainer.$menuContainer;\n        var $txt = this.$txt;\n        var $wrap = $('<div>');\n\n        // 需要浏览器支持 max-height，否则不管\n        if (window.getComputedStyle && 'max-height'in window.getComputedStyle($txt.get(0))) {\n            // 获取 max-height 并判断是否有值\n            var maxHeight = parseInt(editor.$valueContainer.css('max-height'));\n            if (isNaN(maxHeight)) {\n                return;\n            }\n\n            // max-height 和『全屏』暂时有冲突\n            if (editor.menus.fullscreen) {\n                E.warn('max-height和『全屏』菜单一起使用时，会有一些问题尚未解决，请暂时不要两个同时使用');\n                return;\n            }\n\n            // 标记\n            editor.useMaxHeight = true;\n\n            // 设置maxheight\n            $wrap.css({\n                'max-height': (maxHeight - menuHeight) + 'px',\n                'overflow-y': 'auto'\n            });\n            $txt.css({\n                'height': 'auto',\n                'overflow-y': 'visible',\n                'min-height': txtHeight + 'px'\n            });\n\n            // 滚动式，菜单阴影\n            $wrap.on('scroll', function () {\n                if ($txt.parent().scrollTop() > 10) {\n                    $menuContainer.addClass('wangEditor-menu-shadow');\n                } else {\n                    $menuContainer.removeClass('wangEditor-menu-shadow');\n                }\n            });\n\n            // 需在编辑器区域外面再包裹一层\n            $txt.wrap($wrap);\n        }\n    };\n\n    // 保存选区\n    Txt.fn.saveSelectionEvent = function () {\n        var $txt = this.$txt;\n        var editor = this.editor;\n        var timeoutId;\n        var dt = Date.now();\n\n        function save() {\n            editor.saveSelection();\n        }\n\n        // 同步保存选区\n        function saveSync() {\n            // 100ms之内，不重复保存\n            if (Date.now() - dt < 100) {\n                return;\n            }\n\n            dt = Date.now();\n            save();\n        }\n\n        // 异步保存选区\n        function saveAync() {\n            // 节流，防止高频率重复操作\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n            }\n            timeoutId = setTimeout(save, 300);\n        }\n\n        // txt change 、focus、blur 时随时保存选区\n        $txt.on(txtChangeEventNames + ' focus blur', function (e) {\n            // 先同步保存选区，为了让接下来就马上要执行 editor.getRangeElem() 的程序\n            // 能够获取到正确的 rangeElem\n            saveSync();\n\n            // 再异步保存选区，为了确定更加准确的选区，为后续的操作做准备\n            saveAync();\n        });\n\n        // 鼠标拖拽选择时，可能会拖拽到编辑器区域外面再松手，此时 $txt 就监听不到 click事件了\n        $txt.on('mousedown', function () {\n            $txt.on('mouseleave.saveSelection', function (e) {\n                // 先同步后异步，如上述注释\n                saveSync();\n                saveAync();\n\n                // 顺道吧菜单状态也更新了\n                editor.updateMenuStyle();\n            });\n        }).on('mouseup', function () {\n            $txt.off('mouseleave.saveSelection');\n        });\n        \n    };\n\n    // 随时更新 value\n    Txt.fn.updateValueEvent = function () {\n        var $txt = this.$txt;\n        var editor = this.editor;\n        var timeoutId, oldValue;\n\n        // 触发 onchange 事件\n        function doOnchange() {\n            var val = $txt.html();\n            if (oldValue === val) {\n                // 无变化\n                return;\n            }\n\n            // 触发 onchange 事件\n            if (editor.onchange && typeof editor.onchange === 'function') {\n                editor.onchange.call(editor);\n            }\n\n            // 更新内容\n            editor.updateValue();\n\n            // 记录最新内容\n            oldValue = val;\n        }\n\n        // txt change 时随时更新内容\n        $txt.on(txtChangeEventNames, function (e) {\n            // 初始化\n            if (oldValue == null) {\n                oldValue = $txt.html();\n            }\n\n            // 监控内容变化（停止操作 100ms 之后立即执行）\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n            }\n            timeoutId = setTimeout(doOnchange, 100);\n        });\n    };\n\n    // 随时更新 menustyle\n    Txt.fn.updateMenuStyleEvent = function () {\n        var $txt = this.$txt;\n        var editor = this.editor;\n\n        // txt change 时随时更新内容\n        $txt.on(txtChangeEventNames, function (e) {\n            editor.updateMenuStyle();\n        });\n    };\n\n    // 最后插入试图插入 <p><br><p>\n    Txt.fn.insertEmptyP = function () {\n        var $txt = this.$txt;\n        var $children = $txt.children();\n\n        if ($children.length === 0) {\n            $txt.append($('<p><br></p>'));\n            return;\n        }\n\n        if ($.trim($children.last().html()).toLowerCase() !== '<br>') {\n            $txt.append($('<p><br></p>'));\n        }\n    };\n\n    // 将编辑器暴露出来的文字和图片，都用 p 来包裹\n    Txt.fn.wrapImgAndText = function () {\n        var $txt = this.$txt;\n        var $imgs = $txt.children('img');\n        var txt = $txt[0];\n        var childNodes = txt.childNodes;\n        var childrenLength = childNodes.length;\n        var i, childNode, p;\n\n        // 处理图片\n        $imgs.length && $imgs.each(function () {\n            $(this).wrap('<p>');\n        });\n\n        // 处理文字\n        for (i = 0; i < childrenLength; i++) {\n            childNode = childNodes[i];\n            if (childNode.nodeType === 3 && childNode.textContent && $.trim(childNode.textContent)) {\n                $(childNode).wrap('<p>');\n            }\n        }\n    };\n\n    // 清空内容为空的<p>，以及重复包裹的<p>（在windows下的chrome粘贴文字之后，会出现上述情况）\n    Txt.fn.clearEmptyOrNestP = function () {\n        var $txt = this.$txt;\n        var $pList = $txt.find('p');\n\n        $pList.each(function () {\n            var $p = $(this);\n            var $children = $p.children();\n            var childrenLength = $children.length;\n            var $firstChild;\n            var content = $.trim($p.html());\n\n            // 内容为空的p\n            if (!content) {\n                $p.remove();\n                return;\n            }\n\n            // 嵌套的p\n            if (childrenLength === 1) {\n                $firstChild = $children.first();\n                if ($firstChild.get(0) && $firstChild.get(0).nodeName === 'P') {\n                    $p.html( $firstChild.html() );\n                }\n            }\n        });\n    };\n\n    // 获取 scrollTop\n    Txt.fn.scrollTop = function (val) {\n        var self = this;\n        var editor = self.editor;\n        var $txt = self.$txt;\n\n        if (editor.useMaxHeight) {\n            return $txt.parent().scrollTop(val);\n        } else {\n            return $txt.scrollTop(val);\n        }\n    };\n\n    // 鼠标hover时候，显示p、head的高度\n    Txt.fn.showHeightOnHover = function () {\n        var editor = this.editor;\n        var $editorContainer = editor.$editorContainer;\n        var menuContainer = editor.menuContainer;\n        var $txt = this.$txt;\n        var $tip = $('<i class=\"height-tip\"><i>');\n        var isTipInTxt = false;\n\n        function addAndShowTip($target) {\n            if (!isTipInTxt) {\n                $editorContainer.append($tip);\n                isTipInTxt = true;\n            }\n\n            var txtTop = $txt.position().top;\n            var txtHeight = $txt.outerHeight();\n\n            var height = $target.height();\n            var top = $target.position().top;\n            var marginTop = parseInt($target.css('margin-top'), 10);\n            var paddingTop = parseInt($target.css('padding-top'), 10);\n            var marginBottom = parseInt($target.css('margin-bottom'), 10);\n            var paddingBottom = parseInt($target.css('padding-bottom'), 10);\n\n            // 计算初步的结果\n            var resultHeight = height + paddingTop + marginTop + paddingBottom + marginBottom;\n            var resultTop = top + menuContainer.height();\n            \n            // var spaceValue;\n\n            // // 判断是否超出下边界\n            // spaceValue = (resultTop + resultHeight) - (txtTop + txtHeight);\n            // if (spaceValue > 0) {\n            //     resultHeight = resultHeight - spaceValue;\n            // }\n\n            // // 判断是否超出了下边界\n            // spaceValue = txtTop > resultTop;\n            // if (spaceValue) {\n            //     resultHeight = resultHeight - spaceValue;\n            //     top = top + spaceValue;\n            // }\n\n            // 按照最终结果渲染\n            $tip.css({\n                height: height + paddingTop + marginTop + paddingBottom + marginBottom,\n                top: top + menuContainer.height()\n            });\n        }\n        function removeTip() {\n            if (!isTipInTxt) {\n                return;\n            }\n            $tip.remove();\n            isTipInTxt = false;\n        }\n\n        $txt.on('mouseenter', 'ul,ol,blockquote,p,h1,h2,h3,h4,h5,table,pre', function (e) {\n            addAndShowTip($(e.currentTarget));\n        }).on('mouseleave', function () {\n            removeTip();\n        });\n    };\n});\n// 工具函数\n_e(function (E, $) {\n\n    // IE8 [].indexOf()\n    if(!Array.prototype.indexOf){\n        //IE低版本不支持 arr.indexOf \n        Array.prototype.indexOf = function(elem){\n            var i = 0,\n                length = this.length;\n            for(; i<length; i++){\n                if(this[i] === elem){\n                    return i;\n                }\n            }\n            return -1;\n        };\n        //IE低版本不支持 arr.lastIndexOf\n        Array.prototype.lastIndexOf = function(elem){\n            var length = this.length;\n            for(length = length - 1; length >= 0; length--){\n                if(this[length] === elem){\n                    return length;\n                }\n            }\n            return -1;\n        };\n    }\n\n    // IE8 Date.now()\n    if (!Date.now) {\n        Date.now = function () {\n            return new Date().valueOf(); \n        };\n    }\n\n    // console.log && console.warn && console.error\n    var console = window.console;\n    var emptyFn = function () {};\n    $.each(['info', 'log', 'warn', 'error'], function (key, value) {\n        if (console == null) {\n            E[value] = emptyFn;\n        } else {\n            E[value] = function (info) {\n                // 通过配置来控制打印输出\n                if (E.config && E.config.printLog) {\n                    console[value]('wangEditor提示: ' + info);\n                }\n            };\n        }\n    });\n\n    // 获取随机数\n    E.random = function () {\n        return Math.random().toString().slice(2);\n    };\n\n    // 浏览器是否支持 placeholder\n    E.placeholder = 'placeholder' in document.createElement('input');\n\n    // 兼容IE8的 input placeholder\n    E.placeholderForIE8 = function ($container) {\n        if (E.placeholder) {\n            return;\n        }\n        $container.find('input[placeholder]').each(function () {\n            var $input = $(this);\n            var placeholder = $input.attr('placeholder');\n\n            if ($input.val() === '') {\n                $input.css('color', '#666');\n                $input.val(placeholder);\n\n                $input.on('focus.placeholder click.placeholder', function () {\n                    $input.val('');\n                    $input.css('color', '#333');\n                    $input.off('focus.placeholder click.placeholder');\n                });\n            }\n        });\n    };\n});\n// 语言包\n_e(function (E, $) {\n    E.langs = {};\n    \n    // 中文\n    E.langs['zh-cn'] = {\n        bold: '粗体',\n        underline: '下划线',\n        italic: '斜体',\n        forecolor: '文字颜色',\n        bgcolor: '背景色',\n        strikethrough: '删除线',\n        eraser: '清空格式',\n        source: '源码',\n        quote: '引用',\n        fontfamily: '字体',\n        fontsize: '字号',\n        head: '标题',\n        orderlist: '有序列表',\n        unorderlist: '无序列表',\n        alignleft: '左对齐',\n        aligncenter: '居中',\n        alignright: '右对齐',\n        link: '链接',\n        text: '文本',\n        submit: '提交',\n        cancel: '取消',\n        unlink: '取消链接',\n        table: '表格',\n        emotion: '表情',\n        img: '图片',\n        uploadImg: '上传图片',\n        linkImg: '网络图片',\n        video: '视频',\n        'width': '宽',\n        'height': '高',\n        location: '位置',\n        loading: '加载中',\n        searchlocation: '搜索位置',\n        dynamicMap: '动态地图',\n        clearLocation: '清除位置',\n        langDynamicOneLocation: '动态地图只能显示一个位置',\n        insertcode: '插入代码',\n        undo: '撤销',\n        redo: '重复',\n        fullscreen: '全屏',\n        openLink: '打开链接'\n    };\n\n    // 英文\n    E.langs.en = {\n        bold: 'Bold',\n        underline: 'Underline',\n        italic: 'Italic',\n        forecolor: 'Color',\n        bgcolor: 'Backcolor',\n        strikethrough: 'Strikethrough',\n        eraser: 'Eraser',\n        source: 'Codeview',\n        quote: 'Quote',\n        fontfamily: 'Font family',\n        fontsize: 'Font size',\n        head: 'Head',\n        orderlist: 'Ordered list',\n        unorderlist: 'Unordered list',\n        alignleft: 'Align left',\n        aligncenter: 'Align center',\n        alignright: 'Align right',\n        link: 'Insert link',\n        text: 'Text',\n        submit: 'Submit',\n        cancel: 'Cancel',\n        unlink: 'Unlink',\n        table: 'Table',\n        emotion: 'Emotions',\n        img: 'Image',\n        uploadImg: 'Upload',\n        linkImg: 'Link',\n        video: 'Video',\n        'width': 'width',\n        'height': 'height',\n        location: 'Location',\n        loading: 'Loading',\n        searchlocation: 'search',\n        dynamicMap: 'Dynamic',\n        clearLocation: 'Clear',\n        langDynamicOneLocation: 'Only one location in dynamic map',\n        insertcode: 'Insert Code',\n        undo: 'Undo',\n        redo: 'Redo',\n        fullscreen: 'Full screnn',\n        openLink: 'open link'\n    };\n});\n// 全局配置\n_e(function (E, $) {\n\n    E.config = {};\n\n    // 全屏时的 z-index\n    E.config.zindex = 10000;\n\n    // 是否打印log\n    E.config.printLog = true;\n\n    // 菜单吸顶：false - 不吸顶；number - 吸顶，值为top值\n    E.config.menuFixed = 0;\n\n    // 编辑源码时，过滤 javascript\n    E.config.jsFilter = true;\n\n    // 编辑器允许的标签\n    E.config.legalTags = 'p,h1,h2,h3,h4,h5,h6,blockquote,table,ul,ol,pre';\n\n    // 语言包\n    E.config.lang = E.langs['zh-cn'];\n\n    // 菜单配置\n    E.config.menus = [\n        // 'source',\n        'indent',\n        // '|',\n        'bold',\n        // 'underline',\n        'italic',\n        'strikethrough',\n        // 'eraser',\n        // 'forecolor',\n        // 'bgcolor',\n        // '|',\n        // 'quote',\n        // 'fontfamily',\n        // 'fontsize',\n        // 'head',\n        // 'unorderlist',\n        // 'orderlist',\n        // 'alignleft',\n        // 'aligncenter',\n        // 'alignright',\n        // '|',\n        // 'link',\n        // 'unlink',\n        // 'table',\n        // 'emotion',\n        // '|',\n        'img',\n        // 'video',\n        // 'location',\n        // 'insertcode',\n        // '|',\n        // 'undo',\n        // 'redo',\n        // 'fullscreen'\n    ];\n\n    // 颜色配置\n    E.config.colors = {\n        // 'value': 'title'\n        '#880000': '暗红色',\n        '#800080': '紫色',\n        '#ff0000': '红色',\n        '#ff00ff': '鲜粉色',\n        '#000080': '深蓝色',\n        '#0000ff': '蓝色',\n        '#00ffff': '湖蓝色',\n        '#008080': '蓝绿色',\n        '#008000': '绿色',\n        '#808000': '橄榄色',\n        '#00ff00': '浅绿色',\n        '#ffcc00': '橙黄色',\n        '#808080': '灰色',\n        '#c0c0c0': '银色',\n        '#000000': '黑色',\n        '#ffffff': '白色'\n    };\n\n    // 字体\n    E.config.familys = [\n        '宋体', '黑体', '楷体', '微软雅黑',\n        'Arial', 'Verdana', 'Georgia',\n        'Times New Roman', 'Microsoft JhengHei',\n        'Trebuchet MS', 'Courier New', 'Impact', 'Comic Sans MS', 'Consolas'\n    ];\n\n    // 字号\n    E.config.fontsizes = {\n        // 格式：'value': 'title'\n        1: '12px',\n        2: '13px',\n        3: '16px',\n        4: '18px',\n        5: '24px',\n        6: '32px',\n        7: '48px'\n    };\n\n    // 表情包\n    E.config.emotionsShow = 'icon'; // 显示项，默认为'icon'，也可以配置成'value'\n    E.config.emotions = {\n        // 'default': {\n        //     title: '默认',\n        //     data: './emotions.data'\n        // },\n        'weibo': {\n            title: '微博表情',\n            data: [\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7a/shenshou_thumb.gif',\n                    value: '[草泥马]'    \n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/60/horse2_thumb.gif',\n                    value: '[神马]'    \n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/fuyun_thumb.gif',\n                    value: '[浮云]'    \n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c9/geili_thumb.gif',\n                    value: '[给力]'    \n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/f2/wg_thumb.gif',\n                    value: '[围观]'    \n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/70/vw_thumb.gif',\n                    value: '[威武]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6e/panda_thumb.gif',\n                    value: '[熊猫]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/81/rabbit_thumb.gif',\n                    value: '[兔子]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/otm_thumb.gif',\n                    value: '[奥特曼]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/15/j_thumb.gif',\n                    value: '[囧]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/89/hufen_thumb.gif',\n                    value: '[互粉]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c4/liwu_thumb.gif',\n                    value: '[礼物]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/ac/smilea_thumb.gif',\n                    value: '[呵呵]'\n                },\n                {\n                    icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/0b/tootha_thumb.gif',\n                    value: '[哈哈]'\n                }\n            ]\n        }\n    };\n\n    // 百度地图的key\n    E.config.mapAk = 'TVhjYjq1ICT2qqL5LdS8mwas';\n\n    // 上传图片的配置\n    // server地址\n    E.config.uploadImgUrl = true;\n    // 超时时间\n    E.config.uploadTimeout = 20 * 1000;\n    // 用于存储上传回调事件\n    E.config.uploadImgFns = {};\n    // 自定义上传图片的filename\n    // E.config.uploadImgFileName = 'customFileName';\n\n    // 自定义上传，设置为 true 之后，显示上传图标\n    E.config.customUpload = true;\n    // 自定义上传的init事件\n    // E.config.customUploadInit = function () {....};\n\n    // 自定义上传时传递的参数（如 token）\n    E.config.uploadParams = {\n        /* token: 'abcdef12345' */\n    };\n\n    // 自定义上传是的header参数\n    E.config.uploadHeaders = {\n         /* 'Accept' : 'text/x-json' */\n    };\n\n    // 跨域上传时传递 cookie，默认为 true\n    E.config.withCredentials = true;\n\n    // 隐藏网络图片，默认为 false\n    E.config.hideLinkImg = false;\n\n    // 是否过滤粘贴内容\n    E.config.pasteFilter = true;\n\n    // 是否粘贴纯文本，当 editor.config.pasteFilter === false 时候，此配置将失效\n    E.config.pasteText = false;\n\n    // 插入代码时，默认的语言\n    E.config.codeDefaultLang = 'javascript';\n});\n// 全局UI\n_e(function (E, $) {\n\n     E.UI = {};\n\n     // 为菜单自定义配置的UI\n     E.UI.menus = {\n        // 这个 default 不加引号，在 IE8 会报错\n        'default': {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-command\"></i></a>',\n            selected: '.selected'\n        },\n        bold: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-bold\"></i></a>',\n            selected: '.selected'\n        },\n        underline: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-underline\"></i></a>',\n            selected: '.selected'\n        },\n        italic: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-italic\"></i></a>',\n            selected: '.selected'\n        },\n        forecolor: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-pencil\"></i></a>',\n            selected: '.selected'\n        },\n        bgcolor: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-brush\"></i></a>',\n            selected: '.selected'\n        },\n        strikethrough: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-strikethrough\"></i></a>',\n            selected: '.selected'\n        },\n        eraser: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-eraser\"></i></a>',\n            selected: '.selected'\n        },\n        quote: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-quotes-left\"></i></a>',\n            selected: '.selected'\n        },\n        source: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-code\"></i></a>',\n            selected: '.selected'\n        },\n        fontfamily: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-font2\"></i></a>',\n            selected: '.selected'\n        },\n        fontsize: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-text-height\"></i></a>',\n            selected: '.selected'\n        },\n        head: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-header\"></i></a>',\n            selected: '.selected'\n        },\n        orderlist: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-list-numbered\"></i></a>',\n            selected: '.selected'\n        },\n        unorderlist: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-list-bullet\"></i></a>',\n            selected: '.selected'\n        },\n        alignleft: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-align-left\"></i></a>',\n            selected: '.selected'\n        },\n        aligncenter: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-align-center\"></i></a>',\n            selected: '.selected'\n        },\n        alignright: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-align-right\"></i></a>',\n            selected: '.selected'\n        },\n        link: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-link\"></i></a>',\n            selected: '.selected'\n        },\n        unlink: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-unlink\"></i></a>',\n            selected: '.selected'\n        },\n        table: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-table\"></i></a>',\n            selected: '.selected'\n        },\n        emotion: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-happy\"></i></a>',\n            selected: '.selected'\n        },\n        img: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-picture\"></i></a>',\n            selected: '.selected'\n        },\n        video: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-play\"></i></a>',\n            selected: '.selected'\n        },\n        location: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-location\"></i></a>',\n            selected: '.selected'\n        },\n        insertcode: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-terminal\"></i></a>',\n            selected: '.selected'\n        },\n        undo: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-ccw\"></i></a>',\n            selected: '.selected'\n        },\n        redo: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-cw\"></i></a>',\n            selected: '.selected'\n        },\n        fullscreen: {\n            normal: '<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-enlarge2\"></i></a>',\n            selected: '<a href=\"#\" tabindex=\"-1\" class=\"selected\"><i class=\"wangeditor-menu-img-shrink2\"></i></a>'\n        }\n     };\n});\n// 对象配置\n_e(function (E, $) {\n\n    E.fn.initDefaultConfig = function () {\n        var editor = this;\n        editor.config = $.extend({}, E.config);\n        editor.UI = $.extend({}, E.UI);\n    };\n});\n// 增加 container\n_e(function (E, $) {\n\n    E.fn.addEditorContainer = function () {\n        this.$editorContainer = $('<div class=\"wangEditor-container\"></div>');\n    };\n});\n// 增加编辑区域对象\n_e(function (E, $) {\n\n    E.fn.addTxt = function () {\n        var editor = this;\n        var txt = new E.Txt(editor);\n\n        editor.txt = txt;\n    };\n});\n// 增加menuContainer对象\n_e(function (E, $) {\n\n    E.fn.addMenuContainer = function () {\n        var editor = this;\n        editor.menuContainer = new E.MenuContainer(editor);\n    };\n});\n// 增加menus - createMenu|addMenus\n_e(function (E, $) {\n\n    // 存储创建菜单的函数\n    E.createMenuFns = [];\n    E.createMenu = function (fn) {\n        E.createMenuFns.push(fn);\n    };\n    // 创建所有菜单\n    E.fn.addMenus = function () {\n        var editor = this;\n        var menuIds = editor.config.menus;\n\n        // 检验 menuId 是否在配置中存在\n        function check(menuId) {\n            if (menuIds.indexOf(menuId) >= 0) {\n                return true;\n            }\n            return false;\n        }\n\n        // 遍历所有的菜单创建函数，并执行\n        $.each(E.createMenuFns, function (k, createMenuFn) {\n            createMenuFn.call(editor, check);\n        });\n    };\n});\n// bold菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'bold';\n        if (!check(menuId)) {\n            return;\n        }\n\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.bold,\n            commandName: 'Bold'\n        });\n\n        // 定义选中状态下的click事件\n        menu.clickEventSelected = function (e) {\n            var isRangeEmpty = editor.isRangeEmpty();\n            if (!isRangeEmpty) {\n                // 如果选区有内容，则执行基础命令\n                editor.command(e, 'Bold');\n            } else {\n                // 如果选区没有内容\n                editor.commandForElem('b,strong,h1,h2,h3,h4,h5', e, 'Bold');\n            }\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});\n// underline菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'underline';\n        if (!check(menuId)) {\n            return;\n        }\n\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.underline,\n            commandName: 'Underline'\n        });\n\n        // 定义选中状态下的click事件\n        menu.clickEventSelected = function (e) {\n            var isRangeEmpty = editor.isRangeEmpty();\n            if (!isRangeEmpty) {\n                // 如果选区有内容，则执行基础命令\n                editor.command(e, 'Underline');\n            } else {\n                // 如果选区没有内容\n                editor.commandForElem('u,a', e, 'Underline');\n            }\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// italic 菜单\n_e(function (E, $) {\n    \n    E.createMenu(function (check) {\n        var menuId = 'italic';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.italic,\n            commandName: 'Italic'\n        });\n\n        // 定义选中状态下的click事件\n        menu.clickEventSelected = function (e) {\n            var isRangeEmpty = editor.isRangeEmpty();\n            if (!isRangeEmpty) {\n                // 如果选区有内容，则执行基础命令\n                editor.command(e, 'Italic');\n            } else {\n                // 如果选区没有内容\n                editor.commandForElem('i', e, 'Italic');\n            }\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});\n// forecolor 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'forecolor';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n        var configColors = editor.config.colors;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.forecolor\n        });\n\n        // 创建 dropPanel\n        var $content = $('<div></div>');\n        $.each(configColors, function (k, v) {\n            $content.append(\n                [\n                    '<a href=\"#\" class=\"color-item\"',\n                    '    title=\"' + v + '\" commandValue=\"' + k + '\" ',\n                    '    style=\"color: ' + k + '\" ',\n                    '><i class=\"wangeditor-menu-img-pencil\"></i></a>'\n                ].join('')\n            );\n        });\n        $content.on('click', 'a[commandValue]', function (e) {\n            // 执行命令\n            var $elem = $(this);\n            var commandValue = $elem.attr('commandValue');\n\n            if (menu.selected && editor.isRangeEmpty()) {\n                // 当前处于选中状态，并且选中内容为空\n                editor.commandForElem('font[color]', e, 'forecolor', commandValue);\n            } else {\n                // 当前未处于选中状态，或者有选中内容。则执行默认命令\n                editor.command(e, 'forecolor', commandValue);\n            }\n        });\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $content,\n            width: 125\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'font[color]');\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// bgcolor 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'bgcolor';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n        var configColors = editor.config.colors;\n\n        // 检查元素是否有 background-color: 内联样式\n        function checkElemFn(elem) {\n            var cssText;\n            if (elem && elem.style && elem.style.cssText != null) {\n                cssText = elem.style.cssText;\n                if (cssText && cssText.indexOf('background-color:') >= 0) {\n                    return true;\n                }\n            }\n            return false;\n        }\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.bgcolor\n        });\n\n        // 创建 dropPanel\n        var $content = $('<div></div>');\n        $.each(configColors, function (k, v) {\n            $content.append(\n                [\n                    '<a href=\"#\" class=\"color-item\"',\n                    '    title=\"' + v + '\" commandValue=\"' + k + '\" ',\n                    '    style=\"color: ' + k + '\" ',\n                    '><i class=\"wangeditor-menu-img-brush\"></i></a>'\n                ].join('')\n            );\n        });\n        $content.on('click', 'a[commandValue]', function (e) {\n            // 执行命令\n\n            var $elem = $(this);\n            var commandValue = $elem.attr('commandValue');\n\n            if (menu.selected && editor.isRangeEmpty()) {\n                // 当前处于选中状态，并且选中内容为空。使用 commandForElem 执行命令\n                editor.commandForElem({\n                    selector: 'span,font',\n                    check: checkElemFn\n                }, e, 'BackColor', commandValue);\n            } else {\n                // 当前未处于选中状态，或者有选中内容。则执行默认命令\n                editor.command(e, 'BackColor', commandValue);\n            }\n        });\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $content,\n            width: 125\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'span,font', checkElemFn);\n            \n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// strikethrough 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'strikethrough';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.strikethrough,\n            commandName: 'StrikeThrough'\n        });\n\n        // 定义选中状态下的click事件\n        menu.clickEventSelected = function (e) {\n            var isRangeEmpty = editor.isRangeEmpty();\n            if (!isRangeEmpty) {\n                // 如果选区有内容，则执行基础命令\n                editor.command(e, 'StrikeThrough');\n            } else {\n                // 如果选区没有内容\n                editor.commandForElem('strike', e, 'StrikeThrough');\n            }\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});\n// eraser 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'eraser';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.eraser,\n            commandName: 'RemoveFormat'\n        });\n\n        // 定义点击事件\n        menu.clickEvent = function (e) {\n            var isRangeEmpty = editor.isRangeEmpty();\n\n            if (!isRangeEmpty) {\n                // 选区不是空的，则执行默认命令\n                editor.command(e, 'RemoveFormat');\n                return;\n            }\n\n            var $clearElem;\n\n            // 自定义的命令函数\n            function commandFn() {\n                var editor = this;\n                var rangeElem;\n                var pElem, $pElem;\n                var quoteElem, $quoteElem;\n                var listElem, $listElem;\n\n                // 获取选区 elem\n                rangeElem = editor.getRangeElem();\n                // 第一步，获取 quote 父元素\n                quoteElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n                if (quoteElem) {\n                    $quoteElem = $(quoteElem);\n                    $clearElem = $('<p>' + $quoteElem.text() + '</p>');\n                    $quoteElem.after($clearElem).remove();\n                }\n                // 第二步，获取 p h 父元素\n                pElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5');\n                if (pElem) {\n                    $pElem = $(pElem);\n                    $clearElem = $('<p>' + $pElem.text() + '</p>');\n                    $pElem.after($clearElem).remove();\n                }\n                // 第三步，获取list\n                listElem = editor.getSelfOrParentByName(rangeElem, 'ul,ol');\n                if (listElem) {\n                    $listElem = $(listElem);\n                    $clearElem = $('<p>' + $listElem.text() + '</p>');\n                    $listElem.after($clearElem).remove();\n                }\n            }\n\n            // 自定义 callback 事件\n            function callback() {\n                // callback中，设置range为clearElem\n                var editor = this;\n                if ($clearElem) {\n                    editor.restoreSelectionByElem($clearElem.get(0));\n                }\n            }\n\n            // 执行自定义命令\n            editor.customCommand(e, commandFn, callback);\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// source 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'source';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n        var txtHtml;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.source\n        });\n\n        menu.isShowCode = false;\n\n        // 更新内容\n        function updateValue() {\n            var $code = menu.$codeTextarea;\n            var $txt = editor.txt.$txt;\n            var value = $.trim($code.val()); // 取值\n\n            if (!value) {\n                value = '<p><br></p>';\n            }\n          \n            // 过滤js代码\n            if (editor.config.jsFilter) {\n                \n                value = value.replace(/<script[\\s\\S]*?<\\/script>/ig, '');\n            }\n            // 赋值\n            try {\n                $txt.html(value);\n            } catch (ex) {\n                // 更新 html 源码出错，一般都是取消了 js 过滤之后，js报错导致的\n            }\n        }\n\n        // 定义click事件\n        menu.clickEvent = function (e) {\n            var self = this;\n            var editor = self.editor;\n            var $txt = editor.txt.$txt;\n            var txtOuterHeight = $txt.outerHeight();\n            var txtHeight = $txt.height();\n\n            if (!self.$codeTextarea) {\n                self.$codeTextarea = $('<textarea class=\"code-textarea\"></textarea>');\n            }\n            var $code = self.$codeTextarea;\n            $code.css({\n                height: txtHeight,\n                'margin-top': txtOuterHeight - txtHeight\n            });\n\n            // 赋值\n            $code.val($txt.html());\n\n            // 监控变化\n            $code.on('change', function (e) {\n                updateValue();\n            });\n\n            // 渲染\n            $txt.after($code).hide();\n            $code.show();\n\n            // 更新状态\n            menu.isShowCode = true;\n\n            // 执行 updateSelected 事件\n            this.updateSelected();\n\n            // 禁用其他菜单\n            editor.disableMenusExcept('source');\n\n            // 记录当前html值\n            txtHtml = $txt.html();\n        };\n\n        // 定义选中状态下的click事件\n        menu.clickEventSelected = function (e) {\n            var self = this;\n            var editor = self.editor;\n            var $txt = editor.txt.$txt;\n            var $code = self.$codeTextarea;\n            var value;\n\n            if (!$code) {\n                return;\n            }\n\n            // 更新内容\n            updateValue();\n\n            // 渲染\n            $code.after($txt).hide();\n            $txt.show();\n\n            // 更新状态\n            menu.isShowCode = false;\n\n            // 执行 updateSelected 事件\n            this.updateSelected();\n\n            // 启用其他菜单\n            editor.enableMenusExcept('source');\n\n            // 判断是否执行 onchange 事件\n            if ($txt.html() !== txtHtml) {\n                if (editor.onchange && typeof editor.onchange === 'function') {\n                    editor.onchange.call(editor);\n                }\n            }\n        };\n\n        // 定义切换选中状态事件\n        menu.updateSelectedEvent = function () {\n            return this.isShowCode;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});\n// quote 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'quote';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.quote,\n            commandName: 'formatBlock',\n            commandValue: 'blockquote'\n        });\n\n        // 定义click事件\n        menu.clickEvent = function (e) {\n            var rangeElem = editor.getRangeElem();\n            var $rangeElem;\n            if (!rangeElem) {\n                e.preventDefault();\n                return;\n            }\n            var currentQuote = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n            var $quote;\n\n            if (currentQuote) {\n                // 说明当前在quote之内，不做任何处理\n                e.preventDefault();\n                return;\n            }\n\n            rangeElem = editor.getLegalTags(rangeElem);\n            $rangeElem = $(rangeElem);\n\n            // 无文字，则不允许执行引用\n            if (!$rangeElem.text()) {\n                return;\n            }\n\n\n            if (!rangeElem) {\n                // 执行默认命令\n                // IE8 下执行此处（不过，经测试代码无效，也不报错）\n                editor.command(e, 'formatBlock', 'blockquote');\n                return;\n            }\n\n            // 自定义command事件\n            function commandFn() {\n                $quote = $('<p>' + $rangeElem.text() + '</p>');\n                $rangeElem.after($quote).remove();\n                $quote.wrap('<blockquote>');\n            }\n\n            // 自定义 callback 事件\n            function callback() {\n                // callback中，设置range为quote\n                var editor = this;\n                if ($quote) {\n                    editor.restoreSelectionByElem($quote.get(0));\n                }\n            }\n\n            // 执行自定义命令\n            editor.customCommand(e, commandFn, callback);\n        };\n\n        // 定义选中状态下的click事件\n        menu.clickEventSelected = function (e) {\n            var rangeElem;\n            var quoteElem;\n            var $lastChild;\n\n            // 获取当前选区的elem，并试图往上找 quote 元素\n            rangeElem = editor.getRangeElem();\n            quoteElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n            if (!quoteElem) {\n                // 没找到，则返回\n                e.preventDefault();\n                return;\n            }\n\n            // 自定义的command事件\n            function commandFn() {\n                var $quoteElem;\n                var $children;\n\n                $quoteElem = $(quoteElem);\n                $children = $quoteElem.children();\n                if ($children.length) {\n                    $children.each(function (k) {\n                        var $item = $(this);\n                        if ($item.get(0).nodeName === 'P') {\n                            $quoteElem.after($item);\n                        } else {\n                            $quoteElem.after('<p>' + $item.text() + '</p>');\n                        }\n                        $lastChild = $item;  // 记录最后一个子元素，用于callback中的range定位\n                    });\n                    $quoteElem.remove();\n                    return;\n                }\n            }\n\n            // 自定义的callback函数\n            function callback() {\n                // callback中，设置range为lastChild\n                var editor = this;\n                if ($lastChild) {\n                    editor.restoreSelectionByElem($lastChild.get(0));\n                }\n            }\n\n            // 执行自定义命令\n            editor.customCommand(e, commandFn, callback);\n        };\n\n        // 定义更新选中状态的事件\n        menu.updateSelectedEvent = function () {\n            var self = this; //菜单对象\n            var editor = self.editor;\n            var rangeElem;\n\n            rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n\n            if (rangeElem) {\n                return true;\n            }\n\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n\n        // --------------- 两次点击 enter 跳出引用 ---------------\n        editor.ready(function () {\n            var editor = this;\n            var $txt = editor.txt.$txt;\n            var isPrevEnter = false;  // 是不是刚刚在quote中按了 enter 键\n            $txt.on('keydown', function (e) {\n                if (e.keyCode !== 13) {\n                    // 不是 enter 键\n                    isPrevEnter = false;\n                    return;\n                }\n\n                var rangeElem = editor.getRangeElem();\n                rangeElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n                if (!rangeElem) {\n                    // 选区不是 quote\n                    isPrevEnter = false;\n                    return;\n                }\n\n                if (!isPrevEnter) {\n                    // 最近没有在qote中按enter键\n                    isPrevEnter = true;\n                    return;\n                }\n\n                var currentRangeElem = editor.getRangeElem();\n                var $currentRangeElem = $(currentRangeElem);\n                if ($currentRangeElem.length) {\n                    $currentRangeElem.parent().after($currentRangeElem);\n                }\n\n                // 设置选区\n                editor.restoreSelectionByElem(currentRangeElem, 'start');\n\n                isPrevEnter = false;\n                // 阻止默认行文\n                e.preventDefault();\n\n            });\n        }); // editor.ready(\n\n        // --------------- 处理quote中无内容时不能删除的问题 ---------------\n        editor.ready(function () {\n            var editor = this;\n            var $txt = editor.txt.$txt;\n            var $rangeElem;\n\n            function commandFn() {\n                $rangeElem && $rangeElem.remove();\n            }\n            function callback() {\n                if (!$rangeElem) {\n                    return;\n                }\n                var $prev = $rangeElem.prev();\n                if ($prev.length) {\n                    // 有 prev 则定位到 prev 最后\n                    editor.restoreSelectionByElem($prev.get(0));\n                } else {\n                    // 无 prev 则初始化选区\n                    editor.initSelection();\n                }\n            }\n\n            $txt.on('keydown', function (e) {\n                if (e.keyCode !== 8) {\n                    // 不是 backspace 键\n                    return;\n                }\n\n                var rangeElem = editor.getRangeElem();\n                rangeElem = editor.getSelfOrParentByName(rangeElem, 'blockquote');\n                if (!rangeElem) {\n                    // 选区不是 quote\n                    return;\n                }\n                $rangeElem = $(rangeElem);\n\n                var text = $rangeElem.text();\n                if (text) {\n                    // quote 中还有内容\n                    return;\n                }\n                editor.customCommand(e, commandFn, callback);\n\n            }); // $txt.on\n        }); // editor.ready(\n    });\n});*/\n// 字体 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'fontfamily';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n        var configFamilys = editor.config.familys;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.fontfamily,\n            commandName: 'fontName'\n        });\n\n        // 初始化数据\n        var data  = {};\n        \n        $.each(configFamilys, function (k, v) {\n            // configFamilys 是数组，data 是对象\n            data[v] = v;\n        });\n\n        // 创建droplist\n        var tpl = '<span style=\"font-family:{#commandValue};\">{#title}</span>';\n        menu.dropList = new E.DropList(editor, menu, {\n            data: data,\n            tpl: tpl,\n            selectorForELemCommand: 'font[face]'  // 为了执行 editor.commandForElem 而传入的elem查询方式\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'font[face]');\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// 字号 菜单\n/*_e(function (E, $) {\n    E.createMenu(function (check) {\n        var menuId = 'fontsize';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n        var configSize = editor.config.fontsizes;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.fontsize,\n            commandName: 'fontSize'\n        });\n\n        // 初始化数据\n        var data  = configSize;\n\n        // 创建droplist\n        var tpl = '<span style=\"font-size:{#title};\">{#title}</span>';\n        menu.dropList = new E.DropList(editor, menu, {\n            data: data,\n            tpl: tpl,\n            selectorForELemCommand: 'font[size]'  // 为了执行 editor.commandForElem 而传入的elem查询方式\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'font[size]');\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// head 菜单\n/*_e(function (E, $) {\n    E.createMenu(function (check) {\n        var menuId = 'head';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.head,\n            commandName: 'formatBlock'\n        });\n\n        // 初始化数据\n        var data  = {\n            '<h1>': '标题1',\n            '<h2>': '标题2',\n            '<h3>': '标题3',\n            '<h4>': '标题4',\n            '<h5>': '标题5'\n        };\n        var isOrderedList;\n        function beforeEvent(e) {\n            if (editor.queryCommandState('InsertOrderedList')) {\n                isOrderedList = true;\n\n                // 先取消有序列表\n                editor.command(e, 'InsertOrderedList');\n            } else {\n                isOrderedList = false;\n            }\n        }\n\n        function afterEvent(e) {\n            if (isOrderedList) {\n                // 再设置有序列表\n                editor.command(e, 'InsertOrderedList');\n            }\n        }\n\n        // 创建droplist\n        var tpl = '{#commandValue}{#title}';\n        menu.dropList = new E.DropList(editor, menu, {\n            data: data,\n            tpl: tpl,\n            // 对 ol 直接设置 head，会出现每个 li 的 index 都变成 1 的问题，因此要先取消 ol，然后设置 head，最后再增加上 ol\n            beforeEvent: beforeEvent,\n            afterEvent: afterEvent\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'h1,h2,h3,h4,h5');\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// unorderlist 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'unorderlist';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.unorderlist,\n            commandName: 'InsertUnorderedList'\n        });\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// orderlist 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'orderlist';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.orderlist,\n            commandName: 'InsertOrderedList'\n        });\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// alignleft 菜单\n/*_e(function (E, $) {\n    E.createMenu(function (check) {\n        var menuId = 'alignleft';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.alignleft,\n            commandName: 'JustifyLeft'\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5,li', function (elem) {\n                var cssText;\n                if (elem && elem.style && elem.style.cssText != null) {\n                    cssText = elem.style.cssText;\n                    if (cssText && /text-align:\\s*left;/.test(cssText)) {\n                        return true;\n                    }\n                }\n                if ($(elem).attr('align') === 'left') {\n                    // ff 中，设置align-left之后，会是 <p align=\"left\">xxx</p>\n                    return true;\n                }\n                return false;\n            });\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// aligncenter 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'aligncenter';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.aligncenter,\n            commandName: 'JustifyCenter'\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5,li', function (elem) {\n                var cssText;\n                if (elem && elem.style && elem.style.cssText != null) {\n                    cssText = elem.style.cssText;\n                    if (cssText && /text-align:\\s*center;/.test(cssText)) {\n                        return true;\n                    }\n                }\n                if ($(elem).attr('align') === 'center') {\n                    // ff 中，设置align-center之后，会是 <p align=\"center\">xxx</p>\n                    return true;\n                }\n                return false;\n            });\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// alignright 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'alignright';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.alignright,\n            commandName: 'JustifyRight'\n        });\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5,li', function (elem) {\n                var cssText;\n                if (elem && elem.style && elem.style.cssText != null) {\n                    cssText = elem.style.cssText;\n                    if (cssText && /text-align:\\s*right;/.test(cssText)) {\n                        return true;\n                    }\n                }\n                if ($(elem).attr('align') === 'right') {\n                    // ff 中，设置align-right之后，会是 <p align=\"right\">xxx</p>\n                    return true;\n                }\n                return false;\n            });\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// link 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'link';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.link\n        });\n\n        // 创建 dropPanel\n        var $content = $('<div></div>');\n        var $div1 = $('<div style=\"margin:20px 10px;\" class=\"clearfix\"></div>');\n        var $div2 = $div1.clone();\n        var $div3 = $div1.clone().css('margin', '0 10px');\n        var $textInput = $('<input type=\"text\" class=\"block\" placeholder=\"' + lang.text + '\"/>');\n        var $urlInput = $('<input type=\"text\" class=\"block\" placeholder=\"' + lang.link + '\"/>');\n        var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n        var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n\n        $div1.append($textInput);\n        $div2.append($urlInput);\n        $div3.append($btnSubmit).append($btnCancel);\n        $content.append($div1).append($div2).append($div3);\n        \n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $content,\n            width: 300\n        });\n\n        // 定义click事件\n        menu.clickEvent = function (e) {\n            var menu = this;\n            var dropPanel = menu.dropPanel;\n\n            // -------------隐藏----------------\n            if (dropPanel.isShowing) {\n                dropPanel.hide();\n                return;\n            }\n\n            // -------------显示----------------\n\n            // 重置 input\n            $textInput.val('');\n            $urlInput.val('http://');\n\n            // 获取url\n            var url = '';\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'a');\n            if (rangeElem) {\n                url = rangeElem.href || '';\n            }\n\n            // 获取 text\n            var text = '';\n            var isRangeEmpty = editor.isRangeEmpty();\n            if (!isRangeEmpty) {\n                // 选区不是空\n                text = editor.getRangeText() || '';\n            } else if (rangeElem) {\n                // 如果选区空，并且在 a 标签之内\n                text = rangeElem.textContent || rangeElem.innerHTML;\n            }\n\n            // 设置 url 和 text\n            url && $urlInput.val(url);\n            text && $textInput.val(text);\n\n            // 如果有选区内容，textinput 不能修改\n            if (!isRangeEmpty) {\n                $textInput.attr('disabled', true);\n            } else {\n                $textInput.removeAttr('disabled');\n            }\n\n            // 显示（要设置好了所有input的值和属性之后再显示）\n            dropPanel.show();\n        };\n\n        // 定义 update selected 事件\n        menu.updateSelectedEvent = function () {\n            var rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'a');\n            if (rangeElem) {\n                return true;\n            }\n            return false;\n        };\n\n        // 『取消』 按钮\n        $btnCancel.click(function (e) {\n            e.preventDefault();\n            menu.dropPanel.hide();\n        });\n\n        // 『确定』按钮\n        $btnSubmit.click(function (e) {\n            e.preventDefault();\n            var rangeElem = editor.getRangeElem();\n            var targetElem = editor.getSelfOrParentByName(rangeElem, 'a');\n            var isRangeEmpty = editor.isRangeEmpty();\n\n            var $linkElem, linkHtml;\n            var commandFn, callback;\n            var $txt = editor.txt.$txt;\n            var $oldLinks, $newLinks;\n            var uniqId = 'link' + E.random();\n\n            // 获取数据\n            var url = $.trim($urlInput.val());\n            var text = $.trim($textInput.val());\n\n            if (!url) {\n                menu.dropPanel.focusFirstInput();\n                return;\n            }\n            if (!text) {\n                text = url;\n            }\n\n            if (!isRangeEmpty) {\n                // 选中区域有内容，则执行默认命令\n\n                // 获取目前 txt 内所有链接，并为当前链接做一个标记\n                $oldLinks = $txt.find('a');\n                $oldLinks.attr(uniqId, '1');\n\n                // 执行命令 \n                editor.command(e, 'createLink', url);\n\n                // 去的没有标记的链接，即刚刚插入的链接\n                $newLinks = $txt.find('a').not('[' + uniqId + ']');\n                $newLinks.attr('target', '_blank'); // 增加 _blank\n\n                // 去掉之前做的标记\n                $oldLinks.removeAttr(uniqId);\n\n            } else if (targetElem) {\n                // 无选中区域，在 a 标签之内，修改该 a 标签的内容和链接\n                $linkElem = $(targetElem);\n                commandFn = function () {\n                    $linkElem.attr('href', url);\n                    $linkElem.text(text);\n                };\n                callback = function () {\n                    var editor = this;\n                    editor.restoreSelectionByElem(targetElem);\n                };\n                // 执行命令\n                editor.customCommand(e, commandFn, callback);\n            } else {\n                // 无选中区域，不在 a 标签之内，插入新的链接\n\n                linkHtml = '<a href=\"' + url + '\" target=\"_blank\">' + text + '</a>';\n                if (E.userAgent.indexOf('Firefox') > 0) {\n                    linkHtml += '<span>&nbsp;</span>';\n                }\n                editor.command(e, 'insertHtml', linkHtml);\n            }\n\n        });\n        \n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// unlink 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'unlink';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.unlink,\n            commandName: 'unLink'\n        });\n\n        // click 事件\n        menu.clickEvent = function  (e) {\n            var isRangeEmpty = editor.isRangeEmpty();\n            if (!isRangeEmpty) {\n                // 有选中区域，或者IE8，执行默认命令\n                editor.command(e, 'unLink');\n                return;\n            }\n\n            // 无选中区域...\n\n            var rangeElem = editor.getRangeElem();\n            var aElem = editor.getSelfOrParentByName(rangeElem, 'a');\n            if (!aElem) {\n                // 不在 a 之内，返回\n                e.preventDefault();\n                return;\n            }\n\n            // 在 a 之内\n            var $a = $(aElem);\n            var $span = $('<span>' + $a.text() + '</span>');\n            function commandFn() {\n                $a.after($span).remove();\n            }\n            function callback() {\n                editor.restoreSelectionByElem($span.get(0));\n            }\n            editor.customCommand(e, commandFn, callback);\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// table 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'table';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.table\n        });\n\n        // dropPanel 内容\n        var $content = $('<div style=\"font-size: 14px; color: #666; text-align:right;\"></div>');\n        var $table = $('<table class=\"choose-table\" style=\"margin-bottom:10px;margin-top:5px;\">');\n        var $row = $('<span>0</span>');\n        var $rowspan = $('<span> 行 </span>');\n        var $col = $('<span>0</span>');\n        var $colspan = $('<span> 列</span>');\n        var $tr;\n        var i, j;\n\n        // 创建一个n行n列的表格\n        for (i = 0; i < 15; i++) {\n            $tr = $('<tr index=\"' + (i + 1) + '\">');\n            for (j = 0; j < 20; j++) {\n                $tr.append($('<td index=\"' + (j + 1) + '\">'));\n            }\n            $table.append($tr);\n        }\n        $content.append($table);\n        $content.append($row).append($rowspan).append($col).append($colspan);\n\n        // 定义table事件\n        $table.on('mouseenter', 'td', function (e) {\n            var $currentTd = $(e.currentTarget);\n            var currentTdIndex = $currentTd.attr('index');\n            var $currentTr = $currentTd.parent();\n            var currentTrIndex = $currentTr.attr('index');\n\n            // 显示\n            $row.text(currentTrIndex);\n            $col.text(currentTdIndex);\n\n            // 遍历设置背景颜色\n            $table.find('tr').each(function () {\n                var $tr = $(this);\n                var trIndex = $tr.attr('index');\n                if (parseInt(trIndex, 10) <= parseInt(currentTrIndex, 10)) {\n                    // 该行需要可能需要设置背景色\n                    $tr.find('td').each(function () {\n                        var $td = $(this);\n                        var tdIndex = $td.attr('index');\n                        if (parseInt(tdIndex, 10) <= parseInt(currentTdIndex, 10)) {\n                            // 需要设置背景色\n                            $td.addClass('active');\n                        } else {\n                            // 需要移除背景色\n                            $td.removeClass('active');\n                        }\n                    });\n                } else {\n                    // 改行不需要设置背景色\n                    $tr.find('td').removeClass('active');\n                }\n            });\n        }).on('mouseleave', function (e) {\n            // mouseleave 删除背景色\n            $table.find('td').removeClass('active');\n\n            $row.text(0);\n            $col.text(0);\n        });\n\n        // 插入表格\n        $table.on('click', 'td', function (e) {\n            var $currentTd = $(e.currentTarget);\n            var currentTdIndex = $currentTd.attr('index');\n            var $currentTr = $currentTd.parent();\n            var currentTrIndex = $currentTr.attr('index');\n\n            var rownum = parseInt(currentTrIndex, 10);\n            var colnum = parseInt(currentTdIndex, 10);\n\n            // -------- 拼接tabel html --------\n\n            var i, j;\n            var tableHtml = '<table>';\n            for (i = 0; i < rownum; i++) {\n                tableHtml += '<tr>';\n\n                for (j = 0; j < colnum; j++) {\n                    tableHtml += '<td><span>&nbsp;</span></td>';\n                }\n                tableHtml += '</tr>';\n            }\n            tableHtml += '</table>';\n\n            // -------- 执行命令 --------\n            editor.command(e, 'insertHtml', tableHtml);\n        });\n\n        // 创建 panel\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $content,\n            width: 262\n        });\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// emotion 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'emotion';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var config = editor.config;\n        var lang = config.lang;\n        var configEmotions = config.emotions;\n        var emotionsShow = config.emotionsShow;\n\n        // 记录每一个表情图片的地址\n        editor.emotionUrls = [];\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.emotion\n        });\n\n        // 添加表情图片的函数\n        function insertEmotionImgs(data, $tabContent) {\n            // 添加表情图片\n            $.each(data, function (k, emotion) {\n                var src = emotion.icon || emotion.url;\n                var value = emotion.value || emotion.title;\n                // 通过配置 editor.config.emotionsShow 的值来修改插入到编辑器的内容（图片/value）\n                var commandValue = emotionsShow === 'icon' ? src : value;\n                var $command = $('<a href=\"#\" commandValue=\"' + commandValue + '\"></a>');\n                var $img = $('<img>');\n                $img.attr('_src', src);  // 先将 src 复制到 '_src' 属性，先不加载\n\n                $command.append($img);\n                $tabContent.append($command);\n\n                // 记录下每一个表情图片的地址\n                editor.emotionUrls.push(src);\n            });\n        }\n\n        // 拼接 dropPanel 内容\n        var $panelContent = $('<div class=\"panel-tab\"></div>');\n        var $tabContainer = $('<div class=\"tab-container\"></div>');\n        var $contentContainer = $('<div class=\"content-container emotion-content-container\"></div>');\n        $.each(configEmotions, function (k, emotion) {\n            var title = emotion.title;\n            var data = emotion.data;\n\n            E.log('正在处理 ' + title + ' 表情的数据...');\n\n            // 增加该组表情的tab和content\n            var $tab = $('<a href=\"#\">' + title +' </a>');\n            $tabContainer.append($tab);\n            var $tabContent = $('<div class=\"content\"></div>');\n            $contentContainer.append($tabContent);\n\n            // tab 切换事件\n            $tab.click(function (e) {\n                $tabContainer.children().removeClass('selected');\n                $contentContainer.children().removeClass('selected');\n                $tabContent.addClass('selected');\n                $tab.addClass('selected');\n                e.preventDefault();\n            });\n\n            // 处理data\n            if (typeof data === 'string') {\n                // url 形式，需要通过ajax从该url获取数据\n                E.log('将通过 ' + data + ' 地址ajax下载表情包');\n                $.get(data, function (result) {\n                    result = $.parseJSON(result);\n                    E.log('下载完毕，得到 ' + result.length + ' 个表情');\n                    insertEmotionImgs(result, $tabContent);\n                });\n                \n            } else if ( Object.prototype.toString.call(data).toLowerCase().indexOf('array') > 0 ) {\n                // 数组，即 data 直接就是表情包数据\n                insertEmotionImgs(data, $tabContent);\n            } else {\n                // 其他情况，data格式不对\n                E.error('data 数据格式错误，请修改为正确格式，参考文档：' + E.docsite);\n                return;\n            }\n        });\n        $panelContent.append($tabContainer).append($contentContainer);\n\n        // 默认显示第一个tab\n        $tabContainer.children().first().addClass('selected');\n        $contentContainer.children().first().addClass('selected');\n\n        // 插入表情command事件\n        $contentContainer.on('click', 'a[commandValue]', function (e) {\n            var $a = $(e.currentTarget);\n            var commandValue = $a.attr('commandValue');\n            var img;\n\n            // commandValue 有可能是图片url，也有可能是表情的 value，需要区别对待\n\n            if (emotionsShow === 'icon') {\n                // 插入图片\n                editor.command(e, 'InsertImage', commandValue);\n            } else {\n                // 插入value\n                editor.command(e, 'insertHtml', '<span>' + commandValue + '</span>');\n            }\n\n            e.preventDefault();\n        });\n\n        // 添加panel\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $panelContent,\n            width: 350\n        });\n\n        // 定义click事件（异步加载表情图片）\n        menu.clickEvent = function (e) {\n            var menu = this;\n            var dropPanel = menu.dropPanel;\n\n            // -------------隐藏-------------\n            if (dropPanel.isShowing) {\n                dropPanel.hide();\n                return;\n            }\n\n            // -------------显示-------------\n            dropPanel.show();\n\n            // 异步加载图片\n            if (menu.imgLoaded) {\n                return;\n            }\n            $contentContainer.find('img').each(function () {\n                var $img = $(this);\n                var _src = $img.attr('_src');\n                $img.on('error', function () {\n                    E.error('加载不出表情图片 ' + _src);\n                });\n                $img.attr('src', _src);\n                $img.removeAttr('_src');\n            });\n            menu.imgLoaded = true;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// img 菜单\n_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'img';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.img,\n            _id: \"edit_upload_image_select\"\n        });\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});\n// video 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'video';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n        var reg = /^<(iframe)|(embed)/i;  // <iframe... 或者 <embed... 格式\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.video\n        });\n\n        // 创建 panel 内容\n        var $content = $('<div></div>');\n        var $linkInputContainer = $('<div style=\"margin:20px 10px;\"></div>');\n        var $linkInput = $('<input type=\"text\" class=\"block\" placeholder=\\'格式如：<iframe src=\"...\" frameborder=0 allowfullscreen></iframe>\\'/>');\n        $linkInputContainer.append($linkInput);\n        var $sizeContainer = $('<div style=\"margin:20px 10px;\"></div>');\n        var $widthInput = $('<input type=\"text\" value=\"640\" style=\"width:50px;text-align:center;\"/>');\n        var $heightInput = $('<input type=\"text\" value=\"498\" style=\"width:50px;text-align:center;\"/>');\n        $sizeContainer.append('<span> ' + lang.width + ' </span>')\n                      .append($widthInput)\n                      .append('<span> px &nbsp;&nbsp;&nbsp;</span>')\n                      .append('<span> ' + lang.height + ' </span>')\n                      .append($heightInput)\n                      .append('<span> px </span>');\n        var $btnContainer = $('<div></div>');\n        var $howToCopy = $('<a href=\"http://www.kancloud.cn/wangfupeng/wangeditor2/134973\" target=\"_blank\" style=\"display:inline-block;margin-top:10px;margin-left:10px;color:#999;\">如何复制视频链接？</a>');\n        var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n        var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n        $btnContainer.append($howToCopy).append($btnSubmit).append($btnCancel);\n        $content.append($linkInputContainer).append($sizeContainer).append($btnContainer);\n\n        // 取消按钮\n        $btnCancel.click(function (e) {\n            e.preventDefault();\n            $linkInput.val('');\n            menu.dropPanel.hide();\n        });\n\n        // 确定按钮\n        $btnSubmit.click(function (e) {\n            e.preventDefault();\n            var link = $.trim($linkInput.val());\n            var $link;\n            var width = parseInt($widthInput.val());\n            var height = parseInt($heightInput.val());\n            var $div = $('<div>');\n            var html = '<p>{content}</p>';\n\n            // 验证数据\n            if (!link) {\n                menu.dropPanel.focusFirstInput();\n                return;\n            }\n\n            if (!reg.test(link)) {\n                alert('视频链接格式错误！');\n                menu.dropPanel.focusFirstInput();\n                return;\n            }\n\n            if (isNaN(width) || isNaN(height)) {\n                alert('宽度或高度不是数字！');\n                return;\n            }\n\n            $link = $(link);\n\n            // 设置高度和宽度\n            $link.attr('width', width)\n                 .attr('height', height);\n\n            // 拼接字符串\n            html = html.replace('{content}', $div.append($link).html());\n\n            // 执行命令\n            editor.command(e, 'insertHtml', html);\n            $linkInput.val('');\n        });\n\n        // 创建panel\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $content,\n            width: 400\n        });\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// location 菜单\n/*_e(function (E, $) {\n\n    // 判断浏览器的 input 是否支持 keyup\n    var inputKeyup = (function (input) {\n        return 'onkeyup' in input;\n    })(document.createElement('input'));\n\n    // 百度地图的key\n    E.baiduMapAk = 'TVhjYjq1ICT2qqL5LdS8mwas';\n\n    // 一个页面中，如果有多个编辑器，地图会出现问题。这个参数记录一下，如果超过 1 就提示\n    E.numberOfLocation = 0;\n\n    E.createMenu(function (check) {\n        var menuId = 'location';\n        if (!check(menuId)) {\n            return;\n        }\n\n        if (++E.numberOfLocation > 1) {\n            E.error('目前不支持在一个页面多个编辑器上同时使用地图，可通过自定义菜单配置去掉地图菜单');\n            return;\n        }\n\n        var editor = this;\n        var config = editor.config;\n        var lang = config.lang;\n        var ak = config.mapAk;\n\n        // 地图的变量存储到这个地方\n        editor.mapData = {};\n        var mapData = editor.mapData;\n\n        // ---------- 地图事件 ----------\n        mapData.markers = [];\n        mapData.mapContainerId = 'map' + E.random();\n\n        mapData.clearLocations = function () {\n            var map = mapData.map;\n            if (!map) {\n                return;\n            }\n            map.clearOverlays();\n\n            //同时，清空marker数组\n            mapData.markers = [];\n        };\n\n        mapData.searchMap = function () {\n            var map = mapData.map;\n            if (!map) {\n                return;\n            }\n\n            var BMap = window.BMap;\n            var cityName = $cityInput.val();\n            var locationName = $searchInput.val();\n            var myGeo, marker;\n\n            if(cityName !== ''){\n                if(!locationName || locationName === ''){\n                    map.centerAndZoom(cityName, 11);\n                }\n\n                //地址解析\n                if(locationName && locationName !== ''){\n                    myGeo = new BMap.Geocoder();\n                    // 将地址解析结果显示在地图上,并调整地图视野\n                    myGeo.getPoint(locationName, function(point){\n                        if (point) {\n                            map.centerAndZoom(point, 13);\n                            marker = new BMap.Marker(point);\n                            map.addOverlay(marker);\n                            marker.enableDragging();  //允许拖拽\n                            mapData.markers.push(marker);  //将marker加入到数组中\n                        }else{\n                            // alert('未找到');\n                            map.centerAndZoom(cityName, 11);  //找不到则重新定位到城市\n                        }\n                    }, cityName);\n                }\n            } // if(cityName !== '')\n        };\n\n        // load script 之后的 callback\n        var hasCallback = false;\n        window.baiduMapCallBack = function(){\n            // 避免重复加载\n            if (hasCallback) {\n                return;\n            } else {\n                hasCallback = true;\n            }\n\n            var BMap = window.BMap;\n            if (!mapData.map) {\n                // 创建Map实例\n                mapData.map = new BMap.Map(mapData.mapContainerId);\n            }\n            var map = mapData.map;\n\n            map.centerAndZoom(new BMap.Point(116.404, 39.915), 11);  // 初始化地图,设置中心点坐标和地图级别\n            map.addControl(new BMap.MapTypeControl());   //添加地图类型控件\n            map.setCurrentCity(\"北京\");          // 设置地图显示的城市 此项是必须设置的\n            map.enableScrollWheelZoom(true);     //开启鼠标滚轮缩放\n\n            //根据IP定位\n            function locationFun(result){\n                var cityName = result.name;\n                map.setCenter(cityName);\n\n                // 设置城市名称\n                $cityInput.val(cityName);\n                if (E.placeholder) {\n                    $searchInput.focus();\n                }\n                var timeoutId, searchFn;\n                if (inputKeyup) {\n                   // 并绑定搜索事件 - input 支持 keyup\n                   searchFn = function (e) {\n                       if (e.type === 'keyup' && e.keyCode === 13) {\n                           e.preventDefault();\n                       }\n                       if (timeoutId) {\n                           clearTimeout(timeoutId);\n                       }\n                       timeoutId = setTimeout(mapData.searchMap, 500);\n                   };\n                   $cityInput.on('keyup change paste', searchFn);\n                   $searchInput.on('keyup change paste', searchFn); \n                } else {\n                    // 并绑定搜索事件 - input 不支持 keyup\n                    searchFn = function () {\n                        if (!$content.is(':visible')) {\n                            // panel 不显示了，就不用再监控了\n                            clearTimeout(timeoutId);\n                            return;\n                        }\n\n                        var currentCity = '';\n                        var currentSearch = '';\n                        var city = $cityInput.val();\n                        var search = $searchInput.val();\n\n                        if (city !== currentCity || search !== currentSearch) {\n                            // 刚获取的数据和之前的数据不一致，执行查询\n                            mapData.searchMap();\n                            // 更新数据\n                            currentCity = city;\n                            currentSearch = search;\n                        }\n\n                        // 继续监控\n                        if (timeoutId) {\n                            clearTimeout(timeoutId);\n                        }\n                        timeoutId = setTimeout(searchFn, 1000);\n                    };\n                    // 开始监控\n                    timeoutId = setTimeout(searchFn, 1000);\n                }\n            }\n            var myCity = new BMap.LocalCity();\n            myCity.get(locationFun);\n\n            //鼠标点击，创建位置\n            map.addEventListener(\"click\", function(e){\n                var marker = new BMap.Marker(new BMap.Point(e.point.lng, e.point.lat)); \n                map.addOverlay(marker);  \n                marker.enableDragging();\n                mapData.markers.push(marker);  //加入到数组中\n            }, false);\n        };\n\n        mapData.loadMapScript = function () {\n            var script = document.createElement(\"script\");\n            script.type = \"text/javascript\";\n            script.src = \"https://api.map.baidu.com/api?v=2.0&ak=\" + ak + \"&s=1&callback=baiduMapCallBack\";  // baiduMapCallBack是一个本地函数\n            try {\n                // IE10- 报错\n                document.body.appendChild(script);\n            } catch (ex) {\n                E.error('加载地图过程中发生错误');\n            }\n        };\n\n        // 初始化地图\n        mapData.initMap = function () {\n            if (window.BMap) {\n                // 不是第一次，直接处理地图即可\n                window.baiduMapCallBack();\n            } else {\n                // 第一次，先加载地图 script，再处理地图（script加载完自动执行处理）\n                mapData.loadMapScript();\n            }\n        };\n\n        // ---------- 创建 menu 对象 ----------\n\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.location\n        });\n\n        editor.menus[menuId] = menu;\n\n        // ---------- 构建UI ----------\n\n        // panel content \n        var $content = $('<div></div>');\n\n        // 搜索框\n        var $inputContainer = $('<div style=\"margin:10px 0;\"></div>');\n        var $cityInput = $('<input type=\"text\"/>');\n        $cityInput.css({\n            width: '80px',\n            'text-align': 'center'\n        });\n        var $searchInput = $('<input type=\"text\"/>');\n        $searchInput.css({\n            width: '300px',\n            'margin-left': '10px'\n        }).attr('placeholder', lang.searchlocation);\n        var $clearBtn = $('<button class=\"right link\">' + lang.clearLocation + '</button>');\n        $inputContainer.append($clearBtn)\n                       .append($cityInput)\n                       .append($searchInput);\n        $content.append($inputContainer);\n\n        // 清除位置按钮\n        $clearBtn.click(function (e) {\n            $searchInput.val('');\n            $searchInput.focus();\n            mapData.clearLocations();\n            e.preventDefault();\n        });\n\n        // 地图\n        var $map = $('<div id=\"' + mapData.mapContainerId + '\"></div>');\n        $map.css({\n            height: '260px',\n            width: '100%',\n            position: 'relative',\n            'margin-top': '10px',\n            border: '1px solid #f1f1f1'\n        });\n        var $mapLoading = $('<span>' + lang.loading + '</span>');\n        $mapLoading.css({\n            position: 'absolute',\n            width: '100px',\n            'text-align': 'center',\n            top: '45%',\n            left: '50%',\n            'margin-left': '-50px'\n        });\n        $map.append($mapLoading);\n        $content.append($map);\n\n        // 按钮\n        var $btnContainer = $('<div style=\"margin:10px 0;\"></div>');\n        var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n        var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n        var $checkLabel = $('<label style=\"display:inline-block;margin-top:10px;color:#666;\"></label>');\n        var $check = $('<input type=\"checkbox\">');\n        $checkLabel.append($check).append('<span style=\"display:inline-block;margin-left:5px;\">  ' + lang.dynamicMap + '</span>');\n        $btnContainer.append($checkLabel)\n                     .append($btnSubmit)\n                     .append($btnCancel);\n        $content.append($btnContainer);\n\n        function callback() {\n            $searchInput.val('');\n        }\n\n        // 『取消』按钮事件\n        $btnCancel.click(function (e) {\n            e.preventDefault();\n            callback();\n            menu.dropPanel.hide();\n        });\n\n        // 『确定』按钮事件\n        $btnSubmit.click(function (e) {\n            e.preventDefault();\n            var map = mapData.map,\n                isDynamic = $check.is(':checked'),\n                markers =  mapData.markers,\n\n                center = map.getCenter(),\n                centerLng = center.lng,\n                centerLat = center.lat,\n\n                zoom = map.getZoom(),\n\n                size = map.getSize(),\n                sizeWidth = size.width,\n                sizeHeight = size.height,\n\n                position,\n                src,\n                iframe;\n\n            if(isDynamic){\n                //动态地址\n                src = 'http://ueditor.baidu.com/ueditor/dialogs/map/show.html#';\n            }else{\n                //静态地址\n                src = 'http://api.map.baidu.com/staticimage?';\n            }\n\n            //src参数\n            src = src +'center=' + centerLng + ',' + centerLat +\n                '&zoom=' + zoom +\n                '&width=' + sizeWidth +\n                '&height=' + sizeHeight;\n            if(markers.length > 0){\n                src = src + '&markers=';\n\n                //添加所有的marker\n                $.each(markers, function(key, value){\n                    position = value.getPosition();\n                    if(key > 0){\n                        src = src + '|';\n                    }\n                    src = src + position.lng + ',' + position.lat;\n                });\n            }\n\n            if(isDynamic){\n                if(markers.length > 1){\n                    alert( lang.langDynamicOneLocation );\n                    return;\n                }\n\n                src += '&markerStyles=l,A';\n\n                //插入iframe\n                iframe = '<iframe class=\"ueditor_baidumap\" src=\"{src}\" frameborder=\"0\" width=\"' + sizeWidth + '\" height=\"' + sizeHeight + '\"></iframe>';\n                iframe = iframe.replace('{src}', src);\n                editor.command(e, 'insertHtml', iframe, callback);\n            }else{\n                //插入图片\n                editor.command(e, 'insertHtml', '<img style=\"max-width:100%;\" src=\"' + src + '\"/>', callback);\n            }\n        });\n\n        // 根据 UI 创建菜单 panel\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $content,\n            width: 500\n        });\n\n        // ---------- 事件 ----------\n\n        // render 时执行事件\n        menu.onRender = function () {\n            if (ak === E.baiduMapAk) {\n                E.warn('建议在配置中自定义百度地图的mapAk，否则可能影响地图功能，文档：' + E.docsite);\n            }\n        };\n\n        // click 事件\n        menu.clickEvent = function (e) {\n            var menu = this;\n            var dropPanel = menu.dropPanel;\n            var firstTime = false;\n\n            // -------------隐藏-------------\n            if (dropPanel.isShowing) {\n                dropPanel.hide();\n                return;\n            }\n\n            // -------------显示-------------\n            if (!mapData.map) {\n                // 第一次，先加载地图\n                firstTime = true;\n            }\n            \n            dropPanel.show();\n            mapData.initMap();\n\n            if (!firstTime) {\n                $searchInput.focus();\n            }\n        };\n\n    });\n});*/\n// insertcode 菜单\n/*_e(function (E, $) {\n\n    // 加载 highlightjs 代码\n    function loadHljs() {\n        if (E.userAgent.indexOf('MSIE 8') > 0) {\n            // 不支持 IE8\n            return;\n        }\n        if (window.hljs) {\n            // 不要重复加载\n            return;\n        }\n        var script = document.createElement(\"script\");\n        script.type = \"text/javascript\";\n        script.src = \"//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js\";\n        document.body.appendChild(script);\n    }\n    \n\n    E.createMenu(function (check) {\n        var menuId = 'insertcode';\n        if (!check(menuId)) {\n            return;\n        }\n\n        // 加载 highlightjs 代码\n        setTimeout(loadHljs, 0);\n\n        var editor = this;\n        var config = editor.config;\n        var lang = config.lang;\n        var $txt = editor.txt.$txt;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.insertcode\n        });\n\n        // click 事件\n        menu.clickEvent = function (e) {\n            var menu = this;\n            var dropPanel = menu.dropPanel;\n\n            // 隐藏\n            if (dropPanel.isShowing) {\n                dropPanel.hide();\n                return;\n            }\n\n            // 显示\n            $textarea.val('');\n            dropPanel.show();\n\n            // highlightjs 语言列表\n            var hljs = window.hljs;\n            if (hljs && hljs.listLanguages) {\n                if ($langSelect.children().length !== 0) {\n                    return;\n                }\n                $langSelect.css({\n                    'margin-top': '9px',\n                    'margin-left': '5px'\n                });\n                $.each(hljs.listLanguages(), function (key, lang) {\n                    if (lang === 'xml') {\n                        lang = 'html';\n                    }\n                    if (lang === config.codeDefaultLang) {\n                        $langSelect.append('<option value=\"' + lang + '\" selected=\"selected\">' + lang + '</option>');\n                    } else {\n                        $langSelect.append('<option value=\"' + lang + '\">' + lang + '</option>');\n                    }\n                });\n            } else {\n                $langSelect.hide();\n            }\n        };\n\n        // 选中状态下的 click 事件\n        menu.clickEventSelected = function (e) {\n            var menu = this;\n            var dropPanel = menu.dropPanel;\n\n            // 隐藏\n            if (dropPanel.isShowing) {\n                dropPanel.hide();\n                return;\n            }\n\n            // 显示\n            dropPanel.show();\n\n            var rangeElem = editor.getRangeElem();\n            var targetElem = editor.getSelfOrParentByName(rangeElem, 'pre');\n            var $targetElem;\n            var className;\n            if (targetElem) {\n                // 确定找到 pre 之后，再找 code\n                targetElem = editor.getSelfOrParentByName(rangeElem, 'code');\n            }\n            if (!targetElem) {\n                return;\n            }\n            $targetElem = $(targetElem);\n\n            // 赋值内容\n            $textarea.val($targetElem.text());\n            if ($langSelect) {\n                // 赋值语言\n                className = $targetElem.attr('class');\n                if (className) {\n                    $langSelect.val(className.split(' ')[0]);\n                }\n            }\n        };\n\n        // 定义更新选中状态的事件\n        menu.updateSelectedEvent = function () {\n            var self = this; //菜单对象\n            var editor = self.editor;\n            var rangeElem;\n\n            rangeElem = editor.getRangeElem();\n            rangeElem = editor.getSelfOrParentByName(rangeElem, 'pre');\n\n            if (rangeElem) {\n                return true;\n            }\n\n            return false;\n        };\n\n        // 创建 panel\n        var $content = $('<div></div>');\n        var $textarea = $('<textarea></textarea>');\n        var $langSelect = $('<select></select>');\n        contentHandle($content);\n        menu.dropPanel = new E.DropPanel(editor, menu, {\n            $content: $content,\n            width: 500\n        });\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n\n        // ------ 增加 content 内容 ------\n        function contentHandle($content) {\n            // textarea 区域\n            var $textareaContainer = $('<div></div>');\n            $textareaContainer.css({\n                margin: '15px 5px 5px 5px',\n                height: '160px',\n                'text-align': 'center'\n            });\n            $textarea.css({\n                width: '100%',\n                height: '100%',\n                padding: '10px'\n            });\n            $textarea.on('keydown', function (e) {\n                // 取消 tab 键默认行为\n                if (e.keyCode === 9) {\n                    e.preventDefault();\n                }\n            });\n            $textareaContainer.append($textarea);\n            $content.append($textareaContainer);\n\n            // 按钮区域\n            var $btnContainer = $('<div></div>');\n            var $btnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n            var $btnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n\n            $btnContainer.append($btnSubmit).append($btnCancel).append($langSelect);\n            $content.append($btnContainer);\n\n            // 取消按钮\n            $btnCancel.click(function (e) {\n                e.preventDefault();\n                menu.dropPanel.hide();\n            });\n\n            // 确定按钮\n            var codeTpl = '<pre style=\"max-width:100%;overflow-x:auto;\"><code{#langClass}>{#content}</code></pre>';\n            $btnSubmit.click(function (e) {\n                e.preventDefault();\n                var val = $textarea.val();\n                if (!val) {\n                    // 无内容\n                    $textarea.focus();\n                    return;\n                }\n\n                var rangeElem = editor.getRangeElem();\n                if ($.trim($(rangeElem).text()) && codeTpl.indexOf('<p><br></p>') !== 0) {\n                    codeTpl = '<p><br></p>' + codeTpl;\n                }\n\n                var lang = $langSelect ? $langSelect.val() : ''; // 获取高亮语言\n                var langClass = '';\n                var doHightlight = function () {\n                    $txt.find('pre code').each(function (i, block) {\n                        var $block = $(block);\n                        if ($block.attr('codemark')) {\n                            // 有 codemark 标记的代码块，就不再重新格式化了\n                            return;\n                        } else if (window.hljs) {\n                            // 新代码块，格式化之后，立即标记 codemark\n                            window.hljs.highlightBlock(block);\n                            $block.attr('codemark', '1');\n                        }\n                    });\n                };\n\n                // 语言高亮样式\n                if (lang) {\n                    langClass = ' class=\"' + lang + ' hljs\"';\n                }\n\n                // 替换标签\n                val = val.replace(/&/gm, '&amp;')\n                         .replace(/</gm, '&lt;')\n                         .replace(/>/gm, '&gt;');\n\n                // ---- menu 未选中状态 ----\n                if (!menu.selected) {\n                    // 拼接html\n                    var html = codeTpl.replace('{#langClass}', langClass).replace('{#content}', val);\n                    editor.command(e, 'insertHtml', html, doHightlight);\n                    return;\n                }\n\n                // ---- menu 选中状态 ----\n                var targetElem = editor.getSelfOrParentByName(rangeElem, 'pre');\n                var $targetElem;\n                if (targetElem) {\n                    // 确定找到 pre 之后，再找 code\n                    targetElem = editor.getSelfOrParentByName(rangeElem, 'code');\n                }\n                if (!targetElem) {\n                    return;\n                }\n                $targetElem = $(targetElem);\n\n                function commandFn() {\n                    var className;\n                    if (lang) {\n                        className = $targetElem.attr('class');\n                        if (className !== lang + ' hljs') {\n                            $targetElem.attr('class', lang + ' hljs');\n                        }\n                    }\n                    $targetElem.html(val);\n                }\n                function callback() {\n                    editor.restoreSelectionByElem(targetElem);\n                    doHightlight();\n                }\n                editor.customCommand(e, commandFn, callback);\n            });\n        }\n\n        // ------ enter 时，不另起标签，只换行 ------\n        $txt.on('keydown', function (e) {\n            if (e.keyCode !== 13) {\n                return;\n            }\n            var rangeElem = editor.getRangeElem();\n            var targetElem = editor.getSelfOrParentByName(rangeElem, 'code');\n            if (!targetElem) {\n                return;\n            }\n\n            editor.command(e, 'insertHtml', '\\n');\n        });\n\n        // ------ 点击时，禁用其他标签 ------\n        function updateMenu() {\n            var rangeElem = editor.getRangeElem();\n            var targetElem = editor.getSelfOrParentByName(rangeElem, 'code');\n            if (targetElem) {\n                // 在 code 之内，禁用其他菜单\n                editor.disableMenusExcept('insertcode');\n            } else {\n                // 不是在 code 之内，启用其他菜单\n                editor.enableMenusExcept('insertcode');\n            }\n        }\n        $txt.on('keydown click', function (e) {\n            // 此处必须使用 setTimeout 异步处理，否则不对\n            setTimeout(updateMenu);\n        });\n    });\n});*/\n// undo 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'undo';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.undo\n        });\n\n        // click 事件\n        menu.clickEvent = function (e) {\n            editor.undo();\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n\n\n        // ------------ 初始化时、enter 时、打字中断时，做记录 ------------\n        // ------------ ctrl + z 是调用记录撤销，而不是使用浏览器默认的撤销 ------------\n        editor.ready(function () {\n            var editor = this;\n            var $txt = editor.txt.$txt;\n            var timeoutId;\n\n            // 执行undo记录\n            function undo() {\n                editor.undoRecord();\n            }\n\n            $txt.on('keydown', function (e) {\n                var keyCode = e.keyCode;\n\n                // 撤销 ctrl + z\n                if (e.ctrlKey && keyCode === 90) {\n                    editor.undo();\n                    return;\n                }\n\n                if (keyCode === 13) {\n                    // enter 做记录\n                    undo();\n                } else {\n                    // keyup 之后 1s 之内不操作，则做一次记录\n                    if (timeoutId) {\n                        clearTimeout(timeoutId);\n                    }\n                    timeoutId = setTimeout(undo, 1000);\n                }\n            });\n\n            // 初始化做记录\n            editor.undoRecord();\n        });\n    });\n});*/\n// redo 菜单\n/*_e(function (E, $) {\n\n    E.createMenu(function (check) {\n        var menuId = 'redo';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var lang = editor.config.lang;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.redo\n        });\n\n        // click 事件\n        menu.clickEvent = function (e) {\n            editor.redo();\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// 全屏 菜单\n/*_e(function (E, $) {\n\n    // 记录全屏时的scrollTop\n    var scrollTopWhenFullScreen;\n\n    E.createMenu(function (check) {\n        var menuId = 'fullscreen';\n        if (!check(menuId)) {\n            return;\n        }\n        var editor = this;\n        var $txt = editor.txt.$txt;\n        var config = editor.config;\n        var zIndexConfig = config.zindex || 10000;\n        var lang = config.lang;\n\n        var isSelected = false;\n        var zIndex;\n\n        var maxHeight;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,\n            id: menuId,\n            title: lang.fullscreen\n        });\n\n        // 定义click事件\n        menu.clickEvent = function (e) {\n            // 增加样式\n            var $editorContainer = editor.$editorContainer;\n            $editorContainer.addClass('wangEditor-fullscreen');\n\n            // （先保存当前的）再设置z-index\n            zIndex = $editorContainer.css('z-index');\n            $editorContainer.css('z-index', zIndexConfig);\n\n            var $wrapper;\n            var txtHeight = $txt.height();\n            var txtOuterHeight = $txt.outerHeight();\n\n            if (editor.useMaxHeight) {\n                // 记录 max-height，并暂时去掉maxheight\n                maxHeight = $txt.css('max-height');\n                $txt.css('max-height', 'none');\n\n                // 如果使用了maxHeight， 将$txt从它的父元素中移出来\n                $wrapper = $txt.parent();\n                $wrapper.after($txt);\n                $wrapper.remove();\n                $txt.css('overflow-y', 'auto');\n            }\n\n            // 设置高度到全屏\n            var menuContainer = editor.menuContainer;\n            $txt.height(\n                E.$window.height() - \n                menuContainer.height() - \n                (txtOuterHeight - txtHeight)  // 去掉内边距和外边距\n            );\n\n            // 取消menuContainer的内联样式（menu吸顶时，会为 menuContainer 设置一些内联样式）\n            editor.menuContainer.$menuContainer.attr('style', '');\n\n            // 保存状态\n            isSelected = true;\n\n            // 记录编辑器是否全屏\n            editor.isFullScreen = true;\n\n            // 记录设置全屏时的高度\n            scrollTopWhenFullScreen = E.$window.scrollTop();\n        };\n\n        // 定义选中状态的 click 事件\n        menu.clickEventSelected = function (e) {\n            // 取消样式\n            var $editorContainer = editor.$editorContainer;\n            $editorContainer.removeClass('wangEditor-fullscreen');\n            $editorContainer.css('z-index', zIndex);\n\n            // 还原height\n            if (editor.useMaxHeight) {\n                $txt.css('max-height', maxHeight);\n            } else {\n                // editor.valueContainerHeight 在 editor.txt.initHeight() 中事先保存了\n                editor.$valueContainer.css('height', editor.valueContainerHeight);\n            }\n\n            // 重新计算高度\n            editor.txt.initHeight();\n\n            // 保存状态\n            isSelected = false;\n\n            // 记录编辑器是否全屏\n            editor.isFullScreen = false;\n\n            // 还原scrollTop\n            if (scrollTopWhenFullScreen != null) {\n                E.$window.scrollTop(scrollTopWhenFullScreen);\n            }\n        };\n\n        // 定义选中事件\n        menu.updateSelectedEvent = function (e) {\n            return isSelected;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});*/\n// 渲染menus\n_e(function (E, $) {\n\n    E.fn.renderMenus = function () {\n\n        var editor = this;\n        var menus = editor.menus;\n        var menuIds = editor.config.menus;\n        var menuContainer = editor.menuContainer;\n\n        var menu;\n        var groupIdx = 0;\n        $.each(menuIds, function (k, v) {\n            if (v === '|') {\n                groupIdx++;\n                return;\n            }\n\n            menu = menus[v];\n            if (menu) {\n                menu.render(groupIdx);\n            }\n        });\n    };\n\n    E.fn.renderMenuContainer = function () {\n\n        var editor = this;\n        var menuContainer = editor.menuContainer;\n        var $editorContainer = editor.$editorContainer;\n\n        menuContainer.render();\n\n    };\n});\n// 渲染 txt\n_e(function (E, $) {\n\n    E.fn.renderTxt = function () {\n\n        var editor = this;\n        var txt = editor.txt;\n\n        txt.render();\n\n        // ready 时候，计算txt的高度\n        editor.ready(function () {\n            txt.initHeight();\n        });\n    };\n});\n// 渲染 container\n_e(function (E, $) {\n\n    E.fn.renderEditorContainer = function () {\n\n        var editor = this;\n        var $valueContainer = editor.$valueContainer;\n        var $editorContainer = editor.$editorContainer;\n        var $txt = editor.txt.$txt;\n        var $prev, $parent;\n\n        // 将编辑器渲染到页面中\n        if ($valueContainer === $txt) {\n            $prev = editor.$prev;\n            $parent = editor.$parent;\n\n            if ($prev && $prev.length) {\n                // 有前置节点，就插入到前置节点的后面\n                $prev.after($editorContainer);\n            } else {\n                // 没有前置节点，就直接插入到父元素\n                $parent.prepend($editorContainer);\n            }\n\n        } else {\n            $valueContainer.after($editorContainer);\n            $valueContainer.hide();\n        }\n\n        // 设置宽度（这样设置宽度有问题）\n        // $editorContainer.css('width', $valueContainer.css('width'));\n    };\n});\n// 菜单事件\n_e(function (E, $) {\n\n    // 绑定每个菜单的click事件\n    E.fn.eventMenus = function () {\n\n        var menus = this.menus;\n\n        // 绑定菜单的点击事件\n        $.each(menus, function (k, v) {\n            v.bindEvent();\n        });\n\n    };\n});\n// 菜单container事件\n_e(function (E, $) {\n\n    E.fn.eventMenuContainer = function () {\n\n    };\n});\n// 编辑区域事件\n_e(function (E, $) {\n\n    E.fn.eventTxt = function () {\n\n        var txt = this.txt;\n\n        // txt内容变化时，保存选区\n        txt.saveSelectionEvent();\n\n        // txt内容变化时，随时更新 value\n        txt.updateValueEvent();\n\n        // txt内容变化时，随时更新 menu style\n        txt.updateMenuStyleEvent();\n\n        // // 鼠标hover时，显示 p head 高度（暂时关闭这个功能）\n        // if (!/ie/i.test(E.userAgent)) {\n        //     // 暂时不支持IE\n        //     txt.showHeightOnHover();\n        // }\n    };\n});\n// 上传图片事件\n/*_e(function (E, $) {\n\n    E.plugin(function () {\n        var editor = this;\n        var fns = editor.config.uploadImgFns; // editor.config.uploadImgFns = {} 在config文件中定义了\n\n        // -------- 定义load函数 --------\n        fns.onload || (fns.onload = function (resultText, xhr) {\n            E.log('上传结束，返回结果为 ' + resultText);\n\n            var editor = this;\n            var originalName = editor.uploadImgOriginalName || '';  // 上传图片时，已经将图片的名字存在 editor.uploadImgOriginalName\n            var img;\n            if (resultText.indexOf('error|') === 0) {\n                // 提示错误\n                E.warn('上传失败：' + resultText.split('|')[1]);\n                alert(resultText.split('|')[1]);\n            } else {\n                E.log('上传成功，即将插入编辑区域，结果为：' + resultText);\n\n                // 将结果插入编辑器\n                img = document.createElement('img');\n                img.onload = function () {\n                    var html = '<img src=\"' + resultText + '\" alt=\"' + originalName + '\" style=\"max-width:100%;\"/>';\n                    editor.command(null, 'insertHtml', html);\n\n                    E.log('已插入图片，地址 ' + resultText);\n                    img = null;\n                };\n                img.onerror = function () {\n                    E.error('使用返回的结果获取图片，发生错误。请确认以下结果是否正确：' + resultText);\n                    img = null;\n                };\n                img.src = resultText;\n            }\n\n        });\n\n        // -------- 定义tiemout函数 --------\n        fns.ontimeout || (fns.ontimeout = function (xhr) {\n            E.error('上传图片超时');\n            alert('上传图片超时');\n        });\n\n        // -------- 定义error函数 --------\n        fns.onerror || (fns.onerror = function (xhr) {\n            E.error('上传上图片发生错误');\n            alert('上传上图片发生错误');\n        });\n\n    });\n});*/\n// xhr 上传图片\n/*_e(function (E, $) {\n\n    if (!window.FileReader || !window.FormData) {\n        // 如果不支持html5的文档操作，直接返回\n        return;\n    }\n\n    E.plugin(function () {\n\n        var editor = this;\n        var config = editor.config;\n        var uploadImgUrl = config.uploadImgUrl;\n        var uploadTimeout = config.uploadTimeout;\n\n        // 获取配置中的上传事件\n        var uploadImgFns = config.uploadImgFns;\n        var onload = uploadImgFns.onload;\n        var ontimeout = uploadImgFns.ontimeout;\n        var onerror = uploadImgFns.onerror;\n\n        if (!uploadImgUrl) {\n            return;\n        }\n\n        // -------- 将以base64的图片url数据转换为Blob --------\n        function convertBase64UrlToBlob(urlData, filetype){\n            //去掉url的头，并转换为byte\n            var bytes = window.atob(urlData.split(',')[1]);\n            \n            //处理异常,将ascii码小于0的转换为大于0\n            var ab = new ArrayBuffer(bytes.length);\n            var ia = new Uint8Array(ab);\n            var i;\n            for (i = 0; i < bytes.length; i++) {\n                ia[i] = bytes.charCodeAt(i);\n            }\n\n            return new Blob([ab], {type : filetype});\n        }\n\n        // -------- 插入图片的方法 --------\n        function insertImg(src, event) {\n            var img = document.createElement('img');\n            img.onload = function () {\n                var html = '<img src=\"' + src + '\" style=\"max-width:100%;\"/>';\n                editor.command(event, 'insertHtml', html);\n\n                E.log('已插入图片，地址 ' + src);\n                img = null;\n            };\n            img.onerror = function () {\n                E.error('使用返回的结果获取图片，发生错误。请确认以下结果是否正确：' + src);\n                img = null;\n            };\n            img.src = src;\n        }\n\n        // -------- onprogress 事件 --------\n        function updateProgress(e) {\n            if (e.lengthComputable) {\n                var percentComplete = e.loaded / e.total;\n                editor.showUploadProgress(percentComplete * 100);\n            }\n        }\n\n        // -------- xhr 上传图片 --------\n        editor.xhrUploadImg = function (opt) {\n            // opt 数据\n            var event = opt.event;\n            var fileName = opt.filename || '';\n            var base64 = opt.base64;\n            var fileType = opt.fileType || 'image/png'; // 无扩展名则默认使用 png\n            var name = opt.name || 'wangEditor_upload_file';\n            var loadfn = opt.loadfn || onload;\n            var errorfn = opt.errorfn || onerror;\n            var timeoutfn = opt.timeoutfn || ontimeout;\n\n            // 上传参数（如 token）\n            var params = editor.config.uploadParams || {};\n\n            // headers\n            var headers = editor.config.uploadHeaders || {};\n\n            // 获取文件扩展名\n            var fileExt = 'png';  // 默认为 png\n            if (fileName.indexOf('.') > 0) {\n                // 原来的文件名有扩展名\n                fileExt = fileName.slice(fileName.lastIndexOf('.') - fileName.length + 1);\n            } else if (fileType.indexOf('/') > 0 && fileType.split('/')[1]) {\n                // 文件名没有扩展名，通过类型获取，如从 'image/png' 取 'png'\n                fileExt = fileType.split('/')[1];\n            }\n\n            // ------------ begin 预览模拟上传 ------------\n            if (E.isOnWebsite) {\n                E.log('预览模拟上传');\n                insertImg(base64, event);\n                return;\n            }\n            // ------------ end 预览模拟上传 ------------\n\n            // 变量声明\n            var xhr = new XMLHttpRequest();\n            var timeoutId;\n            var src;\n            var formData = new FormData();\n\n            // 超时处理\n            function timeoutCallback() {\n                if (timeoutId) {\n                    clearTimeout(timeoutId);\n                }\n                if (xhr && xhr.abort) {\n                    xhr.abort();\n                }\n\n                // 超时了就阻止默认行为\n                event.preventDefault();\n\n                // 执行回调函数，提示什么内容，都应该在回调函数中定义\n                timeoutfn && timeoutfn.call(editor, xhr);\n\n                // 隐藏进度条\n                editor.hideUploadProgress();\n            }\n\n            xhr.onload = function () {\n                if (timeoutId) {\n                    clearTimeout(timeoutId);\n                }\n\n                // 记录文件名到 editor.uploadImgOriginalName ，插入图片时，可做 alt 属性用\n                editor.uploadImgOriginalName = fileName;\n                if (fileName.indexOf('.') > 0) {\n                    editor.uploadImgOriginalName = fileName.split('.')[0];\n                }\n\n                // 执行load函数，任何操作，都应该在load函数中定义\n                loadfn && loadfn.call(editor, xhr.responseText, xhr);\n\n                // 隐藏进度条\n                editor.hideUploadProgress();\n            };\n            xhr.onerror = function () {\n                if (timeoutId) {\n                    clearTimeout(timeoutId);\n                }\n\n                // 超时了就阻止默认行为\n                event.preventDefault();\n\n                // 执行error函数，错误提示，应该在error函数中定义\n                errorfn && errorfn.call(editor, xhr);\n\n                // 隐藏进度条\n                editor.hideUploadProgress();\n            };\n            // xhr.onprogress = updateProgress;\n            xhr.upload.onprogress = updateProgress;\n\n            // 填充数据\n            formData.append(name, convertBase64UrlToBlob(base64, fileType), E.random() + '.' + fileExt);\n\n            // 添加参数\n            $.each(params, function (key, value) {\n                formData.append(key, value);\n            });\n\n            // 开始上传\n            xhr.open('POST', uploadImgUrl, true);\n            // xhr.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");  // 将参数解析成传统form的方式上传\n\n            // 修改自定义配置的headers\n            $.each(headers, function (key, value) {\n                xhr.setRequestHeader(key, value);\n            });\n\n            // 跨域上传时，传cookie\n            xhr.withCredentials = editor.config.withCredentials || true;\n\n            // 发送数据\n            xhr.send(formData);\n            timeoutId = setTimeout(timeoutCallback, uploadTimeout);\n\n            E.log('开始上传...并开始超时计算');\n        };\n    });\n});*/\n// 进度条\n/*_e(function (E, $) {\n\n    E.plugin(function () {\n\n        var editor = this;\n        var menuContainer = editor.menuContainer;\n        var menuHeight = menuContainer.height();\n        var $editorContainer = editor.$editorContainer;\n        var width = $editorContainer.width();\n        var $progress = $('<div class=\"wangEditor-upload-progress\"></div>');\n\n        // 渲染事件\n        var isRender = false;\n        function render() {\n            if (isRender) {\n                return;\n            }\n            isRender = true;\n\n            $progress.css({\n                top: menuHeight + 'px'\n            });\n            $editorContainer.append($progress);\n        }\n\n        // ------ 显示进度 ------\n        editor.showUploadProgress = function (progress) {\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n            }\n\n            // 显示之前，先判断是否渲染\n            render();\n\n            $progress.show();\n            $progress.width(progress * width / 100);\n        };\n\n        // ------ 隐藏进度条 ------\n        var timeoutId;\n        function hideProgress() {\n            $progress.hide();\n            timeoutId = null;\n        }\n        editor.hideUploadProgress = function (time) {\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n            }\n            time = time || 750;\n            timeoutId = setTimeout(hideProgress, time);\n        };\n    });\n});*/\n// upload img 插件\n/*_e(function (E, $) {\n\n    E.plugin(function () {\n        var editor = this;\n        var config = editor.config;\n        var uploadImgUrl = config.uploadImgUrl;\n        var uploadTimeout = config.uploadTimeout;\n        var event;\n\n        if (!uploadImgUrl) {\n            return;\n        }\n\n        // 获取editor的上传dom\n        var $uploadContent = editor.$uploadContent;\n        if (!$uploadContent) {\n            return;\n        }\n\n        // 自定义UI，并添加到上传dom节点上\n        var $uploadIcon = $('<div class=\"upload-icon-container\"><i class=\"wangeditor-menu-img-upload\"></i></div>');\n        $uploadContent.append($uploadIcon);\n\n        // ---------- 构建上传对象 ----------\n        var upfile = new E.UploadFile({\n            editor: editor,\n            uploadUrl: uploadImgUrl,\n            timeout: uploadTimeout,\n            fileAccept: 'image/jpg,image/jpeg,image/png,image/gif,image/bmp'    // 只允许选择图片 \n        });\n\n        // 选择本地文件，上传\n        $uploadIcon.click(function (e) {\n            event = e;\n            upfile.selectFiles();\n        });\n    });\n});*/\n// h5 方式上传图片\n/*_e(function (E, $) {\n\n    if (!window.FileReader || !window.FormData) {\n        // 如果不支持html5的文档操作，直接返回\n        return;\n    }\n\n    // 构造函数\n    var UploadFile = function (opt) {\n        this.editor = opt.editor;\n        this.uploadUrl = opt.uploadUrl;\n        this.timeout = opt.timeout;\n        this.fileAccept = opt.fileAccept;\n        this.multiple = true;\n    };\n\n    UploadFile.fn = UploadFile.prototype;\n\n    // clear\n    UploadFile.fn.clear = function () {\n        this.$input.val('');\n        E.log('input value 已清空');\n    };\n\n    // 渲染\n    UploadFile.fn.render = function () {\n        var self = this;\n        if (self._hasRender) {\n            // 不要重复渲染\n            return;\n        }\n\n        E.log('渲染dom');\n\n        var fileAccept = self.fileAccept;\n        var acceptTpl = fileAccept ? 'accept=\"' + fileAccept + '\"' : '';\n        var multiple = self.multiple;\n        var multipleTpl = multiple ? 'multiple=\"multiple\"' : '';\n        var $input = $('<input type=\"file\" ' + acceptTpl + ' ' + multipleTpl + '/>');\n        var $container = $('<div style=\"display:none;\"></div>');\n\n        $container.append($input);\n        E.$body.append($container);\n\n        // onchange 事件\n        $input.on('change', function (e) {\n            self.selected(e, $input.get(0));\n        });\n\n        // 记录对象数据\n        self.$input = $input;\n\n        // 记录\n        self._hasRender = true;\n    };\n\n    // 选择\n    UploadFile.fn.selectFiles = function () {\n        var self = this;\n\n        E.log('使用 html5 方式上传');\n\n        // 先渲染\n        self.render();\n\n        // 选择\n        E.log('选择文件');\n        self.$input.click();\n    };\n\n    // 选中文件之后\n    UploadFile.fn.selected = function (e, input) {\n        var self = this;\n        var files = input.files || [];\n        if (files.length === 0) {\n            return;\n        }\n\n        E.log('选中 ' + files.length + ' 个文件');\n\n        // 遍历选中的文件，预览、上传\n        $.each(files, function (key, value) {\n            self.upload(value);\n        });\n    };\n\n    // 上传单个文件\n    UploadFile.fn.upload = function (file) {\n        var self = this;\n        var editor = self.editor;\n        var filename = file.name || '';\n        var fileType = file.type || '';\n        var uploadImgFns = editor.config.uploadImgFns;\n        var uploadFileName = editor.config.uploadImgFileName || 'wangEditorH5File';\n        var onload = uploadImgFns.onload;\n        var ontimeout = uploadImgFns.ontimeout;\n        var onerror = uploadImgFns.onerror;\n        var reader = new FileReader();\n\n        if (!onload || !ontimeout || !onerror) {\n            E.error('请为编辑器配置上传图片的 onload ontimeout onerror 回调事件');\n            return;\n        }\n\n\n        E.log('开始执行 ' + filename + ' 文件的上传');\n\n        // 清空 input 数据\n        function clearInput() {\n            self.clear();\n        }\n\n        // onload事件\n        reader.onload = function (e) {\n            E.log('已读取' + filename + '文件');\n\n            var base64 = e.target.result || this.result;\n            editor.xhrUploadImg({\n                event: e,\n                filename: filename,\n                base64: base64,\n                fileType: fileType,\n                name: uploadFileName,\n                loadfn: function (resultText, xhr) {\n                    clearInput();\n                    // 执行配置中的方法\n                    var editor = this;\n                    onload.call(editor, resultText, xhr);\n                },\n                errorfn: function (xhr) {\n                    clearInput();\n                    if (E.isOnWebsite) {\n                        alert('wangEditor官网暂时没有服务端，因此报错。实际项目中不会发生');\n                    }\n                    // 执行配置中的方法\n                    var editor = this;\n                    onerror.call(editor, xhr);\n                },\n                timeoutfn: function (xhr) {\n                    clearInput();\n                    if (E.isOnWebsite) {\n                        alert('wangEditor官网暂时没有服务端，因此超时。实际项目中不会发生');\n                    }\n                    // 执行配置中的方法\n                    var editor = this;\n                    ontimeout(editor, xhr);\n                }\n            });\n        };\n\n        // 开始取文件\n        reader.readAsDataURL(file);\n    };\n\n    // 暴露给 E\n    E.UploadFile = UploadFile;\n});\n*/// form方式上传图片\n/*_e(function (E, $) {\n\n    if (window.FileReader && window.FormData) {\n        // 如果支持 html5 上传，则返回\n        return;\n    }\n    \n    // 构造函数\n    var UploadFile = function (opt) {\n        this.editor = opt.editor;\n        this.uploadUrl = opt.uploadUrl;\n        this.timeout = opt.timeout;\n        this.fileAccept = opt.fileAccept;\n        this.multiple = false;\n    };\n\n    UploadFile.fn = UploadFile.prototype;\n\n    // clear\n    UploadFile.fn.clear = function () {\n        this.$input.val('');\n        E.log('input value 已清空');\n    };\n\n    // 隐藏modal\n    UploadFile.fn.hideModal = function () {\n        this.modal.hide();\n    };\n\n    // 渲染\n    UploadFile.fn.render = function () {\n        var self = this;\n        var editor = self.editor;\n        var uploadFileName = editor.config.uploadImgFileName || 'wangEditorFormFile';\n        if (self._hasRender) {\n            // 不要重复渲染\n            return;\n        }\n\n        // 服务器端路径\n        var uploadUrl = self.uploadUrl;\n\n        E.log('渲染dom');\n\n        // 创建 form 和 iframe\n        var iframeId = 'iframe' + E.random();\n        var $iframe = $('<iframe name=\"' + iframeId + '\" id=\"' + iframeId + '\" frameborder=\"0\" width=\"0\" height=\"0\"></iframe>');\n        var multiple = self.multiple;\n        var multipleTpl = multiple ? 'multiple=\"multiple\"' : '';\n        var $p = $('<p>选择图片并上传</p>');\n        var $input = $('<input type=\"file\" ' + multipleTpl + ' name=\"' + uploadFileName + '\"/>');\n        var $btn = $('<input type=\"submit\" value=\"上传\"/>');\n        var $form = $('<form enctype=\"multipart/form-data\" method=\"post\" action=\"' + uploadUrl + '\" target=\"' + iframeId + '\"></form>');\n        var $container = $('<div style=\"margin:10px 20px;\"></div>');\n\n        $form.append($p).append($input).append($btn);\n\n        // 增加用户配置的参数，如 token\n        $.each(editor.config.uploadParams, function (key, value) {\n            $form.append( $('<input type=\"hidden\" name=\"' + key + '\" value=\"' + value + '\"/>') );\n        });\n\n        $container.append($form);\n        $container.append($iframe);\n\n        self.$input = $input;\n        self.$iframe = $iframe;\n\n        // 生成 modal\n        var modal = new E.Modal(editor, undefined, {\n            $content: $container\n        });\n        self.modal = modal;\n\n        // 记录\n        self._hasRender = true;\n    };\n\n    // 绑定 iframe load 事件\n    UploadFile.fn.bindLoadEvent = function () {\n        var self = this;\n        if (self._hasBindLoad) {\n            // 不要重复绑定\n            return;\n        }\n\n        var editor = self.editor;\n        var $iframe = self.$iframe;\n        var iframe = $iframe.get(0);\n        var iframeWindow = iframe.contentWindow;\n        var onload = editor.config.uploadImgFns.onload;\n\n        // 定义load事件\n        function onloadFn() {\n            var resultText = $.trim(iframeWindow.document.body.innerHTML);\n            if (!resultText) {\n                return;\n            }\n\n            // 获取文件名\n            var fileFullName = self.$input.val();  // 结果如 C:\\folder\\abc.png 格式\n            var fileOriginalName = fileFullName;\n            if (fileFullName.lastIndexOf('\\\\') >= 0) {\n                // 获取 abc.png 格式\n                fileOriginalName = fileFullName.slice(fileFullName.lastIndexOf('\\\\') + 1);\n                if (fileOriginalName.indexOf('.') > 0) {\n                    // 获取 abc （即不带扩展名的文件名）\n                    fileOriginalName = fileOriginalName.split('.')[0];\n                }\n            }\n\n            // 将文件名暂存到 editor.uploadImgOriginalName ，插入图片时，可作为 alt 属性来用\n            editor.uploadImgOriginalName = fileOriginalName;\n\n            // 执行load函数，插入图片的操作，应该在load函数中执行\n            onload.call(editor, resultText);\n\n            // 清空 input 数据\n            self.clear();\n\n            // 隐藏modal\n            self.hideModal();\n        }\n\n        // 绑定 load 事件\n        if (iframe.attachEvent) {\n            iframe.attachEvent('onload', onloadFn);\n        } else {\n            iframe.onload = onloadFn;\n        }\n\n        // 记录\n        self._hasBindLoad = true;\n    };\n\n    UploadFile.fn.show = function () {\n        var self = this;\n        var modal = self.modal;\n\n        function show() {\n            modal.show();\n            self.bindLoadEvent();\n        }\n        setTimeout(show);\n    };\n\n    // 选择\n    UploadFile.fn.selectFiles = function () {\n        var self = this;\n\n        E.log('使用 form 方式上传');\n\n        // 先渲染\n        self.render();\n\n        // 先清空\n        self.clear();\n\n        // 显示\n        self.show();\n    };\n\n    // 暴露给 E\n    E.UploadFile = UploadFile;\n});*/\n// upload img 插件 粘贴图片\n/*_e(function (E, $) {\n    \n    E.plugin(function () {\n        var editor = this;\n        var txt = editor.txt;\n        var $txt = txt.$txt;\n        var config = editor.config;\n        var uploadImgUrl = config.uploadImgUrl;\n        var uploadFileName = config.uploadImgFileName || 'wangEditorPasteFile';\n        var pasteEvent;\n        var $imgsBeforePaste;\n\n        // 未配置上传图片url，则忽略\n        if (!uploadImgUrl) {\n            return;\n        }\n\n        // -------- 非 chrome 下，通过查找粘贴的图片的方式上传 --------\n        function findPasteImgAndUpload() {\n            var reg = /^data:(image\\/\\w+);base64/;\n            var $imgs = $txt.find('img');\n\n            E.log('粘贴后，检查到编辑器有' + $imgs.length + '个图片。开始遍历图片，试图找到刚刚粘贴过来的图片');\n\n            $.each($imgs, function () {\n                var img = this;\n                var $img = $(img);\n                var flag;\n                var base64 = $img.attr('src');\n                var type;\n\n                // 判断当前图片是否是粘贴之前的\n                $imgsBeforePaste.each(function () {\n                    if (img === this) {\n                        // 当前图片是粘贴之前的\n                        flag = true;\n                        return false;\n                    }\n                });\n\n                // 当前图片是粘贴之前的，则忽略\n                if (flag) {\n                    return;\n                }\n\n                E.log('找到一个粘贴过来的图片');\n\n                if (reg.test(base64)) {\n                    // 得到的粘贴的图片是 base64 格式，符合要求\n                    E.log('src 是 base64 格式，可以上传');\n                    type = base64.match(reg)[1];\n                    editor.xhrUploadImg({\n                        event: pasteEvent,\n                        base64: base64,\n                        fileType: type,\n                        name: uploadFileName\n                    });\n                } else {\n                    E.log('src 为 ' + base64 + ' ，不是 base64 格式，暂时不支持上传');\n                }\n\n                // 最终移除原图片\n                $img.remove();\n            });\n\n            E.log('遍历结束');\n        }\n\n        // 开始监控粘贴事件\n        $txt.on('paste', function (e) {\n            pasteEvent = e;\n            var data = pasteEvent.clipboardData || pasteEvent.originalEvent.clipboardData;\n            var text;\n            var items;\n\n            // -------- 试图获取剪切板中的文字，有文字的情况下，就不处理图片粘贴 --------\n            if (data == null) {\n                text = window.clipboardData && window.clipboardData.getData('text');\n            } else {\n                text = data.getData('text/plain') || data.getData('text/html');\n            }\n            if (text) {\n                return;\n            }\n\n            items = data && data.items;\n            if (items) {\n                // -------- chrome 可以用 data.items 取出图片 -----\n                E.log('通过 data.items 得到了数据');\n\n                $.each(items, function (key, value) {\n                    var fileType = value.type || '';\n                    if(fileType.indexOf('image') < 0) {\n                        // 不是图片\n                        return;\n                    }\n\n                    var file = value.getAsFile();\n                    var reader = new FileReader();\n\n                    E.log('得到一个粘贴图片');\n\n                    reader.onload = function (e) {\n                        E.log('读取到粘贴的图片');\n\n                        // 执行上传\n                        var base64 = e.target.result || this.result;\n                        editor.xhrUploadImg({\n                            event: pasteEvent,\n                            base64: base64,\n                            fileType: fileType,\n                            name: uploadFileName\n                        });\n                    };\n\n                    //读取粘贴的文件\n                    reader.readAsDataURL(file);\n                });\n            } else {\n                // -------- 非 chrome 不能用 data.items 取图片 -----\n\n                E.log('未从 data.items 得到数据，使用检测粘贴图片的方式');\n\n                // 获取\n                $imgsBeforePaste = $txt.find('img');\n                E.log('粘贴前，检查到编辑器有' + $imgsBeforePaste.length + '个图片');\n\n                // 异步上传找到的图片\n                setTimeout(findPasteImgAndUpload, 0);\n            }\n        });\n\n    });\n});*/\n// 拖拽上传图片 插件 \n/*_e(function (E, $) {\n\n    E.plugin(function () {\n\n        var editor = this;\n        var txt = editor.txt;\n        var $txt = txt.$txt;\n        var config = editor.config;\n        var uploadImgUrl = config.uploadImgUrl;\n        var uploadFileName = config.uploadImgFileName || 'wangEditorDragFile';\n\n        // 未配置上传图片url，则忽略\n        if (!uploadImgUrl) {\n            return;\n        }\n\n        // 阻止浏览器默认行为\n        E.$document.on('dragleave drop dragenter dragover', function (e) {\n            e.preventDefault();\n        });\n\n        // 监控 $txt drop 事件\n        $txt.on('drop', function (dragEvent) {\n            dragEvent.preventDefault();\n\n            var originalEvent = dragEvent.originalEvent;\n            var files = originalEvent.dataTransfer && originalEvent.dataTransfer.files;\n\n            if (!files || !files.length) {\n                return;\n            }\n\n            $.each(files, function (k, file) {\n                var type = file.type;\n                var name = file.name;\n\n                if (type.indexOf('image/') < 0) {\n                    // 只接收图片\n                    return;\n                }\n\n                E.log('得到图片 ' + name);\n\n                var reader = new FileReader();\n                reader.onload = function (e) {\n                    E.log('读取到图片 ' + name);\n\n                    // 执行上传\n                    var base64 = e.target.result || this.result;\n                    editor.xhrUploadImg({\n                        event: dragEvent,\n                        base64: base64,\n                        fileType: type,\n                        name: uploadFileName\n                    });\n                };\n\n                //读取粘贴的文件\n                reader.readAsDataURL(file);\n\n            });\n        });\n    });\n});*/\n// 编辑器区域 table toolbar\n/*_e(function (E, $) {\n\n    E.plugin(function () {\n        var editor = this;\n        var txt = editor.txt;\n        var $txt = txt.$txt;\n        var html = '';\n        // 说明：设置了 max-height 之后，$txt.parent() 负责滚动处理\n        var $currentTxt = editor.useMaxHeight ? $txt.parent() : $txt;\n        var $currentTable;\n\n        // 用到的dom节点\n        var isRendered = false;\n        var $toolbar = $('<div class=\"txt-toolbar\"></div>');\n        var $triangle = $('<div class=\"tip-triangle\"></div>');\n        var $delete = $('<a href=\"#\"><i class=\"wangeditor-menu-img-trash-o\"></i></a>');\n        var $zoomSmall = $('<a href=\"#\"><i class=\"wangeditor-menu-img-search-minus\"></i></a>');\n        var $zoomBig = $('<a href=\"#\"><i class=\"wangeditor-menu-img-search-plus\"></i></a>');\n\n        // 渲染到页面\n        function render() {\n            if (isRendered) {\n                return;\n            }\n            \n            // 绑定事件\n            bindEvent();\n\n            // 拼接 渲染到页面上\n            $toolbar.append($triangle)\n                    .append($delete)\n                    .append($zoomSmall)\n                    .append($zoomBig);\n            editor.$editorContainer.append($toolbar);\n            isRendered = true;\n        }\n\n        // 绑定事件\n        function bindEvent() {\n            // 统一执行命令的方法\n            var commandFn;\n            function command(e, callback) {\n                // 执行命令之前，先存储html内容\n                html = $txt.html();\n                // 监控内容变化\n                var cb = function  () {\n                    if (callback) {\n                        callback();\n                    }\n                    if (html !== $txt.html()) {\n                        $txt.change();\n                    }\n                };\n                // 执行命令\n                if (commandFn) {\n                    editor.customCommand(e, commandFn, cb);\n                }\n            }\n\n            // 删除\n            $delete.click(function (e) {\n                commandFn = function () {\n                    $currentTable.remove();\n                };\n                command(e, function () {\n                    setTimeout(hide, 100);\n                });\n            });\n\n            // 放大\n            $zoomBig.click(function (e) {\n                commandFn = function () {\n                    $currentTable.css({\n                        width: '100%'\n                    });\n                };\n                command(e, function () {\n                    setTimeout(show);\n                });\n            });\n\n            // 缩小\n            $zoomSmall.click(function (e) {\n                commandFn = function () {\n                    $currentTable.css({\n                        width: 'auto'\n                    });\n                };\n                command(e, function () {\n                    setTimeout(show);\n                });\n            });\n        }\n\n        // 显示 toolbar\n        function show() {\n            if (editor._disabled) {\n                // 编辑器已经被禁用，则不让显示\n                return;\n            }\n            if ($currentTable == null) {\n                return;\n            }\n            $currentTable.addClass('clicked');\n            var tablePosition = $currentTable.position();\n            var tableTop = tablePosition.top;\n            var tableLeft = tablePosition.left;\n            var tableHeight = $currentTable.outerHeight();\n            var tableWidth = $currentTable.outerWidth();\n\n            // --- 定位 toolbar ---\n\n            // 计算初步结果\n            var top = tableTop + tableHeight;\n            var left = tableLeft;\n            var marginLeft = 0;\n\n            var txtTop = $currentTxt.position().top;\n            var txtHeight = $currentTxt.outerHeight();\n            if (top > (txtTop + txtHeight)) {\n                // top 不得超出编辑范围\n                top = txtTop + txtHeight;\n            }\n\n            // 显示（方便计算 margin）\n            $toolbar.show();\n\n            // 计算 margin\n            var width = $toolbar.outerWidth();\n            marginLeft = tableWidth / 2 - width / 2;\n\n            // 定位\n            $toolbar.css({\n                top: top + 5,\n                left: left,\n                'margin-left': marginLeft\n            });\n            // 如果定位太靠左了\n            if (marginLeft < 0) {\n                // 得到三角形的margin-left\n                $toolbar.css('margin-left', '0');\n                $triangle.hide();\n            } else {\n                $triangle.show();\n            }\n        }\n        \n        // 隐藏 toolbar\n        function hide() {\n            if ($currentTable == null) {\n                return;\n            }\n            $currentTable.removeClass('clicked');\n            $currentTable = null;\n            $toolbar.hide();\n        }\n\n        // click table 事件\n        $currentTxt.on('click', 'table', function (e) {\n            var $table = $(e.currentTarget);\n\n            // 渲染\n            render();\n\n            if ($currentTable && ($currentTable.get(0) === $table.get(0))) {\n                setTimeout(hide, 100);\n                return;\n            }\n\n            // 显示 toolbar\n            $currentTable = $table;\n            show();\n\n            // 阻止冒泡\n            e.preventDefault();\n            e.stopPropagation();\n            \n        }).on('click keydown scroll', function (e) {\n            setTimeout(hide, 100);\n        });\n        E.$body.on('click keydown scroll', function (e) {\n            setTimeout(hide, 100);\n        });\n    });\n});*/\n// 编辑器区域 img toolbar\n/*_e(function (E, $) {\n\n    if (E.userAgent.indexOf('MSIE 8') > 0) {\n        return;\n    }\n    \n    E.plugin(function () {\n        var editor = this;\n        var lang = editor.config.lang;\n        var txt = editor.txt;\n        var $txt = txt.$txt;\n        var html = '';\n        // 说明：设置了 max-height 之后，$txt.parent() 负责滚动处理\n        var $currentTxt = editor.useMaxHeight ? $txt.parent() : $txt;\n        var $editorContainer = editor.$editorContainer;\n        var $currentImg;\n        var currentLink = '';\n\n        // 用到的dom节点\n        var isRendered = false;\n        var $dragPoint = $('<div class=\"img-drag-point\"></div>');\n\n        var $toolbar = $('<div class=\"txt-toolbar\"></div>');\n        var $triangle = $('<div class=\"tip-triangle\"></div>');\n\n        var $menuContainer = $('<div></div>');\n        var $delete = $('<a href=\"#\"><i class=\"wangeditor-menu-img-trash-o\"></i></a>');\n        var $zoomSmall = $('<a href=\"#\"><i class=\"wangeditor-menu-img-search-minus\"></i></a>');\n        var $zoomBig = $('<a href=\"#\"><i class=\"wangeditor-menu-img-search-plus\"></i></a>');\n        // var $floatLeft = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-left\"></i></a>');\n        // var $noFloat = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-justify\"></i></a>');\n        // var $floatRight = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-right\"></i></a>');\n        var $alignLeft = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-left\"></i></a>');\n        var $alignCenter = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-center\"></i></a>');\n        var $alignRight = $('<a href=\"#\"><i class=\"wangeditor-menu-img-align-right\"></i></a>');\n        var $link = $('<a href=\"#\"><i class=\"wangeditor-menu-img-link\"></i></a>');\n        var $unLink = $('<a href=\"#\"><i class=\"wangeditor-menu-img-unlink\"></i></a>');\n\n        var $linkInputContainer = $('<div style=\"display:none;\"></div>');\n        var $linkInput = $('<input type=\"text\" style=\"height:26px; margin-left:10px; width:200px;\"/>');\n        var $linkBtnSubmit = $('<button class=\"right\">' + lang.submit + '</button>');\n        var $linkBtnCancel = $('<button class=\"right gray\">' + lang.cancel + '</button>');\n\n        // 记录是否正在拖拽\n        var isOnDrag = false;\n\n        // 获取 / 设置 链接\n        function imgLink(e, url) {\n            if (!$currentImg) {\n                return;\n            }\n            var commandFn;\n            var callback = function () {\n                // 及时保存currentLink\n                if (url != null) {\n                    currentLink = url;\n                }\n                if (html !== $txt.html()) {\n                    $txt.change();\n                }\n            };\n            var $link;\n            var inLink = false;\n            var $parent = $currentImg.parent();\n            if ($parent.get(0).nodeName.toLowerCase() === 'a') {\n                // 父元素就是图片链接\n                $link = $parent;\n                inLink = true;\n            } else {\n                // 父元素不是图片链接，则重新创建一个链接\n                $link = $('<a target=\"_blank\"></a>');\n            }\n\n            if (url == null) {\n                // url 无值，是获取链接\n                return $link.attr('href') || '';\n            } else if (url === '') {\n                // url 是空字符串，是取消链接\n                if (inLink) {\n                    commandFn = function () {\n                        $currentImg.unwrap();\n                    };\n                }\n            } else {\n                // url 有值，是设置链接\n                if (url === currentLink) {\n                    return;\n                }\n                commandFn = function () {\n                    $link.attr('href', url);\n\n                    if (!inLink) {\n                        // 当前图片未包含在链接中，则包含进来\n                        $currentImg.wrap($link);\n                    }\n                };\n            }\n\n            // 执行命令\n            if (commandFn) {\n                // 记录下执行命令之前的html内容\n                html = $txt.html();\n                // 执行命令\n                editor.customCommand(e, commandFn, callback);\n            }\n        }\n\n        // 渲染到页面\n        function render() {\n            if (isRendered) {\n                return;\n            }\n            \n            // 绑定事件\n            bindToolbarEvent();\n            bindDragEvent();\n\n            // 菜单放入 container\n            $menuContainer.append($delete)\n                            .append($zoomSmall)\n                            .append($zoomBig)\n                            // .append($floatLeft)\n                            // .append($noFloat)\n                            // .append($floatRight);\n                            .append($alignLeft)\n                            .append($alignCenter)\n                            .append($alignRight)\n                            .append($link)\n                            .append($unLink);\n\n            // 链接input放入container\n            $linkInputContainer.append($linkInput)\n                               .append($linkBtnCancel)\n                               .append($linkBtnSubmit);\n\n            // 拼接 渲染到页面上\n            $toolbar.append($triangle)\n                    .append($menuContainer)\n                    .append($linkInputContainer);\n                    \n            editor.$editorContainer.append($toolbar).append($dragPoint);\n            isRendered = true;\n        }\n\n        // 绑定toolbar事件\n        function bindToolbarEvent() {\n            // 统一执行命令的方法\n            var commandFn;\n            function customCommand(e, callback) {\n                var cb;\n                // 记录下执行命令之前的html内容\n                html = $txt.html();\n                cb = function () {\n                    if (callback) {\n                        callback();\n                    }\n                    if (html !== $txt.html()) {\n                        $txt.change();\n                    }\n                };\n                // 执行命令\n                if (commandFn) {\n                    editor.customCommand(e, commandFn, cb);\n                }\n            }\n\n            // 删除\n            $delete.click(function (e) {\n                // 删除之前先unlink\n                imgLink(e, '');\n\n                // 删除图片\n                commandFn = function () {\n                    $currentImg.remove();\n                };\n                customCommand(e, function () {\n                    setTimeout(hide, 100);\n                });\n            });\n\n            // 放大\n            $zoomBig.click(function (e) {\n                commandFn = function () {\n                    var img = $currentImg.get(0);\n                    var width = img.width;\n                    var height = img.height;\n                    width = width * 1.1;\n                    height = height * 1.1;\n\n                    $currentImg.css({\n                        width: width + 'px',\n                        height: height + 'px'\n                    });\n                };\n                customCommand(e, function () {\n                    setTimeout(show);\n                });\n            });\n\n            // 缩小\n            $zoomSmall.click(function (e) {\n                commandFn = function () {\n                    var img = $currentImg.get(0);\n                    var width = img.width;\n                    var height = img.height;\n                    width = width * 0.9;\n                    height = height * 0.9;\n\n                    $currentImg.css({\n                        width: width + 'px',\n                        height: height + 'px'\n                    });\n                };\n                customCommand(e, function () {\n                    setTimeout(show);\n                });\n            });\n\n            // // 左浮动\n            // $floatLeft.click(function (e) {\n            //     commandFn = function () {\n            //         $currentImg.css({\n            //             float: 'left'\n            //         });\n            //     };\n            //     customCommand(e, function () {\n            //         setTimeout(hide, 100);\n            //     });\n            // });\n\n            // alignLeft\n            $alignLeft.click(function (e) {\n                commandFn = function () {\n                    // 如果 img 增加了链接，那么 img.parent() 就是 a 标签，设置 align 没用的，因此必须找到 P 父节点来设置 align\n                    $currentImg.parents('p').css({\n                        'text-align': 'left'\n                    }).attr('align', 'left');\n                };\n                customCommand(e, function () {\n                    setTimeout(hide, 100);\n                });\n            });\n\n            // // 右浮动\n            // $floatRight.click(function (e) {\n            //     commandFn = function () {\n            //         $currentImg.css({\n            //             float: 'right'\n            //         });\n            //     };\n            //     customCommand(e, function () {\n            //         setTimeout(hide, 100);\n            //     });\n            // });\n\n            // alignRight\n            $alignRight.click(function (e) {\n                commandFn = function () {\n                    // 如果 img 增加了链接，那么 img.parent() 就是 a 标签，设置 align 没用的，因此必须找到 P 父节点来设置 align\n                    $currentImg.parents('p').css({\n                        'text-align': 'right'\n                    }).attr('align', 'right');\n                };\n                customCommand(e, function () {\n                    setTimeout(hide, 100);\n                });\n            });\n\n            // // 无浮动\n            // $noFloat.click(function (e) {\n            //     commandFn = function () {\n            //         $currentImg.css({\n            //             float: 'none'\n            //         });\n            //     };\n            //     customCommand(e, function () {\n            //         setTimeout(hide, 100);\n            //     });\n            // });\n\n            // alignCenter\n            $alignCenter.click(function (e) {\n                commandFn = function () {\n                    // 如果 img 增加了链接，那么 img.parent() 就是 a 标签，设置 align 没用的，因此必须找到 P 父节点来设置 align\n                    $currentImg.parents('p').css({\n                        'text-align': 'center'\n                    }).attr('align', 'center');\n                };\n                customCommand(e, function () {\n                    setTimeout(hide, 100);\n                });\n            });\n\n            // link\n            // 显示链接input\n            $link.click(function (e) {\n                e.preventDefault();\n\n                // 获取当前链接，并显示\n                currentLink = imgLink(e);\n                $linkInput.val(currentLink);\n\n                $menuContainer.hide();\n                $linkInputContainer.show();\n            });\n            // 设置链接\n            $linkBtnSubmit.click(function (e) {\n                e.preventDefault();\n\n                var url = $.trim($linkInput.val());\n                if (url) {\n                    // 设置链接，同时会自动更新 currentLink 的值\n                    imgLink(e, url);\n                }\n\n                // 隐藏 toolbar\n                setTimeout(hide);\n            });\n            // 取消设置链接\n            $linkBtnCancel.click(function (e) {\n                e.preventDefault();\n\n                // 重置链接 input\n                $linkInput.val(currentLink);\n\n                $menuContainer.show();\n                $linkInputContainer.hide();\n            });\n\n            // unlink\n            $unLink.click(function (e) {\n                e.preventDefault();\n\n                // 执行 unlink\n                imgLink(e, '');\n\n                // 隐藏 toolbar\n                setTimeout(hide);\n            });\n        }\n\n        // 绑定drag事件\n        function bindDragEvent() {\n            var _x, _y;\n            var dragMarginLeft, dragMarginTop;\n            var imgWidth, imgHeight;\n\n            function mousemove (e) {\n                var diffX, diffY;\n\n                // 计算差额\n                diffX = e.pageX - _x;\n                diffY = e.pageY - _y;\n\n                // --------- 计算拖拽点的位置 ---------\n                var currentDragMarginLeft = dragMarginLeft + diffX;\n                var currentDragMarginTop = dragMarginTop + diffY;\n                $dragPoint.css({\n                    'margin-left': currentDragMarginLeft,\n                    'margin-top': currentDragMarginTop\n                });\n\n                // --------- 计算图片的大小 ---------\n                var currentImgWidth = imgWidth + diffX;\n                var currentImggHeight = imgHeight + diffY;\n                $currentImg && $currentImg.css({\n                    width: currentImgWidth,\n                    height: currentImggHeight\n                });\n            }\n\n            $dragPoint.on('mousedown', function(e){\n                if (!$currentImg) {\n                    return;\n                }\n                // 当前鼠标位置\n                _x = e.pageX;\n                _y = e.pageY;\n\n                // 当前拖拽点的位置\n                dragMarginLeft = parseFloat($dragPoint.css('margin-left'), 10);\n                dragMarginTop = parseFloat($dragPoint.css('margin-top'), 10);\n\n                // 当前图片的大小\n                imgWidth = $currentImg.width();\n                imgHeight = $currentImg.height();\n\n                // 隐藏 $toolbar\n                $toolbar.hide();\n\n                // 绑定计算事件\n                E.$document.on('mousemove._dragResizeImg', mousemove);\n                E.$document.on('mouseup._dragResizeImg', function (e) {\n                    // 取消绑定\n                    E.$document.off('mousemove._dragResizeImg');\n                    E.$document.off('mouseup._dragResizeImg');\n\n                    // 隐藏，并还原拖拽点的位置\n                    hide();\n                    $dragPoint.css({\n                        'margin-left': dragMarginLeft,\n                        'margin-top': dragMarginTop\n                    });\n\n                    // 记录\n                    isOnDrag = false;\n                });\n\n                // 记录\n                isOnDrag = true;\n            });\n        }\n\n        // 显示 toolbar\n        function show() {\n            if (editor._disabled) {\n                // 编辑器已经被禁用，则不让显示\n                return;\n            }\n            if ($currentImg == null) {\n                return;\n            }\n            $currentImg.addClass('clicked');\n            var imgPosition = $currentImg.position();\n            var imgTop = imgPosition.top;\n            var imgLeft = imgPosition.left;\n            var imgHeight = $currentImg.outerHeight();\n            var imgWidth = $currentImg.outerWidth();\n\n\n            // --- 定位 dragpoint ---\n            $dragPoint.css({\n                top: imgTop + imgHeight,\n                left: imgLeft + imgWidth\n            });\n\n            // --- 定位 toolbar ---\n\n            // 计算初步结果\n            var top = imgTop + imgHeight;\n            var left = imgLeft;\n            var marginLeft = 0;\n\n            var txtTop = $currentTxt.position().top;\n            var txtHeight = $currentTxt.outerHeight();\n            if (top > (txtTop + txtHeight)) {\n                // top 不得超出编辑范围\n                top = txtTop + txtHeight;\n            } else {\n                // top 超出编辑范围，dragPoint就不显示了\n                $dragPoint.show();\n            }\n\n            // 显示（方便计算 margin）\n            $toolbar.show();\n\n            // 计算 margin\n            var width = $toolbar.outerWidth();\n            marginLeft = imgWidth / 2 - width / 2;\n\n            // 定位\n            $toolbar.css({\n                top: top + 5,\n                left: left,\n                'margin-left': marginLeft\n            });\n            // 如果定位太靠左了\n            if (marginLeft < 0) {\n                // 得到三角形的margin-left\n                $toolbar.css('margin-left', '0');\n                $triangle.hide();\n            } else {\n                $triangle.show();\n            }\n\n            // disable 菜单\n            editor.disableMenusExcept();\n        }\n        \n        // 隐藏 toolbar\n        function hide() {\n            if ($currentImg == null) {\n                return;\n            }\n            $currentImg.removeClass('clicked');\n            $currentImg = null;\n\n            $toolbar.hide();\n            $dragPoint.hide();\n\n            // enable 菜单\n            editor.enableMenusExcept();\n        }\n\n        // 判断img是否是一个表情\n        function isEmotion(imgSrc) {\n            var result = false;\n            if (!editor.emotionUrls) {\n                return result;\n            }\n            $.each(editor.emotionUrls, function (index, url) {\n                var flag = false;\n                if (imgSrc === url) {\n                    result = true;\n                    flag = true;\n                }\n                if (flag) {\n                    return false;  // break 循环\n                }\n            });\n            return result;\n        }\n\n        // click img 事件\n        $currentTxt.on('mousedown', 'img', function (e) {\n            e.preventDefault();\n        }).on('click', 'img', function (e) {\n            var $img = $(e.currentTarget);\n            var src = $img.attr('src');\n\n            if (!src || isEmotion(src)) {\n                // 是一个表情图标\n                return;\n            }\n\n            // ---------- 不是表情图标 ---------- \n\n            // 渲染\n            render();\n\n            if ($currentImg && ($currentImg.get(0) === $img.get(0))) {\n                setTimeout(hide, 100);\n                return;\n            }\n\n            // 显示 toolbar\n            $currentImg = $img;\n            show();\n\n            // 默认显示menuContainer，其他默认隐藏\n            $menuContainer.show();\n            $linkInputContainer.hide();\n\n            // 阻止冒泡\n            e.preventDefault();\n            e.stopPropagation();\n            \n        }).on('click keydown scroll', function (e) {\n            if (!isOnDrag) {\n                setTimeout(hide, 100);\n            }\n        });\n\n    });\n});*/\n// 编辑区域 link toolbar\n/*_e(function (E, $) {\n    E.plugin(function () {\n        var editor = this;\n        var lang = editor.config.lang;\n        var $txt = editor.txt.$txt;\n\n        // 当前命中的链接\n        var $currentLink;\n\n        var $toolbar = $('<div class=\"txt-toolbar\"></div>');\n        var $triangle = $('<div class=\"tip-triangle\"></div>');\n        var $triggerLink = $('<a href=\"#\" target=\"_blank\"><i class=\"wangeditor-menu-img-link\"></i> ' + lang.openLink + '</a>');\n        var isRendered;\n\n        // 记录当前的显示/隐藏状态\n        var isShow = false;\n\n        var showTimeoutId, hideTimeoutId;\n        var showTimeoutIdByToolbar, hideTimeoutIdByToolbar;\n\n        // 渲染 dom\n        function render() {\n            if (isRendered) {\n                return;\n            }\n\n            $toolbar.append($triangle)\n                    .append($triggerLink);\n\n            editor.$editorContainer.append($toolbar);\n\n            isRendered = true;\n        }\n\n        // 定位\n        function setPosition() {\n            if (!$currentLink) {\n                return;\n            }\n\n            var position = $currentLink.position();\n            var left = position.left;\n            var top = position.top;\n            var height = $currentLink.height();\n\n            // 初步计算top值\n            var topResult = top + height + 5;\n\n            // 判断 toolbar 是否超过了编辑器区域的下边界\n            var menuHeight = editor.menuContainer.height();\n            var txtHeight = editor.txt.$txt.outerHeight();\n            if (topResult > menuHeight + txtHeight) {\n                topResult = menuHeight + txtHeight + 5;\n            }\n\n            // 最终设置\n            $toolbar.css({\n                top: topResult,\n                left: left\n            });\n        }\n\n        // 显示 toolbar\n        function show() {\n            if (isShow) {\n                return;\n            }\n\n            if (!$currentLink) {\n                return;\n            }\n\n            render();\n\n            $toolbar.show();\n\n            // 设置链接\n            var href = $currentLink.attr('href');\n            $triggerLink.attr('href', href);\n\n            // 定位\n            setPosition();\n\n            isShow = true;\n        }\n\n        // 隐藏 toolbar\n        function hide() {\n            if (!isShow) {\n                return;\n            }\n\n            if (!$currentLink) {\n                return;\n            }\n\n            $toolbar.hide();\n            isShow = false;\n        }\n\n        // $txt 绑定事件\n        $txt.on('mouseenter', 'a', function (e) {\n            // 延时 500ms 显示toolbar\n            if (showTimeoutId) {\n                clearTimeout(showTimeoutId);\n            }\n            showTimeoutId = setTimeout(function () {\n                var a = e.currentTarget;\n                var $a = $(a);\n                $currentLink = $a;\n\n                var $img = $a.children('img');\n                if ($img.length) {\n                    // 该链接下包含一个图片\n\n                    // 图片点击时，隐藏toolbar\n                    $img.click(function (e) {\n                        hide();\n                    });\n\n                    if ($img.hasClass('clicked')) {\n                        // 图片还处于clicked状态，则不显示toolbar\n                        return;\n                    }\n                }\n\n                // 显示toolbar\n                show();\n            }, 500);\n        }).on('mouseleave', 'a', function (e) {\n            // 延时 500ms 隐藏toolbar\n            if (hideTimeoutId) {\n                clearTimeout(hideTimeoutId);\n            }\n            hideTimeoutId = setTimeout(hide, 500);\n        }).on('click keydown scroll', function (e) {\n            setTimeout(hide, 100);\n        });\n        // $toolbar 绑定事件\n        $toolbar.on('mouseenter', function (e) {\n            // 先中断掉 $txt.mouseleave 导致的隐藏\n            if (hideTimeoutId) {\n                clearTimeout(hideTimeoutId);\n            }\n        }).on('mouseleave', function (e) {\n            // 延时 500ms 显示toolbar\n            if (showTimeoutIdByToolbar) {\n                clearTimeout(showTimeoutIdByToolbar);\n            }\n            showTimeoutIdByToolbar = setTimeout(hide, 500);\n        });\n    });\n});*/\n// menu吸顶\n/*_e(function (E, $) {\n\n    E.plugin(function () {\n        var editor = this;\n        var menuFixed = editor.config.menuFixed;\n        if (menuFixed === false || typeof menuFixed !== 'number') {\n            // 没有配置菜单吸顶\n            return;\n        }\n        var bodyMarginTop = parseFloat(E.$body.css('margin-top'), 10);\n        if (isNaN(bodyMarginTop)) {\n            bodyMarginTop = 0;\n        }\n\n        var $editorContainer = editor.$editorContainer;\n        var editorTop = $editorContainer.offset().top;\n        var editorHeight = $editorContainer.outerHeight();\n        \n        var $menuContainer = editor.menuContainer.$menuContainer;\n        var menuCssPosition = $menuContainer.css('position');\n        var menuCssTop = $menuContainer.css('top');\n        var menuTop = $menuContainer.offset().top;\n        var menuHeight = $menuContainer.outerHeight();\n        \n        var $txt = editor.txt.$txt;\n\n        E.$window.scroll(function () {\n            //全屏模式不支持\n            if (editor.isFullScreen) {\n                return;\n            }\n\n            var sTop = E.$window.scrollTop();\n\n            // 需要重新计算宽度，因为浏览器可能此时出现滚动条\n            var menuWidth = $menuContainer.width();\n\n            // 如果 menuTop === 0 说明此前编辑器一直隐藏，后来显示出来了，要重新计算相关数据\n            if (menuTop === 0) {\n                menuTop = $menuContainer.offset().top;\n                editorTop = $editorContainer.offset().top;\n                editorHeight = $editorContainer.outerHeight();\n                menuHeight = $menuContainer.outerHeight();\n            }\n\n            if (sTop >= menuTop && sTop + menuFixed + menuHeight + 30 < editorTop + editorHeight) {\n                // 吸顶\n                $menuContainer.css({\n                    position: 'fixed',\n                    top: menuFixed\n                });\n\n                // 固定宽度\n                $menuContainer.width(menuWidth);\n\n                // 增加body margin-top\n                E.$body.css({\n                    'margin-top': bodyMarginTop + menuHeight\n                });\n\n                // 记录\n                if (!editor._isMenufixed) {\n                    editor._isMenufixed = true;\n                }\n            } else {\n                // 取消吸顶\n                $menuContainer.css({\n                    position: menuCssPosition,\n                    top: menuCssTop\n                });\n\n                // 取消宽度固定\n                $menuContainer.css('width', '100%');\n\n                // 还原 body margin-top\n                E.$body.css({\n                    'margin-top': bodyMarginTop\n                });\n\n                // 撤销记录\n                if (editor._isMenufixed) {\n                    editor._isMenufixed = false;\n                }\n            }\n        });\n    });\n});*/\n// 缩进 菜单插件\n_e(function (E, $) {\n\n    // 用 createMenu 方法创建菜单\n    E.createMenu(function (check) {\n\n        // 定义菜单id，不要和其他菜单id重复。编辑器自带的所有菜单id，可通过『参数配置-自定义菜单』一节查看\n        var menuId = 'indent';\n\n        // check将检查菜单配置（『参数配置-自定义菜单』一节描述）中是否该菜单id，如果没有，则忽略下面的代码。\n        if (!check(menuId)) {\n            return;\n        }\n\n        // this 指向 editor 对象自身\n        var editor = this;\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,  // 编辑器对象\n            id: menuId,  // 菜单id\n            title: '缩进', // 菜单标题\n\n            // 正常状态和选中装下的dom对象，样式需要自定义\n            $domNormal: $('<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-indent-left\"></i></a>'),\n            $domSelected: $('<a href=\"#\" tabindex=\"-1\" class=\"selected\"><i class=\"wangeditor-menu-img-indent-left\"></i></a>')\n        });\n\n        // 菜单正常状态下，点击将触发该事件\n        menu.clickEvent = function (e) {\n            var elem = editor.getRangeElem();\n            var p = editor.getSelfOrParentByName(elem, 'p');\n            var $p;\n\n            if (!p) {\n                // 未找到 p 元素，则忽略\n                return e.preventDefault();\n            }\n            $p = $(p);\n\n            // 使用自定义命令\n            function commandFn() {\n                $p.css('text-indent', '2em');\n            }\n            editor.customCommand(e, commandFn);\n        };\n\n        // 菜单选中状态下，点击将触发该事件\n        menu.clickEventSelected = function (e) {\n            var elem = editor.getRangeElem();\n            var p = editor.getSelfOrParentByName(elem, 'p');\n            var $p;\n\n            if (!p) {\n                // 未找到 p 元素，则忽略\n                return e.preventDefault();\n            }\n            $p = $(p);\n\n            // 使用自定义命令\n            function commandFn() {\n                $p.css('text-indent', '0');\n            }\n            editor.customCommand(e, commandFn);\n        };\n\n        // 根据当前选区，自定义更新菜单的选中状态或者正常状态\n        menu.updateSelectedEvent = function () {\n            // 获取当前选区所在的父元素\n            var elem = editor.getRangeElem();\n            var p = editor.getSelfOrParentByName(elem, 'p');\n            var $p;\n            var indent;\n\n            if (!p) {\n                // 未找到 p 元素，则标记为未处于选中状态\n                return false;\n            }\n            $p = $(p);\n            indent = $p.css('text-indent');\n\n            if (!indent || indent === '0px') {\n                // 得到的p，text-indent 属性是 0，则标记为未处于选中状态\n                return false;\n            }\n\n            // 找到 p 元素，并且 text-indent 不是 0，则标记为选中状态\n            return true;\n        };\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n    });\n});\n// 行高 菜单插件\n/*_e(function (E, $) {\n\n    // 用 createMenu 方法创建菜单\n    E.createMenu(function (check) {\n\n        // 定义菜单id，不要和其他菜单id重复。编辑器自带的所有菜单id，可通过『参数配置-自定义菜单』一节查看\n        var menuId = 'lineheight';\n\n        // check将检查菜单配置（『参数配置-自定义菜单』一节描述）中是否该菜单id，如果没有，则忽略下面的代码。\n        if (!check(menuId)) {\n            return;\n        }\n\n        // this 指向 editor 对象自身\n        var editor = this;\n\n        // 由于浏览器自身不支持 lineHeight 命令，因此要做一个hook\n        editor.commandHooks.lineHeight = function (value) {\n            var rangeElem = editor.getRangeElem();\n            var targetElem = editor.getSelfOrParentByName(rangeElem, 'p,h1,h2,h3,h4,h5,pre');\n            if (!targetElem) {\n                return;\n            }\n            $(targetElem).css('line-height', value + '');\n        };\n\n        // 创建 menu 对象\n        var menu = new E.Menu({\n            editor: editor,  // 编辑器对象\n            id: menuId,  // 菜单id\n            title: '行高', // 菜单标题\n            commandName: 'lineHeight', // 命令名称\n\n            // 正常状态和选中装下的dom对象，样式需要自定义\n            $domNormal: $('<a href=\"#\" tabindex=\"-1\"><i class=\"wangeditor-menu-img-arrows-v\"></i></a>'),\n            $domSelected: $('<a href=\"#\" tabindex=\"-1\" class=\"selected\"><i class=\"wangeditor-menu-img-arrows-v\"></i></a>')\n        });\n\n        // 数据源\n        var data  = {\n            // 格式： 'value' : 'title'\n            '1.0': '1.0倍',\n            '1.5': '1.5倍',\n            '1.8': '1.8倍',\n            '2.0': '2.0倍',\n            '2.5': '2.5倍',\n            '3.0': '3.0倍'\n        };\n\n        // 为menu创建droplist对象\n        var tpl = '<span style=\"line-height:{#commandValue}\">{#title}</span>';\n        menu.dropList = new E.DropList(editor, menu, {\n            data: data,  // 传入数据源\n            tpl: tpl  // 传入模板\n        });\n\n        // 增加到editor对象中\n        editor.menus[menuId] = menu;\n\n    });\n});*/\n// 自定义上传\n/*_e(function (E, $) {\n\n    E.plugin(function () {\n\n        var editor = this;\n        var customUpload = editor.config.customUpload;\n        if (!customUpload) {\n            return;\n        } else if (editor.config.uploadImgUrl) {\n            alert('自定义上传无效，详看浏览器日志console.log');\n            E.error('已经配置了 uploadImgUrl ，就不能再配置 customUpload ，两者冲突。将导致自定义上传无效。');\n            return;\n        }\n\n        var $uploadContent = editor.$uploadContent;\n        if (!$uploadContent) {\n            E.error('自定义上传，无法获取 editor.$uploadContent');\n        }\n\n        // UI\n        var $uploadIcon = $('<div class=\"upload-icon-container\"><i class=\"wangeditor-menu-img-upload\"></i></div>');\n        $uploadContent.append($uploadIcon);\n\n        // 设置id，并暴露\n        var btnId = 'upload' + E.random();\n        var containerId = 'upload' + E.random();\n        $uploadIcon.attr('id', btnId);\n        $uploadContent.attr('id', containerId);\n\n        editor.customUploadBtnId = btnId;\n        editor.customUploadContainerId = containerId;\n    });\n});*/\n\n// 插件注入到vue里面\nvar _export = (function(){\n    var Vue;\n    function install(_Vue) {\n        if (Vue) {\n            console.error(\n                '[edit] already installed. Vue.use(edit) should be called only once.'\n            );\n            return\n        }\n        Vue = _Vue;\n        Vue.prototype.$edit = window.wangEditor;\n    }\n\n    return {\n        install: install,\n        version: '1.0.0'\n    }\n})();\n\nreturn _export;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/edit/edit.js\n// module id = YW4o\n// module chunks = 0","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-306a90d2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./header.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./header.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-306a90d2\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./header.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/header.vue\n// module id = Yh7g\n// module chunks = 0","<!-- style样式代码 -->\n<style lang=\"less\">\n@import (reference) '../common/css/common';\n    @module: c-comment-info;\n\n    .@{module} {\n        & &-wrap {\n            margin-bottom: 30px;\n            .default_backgroud_2;\n        }\n    }\n    .@{module}-list {\n        padding: 20px;\n        .default_border-b-14;\n    }\n    .@{module}__top {\n        height: 20px;\n        overflow: hidden;\n        margin-bottom: 10px;\n        & .top__img {\n            float: left;\n            width: 20px;\n            height: 20px;\n            margin-right: 10px;\n            overflow: hidden;\n            .default_border-r-50;\n            .default_backgroud_5;\n        }\n        & .top__name {\n            float: left;\n            height: 20px;\n            line-height: 20px;\n            .default_font_size_1;\n            .default_color_3;\n        }\n        & .top__time {\n            float: right;\n            height: 20px;\n            line-height: 20px;\n            .default_font_size_1;\n            .default_color_3;\n        }\n    }\n    .@{module}__content {\n        padding-left: 30px;\n        line-height: 1.5rem;\n        .default_font_size_2;\n        .default_color_2;\n        & strong {\n            .default_color_5;\n        }\n    }\n</style>\n\n<!-- html代码 -->\n<template>\n<div class=\"c-comment-info\">\n<div class=\"c-comment-info-wrap\">\n    <div class=\"c-comment-info-list\" v-for=\"data in message.list\">\n        <div class=\"c-comment-info__top\">\n            <div class=\"top__img\">\n                <img :src=\"data.message.sender.avatar_url || avatar\" />\n            </div>\n            <div class=\"top__name\">{{data.message.sender.nick_name}}</div>\n            <div class=\"top__time\">{{data.create_time}}</div>\n        </div>\n        <div class=\"c-comment-info__content\">\n            {{data.message.content.content}}\n        </div>\n    </div>\n    <Empty \n        class=\"content-empty\" \n        v-if=\"message.count <= 0\"\n    />\n</div>\n<Page \n    :count=\"message.count\" \n    :length=\"pageSize\"\n    :index=\"pageIndex\"\n    @page_switch=\"pageSwitch\"\n/>\n</div>\n</template>\n\n<script>\nimport {mapState} from 'vuex'\nimport avatar from '../common/images/img/avatar.png';\nexport default {\n    data (){\n        return {\n            avatar: avatar,\n            pageIndex: 1,\n            pageSize: 5,\n            messageType: 0\n        }\n    },\n    computed: mapState({\n        message: state => state.message.message\n    }),\n    methods: {\n        getMessageList (){\n            this.$store.dispatch('message_getMessageList', {\n                \"page\": this.pageIndex,\n                \"pageSize\": this.pageSize,\n                \"pagination\": 1,\n                \"messageType\": this.messageType\n            }).then( res => {\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            });\n        },\n        pageSwitch (pageIndex){\n            if (this.pageIndex == pageIndex) {\n                return false;\n            }\n            this.pageIndex = pageIndex;\n            this.getMessageList();\n        }\n    },\n    mounted (){\n        // 获取精选列表\n        this.getMessageList();\n    }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// comment.info.vue?cd18d928","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-6d116fca\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./author.header.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./author.header.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6d116fca\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./author.header.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/author.header.vue\n// module id = dibP\n// module chunks = 0","<!-- style样式代码 -->\n<style lang=\"less\">\n@import (reference) '../common/css/common';\n@module: c-side-menu;\n\n.@{module} {\n    position: fixed;\n    bottom: 160px;\n    right: 60px;\n    z-index: 100;\n\twidth: 60px;\n    height: 60px;\n    transition: all @default_speed_1;\n    .default_border-r-50;\n    .default_backgroud_6;\n    .default_pointer;\n    & span {\n        position: absolute;\n        top: 0;\n        left: 0;\n        display: block;\n        width: 100%;\n        height: 100%;\n        transition: opacity @default_speed_1;\n        &:nth-child(1) {\n            opacity: 1;\n            .skin_icon_top_1;\n        }\n        &:nth-child(2) {\n            opacity: 0;\n            .skin_icon_top_1_on;\n        }\n        \n    }\n    & .c-dialog__tip {\n        top: 50%;\n        display: none;\n        transform: translate(-120%, -50%);\n    }\n    &:hover {\n        .default_border_shadow_4;\n    }\n    &:hover span:nth-child(1) {\n        opacity: 0;\n    }\n    &:hover span:nth-child(2) {\n        opacity: 1;\n    }\n    &:hover .c-dialog__tip {\n        display: block;\n    }\n}\n</style>\n\n<!-- html代码 -->\n<template>\n\t<div v-show=\"hasScroll\" class=\"c-side-menu\" @click=\"top\">\n        <span></span>   \n        <span></span>\n        <div class=\"c-dialog__tip\">\n            <div class=\"tip-arrow\"></div>\n            <div class=\"tip-text\">置顶</div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    data () {\n    \treturn {\n    \t\thasScroll: false\n    \t}\n    },\n    mounted (){\n        // 判断是否有滚动条\n        $(window).scroll( e => {\n            var scrollTop = $(window).scrollTop();\n            if (scrollTop > $(window).height()/2) {\n                this.hasScroll = true;\n            } else {\n                this.hasScroll = false;\n            }\n        })\n    },\n    methods: {\n        top () {\n            $(window).scrollTop(0);\n        }\n    }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// sideMenu.vue?0de5e7d2","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-0f382ce0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./footer.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./footer.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0f382ce0\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./footer.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/footer.vue\n// module id = e4Z7\n// module chunks = 0","import * as user from '../data/user'\r\nimport Cookies from 'js-cookie';\r\nvar token = Cookies.get('token');\r\n\r\nexport default {\r\n\tstate: {\r\n\t\t// 邀请码\r\n\t\tinvite_code: '',\r\n\t\t// login back resigeter\r\n\t\tpassword: '',\r\n\t\t// back resigeter\r\n\t\trepasswrd: '',\r\n\t\t// rest\r\n\t\tnewpassword: '',\r\n\t\trenewpassword: '',\r\n\t\t// back \r\n\t\tpwd_err_times: 0,\r\n\r\n\t\tphone: '',\r\n\t\ttime: 0,\r\n\r\n\t\t// user-info\r\n\t\tinfo: {\r\n\t\t\tavatar_url: '',\r\n\t\t\tblack: '',\r\n\t\t\tc_age: '',\r\n\t\t\tfans_count: '',\r\n\t\t\tnick_name: '',\r\n\t\t\topus_count: '',\r\n\t\t\trelation: '',\r\n\t\t\tsignature: '',\r\n\t\t\tuid: '',\r\n\t\t\tgender: -1,\r\n\t\t\tisLogin: !!token,\r\n\t\t},\r\n\r\n\t\t// login back register\r\n\t\tcode: {\r\n\t\t\tpic_code: '',\r\n\t\t\tpic_vid: '',\r\n\t\t\tpic_vcode: '',\r\n\t\t\tphone_vcode: '',\r\n\t\t},\r\n\r\n\t\tisCodeCan: false,\r\n\t\tisPhoneCan: false,\r\n\t\tisReset: true,\r\n\t\tisLogin: true,\r\n\t\tisUpdate: true,\r\n\t\tisRegister: true,\r\n\t\tisUnboundPhone: true,\r\n\t\tisreBindPhone: true\r\n\t},\r\n\tmutations: {\r\n\t\t// 设置state属性\r\n\t\tuser_setState(state, payload) {\r\n\t\t\tfor (var key in payload) {\r\n\t\t\t\tif (payload.hasOwnProperty(key)) {\r\n\t\t\t\t\tif (typeof payload[key] === 'object') {\r\n\t\t\t\t\t\tfor (var _key in payload[key]) {\r\n\t\t\t\t\t\t\tstate[key][_key] = payload[key][_key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstate[key] = payload[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 设置state.time属性\r\n\t\tuser_setTime(state) {\r\n\t\t\tstate.time--;\r\n\t\t},\r\n\t\t// 设置用户信息\r\n\t\tuser_setUserInfo(state, payload) {\r\n\t\t\tfor (var key in payload) {\r\n\t\t\t\tstate.info[key] = payload[key];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tactions: {\r\n\t\t// 设置state属性-cmommit\r\n\t\tuser_setState(context, payload) {\r\n\t\t\tcontext.commit('user_setState', payload);\r\n\t\t},\r\n\t\t// 设置用户信息\r\n\t\tuser_setUserInfo(context, payload) {\r\n\t\t\tcontext.commit('user_setUserInfo', payload);\r\n\t\t\treturn Promise.resolve(1);\r\n\t\t},\r\n\t\t// 获取图形码\r\n\t\tuser_getPicVerifyCode(context, payload) {\r\n\t\t\tif (!payload.init && !context.state.isCodeCan) {\r\n\t\t\t\treturn Promise.reject({\r\n\t\t\t\t\tret: -21,\r\n\t\t\t\t\tmsg: '加载中'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\"isCodeCan\": false\r\n\t\t\t})\r\n\t\t\tvar promise = user.getPicVerifyCode(payload).then(res => {\r\n\t\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\t\"isCodeCan\": true,\r\n\t\t\t\t\t\"isPhoneCan\": true,\r\n\t\t\t\t\t\"code\": {\r\n\t\t\t\t\t\t\"pic_vcode\": String(res.pic_vcode),\r\n\t\t\t\t\t\t\"pic_vid\": res.pic_vid\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn Promise.resolve(res);\r\n\t\t\t}).catch((err) => {\r\n\t\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\t\"isCodeCan\": true\r\n\t\t\t\t})\r\n\r\n\t\t\t\treturn Promise.reject(err);\r\n\t\t\t});\r\n\t\t\treturn promise;\r\n\t\t},\r\n\t\t// 获取手机验证码\r\n\t\tuser_getPhoneVerifyCode(context, payload) {\r\n\t\t\tif (!context.state.isPhoneCan) {\r\n\t\t\t\treturn Promise.reject({\r\n\t\t\t\t\tret: -21,\r\n\t\t\t\t\tmsg: '加载中'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar promise = user.getPhoneVerifyCode({\r\n\t\t\t\t\"verifyType\": payload.verifyType, //注册验证\r\n\t\t\t\t\"phoneNum\": context.state.phone, //手机号\r\n\t\t\t\t\"picVcode\": context.state.code.pic_code, //图形验证码\r\n\t\t\t\t\"picVid\": context.state.code.pic_vid, //图形验证码id\r\n\t\t\t}).then(res => {\r\n\t\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\t\"isPhoneCan\": false,\r\n\t\t\t\t\t\"time\": 60\r\n\t\t\t\t})\r\n\t\t\t\tvar timer = setInterval(() => {\r\n\t\t\t\t\tif (context.state.time <= 0) {\r\n\t\t\t\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\t\t\t\"isPhoneCan\": true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tclearInterval(timer);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontext.commit('user_setTime');\r\n\t\t\t\t}, 1000)\r\n\t\t\t\treturn Promise.resolve(res);\r\n\t\t\t}).catch(err => {\r\n\t\t\t\treturn Promise.reject(err);\r\n\t\t\t})\r\n\t\t\treturn promise;\r\n\t\t},\r\n\t\t// 用户登录\r\n\t\tuser_sigin(context, payload) {\r\n\t\t\tif (!context.state.isLogin) {\r\n\t\t\t\treturn Promise.reject({\r\n\t\t\t\t\tret: -21,\r\n\t\t\t\t\tmsg: '加载中'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar promise = user.sigin({\r\n\t\t\t\t\"phone_num\": context.state.phone, //手机号\r\n\t\t\t\t\"password\": context.state.password, //密码\r\n\t\t\t\t\"pic_vid\": context.state.code.pic_vid, //密码错误次数超过5次时,需要单独调用图形验证码\r\n\t\t\t\t\"pic_vcode\": context.state.code.pic_code, //密码错误5超过5次,需要校验图形验证码\r\n\t\t\t\t\"device_no\": payload.device_no, //设备号,没有则新生成一个,统计用\r\n\t\t\t}).then(res => {\r\n\t\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\t\"isLogin\": true\r\n\t\t\t\t})\r\n\r\n\t\t\t\t// 登录成功后，讲token写入cookie\r\n\t\t\t\tCookies.set('token', res.token, {\r\n\t\t\t\t\tpath: '/',\r\n\t\t\t\t\texpires: payload.isSave ? 7 : ''\r\n\t\t\t\t});\r\n\t\t\t\treturn Promise.resolve(res);\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tif (err.pwd_err_times >= 5 || err.errcode == 20020) {\r\n\t\t\t\t\terr.pwd_err_times = 5;\r\n\t\t\t\t\tcontext.dispatch('user_getPicVerifyCode', {\r\n\t\t\t\t\t\tinit: true\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\t\"pwd_err_times\": err.pwd_err_times || context.state.pwd_err_times,\r\n\t\t\t\t\t\"isLogin\": true\r\n\t\t\t\t})\r\n\t\t\t\treturn Promise.reject(err);\r\n\t\t\t});\r\n\r\n\t\t\treturn promise;\r\n\t\t},\r\n\t\t// 用户注册\r\n\t\tuser_sigup(context, payload) {\r\n\t\t\tif (!context.state.isRegister) {\r\n\t\t\t\treturn Promise.reject({\r\n\t\t\t\t\tret: -21,\r\n\t\t\t\t\tmsg: '加载中'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\"isRegister\": false\r\n\t\t\t})\r\n\t\t\tvar promise = user.sigup({\r\n\t\t\t\t\"invite_code\": context.state.invite_code, // 邀请码\r\n\t\t\t\t\"phone_num\": context.state.phone, //手机号\r\n\t\t\t\t\"password\": context.state.password, //密码,目前只有长度限制:6-12位\r\n\t\t\t\t\"pic_vid\": context.state.code.pic_vid, //图形验证码id\r\n\t\t\t\t\"pic_vcode\": context.state.code.pic_code, //校验图形验证码\r\n\t\t\t\t\"phone_vcode\": context.state.code.phone_vcode, //手机号验证码\r\n\t\t\t\t\"device_no\": payload.device_no, //设备号,没有则新生成一个,统计用\r\n\t\t\t\t\"_header\": payload._header\r\n\t\t\t}).then(res => {\r\n\t\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\t\"isRegister\": true\r\n\t\t\t\t})\r\n\r\n\t\t\t\tCookies.set('token', res.token, {\r\n\t\t\t\t\tpath: '/',\r\n\t\t\t\t\texpires: 7\r\n\t\t\t\t});\r\n\t\t\t\treturn Promise.resolve(res);\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\t\"isRegister\": true\r\n\t\t\t\t})\r\n\t\t\t\treturn Promise.reject(err);\r\n\t\t\t})\r\n\t\t\treturn promise;\r\n\t\t},\r\n\t\t// 用户找回密码\r\n\t\tuser_backPwd(context, payload) {\r\n\t\t\tif (!context.state.isReset) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\"isReset\": false\r\n\t\t\t})\r\n\t\t\tvar promise = user.resetPwd({\r\n\t\t\t\t\"phone_num\": context.state.phone, //手机号\r\n\t\t\t\t\"password\": context.state.password, //密码,目前只有长度限制:6-12位\r\n\t\t\t\t\"phone_vcode\": context.state.code.phone_vcode, //手机号验证码\r\n\t\t\t\t\"device_no\": payload.device_no, //设备号,没有则新生成一个,统计用\r\n\t\t\t\t\"_header\": payload._header\r\n\t\t\t}).then(res => {\r\n\t\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\t\"isReset\": true\r\n\t\t\t\t})\r\n\t\t\t\treturn Promise.resolve(res);\r\n\t\t\t}).catch((err) => {\r\n\t\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\t\"isReset\": true\r\n\t\t\t\t})\r\n\r\n\t\t\t\treturn Promise.reject(err);\r\n\t\t\t});\r\n\t\t\treturn promise;\r\n\t\t},\r\n\t\t// 重置密码\r\n\t\tuser_resetPwd(context, payload) {\r\n\t\t\tif (!context.state.isReset) {\r\n\t\t\t\treturn Promise.reject({\r\n\t\t\t\t\tret: -21,\r\n\t\t\t\t\tmsg: '加载中'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t// 校验密码\r\n\t\t\tif (!$.trim(context.state.password) || context.state.password.length < 6 || context.state.password.length > 12) {\r\n\t\t\t\treturn Promise.reject({\r\n\t\t\t\t\t\"ret\": -2,\r\n\t\t\t\t\t\"msg\": '输入旧密码'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t// 校验密码\r\n\t\t\tif (!$.trim(context.state.newpassword) || context.state.newpassword.length < 6 || context.state.newpassword.length > 12) {\r\n\t\t\t\treturn Promise.reject({\r\n\t\t\t\t\t\"ret\": -2,\r\n\t\t\t\t\t\"msg\": '输入新密码'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t// 校验验证码\r\n\t\t\tif (context.state.newpassword != context.state.renewpassword) {\r\n\t\t\t\treturn Promise.reject({\r\n\t\t\t\t\t\"ret\": -2,\r\n\t\t\t\t\t\"msg\": '密码不一致'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t// 校验验证码\r\n\t\t\tif (!$.trim(context.state.code.phone_vcode)) {\r\n\t\t\t\treturn Promise.reject({\r\n\t\t\t\t\t\"ret\": -2,\r\n\t\t\t\t\t\"msg\": '输入验证码'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\"isReset\": false\r\n\t\t\t})\r\n\t\t\tvar promise = user.resetPwd({\r\n\t\t\t\t\"phone_num\": context.state.phone, //手机号\r\n\t\t\t\t\"password\": context.state.password, //密码,目前只有长度限制:6-12位\r\n\t\t\t\t\"phone_vcode\": context.state.code.phone_vcode, //手机号验证码\r\n\t\t\t\t\"device_no\": payload.device_no, //设备号,没有则新生成一个,统计用\r\n\t\t\t\t\"_header\": payload._header\r\n\t\t\t}).then(res => {\r\n\t\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\t\"isReset\": true\r\n\t\t\t\t})\r\n\t\t\t\treturn Promise.resolve(res);\r\n\t\t\t}).catch((err) => {\r\n\t\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\t\"isReset\": true\r\n\t\t\t\t})\r\n\r\n\t\t\t\treturn Promise.reject(err);\r\n\t\t\t});\r\n\t\t\treturn promise;\r\n\t\t},\r\n\t\t// 更新用户信息\r\n\t\tuser_updateUserInfo(context, payload) {\r\n\t\t\tif (!context.state.isUpdate) {\r\n\t\t\t\treturn Promise.reject({\r\n\t\t\t\t\tret: -21,\r\n\t\t\t\t\tmsg: '加载中'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t// 校验参数\r\n\t\t\t// nick_name、avatar_url、signature、gender\r\n\t\t\t// 必须有个存在\r\n\t\t\tif (!$.trim(context.state.info.gender) && !$.trim(context.state.info.nick_name) && !$.trim(context.state.info.avatar_url) && !$.trim(context.state.info.signature)) {\r\n\t\t\t\treturn Promise.reject({\r\n\t\t\t\t\t\"ret\": -2,\r\n\t\t\t\t\t\"msg\": '参数错误！'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\"isUpdate\": false\r\n\t\t\t})\r\n\r\n\t\t\tvar promise = user.updateUserInfo({\r\n\t\t\t\t\"gender\": context.state.info.gender,\r\n\t\t\t\t\"nick_name\": context.state.info.nick_name,\r\n\t\t\t\t\"avatar_url\": context.state.info.avatar_url,\r\n\t\t\t\t\"signature\": context.state.info.signature\r\n\t\t\t}).then(res => {\r\n\t\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\t\"isUpdate\": true\r\n\t\t\t\t})\r\n\t\t\t\treturn Promise.resolve(res);\r\n\t\t\t}).catch((err) => {\r\n\t\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\t\"isUpdate\": true\r\n\t\t\t\t})\r\n\r\n\t\t\t\treturn Promise.reject(err);\r\n\t\t\t});\r\n\t\t\treturn promise;\r\n\t\t},\r\n\t\t// 获取用户信息\r\n\t\tuser_getUserInfo(context, payload) {\r\n\t\t\t// 判断是否自己信息\r\n\t\t\tif (payload.userId == context.state.info.uid) {\r\n\t\t\t\treturn Promise.resolve(context.state.info);\r\n\t\t\t}\r\n\r\n\t\t\tvar promise = user.getUserInfo(payload).then(res => {\r\n\t\t\t\t// 自己的信息用token拿\r\n\t\t\t\tif (!payload.userId) {\r\n\t\t\t\t\tcontext.commit('user_setUserInfo', res.info);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn Promise.resolve(res.info);\r\n\t\t\t}).catch((err) => {\r\n\t\t\t\treturn Promise.reject(err);\r\n\t\t\t});\r\n\t\t\treturn promise;\r\n\t\t},\r\n\t\t// 退出登录\r\n\t\tuser_ourlogin(context, payload) {\r\n\t\t\tcontext.commit('user_setUserInfo', {\r\n\t\t\t\tavatar_url: '',\r\n\t\t\t\tblack: '',\r\n\t\t\t\tc_age: '',\r\n\t\t\t\tfans_count: '',\r\n\t\t\t\tnick_name: '',\r\n\t\t\t\topus_count: '',\r\n\t\t\t\trelation: '',\r\n\t\t\t\tsignature: '',\r\n\t\t\t\tuid: '',\r\n\t\t\t\tisLogin: '',\r\n\t\t\t});\r\n\t\t\t// 登录成功后，讲token写入cookie\r\n\t\t\tCookies.remove('token', {});\r\n\t\t},\r\n\t\t// 接触手机绑定\r\n\t\tuser_unboundPhone(context, payload) {\r\n\t\t\tif (!context.state.isUnboundPhone) {\r\n\t\t\t\treturn Promise.reject({\r\n\t\t\t\t\tret: -21,\r\n\t\t\t\t\tmsg: '加载中'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\"isUnboundPhone\": false\r\n\t\t\t})\r\n\r\n\t\t\tvar promise = user.unboundPhone({\r\n\t\t\t\t\"phone_num\": context.state.phone, //手机号\r\n\t\t\t\t\"phone_vcode\": context.state.code.phone_vcode, //手机号验证码\r\n\t\t\t}).then(res => {\r\n\t\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\t\"phone\": '',\r\n\t\t\t\t\t\"code\": {\r\n\t\t\t\t\t\tpic_code: '',\r\n\t\t\t\t\t\tpic_vid: '',\r\n\t\t\t\t\t\tpic_vcode: '',\r\n\t\t\t\t\t\tphone_vcode: ''\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"isUnboundPhone\": true\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn Promise.resolve(res);\r\n\t\t\t}).catch((err) => {\r\n\t\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\t\"isUnboundPhone\": true\r\n\t\t\t\t})\r\n\r\n\t\t\t\treturn Promise.reject(err);\r\n\t\t\t});\r\n\t\t\treturn promise;\r\n\t\t},\r\n\t\t// 接触手机绑定\r\n\t\tuser_reBindPhone(context, payload) {\r\n\t\t\tif (!context.state.isreBindPhone) {\r\n\t\t\t\treturn Promise.reject({\r\n\t\t\t\t\tret: -21,\r\n\t\t\t\t\tmsg: '加载中'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\"isreBindPhone\": false\r\n\t\t\t})\r\n\r\n\t\t\tvar promise = user.reBindPhone({\r\n\t\t\t\t\"phone_num\": context.state.phone, //手机号\r\n\t\t\t\t\"phone_vcode\": context.state.code.phone_vcode, //手机号验证码\r\n\t\t\t}).then(res => {\r\n\t\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\t\"phone\": '',\r\n\t\t\t\t\t\"code\": {\r\n\t\t\t\t\t\tpic_code: '',\r\n\t\t\t\t\t\tpic_vid: '',\r\n\t\t\t\t\t\tpic_vcode: '',\r\n\t\t\t\t\t\tphone_vcode: ''\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"isreBindPhone\": true\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn Promise.resolve(res);\r\n\t\t\t}).catch((err) => {\r\n\t\t\t\tcontext.commit('user_setState', {\r\n\t\t\t\t\t\"isreBindPhone\": true\r\n\t\t\t\t})\r\n\r\n\t\t\t\treturn Promise.reject(err);\r\n\t\t\t});\r\n\t\t\treturn promise;\r\n\t\t}\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/server/modules/user.js","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-edit\"\n  }, [_c('div', {\n    staticClass: \"c-edit-content\",\n    attrs: {\n      \"id\": \"edit\"\n    },\n    on: {\n      \"click\": _vm.click\n    }\n  }), _vm._v(\" \"), (_vm.edit_init) ? _c('keep-alive', [_c('UploadImg', {\n    attrs: {\n      \"type\": \"2\",\n      \"select\": \"edit_upload_image_select\",\n      \"container\": \"edit_container\"\n    },\n    on: {\n      \"uploadImg_uploaded\": _vm.uploaded,\n      \"uploadImg_error\": _vm.error\n    }\n  })], 1) : _vm._e()], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-3c2fbd0f\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/component/edit.vue\n// module id = euaV\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-article-header\"\n  }, [_c('div', {\n    staticClass: \"c-article-header-wrap\"\n  }, [_c('div', {\n    staticClass: \"c-article-header_left\"\n  }, [_c('div', {\n    staticClass: \"left-img\"\n  }, [_c('img', {\n    attrs: {\n      \"src\": _vm.catalog.catalog_cover_url\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"left-tag\",\n    class: {\n      'z-man': _vm.catalog.category_title == '漫画', 'z-wen': _vm.catalog.category_title == '文字'\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"c-article-header_right\"\n  }, [_c('div', {\n    staticClass: \"name\"\n  }, [_c('div', {\n    staticClass: \"name-text\"\n  }, [_vm._v(_vm._s(_vm.catalog.catalog_title))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"name-tag\"\n  }, [_vm._v(_vm._s(_vm.level['level' + _vm.catalog.level]))])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"btn\"\n  }, [_c('div', {\n    staticClass: \"btn-item btn-mark\",\n    attrs: {\n      \"data-catalog_id\": _vm.catalog.catalog_id\n    }\n  }, [(_vm.catalog.owner != 1) ? _c('span', {\n    on: {\n      \"click\": function($event) {\n        _vm.mark(_vm.catalog.catalog_id)\n      }\n    }\n  }, [_vm._v(_vm._s(_vm.catalog.is_collected == 1 ? '取消收藏' : '加入收藏'))]) : _c('span', {\n    on: {\n      \"click\": _vm.updateCatalog\n    }\n  }, [_vm._v(\"修改目录信息\")])]), _vm._v(\" \"), _vm._m(0), _vm._v(\" \"), _c('div', {\n    staticClass: \"btn-item btn-more\"\n  }, [_c('div', {\n    staticClass: \"cpm_sub_more z-left\"\n  }, [_c('div', {\n    staticClass: \"item\",\n    on: {\n      \"click\": _vm.addReport\n    }\n  }, [_c('div', {\n    staticClass: \"item-icon z-report\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"举报\")])])])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"text\"\n  }, [_c('div', {\n    staticClass: \"text-intro\"\n  }, [_vm._v(_vm._s(_vm.catalog.catalog_desc))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"text-tag\"\n  }, _vm._l((_vm.catalog.labels), function(item) {\n    return _c('p', [_vm._v(_vm._s(item))])\n  })), _vm._v(\" \"), _c('div', {\n    staticClass: \"text-number\"\n  }, [_c('div', {\n    staticClass: \"text-number-item text-zan\"\n  }, [_c('span'), _vm._v(\" \"), _c('strong', [_vm._v(_vm._s(_vm.catalog.praise_count))])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"text-number-item text-comment\"\n  }, [_c('span'), _vm._v(\" \"), _c('strong', [_vm._v(_vm._s(_vm.catalog.comment_count))])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"text-author\"\n  }, [_c('div', {\n    staticClass: \"text-author__img\"\n  }, [_c('img', {\n    attrs: {\n      \"src\": _vm.catalog.user && _vm.catalog.user.avatar_url || _vm.avatar\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"text-author__name\"\n  }, [_vm._v(_vm._s(_vm.catalog.user && _vm.catalog.user.nick_name))])])])])])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"btn-item btn-share\"\n  }, [_c('div', {\n    staticClass: \"cpm_sub_more z-left\"\n  }, [_c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-wx\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"微信\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-peng\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"朋友圈\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-wb\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"微博\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-qq\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"QQ 好友\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-kong\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"QQ 空间\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-more\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"更多\")])])])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-3a04cfca\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/component/article.header.vue\n// module id = gnCm\n// module chunks = 0","import * as auth from '../data/auth'\r\n\r\nexport default {\r\n\tstate: {\r\n\t\t// 用户列表\r\n\t\tcount: 0,\r\n\t\tlists: [],\r\n\r\n\t\t// 邀请码\r\n\t\tcode: ''\r\n\t},\r\n\tmutations: {\r\n\t\t// 设置state属性\r\n\t\tauth_setState (state, payload){\r\n\t\t\tfor (var key in payload) {\r\n\t\t\t\tif (payload.hasOwnProperty(key)) {\r\n\t\t\t\t\tif (typeof payload[key] === 'object') {\r\n\t\t\t\t\t\tfor (var _key in payload[key]) {\r\n\t\t\t\t\t\t\tstate[key][_key] = payload[key][_key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstate[key] = payload[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 设置数据列表\r\n\t\tauth_setLists (state, payload){\r\n\t\t\tstate.count = payload.count;\r\n\t\t\tstate.lists = payload.lists;\r\n\t\t},\r\n\t\t// 设置邀请码\r\n\t\tauth_setCode (state, payload){\r\n\t\t\tstate.code = payload.code;\r\n\t\t}\r\n\t},\r\n\tactions: {\r\n\t\t// 设置state属性-cmommit\r\n\t\tauth_setState (context, payload){\r\n\t\t\tcontext.commit('auth_setState', payload);\r\n\t\t},\r\n\t\t// 获取关注人数\r\n\t\tauth_getFollowList (context, payload){\r\n\t\t\tvar promise = auth.getFollowList(payload).then( res => {\r\n\t\t\t\tres.list.map(list => {\r\n    \t\t\t\tlist.relation = 1;\r\n    \t\t\t})\r\n\t\t\t\tcontext.commit('auth_setLists', {\r\n\t\t\t\t\t\"lists\": res.list,\r\n\t\t\t\t\t\"count\": res.page_info.total_count\r\n\t\t\t\t})\r\n\t\t\t\treturn Promise.resolve(res);\r\n\t\t\t}).catch( (res) => {\r\n\t\t\t\treturn Promise.reject(res);\r\n\t\t\t});\r\n\t\t\treturn promise;\r\n\t\t},\r\n\t\t// 获取粉丝用户列表\r\n\t\tauth_getFansList (context, payload){\r\n\t\t\tvar promise = auth.getFansList(payload).then( res => {\r\n\t\t\t\tcontext.commit('auth_setLists', {\r\n\t\t\t\t\t\"lists\": res.list,\r\n\t\t\t\t\t\"count\": res.page_info.total_count\r\n\t\t\t\t})\r\n\t\t\t\treturn Promise.resolve(res);\r\n\t\t\t}).catch( (res) => {\r\n\t\t\t\treturn Promise.reject(res);\r\n\t\t\t});\r\n\t\t\treturn promise;\r\n\t\t},\r\n\t\t// 获取用户列表\r\n\t\tauth_getUserList (context, payload){\r\n\t\t\tvar promise = auth.getUserList(payload).then( res => {\r\n\t\t\t\tcontext.commit('auth_setLists', {\r\n\t\t\t\t\t\"lists\": res.list,\r\n\t\t\t\t\t\"count\": res.page_info.total_count\r\n\t\t\t\t})\r\n\t\t\t\treturn Promise.resolve(res);\r\n\t\t\t}).catch( (res) => {\r\n\t\t\t\treturn Promise.reject(res);\r\n\t\t\t});\r\n\t\t\treturn promise;\r\n\t\t},\r\n\t\t// 获取用户黑名单\r\n\t\tauth_getBlackList (context, payload){\r\n    \t\tvar promise = auth.getBlackList({\r\n    \t\t\t\"pagination\": 1, // 获取总数\r\n    \t\t\t\"page\": payload.pageIndex, //页数,默认不传查询第一页\r\n\t\t\t\t\"pageSize\": payload.pageSize //每页数量 默认10\r\n    \t\t}).then( res => {\r\n    \t\t\tres.list.map(list => {\r\n    \t\t\t\tlist.relation = 3;\r\n    \t\t\t})\r\n\t\t\t\tcontext.commit('auth_setLists', {\r\n\t\t\t\t\t\"lists\": res.list,\r\n\t\t\t\t\t\"count\": res.page_info.total_count\r\n\t\t\t\t});\r\n\t\t\t\treturn Promise.resolve(res);\r\n    \t\t}).catch( (res) => {\r\n\t\t\t\treturn Promise.reject(res);\r\n\t\t\t});\r\n    \t\treturn promise;\r\n\t\t},\r\n\t\t// 删除黑名单\r\n\t\tauth_delBlack (context, payload){\r\n    \t\tvar promise = auth.delBlack({\r\n    \t\t\tuserId: payload.userId //被拉进黑名单的用户\r\n    \t\t}).then( res => {\r\n\t\t\t\treturn Promise.resolve(res);\r\n    \t\t}).catch( (res) => {\r\n\t\t\t\treturn Promise.reject(res);\r\n\t\t\t});\r\n    \t\treturn promise;\r\n\t\t},\r\n\t\t// 添加黑名单\r\n\t\tauth_addBlack (context, payload){\r\n    \t\tvar promise = auth.addBlack({\r\n    \t\t\tuserId: payload.userId //被拉进黑名单的用户\r\n    \t\t}).then( res => {\r\n\t\t\t\treturn Promise.resolve(res);\r\n    \t\t}).catch( (res) => {\r\n\t\t\t\treturn Promise.reject(res);\r\n\t\t\t});\r\n    \t\treturn promise;\r\n\t\t},\r\n\t\t// 关注用户\r\n\t\tauth_addFollow (context, payload){\r\n    \t\tvar promise = auth.addFollow({\r\n    \t\t\tuserId: payload.userId //被拉进黑名单的用户\r\n    \t\t}).then( res => {\r\n\t\t\t\treturn Promise.resolve(res);\r\n    \t\t}).catch( (res) => {\r\n\t\t\t\treturn Promise.reject(res);\r\n\t\t\t});\r\n    \t\treturn promise;\r\n\t\t},\r\n\t\t// 取消关注\r\n\t\tauth_delFollow (context, payload){\r\n    \t\tvar promise = auth.delFollow({\r\n    \t\t\tuserId: payload.userId //被拉进黑名单的用户\r\n    \t\t}).then( res => {\r\n\t\t\t\treturn Promise.resolve(res);\r\n    \t\t}).catch( (res) => {\r\n\t\t\t\treturn Promise.reject(res);\r\n\t\t\t});\r\n    \t\treturn promise;\r\n\t\t},\r\n\t\t// 获取热门用户\r\n\t\tauth_getRecommendUserList (context, payload){\r\n\t\t\tvar promise = auth.getRecommendUserList(payload).then( res => {\r\n\t\t\t\tcontext.commit('auth_setLists', {\r\n\t\t\t\t\t\"lists\": res.list,\r\n\t\t\t\t\t\"count\": res.list.length\r\n\t\t\t\t})\r\n\t\t\t\treturn Promise.resolve(res);\r\n\t\t\t}).catch( (res) => {\r\n\t\t\t\treturn Promise.reject(res);\r\n\t\t\t});\r\n\t\t\treturn promise;\r\n\t\t},\r\n\t\t// 获取标签指定活跃用户\r\n\t\tauth_getActiveUserList (context, payload){\r\n\t\t\tvar promise = auth.getActiveUserList(payload).then( res => {\r\n\t\t\t\tcontext.commit('auth_setLists', {\r\n\t\t\t\t\t\"lists\": res.list,\r\n\t\t\t\t\t\"count\": res.list.length\r\n\t\t\t\t})\r\n\t\t\t\treturn Promise.resolve(res);\r\n\t\t\t}).catch( (res) => {\r\n\t\t\t\treturn Promise.reject(res);\r\n\t\t\t});\r\n\t\t\treturn promise;\r\n\t\t},\r\n\t\t// 获取邀请码\r\n\t\tauth_getInviteCode (context, payload){\r\n\t\t\tvar promise = auth.getInviteCode(payload).then( res => {\r\n\t\t\t\tcontext.commit('auth_setCode', {\r\n\t\t\t\t\t\"code\": res.invite_code\r\n\t\t\t\t})\r\n\t\t\t\treturn Promise.resolve(res);\r\n\t\t\t}).catch( (res) => {\r\n\t\t\t\treturn Promise.reject(res);\r\n\t\t\t});\r\n\t\t\treturn promise;\r\n\t\t},\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/server/modules/auth.js","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-author-header\"\n  }, [_c('div', {\n    staticClass: \"c-author-header-wrap\"\n  }, [_c('div', {\n    staticClass: \"c-author-header_left\"\n  }, [_c('div', {\n    staticClass: \"img\"\n  }, [_c('img', {\n    attrs: {\n      \"src\": _vm.user.avatar_url || _vm.avatar\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.userInfo.uid == _vm.user_id),\n      expression: \"userInfo.uid == user_id\"\n    }],\n    staticClass: \"icon\",\n    attrs: {\n      \"id\": \"author_upload_image_select\"\n    }\n  }), _vm._v(\" \"), _c('UploadImg', {\n    attrs: {\n      \"type\": \"1\",\n      \"select\": \"author_upload_image_select\",\n      \"container\": \"author_container\"\n    },\n    on: {\n      \"uploadImg_uploaded\": _vm.uploaded\n    }\n  })], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"c-author-header_right\"\n  }, [_c('div', {\n    staticClass: \"name\"\n  }, [_c('div', {\n    staticClass: \"name-text\"\n  }, [_vm._v(_vm._s(_vm.user.nick_name))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"name-time\"\n  }, [_vm._v(\"社区年龄：\"), _c('span', [_vm._v(_vm._s(_vm.user.c_age))])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"btn\"\n  }, [_c('div', {\n    staticClass: \"btn-item btn-mark\",\n    class: [{\n      'z-width': _vm.user.relation == -1\n    }],\n    on: {\n      \"click\": _vm.follow\n    }\n  }, [(_vm.userInfo.uid != _vm.user_id) ? _c('span', [_vm._v(_vm._s(_vm.user.relation == 1 || _vm.user.relation == 3 ? '已关注' : '添加关注'))]) : _c('a', {\n    attrs: {\n      \"href\": \"setting.userinfo.html\"\n    }\n  }, [_vm._v(\"个人设置\")])]), _vm._v(\" \"), _vm._m(0), _vm._v(\" \"), (_vm.userInfo.uid != _vm.user_id) ? _c('div', {\n    staticClass: \"btn-item btn-more\"\n  }, [_c('div', {\n    staticClass: \"cpm_sub_more z-left\"\n  }, [_c('div', {\n    staticClass: \"item\",\n    on: {\n      \"click\": _vm.addBlackDialog\n    }\n  }, [_c('div', {\n    staticClass: \"item-icon z-black\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"加入黑名单\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\",\n    on: {\n      \"click\": _vm.addReport\n    }\n  }, [_c('div', {\n    staticClass: \"item-icon z-report\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"举报\")])])])]) : _vm._e()]), _vm._v(\" \"), _c('div', {\n    staticClass: \"text\"\n  }, [_vm._v(_vm._s(_vm.user.signature))])])])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"btn-item btn-share\"\n  }, [_c('div', {\n    staticClass: \"cpm_sub_more z-left\"\n  }, [_c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-wx\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"微信\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-peng\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"朋友圈\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-wb\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"微博\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-qq\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"QQ 好友\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-kong\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"QQ 空间\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item\"\n  }, [_c('div', {\n    staticClass: \"item-icon z-more\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"item-text\"\n  }, [_vm._v(\"更多\")])])])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-6d116fca\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/component/author.header.vue\n// module id = iK2G\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-bubble\",\n    class: {\n      cpm_hide: !_vm.data.show\n    },\n    attrs: {\n      \"id\": \"bubble\"\n    }\n  }, [_c('div', {\n    staticClass: \"c-bubble-mask\",\n    on: {\n      \"click\": _vm.close\n    }\n  }), _vm._v(\" \"), (_vm.data.type == 'top') ? _c('div', {\n    staticClass: \"c-bubble-top\",\n    class: _vm.data.top.status\n  }, [_vm._v(\"\\n\\n    \\t\" + _vm._s(_vm.data.top.msg) + \"\\n    \")]) : _vm._e(), _vm._v(\" \"), (_vm.data.type == 'report') ? _c('div', {\n    staticClass: \"c-bubble-report\"\n  }, [_c('div', {\n    staticClass: \"report-title\"\n  }, [_vm._v(\"\\n    \\t\\t选择举报类型\\n    \\t\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"report-content\"\n  }, [_c('div', {\n    staticClass: \"select-item z-on\",\n    attrs: {\n      \"data-type\": \"adv\"\n    },\n    on: {\n      \"click\": _vm.radioSwitch\n    }\n  }, [_vm._m(0), _vm._v(\" \"), _c('span', {\n    staticClass: \"select-item-text\"\n  }, [_vm._v(\"广告或者垃圾信息\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"select-item\",\n    attrs: {\n      \"data-type\": \"copy\"\n    },\n    on: {\n      \"click\": _vm.radioSwitch\n    }\n  }, [_vm._m(1), _vm._v(\" \"), _c('span', {\n    staticClass: \"select-item-text\"\n  }, [_vm._v(\"抄袭或未授权转载\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"select-item\",\n    attrs: {\n      \"data-type\": \"other\"\n    },\n    on: {\n      \"click\": _vm.radioSwitch\n    }\n  }, [_vm._m(2), _vm._v(\" \"), _c('span', {\n    staticClass: \"select-item-text\"\n  }, [_vm._v(\"其他原因\")])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"textare-item\"\n  }, [_c('textarea', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.content),\n      expression: \"content\"\n    }],\n    attrs: {\n      \"placeholder\": \"请输入举报原因\"\n    },\n    domProps: {\n      \"value\": (_vm.content)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.content = $event.target.value\n      }\n    }\n  })])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"report-bottom\"\n  }, [_c('div', {\n    staticClass: \"report-bottom-item report-bottom-cancel\",\n    on: {\n      \"click\": _vm.close\n    }\n  }, [_vm._v(\"取消\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"report-bottom-item report-bottom-comfire\",\n    on: {\n      \"click\": _vm.addReport\n    }\n  }, [_vm._v(\"确认\")])])]) : _vm._e(), _vm._v(\" \"), (_vm.data.type == 'declaration') ? _c('div', {\n    staticClass: \"c-bubble-declaration\"\n  }, [_c('div', {\n    staticClass: \"declaration-title\"\n  }, [_vm._v(\"原创声明\")]), _vm._v(\" \"), _vm._m(3), _vm._v(\" \"), _vm._m(4)]) : _vm._e(), _vm._v(\" \"), (_vm.data.type == 'warn') ? _c('div', {\n    staticClass: \"c-bubble-warn\"\n  }, [_c('div', {\n    staticClass: \"warn-title\"\n  }, [_vm._v(_vm._s(_vm.data.warn.title))]), _vm._v(\" \"), (_vm.data.warn.html) ? _c('div', {\n    staticClass: \"warn-content\",\n    domProps: {\n      \"innerHTML\": _vm._s(_vm.data.warn.html)\n    }\n  }) : _c('div', {\n    staticClass: \"warn-content\"\n  }, [_vm._v(_vm._s(_vm.data.warn.content))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"warn-bottom\"\n  }, [_c('div', {\n    staticClass: \"warn-bottom-item warn-bottom-cancel\",\n    on: {\n      \"click\": _vm.close\n    }\n  }, [_vm._v(\"取消\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"warn-bottom-item warn-bottom-comfire\",\n    on: {\n      \"click\": _vm.comfire\n    }\n  }, [_vm._v(\"确认\")])])]) : _vm._e(), _vm._v(\" \"), (_vm.data.type == 'complete') ? _c('div', {\n    staticClass: \"c-bubble-complete\"\n  }, [_c('div', {\n    staticClass: \"complete-title\"\n  }, [_vm._v(_vm._s(_vm.data.complete.title))]), _vm._v(\" \"), _vm._m(5), _vm._v(\" \"), _c('div', {\n    staticClass: \"complete-bottom\"\n  }, [_c('div', {\n    staticClass: \"complete-bottom-item complete-bottom-cancel\",\n    on: {\n      \"click\": _vm.close\n    }\n  }, [_vm._v(\"继续创作\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"complete-bottom-item complete-bottom-comfire\",\n    on: {\n      \"click\": _vm.comfireAll\n    }\n  }, [_vm._v(\"查看作品\")])])]) : _vm._e()])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('span', {\n    staticClass: \"select-item-radio\"\n  }, [_c('em')])\n},function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('span', {\n    staticClass: \"select-item-radio\"\n  }, [_c('em')])\n},function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('span', {\n    staticClass: \"select-item-radio\"\n  }, [_c('em')])\n},function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"declaration-content\"\n  }, [_c('h3', [_vm._v(\"原创特指自己独立完成创作的作品。歪曲、篡改他人创作或者抄袭、剽窃他人创作而产生的作品，改编、翻译、注释、整理他人已有创作而产生的作品均不能说是原创。\")]), _vm._v(\" \"), _c('p', [_vm._v(\"如下情形不得对作品进行原创声明，一经发现将对作品永久收回原创声明功能使用权限，导致严重影响的还将对违规帐号予以一定期限内封号处理；\")]), _vm._v(\" \"), _c('p', [_vm._v(\"1. 未取得合法授权发布的作品；\")]), _vm._v(\" \"), _c('p', [_vm._v(\"2. 作品主要篇幅为诸如“法律、法规，国家机关的决议、决定、命令和其他具有立法、行政、司法性质的文件、时事新闻、历法、通用数表、通用表格和公式”等公共内容；\")]), _vm._v(\" \"), _c('p', [_vm._v(\"3. 大篇幅引用他人内容或作品主要内容为他人作品，如书摘、文摘、报摘等；\")]), _vm._v(\" \"), _c('p', [_vm._v(\"4. 营销性质的内容；\")]), _vm._v(\" \"), _c('p', [_vm._v(\"5. 整合的内容；\")]), _vm._v(\" \"), _c('p', [_vm._v(\"6. 对非独家代理的作品声明原创等；\")]), _vm._v(\" \"), _c('p', [_vm._v(\"7. 色情低俗内容、暴力内容、等内容；\")]), _vm._v(\" \"), _c('p', [_vm._v(\"8. 违反法律法规、政策及公序良俗、社会公德，违反《耳语作品规则》、《耳语版权声明》，或干扰耳语平台正常运营和侵犯其他用户或第三方合法权益内容的信息。\")])])\n},function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"declaration-bottom\"\n  }, [_c('div', {\n    staticClass: \"declaration-bottom-cancel cpm_button_weak z-disline\"\n  }, [_vm._v(\"取消\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"declaration-bottom-comfire cpm_button_default z-disline\"\n  }, [_vm._v(\"确认\")])])\n},function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"complete-content\"\n  }, [_c('p', [_vm._v(\"发布成功\")]), _vm._v(\" \"), _c('p', [_vm._v(\"我们审核后会推送至首页，但你可以先分享好友阅读\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"complete-share\"\n  }, [_c('div', {\n    staticClass: \"share-item share-py\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"share-item share-line\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"share-item share-qq\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"share-item share-kong\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"share-item share-wb\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"share-item share-more\"\n  })])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-776f695e\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/component/bubble.vue\n// module id = iyE5\n// module chunks = 0","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-7e6bd524\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./chapter.list.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./chapter.list.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7e6bd524\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./chapter.list.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/chapter.list.vue\n// module id = jz42\n// module chunks = 0","/**\r\n * eventHub 1.0.0\r\n * @license MIT\r\n */\r\n(function(global, factory) {\r\n    typeof exports === 'object' && \r\n    typeof module !== 'undefined' ? \r\n        module.exports = factory() :\r\n        typeof define === 'function' && define.amd ? \r\n            define(factory) :\r\n            (global.eventHub = factory());\r\n}(this, (function() {\r\n    'use strict';\r\n\r\n    var Vue;\r\n    function install(_Vue) {\r\n        if (Vue) {\r\n            console.error(\r\n                '[eventHub] already installed. Vue.use(eventHub) should be called only once.'\r\n            );\r\n            return\r\n        }\r\n        Vue = _Vue;\r\n        Vue.prototype.$eventHub = new EventHub();\r\n    }\r\n\r\n    // 创建eventHub实例\r\n    function EventHub (){\r\n        this._vm = new Vue();\r\n    }\r\n    EventHub.prototype = {\r\n        $on: function(event, fn){\r\n            this._vm.$on(event, fn);\r\n            return this;\r\n        },\r\n        $emit: function(event, payload){\r\n            this._vm.$emit(event, payload);\r\n            return this;\r\n        }\r\n    }\r\n\r\n    var index = {\r\n        install: install,\r\n        version: '1.0.0'\r\n    };\r\n\r\n    return index;\r\n})));\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/vue.eventHub.js\n// module id = kZEp\n// module chunks = 0","<!-- style样式代码 -->\n<style lang=\"less\">\n@import (reference) '../common/css/common';\n@module: c-page-fenye;\n\n.@{module} {\n    user-select: none;\n    width: 100%;\n    height: 30px;\n    overflow: hidden;\n    .default_center;\n    & .item {\n        width: 30px;\n        height: 30px;\n        line-height: 30px;\n        margin-right: 10px;\n        vertical-align: middle;\n        .default_border-r-4;\n        .default_disline;\n        .default_backgroud_2;\n        .default_font_size_2;\n        .default_color_2;\n        .default_pointer;\n        .default_center;\n        &.z-on {\n            .default_backgroud_6;\n            .default_color_1;\n        }\n        &:hover {\n            .default_color_1;   \n        }\n        &.z-prev {\n            .skin_icon_prev;\n            &:hover {\n                .skin_icon_prev_on;\n            }\n        }\n        &.z-next {\n            .skin_icon_next;\n            &:hover {\n                .skin_icon_next_on;\n            }\n        }\n    }\n    & .text {\n        margin-left: 10px;\n        vertical-align: middle;\n        .default_font_size_2;\n        .default_color_2;\n        & span{\n            margin-left: 5px;\n            .default_color_7;\n        }\n        display: none;\n    }\n    & .input {\n        width: 60px;\n        height: 40px;\n        margin: 0 10px;\n        vertical-align: middle;\n        display: none;\n        .default_backgroud_2;\n        & input {\n            .default_center;\n        }\n    }\n    & .btn {\n        vertical-align: middle;\n        display: none;\n    }\n    &.z-small {\n        text-align: left;\n        .default_color_2;\n        & .item {\n            .default_border-r-50;\n            .default_backgroud_n;\n            &:hover {\n                .default_backgroud_4;\n                .default_color_1;   \n            }\n            &.z-on {\n                .default_backgroud_000;\n                .default_color_2;\n            }\n            &.z-prev {\n                .skin_icon_prev;\n            }\n            &.z-next {\n                .skin_icon_next;\n            }\n        }\n    }\n    &.z-width {\n        text-align: left;\n        .default_color_2;\n        & .text,\n        & .input,\n        & .btn {\n            .default_disline;\n        }\n    }\n}\n</style>\n\n<script>\nexport default {\n    props: ['count', 'length', 'index', 'ext'],\n    computed: {\n        pages () {\n            return Math.ceil(this.count/this.length);\n        }\n    },\n    methods: {\n        pageSwitch (e){\n            var node = e.target;\n            var index = node.dataset['index'];\n            var dist;\n            if (index == 'prev') {\n                dist = this.index - 1;\n            } else if (index == 'next') {\n                dist = this.index + 1;\n            } else {\n                dist = parseInt(index);\n            }\n            this.$emit('page_switch', dist, this.ext);\n        }\n    },\n    render (h) {\n        var that = this;\n        var index = this.index;\n        var pages = this.pages;\n        var _arr = [];\n        var isloadmore = false;\n        var left = 0;\n        var right = 0;\n        for (var i = 0; i < pages; i++) {\n            _arr[i] = i;\n        }\n        if (pages == 0) {\n            return '';\n        }\n        if (index == 1 || index == pages) {\n            isloadmore = true;\n        }\n        if (index - 1 < 3) {\n            right = isloadmore ? 5 - index : 4 - index;\n        }\n        if (pages - index < 3) {\n            left = isloadmore ? 4 - (pages - index) : 3 - (pages - index);\n        }\n        return (\n            <div class=\"c-page-fenye\">\n            {\n                index != 1 ? <div class=\"item z-prev\" data-index=\"prev\" onClick={that.pageSwitch}></div> : ''\n            }\n            {\n                _arr.map(function(item, i){\n                    var _index = i + 1;\n                    \n                    // 左边保留3个\n                    if (_index + 3 + left < index) {\n                        return '';\n                    }\n\n                    // 右边保留3个\n                    if (index + 3 + right < _index) {\n                        return '';\n                    }\n                    isloadmore--;\n                    return (\n                        <div class={\"item \" + (_index == index ? 'z-on' : '')} data-index={_index} onClick={that.pageSwitch}>{_index}</div>\n                    )\n                })\n            }\n            {\n                index != pages ? <div class=\"item z-next\" data-index=\"next\" onClick={that.pageSwitch}></div> : ''\n            }\n                <div class=\"text\">共页<span>{pages}</span>，跳转</div>\n                <div class=\"input cpm_form_input\"><input type=\"text\"/></div> \n                <div class=\"btn cpm_button_default\">GO</div> \n            </div>\n        )\n    }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// page.fenye.vue?33a20e10","import {baseUrl, _reject, _rejectObj} from '../config'\r\nimport Cookies from 'js-cookie';\r\n// 设置基本的请求headers\r\nimport axios from 'axios'\r\naxios.defaults.headers.get['Content-Type'] = 'application/x-www-form-urlencoded';\r\naxios.defaults.headers.get['X-Requested-With'] = 'XMLHttpRequest';\r\nvar token = Cookies.get('token');\r\n\r\n/**\r\n * 获取黑名单用户列表\r\nURL:http://domain/eryuzhisen-server/user/getBlackList\r\nMethod:GET\r\nrequest:\r\nparams:\r\n\"page\":\"1\",//页数,默认不传查询第一页\r\n\"pageSize\":\"10\",//每页数量 默认10\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"more\":\"0\",//是否还有更多 0 没有 1 还有更多,供没有页码的客户端使用\r\n\t\"list\":[\r\n\t\t{\r\n\t\t\t\"uid\":\"xxxx\",\r\n\t\t\t\"nick_name\":\"xxxxx\",//昵称\r\n\t\t\t\"avatar_url\":\"xxxxx\"//头像url\r\n\r\n\t\t}\r\n\t]\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getBlackList(option){\r\n\tvar url = baseUrl + 'user/getBlackList';\r\n\r\n\t// 没有登录态\r\n\tif (!token) {\r\n\t\treturn _rejectObj({\r\n\t\t\tret: -10,\r\n\t\t\tmsg: '未登录'\r\n\t\t});\r\n\t}\r\n\r\n\tdelete option._header;\r\n\treturn axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t    return _rejectObj(error);\r\n\t});\r\n}\r\n\r\n/**\r\n * 删除黑名单用户(header 中uid为操作用户)\r\nURL:http://domain/eryuzhisen-server/user/delBlack/{userId}\r\nMethod:DELETE\r\nuserId:\"xxxx\"//被拉进黑名单的用户\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\"\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction delBlack(option){\r\n\tvar url = baseUrl + 'user/delBlack/'+option.userId;\r\n\r\n\t// 没有登录态\r\n\tif (!token) {\r\n\t\treturn _rejectObj({\r\n\t\t\tret: -10,\r\n\t\t\tmsg: '未登录'\r\n\t\t});\r\n\t}\r\n\r\n\tdelete option._header;\r\n\treturn axios({\r\n\t\tmethod: 'DELETE',\r\n\t\turl: url,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t    return _rejectObj(error);\r\n\t});\r\n}\r\n\r\n/**\r\n * 添加黑名单用户(header 中uid为操作用户)\r\nURL:http://domain/eryuzhisen-server/user/addBlack/{userId}\r\nMethod:PUT\r\nuserId:\"xxxx\"//被拉进黑名单的用户\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\"\r\n}\r\n * @param {[type]} option [description]\r\n */\r\nfunction addBlack(option){\r\n\tvar url = baseUrl + 'user/addBlack/'+option.userId;\r\n\r\n\t// 没有登录态\r\n\tif (!token) {\r\n\t\treturn _rejectObj({\r\n\t\t\tret: -10,\r\n\t\t\tmsg: '未登录'\r\n\t\t});\r\n\t}\r\n\r\n\tdelete option._header;\r\n\treturn axios({\r\n\t\tmethod: 'PUT',\r\n\t\turl: url,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t    return _rejectObj(error);\r\n\t});\r\n}\r\n\r\n/**\r\n * 关注用户\r\nURL:http://domain/eryuzhisen-server/user/addFollow/{userId}\r\nMethod:PUT\r\nuserId:\"xxxx\"\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\"\r\n}\r\n * @param {[type]} option [description]\r\n */\r\nfunction addFollow(option){\r\n\tvar url = baseUrl + 'user/addFollow/'+option.userId;\r\n\r\n\t// 没有登录态\r\n\tif (!token) {\r\n\t\treturn _rejectObj({\r\n\t\t\tret: -10,\r\n\t\t\tmsg: '未登录'\r\n\t\t});\r\n\t}\r\n\r\n\tdelete option._header;\r\n\treturn axios({\r\n\t\tmethod: 'PUT',\r\n\t\turl: url,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t    return _rejectObj(error);\r\n\t});\r\n}\r\n\r\n/**\r\n * 取消关注\r\nURL:http://domain/eryuzhisen-server/user/delFollow/{userId}\r\nMethod:DELETE\r\nuserId:\"xxxx\"\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\"\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction delFollow(option){\r\n\tvar url = baseUrl + 'user/delFollow/'+option.userId;\r\n\r\n\t// 没有登录态\r\n\tif (!token) {\r\n\t\treturn _rejectObj({\r\n\t\t\tret: -10,\r\n\t\t\tmsg: '未登录'\r\n\t\t});\r\n\t}\r\n\r\n\tdelete option._header;\r\n\treturn axios({\r\n\t\tmethod: 'DELETE',\r\n\t\turl: url,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t    return _rejectObj(error);\r\n\t});\r\n}\r\n\r\n/**\r\n * 根据作者名称模糊查询用户列表\r\nURL:http://domain/eryuzhisen-server/user/getUserList\r\nMethod:GET\r\n\r\nrequest:\r\nparams:\r\n\"query\":\"xxxx\"//模糊查询文字\r\n\"page\":\"1\",//页数,默认不传查询第一页\r\n\"pageSize\":\"10\",//每页数量 默认10\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"more\":\"0\",//是否还有更多 0 没有 1 还有更多,供没有页码的客户端使用\r\n\t\"list\":[\r\n\t\t{\r\n\t\t\t\"uid\":\"xxxx\",\r\n\t\t\t\"nick_name\":\"xxxxx\",//昵称\r\n\t\t\t\"avatar_url\":\"xxxxx\",//头像url\r\n\t\t\t\"signature\":\"xxxxx\",//签名\r\n\t\t\t\"c_age\":\"xxx\",//论坛年龄\r\n\t\t\t\"relation\":\"0\"//关系 0 没有关注 1 关注 2 粉丝 3 相互关注\r\n\r\n\t\t},\r\n\t....\r\n\t]\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getUserList(option){\r\n\tvar url = baseUrl + 'user/getUserList'; \r\n\r\n\tvar prosime = axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 获取关注用户列表\r\nURL:http://domain/eryuzhisen-server/user/getFollowList\r\nMethod:GET\r\nrequest:\r\nparams:\r\n\"userId\":\"xxxx\",//获取指定用户关注,header 中uid 等于此处时,允许取消关注\r\n\"page\":\"1\",//页数,默认不传查询第一页\r\n\"pageSize\":\"10\",//每页数量 默认10\r\n\"pagination\":1,//1表示返回页码相关信息 0 或者 不传 则不返回\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"more\":\"0\",//是否还有更多 0 没有 1 还有更多,供没有页码的客户端使用\r\n\t\"page_info\":{//pagination为1 才有\r\n\t\t\t\"total_count\":\"300\",//总数量\r\n\t\t\t\"page_count\":\"30\"//总页数\t\r\n\t\t},\r\n\t\"list\":[\r\n\t\t{\r\n\t\t\t\"uid\":\"xxxx\",\r\n\t\t\t\"nick_name\":\"xxxxx\",//昵称\r\n\t\t\t\"avatar_url\":\"xxxxx\",//头像url\r\n\t\t\t\"signature\":\"xxxxx\",//签名\r\n\t\t\t\"c_age\":\"xxx\",//论坛年龄\r\n\t\t\t\"relation\":\"0\"//关系 0 没有关注 1 关注 2 粉丝 3 相互关注\r\n\r\n\t\t},\r\n\t\t.....\r\n\t]\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getFollowList(option){\r\n\tvar url = baseUrl + 'user/getFollowList'; \r\n\r\n\t// 没有登录态\r\n\t/*if (!token) {\r\n\t\treturn _rejectObj({\r\n\t\t\tret: -10,\r\n\t\t\tmsg: '未登录'\r\n\t\t});\r\n\t}*/\r\n\r\n\tvar prosime = axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 获取粉丝用户列表\r\nURL:http://domain/eryuzhisen-server/user/getFansList\r\nMethod:GET\r\nrequest:\r\nparams:\r\n\"userId\":\"xxxx\",//获取指定用户粉丝\r\n\"page\":\"1\",//页数,默认不传查询第一页\r\n\"pageSize\":\"10\",//每页数量 默认10\r\n\"pagination\":1,//1表示返回页码相关信息 0 或者 不传 则不返回\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"more\":\"0\",//是否还有更多 0 没有 1 还有更多,供没有页码的客户端使用\r\n\t\"page_info\":{//pagination为1 才有\r\n\t\t\t\"total_count\":\"300\",//总数量\r\n\t\t\t\"page_count\":\"30\"//总页数\t\r\n\t\t},\r\n\t\"list\":[\r\n\t\t{\r\n\t\t\t\"uid\":\"xxxx\",\r\n\t\t\t\"nick_name\":\"xxxxx\",//昵称\r\n\t\t\t\"avatar_url\":\"xxxxx\",//头像url\r\n\t\t\t\"signature\":\"xxxxx\",//签名\r\n\t\t\t\"c_age\":\"xxx\",//论坛年龄\r\n\t\t\t\"relation\":\"0\"//关系 0 没有关注 1 关注 2 粉丝 3 相互关注\r\n\r\n\t\t},\r\n\t\t.....\r\n\t]\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getFansList(option){\r\n\tvar url = baseUrl + 'user/getFansList'; \r\n\r\n\t// 没有登录态\r\n\t/*if (!token) {\r\n\t\treturn _rejectObj({\r\n\t\t\tret: -10,\r\n\t\t\tmsg: '未登录'\r\n\t\t});\r\n\t}*/\r\n\r\n\tvar prosime = axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 获取推荐用户列表（根据作品数，粉丝数排序 前pageSize条数据）\r\nURL:http://domain/eryuzhisen-server/user/getRecommendUserList\r\nMethod:GET\r\n\r\nrequest:\r\nparams:\r\n\"pageSize\":\"10\",//获取的推荐用户条数（目前分页以假分页处理，前端一次性获取）\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"more\":\"0\",\r\n\t\"list\":[\r\n\t\t{\r\n\t\t\t\"uid\":\"xxxx\",\r\n\t\t\t\"nick_name\":\"xxxxx\",//昵称\r\n\t\t\t\"avatar_url\":\"xxxxx\",//头像url\r\n\t\t\t\"signature\":\"xxxxx\",//签名\r\n\t\t\t\"c_age\":\"xxx\",//论坛年龄\r\n\t\t\t\"relation\":\"0\",//关系 0 没有关注 1 关注 2 粉丝 3 相互关注\r\n\t\t\t\"black\":\"0\",//是否在黑名单 0 不在 1 在\r\n\t\t\t\"opus_count\",\"20\",//作品数量\r\n\t\t\t\"fans_count\":\"30\"//粉丝数量\r\n\r\n\t\t},\r\n\t....\r\n\t]\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getRecommendUserList(option){\r\n\tvar url = baseUrl + 'user/getRecommendUserList';\r\n\r\n\tdelete option._header;\r\n\treturn axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t    return _rejectObj(error);\r\n\t});\r\n}\r\n\r\n/**\r\n * 根据标签获取活跃用户列表\r\nURL:http://domain/eryuzhisen-server/user/getActiveUserList\r\nMethod:GET\r\n\r\nrequest:\r\nparams:\r\n\"pageSize\":\"10\",//获取的推荐用户条数（目前分页以假分页处理，前端一次性获取）\r\n\"label\":\"xxx\",//必填 标签\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"more\":\"0\"，\r\n\t\"list\":[\r\n\t\t{\r\n\t\t\t\"uid\":\"xxxx\",\r\n\t\t\t\"nick_name\":\"xxxxx\",//昵称\r\n\t\t\t\"avatar_url\":\"xxxxx\",//头像url\r\n\t\t\t\"signature\":\"xxxxx\",//签名\r\n\t\t\t\"c_age\":\"xxx\",//论坛年龄\r\n\t\t\t\"relation\":\"0\",//关系 0 没有关注 1 关注 2 粉丝 3 相互关注\r\n\t\t\t\"black\":\"0\",//是否在黑名单 0 不在 1 在\r\n\t\t\t\"opus_count\",\"20\",//作品数量\r\n\t\t\t\"fans_count\":\"30\",//粉丝数量\r\n\t\t\t\"comment_count\":\"40\"//针对当前标签的评论数量\r\n\r\n\t\t},\r\n\t....\r\n\t]\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getActiveUserList(option){\r\n\tvar url = baseUrl + 'user/getActiveUserList';\r\n\r\n\tdelete option._header;\r\n\treturn axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t    return _rejectObj(error);\r\n\t});\r\n}\r\n\r\nfunction getInviteCode(option){\r\n\tvar url = baseUrl + 'user/getInviteCode';\r\n\r\n\t// 没有登录态\r\n\tif (!token) {\r\n\t\treturn _rejectObj({\r\n\t\t\tret: -10,\r\n\t\t\tmsg: '未登录'\r\n\t\t});\r\n\t}\r\n\r\n\tdelete option._header;\r\n\treturn axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t    return _rejectObj(error);\r\n\t});\r\n}\r\n\r\nexport {\r\n\tgetFansList,\r\n\tgetFollowList,\r\n\tgetBlackList,\r\n\tdelBlack,\r\n\taddBlack,\r\n\taddFollow,\r\n\tdelFollow,\r\n\tgetUserList,\r\n\tgetRecommendUserList,\r\n\tgetActiveUserList,\r\n\tgetInviteCode,\r\n\t_reject\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/data/auth.js","<!-- style样式代码 -->\n<style lang=\"less\">\n@import (reference) '../common/css/common';\n    @module: c-article-header;\n\n    .@{module} {\n        position: relative;\n        z-index: 2;\n        width: 100%;\n        height: 320px;\n        padding-top: 40px; \n        .user_background_1;\n        & &-wrap{\n            .default_width_960;\n            .default_mar_auto;\n        }\n    }\n    .@{module}_left {\n        position: relative;\n        float: left;\n        width: 150px;\n        height: 240px;\n        margin-right: 20px;\n        .default_backgroud_5;\n        & .left-img {\n            width: 100%;\n            height: 240px;\n            overflow: hidden;\n            & img {\n                width: 100%;\n                height: 100%;\n            }\n        }\n        & .left-tag {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 50px;\n            height: 50px;\n            &.z-man {\n                .skin_icon_article-4;\n            }\n            &.z-wen {\n                .skin_icon_article-3;\n            }\n        }\n    }\n    .@{module}_right {\n        position: relative;\n        float: left;\n        width: 790px;\n        height: 240px;\n        & .name {\n            overflow: hidden;\n            margin-bottom: 15px;\n            & .name-text {\n                float: left;\n                .default_color_1;\n                .default_font_size_6;\n                .default_font_bolder;\n                margin-right: 10px;\n            }\n            & .name-tag {\n                float: left;\n                width: 52px;\n                height: 30px;\n                line-height: 30px;\n                border-radius: 15px;\n                .default_font_size_2;\n                .default_color_6;\n                .default_backgroud_5;\n                .default_center;\n            }\n        }\n        & .btn {\n            height: 40px;\n            margin-bottom: 15px;\n            & .btn-item {\n                float: left;\n                height: 40px;\n                line-height: 40px;\n                margin-right: 10px;\n                .default_backgroud_5;\n                .default_border-r-4;\n                .default_center;\n                .default_color_1;\n                .default_font_size_2;\n                .default_pointer;\n                & a {\n                    display: inline-block;\n                    width: 100%;\n                    height: 100%;\n                    text-decoration: none;\n                    .default_color_1;\n                    .default_font_size_2;\n                }\n                & .cpm_sub_more {\n                    width: 150px;\n                }\n                &:hover {\n                    & .cpm_sub_more {\n                        display: block;\n                    }\n                }\n            }\n            & .btn-item:last-child {\n                margin-right: 0;\n            }\n            & .btn-mark {\n                width: 600px;\n                & span {\n                    display: block;\n                    width: 100%;\n                    height: 40px;\n                    line-height: 40px;\n                }\n            }\n            & .btn-share {\n                width: 100px;\n                position: relative;\n                .default_pointer;\n                .skin_icon_author-5;\n                &:hover {\n                    .skin_icon_author-5_on;\n                }\n            }\n            & .btn-more {\n                width: 40px;\n                position: relative;\n                .default_pointer;\n                .skin_icon_author-4;\n                &:hover {\n                    .skin_icon_author-4_on;\n                }\n            }\n        }\n        & .text {\n            & .text-intro {\n                margin-bottom: 10px;\n                line-height: 1.5rem;\n                .default_color_1;\n                .default_font_size_2;\n            }\n            & .text-tag p {\n                display: inline-block;\n                margin-right: 10px;\n                margin-bottom: 10px;\n                .default_color_1;\n                .default_font_size_2;\n            }\n            & .text-number {\n                overflow: hidden;\n                & .text-number-item {\n                    display: inline-block;\n                    height: 12px;\n                    & span {\n                        display: inline-block;\n                        width: 12px;\n                        height: 12px;\n                        margin-right: 4px;\n                        vertical-align: middle;\n                    }\n                    & strong {\n                        display: inline-block;\n                        .default_color_1;\n                        .default_font_size_1;\n                        vertical-align: middle;\n                    }\n                }\n                & .text-zan {\n                    margin-right: 15px;\n                    & span {\n                        .skin_icon_article-5;\n                    }\n                }\n                & .text-comment {\n                    & span {\n                        .skin_icon_article-6;   \n                    }\n                }\n            }\n            & .text-author {\n                position: absolute;\n                bottom: 0;\n                left: 0;\n                height: 20px;\n                overflow: hidden;\n            }\n            & .text-author__img {\n                float: left;\n                width: 20px;\n                height: 20px;\n                margin-right: 10px;\n                overflow: hidden;\n                .default_backgroud_4;\n                .default_border-r-50;\n            }\n            & .text-author__name {\n                float: left;\n                height: 20px;\n                line-height: 20px;\n                .default_color_1;\n                .default_font_size_1;\n            }\n        }\n    }\n</style>\n\n<!-- html代码 -->\n<template>\n<div class=\"c-article-header\">\n<div class=\"c-article-header-wrap\">\n    <div class=\"c-article-header_left\">\n        <div class=\"left-img\">\n            <img :src=\"catalog.catalog_cover_url\" />\n        </div>\n        <div \n            class=\"left-tag\"\n            :class=\"{'z-man': catalog.category_title == '漫画', 'z-wen': catalog.category_title == '文字'}\"\n        ></div>\n    </div>\n    <div class=\"c-article-header_right\">\n        <div class=\"name\">\n            <div class=\"name-text\">{{catalog.catalog_title}}</div>\n            <div class=\"name-tag\">{{level['level'+catalog.level]}}</div>\n        </div>\n        <div class=\"btn\">\n            <div class=\"btn-item btn-mark\" \n                :data-catalog_id=\"catalog.catalog_id\"\n            >\n                <span v-if=\"catalog.owner != 1\" @click=\"mark(catalog.catalog_id)\">{{ catalog.is_collected == 1 ? '取消收藏' : '加入收藏' }}</span>\n                <span v-else @click=\"updateCatalog\">修改目录信息</span>\n            </div>\n            <div class=\"btn-item btn-share\">\n                <div class=\"cpm_sub_more z-left\">\n                    <div class=\"item\">\n                        <div class=\"item-icon z-wx\"></div>\n                        <div class=\"item-text\">微信</div>\n                    </div>\n                    <div class=\"item\">\n                        <div class=\"item-icon z-peng\"></div>\n                        <div class=\"item-text\">朋友圈</div>\n                    </div>\n                    <div class=\"item\">\n                        <div class=\"item-icon z-wb\"></div>\n                        <div class=\"item-text\">微博</div>\n                    </div>\n                    <div class=\"item\">\n                        <div class=\"item-icon z-qq\"></div>\n                        <div class=\"item-text\">QQ 好友</div>\n                    </div>\n                    <div class=\"item\">\n                        <div class=\"item-icon z-kong\"></div>\n                        <div class=\"item-text\">QQ 空间</div>\n                    </div>\n                    <div class=\"item\">\n                        <div class=\"item-icon z-more\"></div>\n                        <div class=\"item-text\">更多</div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"btn-item btn-more\">\n                <div class=\"cpm_sub_more z-left\">\n                    <div class=\"item\" @click=\"addReport\">\n                        <div class=\"item-icon z-report\"></div>\n                        <div class=\"item-text\">举报</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"text\">\n            <div class=\"text-intro\">{{catalog.catalog_desc}}</div>\n            <div class=\"text-tag\">\n                <p v-for=\"item in catalog.labels\">{{item}}</p>\n            </div>\n            <div class=\"text-number\">\n                <div class=\"text-number-item text-zan\">\n                    <span></span>\n                    <strong>{{catalog.praise_count}}</strong>\n                </div>\n                <div class=\"text-number-item text-comment\">\n                    <span></span>\n                    <strong>{{catalog.comment_count}}</strong>\n                </div>\n            </div>\n            <div class=\"text-author\">\n                <div class=\"text-author__img\">\n                    <img :src=\"catalog.user && catalog.user.avatar_url || avatar\" />\n                </div>\n                <div class=\"text-author__name\">{{catalog.user && catalog.user.nick_name}}</div>\n            </div>\n        </div>\n    </div>\n</div>\n</div>\n</template>\n\n<script>\nimport {mapState} from 'vuex'\nimport avatar from '../common/images/img/avatar.png';\nexport default {\n    data () {\n        return  {\n            avatar: avatar,\n            level: {\n                level0: '普通',\n                level1: '首发',\n                level2: '独家'\n            },\n            catalog_id: ''\n        }\n    },\n    computed: mapState({\n        userInfo: state => state.user.info,\n        catalog: state => state.opus.catalog.info\n    }),\n    methods: {\n        updateCatalog (){\n            this.$eventHub.$emit('header_article_setShow', {\n                show: true,\n                catalog: this.catalog\n            });\n        },\n        getCatalogDetail (){\n            this.$store.dispatch('opus_getCatalogDetail', {\n                catalogId: this.catalog_id\n            }).then( res => {\n                // 缓存历史记录 - 缓存1年\n                var isHas = false;\n                var cache_history = this.$version.history;\n                var catalog_history = this.$cache.getStore(cache_history.key, cache_history.version) || [];\n                for (var i = 0, len = catalog_history.length; i < len; i++) {\n                    if (catalog_history[i].catalog_id == res.info.catalog_id) {\n                        isHas = true;\n                        break;\n                    }\n                }\n                !isHas && catalog_history.push(res.info);\n                this.$cache.setStore(cache_history.key, catalog_history, cache_history.version, cache_history.time);\n\n                // todo\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            })\n        },\n        delFavorites (catalogId){\n            this.$store.dispatch('opus_delFavorites', {\n                catalogId: catalogId\n            }).then( res => {\n                this.getCatalogDetail();\n\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            })\n        },\n        addFavorites (catalogId){\n            this.$store.dispatch('opus_addFavorites', {\n                catalogId: catalogId\n            }).then( res => {\n                this.getCatalogDetail();\n\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            })\n        },\n        mark (catalogId){\n            // 判断登陆\n            if (!this.userInfo.isLogin) {\n                return this.$store.dispatch('bubble_fail', {\n                    ret: -11,\n                    msg: '未登录，请登陆后操作'\n                });\n                return false;\n            }\n\n            if (this.catalog.is_collected == 1) {\n                this.delFavorites(catalogId);\n            } else {\n                this.addFavorites(catalogId);\n            }\n        },\n        // 举报\n        addReport (){\n            // 判断登陆\n            if (!this.userInfo.isLogin) {\n                return this.$store.dispatch('bubble_fail', {\n                    ret: -11,\n                    msg: '未登录，请登陆后操作'\n                });\n                return false;\n            }\n\n            this.$store.dispatch('bubble_showBubble', {\n                show: true,\n                type: 'report',\n                report: {\n                    content_id: this.catalog.catalog_id,\n                    content_type: 1\n                }\n            })\n        }\n    },\n    mounted () {\n        this.$eventHub.$on('updateCatalog_success', res => {\n            // 刷新目录\n            // this.getCatalogDetail();    \n        })\n\n        // 获取url参数\n        this.catalog_id = this.$url.getUrlParam('catalog_id');\n\n        // 获取文章目录详情\n        this.getCatalogDetail();\n    }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// article.header.vue?0468f537","<!-- style样式代码 -->\n<style lang=\"less\">\n@import (reference) '../common/css/common';\n    // ---------- begin 全局颜色配置 ------------\n    /* 编辑器边框颜色 */\n    @border-color: #ccc;\n    /* 菜单颜色、上边框颜色 */\n    @fore-color: #666;\n    /* 菜单选中状态的颜色 */\n    @selected-color: #1e88e5;\n    /* input focus 时的颜色 */\n    @focus-input-color: #1e88e5;\n    /* 按钮颜色 */\n    @button-color: #1e88e5;\n    /* tab selected 状态下的颜色 */\n    @selected-tab-color: #1e88e5;\n    // ---------- end 全局颜色配置 ------------\n    \n    // ---------- begin 编辑器 ------------\n    .wangEditor-container {\n        position: relative;\n        z-index: 1;\n        width: 100%;\n        .default_backgroud_2;\n        .clearfix:after {\n            content: '';\n            display: table;\n            clear: both;\n        }\n        .clearfix {\n            *zoom: 1;\n        }\n        // 显示p head 高度的 tip\n        .height-tip {\n            position: absolute;\n            width: 3px;\n            background-color: #ccc;\n            left: 0;\n            transition: top .2s;\n        }\n        // 设置 img table 的 toolbar\n        .txt-toolbar {\n            position: absolute;\n            background-color: #fff;\n            padding: 3px 5px;\n            border-top: 2px solid @fore-color;\n            box-shadow: 1px 3px 3px #999;\n\n            // for IE8\n            border-left: 1px\\9 solid\\9 #ccc\\9;\n            border-bottom: 1px\\9 solid\\9 #999\\9;\n            border-right: 1px\\9 solid\\9 #999\\9;\n\n            // 小三角\n            .tip-triangle {\n                display: block;\n                position: absolute;\n                width: 0;\n                height: 0;\n                border: 5px solid;\n                border-color: transparent transparent @fore-color transparent;\n                top: -12px;\n                left: 50%;\n                margin-left: -5px;\n            }\n\n            a {\n                color: @fore-color;\n                display: inline-block;\n                margin: 0 3px;\n                padding: 5px;\n                text-decoration: none;\n                border-radius: 3px;\n\n                &:hover {\n                    background-color: #f1f1f1;\n                }\n            }\n        }\n\n        & .wangEditor-txt{\n            width: 100%;\n            padding: 40px;\n            text-align: left;\n            & p {\n                line-height: 1.5em;\n                word-wrap: break-word;\n                word-break: break-all;\n                text-align: justify;\n                .default_color_2;\n                .default_font_size_3;\n            }\n            & blockquote {\n                display: block; \n                border-left: 8px solid #d0e5f2;\n                padding: 5px 10px;\n                margin: 10px 0; \n                line-height: 1.4; \n                font-size: 100%;\n                background-color: #f1f1f1;\n            }\n            & img {\n                width: auto;\n                max-width: 100%;\n                margin-bottom: 10px;\n            }\n        }\n        & textarea {\n            width: 100%;\n            padding: 30px;\n            margin-top: 0!important;\n            height: auto!important;\n            line-height: 1.5em;\n            .default_color_2;\n            .default_font_size_3;\n        }\n    }\n    .wangEditor-menu-container {\n        width: 100%;\n        height: 50px;\n        .default_backgroud_7;\n        // 菜单组\n        .menu-group {\n            float: left;\n        }\n        // 单个菜单容器\n        .menu-item {\n            float: left;\n            position: relative;\n            text-align: center;\n            width: 40px;\n            height: 50px;\n            line-height: 50px;\n            &:hover {\n                .default_backgroud_6;\n            }\n            // 菜单\n            & a {\n                display: block;\n                width: 100%;\n                height: 100%;\n                .default_font_size_2;\n                .default_color_2;\n                text-decoration: none;\n                &:hover {\n                    .default_color_1;\n                }\n                & i {\n                    display: block;\n                    width: 100%;\n                    height: 100%;\n                }\n            }\n            // 菜单选中状态\n            &.selected {\n                color: @selected-color;\n            }\n            // 激活状态\n            &.active {\n                background-color: #f1f1f1;\n            }\n            // 禁用状态\n            &.disable {\n                opacity: 0.5;\n                filter: Alpha(opacity=50);\n            }\n            & .wangeditor-menu-img-indent-left {\n                .skin_icon_edit-3;\n                &:hover {\n                    .skin_icon_edit-3_on;\n                }\n            }\n            & .wangeditor-menu-img-bold {\n                .skin_icon_edit-2;\n                &:hover {\n                    .skin_icon_edit-2_on;\n                }\n            }\n            & .wangeditor-menu-img-italic {\n                .skin_icon_edit-4;\n                &:hover {\n                    .skin_icon_edit-4_on;\n                }\n            }\n            & .wangeditor-menu-img-strikethrough {\n                .skin_icon_edit-5;\n                &:hover {\n                    .skin_icon_edit-5_on;\n                }\n            }\n            & .wangeditor-menu-img-picture {\n                .skin_icon_edit-6;\n                &:hover {\n                    .skin_icon_edit-6_on;\n                }\n            }\n            &.menu-item-scan {\n                .skin_icon_edit-7;\n                &:hover {\n                    .skin_icon_edit-7_on;\n                }\n            }\n            &.j-save-btn-update {\n                width: 80px;\n                &:hover {\n                    .default_backgroud_7;\n                    & a {\n                        cursor: default;\n                        .default_color_2;\n                    }\n                }\n            }\n        }\n        // tip提示\n        .menu-tip {\n            display: none;\n            box-sizing: content-box;\n\n            position: absolute;\n            top: -36px;\n            left: 50%;\n            height: 36px;\n    \n            width: 48px;\n            height: 30px;\n            line-height: 30px;\n            padding: 0 10px;\n            margin-left: 0!important;\n            text-align: center;\n            background-color: rgba(0, 0, 0, 0.8);\n            .default_color_2;\n            .default_font_size_2;\n            transform: translate(-50%, 0);\n\n            & .tip-triangle {\n                position: absolute;\n                top: 25px;\n                left: 50%;\n                display: inline-block;\n                border: 4px solid;\n                border-color: transparent rgba(0,0,0,0.8) rgba(0,0,0,0.8) transparent;\n                transform: translate(-50%, 0) rotate(45deg);\n            }\n        }\n        & .menu-tip-40 {\n            width: 40px;\n            margin-left: -20px;\n        }\n        & .menu-tip-50 {\n            width: 50px;\n            margin-left: -25px;\n        }\n    }\n    // ---------- end 编辑器 ------------\n\n    .c-edit {\n        min-height: 700px;\n        & .c-edit-content {\n            min-height: 650px;\n            overflow-y: auto;\n        }\n    }\n</style>\n\n<!-- html代码 -->\n<template>\n<div class=\"c-edit\">\n    <div class=\"c-edit-content\" id=\"edit\" @click=\"click\"></div>\n    <keep-alive v-if=\"edit_init\">\n    <UploadImg \n        type=\"2\" \n        select=\"edit_upload_image_select\"\n        container=\"edit_container\"\n        @uploadImg_uploaded=\"uploaded\" \n        @uploadImg_error=\"error\"\n    />\n    </keep-alive>\n</div>\n</template>\n\n<script>\nexport default {\n    name: 'edit',\n    data (){\n        return {\n            edit_init: false,\n            editor: null\n        }\n    },\n    props: ['content'],\n    methods: {\n        click (){\n            this.$emit('edit_click');\n        },\n        uploaded (filename){\n            var imgHtml = '<p><img style=\"max-width:100%;\" src=\"' + filename + '\"/></p>';\n            this.editor.command(null, 'insertHtml', imgHtml);\n        },\n        error (err){\n            if (err.code == -600) {\n                this.$store.dispatch('bubble_showBubble', {\n                    show: true,\n                    type: 'top',\n                    top: {\n                        status: 'z-warn',\n                        msg: '选择的文件太大了,可以根据应用情况，在upload.js 设置一下上传的最大大小'\n                    }\n                })\n            } else if (err.code == -601) {\n                this.$store.dispatch('bubble_showBubble', {\n                    show: true,\n                    type: 'top',\n                    top: {\n                        status: 'z-warn',\n                        msg: '选择的文件后缀不对,可以根据应用情况，在upload.js进行设置可允许的上传文件类型'\n                    }\n                })\n            } else if (err.code == -602) {\n                this.$store.dispatch('bubble_showBubble', {\n                    show: true,\n                    type: 'top',\n                    top: {\n                        status: 'z-warn',\n                        msg: '这个文件已经上传过一遍了'\n                    }\n                })\n            } else {\n                this.$store.dispatch('bubble_showBubble', {\n                    show: true,\n                    type: 'top',\n                    top: {\n                        status: 'z-warn',\n                        msg: err.response\n                    }\n                })\n            }\n        },\n        // 保存内容\n        update (){\n            var value = this.editor.$txt.html();\n            this.$emit('update', value);\n        },\n        // 发布内容\n        publish (){\n            var value = this.editor.$txt.html();\n            this.$emit('publish', value);\n        },\n        // 预览内容\n        scan (){\n            var value = this.editor.$txt.html();\n            this.$emit('scan', value);\n        }\n    },\n    watch: {\n        content (){\n            this.editor.$txt.html(this.content);\n        }\n    },\n    mounted (){\n        this.editor = new this.$edit('edit');\n        // 创建\n        this.editor.create();\n\n        // 初始化编辑器的内容\n        this.editor.$txt.html(this.content);\n\n        // 添加额外的菜单\n        var save = $('<div class=\"menu-item menu-item-save clearfix j-save-btn\"><a href=\"javascript:void(0);\">保存</a></div>');\n        var scan = $('<div class=\"menu-item menu-item-scan clearfix j-scan-btn\"><a href=\"javascript:void(0);\"></a></div>');\n        var publish = $('<div class=\"menu-item clearfix\"><a href=\"javascript:void(0);\">发布</a></div>');\n        var group = $('<div class=\"menu-group\"></div>').css('float', 'right');\n        group.append(save).append(scan).append(publish);\n        $('.wangEditor-menu-container').append(group);\n\n        save.on('click', res => {\n            this.update();\n        })\n\n        publish.on('click', res => {\n            this.publish();\n        })\n\n        scan.on('click', res => {\n            this.scan();\n        })\n\n        // 初始化编辑器成功\n        this.edit_init = true;\n        this.$emit('edit_init', this.editor);\n\n        $('.c-edit-content').height($(window).height()  - 120);\n        $(window).on('resize', function(){\n            $('.c-edit-content').height($(window).height() - 120);\n        })\n    }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// edit.vue?3a357c72","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-artice-list\"\n  }, [_c('div', {\n    staticClass: \"c-artice-list-wrap\"\n  }, [_vm._l((_vm.article.lists), function(data) {\n    return _c('div', {\n      staticClass: \"c-artice-item\"\n    }, [_c('div', {\n      staticClass: \"c-artice-item-wrap\",\n      attrs: {\n        \"data-catalog_id\": data.catalog_id\n      }\n    }, [_c('a', {\n      staticClass: \"c-artice-item-wrap-link\",\n      attrs: {\n        \"href\": './article.html?catalog_id=' + data.catalog_id\n      }\n    }, [_c('div', {\n      staticClass: \"item-left\"\n    }, [_c('div', {\n      staticClass: \"item-left__img\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": data.catalog_cover_url\n      }\n    })]), _vm._v(\" \"), _c('div', {\n      staticClass: \"item-left__text\"\n    }, [_vm._v(_vm._s(data.category_title))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"item-right\"\n    }, [_c('div', {\n      staticClass: \"item-right__titile\"\n    }, [_vm._v(_vm._s(data.catalog_title))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"item-right__content\"\n    }, [_vm._v(_vm._s(data.catalog_desc.length > 60 ? data.catalog_desc.substr(0, 60) + '...' : data.catalog_desc))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"item-right__tags\"\n    }, _vm._l((data.labels), function(label) {\n      return _c('a', {\n        class: {\n          'z-active': _vm.labelTag == label\n        },\n        attrs: {\n          \"href\": './page.html?labelTag=' + label\n        }\n      }, [_vm._v(_vm._s(label))])\n    })), _vm._v(\" \"), _c('div', {\n      staticClass: \"item-right__bottom\"\n    }, [(_vm.resType != 'author') ? _c('a', {\n      staticClass: \"item-right__btn\",\n      attrs: {\n        \"href\": 'author.work.html?user_id=' + data.user.uid\n      }\n    }, [_c('div', {\n      staticClass: \"item-right__img\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": data.user.avatar_url || _vm.avatar\n      }\n    })]), _vm._v(\" \"), _c('div', {\n      staticClass: \"item-right__name\"\n    }, [_vm._v(_vm._s(data.user.nick_name))])]) : _vm._e(), _vm._v(\" \"), (_vm.resType == 'history') ? _c('div', {\n      staticClass: \"item-right__btn item-right__unmark\",\n      on: {\n        \"click\": function($event) {\n          $event.preventDefault();\n          _vm.delHistory(data.catalog_id)\n        }\n      }\n    }, [_vm._v(\"删除记录\")]) : _vm._e(), _vm._v(\" \"), (_vm.resType == 'mark' && data.owner != 1 && data.is_collected == 1) ? _c('div', {\n      staticClass: \"item-right__btn item-right__unmark\",\n      on: {\n        \"click\": function($event) {\n          $event.preventDefault();\n          _vm.delFavorites($event)\n        }\n      }\n    }, [_vm._v(\"取消收藏\")]) : _vm._e(), _vm._v(\" \"), (_vm.resType == 'search' && data.owner != 1 && data.is_collected != 1) ? _c('div', {\n      staticClass: \"item-right__btn item-right__mark\"\n    }, [_vm._v(\"加入收藏\")]) : _vm._e(), _vm._v(\" \"), (_vm.resType == 'author' && data.owner == 1) ? _c('a', {\n      staticClass: \"item-right__btn item-right__add\",\n      attrs: {\n        \"href\": './article.edit.html?catalog_id=' + data.catalog_id + '&chapter_id=-1'\n      }\n    }, [_vm._v(\"添加章节\")]) : _vm._e(), _vm._v(\" \"), (_vm.resType == 'author' && data.owner == 1) ? _c('div', {\n      staticClass: \"item-right__btn item-right__del\",\n      on: {\n        \"click\": function($event) {\n          $event.stopPropagation();\n          $event.preventDefault();\n          _vm.remove(data.catalog_id)\n        }\n      }\n    }, [_vm._v(\"删除作品\")]) : _vm._e()])])])])])\n  }), _vm._v(\" \"), (_vm.article.count <= 0) ? _c('Empty') : _vm._e()], 2), _vm._v(\" \"), (_vm.loadType == 'more' && _vm.article.count != 0) ? _c('div', {\n    staticClass: \"list-more\"\n  }, [(_vm.article.more == 1 && !_vm.article.load) ? _c('div', {\n    staticClass: \"btn-more-before\"\n  }, [_vm._v(_vm._s(_vm.user.isLogin ? '加载更多' : '登录查看更多'))]) : (_vm.article.more == 1) ? _c('div', {\n    staticClass: \"btn-more-loading\"\n  }, [_c('em'), _c('span', [_vm._v(\"加载中...\")])]) : _c('div', {\n    staticClass: \"btn-more-end\"\n  }, [_c('em'), _c('span', [_vm._v(\"没有更多\")])])]) : _vm._e(), _vm._v(\" \"), (_vm.loadType != 'more') ? _c('Page', {\n    staticClass: \"list-pages\",\n    attrs: {\n      \"count\": _vm.article.count,\n      \"length\": _vm.pageSize,\n      \"index\": _vm.pageIndex\n    },\n    on: {\n      \"page_switch\": _vm.pageSwitch\n    }\n  }) : _vm._e()], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-b9159aca\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/component/article.list.vue\n// module id = nL7d\n// module chunks = 0","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-3e3efb01\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./page.fenye.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./page.fenye.vue\"),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/page.fenye.vue\n// module id = nTmf\n// module chunks = 0","import axios from 'axios'\r\nimport {baseUrl, _reject, _rejectObj} from '../config'\r\nimport Cookies from 'js-cookie';\r\nvar token = Cookies.get('token');\r\n\r\n/**\r\n * 获取首页banner\r\nULR:http://domain/eryuzhisen-server/getHomeBanner\r\nMethod:GET\r\nresponse:\r\nbody json:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现,详情请查看附录\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"list\":[\r\n\t\t{\r\n\t\t\"title\":\"xxxx\",//标题\r\n\t\t\"image_url\":\"http://xxxx\",//图片地址\r\n\t\t\"jumpui\":{\r\n\t\t\t\"page_id\":\"xx\",//跳转的页面id,后期协商\r\n\t\t\t\"arguments\":{\"\":\"\"},//跳转某个页面需要带的参数,后期协商\r\n\t\t\t}\r\n\t\t},\r\n\t....\r\n\t]\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getHomeBanner(option){\r\n\tvar url = baseUrl + 'getHomeBanner';\r\n\tvar prosime = axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option,\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 获取阿里OSS上传文件的签名及上传policy\r\nURL:http://domain/eryuzhisen-server/upload/getPolicyAndAccess\r\nMethod:GET\r\nrequest:\r\nparams:\r\n\"type\":\"1\"//上传类型  1 用户相关 2 作品相关\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"accessid\":\"xxxx\",//指的用户请求的accessid。注意仅知道accessid, 对数据不会有影响.\r\n\t\"policy\":\"xxxx\",//指的是用户表单上传的策略policy，是经过base64编码过的字符串\r\n\t\"signature\":\"xxxxx\",//是对上述变量policy签名后的字符串\r\n\t\"dir\":\"xxx\",//上传到那个目录\r\n\t\"host\":\"xxxx\",//指的是用户要往哪个域名发往上传请求.\r\n\t\"expire\":\"xxxx\"//指的是当前上传策略失效时间\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getPolicyAndAccess(option){\r\n\tvar url = baseUrl + 'upload/getPolicyAndAccess'; \r\n\r\n\t// 没有登录态\r\n\tif (!token) {\r\n\t\treturn _rejectObj({\r\n\t\t\tret: -10,\r\n\t\t\tmsg: '未登录'\r\n\t\t});\r\n\t}\r\n\t\r\n\tvar prosime = axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 添加用户反馈信息\r\nURL:http://domain/eryuzhisen-server/report/addFeedback\r\nMethod:POST\r\nrequest:\r\n{\r\n\t\"content\":\"xxxxxx\",//文本内容\r\n\t\"img_url\":\"http://xxxx\",//图片url\r\n}\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\"\r\n}\r\n */\r\nfunction addFeedback(option){\r\n\tvar url = baseUrl + 'report/addFeedback';\r\n\r\n\t// 没有登录态\r\n\tif (!token) {\r\n\t\treturn _rejectObj({\r\n\t\t\tret: -10,\r\n\t\t\tmsg: '未登录'\r\n\t\t});\r\n\t}\r\n\t\r\n\tvar prosime = axios({\r\n\t\tmethod: 'POST',\r\n\t\turl: url,\r\n\t\tdata: JSON.stringify(option),\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 举报\r\nURL:http://domain/eryuzhisen-server/report/addReport\r\nMethod:POST\r\nrequest:\r\n{\r\n\t\"report_reason\":\"xxxx\",//举报原因\r\n\t\"content_id\":\"1111\",//举报内容id\r\n\t\"content_type\":\"1\"举报内容类型 1 作品章节 2 评论 3 作者\r\n\t\"add_reason\":\"xxxxxxxx\"//附加信息\r\n}\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\"\r\n}\r\n * @param {[type]} option [description]\r\n */\r\nfunction addReport(option){\r\n\tvar url = baseUrl + 'report/addReport';\r\n\r\n\t// 没有登录态\r\n\tif (!token) {\r\n\t\treturn _rejectObj({\r\n\t\t\tret: -10,\r\n\t\t\tmsg: '未登录'\r\n\t\t});\r\n\t}\r\n\r\n\tvar prosime = axios({\r\n\t\tmethod: 'POST',\r\n\t\turl: url,\r\n\t\tdata: JSON.stringify(option),\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n            return _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\nexport {\r\n\tgetHomeBanner,\r\n\tgetPolicyAndAccess,\r\n\taddFeedback,\r\n\taddReport,\r\n\t_reject,\r\n\t_rejectObj\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/data/common.js","import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport bubble from './modules/bubble'\r\nimport user from './modules/user'\r\nimport auth from './modules/auth'\r\nimport opus from './modules/opus'\r\nimport common from './modules/common'\r\nimport message from './modules/message'\r\n\r\nVue.use(Vuex);\r\nvar store = new Vuex.Store({\r\n\tmodules: {\r\n\t\tbubble: bubble,\r\n\t\tuser: user,\r\n\t\tauth: auth,\r\n\t\topus: opus,\r\n\t\tcommon: common,\r\n\t\tmessage: message\r\n\t},\r\n\tstrict: true\r\n})\r\n\r\nexport default store;\n\n\n// WEBPACK FOOTER //\n// ./src/server/store.js","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-artice-hot\"\n  }, [_c('div', {\n    staticClass: \"c-artice-hot-wrap\"\n  }, [_c('div', {\n    staticClass: \"hot-top\"\n  }, [_c('div', {\n    staticClass: \"hot-top-right\"\n  }, [_c('div', {\n    staticClass: \"item item-number\"\n  }, [_vm._v(_vm._s(_vm.pageIndex) + \"/\" + _vm._s(_vm.hot_number))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item item-btn item-left\",\n    on: {\n      \"click\": function($event) {\n        _vm.hotSwitch('left')\n      }\n    }\n  }, [_c('span'), _vm._v(\" \"), _c('span')]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item item-btn item-right\",\n    on: {\n      \"click\": function($event) {\n        _vm.hotSwitch('right')\n      }\n    }\n  }, [_c('span'), _vm._v(\" \"), _c('span')])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"hot-list\",\n    style: ({\n      width: _vm.hot.lists.length * 150 + 10 + 'px',\n      transform: 'translate(-' + _vm.move + 'px, 0)'\n    })\n  }, _vm._l((_vm.hot.lists), function(item) {\n    return _c('div', {\n      staticClass: \"hot-list-item\"\n    }, [_c('a', {\n      attrs: {\n        \"href\": 'article.html?catalog_id=' + item.catalog_id\n      }\n    }, [_c('div', {\n      staticClass: \"hot-list__hd\"\n    }, [_c('div', {\n      staticClass: \"hot-list__hd-img\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": item.catalog_cover_url\n      }\n    })]), _vm._v(\" \"), _c('div', {\n      staticClass: \"hot-list__hd-text\"\n    }, [_vm._v(_vm._s(item.category_title))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"hot-list__bd\"\n    }, [_c('div', {\n      staticClass: \"hot-list__title\"\n    }, [_vm._v(_vm._s(item.catalog_title))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"hot-list__tag\"\n    }, _vm._l((item.labels), function(label) {\n      return _c('a', {\n        attrs: {\n          \"href\": './page.html?labelTag=' + label\n        }\n      }, [_vm._v(\"\\n                            \" + _vm._s(label) + \"\\n                        \")])\n    }))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"hot-list__ft\"\n    }, [_c('div', {\n      staticClass: \"hot-list__ft-img\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": item.user.avatar_url || _vm.avatar\n      }\n    })]), _vm._v(\" \"), _c('div', {\n      staticClass: \"hot-list__ft-name\"\n    }, [_vm._v(_vm._s(item.user.nick_name))])])])])\n  }))])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-b197ad40\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/component/article.hot.vue\n// module id = prCX\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-author-list\",\n    class: 'z-' + _vm.resType\n  }, [_c('div', {\n    staticClass: \"c-author-list-wrap\"\n  }, [_vm._l((_vm.lists), function(data) {\n    return _c('a', {\n      staticClass: \"list-author__item\",\n      attrs: {\n        \"href\": 'author.work.html?user_id=' + data.uid\n      }\n    }, [_c('div', {\n      staticClass: \"list-author__img\"\n    }, [_c('div', {\n      staticClass: \"list-author__avatar\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": data.avatar_url || _vm.avatar\n      }\n    })])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"list-author__content\"\n    }, [_c('div', {\n      staticClass: \"list-author__name\"\n    }, [_vm._v(_vm._s(data.nick_name))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"list-author__text\"\n    }, [_c('div', {\n      staticClass: \"list-author__work\"\n    }, [_vm._v(\"作品：\" + _vm._s(data.opus_count))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"list-author__fans\"\n    }, [_vm._v(\"粉丝：\" + _vm._s(data.fans_count))]), _vm._v(\" \"), (data.relation == 0) ? _c('div', {\n      staticClass: \"list-author__btn list-author__btn-1\",\n      on: {\n        \"click\": function($event) {\n          $event.stopPropagation();\n          $event.preventDefault();\n          _vm.addFollow(data.uid)\n        }\n      }\n    }, [_vm._v(\"关注\")]) : _vm._e(), _vm._v(\" \"), (data.relation == 1 || data.relation == 3) ? _c('div', {\n      staticClass: \"list-author__btn list-author__btn-2\",\n      on: {\n        \"click\": function($event) {\n          $event.stopPropagation();\n          $event.preventDefault();\n          _vm.delFollow(data.uid)\n        }\n      }\n    }, [_vm._v(\"已关注\")]) : _vm._e(), _vm._v(\" \"), (data.relation == 2) ? _c('div', {\n      staticClass: \"list-author__btn list-author__btn-3\",\n      on: {\n        \"click\": function($event) {\n          $event.stopPropagation();\n          $event.preventDefault();\n          _vm.addFollow(data.uid)\n        }\n      }\n    }, [_vm._v(\"相互关注\")]) : _vm._e(), _vm._v(\" \"), (data.black == 1) ? _c('div', {\n      staticClass: \"list-author__btn list-author__btn-3\",\n      on: {\n        \"click\": function($event) {\n          $event.stopPropagation();\n          $event.preventDefault();\n          _vm.delBlack(data.uid)\n        }\n      }\n    }, [_vm._v(\"取消拉黑\")]) : _vm._e()])])])\n  }), _vm._v(\" \"), (_vm.count <= 0) ? _c('Empty') : _vm._e()], 2), _vm._v(\" \"), _c('Page', {\n    attrs: {\n      \"count\": _vm.count,\n      \"length\": _vm.pageSize,\n      \"index\": _vm.pageIndex\n    },\n    on: {\n      \"page_switch\": _vm.pageSwitch\n    }\n  })], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-f9c8e9a8\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/component/author.list.vue\n// module id = r28Z\n// module chunks = 0","import {isdebug} from '../config'\r\n\r\nfunction _default(){\r\n\treturn {\r\n\t\ttype: '',\r\n\t\tshow: false,\r\n\t\ttop: {\r\n\t\t\tstatus: '',\r\n\t\t\tmsg: '',\r\n\t\t\ttimeClose: 2000\r\n\t\t},\r\n\t\tdialog: {\r\n\t\t\ttitle: {\r\n\t\t\t\ttext: '',\r\n\t\t\t\talign: ''\r\n\t\t\t},\r\n\t\t\tcontent: {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\ttext: '',\r\n\t\t\t\thtml: ''\r\n\t\t\t},\r\n\t\t\tbtn: {\r\n\t\t\t\tcancel: {\r\n\t\t\t\t\ttext: '取消',\r\n\t\t\t\t\tcallback: function(){}\r\n\t\t\t\t},\r\n\t\t\t\tcomfire: {\r\n\t\t\t\t\ttext: '确认',\r\n\t\t\t\t\tcallback: function(){}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\treport: {\r\n\t\t\ttype: 'adv',\r\n\t\t\tcontent: '',\r\n\t\t\tmap: {\r\n\t\t\t\t// adv: 1,\r\n\t\t\t\t// copy: 2,\r\n\t\t\t\t// other: 3\r\n\t\t\t\tadv: '广告或者垃圾细腻',\r\n\t\t\t\tcopy: '抄袭或未授权转载',\r\n\t\t\t\tother: '其他原因'\r\n\t\t\t}\r\n\t\t},\r\n\t\twarn: {\r\n\t\t\ttitle: '',\r\n\t\t\tcontent: '',\r\n\t\t\tcomfireFn: function(){}\r\n\t\t},\r\n\t\tcomplete: {\r\n            title: ''\r\n        },\r\n        methods: {\r\n\r\n        },\r\n        outlogin: false\r\n\t}\r\n}\r\n\r\nexport default {\r\n\tstate: _default(),\r\n\tmutations: {\r\n\t\tbubble_setState (state, payload){\r\n\t\t\tfor (var key in payload) {\r\n\t\t\t\tif (payload.hasOwnProperty(key)) {\r\n\t\t\t\t\tif (typeof payload[key] === 'object') {\r\n\t\t\t\t\t\tfor (var _key in payload[key]) {\r\n\t\t\t\t\t\t\tstate[key][_key] = payload[key][_key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstate[key] = payload[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tactions: {\r\n\t\tbubble_setState (context, payload){\r\n\t\t\tcontext.commit('bubble_setState', payload);\r\n\t\t},\r\n\t\tbubble_showBubble (context, payload){\r\n\t\t\tcontext.commit('bubble_setState', payload);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (context.state.type != 'top') {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tcontext.dispatch('bubble_closeBubble');\r\n\t\t\t}, context.state.top.timeClose)\r\n\t\t},\r\n\t\tbubble_closeBubble (context, payload){\r\n\t\t\tcontext.commit('bubble_setState', _default());\r\n\t\t},\r\n\r\n\t\t// 成功统一处理\r\n\t\tbubble_success (context, payload){\r\n\t\t\tisdebug && console.log('----success----', payload)\r\n\r\n\t\t\tif (payload.ret == 0 && payload.type == 'top') {\r\n\t\t\t\tcontext.commit('bubble_setState', {\r\n\t\t\t\t\ttype: 'top',\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t\ttop: {\r\n\t\t\t\t\t\tstatus: 'z-default',\r\n\t\t\t\t\t\tmsg: payload.msg\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else if (!!payload.ret && payload.ret != 0) {\t\t\t\t\r\n\t\t\t\tcontext.commit('bubble_setState', {\r\n\t\t\t\t\ttype: 'top',\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t\ttop: {\r\n\t\t\t\t\t\tstatus: 'z-warn',\r\n\t\t\t\t\t\tmsg: '系统异常'\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (context.state.type != 'top') {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tcontext.dispatch('bubble_closeBubble');\r\n\t\t\t}, context.state.top.timeClose)\r\n\t\t},\r\n\r\n\t\t// 错误统一处理\r\n\t\tbubble_fail (context, payload) {\r\n\t\t\tisdebug && console.log('---error----', payload)\r\n\r\n\t\t\t// 未登录\r\n\t\t\tif (payload.ret == -10) {\r\n\t\t\t\t// 清空登陆态cookie\r\n    \t\t\tcontext.commit('bubble_setState', {\r\n\t\t\t\t\toutlogin: true\r\n\t\t\t\t})\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// 未登录操作，跳转登陆\r\n\t\t\tif (payload.ret == -11) {\r\n\t\t\t\treturn window.location.href = './login.html?from='+encodeURIComponent(location.href);\r\n\t\t\t}\r\n\r\n\t\t\t// 数据加载中\r\n\t\t\tif (payload.ret == -21) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// 请求参数错误\r\n\t\t\tif (payload.ret == -20) {\r\n\t\t\t\tcontext.commit('bubble_setState', {\r\n\t\t\t\t\ttype: 'top',\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t\ttop: {\r\n\t\t\t\t\t\tstatus: 'z-warn',\r\n\t\t\t\t\t\tmsg: '参数错误，系统异常'\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// 后端错误提示\r\n\t\t\tif (payload.ret > 0) {\r\n\t\t\t\t// 获取用户token不通过\r\n\t\t\t\tif (payload.errcode == '30001') {\r\n\t\t\t\t\t// 清空登陆态cookie\r\n\t    \t\t\tcontext.commit('bubble_setState', {\r\n\t\t\t\t\t\toutlogin: true\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn false;\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar msg = payload.attach && payload.attach.popup ? payload.attach.popup.text : '系统异常';\r\n\t\t\t\tcontext.commit('bubble_setState', {\r\n\t\t\t\t\ttype: 'top',\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t\ttop: {\r\n\t\t\t\t\t\tstatus: 'z-warn',\r\n\t\t\t\t\t\tmsg: msg\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (context.state.type != 'top') {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tcontext.dispatch('bubble_closeBubble');\r\n\t\t\t}, context.state.top.timeClose)\r\n\t\t}\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/server/modules/bubble.js","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-author-hot\"\n  }, [_c('div', {\n    staticClass: \"list-author__title\"\n  }, [_c('div', {\n    staticClass: \"text\"\n  }, [_vm._v(\"推荐作者\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"list-author__page\"\n  }, [_c('div', {\n    staticClass: \"item item-number\"\n  }, [_vm._v(_vm._s(_vm.index) + \"/\" + _vm._s(_vm.count))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item item-btn item-left\",\n    on: {\n      \"click\": function($event) {\n        _vm.authorSwitch('left')\n      }\n    }\n  }, [_c('span'), _vm._v(\" \"), _c('span')]), _vm._v(\" \"), _c('div', {\n    staticClass: \"item item-btn item-right\",\n    on: {\n      \"click\": function($event) {\n        _vm.authorSwitch('right')\n      }\n    }\n  }, [_c('span'), _vm._v(\" \"), _c('span')])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"list-author__body\"\n  }, _vm._l((_vm.lists.slice((_vm.index - 1) * 5, (_vm.index - 1) * 5 + 5)), function(item) {\n    return _c('div', {\n      staticClass: \"list-author__item\"\n    }, [_c('div', {\n      staticClass: \"list-author__img\"\n    }, [_c('div', {\n      staticClass: \"list-author__avatar\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": item.avatar_url || _vm.avatar\n      }\n    })])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"list-author__content\"\n    }, [_c('a', {\n      attrs: {\n        \"href\": 'author.work.html?user_id=' + item.uid\n      }\n    }, [_c('div', {\n      staticClass: \"list-author__name\"\n    }, [_vm._v(_vm._s(item.nick_name))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"list-author__text\"\n    }, [_c('div', {\n      staticClass: \"list-author__work\"\n    }, [_vm._v(\"作品：\" + _vm._s(item.opus_count))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"list-author__fans\"\n    }, [_vm._v(\"粉丝：\" + _vm._s(item.fans_count))]), _vm._v(\" \"), (item.relation == 0) ? _c('div', {\n      staticClass: \"list-author__btn\",\n      on: {\n        \"click\": function($event) {\n          $event.stopPropagation();\n          _vm.addFollow(item.uid)\n        }\n      }\n    }, [_vm._v(\"关注\")]) : _vm._e(), _vm._v(\" \"), (item.relation == 1 || item.relation == 3) ? _c('div', {\n      staticClass: \"list-author__btn z-active\"\n    }, [_vm._v(\"已关注\")]) : _vm._e()])])])])\n  }))])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-2207faaf\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/component/author.hot.vue\n// module id = s/ku\n// module chunks = 0","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-4ccba44a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./sideMenu.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./sideMenu.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4ccba44a\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./sideMenu.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/sideMenu.vue\n// module id = t/6I\n// module chunks = 0","<style lang=\"less\">\n@import (reference) '../common/css/common';\n    @module: c-menu-left;\n    .@{module} {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 260px;\n        & .item {\n            position: relative;\n            width: 100%;\n            height: 50px;\n            overflow: hidden;\n            & a {\n                display: block;\n                width: 100%;\n                height: 100%;\n                padding-left: 20px;\n            }\n            & .item__icon {\n                float: left;\n                display: block;\n                width: 20px;\n                height: 50px;\n                margin-right: 12px;\n            }\n            & .item__title {\n                float: left;\n                display: block;\n                height: 50px;\n                line-height: 50px;\n                .default_font_size_2;\n                .default_color_1;\n                .default_pointer;\n                text-decoration: none;\n                &:hover {\n                    .default_color_1;\n                }\n            }\n            &.z-on {\n                .default_backgroud_6;\n            }\n            &:hover .item__title,\n            &.z-on .item__title {\n                .default_color_1;\n            }\n        }\n        &.z-left .item__title {\n            padding-left: 40px;\n            text-align: left;\n        }\n        &.z-tip .item__tip {\n            display: block;\n        }\n    }\n</style>\n<template>\n    <div class=\"c-menu-left\">\n        <div \n            class=\"item\" \n            v-for=\"item in data\"\n            :class=\"{'z-on': item.isActive}\"\n        ><a :href=\"item.url || 'javascript:void(0);'\">\n            <span class=\"item__icon\"></span>\n            <span class=\"item__title\">{{item.title}}{{item.number ? '·' + item.number : ''}}</span>\n        </a></div>\n    </div>\n</template>\n\n<script>\nexport default {\n    props: ['data'],\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// menu.left.vue?18cc3876","/**\r\n * url 1.0.0\r\n * @license MIT\r\n */\r\n(function(global, factory) {\r\n    typeof exports === 'object' && \r\n    typeof module !== 'undefined' ? \r\n        module.exports = factory() :\r\n        typeof define === 'function' && define.amd ? \r\n            define(factory) :\r\n            (global.url = factory());\r\n}(this, (function() {\r\n    'use strict';\r\n\r\n    var Vue;\r\n    function install(_Vue) {\r\n        if (Vue) {\r\n            console.error(\r\n                '[url] already installed. Vue.use(url) should be called only once.'\r\n            );\r\n            return\r\n        }\r\n        Vue = _Vue;\r\n        Vue.prototype.$url = new Url();\r\n    }\r\n\r\n    // 创建url实例\r\n    function Url (){}\r\n    // 创建url实例\r\n    Url.prototype = {\r\n        /**\r\n         * 设置hash\r\n         * @param name\r\n         */\r\n        setHash: function(name) {\r\n            setTimeout(function() {\r\n                location.hash = name;\r\n            }, 0);\r\n        },\r\n        /**\r\n         * 获取当前url中的hash值\r\n         * @param url\r\n         * @return String\r\n         */\r\n        getHash: function(url) {\r\n            var u = url || location.hash;\r\n            return u ? u.replace(/.*#/, \"\") : \"\";\r\n        },\r\n        /*\r\n         *   根据hash获取对应的模块名\r\n         */\r\n        getHashModelName: function() {\r\n            var hash = this.getHash();\r\n            return (hash ? hash.split(\"&\")[0].split(\"=\")[0] : []);\r\n        },\r\n        /*\r\n         *   从hash中获取action\r\n         */\r\n        getHashActionName: function() {\r\n            var hash = this.getHash();\r\n            if (hash == \"\") return \"\";\r\n            return (hash ? hash.split(\"&\") : [])[0].split(\"=\")[1];\r\n        },\r\n        /*\r\n         * 从hash中获取name对应的值\r\n         */\r\n        getHashParam: function(name) {\r\n            var result = this.getHash().match(new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\"));\r\n            return result != null ? result[2] : \"\";\r\n        },\r\n        /*\r\n         *   从URL中获取参数对应的值\r\n         */\r\n        getUrlParam: function(name, url) {\r\n            //参数：变量名，url为空则表从当前页面的url中取\r\n            var u = arguments[1] || window.location.search,\r\n                reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\"),\r\n                r = u.substr(u.indexOf(\"\\?\") + 1).match(reg);\r\n            return r != null ? r[2] : \"\";\r\n        },\r\n        /*\r\n         *   获取所有HASH的参数，剔除model.\r\n         */\r\n        getParams: function() {\r\n            var param = [],\r\n                hash = this.getHash();\r\n            paramArr = hash ? hash.split(\"&\") : [];\r\n            for (var i = 1, l = paramArr.length; i < l; i++) {\r\n                param.push(paramArr[i]);\r\n            }\r\n            return param;\r\n        },\r\n        decodeUrl: function(url) {\r\n            url = decodeURIComponent(url);\r\n            var urlObj = this.parseUrl(url),\r\n                decodedParam = [];\r\n            $.each(urlObj.params, function(key, value) {\r\n                value = decodeURIComponent(value);\r\n                decodedParam.push(key + \"=\" + value);\r\n            });\r\n            var urlPrefix = url.split(\"?\")[0];\r\n            return urlPrefix + \"?\" + decodedParam.join(\"&\");\r\n        },\r\n        parseUrl: function(url) {\r\n            var a = document.createElement('a');\r\n            a.href = url;\r\n            return {\r\n                source: url,\r\n                protocol: a.protocol.replace(':', ''),\r\n                host: a.hostname,\r\n                port: a.port,\r\n                query: a.search,\r\n                params: (function() {\r\n                    var ret = {},\r\n                        seg = a.search.replace(/^\\?/, '').split('&'),\r\n                        len = seg.length,\r\n                        i = 0,\r\n                        s;\r\n                    for (; i < len; i++) {\r\n                        if (!seg[i]) {\r\n                            continue;\r\n                        }\r\n                        s = seg[i].split('=');\r\n                        ret[s[0]] = s[1];\r\n                    }\r\n                    return ret;\r\n                })(),\r\n                file: (a.pathname.match(/([^\\/?#]+)$/i) || [, ''])[1],\r\n                hash: a.hash.replace('#', ''),\r\n                path: a.pathname.replace(/^([^\\/])/, '/$1'),\r\n                relative: (a.href.match(/tps?:\\/\\/[^\\/]+(.+)/) || [, ''])[1],\r\n                segments: a.pathname.replace(/^\\//, '').split('/')\r\n            };\r\n        },\r\n        replaceParam: function(param, value, url, forceReplace) {\r\n            url = url || location.href;\r\n            var reg = new RegExp(\"([\\\\?&]\" + param + \"=)[^&#]*\");\r\n            if (!url.match(reg)) {\r\n                return (url.indexOf(\"?\") == -1) ? (url + \"?\" + param + \"=\" + value) : (url + \"&\" + param + \"=\" + value);\r\n            }\r\n            if (forceReplace) {\r\n                return url.replace(reg, function($0, $1) {\r\n                    return $1 + value;\r\n                });\r\n            }\r\n            return url;\r\n        },\r\n        /**\r\n         * 批量替换url参数\r\n         * @param  {[type]} urlStr [description]\r\n         * @param  {[type]} param  [description]\r\n         * @return {[type]}        [description]\r\n         */\r\n        replaceParams: function(urlStr, param) {\r\n            var orginUrl = urlStr;\r\n            if (typeof param == 'string') {\r\n                var paramData = param.split('&');\r\n            } else if (typeof param == 'object' && !param.slice) {\r\n                var paramData = [];\r\n                for (var key in param) {\r\n                    paramData.push(key + '=' + param[key]);\r\n                }\r\n            }\r\n            for (var i = 0; i < paramData.length; i++) {\r\n                var keyVal = paramData[i].split('=');\r\n                orginUrl = this.replaceParam(keyVal[0], keyVal[1] || '', orginUrl, true);\r\n            }\r\n            return orginUrl;\r\n        },\r\n        getHashObj: function(v) {\r\n            var href = v || location.href;\r\n            var theRequest = {},\r\n                pound = '',\r\n                l = 0,\r\n                hash = this.getHash(),\r\n                paramArr = [];\r\n            if (hash) {\r\n                paramArr = hash.split(\"&\");\r\n                for (var i = 0, l = paramArr.length; i < l; i++) {\r\n                    theRequest[paramArr[i].split(\"=\")[0]] = unescape(paramArr[i].split(\"=\")[1]);\r\n                }\r\n            }\r\n            return theRequest;\r\n        },\r\n        getParamsObj: function(v) {\r\n            var v = v || location.href;\r\n            var theRequest = {},\r\n                hash = '',\r\n                params = '',\r\n                str = '',\r\n                paramArr = [];\r\n            if (v.indexOf(\"?\") != -1) {\r\n                str = v.substr(v.indexOf(\"?\") + 1);\r\n                if (str.indexOf('#') > -1) {\r\n                    hash = str.substr(str.indexOf('#'));\r\n                    params = str.substr(0, str.indexOf('#'));\r\n                } else {\r\n                    params = str;\r\n                }\r\n                paramArr = params.split(\"&\");\r\n                for (var i = 0; i < paramArr.length; i++) {\r\n                    theRequest[paramArr[i].split(\"=\")[0]] = unescape(paramArr[i].split(\"=\")[1]);\r\n                }\r\n                if (hash.length > 0) {\r\n                    //theRequest['#'] = hash;\r\n                }\r\n            }\r\n            return theRequest;\r\n        },\r\n        getUrlObj: function(v) {\r\n            var v = v || location.href;\r\n            return {\r\n                param: this.getParamsObj(v),\r\n                hash: this.getHashObj(v)\r\n            };\r\n        },\r\n        /**\r\n         * Build url from a object\r\n         * url.makeUrl({hash: {a: 1}: param: {b: 2}});\r\n         * url.makeUrl('www.baidu.com', {hash: {a: 1}: param: {b: 2}});\r\n         * url.makeUrl('www.baidu.com', {hash: {a: 1}: param: {b: 2}}, false);\r\n         * url.makeUrl('www.baidu.com', {a:1, b:2});\r\n         * \r\n         * @param  {string} [v]       default to window.location.href\r\n         * @param  {object} [params]  {hash: {a: 1}: param: {b: 2}}\r\n         * @param  {boolean} [keepOld] default to true, keep old params or not\r\n         * @return {string}  URL\r\n         */\r\n        makeUrl: function(v, params, keepOld) {\r\n                var paramStr = '',\r\n                    hashStr = '',\r\n                    k = null,\r\n                    obj = null,\r\n                    paramObj = null,\r\n                    hashObj = null;\r\n                (typeof(arguments[1]) === 'boolean') && (keepOld = arguments[1]);\r\n                (typeof(arguments[0]) === 'object') && (params = arguments[0]) && (v = location.href);\r\n                v = v || location.href;\r\n                obj = this.getUrlObj(v);\r\n                params = params || obj;\r\n                if (params.param || params.hash) {\r\n                    paramObj = params.param ? params.param : {};\r\n                    hashObj = params.hash ? params.hash : {};\r\n                } else {\r\n                    paramObj = params;\r\n                    hashObj = {};\r\n                }\r\n                (keepOld === undefined) && (keepOld = true);\r\n\r\n                if (keepOld) {\r\n                    for (k in paramObj)\r\n                        if (paramObj[k] === undefined)\r\n                            delete obj.param[k];\r\n                        else\r\n                            obj.param[k] = paramObj[k]\r\n                    for (k in hashObj)\r\n                        if (hashObj[k] === undefined)\r\n                            delete obj.hash[k];\r\n                        else\r\n                            obj.hash[k] = hashObj[k];\r\n\r\n                    paramObj = obj.param;\r\n                    hashObj = obj.hash;\r\n                }\r\n                for (k in paramObj) {\r\n                    paramStr += k + '=' + encodeURIComponent(paramObj[k]) + '&';\r\n                }\r\n                for (k in hashObj) {\r\n                    hashStr += k + '=' + encodeURIComponent(hashObj[k]) + '&';\r\n                }\r\n                (paramStr.length) && (paramStr = paramStr.substring(0, paramStr.length - 1));\r\n                (hashStr.length) && (hashStr = hashStr.substring(0, hashStr.length - 1));\r\n\r\n                v = v.replace(/\\?.*/i, '').replace(/\\#.*/i, '');\r\n                (paramStr) && (v += '?' + paramStr);\r\n                (hashStr) && (v += '#' + hashStr);\r\n                return v;\r\n            }\r\n            /**\r\n             * 添加url参数\r\n             * @author delanhuang\r\n             * @param string url 需要修改的url\r\n             * @param string param 参数名\r\n             * @param string value 参数值\r\n             * @examples\r\n             * var newUrl = addUrlParam('http://www.example.com?medebug=1#index=init', 'my', 1);\r\n             * //上面返回：http://www.example.com?medebug=1&my=1#index=init\r\n             */\r\n            ,\r\n        addUrlParam: function(url, param, value) {\r\n                var a = document.createElement('a'),\r\n                    regex = /(?:\\?|&amp;|&)+([^=]+)(?:=([^&]*))*/gi;\r\n                var match, str = [];\r\n                a.href = url;\r\n                while (match = regex.exec(a.search)) {\r\n                    if (encodeURIComponent(param) != match[1]) {\r\n                        str.push(match[1] + (match[2] ? \"=\" + match[2] : \"\"));\r\n                    }\r\n                }\r\n                str.push(encodeURIComponent(param) + (value ? \"=\" + encodeURIComponent(value) : \"\"));\r\n                a.search = str.join(\"&\");\r\n                return a.href;\r\n            }\r\n            /**\r\n             * 添加mdebug参数\r\n             */\r\n            ,\r\n        addDebugParam: function(url) {\r\n            var mdebug = module.exports.getUrlParam('mdebug');\r\n            if (mdebug) {\r\n                url = module.exports.addUrlParam(url, 'mdebug', mdebug);\r\n            }\r\n\r\n            return url;\r\n        }\r\n    };\r\n\r\n    var index = {\r\n        install: install,\r\n        version: '1.0.0'\r\n    };\r\n\r\n    return index;\r\n})));\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/vue.url.js\n// module id = whrU\n// module chunks = 0","<!-- style样式代码 -->\n<style lang=\"less\">\n@import (reference) '../common/css/common';\n    .c-author-hot {\n        width: 100%;\n        & .list-author__title {\n            width: 100%;\n            height: 60px;\n            padding-top: 40px;\n            margin-bottom: 20px;\n            // background-image: url('../common/images/img/bg-4.png');\n            // background-position: top center;\n            // background-repeat: no-repeat;\n            // background-size: cover;\n            & .text {\n                float: left;\n                .default_font_size_4;\n                .default_color_2;\n                .default_font_bolder;\n            }\n            & .list-author__page {\n                float: right;\n                height: 20px;\n                overflow: hidden;\n            }\n            & .item {\n                float: left;\n                height: 20px;\n                line-height: 20px;\n                .default_color_2;\n                .default_font_size_2;\n                .default_middle;\n            }\n            & .item-number {\n                margin-right: 8px;\n            }\n            & .item-btn {\n                position: relative;\n                width: 20px;\n                height: 20px;\n                .default_backgroud_2;\n                .default_border-r-4;\n                .default_pointer;\n                & span {\n                    position: absolute;\n                    display: block;\n                    width: 20px;\n                    height: 20px;\n                    transition: opacity @default_speed_1;\n                }\n            }\n            & .item-left {\n                margin-right: 5px;\n                & span:nth-child(1) {\n                    opacity: 1;\n                    .skin_icon_left-1;    \n                }\n                & span:nth-child(2) {\n                    opacity: 0;\n                    .skin_icon_left-1_on;    \n                }\n                &:hover span:nth-child(1) {\n                    opacity: 0;\n                }\n                &:hover span:nth-child(2) {\n                    opacity: 1;\n                }\n            }\n            & .item-right {\n                & span:nth-child(1) {\n                    opacity: 1;\n                    .skin_icon_right-1;    \n                }\n                & span:nth-child(2) {\n                    opacity: 0;\n                    .skin_icon_right-1_on;    \n                }\n                &:hover span:nth-child(1) {\n                    opacity: 0;\n                }\n                &:hover span:nth-child(2) {\n                    opacity: 1;\n                }\n            }\n        }\n        &.z-active .list-author__title {\n            background-image: url('../common/images/img/bg-6.png');\n        }\n        & .list-author__body {\n            width: 100%;\n            height: 350px;\n            .default_backgroud_2;\n            .default_border-r-4;\n            // overflow: hidden;\n            & .list-author__item {\n                display: table;\n                width: 260px;\n                height: 70px;\n                padding: 0 20px;\n                transition: box-shadow @default_speed_1;\n                .default_border-b-14;\n                &:hover {\n                    transform: translate(0, -1px);\n                    .default_border_shadow_4;\n                    .default_border-b-2;\n                }\n                & a {\n                    text-decoration: none;\n                }\n                &:first-child {\n                    .default_border-r-t-4;\n                }\n                &:last-child {\n                    .default_border-r-b-4;\n                    .default_border-n;\n                }\n                & .list-author__img {\n                    display: table-cell;\n                    vertical-align: middle;\n                    width: 30px;\n                }\n                & .list-author__avatar {\n                    width: 30px;\n                    height: 30px;\n                    overflow: hidden;\n                    .default_border-r-50;\n                    .default_backgroud_5;\n                }\n                & .list-author__content {\n                    display: table-cell;\n                    vertical-align: middle;\n                    width: 180px;\n                    padding-left: 10px;\n                }\n                & .list-author__name {\n                    margin-bottom: 6px;\n                    .default_color_1;\n                    .default_font_size_1;\n                    &:hover {\n                        .default_color_10;\n                    }\n                }\n                & .list-author__text {\n                    overflow: hidden;\n                    .default_font_size_1;\n                    .default_color_3;\n                }\n                & .list-author__work {\n                    float: left;\n                    margin-right: 10px;\n                }\n                & .list-author__fans {\n                    float: left;\n                }\n                & .list-author__btn {\n                    display: none;\n                    float: right;\n                    .default_color_2;\n                    &.z-active {\n                        .default_color_3;\n                    }\n                    .default_pointer;\n                }\n                &:hover {\n                    & .list-author__btn {\n                        display: block;\n                    }\n                }\n            }\n        }\n    }\n</style>\n\n<!-- html代码 -->\n<template>\n<div class=\"c-author-hot\">\n    <div class=\"list-author__title\">\n        <div class=\"text\">推荐作者</div>\n        <div class=\"list-author__page\">\n            <div class=\"item item-number\">{{index}}/{{count}}</div>\n                <div class=\"item item-btn item-left\" @click=\"authorSwitch('left')\">\n                    <span></span>\n                    <span></span>\n                </div>\n                <div class=\"item item-btn item-right\" @click=\"authorSwitch('right')\">\n                    <span></span>\n                    <span></span>\n                </div>\n        </div>\n    </div>\n    <div class=\"list-author__body\">\n        <div class=\"list-author__item\" v-for=\"item in lists.slice((index-1)*5, (index-1)*5+5)\">\n            <div class=\"list-author__img\">\n                <div class=\"list-author__avatar\">\n                    <img :src=\"item.avatar_url || avatar\" />\n                </div>\n            </div>\n            <div class=\"list-author__content\">\n            <a :href=\"'author.work.html?user_id=' + item.uid\">\n                <div class=\"list-author__name\">{{item.nick_name}}</div>\n                <div class=\"list-author__text\">\n                    <div class=\"list-author__work\">作品：{{item.opus_count}}</div>\n                    <div class=\"list-author__fans\">粉丝：{{item.fans_count}}</div>\n                    <div v-if=\"item.relation == 0\" class=\"list-author__btn\" @click.stop=\"addFollow(item.uid)\">关注</div>\n                    <div v-if=\"item.relation == 1 || item.relation == 3\" class=\"list-author__btn z-active\">已关注</div>\n                </div>\n            </a>\n            </div>\n        </div>\n    </div>\n</div>\n</template>\n\n<script>\nimport {mapState} from 'vuex'\nimport avatar from '../common/images/img/avatar.png';\nexport default {\n    data (){\n        return {\n            avatar: avatar,\n            index: 0\n        }\n    },\n    props: ['resType'],\n    computed: mapState({\n        lists: state => state.auth.lists,\n        count: state => Math.ceil(state.auth.count/5)\n    }),\n    methods: {\n        getActiveUserList (){\n            this.$store.dispatch('auth_getActiveUserList', {\n                \"label\": decodeURIComponent(this.labelTag), //必填 标签\n                \"pageSize\": \"30\",//获取的推荐用户条数（目前分页以假分页处理，前端一次性获取）\n            }).then( res => {\n                if (res.list.length > 0) {\n                    this.index = 1;\n                }\n\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            })\n        },\n        getRecommendUserList (){\n            this.$store.dispatch('auth_getRecommendUserList', {\n               \"pageSize\": \"30\",//获取的推荐用户条数（目前分页以假分页处理，前端一次性获取）\n            }).then( res => {\n                if (res.list.length > 0) {\n                    this.index = 1;\n                }\n\n                this.$store.dispatch('bubble_success', res);\n            }).catch( err => {\n                this.$store.dispatch('bubble_fail', err);\n            })\n        },\n        authorSwitch (type){\n            if (type == 'left' && this.index == 1) {\n                return false;\n            }\n            if (type == 'right' && this.index == this.count) {\n                return false;\n            }\n\n            if (type == 'left') {\n                this.index--;\n            } else {\n                this.index++;\n            }\n        },\n        addFollow (uid){\n            this.$store.dispatch('auth_addFollow', {\n                userId: uid\n            }).then( res => {\n                this.getRecommendUserList();\n\n                this.$store.dispatch('bubble_success', res);\n            }).catch(res => {\n                this.$store.dispatch('bubble_fail', err);\n            });\n        },\n    },  \n    mounted (){\n        this.labelTag = this.$url.getUrlParam('labelTag');\n\n        if (this.resType == 'active' && !this.labelTag) {\n            this.$store.dispatch('bubble_showBubble', {\n                show: true,\n                type: 'top',\n                top: {\n                    status: 'z-warn',\n                    msg: '系统繁忙'\n                }\n            })\n            return false;\n        }\n\n        if (this.resType == 'active') {\n            this.getActiveUserList();\n        } else {\n            this.getRecommendUserList();\n        }\n    }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// author.hot.vue?2e4f430a","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _common = require('../data/common');\n\nvar common = _interopRequireWildcard(_common);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _default() {\n\treturn {\n\t\tshow: false,\n\t\tbanner_images: [],\n\n\t\taccess: {}\n\t};\n}\n\nexports.default = {\n\tstate: _default(),\n\tmutations: {\n\t\tcommon_setBannerList: function common_setBannerList(state, payload) {\n\t\t\tstate.banner_images = payload.list;\n\t\t},\n\t\tcommon_switch: function common_switch(state, payload) {\n\t\t\tstate.show = payload;\n\t\t},\n\t\tcommon_access: function common_access(state, payload) {\n\t\t\tfor (var key in payload) {\n\t\t\t\tstate.access[key] = payload[key];\n\t\t\t}\n\t\t}\n\t},\n\tactions: {\n\t\tcommon_setBannerList: function common_setBannerList(context, payload) {\n\t\t\tcontext.commit('common_setBannerList', {\n\t\t\t\tlist: payload\n\t\t\t});\n\t\t\treturn _promise2.default.resolve(1);\n\t\t},\n\t\tcommon_getHomeBanner: function common_getHomeBanner(context, payload) {\n\t\t\tvar promise = common.getHomeBanner().then(function (res) {\n\t\t\t\tcontext.commit('common_setBannerList', {\n\t\t\t\t\tlist: res.list\n\t\t\t\t});\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(res);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\tcommon_getPolicyAndAccess: function common_getPolicyAndAccess(context, payload) {\n\t\t\tif (!payload.type) {\n\t\t\t\treturn _promise2.default.reject({\n\t\t\t\t\tret: -20,\n\t\t\t\t\tmsg: '请求参数错误'\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tvar promise = common.getPolicyAndAccess({\n\t\t\t\ttype: payload.type\n\t\t\t}).then(function (res) {\n\t\t\t\tvar option = {};\n\t\t\t\toption[payload.type] = res;\n\t\t\t\tcontext.commit('common_access', option);\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(res);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\t\tcommon_switch: function common_switch(context, payload) {\n\t\t\tcontext.commit('common_switch', payload);\n\t\t},\n\t\tcommon_addFeedback: function common_addFeedback(context, payload) {\n\t\t\tvar promise = common.addFeedback({\n\t\t\t\t\"content\": payload.content,\n\t\t\t\t\"img_url\": '',\n\t\t\t\t\"contact_info\": payload.contact_info }).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t},\n\t\tcommon_addReport: function common_addReport(context, payload) {\n\t\t\tvar promise = common.addReport({\n\t\t\t\t\"content_id\": payload.content_id,\n\t\t\t\t\"report_reason\": payload.report_reason,\n\t\t\t\t\"content_type\": payload.content_type,\n\t\t\t\t\"add_reason\": payload.add_reason\n\t\t\t}).then(function (res) {\n\t\t\t\treturn _promise2.default.resolve(res);\n\t\t\t}).catch(function (err) {\n\t\t\t\treturn _promise2.default.reject(err);\n\t\t\t});\n\t\t\treturn promise;\n\t\t}\n\t}\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/server/modules/common.js\n// module id = xbkL\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-artice-better\"\n  }, [_c('div', {\n    staticClass: \"c-artice-better-wrap\"\n  }, [_vm._l((_vm.lists), function(item) {\n    return _c('div', {\n      staticClass: \"c-artice-better-item\"\n    }, [_c('div', {\n      staticClass: \"c-artice-better_content\"\n    }, [_c('div', {\n      staticClass: \"content__title\"\n    }, [_vm._v(_vm._s(item.title))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"content__time\"\n    }, [_vm._v(_vm._s(item.time))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"content__img\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": item.img\n      }\n    })]), _vm._v(\" \"), _c('div', {\n      staticClass: \"content__text\"\n    }, [_vm._v(_vm._s(item.text))])]), _vm._v(\" \"), _vm._m(0, true)])\n  }), _vm._v(\" \"), (_vm.count <= 0) ? _c('Empty') : _vm._e()], 2), _vm._v(\" \"), _c('Page', {\n    attrs: {\n      \"count\": _vm.count,\n      \"length\": _vm.pageSize,\n      \"index\": _vm.pageIndex\n    },\n    on: {\n      \"page_switch\": _vm.pageSwitch\n    }\n  })], 1)\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"c-artice-better_bottom\"\n  }, [_c('a', {\n    staticClass: \"bottom__link\",\n    attrs: {\n      \"href\": \"#none\"\n    }\n  }, [_vm._v(\"阅读全文\")])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-f7339ca6\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/component/article.better.vue\n// module id = xyAH\n// module chunks = 0","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-400234f2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./article.comment.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./article.comment.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-400234f2\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./article.comment.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/component/article.comment.vue\n// module id = yStd\n// module chunks = 0","<!-- style样式代码 -->\n<style lang=\"less\">\n@import (reference) '../common/css/common';\n\t@bubble: c-bubble;\n\n\t.@{bubble}-mask {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tz-index: 20;\n\t\tposition: fixed;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\tbackground: rgba(0,0,0,0.5);\n\t}\n\t.@{bubble}-top {\n\t\tposition: fixed;\n\t\ttop: 20px;\n\t\tleft: 50%;\n\t\tz-index: 30;\n\t\twidth: 600px;\n\t\theight: 50px;\n\t\tline-height: 50px;\n\t\tmargin-left: -300px;\n\t\t.default_border-r-4;\n\t\t.default_font_size_2;\n\t\t.default_color_10;\n\t\t.default_center;\n\t\t.default_border_shadow_5;\n\t\t&.z-default {\n\t\t\t.default_backgroud_8;\n\t\t}\n\t\t&.z-warn {\n\t\t\t.default_backgroud_1;\n\t\t}\n\t}\n\t.@{bubble}-report {\n\t\tposition: fixed;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\tz-index: 30;\n\t\twidth: 300px;\n\t\ttransform: translate(-50%, -50%);\n\t\t& .report-title {\n\t\t\twidth: 100%;\n\t\t\theight: 50px;\n\t\t\tline-height: 50px;\n\t\t\tpadding-left: 30px;\n\t\t\t.default_font_size_2;\n\t\t\t.default_color_3;\n\t\t\t.default_backgroud_7;\n\t\t}\n\t\t& .report-content {\n\t\t\tpadding: 20px 30px 30px 30px;\n\t\t\t.default_backgroud_2;\n\t\t\t& .select-item {\n\t\t\t\theight: 20px;\n\t\t\t\tmargin-bottom: 15px;\n\t\t\t\t.default_pointer;\n\t\t\t\t& .select-item-radio {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\tfloat: left;\n\t\t\t\t\twidth: 20px;\n\t\t\t\t\theight: 20px;\n\t\t\t\t\tpadding: 2px;\n\t\t\t\t\tmargin-right: 10px;\n\t\t\t\t\tborder: 2px solid #919191;\n\t\t\t\t\t.default_border-r-50;\n\t\t\t\t\t& em {\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t.default_border-r-50;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t& .select-item-text {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\tfloat: left;\n\t\t\t\t\theight: 20px;\n\t\t\t\t\tline-height: 20px;\n\t\t\t\t\t.default_font_size_2;\n\t\t\t\t\t.default_color_2;\n\t\t\t\t}\n\t\t\t\t&.z-on .select-item-radio em {\n\t\t\t\t\t.default_backgroud_12;\n\t\t\t\t}\n\t\t\t}\n\t\t\t& .select-item:nth-child(3) {\n\t\t\t\tmargin-bottom: 20px;\n\t\t\t}\n\t\t\t& .textare-item {\n\t\t\t\twidth: 240px;\n\t\t\t\theight: 150px;\n\t\t\t\tpadding: 20px;\n\t\t\t\t.default_border-r-4;\n\t\t\t\t.default_backgroud_4;\n\t\t\t\t& textarea {\n\t\t\t\t\t.default_font_size_2;\n\t\t\t\t\t.default_color_4;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t& .report-bottom {\n\t\t\twidth: 100%;\n\t\t\theight: 50px;\n\t\t\tpadding: 10px 0;\n\t\t\toverflow: hidden;\n\t\t\t.default_backgroud_7;\n\t\t\t& .report-bottom-item {\n\t\t\t\tfloat: left;\n\t\t\t\twidth: 50%;\n\t\t\t\theight: 30px;\n\t\t\t\tline-height: 30px;\n\t\t\t\ttext-align: center;\n\t\t\t\t.default_color_2;\n\t\t\t\t.default_font_size_2;\n\t\t\t\t.default_pointer;\n\t\t\t\t&:hover {\n\t\t\t\t\t.default_color_1;\n\t\t\t\t}\n\t\t\t}\n\t\t\t& .report-bottom-cancel {\n\t\t\t\t.default_border-rr-2;\n\t\t\t}\n\t\t}\n\t}\n\t.@{bubble}-declaration {\n\t\tposition: fixed;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\tz-index: 30;\n\t\twidth: 720px;\n\t\theight: 540px;\n\t\tmargin: -270px 0 0 -360px;\n\t\t.default_backgroud_2;\n\t\t& .declaration-title {\n\t\t\twidth: 100%;\n\t\t\theight: 60px;\n\t\t\tline-height: 60px;\n\t\t\tpadding-left: 30px;\n\t\t\t.default_font_size_3;\n\t\t\t.default_color_3;\n\t\t\t.default_border-b-5;\n\t\t}\n\t\t& .declaration-content {\n\t\t\twidth: 100%;\n\t\t\theight: 400px;\n\t\t\tpadding: 40px 50px;\n\t\t\toverflow-y: auto;\n\t\t\t.default_backgroud_4;\n\t\t\t.default_font_size_3;\n\t\t\t.default_color_2;\n\t\t\t& h3 {\n\t\t\t\tmargin-bottom: 30px;\n\t\t\t\tline-height: 1.5rem;\n\t\t\t\t.default_font_size_3;\n\t\t\t\t.default_color_2;\n\t\t\t}\n\t\t\t& p {\n\t\t\t\tline-height: 1.5rem;\n\t\t\t}\n\t\t}\n\t\t& .declaration-bottom {\n\t\t\twidth: 100%;\n\t\t\theight: 80px;\n\t\t\tpadding-top: 20px;\n\t\t\t.default_border-t-5;\n\t\t\t.default_center;\n\t\t\t& .declaration-bottom-cancel {\n\t\t\t\tmargin-right: 60px;\n\t\t\t}\n\t\t}\n\t}\n\t.@{bubble}-warn {\n\t\tposition: fixed;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\tz-index: 30;\n\t\twidth: 300px;\n\t\ttransform: translate(-50%, -50%);\n\t\t.default_backgroud_2;\n\t\t.default_border-r-4;\n\t\t& .warn-title {\n\t\t\tpadding-top: 30px;\n\t\t\tmargin-bottom: 20px;\n\t\t\ttext-align: center;\n\t\t\t.default_color_7;\n\t\t\t.default_font_bolder;\n\t\t\t.default_font_size_4;\n\t\t}\n\t\t& .warn-content {\n\t\t\tpadding: 0 30px;\n\t\t\tline-height: 1.5rem;\n\t\t\tmargin-bottom: 30px;\n\t\t\t.default_color_2;\n\t\t\t.default_font_size_2;\n\t\t\t& p {\n\t\t\t\tline-height: 1.5rem;\n\t\t\t\tmargin-bottom: 20px;\n\t\t\t}\n\t\t \t& a {\n\t\t \t\tline-height: 1.5rem;\n\t\t\t\t.default_font_size_1;\n\t\t\t\t.default_color_3;\n\t\t\t\t&:hover {\n\t\t\t\t\t.default_color_1;\n\t\t\t\t}\n\t\t \t}\n\t\t}\n\t\t& .warn-bottom {\n\t\t\twidth: 100%;\n\t\t\theight: 50px;\n\t\t\tpadding: 10px 0;\n\t\t\toverflow: hidden;\n\t\t\t.default_backgroud_7;\n\t\t\t& .warn-bottom-item {\n\t\t\t\tfloat: left;\n\t\t\t\twidth: 50%;\n\t\t\t\theight: 30px;\n\t\t\t\tline-height: 30px;\n\t\t\t\ttext-align: center;\n\t\t\t\t.default_color_2;\n\t\t\t\t.default_font_size_2;\n\t\t\t\t.default_pointer;\n\t\t\t\t&:hover {\n\t\t\t\t\t.default_color_1;\n\t\t\t\t}\n\t\t\t}\n\t\t\t& .warn-bottom-cancel {\n\t\t\t\t.default_border-rr-2;\n\t\t\t}\n\t\t}\n\t}\n\t.@{bubble}-complete {\n\t\tposition: fixed;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\tz-index: 30;\n\t\twidth: 460px;\n\t\ttransform: translate(-50%, -50%);\n\t\t.default_backgroud_2;\n\t\t.default_border-r-4;\n\t\t& .complete-title {\n\t\t\tpadding-top: 30px;\n\t\t\tmargin-bottom: 15px;\n\t\t\ttext-align: center;\n\t\t\t.default_color_7;\n\t\t\t.default_font_size_6;\n\t\t}\n\t\t& .complete-content {\n\t\t\tpadding: 0 30px;\n\t\t\tline-height: 1.5rem;\n\t\t\tmargin-bottom: 30px;\n\t\t\t.default_color_2;\n\t\t\t.default_font_size_2;\n\t\t\t.default_center;\n\t\t\t& p {\n\t\t\t\tline-height: 1.5rem;\n\t\t\t\tmargin-bottom: 20px;\n\t\t\t\t&:last-child {\n\t\t\t\t\tmargin-bottom: 15px;\n\t\t\t\t}\n\t\t\t}\n\t\t \t& .complete-share {\n\t\t \t\twidth: 100%;\n\t\t \t\toverflow: hidden;\n\t\t \t\t.default_center;\n\t\t \t\t& .share-item {\n\t\t \t\t\tdisplay: inline-block;\n\t\t \t\t\twidth: 30px;\n\t\t \t\t\theight: 30px;\n\t\t \t\t\tmargin-right: 10px;\n\t\t \t\t\t.default_border-r-50;\n\t\t \t\t\t.default_middle;\n\t\t \t\t\t.default_backgroud_7;\n\t\t \t\t\t.default_pointer;\n\t\t \t\t\t&:last-child {\n\t\t \t\t\t\tmargin-right: 0;\n\t\t \t\t\t}\n\t\t \t\t}\n\t\t \t\t& .share-py {\n\t\t\t\t\t.skin_icon_complete-1;\n\t\t\t\t\t&:hover {\n\t\t\t\t\t\t.skin_icon_complete-1_on;\n\t\t\t\t\t}\n\t\t \t\t}\n\t\t \t\t& .share-line {\n\t\t\t\t\t.skin_icon_complete-2;\n\t\t\t\t\t&:hover {\n\t\t\t\t\t\t.skin_icon_complete-2_on;\n\t\t\t\t\t}\n\t\t \t\t}\n\t\t \t\t& .share-qq {\n\t\t\t\t\t.skin_icon_complete-3;\n\t\t\t\t\t&:hover {\n\t\t\t\t\t\t.skin_icon_complete-3_on;\n\t\t\t\t\t}\n\t\t \t\t}\n\t\t \t\t& .share-kong {\n\t\t\t\t\t.skin_icon_complete-4;\n\t\t\t\t\t&:hover {\n\t\t\t\t\t\t.skin_icon_complete-4_on;\n\t\t\t\t\t}\n\t\t \t\t}\n\t\t \t\t& .share-wb {\n\t\t\t\t\t.skin_icon_complete-5;\n\t\t\t\t\t&:hover {\n\t\t\t\t\t\t.skin_icon_complete-5_on;\n\t\t\t\t\t}\n\t\t \t\t}\n\t\t \t\t& .share-more {\n\t\t\t\t\t.skin_icon_complete-6;\n\t\t\t\t\t&:hover {\n\t\t\t\t\t\t.skin_icon_complete-6_on;\n\t\t\t\t\t}\n\t\t \t\t}\n\t\t \t}\n\t\t}\n\t\t& .complete-bottom {\n\t\t\twidth: 100%;\n\t\t\theight: 50px;\n\t\t\tpadding: 10px 0;\n\t\t\toverflow: hidden;\n\t\t\t.default_backgroud_7;\n\t\t\t& .complete-bottom-item {\n\t\t\t\tfloat: left;\n\t\t\t\twidth: 50%;\n\t\t\t\theight: 30px;\n\t\t\t\tline-height: 30px;\n\t\t\t\ttext-align: center;\n\t\t\t\t.default_color_2;\n\t\t\t\t.default_font_size_2;\n\t\t\t\t.default_pointer;\n\t\t\t\t&:hover {\n\t\t\t\t\t.default_color_1;\n\t\t\t\t}\n\t\t\t}\n\t\t\t& .complete-bottom-cancel {\n\t\t\t\t.default_border-rr-2;\n\t\t\t}\n\t\t}\n\t}\n</style>\n\n<!-- html代码 -->\n<template>\n<div id=\"bubble\" class=\"c-bubble\" :class=\"{cpm_hide: !data.show}\">\n\t<div class=\"c-bubble-mask\" @click=\"close\"></div>\n\t<!-- 服务请求提示 -->\n    <div v-if=\"data.type == 'top'\" class=\"c-bubble-top\" :class=\"data.top.status\">\n\n    \t{{data.top.msg}}\n    </div>\n\n    <!-- 举报 -->\n    <div v-if=\"data.type == 'report'\" class=\"c-bubble-report\">\n    \t<div class=\"report-title\">\n    \t\t选择举报类型\n    \t</div>\n    \t<div class=\"report-content\">\n    \t\t<div class=\"select-item z-on\" data-type=\"adv\" @click=\"radioSwitch\">\n    \t\t\t<span class=\"select-item-radio\"><em></em></span>\n    \t\t\t<span class=\"select-item-text\">广告或者垃圾信息</span>\n    \t\t</div>\n    \t\t<div class=\"select-item\" data-type=\"copy\" @click=\"radioSwitch\">\n    \t\t\t<span class=\"select-item-radio\"><em></em></span>\n    \t\t\t<span class=\"select-item-text\">抄袭或未授权转载</span>\n    \t\t</div>\n    \t\t<div class=\"select-item\" data-type=\"other\" @click=\"radioSwitch\">\n    \t\t\t<span class=\"select-item-radio\"><em></em></span>\n    \t\t\t<span class=\"select-item-text\">其他原因</span>\n    \t\t</div>\n    \t\t<div class=\"textare-item\">\n    \t\t\t<textarea placeholder=\"请输入举报原因\" v-model=\"content\"></textarea>\n    \t\t</div>\n    \t</div>\n    \t<div class=\"report-bottom\">\n    \t\t<div class=\"report-bottom-item report-bottom-cancel\" @click=\"close\">取消</div>\n    \t\t<div class=\"report-bottom-item report-bottom-comfire\" @click=\"addReport\">确认</div>\n    \t</div>\n    </div>\n\n    <!-- 声明 -->\n    <div v-if=\"data.type == 'declaration'\" class=\"c-bubble-declaration\">\n    \t<div class=\"declaration-title\">原创声明</div>\n    \t<div class=\"declaration-content\">\n    \t\t<h3>原创特指自己独立完成创作的作品。歪曲、篡改他人创作或者抄袭、剽窃他人创作而产生的作品，改编、翻译、注释、整理他人已有创作而产生的作品均不能说是原创。</h3>\n\t\t\t<p>如下情形不得对作品进行原创声明，一经发现将对作品永久收回原创声明功能使用权限，导致严重影响的还将对违规帐号予以一定期限内封号处理；</p>\n\t\t\t<p>1. 未取得合法授权发布的作品；</p>\n\t\t\t<p>2. 作品主要篇幅为诸如“法律、法规，国家机关的决议、决定、命令和其他具有立法、行政、司法性质的文件、时事新闻、历法、通用数表、通用表格和公式”等公共内容；</p>\n\t\t\t<p>3. 大篇幅引用他人内容或作品主要内容为他人作品，如书摘、文摘、报摘等；</p>\n\t\t\t<p>4. 营销性质的内容；</p>\n\t\t\t<p>5. 整合的内容；</p>\n\t\t\t<p>6. 对非独家代理的作品声明原创等；</p>\n\t\t\t<p>7. 色情低俗内容、暴力内容、等内容；</p>\n\t\t\t<p>8. 违反法律法规、政策及公序良俗、社会公德，违反《耳语作品规则》、《耳语版权声明》，或干扰耳语平台正常运营和侵犯其他用户或第三方合法权益内容的信息。</p>\n    \t</div>\n    \t<div class=\"declaration-bottom\">\n    \t\t<div class=\"declaration-bottom-cancel cpm_button_weak z-disline\">取消</div>\n    \t\t<div class=\"declaration-bottom-comfire cpm_button_default z-disline\">确认</div>\n    \t</div>\n    </div>\n\n    <!-- dialog提示 -->\n    <div v-if=\"data.type == 'warn'\" class=\"c-bubble-warn\">\n    \t<div class=\"warn-title\">{{data.warn.title}}</div>\n    \t<div v-if=\"data.warn.html\" class=\"warn-content\" v-html=\"data.warn.html\"></div>\n    \t<div v-else class=\"warn-content\">{{data.warn.content}}</div>\n    \t<div class=\"warn-bottom\">\n    \t\t<div class=\"warn-bottom-item warn-bottom-cancel\" @click=\"close\">取消</div>\n    \t\t<div class=\"warn-bottom-item warn-bottom-comfire\" @click=\"comfire\">确认</div>\n    \t</div>\n    </div>\n\n    <!-- 创作完成提示 -->\n    <div v-if=\"data.type == 'complete'\" class=\"c-bubble-complete\">\n    \t<div class=\"complete-title\">{{data.complete.title}}</div>\n    \t<div class=\"complete-content\">\n    \t\t<p>发布成功</p>\n    \t\t<p>我们审核后会推送至首页，但你可以先分享好友阅读</p>\n    \t\t<div class=\"complete-share\">\n    \t\t\t<div class=\"share-item share-py\"></div>\n    \t\t\t<div class=\"share-item share-line\"></div>\n    \t\t\t<div class=\"share-item share-qq\"></div>\n    \t\t\t<div class=\"share-item share-kong\"></div>\n    \t\t\t<div class=\"share-item share-wb\"></div>\n    \t\t\t<div class=\"share-item share-more\"></div>\n    \t\t</div>\n    \t</div>\n    \t<div class=\"complete-bottom\">\n    \t\t<div class=\"complete-bottom-item complete-bottom-cancel\" @click=\"close\">继续创作</div>\n    \t\t<div class=\"complete-bottom-item complete-bottom-comfire\" @click=\"comfireAll\">查看作品</div>\n    \t</div>\n    </div>\n</div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nexport default {\n\tdata (){\n\t\treturn {\n\t\t\tcontent: ''\n\t\t}\n\t},\n    computed: mapState({\n    \tdata: state => state.bubble\n    }),\n    methods: {\n    \tclose (){\n    \t\tthis.data.methods.cancel && this.data.methods.cancel();\n    \t\tthis.$store.dispatch('bubble_closeBubble');\n    \t},\n    \tradioSwitch (event){\n    \t\t$('.c-bubble-report .report-content .select-item').removeClass('z-on');\n    \t\t$(event.currentTarget).addClass('z-on');\n    \t\tthis.$store.dispatch('bubble_setState', {\n    \t\t\treport: {\n    \t\t\t\ttype: event.currentTarget.dataset['type']\n    \t\t\t}\n    \t\t})\n    \t},\n    \taddReport (){\n    \t\tthis.$store.dispatch('bubble_setState', {\n    \t\t\treport: {\n    \t\t\t\tcontent: this.content\n    \t\t\t}\n    \t\t}).then( res => {\n    \t\t\t// this.data.report.map[this.data.report.type]\n    \t\t\treturn this.$store.dispatch('common_addReport', {\n    \t\t\t\t\"content_id\": this.data.report.content_id, //举报内容id\n\t\t\t\t\t\"report_reason\": this.data.report.map[this.data.report.type], //举报原因\n\t\t\t\t\t\"content_type\": this.data.report.content_type, //举报内容类型 1 作品章节 2 评论 3 作者，\n\t\t\t\t\t\"add_reason\": this.data.report.content, //附加信息 \n    \t\t\t}).then( res => {\n    \t\t\t\tthis.$store.dispatch('bubble_showBubble', {\n\t\t                show: false\n\t\t            })\n\t\t            this.$store.dispatch('bubble_success', res);\n    \t\t\t});\n    \t\t}).catch( err => {\n    \t\t\tthis.$store.dispatch('bubble_fail', err);\n    \t\t})\n    \t},\n    \tcomfire (){\n    \t\tthis.data.warn.comfireFn();\n    \t\tthis.$store.dispatch('bubble_setState', {\n    \t\t\tshow: false\n    \t\t})\n    \t},\n    \tcomfireAll (){\n    \t\tthis.data.methods.comfire();\n    \t\tthis.$store.dispatch('bubble_setState', {\n    \t\t\tshow: false\n    \t\t})\n    \t}\n    },\n    mounted (){\n    \tthis.$watch('data.outlogin', newVal => {\n    \t\tif (newVal) {\n\t\t\t\tconsole.log('-----error-----no login, clear user info');\n\t\t\t\tthis.$cache.removeStore(this.$version.userInfo.key);\n    \t\t\tthis.$store.dispatch('user_ourlogin');\n    \t\t}\n    \t})\n    }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// bubble.vue?6e26e4ee","import {baseUrl, _reject, _rejectObj} from '../config'\r\nimport Cookies from 'js-cookie';\r\n// 设置基本的请求headers\r\nimport axios from 'axios'\r\nvar token = Cookies.get('token');\r\naxios.defaults.headers.get['Content-Type'] = 'application/x-www-form-urlencoded';\r\naxios.defaults.headers.get['X-Requested-With'] = 'XMLHttpRequest';\r\n\r\n/**\r\n * 获取图形验证码\r\nURL:http://domain/eryuzhisen-server/auth/getPicVerifyCode\r\nMethod:GET\r\nresponse:\r\nbody json:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"pic_vid\":\"xxxxx\",//图形验证码id\r\n\t\"pic_vcode\":\"xxxx\"//图形验证码图片 base64编码\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getPicVerifyCode(option){\r\n\tvar url = baseUrl + 'auth/getPicVerifyCode';\r\n\tvar prosime = axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n\t\t\treturn _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n\r\n\treturn prosime;\r\n}\r\n\r\n/**\r\n * 获取手机号验证码\r\nURL:http://domain/eryuzhisen-server/auth/getPhoneVerifyCode\r\nMethod:GET\r\nrequest:\r\nparams:\r\nverifyType:\"0\"//0注册验证，1重置密码验证\r\nphoneNum:\"177xxxxx\"//手机号\r\npicVcode:\"xxxx\"//图形验证码\r\npicVid:\"xxxx\"图形验证码id\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"phone_num\":\"177xxxxx\"\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getPhoneVerifyCode(option){\r\n\tvar url = baseUrl + 'auth/getPhoneVerifyCode';\r\n\treturn axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option,\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n\t\t\treturn _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t    return _rejectObj(error);\r\n\t});\r\n}\r\n\r\n/**\r\n * http://domain/eryuzhisen-server/auth/sigin\r\nMethod:POST\r\nrequest:\r\nbody json:\r\n{\r\n\t\"phone_num\":\"xxxxx\",//手机号\r\n\t\"password\":\"xxxx\",//密码\r\n\t\"device_no\":\"xxx\",//设备号,没有则新生成一个,统计用\r\n\t\"pic_vid\":\"xxxx\",//密码错误次数超过5次时,需要单独调用图形验证码\r\n\t\"pic_vcode\":\"xxxx\",//密码错误5超过5次,需要校验图形验证码\r\n}\r\n\r\nresponse:\r\nbody json:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"uid\":\"xxxx\"//用户id,已做加密处理\r\n\t\"token\":\"xxxx\",//目前有效期7天 后期协议需要在header中带上校验\r\n\t\"device_no\":\"xxxx\",//设备号,request传入原样返回,没有则新生成\r\n\t\"info_status\":\"1\"//用户资料完整度状态 1:已完善 预留字段,目前没有强制用户输入某些信息\r\n\t\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction sigin(option){\r\n\tvar url = baseUrl + 'auth/sigin';\r\n\tvar _header = option._header || {};\r\n\tdelete option._header;\r\n\treturn axios({\r\n\t\tmethod: 'POST',\r\n\t\turl: url,\r\n\t\tdata: JSON.stringify(option),\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n\t\t\treturn _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t\treturn _rejectObj(error);\r\n\t});\r\n}\r\n\r\n/**\r\n * 注册\r\nURL:http://domain/eryuzhisen-server/auth/sigup\r\nMethod:POST\r\nrequest:\r\nbody json:\r\n{\r\n\t\"phone_num\":\"xxxxx\",//手机号\r\n\t\"password\":\"xxxx\",//密码,目前只有长度限制:6-12位\r\n\t\"device_no\":\"xxx\",//设备号,没有则新生成一个,统计用\r\n\t\"pic_vid\":\"xxxx\",//图形验证码id\r\n\t\"pic_vcode\":\"xxxx\",//校验图形验证码\r\n\t\"phone_vcode\":\"xxxx\",//手机号验证码\r\n}\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"uid\":\"xxxx\"//用户id,已做加密处理\r\n\t\"token\":\"xxxx\",//目前有效期7天 后期协议需要在header中带上校验\r\n\t\"device_no\":\"xxxx\",//设备号,request传入原样返回,没有则新生成\r\n\t\"user\":{\r\n\t\t\"uid\":\"xxxx\",\r\n\t\t\"nick_name\":\"xxxx\",//昵称\r\n\t\t\"avatar_url\":\"xxxx\",//头像url\r\n\t\t\"signature\":\"xxx\",//签名,\r\n\t\t\"c_age\":\"1年5个月12天\",//论坛年龄\r\n\t}\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction sigup(option){\r\n\tvar url = baseUrl + 'auth/sigup';\r\n\tvar _header = option._header || {};\r\n\tdelete option._header;\r\n\r\n\treturn axios({\r\n\t\tmethod: 'POST',\r\n\t\turl: url,\r\n\t\tdata: JSON.stringify(option),\r\n\t\theaders: _header\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n\t\t\treturn _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t    return _rejectObj(error);\r\n\t});\r\n}\r\n\r\n/**\r\n * http://domain/eryuzhisen-server/auth/resetPwd\r\nMethod:POST\r\nrequest:\r\n{\r\n\t\"phone_num\":\"xxxx\",\r\n\t\"phone_vcode\":\"xxx\",//手机号验证码\r\n\t\"password\":\"xxxx\",//新密码\r\n}\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\"\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction resetPwd(option){\r\n\tvar url = baseUrl + 'auth/resetPwd';\r\n\tvar _header = option._header || {};\r\n\tdelete option._header;\r\n\treturn axios({\r\n\t\tmethod: 'POST',\r\n\t\turl: url,\r\n\t\tdata: JSON.stringify(option),\r\n\t\theaders: _header\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n\t\t\treturn _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t    return _rejectObj(error);\r\n\t});\r\n}\r\n\r\n/**\r\n * 解除手机号绑定(此协议不做实际解除操作,只是记录标识,重新绑定手机号,必须先通过此协议)\r\nURL:http://domain/eryuzhisen-server/auth/unboundPhone\r\nMethod:POST\r\nrequest:\r\n{\r\n\t\"phone_num\":\"12345678\",//解除绑定的手机号\r\n\t\"phone_vcode\":\"1111\",//手机号验证码\r\n}\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\"\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction unboundPhone(option){\r\n\tvar url = baseUrl + 'auth/unboundPhone';\r\n\r\n\r\n\t// 没有登录态\r\n\tif (!token) {\r\n\t\treturn _rejectObj({\r\n\t\t\tret: -10,\r\n\t\t\tmsg: '未登录'\r\n\t\t});\r\n\t}\r\n\r\n\tdelete option._header;\r\n\treturn axios({\r\n\t\tmethod: 'POST',\r\n\t\turl: url,\r\n\t\tdata: JSON.stringify(option),\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n\t\t\treturn _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t    return _rejectObj(error);\r\n\t});\r\n}\r\n\r\n/**\r\n * 重新绑定手机号\r\nURL:http://domain/eryuzhisen-server/auth/reBindPhone\r\nMethod:POST\r\nrequest:\r\n{\r\n\t\"phone_num\":\"1234567\",//新手机号\r\n\t\"phone_vcode\":\"1111\",//手机号验证码\r\n}\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\"\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction reBindPhone(option){\r\n\tvar url = baseUrl + 'auth/reBindPhone';\r\n\r\n\t// 没有登录态\r\n\tif (!token) {\r\n\t\treturn _rejectObj({\r\n\t\t\tret: -10,\r\n\t\t\tmsg: '未登录'\r\n\t\t});\r\n\t}\r\n\r\n\tdelete option._header;\r\n\treturn axios({\r\n\t\tmethod: 'POST',\r\n\t\turl: url,\r\n\t\tdata: JSON.stringify(option),\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n\t\t\treturn _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t    return _rejectObj(error);\r\n\t});\r\n}\r\n\r\n/**\r\n * 改用户信息\r\nURL:http://domain/eryuzhisen-server/user/updateUserInfo\r\nMethod:POST\r\nrequest body\r\n{\r\n\t\"nick_name\":\"xxxx\",\r\n\t\"avatar_url\":\"http://xxxxx.png\",\r\n\t\"signature\":\"xxxxxxx\"\r\n}\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\"\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction updateUserInfo(option){\r\n\tvar url = baseUrl + 'user/updateUserInfo';\r\n\tvar _header = option._header || {};\r\n\r\n\t// 没有登录态\r\n\tif (!token) {\r\n\t\treturn _rejectObj({\r\n\t\t\tret: -10,\r\n\t\t\tmsg: '未登录'\r\n\t\t});\r\n\t}\r\n\r\n\tdelete option._header;\r\n\treturn axios({\r\n\t\tmethod: 'POST',\r\n\t\turl: url,\r\n\t\tdata: JSON.stringify(option),\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n\t\t\treturn _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t    return _rejectObj(error);\r\n\t});\r\n}\r\n\r\n/**\r\n * 获取用户信息\r\nURL:http://domain/eryuzhisen-server/user/getUserInfo\r\nMethod:GET\r\n\r\nrequest:\r\nparams:\r\nuserId:\"xxxx\"//需要获取指定用户id的信息,如果header中uid不同,则会返回用户间关系\r\n\r\nresponse:\r\n{\r\n\t\"ret\":\"1\",//0 成功 1 失败\r\n\t\"errcode\":\"10001\",//错误码 ret为1时出现\r\n\t\"errinfo\":\"xxxx\",\r\n\t\"info\":{\r\n\t\t\"uid\":\"xxxx\",\r\n\t\t\"nick_name\":\"xxxx\",//昵称\r\n\t\t\"avatar_url\":\"xxxxx\",//头像url\r\n\t\t\"signature\":\"xxxx\",//签名\r\n\t\t\"c_age\":\"xxxx\",//论坛年龄\r\n\t\t\"relation\":\"0\"//关系 0 没有关注 1 关注 2 粉丝 3 相互关注\r\n\t}\r\n}\r\n * @param  {[type]} option [description]\r\n * @return {[type]}        [description]\r\n */\r\nfunction getUserInfo(option){\r\n\tvar url = baseUrl + 'user/getUserInfo';\r\n\tvar _header = option._header || {};\r\n\r\n\t// 没有登录态\r\n\tif (!token && !option.userId) {\r\n\t\treturn _rejectObj({\r\n\t\t\tret: -10,\r\n\t\t\tmsg: '未登录'\r\n\t\t});\r\n\t}\r\n\r\n\tdelete option._header;\r\n\treturn axios({\r\n\t\tmethod: 'GET',\r\n\t\turl: url,\r\n\t\tparams: option,\r\n\t\theaders: {\r\n\t\t\ttoken: token\r\n\t\t}\r\n\t}).then(function (response) {\r\n\t\tif (response.data.ret != 0) {\r\n\t\t\treturn _reject(response.data);\r\n\t\t}\r\n\t\treturn response.data;\r\n\t}).catch(function (error) {\r\n\t    return _rejectObj(error);\r\n\t});\r\n}\r\n\r\nexport {\r\n\tgetPicVerifyCode,\r\n\tgetPhoneVerifyCode,\r\n\tsigin,\r\n\tsigup,\r\n\tresetPwd,\r\n\tunboundPhone,\r\n\treBindPhone,\r\n\tupdateUserInfo,\r\n\tgetUserInfo,\r\n\t_reject\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/data/user.js"],"sourceRoot":""}