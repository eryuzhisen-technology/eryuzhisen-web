webpackJsonp([0],{"+1mQ":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("NYxO"),r=i("mOGY"),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={name:"header",data:function(){return{avatar:a.default,hasMessage:!1,search_value:""}},props:["pageIndex","resType"],computed:(0,n.mapState)({user:function(t){return t.user.info},search:function(){return"./"+(location.pathname.indexOf("search.author.html")>-1?"search.author.html":"search.article.html")+"?query="+this.search_value},url:function(){return{index:"./index.html",mark:"./mark.html",app:"./app.html",login:"./login.html",register:"./register.html",center:"./author.work.html?user_id="+this.$store.state.user.info.uid,setting:"./setting.userinfo.html",better:"./message.better.html",comment:"./message.comment.html",infomation:"./message.infomation.html",edit:"./article.edit.html?from="+encodeURIComponent(window.location.href)}},unread:function(){for(var t={},e=this.$store.state.message.unread.list,i=0,n=e.length;i<n;i++)t["message"+e[i].message_type]=e[i].unread_count;return(t.message1>0||t.message2>0||t.message0>0)&&(this.hasMessage=!0),t}}),methods:{seachGo:function(){"search"==this.resType?this.$eventHub.$emit("header_serach",{query:this.search_value}):location.href=this.search},getUserInfo:function(){var t=this,e=this.$version.userInfo,i=this.$cache.getStore(e.key,e.version);if(i)return this.$store.dispatch("user_setUserInfo",i).then(function(e){t.url.center="./author.work.html?user_id="+t.user.uid}),!1;this.$store.dispatch("user_getUserInfo",{}).then(function(i){t.url.center="./author.work.html?user_id="+t.user.uid,t.$cache.setStore(e.key,i,e.version,e.time),t.$store.dispatch("bubble_success",i)}).catch(function(e){t.$store.dispatch("bubble_fail",e)})},ourlogin:function(){this.centerShow=!1,this.$cache.removeStore(this.$version.userInfo.key),this.$store.dispatch("user_ourlogin")},feedbackOpen:function(){this.centerShow=!1,this.$store.dispatch("common_switch",!0)},getUnreadMessage:function(){var t=this;this.$store.dispatch("message_getUnreadMessage",{}).then(function(e){t.$store.dispatch("bubble_success",e)}).catch(function(e){t.$store.dispatch("bubble_fail",e)})}},mounted:function(){var t=this;this.$eventHub.$on("getUnreadMessage",function(e){t.getUnreadMessage()}),this.search_value=decodeURIComponent(this.$url.getUrlParam("query"))||"",this.getUserInfo(),this.getUnreadMessage()}}},"+GE4":function(t,e){},"+l+3":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-header"},[i("div",{staticClass:"c-header-content"},[i("div",{staticClass:"logo"},[i("a",{attrs:{href:t.url.index}})]),t._v(" "),i("div",{staticClass:"menu"},[i("a",{staticClass:"item",class:{"z-on":"index"==t.pageIndex},attrs:{href:t.url.index}},[t._v("发现")]),t._v(" "),i("a",{staticClass:"item",class:{"z-on":"mark"==t.pageIndex},attrs:{href:t.url.mark}},[t._v("收藏")])]),t._v(" "),i("div",{staticClass:"search"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.search_value,expression:"search_value"}],attrs:{type:"text",placeholder:"搜索"},domProps:{value:t.search_value},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.seachGo(e)},input:function(e){e.target.composing||(t.search_value=e.target.value)}}}),t._v(" "),i("a",{attrs:{href:"javascript:void(0)"},on:{click:t.seachGo}},[i("span")])]),t._v(" "),t.user.isLogin?i("div",{staticClass:"publish"},[i("a",{staticClass:"publish-btn cpm_button_warn",attrs:{href:t.url.edit}},[t._v("创作")])]):t._e(),t._v(" "),i("div",{staticClass:"user"},[t.user.isLogin?i("div",{staticClass:"member"},[i("div",{staticClass:"member-show-item member-show-notice"},[i("div",{staticClass:"member-show-notice_img"}),t._v(" "),t.hasMessage?i("div",{staticClass:"member-show-notice_number"}):t._e(),t._v(" "),i("div",{staticClass:"member-show member-notice"},[i("ul",{staticClass:"member-notice-lists"},[i("li",{staticClass:"member-notice-item"},[i("a",{attrs:{href:t.url.better}},[i("span",{staticClass:"member-notice-item__list member-notice-item__icon"}),t._v(" "),i("span",{staticClass:"member-notice-item__list member-notice-item__text"},[t._v("精选")]),t._v(" "),t.unread.message1&&0!=t.unread.message1?i("span",{staticClass:"member-notice-item__list member-notice-item__number"},[t._v("·"+t._s(t.unread.message1))]):t._e()])]),t._v(" "),i("li",{staticClass:"member-notice-item"},[i("a",{attrs:{href:t.url.comment}},[i("span",{staticClass:"member-notice-item__list member-notice-item__icon"}),t._v(" "),i("span",{staticClass:"member-notice-item__list member-notice-item__text"},[t._v("评论我")]),t._v(" "),t.unread.message2&&0!=t.unread.message2?i("span",{staticClass:"member-notice-item__list member-notice-item__number"},[t._v("·"+t._s(t.unread.message2))]):t._e()])]),t._v(" "),i("li",{staticClass:"member-notice-item"},[i("a",{attrs:{href:t.url.infomation}},[i("span",{staticClass:"member-notice-item__list member-notice-item__icon"}),t._v(" "),i("span",{staticClass:"member-notice-item__list member-notice-item__text"},[t._v("其他消息")]),t._v(" "),t.unread.message0&&0!=t.unread.message0?i("span",{staticClass:"member-notice-item__list member-notice-item__number"},[t._v("·"+t._s(t.unread.message0))]):t._e()])])])])]),t._v(" "),i("div",{staticClass:"member-show-item member-show-center"},[i("div",{staticClass:"member-show-center_img",style:{"background-image":"url("+(t.user.avatar_url?t.user.avatar_url:t.avatar)+")"}}),t._v(" "),i("div",{staticClass:"member-show member-center"},[i("ul",{staticClass:"member-center-lists"},[i("li",{staticClass:"member-center-item"},[i("a",{attrs:{href:t.url.center}},[i("span",{staticClass:"member-center-item__list member-center-item__icon"}),t._v(" "),i("span",{staticClass:"member-center-item__list member-center-item__text"},[t._v("我的主页")])])]),t._v(" "),i("li",{staticClass:"member-center-item"},[i("a",{attrs:{href:t.url.setting}},[i("span",{staticClass:"member-center-item__list member-center-item__icon"}),t._v(" "),i("span",{staticClass:"member-center-item__list member-center-item__text"},[t._v("个人设置")])])]),t._v(" "),i("li",{staticClass:"member-center-item",on:{click:t.feedbackOpen}},[i("a",{attrs:{href:"javascript:void(0);"}},[i("span",{staticClass:"member-center-item__list member-center-item__icon"}),t._v(" "),i("span",{staticClass:"member-center-item__list member-center-item__text"},[t._v("意见反馈")])])]),t._v(" "),i("li",{staticClass:"member-center-item",on:{click:t.ourlogin}},[i("a",{attrs:{href:"javascript:void(0);"}},[i("span",{staticClass:"member-center-item__list member-center-item__icon"}),t._v(" "),i("span",{staticClass:"member-center-item__list member-center-item__text"},[t._v("退出登录")])])])])])])]):i("div",{staticClass:"btn"},[i("a",{attrs:{href:t.url.register}},[t._v("注册")]),i("span",[t._v("·")]),i("a",{attrs:{href:t.url.login}},[t._v("登录")])])])]),t._v(" "),i("Feedback")],1)},staticRenderFns:[]}},"0CNv":function(t,e,i){i("sUpd");var n=i("VU/8")(i("xTQR"),i("s/ku"),null,null);t.exports=n.exports},"1nOS":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=i("NYxO"),r=i("mOGY"),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={data:function(){return{avatar:a.default,labelTag:"",subMoreShow:!1,query:"",pageIndex:1,pageSize:5}},props:["resType","loadType","userType","catalog_type"],computed:(0,n.mapState)({article:function(t){return t.opus.article},tag:function(t){return t.opus.category},user:function(t){return t.user.info}}),methods:{pageSwitch:function(t){if(this.pageIndex==t)return!1;this.pageIndex=t,this.getList()},subMoreSwitch:function(){this.subMoreShow=!this.subMoreShow},remove:function(t){var e=this;this.$store.dispatch("bubble_showBubble",{show:!0,type:"warn",warn:{title:"确定要删除?",content:"删除后将无法恢复，请谨慎处理",comfireFn:function(){e.delCatalog(t)}}})},getCatalogList:function(t){var e=this;this.$store.dispatch("opus_getCatalogList",{type:t||this.loadType||"",params:{pagination:"1",page:this.pageIndex,pageSize:this.pageSize},body:{label:"page"==this.resType?this.labelTag:"",catalog_type:this.catalog_type,user_id:"user_id"==this.userType?this.user_id:"",fuzzy_query:this.query||""}}).then(function(t){e.$emit("article_count",e.article.count),e.$store.dispatch("bubble_success",t)}).catch(function(t){e.$store.dispatch("bubble_fail",t)})},getMyCatalogList:function(){var t=this;if(!this.user.isLogin&&"index"!=this.resType)return console.log("----error----on login, getCatalogList"),!1;this.$store.dispatch("opus_getMyCatalogList",{pagination:"1",page:this.pageIndex,pageSize:this.pageSize}).then(function(e){t.$emit("article_count",t.article.count),t.$store.dispatch("bubble_success",e)}).catch(function(e){t.$store.dispatch("bubble_fail",e)})},getFavoritesList:function(){var t=this;this.$store.dispatch("opus_getFavoritesList",{pagination:"1",page:this.pageIndex,pageSize:this.pageSize}).then(function(e){t.$store.dispatch("bubble_success",e)}).catch(function(e){t.$store.dispatch("bubble_fail",e)})},getMore:function(){this.pageIndex++,this.getList()},getList:function(){var t=this;if("mark"==this.resType)this.getFavoritesList();else if("history"==this.resType){var e=this.$version.history,i=this.$cache.getStore(e.key,e.version),n=i.slice((this.pageIndex-1)*this.pageSize,this.pageSize*this.pageIndex);this.$store.dispatch("opus_setArticle",{lists:n,count:i.length}).then(function(e){t.$emit("article_count",t.article.count)})}else this.user.uid&&this.user.uid==this.user_id?this.getMyCatalogList():this.getCatalogList()},delFavorites:function(e){var i=this,n=t(e.currentTarget).parents(".c-artice-item-wrap").data("catalog_id");this.$store.dispatch("opus_delFavorites",{catalogId:n}).then(function(t){i.getList(),i.$store.dispatch("bubble_success",t)}).catch(function(t){i.$store.dispatch("bubble_fail",t)})},delCatalog:function(t){var e=this;this.$store.dispatch("opus_delCatalog",{catalogId:t}).then(function(t){e.getCatalogList(),e.$store.dispatch("bubble_success",t)}).catch(function(t){e.$store.dispatch("bubble_fail",t)})},delHistory:function(t){for(var e=this.$version.history,i=this.$cache.getStore(e.key,e.version),n=0,r=i.length;n<r;n++)if(i[n].catalog_id==t){i.splice(n,1);break}this.$cache.setStore(e.key,i,e.version,e.time),this.getList()}},created:function(){var t=this;this.$eventHub.$on("header_serach",function(e){if(t.query==e.query)return!1;t.query=e.query,t.getList()}),this.$eventHub.$on("author_chapter_list_refresh",function(e){t.getList()})},mounted:function(){var e=this;if(t(window).on("scroll",function(i){if(t(".btn-more-before").length<=0)return!1;var n=t(window).scrollTop(),r=t(window).height();t(".btn-more-before").offset().top+20<=n+r&&e.getMore()}),this.query=decodeURIComponent(this.$url.getUrlParam("query")),this.user_id=this.$url.getUrlParam("user_id"),this.labelTag=this.$url.getUrlParam("labelTag"),this.$watch("tag.index",function(t,e){this.pageIndex=1,this.getCatalogList("page")}),!this.labelTag&&"page"==this.resType)return this.$store.dispatch("bubble_showBubble",{show:!0,type:"top",top:{status:"z-warn",msg:"系统繁忙"}}),!1;this.getList()}}}).call(e,i("7t+N"))},"1na0":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-chapter-list"},[i("div",{staticClass:"c-chapter-list-wrap"},[t._l(t.chapter.lists,function(e,n){return i("div",{staticClass:"c-chapter-list-item"},[i("a",{staticClass:"link",attrs:{href:"./article.read.html?catalog_id="+t.catalog_id+"&chapter_id="+e.chapter_id}},[i("div",{staticClass:"c-chapter-list__top"},[i("div",{staticClass:"top-title"},[t._v(t._s(e.chapter_title))]),t._v(" "),e.isNew?i("div",{staticClass:"top-new"},[t._v("·new")]):t._e()]),t._v(" "),i("div",{staticClass:"c-chapter-list__bottom"},[i("div",{staticClass:"bottom-time"},[t._v(t._s(e.publish_date))]),t._v(" "),1==e.owner&&1==e.chapter_status?i("a",{staticClass:"bottom-manger-item bottom-manger-edit",attrs:{href:"./article.edit.html?catalog_id="+t.catalog_id+"&chapter_id="+e.chapter_id}},[t._v("修改信息")]):t._e(),t._v(" "),1==e.owner?i("a",{staticClass:"bottom-manger-item bottom-manger-remove",attrs:{href:"javascript:void(0);"},on:{click:function(i){t.remove(e.chapter_id)}}},[t._v("删除章节")]):t._e(),t._v(" "),i("div",{staticClass:"bottom-follow"},[i("em"),i("span",[t._v(t._s(e.praise_count))])]),t._v(" "),i("div",{staticClass:"bottom-comment"},[i("em"),i("span",[t._v(t._s(e.comment_count))])])]),t._v(" "),e.hasHistory?i("div",{staticClass:"c-chapter-list__history"},[i("a",{attrs:{href:"#none"}})]):t._e(),t._v(" "),i("div",{staticClass:"bottom"})])])}),t._v(" "),t.chapter.count<=0?i("Empty"):t._e()],2),t._v(" "),i("Page",{attrs:{count:t.chapter.count,length:t.pageSize,index:t.pageIndex},on:{page_switch:t.pageSwitch}})],1)},staticRenderFns:[]}},"28R+":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.data.show?i("div",{staticClass:"c-feedback"},[i("div",{staticClass:"c-feedback-wrap"},[i("div",{staticClass:"content-form"},[i("div",{staticClass:"content-textarea",class:{"z-error":!t.content_reg}},[t.content_reg?t._e():i("div",{staticClass:"c-dialog__tip"},[i("div",{staticClass:"tip-arrow"}),t._v(" "),i("div",{staticClass:"tip-text"},[t._v(t._s(t.content_reg_con))])]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{placeholder:"写下你的宝贵建议..."},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"content-input",class:{"z-error":!t.contact_reg}},[t.contact_reg?t._e():i("div",{staticClass:"c-dialog__tip"},[i("div",{staticClass:"tip-arrow"}),t._v(" "),i("div",{staticClass:"tip-text"},[t._v(t._s(t.contact_reg_con))])]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.contact,expression:"contact"}],attrs:{type:"text",placeholder:"留下你的联系方式..."},domProps:{value:t.contact},on:{input:function(e){e.target.composing||(t.contact=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"content-btn"},[i("div",{staticClass:"content-btn-item content-btn-cancel",on:{click:t.close}},[t._v("取消")]),t._v(" "),i("div",{staticClass:"content-btn-item content-btn-submit",on:{click:t.send}},[t._v("发送")])])])]):t._e()},staticRenderFns:[]}},"2Gq5":function(t,e,i){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"c-empty"},[n("div",{staticClass:"c-empty-img"},[n("img",{attrs:{src:i("Xdpa")}})]),t._v(" "),n("div",{staticClass:"c-empty-text"},[t._v("没有相关结果")])])}]}},"2mP8":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-menu-left"},t._l(t.data,function(e){return i("div",{staticClass:"item",class:{"z-on":e.isActive}},[i("a",{attrs:{href:e.url||"javascript:void(0);"}},[i("span",{staticClass:"item__icon"}),t._v(" "),i("span",{staticClass:"item__title"},[t._v(t._s(e.title)+t._s(e.number?"·"+e.number:""))])])])}))},staticRenderFns:[]}},"36Po":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-comment-info"},[i("div",{staticClass:"c-comment-info-wrap"},[t._l(t.message.list,function(e){return i("div",{staticClass:"c-comment-info-list"},[i("div",{staticClass:"c-comment-info__top"},[i("div",{staticClass:"top__img"},[i("img",{attrs:{src:e.message.sender.avatar_url||t.avatar}})]),t._v(" "),i("div",{staticClass:"top__name"},[t._v(t._s(e.message.sender.nick_name))]),t._v(" "),i("div",{staticClass:"top__time"},[t._v(t._s(e.create_time))])]),t._v(" "),i("div",{staticClass:"c-comment-info__content"},[t._v("\n            "+t._s(e.message.content.content)+"\n        ")])])}),t._v(" "),t.message.count<=0?i("Empty",{staticClass:"content-empty"}):t._e()],2),t._v(" "),i("Page",{attrs:{count:t.message.count,length:t.pageSize,index:t.pageIndex},on:{page_switch:t.pageSwitch}})],1)},staticRenderFns:[]}},"387H":function(t,e,i){"use strict";function n(t){if(r)return void console.error("[plupload] already installed. Vue.use(plupload) should be called only once.");r=t,r.prototype.$plupload=plupload}i("HvkJ");!function(t,e,i){function n(t){function e(t,e,i){var r={chunks:"slice_blob",jpgresize:"send_binary_string",pngresize:"send_binary_string",progress:"report_upload_progress",multi_selection:"select_multiple",dragdrop:"drag_and_drop",drop_element:"drag_and_drop",headers:"send_custom_headers",urlstream_upload:"send_binary_string",canSendBinary:"send_binary",triggerDialog:"summon_file_dialog"};r[t]?n[r[t]]=e:i||(n[t]=e)}var i=t.required_features,n={};return"string"==typeof i?s.each(i.split(/\s*,\s*/),function(t){e(t,!0)}):"object"==typeof i?s.each(i,function(t,i){e(i,t)}):!0===i&&(t.chunk_size>0&&(n.slice_blob=!0),!t.resize.enabled&&t.multipart||(n.send_binary_string=!0),s.each(t,function(t,i){e(i,!!t,!0)})),n}var r=t.setTimeout,a={},s={VERSION:"2.1.2",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:e.mimes,ua:e.ua,typeOf:e.typeOf,extend:e.extend,guid:e.guid,get:function(t){var i,n=[];"array"!==e.typeOf(t)&&(t=[t]);for(var r=t.length;r--;)(i=e.get(t[r]))&&n.push(i);return n.length?n:null},each:e.each,getPos:e.getPos,getSize:e.getSize,xmlEncode:function(t){var e={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},i=/[<>&\"\']/g;return t?(""+t).replace(i,function(t){return e[t]?"&"+e[t]+";":t}):t},toArray:e.toArray,inArray:e.inArray,addI18n:e.addI18n,translate:e.translate,isEmptyObj:e.isEmptyObj,hasClass:e.hasClass,addClass:e.addClass,removeClass:e.removeClass,getStyle:e.getStyle,addEvent:e.addEvent,removeEvent:e.removeEvent,removeAllEvents:e.removeAllEvents,cleanName:function(t){var e,i;for(i=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],e=0;e<i.length;e+=2)t=t.replace(i[e],i[e+1]);return t=t.replace(/\s+/g,"_"),t=t.replace(/[^a-z0-9_\-\.]+/gi,"")},buildUrl:function(t,e){var i="";return s.each(e,function(t,e){i+=(i?"&":"")+encodeURIComponent(e)+"="+encodeURIComponent(t)}),i&&(t+=(t.indexOf("?")>0?"&":"?")+i),t},formatSize:function(t){function e(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)}if(t===i||/\D/.test(t))return s.translate("N/A");var n=Math.pow(1024,4);return t>n?e(t/n,1)+" "+s.translate("tb"):t>(n/=1024)?e(t/n,1)+" "+s.translate("gb"):t>(n/=1024)?e(t/n,1)+" "+s.translate("mb"):t>1024?Math.round(t/1024)+" "+s.translate("kb"):t+" "+s.translate("b")},parseSize:e.parseSizeStr,predictRuntime:function(t,i){var n,r;return n=new s.Uploader(t),r=e.Runtime.thatCan(n.getOption().required_features,i||t.runtimes),n.destroy(),r},addFileFilter:function(t,e){a[t]=e}};s.addFileFilter("mime_types",function(t,e,i){t.length&&!t.regexp.test(e.name)?(this.trigger("Error",{code:s.FILE_EXTENSION_ERROR,message:s.translate("File extension error."),file:e}),i(!1)):i(!0)}),s.addFileFilter("max_file_size",function(t,e,i){t=s.parseSize(t),void 0!==e.size&&t&&e.size>t?(this.trigger("Error",{code:s.FILE_SIZE_ERROR,message:s.translate("File size error."),file:e}),i(!1)):i(!0)}),s.addFileFilter("prevent_duplicates",function(t,e,i){if(t)for(var n=this.files.length;n--;)if(e.name===this.files[n].name&&e.size===this.files[n].size)return this.trigger("Error",{code:s.FILE_DUPLICATE_ERROR,message:s.translate("Duplicate file error."),file:e}),void i(!1);i(!0)}),s.Uploader=function(t){function o(){var t,e,i=0;if(this.state==s.STARTED){for(e=0;e<O.length;e++)t||O[e].status!=s.QUEUED?i++:(t=O[e],this.trigger("BeforeUpload",t)&&(t.status=s.UPLOADING,this.trigger("UploadFile",t)));i==O.length&&(this.state!==s.STOPPED&&(this.state=s.STOPPED,this.trigger("StateChanged")),this.trigger("UploadComplete",O))}}function c(t){t.percent=t.size>0?Math.ceil(t.loaded/t.size*100):100,u()}function u(){var t,e;for(S.reset(),t=0;t<O.length;t++)e=O[t],e.size!==i?(S.size+=e.origSize,S.loaded+=e.loaded*e.origSize/e.size):S.size=i,e.status==s.DONE?S.uploaded++:e.status==s.FAILED?S.failed++:S.queued++;S.size===i?S.percent=O.length>0?Math.ceil(S.uploaded/O.length*100):0:(S.bytesPerSec=Math.ceil(S.loaded/((+new Date-R||1)/1e3)),S.percent=S.size>0?Math.ceil(S.loaded/S.size*100):0)}function l(){var t=j[0]||M[0];return!!t&&t.getRuntime().uid}function d(t,i){if(t.ruid){var n=e.Runtime.getInfo(t.ruid);if(n)return n.can(i)}return!1}function h(){this.bind("FilesAdded FilesRemoved",function(t){t.trigger("QueueChanged"),t.refresh()}),this.bind("CancelUpload",x),this.bind("BeforeUpload",g),this.bind("UploadFile",_),this.bind("UploadProgress",v),this.bind("StateChanged",b),this.bind("QueueChanged",u),this.bind("Error",w),this.bind("FileUploaded",y),this.bind("Destroy",C)}function m(t,i){var n=this,r=0,a=[],o={runtime_order:t.runtimes,required_caps:t.required_features,preferred_caps:L,swf_url:t.flash_swf_url,xap_url:t.silverlight_xap_url};s.each(t.runtimes.split(/\s*,\s*/),function(e){t[e]&&(o[e]=t[e])}),t.browse_button&&s.each(t.browse_button,function(i){a.push(function(a){var c=new e.FileInput(s.extend({},o,{accept:t.filters.mime_types,name:t.file_data_name,multiple:t.multi_selection,container:t.container,browse_button:i}));c.onready=function(){var t=e.Runtime.getInfo(this.ruid);e.extend(n.features,{chunks:t.can("slice_blob"),multipart:t.can("send_multipart"),multi_selection:t.can("select_multiple")}),r++,j.push(this),a()},c.onchange=function(){n.addFile(this.files)},c.bind("mouseenter mouseleave mousedown mouseup",function(n){$||(t.browse_button_hover&&("mouseenter"===n.type?e.addClass(i,t.browse_button_hover):"mouseleave"===n.type&&e.removeClass(i,t.browse_button_hover)),t.browse_button_active&&("mousedown"===n.type?e.addClass(i,t.browse_button_active):"mouseup"===n.type&&e.removeClass(i,t.browse_button_active)))}),c.bind("mousedown",function(){n.trigger("Browse")}),c.bind("error runtimeerror",function(){c=null,a()}),c.init()})}),t.drop_element&&s.each(t.drop_element,function(t){a.push(function(i){var a=new e.FileDrop(s.extend({},o,{drop_zone:t}));a.onready=function(){var t=e.Runtime.getInfo(this.ruid);n.features.dragdrop=t.can("drag_and_drop"),r++,M.push(this),i()},a.ondrop=function(){n.addFile(this.files)},a.bind("error runtimeerror",function(){a=null,i()}),a.init()})}),e.inSeries(a,function(){"function"==typeof i&&i(r)})}function f(t,n,r){var a=new e.Image;try{a.onload=function(){if(n.width>this.width&&n.height>this.height&&n.quality===i&&n.preserve_headers&&!n.crop)return this.destroy(),r(t);a.downsize(n.width,n.height,n.crop,n.preserve_headers)},a.onresize=function(){r(this.getAsBlob(t.type,n.quality)),this.destroy()},a.onerror=function(){r(t)},a.load(t)}catch(e){r(t)}}function p(t,i,r){function a(t,e,i){var n=E[t];switch(t){case"max_file_size":"max_file_size"===t&&(E.max_file_size=E.filters.max_file_size=e);break;case"chunk_size":(e=s.parseSize(e))&&(E[t]=e,E.send_file_name=!0);break;case"multipart":E[t]=e,e||(E.send_file_name=!0);break;case"unique_names":E[t]=e,e&&(E.send_file_name=!0);break;case"filters":"array"===s.typeOf(e)&&(e={mime_types:e}),i?s.extend(E.filters,e):E.filters=e,e.mime_types&&(E.filters.mime_types.regexp=function(t){var e=[];return s.each(t,function(t){s.each(t.extensions.split(/,/),function(t){/^\s*\*\s*$/.test(t)?e.push("\\.*"):e.push("\\."+t.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),new RegExp("("+e.join("|")+")$","i")}(E.filters.mime_types));break;case"resize":i?s.extend(E.resize,e,{enabled:!0}):E.resize=e;break;case"prevent_duplicates":E.prevent_duplicates=E.filters.prevent_duplicates=!!e;break;case"browse_button":case"drop_element":e=s.get(e);case"container":case"runtimes":case"multi_selection":case"flash_swf_url":case"silverlight_xap_url":E[t]=e,i||(c=!0);break;default:E[t]=e}i||o.trigger("OptionChanged",t,e,n)}var o=this,c=!1;"object"==typeof t?s.each(t,function(t,e){a(e,t,r)}):a(t,i,r),r?(E.required_features=n(s.extend({},E)),L=n(s.extend({},E,{required_features:!0}))):c&&(o.trigger("Destroy"),m.call(o,E,function(t){t?(o.runtime=e.Runtime.getInfo(l()).type,o.trigger("Init",{runtime:o.runtime}),o.trigger("PostInit")):o.trigger("Error",{code:s.INIT_ERROR,message:s.translate("Init error.")})}))}function g(t,e){if(t.settings.unique_names){var i=e.name.match(/\.([^.]+)$/),n="part";i&&(n=i[1]),e.target_name=e.id+"."+n}}function _(t,i){function n(){l-- >0?r(a,1e3):(i.loaded=m,t.trigger("Error",{code:s.HTTP_ERROR,message:s.translate("HTTP Error."),file:i,response:I.responseText,status:I.status,responseHeaders:I.getAllResponseHeaders()}))}function a(){var d,f,p,g={};i.status===s.UPLOADING&&t.state!==s.STOPPED&&(t.settings.send_file_name&&(g.name=i.target_name||i.name),u&&h.chunks&&o.size>u?(p=Math.min(u,o.size-m),d=o.slice(m,m+p)):(p=o.size,d=o),u&&h.chunks&&(t.settings.send_chunk_number?(g.chunk=Math.ceil(m/u),g.chunks=Math.ceil(o.size/u)):(g.offset=m,g.total=o.size)),I=new e.XMLHttpRequest,I.upload&&(I.upload.onprogress=function(e){i.loaded=Math.min(i.size,m+e.loaded),t.trigger("UploadProgress",i)}),I.onload=function(){if(I.status>=400)return void n();l=t.settings.max_retries,p<o.size?(d.destroy(),m+=p,i.loaded=Math.min(m,o.size),t.trigger("ChunkUploaded",i,{offset:i.loaded,total:o.size,response:I.responseText,status:I.status,responseHeaders:I.getAllResponseHeaders()}),"Android Browser"===e.Env.browser&&t.trigger("UploadProgress",i)):i.loaded=i.size,d=f=null,!m||m>=o.size?(i.size!=i.origSize&&(o.destroy(),o=null),t.trigger("UploadProgress",i),i.status=s.DONE,t.trigger("FileUploaded",i,{response:I.responseText,status:I.status,responseHeaders:I.getAllResponseHeaders()})):r(a,1)},I.onerror=function(){n()},I.onloadend=function(){this.destroy(),I=null},t.settings.multipart&&h.multipart?(I.open("POST",c,!0),s.each(t.settings.headers,function(t,e){I.setRequestHeader(e,t)}),f=new e.FormData,s.each(s.extend(g,t.settings.multipart_params),function(t,e){f.append(e,t)}),f.append(t.settings.file_data_name,d),I.send(f,{runtime_order:t.settings.runtimes,required_caps:t.settings.required_features,preferred_caps:L,swf_url:t.settings.flash_swf_url,xap_url:t.settings.silverlight_xap_url})):(c=s.buildUrl(t.settings.url,s.extend(g,t.settings.multipart_params)),I.open("POST",c,!0),I.setRequestHeader("Content-Type","application/octet-stream"),s.each(t.settings.headers,function(t,e){I.setRequestHeader(e,t)}),I.send(d,{runtime_order:t.settings.runtimes,required_caps:t.settings.required_features,preferred_caps:L,swf_url:t.settings.flash_swf_url,xap_url:t.settings.silverlight_xap_url})))}var o,c=t.settings.url,u=t.settings.chunk_size,l=t.settings.max_retries,h=t.features,m=0;i.loaded&&(m=i.loaded=u?u*Math.floor(i.loaded/u):0),o=i.getSource(),t.settings.resize.enabled&&d(o,"send_binary_string")&&~e.inArray(o.type,["image/jpeg","image/png"])?f.call(this,o,t.settings.resize,function(t){o=t,i.size=t.size,a()}):a()}function v(t,e){c(e)}function b(t){if(t.state==s.STARTED)R=+new Date;else if(t.state==s.STOPPED)for(var e=t.files.length-1;e>=0;e--)t.files[e].status==s.UPLOADING&&(t.files[e].status=s.QUEUED,u())}function x(){I&&I.abort()}function y(t){u(),r(function(){o.call(t)},1)}function w(t,e){e.code===s.INIT_ERROR?t.destroy():e.file&&(e.file.status=s.FAILED,c(e.file),t.state==s.STARTED&&(t.trigger("CancelUpload"),r(function(){o.call(t)},1)))}function C(t){t.stop(),s.each(O,function(t){t.destroy()}),O=[],j.length&&(s.each(j,function(t){t.destroy()}),j=[]),M.length&&(s.each(M,function(t){t.destroy()}),M=[]),L={},$=!1,R=I=null,S.reset()}var E,R,S,I,T=s.guid(),O=[],L={},j=[],M=[],$=!1;E={runtimes:e.Runtime.order,max_retries:0,chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",flash_swf_url:"js/Moxie.swf",silverlight_xap_url:"js/Moxie.xap",filters:{mime_types:[],prevent_duplicates:!1,max_file_size:0},resize:{enabled:!1,preserve_headers:!0,crop:!1},send_file_name:!0,send_chunk_number:!0},p.call(this,t,null,!0),S=new s.QueueProgress,s.extend(this,{id:T,uid:T,state:s.STOPPED,features:{},runtime:null,files:O,settings:E,total:S,init:function(){var t=this;if("function"==typeof E.preinit?E.preinit(t):s.each(E.preinit,function(e,i){t.bind(i,e)}),h.call(this),!E.browse_button||!E.url)return void this.trigger("Error",{code:s.INIT_ERROR,message:s.translate("Init error.")});m.call(this,E,function(i){"function"==typeof E.init?E.init(t):s.each(E.init,function(e,i){t.bind(i,e)}),i?(t.runtime=e.Runtime.getInfo(l()).type,t.trigger("Init",{runtime:t.runtime}),t.trigger("PostInit")):t.trigger("Error",{code:s.INIT_ERROR,message:s.translate("Init error.")})})},setOption:function(t,e){p.call(this,t,e,!this.runtime)},getOption:function(t){return t?E[t]:E},refresh:function(){j.length&&s.each(j,function(t){t.trigger("Refresh")}),this.trigger("Refresh")},start:function(){this.state!=s.STARTED&&(this.state=s.STARTED,this.trigger("StateChanged"),o.call(this))},stop:function(){this.state!=s.STOPPED&&(this.state=s.STOPPED,this.trigger("StateChanged"),this.trigger("CancelUpload"))},disableBrowse:function(){$=arguments[0]===i||arguments[0],j.length&&s.each(j,function(t){t.disable($)}),this.trigger("DisableBrowse",$)},getFile:function(t){var e;for(e=O.length-1;e>=0;e--)if(O[e].id===t)return O[e]},addFile:function(t,i){function n(t,i){var n=[];e.each(u.settings.filters,function(e,i){a[i]&&n.push(function(n){a[i].call(u,e,t,function(t){n(!t)})})}),e.inSeries(n,i)}function o(t){var a=e.typeOf(t);if(t instanceof e.File){if(!t.ruid&&!t.isDetached()){if(!c)return!1;t.ruid=c,t.connectRuntime(c)}o(new s.File(t))}else t instanceof e.Blob?(o(t.getSource()),t.destroy()):t instanceof s.File?(i&&(t.name=i),d.push(function(e){n(t,function(i){i||(O.push(t),h.push(t),u.trigger("FileFiltered",t)),r(e,1)})})):-1!==e.inArray(a,["file","blob"])?o(new e.File(null,t)):"node"===a&&"filelist"===e.typeOf(t.files)?e.each(t.files,o):"array"===a&&(i=null,e.each(t,o))}var c,u=this,d=[],h=[];c=l(),o(t),d.length&&e.inSeries(d,function(){h.length&&u.trigger("FilesAdded",h)})},removeFile:function(t){for(var e="string"==typeof t?t:t.id,i=O.length-1;i>=0;i--)if(O[i].id===e)return this.splice(i,1)[0]},splice:function(t,e){var n=O.splice(t===i?0:t,e===i?O.length:e),r=!1;return this.state==s.STARTED&&(s.each(n,function(t){if(t.status===s.UPLOADING)return r=!0,!1}),r&&this.stop()),this.trigger("FilesRemoved",n),s.each(n,function(t){t.destroy()}),r&&this.start(),n},bind:function(t,e,i){var n=this;s.Uploader.prototype.bind.call(this,t,function(){var t=[].slice.call(arguments);return t.splice(0,1,n),e.apply(this,t)},0,i)},destroy:function(){this.trigger("Destroy"),E=S=null,this.unbindAll()}})},s.Uploader.prototype=e.EventTarget.instance,s.File=function(){function t(t){s.extend(this,{id:s.guid(),name:t.name||t.fileName,type:t.type||"",size:t.size||t.fileSize,origSize:t.size||t.fileSize,loaded:0,percent:0,status:s.QUEUED,lastModifiedDate:t.lastModifiedDate||(new Date).toLocaleString(),getNative:function(){var t=this.getSource().getSource();return-1!==e.inArray(e.typeOf(t),["blob","file"])?t:null},getSource:function(){return i[this.id]?i[this.id]:null},destroy:function(){var t=this.getSource();t&&(t.destroy(),delete i[this.id])}}),i[this.id]=t}var i={};return t}(),s.QueueProgress=function(){var t=this;t.size=0,t.loaded=0,t.uploaded=0,t.failed=0,t.queued=0,t.percent=0,t.bytesPerSec=0,t.reset=function(){t.size=t.loaded=t.uploaded=t.failed=t.queued=t.percent=t.bytesPerSec=0}},t.plupload=s}(window,mOxie);var r;e.a={install:n,version:"1.0.0"}},"3Tyq":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("//Fk"),r=function(t){return t&&t.__esModule?t:{default:t}}(n),a=i("Wbri"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a);e.default={state:{article:{count:0,lists:[],load:0,more:0},hot:{count:0,lists:[],more:0},category:{label:[{category_desc:"全部",category_id:"0",category_title:"全部"}],laberSubnode:[],index:0,tags:[],load:0},catalog:{catalog_id:"",statusArr:[{audit_status:0,text:"连载中"},{audit_status:1,text:"已完结"}],levelArr:[{text:"普通",level_id:0},{text:"独家",level_id:1},{text:"首发",level_id:2}],info:{}},chapter:{count:0,lists:[],more:0,info:{},chapter_id:""},comment:{list:[],count:0}},mutations:{opus_setArticle:function(t,e){for(var i in e)t.article[i]=e[i]},opus_setCategory:function(t,e){for(var i in e)t.category[i]=e[i]},opus_setChapterList:function(t,e){t.chapter.count=e.count,t.chapter.lists=e.lists,t.chapter.more=e.more},opus_setCatalog_info:function(t,e){for(var i in e)t.catalog.info[i]=e[i]},opus_setCatalog:function(t,e){for(var i in e)t.catalog[i]=e[i]},opus_setChapter:function(t,e){for(var i in e)t.chapter[i]=e[i]},opus_setComment:function(t,e){for(var i in e)t.comment[i]=e[i]},opus_setCommentList:function(t,e){t.comment.list[e.index].replayIndex=e.replayIndex},opus_setHot:function(t,e){for(var i in e)t.hot[i]=e[i]}},actions:{opus_setArticle:function(t,e){return t.commit("opus_setArticle",e),r.default.resolve(1)},opus_setCatalog_info:function(t,e){return t.commit("opus_setCatalog_info",e),r.default.resolve(1)},opus_setTagIndex:function(t,e){return t.commit("opus_setCategory",{index:e}),r.default.resolve(1)},opus_setCommentList:function(t,e){return t.commit("opus_setCommentList",e),r.default.resolve(1)},opus_setChapterInfo:function(t,e){return t.commit("opus_setChapter",{info:e}),r.default.resolve(1)},opus_getCatalogList:function(t,e){return t.state.catalog.load?r.default.reject({ret:-21,msg:"加载中"}):(t.commit("opus_setArticle",{load:1}),t.state.category.index&&(e.body.category_id=t.state.category.index),s.getCatalogList(e).then(function(i){var n=t.state.article.lists;return n="more"==e.type?n.concat(i.list):i.list,t.commit("opus_setArticle",{count:i.page_info.total_count,lists:n,more:i.more,load:0}),r.default.resolve(i)}).catch(function(e){return t.commit("opus_setArticle",{load:0}),r.default.reject(e)}))},opus_getChapterList:function(t,e){return s.getChapterList(e).then(function(e){return e.list=e.list.reverse(),t.commit("opus_setChapterList",{count:Number(e.page_info.total_count),lists:e.list,more:e.more}),r.default.resolve(e)}).catch(function(t){return r.default.reject(t)})},opus_getCategoryList:function(t,e){return t.state.category.load?r.default.reject({ret:-21,msg:"加载中"}):(t.commit("opus_setCategory",{load:1}),t.state.category.label.length>1?r.default.resolve(t.state.category):s.getCategoryList(e).then(function(e){var i=[],n=t.state.category.label.concat(e.list);return e.list.map(function(t,e){i=i.concat(t.sub_node)}),t.commit("opus_setCategory",{label:n,laberSubnode:i,load:0}),r.default.resolve(e)}).catch(function(e){return t.commit("opus_setCategory",{load:0}),r.default.reject(e)}))},opus_getFavoritesList:function(t,e){return s.getFavoritesList(e).then(function(e){return t.commit("opus_setArticle",{count:e.page_info.total_count,lists:e.list,more:e.more}),r.default.resolve(e)}).catch(function(t){return r.default.reject(t)})},opus_delFavorites:function(t,e){return e.catalogId?s.delFavorites(e).then(function(t){return r.default.resolve(t)}).catch(function(t){return r.default.reject(t)}):r.default.reject({ret:-20,msg:"请求参数错误"})},opus_addFavorites:function(t,e){return e.catalogId?s.addFavorites(e).then(function(t){return r.default.resolve(t)}).catch(function(t){return r.default.reject(t)}):r.default.reject({ret:-20,msg:"请求参数错误"})},opus_getCommentList:function(t,e){return e.catalogId?s.getCommentList(e).then(function(e){for(var i=0,n=e.list.length;i<n;i++)e.list[i].replayIndex=-2;return t.commit("opus_setComment",{count:e.page_info.total_count,list:e.list,more:e.more}),r.default.resolve(e)}).catch(function(t){return r.default.reject(t)}):r.default.reject({ret:-20,msg:"请求参数错误"})},opus_getReplyCommentList:function(t,e){return e.commentId?s.getReplyCommentList(e).then(function(i){for(var n=t.state.comment.list,a=0,s=n.length;a<s;a++)n[a].comment_id==e.commentId&&(n[a].reply_page_info=i.page_info,n[a].reply_more=i.more,n[a].replys=n[a].replys.concat(i.list));return t.commit("opus_setComment",{list:n}),r.default.resolve(i)}).catch(function(t){return r.default.reject(t)}):r.default.reject({ret:-20,msg:"请求参数错误"})},opus_addComment:function(t,e){return e.catalog_id?s.addComment(e).then(function(t){return r.default.resolve(t)}).catch(function(t){return r.default.reject(t)}):r.default.reject({ret:-20,msg:"请求参数错误"})},opus_addCatalog:function(t,e){return s.addCatalog({level:e.level,category_id:e.category_id,catalog_title:e.catalog_title,catalog_desc:e.catalog_desc,catalog_cover_url:e.catalog_cover_url,catalog_status:e.catalog_status,catalog_label:e.catalog_label,translate:e.translate,authorize:e.authorize,reprint:e.reprint}).then(function(e){return t.commit("opus_setCatalog",{catalog_id:e.catalog_id}),r.default.resolve(e)}).catch(function(t){return r.default.reject(t)})},opus_updateCatalog:function(t,e){return s.updateCatalog({level:e.level,category_id:e.category_id,catalog_id:e.catalog_id,catalog_title:e.catalog_title,catalog_desc:e.catalog_desc,catalog_cover_url:e.catalog_cover_url,catalog_status:e.catalog_status,catalog_label:e.catalog_label,translate:e.translate,authorize:e.authorize,reprint:e.reprint}).then(function(e){return t.commit("opus_setCatalog",{catalog_id:e.catalog_id}),r.default.resolve(e)}).catch(function(t){return r.default.reject(t)})},opus_getCatalogDetail:function(t,e){return e.catalogId?s.getCatalogDetail(e).then(function(e){return t.commit("opus_setCatalog",{info:e.info}),r.default.resolve(e)}).catch(function(t){return r.default.reject(t)}):r.default.reject({ret:-20,msg:"请求参数错误"})},opus_addChapter:function(t,e){return s.addChapter({catalog_id:e.catalog_id,chapter_title:e.chapter_title,chapter_desc:e.chapter_desc,chapter_content:e.chapter_content,chapter_status:e.chapter_status}).then(function(e){return t.commit("opus_setChapter",{chapter_id:e.chapter_id}),r.default.resolve(e)}).catch(function(t){return r.default.reject(t)})},opus_addCommentPraise:function(t,e){return e.commentId?s.addCommentPraise({commentId:e.commentId}).then(function(t){return r.default.resolve(t)}).catch(function(t){return r.default.reject(t)}):r.default.reject({ret:-20,msg:"请求参数错误"})},opus_addPraise:function(t,e){return e.catalogId&&e.chapterId?s.addPraise({catalogId:e.catalogId,chapterId:e.chapterId}).then(function(t){return r.default.resolve(t)}).catch(function(t){return r.default.reject(t)}):r.default.reject({ret:-20,msg:"请求参数错误"})},opus_getLabelList:function(t,e){return s.getLabelList({count:e.count}).then(function(e){return t.commit("opus_setCategory",{tags:e.list}),r.default.resolve(e)}).catch(function(t){return r.default.reject(t)})},opus_updateChapter:function(t,e){return s.updateChapter({chapter_id:e.chapter_id,chapter_title:e.chapter_title,chapter_desc:e.chapter_desc,chapter_content:e.chapter_content,chapter_status:e.chapter_status}).then(function(i){t.commit("opus_setChapter",{chapter_id:i.chapter_id});for(var n=t.state.chapter.lists,a=0,s=n.length;a<s;a++)n[a].chapter_id==e.chapter_id&&(n[a].chapter_title=e.chapter_title,n[a].chapter_desc=e.chapter_desc,n[a].chapter_content=e.chapter_content);return t.commit("opus_setChapterList",{lists:n}),r.default.resolve(i)}).catch(function(t){return r.default.reject(t)})},opus_getChapterDetail:function(t,e){return e.chapterId?s.getChapterDetail(e).then(function(e){return t.commit("opus_setChapter",{info:e.info}),r.default.resolve(e)}).catch(function(t){return r.default.reject(t)}):r.default.reject({ret:-20,msg:"请求参数错误"})},opus_getHotList:function(t,e){t.state.category.index&&(e.body.category_id=t.state.category.index);s.getCatalogList(e).then(function(e){return t.commit("opus_setHot",{count:e.page_info.total_count,lists:e.list,more:e.more}),r.default.resolve(e)}).catch(function(t){return r.default.reject(t)})},opus_deleteChapter:function(t,e){return e.chapterId?s.delChapter(e).then(function(t){return r.default.resolve(t)}).catch(function(t){return r.default.reject(t)}):r.default.reject({ret:-20,msg:"请求参数错误"})},opus_delCatalog:function(t,e){return e.catalogId?s.delCatalog(e).then(function(t){return r.default.resolve(t)}).catch(function(t){return r.default.reject(t)}):r.default.reject({ret:-20,msg:"请求参数错误"})},opus_getMyCatalogList:function(t,e){return s.getMyCatalogList(e).then(function(e){return t.commit("opus_setArticle",{count:e.page_info.total_count,lists:e.list,more:e.more}),r.default.resolve(e)}).catch(function(t){return r.default.reject(t)})}}}},"3jmG":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("//Fk"),r=function(t){return t&&t.__esModule?t:{default:t}}(n),a=i("9AVj"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a);e.default={state:function(){return{message:{list:[],count:0},unread:{list:[]},detail:{}}}(),mutations:{message_setMessage:function(t,e){for(var i in e)t.message[i]=e[i]},message_setUnread:function(t,e){for(var i in e)t.unread[i]=e[i]},message_setDetail:function(t,e){for(var i in e)t.detail[i]=e[i]}},actions:{message_getMessageList:function(t,e){return s.getMessageList(e).then(function(e){return t.commit("message_setMessage",{list:e.list,more:e.more,count:e.page_info.total_count}),r.default.resolve(e)}).catch(function(t){return r.default.reject(t)})},message_getUnreadMessage:function(t,e){return s.getUnreadMessage().then(function(e){return t.commit("message_setUnread",{list:e.list}),r.default.resolve(e)}).catch(function(t){return r.default.reject(t)})},message_getMessageDetail:function(t,e){return e.msgId?s.getMessageDetail(e).then(function(e){return t.commit("message_setDetail",{list:e.list}),r.default.resolve(e)}).catch(function(t){return r.default.reject(t)}):r.default.rejectObj()},message_markMessage:function(t,e){return e.msgType&&e.msgId?s.markMessage(e).then(function(t){return r.default.resolve(t)}).catch(function(t){return r.default.reject(t)}):r.default.rejectObj()}}}},"3u21":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=i("NYxO");e.default={data:function(){return{content:"",contact:"",content_reg:!0,content_reg_con:"",contact_reg:!0,contact_reg_con:""}},computed:(0,n.mapState)({data:function(t){return t.common}}),methods:{close:function(){this.$store.dispatch("common_switch",!1)},send:function(){var e=this;return t.trim(this.content)?(this.content_reg=!0,this.content_reg_con="",t.trim(this.contact)?(this.contact_reg=!0,this.contact_reg_con="",void this.$store.dispatch("common_addFeedback",{content:this.content,contact_info:this.contact}).then(function(t){e.$store.dispatch("common_switch",!1),e.$store.dispatch("bubble_success",{ret:0,type:"top",msg:"反馈成功"})}).catch(function(t){e.$store.dispatch("bubble_fail",t)})):(this.contact_reg=!1,this.contact_reg_con="输入您的联系方式",!1)):(this.content_reg=!1,this.content_reg_con="输入您的建议",!1)}}}}).call(e,i("7t+N"))},"4IqS":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=i("NYxO"),r=i("mOGY"),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={data:function(){return{avatar:a.default,user_id:"",user:{}}},computed:(0,n.mapState)({userInfo:function(t){return t.user.info}}),methods:{uploaded:function(t,e){var i=this;if(e)return!1;this.$store.dispatch("user_setUserInfo",{avatar_url:t}).then(function(t){i.$store.dispatch("user_updateUserInfo",{}).then(function(){i.$store.dispatch("bubble_success",{ret:0,type:"top",msg:"保存成功！"});var t=i.$version.userInfo;i.$cache.setStore(t.key,i.userInfo,t.version,t.time)}).catch(function(t){i.$store.dispatch("bubble_fail",t)})})},getAuthorInfo:function(){var t=this;if(!this.user_id)return!1;this.$store.dispatch("user_getUserInfo",{userId:this.user_id}).then(function(e){t.user=e,t.$store.dispatch("bubble_success",e)}).catch(function(e){t.$store.dispatch("bubble_fail",e)})},follow:function(t){var e=this;if(!this.userInfo.isLogin)return this.$store.dispatch("bubble_fail",{ret:-11,msg:"未登录，请登陆后操作"});1==this.user.relation||3==this.user.relation?this.$store.dispatch("auth_delFollow",{userId:this.user.uid}).then(function(t){e.getAuthorInfo(),e.$store.dispatch("bubble_success",t)}).catch(function(t){e.$store.dispatch("bubble_fail",t)}):this.$store.dispatch("auth_addFollow",{userId:this.user.uid}).then(function(t){e.getAuthorInfo(),e.$store.dispatch("bubble_success",t)}).catch(function(t){e.$store.dispatch("bubble_fail",err)})},addBlackDialog:function(){var t=this;if(!this.userInfo.isLogin)return this.$store.dispatch("bubble_fail",{ret:-11,msg:"未登录，请登陆后操作"});this.$store.dispatch("bubble_showBubble",{show:!0,type:"warn",warn:{title:"确定要加入加入黑名单?",content:"添加到黑名单中的用户，无法再您的作品下评论，无法回复您，TA的作品页不会向您推送",comfireFn:function(){t.addBlack()}}})},addBlack:function(){var t=this;if(1==this.user.black)return this.$store.dispatch("bubble_fail",{ret:-31,msg:"已经添加黑名单"}),!1;this.$store.dispatch("auth_addBlack",{userId:this.user.uid}).then(function(e){t.$store.dispatch("bubble_success",{ret:0,type:"top",msg:"添加成功"})}).catch(function(e){t.$store.dispatch("bubble_fail",e)})},addReport:function(){if(!this.userInfo.isLogin)return this.$store.dispatch("bubble_fail",{ret:-11,msg:"未登录，请登陆后操作"});this.$store.dispatch("bubble_showBubble",{show:!0,type:"report",report:{content_id:this.user.uid,content_type:3}})}},mounted:function(){var e=this;t("body").on("click",function(i){var n=t(i.target);n.hasClass("j-close-2")||0!=n.parents(".j-close-2").length||(e.subMoreMoreShow=!1,e.subShareMoreShow=!1)}),this.user_id=this.$url.getUrlParam("user_id"),this.getAuthorInfo()}}}).call(e,i("7t+N"))},"4k6S":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("NYxO"),r=i("mOGY"),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={data:function(){return{avatar:a.default,hot_isCan:!0,pageIndex:0,pageSize:20,move:0}},props:[],computed:(0,n.mapState)({hot:function(t){return t.opus.hot},hot_number:function(){return Math.ceil(this.$store.state.opus.hot.count/6)},user:function(t){return t.user.info},tag:function(t){return t.opus.category}}),methods:{hotSwitch:function(t){var e=this;return!!this.hot_number&&(("left"!=t||1!=this.pageIndex)&&(("right"!=t||this.pageIndex!=this.hot_number)&&(!!this.hot_isCan&&(this.hot_number=!1,"left"==t?this.pageIndex--:this.pageIndex++,"left"==t?this.move=900*(this.pageIndex-1):6*this.pageIndex+1<=this.hot_number?this.move=900*(this.pageIndex-1):this.move=150*this.hot.lists.length+10-960,void setTimeout(function(t){e.hot_isCan=!0},500)))))},getHotList:function(){var t=this;this.$store.dispatch("opus_getHotList",{params:{pagination:"1",page:this.pageIndex,pageSize:this.pageSize},body:{catalog_type:"1"}}).then(function(e){e&&e.list&&e.list.length&&(t.pageIndex=1),t.$store.dispatch("bubble_success",e)}).catch(function(e){t.$store.dispatch("bubble_fail",e)})}},mounted:function(){this.$watch("tag.index",function(t,e){this.pageIndex=1,this.getHotList()}),this.getHotList()}}},"5hbK":function(t,e,i){i("L5uX");var n=i("VU/8")(i("LFXr"),i("EPsp"),null,null);t.exports=n.exports},"88zL":function(t,e){},"9AVj":function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=d.baseUrl+"user/getMessageList";return(0,l.default)({method:"GET",url:e,params:t,headers:{token:f}}).then(function(t){return 0!=t.data.ret?(0,d._reject)(t.data):t.data}).catch(function(t){return(0,d._rejectObj)(t)})}function a(t){var e=d.baseUrl+"user/getMessageDetail";return(0,l.default)({method:"GET",url:e,params:t,headers:{token:f}}).then(function(t){return 0!=t.data.ret?(0,d._reject)(t.data):t.data}).catch(function(t){return(0,d._rejectObj)(t)})}function s(t){var e=d.baseUrl+"user/delMessage/"+t.msgId;return f?(delete t._header,(0,l.default)({method:"DELETE",url:e,headers:{token:f}}).then(function(t){return 0!=t.data.ret?(0,d._reject)(t.data):t.data}).catch(function(t){return(0,d._rejectObj)(t)})):(0,d._rejectObj)({ret:-10,msg:"未登录"})}function o(t){var e=d.baseUrl+"user/markMessage/"+t.msgType+"/"+t.msgId;return f?(delete t._header,(0,l.default)({method:"PUT",url:e,headers:{token:f}}).then(function(t){return 0!=t.data.ret?(0,d._reject)(t.data):t.data}).catch(function(t){return(0,d._rejectObj)(t)})):(0,d._rejectObj)({ret:-10,msg:"未登录"})}function c(t){var e=d.baseUrl+"user/getUnreadMessage";return f?(0,l.default)({method:"GET",url:e,params:t,headers:{token:f}}).then(function(t){return 0!=t.data.ret?(0,d._reject)(t.data):t.data}).catch(function(t){return(0,d._rejectObj)(t)}):(0,d._rejectObj)({ret:-10,msg:"未登录"})}Object.defineProperty(e,"__esModule",{value:!0}),e._rejectObj=e._reject=e.getUnreadMessage=e.markMessage=e.delMessage=e.getMessageDetail=e.getMessageList=void 0;var u=i("mtWM"),l=n(u),d=i("AEPM"),h=i("lbHh"),m=n(h),f=m.default.get("token");e.getMessageList=r,e.getMessageDetail=a,e.delMessage=s,e.markMessage=o,e.getUnreadMessage=c,e._reject=d._reject,e._rejectObj=d._rejectObj},"9a/S":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("NYxO"),r=i("mOGY"),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={data:function(){return{avatar:a.default,pageIndex:1,pageSize:5,query:""}},props:["resType"],computed:(0,n.mapState)({count:function(t){return t.auth.count},user:function(t){return t.user.info},lists:function(t){return t.auth.lists},self:function(){return"blacklist"==this.resType||this.user_id==this.user.uid}}),methods:{pageSwitch:function(t){if(this.pageIndex==t)return!1;this.pageIndex=t,this.getList()},delBlack:function(t){var e=this;this.$store.dispatch("auth_delBlack",{userId:t}).then(function(t){e.getList(),e.$store.dispatch("bubble_success",t)}).catch(function(t){e.$store.dispatch("bubble_fail",t)})},addFollow:function(t){var e=this;this.$store.dispatch("auth_addFollow",{userId:t}).then(function(t){e.getList(),e.$store.dispatch("bubble_success",t)}).catch(function(t){tthis.$store.dispatch("bubble_fail",t)})},delFollow:function(t){var e=this;this.$store.dispatch("auth_delFollow",{userId:t}).then(function(t){e.getList(),e.$store.dispatch("bubble_success",t)}).catch(function(t){e.$store.dispatch("bubble_fail",t)})},getUserList:function(){var t=this;this.$store.dispatch("auth_getUserList",{pagination:"1",query:this.query||"",page:this.pageIndex,pageSize:this.pageSize}).then(function(e){t.$emit("author_count",t.count),t.$store.dispatch("bubble_success",e)}).catch(function(e){t.$store.dispatch("bubble_fail",e)})},getFollowList:function(){var t=this;this.$store.dispatch("auth_getFollowList",{userId:this.user_id?this.user_id:"",pagination:"1",page:this.pageIndex,pageSize:this.pageSize}).then(function(e){t.$emit("author_count",t.count),t.$store.dispatch("bubble_success",e)}).catch(function(e){t.$store.dispatch("bubble_fail",e)})},getFansList:function(){var t=this;this.$store.dispatch("auth_getFansList",{userId:this.user_id?this.user_id:"",pagination:"1",page:this.pageIndex,pageSize:this.pageSize}).then(function(e){t.$emit("author_count",t.count),t.$store.dispatch("bubble_success",e)}).catch(function(e){t.$store.dispatch("bubble_fail",e)})},getBlackList:function(){var t=this;this.$store.dispatch("auth_getBlackList",{pageSize:this.pageSize,pageIndex:this.pageIndex}).then(function(e){t.$emit("author_count",t.count),t.$store.dispatch("bubble_success",e)}).catch(function(e){t.$store.dispatch("bubble_fail",err)})},getList:function(){"search"==this.resType?this.getUserList():"blacklist"==this.resType?this.getBlackList():"followList"==this.resType?this.getFollowList():"fansList"==this.resType&&this.getFansList()}},created:function(){var t=this;this.$eventHub.$on("header_serach",function(e){if(t.query==e.query)return!1;t.query=e.query,t.getList()})},mounted:function(){this.query=this.$url.getUrlParam("query"),this.user_id=this.$url.getUrlParam("user_id"),this.getList()}}},AEPM:function(t,e,i){"use strict";function n(t){return t.errcode,o.default.reject(t)}function r(t){return n(t&&t.ret&&t.ret>0?t:{ret:t&&t.ret||-1,msg:t&&t.msg||"网络异常",error:t})}Object.defineProperty(e,"__esModule",{value:!0}),e._rejectObj=e._reject=e.distUrl=e.imgBaseUrl=e.baseUrl=e.isdebug=void 0;var a,s=i("//Fk"),o=function(t){return t&&t.__esModule?t:{default:t}}(s),c="",u="",l=window.location.href.indexOf("isdebug=1")>0;e.baseUrl=a="/java/eryuzhisen-server/",e.distUrl=u="/",e.imgBaseUrl=c="",e.isdebug=l,e.baseUrl=a,e.imgBaseUrl=c,e.distUrl=u,e._reject=n,e._rejectObj=r},ApeN:function(t,e,i){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-footer"},[i("div",{staticClass:"c-footer-content"},[i("div",{staticClass:"footer-left"},[i("div",{staticClass:"menu"},[i("a",{attrs:{href:t.url.about}},[t._v("关于我们")]),t._v("\n\t\t\t · \n\t\t\t"),i("a",{attrs:{href:t.url.about}},[t._v("用户协议")]),t._v("\n\t\t\t · \n\t\t\t"),i("a",{attrs:{href:t.url.about}},[t._v("隐私政策")]),t._v("\n\t\t\t · \n\t\t\t"),i("a",{attrs:{href:t.url.about}},[t._v("知识产权")]),t._v("\n\t\t\t · \n\t\t\t"),i("a",{attrs:{href:t.url.about}},[t._v("侵权举报")]),t._v("\n\t\t\t · \n\t\t\t"),i("a",{attrs:{href:t.url.about}},[t._v("免责声明")]),t._v("\n\t\t\t · \n\t\t\t"),i("a",{attrs:{href:t.url.contact}},[t._v("联系我们")])]),t._v(" "),i("div",{staticClass:"text"},[t._v("© 2017 耳语之森 BETA1.0版 All RightReserved. 沪ICP备17018710号")])]),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footer-right"},[n("div",{staticClass:"icon"},[n("div",{staticClass:"icon-item"},[n("div",{staticClass:"qr"},[n("img",{attrs:{src:i("tMge")}})])]),t._v(" "),n("div",{staticClass:"icon-item"})])])}]}},B0wf:function(t,e){},B6An:function(t,e,i){/**
 * cache 1.0.0
 * @license MIT
 */
!function(e,i){t.exports=i()}(0,function(){"use strict";function t(t){if(i)return void console.error("[cache] already installed. Vue.use(cache) should be called only once.");i=t,i.prototype.$cache=new e}function e(){this.memStoreMap={}}var i;return e.prototype={setStore:function(t,e,i,n){try{if(!window.localStorage)return this}catch(t){return this}var r="";if(!n)return this;var a={};a.version="localCachev1",a.dataVersion=i,a.cacheTime=(new Date).getTime()+(n?parseInt(n,10):0),a.content=e,r=JSON.stringify(a);try{this.memStoreMap[t]=r,localStorage.setItem(t,r)}catch(t){return this}return this},getStore:function(t,e,i){try{if(!window.localStorage)return!1}catch(t){return""}var n="";if(!(n=i?localStorage.getItem(t):this.memStoreMap[t]||localStorage.getItem(t)))return"";if(n.indexOf("localCachev1")>=0){var r=JSON.parse(n);return r.dataVersion!=e?"":r.cacheTime>=(new Date).getTime()?r.content:(this.removeStore(t),"")}return n},removeStore:function(t){try{if(!window.localStorage)return this}catch(t){return this}return localStorage.removeItem(t),this.memStoreMap[t]=void 0,delete this.memStoreMap[t],this}},{install:t,version:"1.0.0"}})},BCRs:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("rbcv"),r=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default={data:function(){return{count:4,lists:[{name:"奇昊大本营",time:"2小时",img:r.default,title:"路边传来了歌声",text:"《姑获鸟之夏》是日本作家京极夏彦的处女作，也是“京极堂”系列推理小说的第一部。在这部作品中，人称“京极堂”的主人公中禅寺秋彦运用广博的民俗学知识、复杂的..."},{name:"奇昊大本营",time:"2小时",img:r.default,title:"路边传来了歌声",text:"《姑获鸟之夏》是日本作家京极夏彦的处女作，也是“京极堂”系列推理小说的第一部。在这部作品中，人称“京极堂”的主人公中禅寺秋彦运用广博的民俗学知识、复杂的...",tags:["漫画"],fabulous:123,comment:8134},{name:"奇昊大本营",time:"2小时",img:r.default,title:"路边传来了歌声",text:"《姑获鸟之夏》是日本作家京极夏彦的处女作，也是“京极堂”系列推理小说的第一部。在这部作品中，人称“京极堂”的主人公中禅寺秋彦运用广博的民俗学知识、复杂的...",tags:["文字"],fabulous:123,comment:8134}],pageIndex:1,pageSize:5,messageType:1}},methods:{pageSwitch:function(t){if(this.pageSwitch==t)return!1;this.pageSwitch=t},getMessageList:function(){var t=this;this.$store.dispatch("message_getMessageList",{page:this.pageIndex,pageSize:this.pageSize,pagination:1,messageType:this.messageType}).then(function(e){t.$store.dispatch("bubble_success",e)}).catch(function(e){t.$store.dispatch("bubble_fail",e)})}},mounted:function(){this.getMessageList()}}},BFCG:function(t,e,i){i("sEEq");var n=i("VU/8")(i("3u21"),i("28R+"),null,null);t.exports=n.exports},BGNd:function(t,e){},Bhe8:function(t,e){},CPmu:function(t,e){},D3lx:function(t,e,i){i("tftU");var n=i("VU/8")(i("YmXF"),i("36Po"),null,null);t.exports=n.exports},DMxe:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.hasScroll,expression:"hasScroll"}],staticClass:"c-side-menu",on:{click:t.top}},[i("span"),t._v(" "),i("span"),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-dialog__tip"},[i("div",{staticClass:"tip-arrow"}),t._v(" "),i("div",{staticClass:"tip-text"},[t._v("置顶")])])}]}},DfkF:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("NYxO");e.default={data:function(){return{recordIndex:-1,pageIndex:1,pageSize:5,comment:"",messageType:2}},computed:(0,n.mapState)({message:function(t){return t.message.message}}),methods:{recordSwitch:function(t,e,i){var n=this;t==this.recordIndex?this.recordIndex=-1:this.recordIndex=t,0==i&&this.$store.dispatch("message_markMessage",{msgType:this.messageType,msgId:e}).then(function(t){n.$eventHub.$emit("getUnreadMessage"),n.getMessageList(),n.$store.dispatch("bubble_success",t)}).catch(function(t){n.$store.dispatch("bubble_fail",t)})},getMessageList:function(){var t=this;this.$store.dispatch("message_getMessageList",{page:this.pageIndex,pageSize:this.pageSize,pagination:1,messageType:this.messageType}).then(function(e){t.$store.dispatch("bubble_success",e)}).catch(function(e){t.$store.dispatch("bubble_fail",e)})},pageSwitch:function(t){if(this.pageIndex==t)return!1;this.pageIndex=t,this.getMessageList()},addReport:function(t){this.$store.dispatch("bubble_showBubble",{show:!0,type:"report",report:{content_id:t,content_type:3}})},getMessageDetail:function(t){var e=this;this.$store.dispatch("message_getMessageDetail",{msgId:t}).then(function(t){e.$store.dispatch("bubble_success",t)}).catch(function(t){e.$store.dispatch("bubble_fail",t)})},addComment:function(t){var e=this;this.$store.dispatch("opus_addComment",{to_comment_id:t.to_comment_id,to_reply_comment_id:t.to_reply_comment_id,comment:this.comment,catalog_id:t.catalog_id,chapter_id:t.chapter_id}).then(function(t){e.comment="",e.recordIndex=-2,e.getMessageList(),e.$store.dispatch("bubble_success",t)}).catch(function(t){e.$store.dispatch("bubble_fail",t)})},emitComment:function(t){if(!t)return!1;this.addComment({to_reply_comment_id:t.to_comment_id,comment:this.comment,catalog_id:t.catalog_id,chapter_id:t.chapter_id})}},mounted:function(){this.getMessageList()}}},EB0Y:function(t,e){},EPsp:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"c-upload",attrs:{id:t.container}})},staticRenderFns:[]}},EPvs:function(t,e,i){i("jZOH");var n=i("VU/8")(i("DfkF"),i("QZz9"),null,null);t.exports=n.exports},Eion:function(t,e,i){i("zgUS");var n=i("VU/8")(i("yfst"),i("iyE5"),null,null);t.exports=n.exports},FG6U:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-artice-comment"},[i("div",{staticClass:"c-artice-comment-wrap"},[t._l(t.comment.list,function(e,n){return i("div",{staticClass:"c-artice-comment-list",attrs:{"data-uid":e.user.uid,"data-comment_id":e.comment_id}},[i("div",{staticClass:"comment__content"},[i("div",{staticClass:"content__top"},[i("div",{staticClass:"top-img"},[i("img",{attrs:{src:e.user.avatar_url||t.avatar}})]),t._v(" "),i("div",{staticClass:"top-name"},[t._v(t._s(e.user.nick_name))])]),t._v(" "),i("div",{staticClass:"content__body"},[t._v(t._s(e.comment))]),t._v(" "),i("div",{staticClass:"content__bottom"},[i("div",{staticClass:"bottom-jubao",on:{click:t.addReport}},[t._v("举报")]),t._v(" "),i("div",{staticClass:"bottom-record",on:{click:function(e){t.replayCommit(n,-1)}}},[t._v("回复")]),t._v(" "),i("div",{staticClass:"bottom-time"},[t._v(t._s(e.publish_time))]),t._v(" "),i("div",{staticClass:"bottom-fabulous",on:{click:t.addCommentPraise}},[i("span",{class:e.hasFabulous?"z-on":""}),i("strong",[t._v(t._s(e.praise_count))])])])]),t._v(" "),-1==e.replayIndex?i("div",{staticClass:"content__reply z-top"},[i("div",{staticClass:"content__reply-form"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.comment_con,expression:"comment_con"}],attrs:{type:"text",placeholder:"回复评论..."},domProps:{value:t.comment_con},on:{input:function(e){e.target.composing||(t.comment_con=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"content__reply-btn",on:{click:function(i){t.sendComment(e.comment_id)}}},[t._v("提交")])]):t._e(),t._v(" "),i("div",{staticClass:"comment__record"},[t._l(e.replys,function(r,a){return i("div",{staticClass:"record__item",attrs:{"data-uid":r.user.uid,"data-comment_id":r.comment_id,"data-index":a}},[i("div",{staticClass:"record__item-content"},[i("div",{staticClass:"item-text"},[i("p",[i("strong",[t._v(t._s(r.user.nick_name))]),t._v(" "),r.reply_to_user?i("em",[t._v(" 回复 "),i("strong",[t._v(t._s(r.reply_to_user.nick_name))])]):t._e(),t._v("：\n                            "+t._s(r.comment)+"\n                        ")])]),t._v(" "),i("div",{staticClass:"item-bottom"},[i("div",{staticClass:"item-bottom-jubao",on:{click:t.addReport}},[t._v("举报")]),t._v(" "),i("div",{staticClass:"item-bottom-record",on:{click:function(e){t.replayCommit(n,a)}}},[t._v("回复")]),t._v(" "),i("div",{staticClass:"item-bottom-time"},[t._v(t._s(r.publish_time))])])]),t._v(" "),a==e.replayIndex?i("div",{staticClass:"content__reply"},[i("div",{staticClass:"content__reply-form"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.comment_con,expression:"comment_con"}],attrs:{type:"text",placeholder:"回复评论..."},domProps:{value:t.comment_con},on:{input:function(e){e.target.composing||(t.comment_con=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"content__reply-btn",on:{click:function(i){t.sendReplyComment(e.comment_id,r.comment_id)}}},[t._v("提交")])]):t._e()])}),t._v(" "),e.replys&&e.reply_page_info.total_count-e.replys.length>0?i("div",{staticClass:"record__page"},[t._v("\n                还有"),i("span",[t._v(t._s(e.reply_page_info.total_count-e.replys.length))]),t._v("条回复 "),i("strong",{on:{click:function(i){t.getSubCommentMore(e)}}},[t._v("点击加载更多")])]):t._e()],2)])}),t._v(" "),0==t.comment.count?i("Empty"):t._e()],2),t._v(" "),i("Page",{attrs:{count:t.comment.count,length:t.pageSize,index:t.pageIndex},on:{page_switch:t.pageSwitch}})],1)},staticRenderFns:[]}},FhuJ:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["data"]}},HFHI:function(t,e,i){i("eemp");var n=i("VU/8")(i("1nOS"),i("nL7d"),null,null);t.exports=n.exports},HvkJ:function(t,e,i){"use strict";!function(t,e){function i(t,e){for(var i,n=[],s=0;s<t.length;++s){if(!(i=a[t[s]]||r(t[s])))throw"module definition dependecy not found: "+t[s];n.push(i)}e.apply(null,n)}function n(t,n,r){if("string"!=typeof t)throw"invalid module definition, module id must be defined and be a string";if(n===e)throw"invalid module definition, dependencies must be specified";if(r===e)throw"invalid module definition, definition function must be specified";i(n,function(){a[t]=r.apply(null,arguments)})}function r(e){for(var i=t,n=e.split(/[.\/]/),r=0;r<n.length;++r){if(!i[n[r]])return;i=i[n[r]]}return i}var a={};n("moxie/core/utils/Basic",[],function(){var t=function(t){return void 0===t?"undefined":null===t?"null":t.nodeType?"node":{}.toString.call(t).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},e=function(n){return i(arguments,function(r,a){a>0&&i(r,function(i,r){void 0!==i&&(t(n[r])===t(i)&&~s(t(i),["array","object"])?e(n[r],i):n[r]=i)})}),n},i=function(t,e){var i,n,r;if(t){try{i=t.length}catch(t){i=void 0}if(void 0===i){for(n in t)if(t.hasOwnProperty(n)&&!1===e(t[n],n))return}else for(r=0;r<i;r++)if(!1===e(t[r],r))return}},n=function(e){var i;if(!e||"object"!==t(e))return!0;for(i in e)return!1;return!0},r=function(e,i){function n(a){"function"===t(e[a])&&e[a](function(t){++a<r&&!t?n(a):i(t)})}var r=e.length;"function"!==t(i)&&(i=function(){}),e&&e.length||i(),n(0)},a=function(t,e){var n=0,r=t.length,a=new Array(r);i(t,function(t,i){t(function(t){if(t)return e(t);var s=[].slice.call(arguments);s.shift(),a[i]=s,++n===r&&(a.unshift(null),e.apply(this,a))})})},s=function(t,e){if(e){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i}return-1},o=function(e,i){var n=[];"array"!==t(e)&&(e=[e]),"array"!==t(i)&&(i=[i]);for(var r in e)-1===s(e[r],i)&&n.push(e[r]);return!!n.length&&n},c=function(t,e){var n=[];return i(t,function(t){-1!==s(t,e)&&n.push(t)}),n.length?n:null},u=function(t){var e,i=[];for(e=0;e<t.length;e++)i[e]=t[e];return i};return{guid:function(){var t=0;return function(e){var i,n=(new Date).getTime().toString(32);for(i=0;i<5;i++)n+=Math.floor(65535*Math.random()).toString(32);return(e||"o_")+n+(t++).toString(32)}}(),typeOf:t,extend:e,each:i,isEmptyObj:n,inSeries:r,inParallel:a,inArray:s,arrayDiff:o,arrayIntersect:c,toArray:u,trim:function(t){return t?String.prototype.trim?String.prototype.trim.call(t):t.toString().replace(/^\s*/,"").replace(/\s*$/,""):t},parseSizeStr:function(t){if("string"!=typeof t)return t;var e,i={t:1099511627776,g:1073741824,m:1048576,k:1024};return t=/^([0-9]+)([mgk]?)$/.exec(t.toLowerCase().replace(/[^0-9mkg]/g,"")),e=t[2],t=+t[1],i.hasOwnProperty(e)&&(t*=i[e]),t}}}),n("moxie/core/I18n",["moxie/core/utils/Basic"],function(t){var e={};return{addI18n:function(i){return t.extend(e,i)},translate:function(t){return e[t]||t},_:function(t){return this.translate(t)},sprintf:function(e){var i=[].slice.call(arguments,1);return e.replace(/%[a-z]/g,function(){var e=i.shift();return"undefined"!==t.typeOf(e)?e:""})}}}),n("moxie/core/utils/Mime",["moxie/core/utils/Basic","moxie/core/I18n"],function(t,e){var i={mimes:{},extensions:{},addMimeType:function(t){var e,i,n,r=t.split(/,/);for(e=0;e<r.length;e+=2){for(n=r[e+1].split(/ /),i=0;i<n.length;i++)this.mimes[n[i]]=r[e];this.extensions[r[e]]=n}},extList2mimes:function(e,i){var n,r,a,s,o=this,c=[];for(r=0;r<e.length;r++)for(n=e[r].extensions.split(/\s*,\s*/),a=0;a<n.length;a++){if("*"===n[a])return[];if(s=o.mimes[n[a]])-1===t.inArray(s,c)&&c.push(s);else{if(!i||!/^\w+$/.test(n[a]))return[];c.push("."+n[a])}}return c},mimes2exts:function(e){var i=this,n=[];return t.each(e,function(e){if("*"===e)return n=[],!1;var r=e.match(/^(\w+)\/(\*|\w+)$/);r&&("*"===r[2]?t.each(i.extensions,function(t,e){new RegExp("^"+r[1]+"/").test(e)&&[].push.apply(n,i.extensions[e])}):i.extensions[e]&&[].push.apply(n,i.extensions[e]))}),n},mimes2extList:function(i){var n=[],r=[];return"string"===t.typeOf(i)&&(i=t.trim(i).split(/\s*,\s*/)),r=this.mimes2exts(i),n.push({title:e.translate("Files"),extensions:r.length?r.join(","):"*"}),n.mimes=i,n},getFileExtension:function(t){var e=t&&t.match(/\.([^.]+)$/);return e?e[1].toLowerCase():""},getFileMime:function(t){return this.mimes[this.getFileExtension(t)]||""}};return i.addMimeType("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe"),i}),n("moxie/core/utils/Env",["moxie/core/utils/Basic"],function(t){function e(t,e,i){var n=0,r=0,a=0,s={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},o=function(t){return t=(""+t).replace(/[_\-+]/g,"."),t=t.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,"."),t.length?t.split("."):[-8]},c=function(t){return t?isNaN(t)?s[t]||-7:parseInt(t,10):0};for(t=o(t),e=o(e),r=Math.max(t.length,e.length),n=0;n<r;n++)if(t[n]!=e[n]){if(t[n]=c(t[n]),e[n]=c(e[n]),t[n]<e[n]){a=-1;break}if(t[n]>e[n]){a=1;break}}if(!i)return a;switch(i){case">":case"gt":return a>0;case">=":case"ge":return a>=0;case"<=":case"le":return a<=0;case"==":case"=":case"eq":return 0===a;case"<>":case"!=":case"ne":return 0!==a;case"":case"<":case"lt":return a<0;default:return null}}var i=function(t){var e="major",i="name",n="version",r={has:function(t,e){return-1!==e.toLowerCase().indexOf(t.toLowerCase())},lowerize:function(t){return t.toLowerCase()}},a={rgx:function(){for(var t,e,i,n,r,a,s,o=0,c=arguments;o<c.length;o+=2){var u=c[o],l=c[o+1];if(void 0===t){t={};for(n in l)r=l[n],"object"==typeof r?t[r[0]]=void 0:t[r]=void 0}for(e=i=0;e<u.length;e++)if(a=u[e].exec(this.getUA())){for(n=0;n<l.length;n++)s=a[++i],r=l[n],"object"==typeof r&&r.length>0?2==r.length?"function"==typeof r[1]?t[r[0]]=r[1].call(this,s):t[r[0]]=r[1]:3==r.length?"function"!=typeof r[1]||r[1].exec&&r[1].test?t[r[0]]=s?s.replace(r[1],r[2]):void 0:t[r[0]]=s?r[1].call(this,s,r[2]):void 0:4==r.length&&(t[r[0]]=s?r[3].call(this,s.replace(r[1],r[2])):void 0):t[r]=s||void 0;break}if(a)break}return t},str:function(t,e){for(var i in e)if("object"==typeof e[i]&&e[i].length>0){for(var n=0;n<e[i].length;n++)if(r.has(e[i][n],t))return"?"===i?void 0:i}else if(r.has(e[i],t))return"?"===i?void 0:i;return t}},s={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",RT:"ARM"}}}},o={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[i,n,e],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[i,"Opera"],n,e],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i],[i,n,e],[/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i],[[i,"IE"],n,e],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[i,"Yandex"],n,e],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[i,/_/g," "],n,e],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i],[i,n,e],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[i,"Dolphin"],n,e],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[i,"Chrome"],n,e],[/((?:android.+))version\/((\d+)?[\w\.]+)\smobile\ssafari/i],[[i,"Android Browser"],n,e],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[n,e,[i,"Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[n,e,i],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[i,[e,a.str,s.browser.oldsafari.major],[n,a.str,s.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],[i,n,e],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[i,"Netscape"],n,e],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(uc\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[i,n,e]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[i,n],[/rv\:([\w\.]+).*(gecko)/i],[n,i]],os:[[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[i,[n,a.str,s.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[i,"Windows"],[n,a.str,s.os.windows.version]],[/\((bb)(10);/i],[[i,"BlackBerry"],n],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)\/([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i],[i,n],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[i,"Symbian"],n],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[i,"Firefox OS"],n],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[i,n],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[i,"Chromium OS"],n],[/(sunos)\s?([\w\.]+\d)*/i],[[i,"Solaris"],n],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[i,n],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[i,"iOS"],[n,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i],[i,[n,/_/g,"."]],[/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(macintosh|mac(?=_powerpc)|plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos)/i,/(unix)\s?([\w\.]+)*/i],[i,n]]};return(new function(t){var e=t||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"");this.getBrowser=function(){return a.rgx.apply(this,o.browser)},this.getEngine=function(){return a.rgx.apply(this,o.engine)},this.getOS=function(){return a.rgx.apply(this,o.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS()}},this.getUA=function(){return e},this.setUA=function(t){return e=t,this},this.setUA(e)}).getResult()}(),n=function(){var e={define_property:!1,create_canvas:function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}(),return_response_type:function(e){try{if(-1!==t.inArray(e,["","text","document"]))return!0;if(window.XMLHttpRequest){var i=new XMLHttpRequest;if(i.open("get","/"),"responseType"in i)return i.responseType=e,i.responseType===e}}catch(t){}return!1},use_data_uri:function(){var t=new Image;return t.onload=function(){e.use_data_uri=1===t.width&&1===t.height},setTimeout(function(){t.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="},1),!1}(),use_data_uri_over32kb:function(){return e.use_data_uri&&("IE"!==r.browser||r.version>=9)},use_data_uri_of:function(t){return e.use_data_uri&&t<33e3||e.use_data_uri_over32kb()},use_fileinput:function(){var t=document.createElement("input");return t.setAttribute("type","file"),!t.disabled}};return function(i){var n=[].slice.call(arguments);return n.shift(),"function"===t.typeOf(e[i])?e[i].apply(this,n):!!e[i]}}(),r={can:n,browser:i.browser.name,version:parseFloat(i.browser.major),os:i.os.name,osVersion:i.os.version,verComp:e,swf_url:"../flash/Moxie.swf",xap_url:"../silverlight/Moxie.xap",global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};return r.OS=r.os,r}),n("moxie/core/utils/Dom",["moxie/core/utils/Env"],function(t){var e=function(t){return"string"!=typeof t?t:document.getElementById(t)},i=function(t,e){return!!t.className&&new RegExp("(^|\\s+)"+e+"(\\s+|$)").test(t.className)};return{get:e,hasClass:i,addClass:function(t,e){i(t,e)||(t.className=t.className?t.className.replace(/\s+$/,"")+" "+e:e)},removeClass:function(t,e){if(t.className){var i=new RegExp("(^|\\s+)"+e+"(\\s+|$)");t.className=t.className.replace(i,function(t,e,i){return" "===e&&" "===i?" ":""})}},getStyle:function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null)[e]:void 0},getPos:function(e,i){function n(t){var e,i,n=0,r=0;return t&&(i=t.getBoundingClientRect(),e="CSS1Compat"===u.compatMode?u.documentElement:u.body,n=i.left+e.scrollLeft,r=i.top+e.scrollTop),{x:n,y:r}}var r,a,s,o=0,c=0,u=document;if(e=e,i=i||u.body,e&&e.getBoundingClientRect&&"IE"===t.browser&&(!u.documentMode||u.documentMode<8))return a=n(e),s=n(i),{x:a.x-s.x,y:a.y-s.y};for(r=e;r&&r!=i&&r.nodeType;)o+=r.offsetLeft||0,c+=r.offsetTop||0,r=r.offsetParent;for(r=e.parentNode;r&&r!=i&&r.nodeType;)o-=r.scrollLeft||0,c-=r.scrollTop||0,r=r.parentNode;return{x:o,y:c}},getSize:function(t){return{w:t.offsetWidth||t.clientWidth,h:t.offsetHeight||t.clientHeight}}}}),n("moxie/core/Exceptions",["moxie/core/utils/Basic"],function(t){function e(t,e){var i;for(i in t)if(t[i]===e)return i;return null}return{RuntimeError:function(){function i(t){this.code=t,this.name=e(n,t),this.message=this.name+": RuntimeError "+this.code}var n={NOT_INIT_ERR:1,NOT_SUPPORTED_ERR:9,JS_ERR:4};return t.extend(i,n),i.prototype=Error.prototype,i}(),OperationNotAllowedException:function(){function e(t){this.code=t,this.name="OperationNotAllowedException"}return t.extend(e,{NOT_ALLOWED_ERR:1}),e.prototype=Error.prototype,e}(),ImageError:function(){function i(t){this.code=t,this.name=e(n,t),this.message=this.name+": ImageError "+this.code}var n={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2};return t.extend(i,n),i.prototype=Error.prototype,i}(),FileException:function(){function i(t){this.code=t,this.name=e(n,t),this.message=this.name+": FileException "+this.code}var n={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};return t.extend(i,n),i.prototype=Error.prototype,i}(),DOMException:function(){function i(t){this.code=t,this.name=e(n,t),this.message=this.name+": DOMException "+this.code}var n={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};return t.extend(i,n),i.prototype=Error.prototype,i}(),EventException:function(){function e(t){this.code=t,this.name="EventException"}return t.extend(e,{UNSPECIFIED_EVENT_TYPE_ERR:0}),e.prototype=Error.prototype,e}()}}),n("moxie/core/EventTarget",["moxie/core/Exceptions","moxie/core/utils/Basic"],function(t,e){function i(){var i={};e.extend(this,{uid:null,init:function(){this.uid||(this.uid=e.guid("uid_"))},addEventListener:function(t,n,r,a){var s,o=this;if(t=e.trim(t),/\s/.test(t))return void e.each(t.split(/\s+/),function(t){o.addEventListener(t,n,r,a)});t=t.toLowerCase(),r=parseInt(r,10)||0,s=i[this.uid]&&i[this.uid][t]||[],s.push({fn:n,priority:r,scope:a||this}),i[this.uid]||(i[this.uid]={}),i[this.uid][t]=s},hasEventListener:function(t){return t?!(!i[this.uid]||!i[this.uid][t]):!!i[this.uid]},removeEventListener:function(t,n){t=t.toLowerCase();var r,a=i[this.uid]&&i[this.uid][t];if(a){if(n){for(r=a.length-1;r>=0;r--)if(a[r].fn===n){a.splice(r,1);break}}else a=[];a.length||(delete i[this.uid][t],e.isEmptyObj(i[this.uid])&&delete i[this.uid])}},removeAllEventListeners:function(){i[this.uid]&&delete i[this.uid]},dispatchEvent:function(n){var r,a,s,o,c={},u=!0;if("string"!==e.typeOf(n)){if(o=n,"string"!==e.typeOf(o.type))throw new t.EventException(t.EventException.UNSPECIFIED_EVENT_TYPE_ERR);n=o.type,void 0!==o.total&&void 0!==o.loaded&&(c.total=o.total,c.loaded=o.loaded),c.async=o.async||!1}if(-1!==n.indexOf("::")?function(t){r=t[0],n=t[1]}(n.split("::")):r=this.uid,n=n.toLowerCase(),a=i[r]&&i[r][n]){a.sort(function(t,e){return e.priority-t.priority}),s=[].slice.call(arguments),s.shift(),c.type=n,s.unshift(c);var l=[];e.each(a,function(t){s[0].target=t.scope,c.async?l.push(function(e){setTimeout(function(){e(!1===t.fn.apply(t.scope,s))},1)}):l.push(function(e){e(!1===t.fn.apply(t.scope,s))})}),l.length&&e.inSeries(l,function(t){u=!t})}return u},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},trigger:function(){return this.dispatchEvent.apply(this,arguments)},convertEventPropsToHandlers:function(t){var i;"array"!==e.typeOf(t)&&(t=[t]);for(var n=0;n<t.length;n++)i="on"+t[n],"function"===e.typeOf(this[i])?this.addEventListener(t[n],this[i]):"undefined"===e.typeOf(this[i])&&(this[i]=null)}})}return i.instance=new i,i}),n("moxie/core/utils/Encode",[],function(){var t=function(t){return unescape(encodeURIComponent(t))},e=function(t){return decodeURIComponent(escape(t))};return{utf8_encode:t,utf8_decode:e,atob:function(t,i){if("function"==typeof window.atob)return i?e(window.atob(t)):window.atob(t);var n,r,a,s,o,c,u,l,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=0,m=0,f="",p=[];if(!t)return t;t+="";do{s=d.indexOf(t.charAt(h++)),o=d.indexOf(t.charAt(h++)),c=d.indexOf(t.charAt(h++)),u=d.indexOf(t.charAt(h++)),l=s<<18|o<<12|c<<6|u,n=l>>16&255,r=l>>8&255,a=255&l,p[m++]=64==c?String.fromCharCode(n):64==u?String.fromCharCode(n,r):String.fromCharCode(n,r,a)}while(h<t.length);return f=p.join(""),i?e(f):f},btoa:function(e,i){if(i&&t(e),"function"==typeof window.btoa)return window.btoa(e);var n,r,a,s,o,c,u,l,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=0,m=0,f="",p=[];if(!e)return e;do{n=e.charCodeAt(h++),r=e.charCodeAt(h++),a=e.charCodeAt(h++),l=n<<16|r<<8|a,s=l>>18&63,o=l>>12&63,c=l>>6&63,u=63&l,p[m++]=d.charAt(s)+d.charAt(o)+d.charAt(c)+d.charAt(u)}while(h<e.length);f=p.join("");var g=e.length%3;return(g?f.slice(0,g-3):f)+"===".slice(g||3)}}}),n("moxie/runtime/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/EventTarget"],function(t,e,i){function n(i,r,s,o,c){var u,l=this,d=t.guid(r+"_"),h=c||"browser";i=i||{},a[d]=this,s=t.extend({access_binary:!1,access_image_binary:!1,display_media:!1,do_cors:!1,drag_and_drop:!1,filter_by_extension:!0,resize_image:!1,report_upload_progress:!1,return_response_headers:!1,return_response_type:!1,return_status_code:!0,send_custom_headers:!1,select_file:!1,select_folder:!1,select_multiple:!0,send_binary_string:!1,send_browser_cookies:!0,send_multipart:!0,slice_blob:!1,stream_upload:!1,summon_file_dialog:!1,upload_filesize:!0,use_http_method:!0},s),i.preferred_caps&&(h=n.getMode(o,i.preferred_caps,h)),u=function(){var e={};return{exec:function(t,i,n,r){if(u[i]&&(e[t]||(e[t]={context:this,instance:new u[i]}),e[t].instance[n]))return e[t].instance[n].apply(this,r)},removeInstance:function(t){delete e[t]},removeAllInstances:function(){var i=this;t.each(e,function(e,n){"function"===t.typeOf(e.instance.destroy)&&e.instance.destroy.call(e.context),i.removeInstance(n)})}}}(),t.extend(this,{initialized:!1,uid:d,type:r,mode:n.getMode(o,i.required_caps,h),shimid:d+"_container",clients:0,options:i,can:function(e,i){var r=arguments[2]||s;if("string"===t.typeOf(e)&&"undefined"===t.typeOf(i)&&(e=n.parseCaps(e)),"object"===t.typeOf(e)){for(var a in e)if(!this.can(a,e[a],r))return!1;return!0}return"function"===t.typeOf(r[e])?r[e].call(this,i):i===r[e]},getShimContainer:function(){var i,n=e.get(this.shimid);return n||(i=this.options.container?e.get(this.options.container):document.body,n=document.createElement("div"),n.id=this.shimid,n.className="moxie-shim moxie-shim-"+this.type,t.extend(n.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),i.appendChild(n),i=null),n},getShim:function(){return u},shimExec:function(t,e){var i=[].slice.call(arguments,2);return l.getShim().exec.call(this,this.uid,t,e,i)},exec:function(t,e){var i=[].slice.call(arguments,2);return l[t]&&l[t][e]?l[t][e].apply(this,i):l.shimExec.apply(this,arguments)},destroy:function(){if(l){var t=e.get(this.shimid);t&&t.parentNode.removeChild(t),u&&u.removeAllInstances(),this.unbindAll(),delete a[this.uid],this.uid=null,d=l=u=t=null}}}),this.mode&&i.required_caps&&!this.can(i.required_caps)&&(this.mode=!1)}var r={},a={};return n.order="html5,flash,silverlight,html4",n.getRuntime=function(t){return!!a[t]&&a[t]},n.addConstructor=function(t,e){e.prototype=i.instance,r[t]=e},n.getConstructor=function(t){return r[t]||null},n.getInfo=function(t){var e=n.getRuntime(t);return e?{uid:e.uid,type:e.type,mode:e.mode,can:function(){return e.can.apply(e,arguments)}}:null},n.parseCaps=function(e){var i={};return"string"!==t.typeOf(e)?e||{}:(t.each(e.split(","),function(t){i[t]=!0}),i)},n.can=function(t,e){var i,r,a=n.getConstructor(t);return!!a&&(i=new a({required_caps:e}),r=i.mode,i.destroy(),!!r)},n.thatCan=function(t,e){var i=(e||n.order).split(/\s*,\s*/);for(var r in i)if(n.can(i[r],t))return i[r];return null},n.getMode=function(e,i,n){var r=null;if("undefined"===t.typeOf(n)&&(n="browser"),i&&!t.isEmptyObj(e)){if(t.each(i,function(i,n){if(e.hasOwnProperty(n)){var a=e[n](i);if("string"==typeof a&&(a=[a]),r){if(!(r=t.arrayIntersect(r,a)))return r=!1}else r=a}}),r)return-1!==t.inArray(n,r)?n:r[0];if(!1===r)return!1}return n},n.capTrue=function(){return!0},n.capFalse=function(){return!1},n.capTest=function(t){return function(){return!!t}},n}),n("moxie/runtime/RuntimeClient",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/Runtime"],function(t,e,i){return function(){var n;e.extend(this,{connectRuntime:function(r){function a(e){var s,c;return e.length?(s=e.shift(),(c=i.getConstructor(s))?(n=new c(r),n.bind("Init",function(){n.initialized=!0,setTimeout(function(){n.clients++,o.trigger("RuntimeInit",n)},1)}),n.bind("Error",function(){n.destroy(),a(e)}),n.mode?void n.init():void n.trigger("Error")):void a(e)):(o.trigger("RuntimeError",new t.RuntimeError(t.RuntimeError.NOT_INIT_ERR)),void(n=null))}var s,o=this;if("string"===e.typeOf(r)?s=r:"string"===e.typeOf(r.ruid)&&(s=r.ruid),s){if(n=i.getRuntime(s))return n.clients++,n;throw new t.RuntimeError(t.RuntimeError.NOT_INIT_ERR)}a((r.runtime_order||i.order).split(/\s*,\s*/))},getRuntime:function(){return n&&n.uid?n:(n=null,null)},disconnectRuntime:function(){n&&--n.clients<=0&&(n.destroy(),n=null)}})}}),n("moxie/file/Blob",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient"],function(t,e,i){function n(a,s){function o(e,i,a){var s,o=r[this.uid];return"string"===t.typeOf(o)&&o.length?(s=new n(null,{type:a,size:i-e}),s.detach(o.substr(e,s.size)),s):null}i.call(this),a&&this.connectRuntime(a),s?"string"===t.typeOf(s)&&(s={data:s}):s={},t.extend(this,{uid:s.uid||t.guid("uid_"),ruid:a,size:s.size||0,type:s.type||"",slice:function(t,e,i){return this.isDetached()?o.apply(this,arguments):this.getRuntime().exec.call(this,"Blob","slice",this.getSource(),t,e,i)},getSource:function(){return r[this.uid]?r[this.uid]:null},detach:function(t){this.ruid&&(this.getRuntime().exec.call(this,"Blob","destroy"),this.disconnectRuntime(),this.ruid=null),t=t||"";var i=t.match(/^data:([^;]*);base64,/);i&&(this.type=i[1],t=e.atob(t.substring(t.indexOf("base64,")+7))),this.size=t.length,r[this.uid]=t},isDetached:function(){return!this.ruid&&"string"===t.typeOf(r[this.uid])},destroy:function(){this.detach(),delete r[this.uid]}}),s.data?this.detach(s.data):r[this.uid]=s}var r={};return n}),n("moxie/file/File",["moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/file/Blob"],function(t,e,i){function n(n,r){var a,s;if(r||(r={}),s=r.type&&""!==r.type?r.type:e.getFileMime(r.name),r.name)a=r.name.replace(/\\/g,"/"),a=a.substr(a.lastIndexOf("/")+1);else{var o=s.split("/")[0];a=t.guid((""!==o?o:"file")+"_"),e.extensions[s]&&(a+="."+e.extensions[s][0])}i.apply(this,arguments),t.extend(this,{type:s||"",name:a||t.guid("file_"),lastModifiedDate:r.lastModifiedDate||(new Date).toLocaleString()})}return n.prototype=i.prototype,n}),n("moxie/file/FileInput",["moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/I18n","moxie/file/File","moxie/runtime/Runtime","moxie/runtime/RuntimeClient"],function(t,e,i,n,r,a,s,o,c){function u(r){var u,d,h,m=this;if(-1!==t.inArray(t.typeOf(r),["string","node"])&&(r={browse_button:r}),!(d=i.get(r.browse_button)))throw new n.DOMException(n.DOMException.NOT_FOUND_ERR);h={accept:[{title:a.translate("All Files"),extensions:"*"}],name:"file",multiple:!1,required_caps:!1,container:d.parentNode||document.body},r=t.extend({},h,r),"string"==typeof r.required_caps&&(r.required_caps=o.parseCaps(r.required_caps)),"string"==typeof r.accept&&(r.accept=e.mimes2extList(r.accept)),u=i.get(r.container),u||(u=document.body),"static"===i.getStyle(u,"position")&&(u.style.position="relative"),u=d=null,c.call(m),t.extend(m,{uid:t.guid("uid_"),ruid:null,shimid:null,files:null,init:function(){m.convertEventPropsToHandlers(l),m.bind("RuntimeInit",function(e,n){m.ruid=n.uid,m.shimid=n.shimid,m.bind("Ready",function(){m.trigger("Refresh")},999),m.bind("Change",function(){var e=n.exec.call(m,"FileInput","getFiles");m.files=[],t.each(e,function(t){if(0===t.size)return!0;m.files.push(new s(m.ruid,t))})},999),m.bind("Refresh",function(){var e,a,s,o;s=i.get(r.browse_button),o=i.get(n.shimid),s&&(e=i.getPos(s,i.get(r.container)),a=i.getSize(s),o&&t.extend(o.style,{top:e.y+"px",left:e.x+"px",width:a.w+"px",height:a.h+"px"})),o=s=null}),n.exec.call(m,"FileInput","init",r)}),m.connectRuntime(t.extend({},r,{required_caps:{select_file:!0}}))},disable:function(e){var i=this.getRuntime();i&&i.exec.call(this,"FileInput","disable","undefined"===t.typeOf(e)||e)},refresh:function(){m.trigger("Refresh")},destroy:function(){var e=this.getRuntime();e&&(e.exec.call(this,"FileInput","destroy"),this.disconnectRuntime()),"array"===t.typeOf(this.files)&&t.each(this.files,function(t){t.destroy()}),this.files=null}})}var l=["ready","change","cancel","mouseenter","mouseleave","mousedown","mouseup"];return u.prototype=r.instance,u}),n("moxie/file/FileDrop",["moxie/core/I18n","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/utils/Basic","moxie/file/File","moxie/runtime/RuntimeClient","moxie/core/EventTarget","moxie/core/utils/Mime"],function(t,e,i,n,r,a,s,o){function c(i){var s,c=this;"string"==typeof i&&(i={drop_zone:i}),s={accept:[{title:t.translate("All Files"),extensions:"*"}],required_caps:{drag_and_drop:!0}},i="object"==typeof i?n.extend({},s,i):s,i.container=e.get(i.drop_zone)||document.body,"static"===e.getStyle(i.container,"position")&&(i.container.style.position="relative"),"string"==typeof i.accept&&(i.accept=o.mimes2extList(i.accept)),a.call(c),n.extend(c,{uid:n.guid("uid_"),ruid:null,files:null,init:function(){c.convertEventPropsToHandlers(u),c.bind("RuntimeInit",function(t,e){c.ruid=e.uid,c.bind("Drop",function(){var t=e.exec.call(c,"FileDrop","getFiles");c.files=[],n.each(t,function(t){c.files.push(new r(c.ruid,t))})},999),e.exec.call(c,"FileDrop","init",i),c.dispatchEvent("ready")}),c.connectRuntime(i)},destroy:function(){var t=this.getRuntime();t&&(t.exec.call(this,"FileDrop","destroy"),this.disconnectRuntime()),this.files=null}})}var u=["ready","dragenter","dragleave","drop","error"];return c.prototype=s.instance,c}),n("moxie/runtime/RuntimeTarget",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(t,e,i){function n(){this.uid=t.guid("uid_"),e.call(this),this.destroy=function(){this.disconnectRuntime(),this.unbindAll()}}return n.prototype=i.instance,n}),n("moxie/file/FileReader",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/core/Exceptions","moxie/core/EventTarget","moxie/file/Blob","moxie/file/File","moxie/runtime/RuntimeTarget"],function(t,e,i,n,r,a,s){function o(){function n(t,n){function l(t){u.readyState=o.DONE,u.error=t,u.trigger("error"),d()}function d(){a.destroy(),a=null,u.trigger("loadend")}if(a=new s,this.convertEventPropsToHandlers(c),this.readyState===o.LOADING)return l(new i.DOMException(i.DOMException.INVALID_STATE_ERR));if(this.readyState=o.LOADING,this.trigger("loadstart"),n instanceof r)if(n.isDetached()){var h=n.getSource();switch(t){case"readAsText":case"readAsBinaryString":this.result=h;break;case"readAsDataURL":this.result="data:"+n.type+";base64,"+e.btoa(h)}this.readyState=o.DONE,this.trigger("load"),d()}else!function(e){a.bind("Error",function(t,e){l(e)}),a.bind("Progress",function(t){u.result=e.exec.call(a,"FileReader","getResult"),u.trigger(t)}),a.bind("Load",function(t){u.readyState=o.DONE,u.result=e.exec.call(a,"FileReader","getResult"),u.trigger(t),d()}),e.exec.call(a,"FileReader","read",t,n)}(a.connectRuntime(n.ruid));else l(new i.DOMException(i.DOMException.NOT_FOUND_ERR))}var a,u=this;t.extend(this,{uid:t.guid("uid_"),readyState:o.EMPTY,result:null,error:null,readAsBinaryString:function(t){n.call(this,"readAsBinaryString",t)},readAsDataURL:function(t){n.call(this,"readAsDataURL",t)},readAsText:function(t){n.call(this,"readAsText",t)},abort:function(){this.result=null,-1===t.inArray(this.readyState,[o.EMPTY,o.DONE])&&(this.readyState===o.LOADING&&(this.readyState=o.DONE),a&&a.getRuntime().exec.call(this,"FileReader","abort"),this.trigger("abort"),this.trigger("loadend"))},destroy:function(){this.abort(),a&&(a.getRuntime().exec.call(this,"FileReader","destroy"),a.disconnectRuntime()),u=a=null}})}var c=["loadstart","progress","load","abort","error","loadend"];return o.EMPTY=0,o.LOADING=1,o.DONE=2,o.prototype=n.instance,o}),n("moxie/core/utils/Url",[],function(){var t=function(e,i){for(var n=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],r=n.length,a={http:80,https:443},s={},o=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,c=o.exec(e||"");r--;)c[r]&&(s[n[r]]=c[r]);if(!s.scheme){i&&"string"!=typeof i||(i=t(i||document.location.href)),s.scheme=i.scheme,s.host=i.host,s.port=i.port;var u="";/^[^\/]/.test(s.path)&&(u=i.path,/(\/|\/[^\.]+)$/.test(u)?u+="/":u=u.replace(/\/[^\/]+$/,"/")),s.path=u+(s.path||"")}return s.port||(s.port=a[s.scheme]||80),s.port=parseInt(s.port,10),s.path||(s.path="/"),delete s.source,s};return{parseUrl:t,resolveUrl:function(e){var i={http:80,https:443},n=t(e);return n.scheme+"://"+n.host+(n.port!==i[n.scheme]?":"+n.port:"")+n.path+(n.query?n.query:"")},hasSameOrigin:function(e){function i(t){return[t.scheme,t.host,t.port].join("/")}return"string"==typeof e&&(e=t(e)),i(t())===i(e)}}}),n("moxie/file/FileReaderSync",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/utils/Encode"],function(t,e,i){return function(){function n(t,e){if(!e.isDetached()){var n=this.connectRuntime(e.ruid).exec.call(this,"FileReaderSync","read",t,e);return this.disconnectRuntime(),n}var r=e.getSource();switch(t){case"readAsBinaryString":return r;case"readAsDataURL":return"data:"+e.type+";base64,"+i.btoa(r);case"readAsText":for(var a="",s=0,o=r.length;s<o;s++)a+=String.fromCharCode(r[s]);return a}}e.call(this),t.extend(this,{uid:t.guid("uid_"),readAsBinaryString:function(t){return n.call(this,"readAsBinaryString",t)},readAsDataURL:function(t){return n.call(this,"readAsDataURL",t)},readAsText:function(t){return n.call(this,"readAsText",t)}})}}),n("moxie/xhr/FormData",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/file/Blob"],function(t,e,i){function n(){var t,n=[];e.extend(this,{append:function(r,a){var s=this,o=e.typeOf(a);a instanceof i?t={name:r,value:a}:"array"===o?(r+="[]",e.each(a,function(t){s.append(r,t)})):"object"===o?e.each(a,function(t,e){s.append(r+"["+e+"]",t)}):"null"===o||"undefined"===o||"number"===o&&isNaN(a)?s.append(r,"false"):n.push({name:r,value:a.toString()})},hasBlob:function(){return!!this.getBlob()},getBlob:function(){return t&&t.value||null},getBlobName:function(){return t&&t.name||null},each:function(i){e.each(n,function(t){i(t.value,t.name)}),t&&i(t.value,t.name)},destroy:function(){t=null,n=[]}})}return n}),n("moxie/xhr/XMLHttpRequest",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/utils/Encode","moxie/core/utils/Url","moxie/runtime/Runtime","moxie/runtime/RuntimeTarget","moxie/file/Blob","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/core/utils/Env","moxie/core/utils/Mime"],function(t,e,i,n,r,a,s,o,c,u,l,d){function h(){this.uid=t.guid("uid_")}function m(){function i(t,e){if(S.hasOwnProperty(t))return 1===arguments.length?l.can("define_property")?S[t]:R[t]:void(l.can("define_property")?S[t]=e:R[t]=e)}function c(e){function n(){C&&(C.destroy(),C=null),o.dispatchEvent("loadend"),o=null}function r(r){C.bind("LoadStart",function(t){i("readyState",m.LOADING),o.dispatchEvent("readystatechange"),o.dispatchEvent(t),$&&o.upload.dispatchEvent(t)}),C.bind("Progress",function(t){i("readyState")!==m.LOADING&&(i("readyState",m.LOADING),o.dispatchEvent("readystatechange")),o.dispatchEvent(t)}),C.bind("UploadProgress",function(t){$&&o.upload.dispatchEvent({type:"progress",lengthComputable:!1,total:t.total,loaded:t.loaded})}),C.bind("Load",function(e){i("readyState",m.DONE),i("status",Number(r.exec.call(C,"XMLHttpRequest","getStatus")||0)),i("statusText",f[i("status")]||""),i("response",r.exec.call(C,"XMLHttpRequest","getResponse",i("responseType"))),~t.inArray(i("responseType"),["text",""])?i("responseText",i("response")):"document"===i("responseType")&&i("responseXML",i("response")),U=r.exec.call(C,"XMLHttpRequest","getAllResponseHeaders"),o.dispatchEvent("readystatechange"),i("status")>0?($&&o.upload.dispatchEvent(e),o.dispatchEvent(e)):(A=!0,o.dispatchEvent("error")),n()}),C.bind("Abort",function(t){o.dispatchEvent(t),n()}),C.bind("Error",function(t){A=!0,i("readyState",m.DONE),o.dispatchEvent("readystatechange"),k=!0,o.dispatchEvent(t),n()}),r.exec.call(C,"XMLHttpRequest","send",{url:_,method:v,async:I,user:b,password:x,headers:T,mimeType:L,encoding:O,responseType:o.responseType,withCredentials:o.withCredentials,options:N},e)}var o=this;y=(new Date).getTime(),C=new s,"string"==typeof N.required_caps&&(N.required_caps=a.parseCaps(N.required_caps)),N.required_caps=t.extend({},N.required_caps,{return_response_type:o.responseType}),e instanceof u&&(N.required_caps.send_multipart=!0),D||(N.required_caps.do_cors=!0),N.ruid?r(C.connectRuntime(N)):(C.bind("RuntimeInit",function(t,e){r(e)}),C.bind("RuntimeError",function(t,e){o.dispatchEvent("RuntimeError",e)}),C.connectRuntime(N))}function g(){i("responseText",""),i("responseXML",null),i("response",null),i("status",0),i("statusText",""),y=w=null}var _,v,b,x,y,w,C,E,R=this,S={timeout:0,readyState:m.UNSENT,withCredentials:!1,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},I=!0,T={},O=null,L=null,j=!1,M=!1,$=!1,k=!1,A=!1,D=!1,P=null,F=null,N={},U="";t.extend(this,S,{uid:t.guid("uid_"),upload:new h,open:function(a,s,o,c,u){var l;if(!a||!s)throw new e.DOMException(e.DOMException.SYNTAX_ERR);if(/[\u0100-\uffff]/.test(a)||n.utf8_encode(a)!==a)throw new e.DOMException(e.DOMException.SYNTAX_ERR);if(~t.inArray(a.toUpperCase(),["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"])&&(v=a.toUpperCase()),~t.inArray(v,["CONNECT","TRACE","TRACK"]))throw new e.DOMException(e.DOMException.SECURITY_ERR);if(s=n.utf8_encode(s),l=r.parseUrl(s),D=r.hasSameOrigin(l),_=r.resolveUrl(s),(c||u)&&!D)throw new e.DOMException(e.DOMException.INVALID_ACCESS_ERR);if(b=c||l.user,x=u||l.pass,!1===(I=o||!0)&&(i("timeout")||i("withCredentials")||""!==i("responseType")))throw new e.DOMException(e.DOMException.INVALID_ACCESS_ERR);j=!I,M=!1,T={},g.call(this),i("readyState",m.OPENED),this.convertEventPropsToHandlers(["readystatechange"]),this.dispatchEvent("readystatechange")},setRequestHeader:function(r,a){var s=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];if(i("readyState")!==m.OPENED||M)throw new e.DOMException(e.DOMException.INVALID_STATE_ERR);if(/[\u0100-\uffff]/.test(r)||n.utf8_encode(r)!==r)throw new e.DOMException(e.DOMException.SYNTAX_ERR);return r=t.trim(r).toLowerCase(),!~t.inArray(r,s)&&!/^(proxy\-|sec\-)/.test(r)&&(T[r]?T[r]+=", "+a:T[r]=a,!0)},getAllResponseHeaders:function(){return U||""},getResponseHeader:function(e){return e=e.toLowerCase(),A||~t.inArray(e,["set-cookie","set-cookie2"])?null:U&&""!==U&&(E||(E={},t.each(U.split(/\r\n/),function(e){var i=e.split(/:\s+/);2===i.length&&(i[0]=t.trim(i[0]),E[i[0].toLowerCase()]={header:i[0],value:t.trim(i[1])})})),E.hasOwnProperty(e))?E[e].header+": "+E[e].value:null},overrideMimeType:function(n){var r,a;if(~t.inArray(i("readyState"),[m.LOADING,m.DONE]))throw new e.DOMException(e.DOMException.INVALID_STATE_ERR);if(n=t.trim(n.toLowerCase()),/;/.test(n)&&(r=n.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))&&(n=r[1],r[2]&&(a=r[2])),!d.mimes[n])throw new e.DOMException(e.DOMException.SYNTAX_ERR);P=n,F=a},send:function(i,r){if(N="string"===t.typeOf(r)?{ruid:r}:r||{},this.convertEventPropsToHandlers(p),this.upload.convertEventPropsToHandlers(p),this.readyState!==m.OPENED||M)throw new e.DOMException(e.DOMException.INVALID_STATE_ERR);if(i instanceof o)N.ruid=i.ruid,L=i.type||"application/octet-stream";else if(i instanceof u){if(i.hasBlob()){var a=i.getBlob();N.ruid=a.ruid,L=a.type||"application/octet-stream"}}else"string"==typeof i&&(O="UTF-8",L="text/plain;charset=UTF-8",i=n.utf8_encode(i));this.withCredentials||(this.withCredentials=N.required_caps&&N.required_caps.send_browser_cookies&&!D),$=!j&&this.upload.hasEventListener(),A=!1,k=!i,j||(M=!0),c.call(this,i)},abort:function(){if(A=!0,j=!1,~t.inArray(i("readyState"),[m.UNSENT,m.OPENED,m.DONE]))i("readyState",m.UNSENT);else{if(i("readyState",m.DONE),M=!1,!C)throw new e.DOMException(e.DOMException.INVALID_STATE_ERR);C.getRuntime().exec.call(C,"XMLHttpRequest","abort",k),k=!0}},destroy:function(){C&&("function"===t.typeOf(C.destroy)&&C.destroy(),C=null),this.unbindAll(),this.upload&&(this.upload.unbindAll(),this.upload=null)}})}var f={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",510:"Not Extended"};h.prototype=i.instance;var p=["loadstart","progress","abort","error","load","timeout","loadend"];return m.UNSENT=0,m.OPENED=1,m.HEADERS_RECEIVED=2,m.LOADING=3,m.DONE=4,m.prototype=i.instance,m}),n("moxie/runtime/Transporter",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(t,e,i,n){function r(){function n(){l=d=0,u=this.result=null}function a(e,i){var n=this;c=i,n.bind("TransportingProgress",function(e){(d=e.loaded)<l&&-1===t.inArray(n.state,[r.IDLE,r.DONE])&&s.call(n)},999),n.bind("TransportingComplete",function(){d=l,n.state=r.DONE,u=null,n.result=c.exec.call(n,"Transporter","getAsBlob",e||"")},999),n.state=r.BUSY,n.trigger("TransportingStarted"),s.call(n)}function s(){var t,i=this,n=l-d;h>n&&(h=n),t=e.btoa(u.substr(d,h)),c.exec.call(i,"Transporter","receive",t,l)}var o,c,u,l,d,h;i.call(this),t.extend(this,{uid:t.guid("uid_"),state:r.IDLE,result:null,transport:function(e,i,r){var s=this;if(r=t.extend({chunk_size:204798},r),(o=r.chunk_size%3)&&(r.chunk_size+=3-o),h=r.chunk_size,n.call(this),u=e,l=e.length,"string"===t.typeOf(r)||r.ruid)a.call(s,i,this.connectRuntime(r));else{var c=function(t,e){s.unbind("RuntimeInit",c),a.call(s,i,e)};this.bind("RuntimeInit",c),this.connectRuntime(r)}},abort:function(){var t=this;t.state=r.IDLE,c&&(c.exec.call(t,"Transporter","clear"),t.trigger("TransportingAborted")),n.call(t)},destroy:function(){this.unbindAll(),c=null,this.disconnectRuntime(),n.call(this)}})}return r.IDLE=0,r.BUSY=1,r.DONE=2,r.prototype=n.instance,r}),n("moxie/image/Image",["moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/file/FileReaderSync","moxie/xhr/XMLHttpRequest","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/runtime/Transporter","moxie/core/utils/Env","moxie/core/EventTarget","moxie/file/Blob","moxie/file/File","moxie/core/utils/Encode"],function(t,e,i,n,r,a,s,o,c,u,l,d,h){function m(){function n(t){t||(t=this.getRuntime().exec.call(this,"Image","getInfo")),this.size=t.size,this.width=t.width,this.height=t.height,this.type=t.type,this.meta=t.meta,""===this.name&&(this.name=t.name)}function u(e){var n=t.typeOf(e);try{if(e instanceof m){if(!e.size)throw new i.DOMException(i.DOMException.INVALID_STATE_ERR);p.apply(this,arguments)}else if(e instanceof l){if(!~t.inArray(e.type,["image/jpeg","image/png"]))throw new i.ImageError(i.ImageError.WRONG_FORMAT);g.apply(this,arguments)}else if(-1!==t.inArray(n,["blob","file"]))u.call(this,new d(null,e),arguments[1]);else if("string"===n)/^data:[^;]*;base64,/.test(e)?u.call(this,new l(null,{data:e}),arguments[1]):_.apply(this,arguments);else{if("node"!==n||"img"!==e.nodeName.toLowerCase())throw new i.DOMException(i.DOMException.TYPE_MISMATCH_ERR);u.call(this,e.src,arguments[1])}}catch(t){this.trigger("error",t.code)}}function p(e,i){var n=this.connectRuntime(e.ruid);this.ruid=n.uid,n.exec.call(this,"Image","loadFromImage",e,"undefined"===t.typeOf(i)||i)}function g(e,i){function n(t){r.ruid=t.uid,t.exec.call(r,"Image","loadFromBlob",e)}var r=this;r.name=e.name||"",e.isDetached()?(this.bind("RuntimeInit",function(t,e){n(e)}),i&&"string"==typeof i.required_caps&&(i.required_caps=a.parseCaps(i.required_caps)),this.connectRuntime(t.extend({required_caps:{access_image_binary:!0,resize_image:!0}},i))):n(this.connectRuntime(e.ruid))}function _(t,e){var i,n=this;i=new r,i.open("get",t),i.responseType="blob",i.onprogress=function(t){n.trigger(t)},i.onload=function(){g.call(n,i.response,!0)},i.onerror=function(t){n.trigger(t)},i.onloadend=function(){i.destroy()},i.bind("RuntimeError",function(t,e){n.trigger("RuntimeError",e)}),i.send(null,e)}s.call(this),t.extend(this,{uid:t.guid("uid_"),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments)},load:function(){this.bind("Load Resize",function(){n.call(this)},999),this.convertEventPropsToHandlers(f),u.apply(this,arguments)},downsize:function(e){var n={width:this.width,height:this.height,crop:!1,preserveHeaders:!0};e="object"==typeof e?t.extend(n,e):t.extend(n,{width:arguments[0],height:arguments[1],crop:arguments[2],preserveHeaders:arguments[3]});try{if(!this.size)throw new i.DOMException(i.DOMException.INVALID_STATE_ERR);if(this.width>m.MAX_RESIZE_WIDTH||this.height>m.MAX_RESIZE_HEIGHT)throw new i.ImageError(i.ImageError.MAX_RESOLUTION_ERR);this.getRuntime().exec.call(this,"Image","downsize",e.width,e.height,e.crop,e.preserveHeaders)}catch(t){this.trigger("error",t.code)}},crop:function(t,e,i){this.downsize(t,e,!0,i)},getAsCanvas:function(){if(!c.can("create_canvas"))throw new i.RuntimeError(i.RuntimeError.NOT_SUPPORTED_ERR);return this.connectRuntime(this.ruid).exec.call(this,"Image","getAsCanvas")},getAsBlob:function(t,e){if(!this.size)throw new i.DOMException(i.DOMException.INVALID_STATE_ERR);return t||(t="image/jpeg"),"image/jpeg"!==t||e||(e=90),this.getRuntime().exec.call(this,"Image","getAsBlob",t,e)},getAsDataURL:function(t,e){if(!this.size)throw new i.DOMException(i.DOMException.INVALID_STATE_ERR);return this.getRuntime().exec.call(this,"Image","getAsDataURL",t,e)},getAsBinaryString:function(t,e){var i=this.getAsDataURL(t,e);return h.atob(i.substring(i.indexOf("base64,")+7))},embed:function(n){function r(){if(c.can("create_canvas")){var e=a.getAsCanvas();if(e)return n.appendChild(e),e=null,a.destroy(),void f.trigger("embedded")}var r=a.getAsDataURL(s,u);if(!r)throw new i.ImageError(i.ImageError.WRONG_FORMAT);if(c.can("use_data_uri_of",r.length))n.innerHTML='<img src="'+r+'" width="'+a.width+'" height="'+a.height+'" />',a.destroy(),f.trigger("embedded");else{var l=new o;l.bind("TransportingComplete",function(){d=f.connectRuntime(this.result.ruid),f.bind("Embedded",function(){t.extend(d.getShimContainer().style,{top:"0px",left:"0px",width:a.width+"px",height:a.height+"px"}),d=null},999),d.exec.call(f,"ImageView","display",this.result.uid,g,_),a.destroy()}),l.transport(h.atob(r.substring(r.indexOf("base64,")+7)),s,t.extend({},p,{required_caps:{display_media:!0},runtime_order:"flash,silverlight",container:n}))}}var a,s,u,l,d,f=this,p=arguments[1]||{},g=this.width,_=this.height;try{if(!(n=e.get(n)))throw new i.DOMException(i.DOMException.INVALID_NODE_TYPE_ERR);if(!this.size)throw new i.DOMException(i.DOMException.INVALID_STATE_ERR);if(this.width>m.MAX_RESIZE_WIDTH||this.height>m.MAX_RESIZE_HEIGHT)throw new i.ImageError(i.ImageError.MAX_RESOLUTION_ERR);if(s=p.type||this.type||"image/jpeg",u=p.quality||90,l="undefined"!==t.typeOf(p.crop)&&p.crop,p.width)g=p.width,_=p.height||g;else{var v=e.getSize(n);v.w&&v.h&&(g=v.w,_=v.h)}return a=new m,a.bind("Resize",function(){r.call(f)}),a.bind("Load",function(){a.downsize(g,_,l,!1)}),a.clone(this,!1),a}catch(t){this.trigger("error",t.code)}},destroy:function(){this.ruid&&(this.getRuntime().exec.call(this,"Image","destroy"),this.disconnectRuntime()),this.unbindAll()}})}var f=["progress","load","error","resize","embedded"];return m.MAX_RESIZE_WIDTH=6500,m.MAX_RESIZE_HEIGHT=6500,m.prototype=u.instance,m}),n("moxie/runtime/html5/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(t,e,i,n){function r(e){var r=this,o=i.capTest,c=i.capTrue,u=t.extend({access_binary:o(window.FileReader||window.File&&window.File.getAsDataURL),access_image_binary:function(){return r.can("access_binary")&&!!s.Image},display_media:o(n.can("create_canvas")||n.can("use_data_uri_over32kb")),do_cors:o(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),drag_and_drop:o(function(){var t=document.createElement("div");return("draggable"in t||"ondragstart"in t&&"ondrop"in t)&&("IE"!==n.browser||n.version>9)}()),filter_by_extension:o(function(){return"Chrome"===n.browser&&n.version>=28||"IE"===n.browser&&n.version>=10}()),return_response_headers:c,return_response_type:function(t){return!("json"!==t||!window.JSON)||n.can("return_response_type",t)},return_status_code:c,report_upload_progress:o(window.XMLHttpRequest&&(new XMLHttpRequest).upload),resize_image:function(){return r.can("access_binary")&&n.can("create_canvas")},select_file:function(){return n.can("use_fileinput")&&window.File},select_folder:function(){return r.can("select_file")&&"Chrome"===n.browser&&n.version>=21},select_multiple:function(){return r.can("select_file")&&!("Safari"===n.browser&&"Windows"===n.os)&&!("iOS"===n.os&&n.verComp(n.osVersion,"7.0.4","<"))},send_binary_string:o(window.XMLHttpRequest&&((new XMLHttpRequest).sendAsBinary||window.Uint8Array&&window.ArrayBuffer)),send_custom_headers:o(window.XMLHttpRequest),send_multipart:function(){return!!(window.XMLHttpRequest&&(new XMLHttpRequest).upload&&window.FormData)||r.can("send_binary_string")},slice_blob:o(window.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return r.can("slice_blob")&&r.can("send_multipart")},summon_file_dialog:o(function(){return"Firefox"===n.browser&&n.version>=4||"Opera"===n.browser&&n.version>=12||"IE"===n.browser&&n.version>=10||!!~t.inArray(n.browser,["Chrome","Safari"])}()),upload_filesize:c},arguments[2]);i.call(this,e,arguments[1]||a,u),t.extend(this,{init:function(){this.trigger("Init")},destroy:function(t){return function(){t.call(r),t=r=null}}(this.destroy)}),t.extend(this.getShim(),s)}var a="html5",s={};return i.addConstructor(a,r),s}),n("moxie/runtime/html5/file/Blob",["moxie/runtime/html5/Runtime","moxie/file/Blob"],function(t,e){function i(){function t(t,e,i){var n;if(!window.File.prototype.slice)return(n=window.File.prototype.webkitSlice||window.File.prototype.mozSlice)?n.call(t,e,i):null;try{return t.slice(),t.slice(e,i)}catch(n){return t.slice(e,i-e)}}this.slice=function(){return new e(this.getRuntime().uid,t.apply(this,arguments))}}return t.Blob=i}),n("moxie/core/utils/Events",["moxie/core/utils/Basic"],function(t){function e(){this.returnValue=!1}function i(){this.cancelBubble=!0}var n={},r="moxie_"+t.guid(),a=function(a,s,o,c){var u,l;s=s.toLowerCase(),a.addEventListener?(u=o,a.addEventListener(s,u,!1)):a.attachEvent&&(u=function(){var t=window.event;t.target||(t.target=t.srcElement),t.preventDefault=e,t.stopPropagation=i,o(t)},a.attachEvent("on"+s,u)),a[r]||(a[r]=t.guid()),n.hasOwnProperty(a[r])||(n[a[r]]={}),l=n[a[r]],l.hasOwnProperty(s)||(l[s]=[]),l[s].push({func:u,orig:o,key:c})},s=function(e,i,a){var s;if(i=i.toLowerCase(),e[r]&&n[e[r]]&&n[e[r]][i]){s=n[e[r]][i];for(var o=s.length-1;o>=0&&(s[o].orig!==a&&s[o].key!==a||(e.removeEventListener?e.removeEventListener(i,s[o].func,!1):e.detachEvent&&e.detachEvent("on"+i,s[o].func),s[o].orig=null,s[o].func=null,s.splice(o,1),void 0===a));o--);if(s.length||delete n[e[r]][i],t.isEmptyObj(n[e[r]])){delete n[e[r]];try{delete e[r]}catch(t){e[r]=void 0}}}};return{addEvent:a,removeEvent:s,removeAllEvents:function(e,i){e&&e[r]&&t.each(n[e[r]],function(t,n){s(e,n,i)})}}}),n("moxie/runtime/html5/file/FileInput",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(t,e,i,n,r,a){function s(){var t,s=[];e.extend(this,{init:function(o){var c,u,l,d,h,m,f=this,p=f.getRuntime();t=o,s=[],l=t.accept.mimes||r.extList2mimes(t.accept,p.can("filter_by_extension")),u=p.getShimContainer(),u.innerHTML='<input id="'+p.uid+'" type="file" style="font-size:999px;opacity:0;"'+(t.multiple&&p.can("select_multiple")?"multiple":"")+(t.directory&&p.can("select_folder")?"webkitdirectory directory":"")+(l?' accept="'+l.join(",")+'"':"")+" />",c=i.get(p.uid),e.extend(c.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),d=i.get(t.browse_button),p.can("summon_file_dialog")&&("static"===i.getStyle(d,"position")&&(d.style.position="relative"),h=parseInt(i.getStyle(d,"z-index"),10)||1,d.style.zIndex=h,u.style.zIndex=h-1,n.addEvent(d,"click",function(t){var e=i.get(p.uid);e&&!e.disabled&&e.click(),t.preventDefault()},f.uid)),m=p.can("summon_file_dialog")?d:u,n.addEvent(m,"mouseover",function(){f.trigger("mouseenter")},f.uid),n.addEvent(m,"mouseout",function(){f.trigger("mouseleave")},f.uid),n.addEvent(m,"mousedown",function(){f.trigger("mousedown")},f.uid),n.addEvent(i.get(t.container),"mouseup",function(){f.trigger("mouseup")},f.uid),c.onchange=function i(){if(s=[],t.directory?e.each(this.files,function(t){"."!==t.name&&s.push(t)}):s=[].slice.call(this.files),"IE"!==a.browser&&"IEMobile"!==a.browser)this.value="";else{var n=this.cloneNode(!0);this.parentNode.replaceChild(n,this),n.onchange=i}f.trigger("change")},f.trigger({type:"ready",async:!0}),u=null},getFiles:function(){return s},disable:function(t){var e,n=this.getRuntime();(e=i.get(n.uid))&&(e.disabled=!!t)},destroy:function(){var e=this.getRuntime(),r=e.getShim(),a=e.getShimContainer();n.removeAllEvents(a,this.uid),n.removeAllEvents(t&&i.get(t.container),this.uid),n.removeAllEvents(t&&i.get(t.browse_button),this.uid),a&&(a.innerHTML=""),r.removeInstance(this.uid),s=t=a=r=null}})}return t.FileInput=s}),n("moxie/runtime/html5/file/FileDrop",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime"],function(t,e,i,n,r){function a(){function t(t){if(!t.dataTransfer||!t.dataTransfer.types)return!1;var i=e.toArray(t.dataTransfer.types||[]);return-1!==e.inArray("Files",i)||-1!==e.inArray("public.file-url",i)||-1!==e.inArray("application/x-moz-file",i)}function a(t){for(var i=[],n=0;n<t.length;n++)[].push.apply(i,t[n].extensions.split(/\s*,\s*/));return-1===e.inArray("*",i)?i:[]}function s(t){if(!m.length)return!0;var i=r.getFileExtension(t.name);return!i||-1!==e.inArray(i,m)}function o(t,i){var n=[];e.each(t,function(t){var e=t.webkitGetAsEntry();if(e)if(e.isFile){var i=t.getAsFile();s(i)&&h.push(i)}else n.push(e)}),n.length?c(n,i):i()}function c(t,i){var n=[];e.each(t,function(t){n.push(function(e){u(t,e)})}),e.inSeries(n,function(){i()})}function u(t,e){t.isFile?t.file(function(t){s(t)&&h.push(t),e()},function(){e()}):t.isDirectory?l(t,e):e()}function l(t,e){function i(t){r.readEntries(function(e){e.length?([].push.apply(n,e),i(t)):t()},t)}var n=[],r=t.createReader();i(function(){c(n,e)})}var d,h=[],m=[];e.extend(this,{init:function(i){var r,c=this;d=i,m=a(d.accept),r=d.container,n.addEvent(r,"dragover",function(e){t(e)&&(e.preventDefault(),e.dataTransfer.dropEffect="copy")},c.uid),n.addEvent(r,"drop",function(i){t(i)&&(i.preventDefault(),h=[],i.dataTransfer.items&&i.dataTransfer.items[0].webkitGetAsEntry?o(i.dataTransfer.items,function(){c.trigger("drop")}):(e.each(i.dataTransfer.files,function(t){s(t)&&h.push(t)}),c.trigger("drop")))},c.uid),n.addEvent(r,"dragenter",function(t){c.trigger("dragenter")},c.uid),n.addEvent(r,"dragleave",function(t){c.trigger("dragleave")},c.uid)},getFiles:function(){return h},destroy:function(){n.removeAllEvents(d&&i.get(d.container),this.uid),h=m=d=null}})}return t.FileDrop=a}),n("moxie/runtime/html5/file/FileReader",["moxie/runtime/html5/Runtime","moxie/core/utils/Encode","moxie/core/utils/Basic"],function(t,e,i){function n(){function t(t){return e.atob(t.substring(t.indexOf("base64,")+7))}var n,r=!1;i.extend(this,{read:function(t,e){var a=this;n=new window.FileReader,n.addEventListener("progress",function(t){a.trigger(t)}),n.addEventListener("load",function(t){a.trigger(t)}),n.addEventListener("error",function(t){a.trigger(t,n.error)}),n.addEventListener("loadend",function(){n=null}),"function"===i.typeOf(n[t])?(r=!1,n[t](e.getSource())):"readAsBinaryString"===t&&(r=!0,n.readAsDataURL(e.getSource()))},getResult:function(){return n&&n.result?r?t(n.result):n.result:null},abort:function(){n&&n.abort()},destroy:function(){n=null}})}return t.FileReader=n}),n("moxie/runtime/html5/xhr/XMLHttpRequest",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/core/utils/Url","moxie/file/File","moxie/file/Blob","moxie/xhr/FormData","moxie/core/Exceptions","moxie/core/utils/Env"],function(t,e,i,n,r,a,s,o,c){function u(){function t(t,e){var i,n,r=this;i=e.getBlob().getSource(),n=new window.FileReader,n.onload=function(){e.append(e.getBlobName(),new a(null,{type:i.type,data:n.result})),f.send.call(r,t,e)},n.readAsBinaryString(i)}function u(){return!window.XMLHttpRequest||"IE"===c.browser&&c.version<8?function(){for(var t=["Msxml2.XMLHTTP.6.0","Microsoft.XMLHTTP"],e=0;e<t.length;e++)try{return new ActiveXObject(t[e])}catch(t){}}():new window.XMLHttpRequest}function l(t){var e=t.responseXML,i=t.responseText;return"IE"===c.browser&&i&&e&&!e.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(t.getResponseHeader("Content-Type"))&&(e=new window.ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.validateOnParse=!1,e.loadXML(i)),e&&("IE"===c.browser&&0!==e.parseError||!e.documentElement||"parsererror"===e.documentElement.tagName)?null:e}function d(t){var e="----moxieboundary"+(new Date).getTime(),i="\r\n",n="";if(!this.getRuntime().can("send_binary_string"))throw new o.RuntimeError(o.RuntimeError.NOT_SUPPORTED_ERR);return h.setRequestHeader("Content-Type","multipart/form-data; boundary="+e),t.each(function(t,r){n+=t instanceof a?"--"+e+i+'Content-Disposition: form-data; name="'+r+'"; filename="'+unescape(encodeURIComponent(t.name||"blob"))+'"'+i+"Content-Type: "+(t.type||"application/octet-stream")+i+i+t.getSource()+i:"--"+e+i+'Content-Disposition: form-data; name="'+r+'"'+i+i+unescape(encodeURIComponent(t))+i}),n+="--"+e+"--"+i}var h,m,f=this;e.extend(this,{send:function(i,r){var o=this,l="Mozilla"===c.browser&&c.version>=4&&c.version<7,f="Android Browser"===c.browser,p=!1;if(m=i.url.replace(/^.+?\/([\w\-\.]+)$/,"$1").toLowerCase(),h=u(),h.open(i.method,i.url,i.async,i.user,i.password),r instanceof a)r.isDetached()&&(p=!0),r=r.getSource();else if(r instanceof s){if(r.hasBlob())if(r.getBlob().isDetached())r=d.call(o,r),p=!0;else if((l||f)&&"blob"===e.typeOf(r.getBlob().getSource())&&window.FileReader)return void t.call(o,i,r);if(r instanceof s){var g=new window.FormData;r.each(function(t,e){t instanceof a?g.append(e,t.getSource()):g.append(e,t)}),r=g}}h.upload?(i.withCredentials&&(h.withCredentials=!0),h.addEventListener("load",function(t){o.trigger(t)}),h.addEventListener("error",function(t){o.trigger(t)}),h.addEventListener("progress",function(t){o.trigger(t)}),h.upload.addEventListener("progress",function(t){o.trigger({type:"UploadProgress",loaded:t.loaded,total:t.total})})):h.onreadystatechange=function(){switch(h.readyState){case 1:case 2:break;case 3:var t,e;try{n.hasSameOrigin(i.url)&&(t=h.getResponseHeader("Content-Length")||0),h.responseText&&(e=h.responseText.length)}catch(i){t=e=0}o.trigger({type:"progress",lengthComputable:!!t,total:parseInt(t,10),loaded:e});break;case 4:h.onreadystatechange=function(){},0===h.status?o.trigger("error"):o.trigger("load")}},e.isEmptyObj(i.headers)||e.each(i.headers,function(t,e){h.setRequestHeader(e,t)}),""!==i.responseType&&"responseType"in h&&("json"!==i.responseType||c.can("return_response_type","json")?h.responseType=i.responseType:h.responseType="text"),p?h.sendAsBinary?h.sendAsBinary(r):function(){for(var t=new Uint8Array(r.length),e=0;e<r.length;e++)t[e]=255&r.charCodeAt(e);h.send(t.buffer)}():h.send(r),o.trigger("loadstart")},getStatus:function(){try{if(h)return h.status}catch(t){}return 0},getResponse:function(t){var e=this.getRuntime();try{switch(t){case"blob":var n=new r(e.uid,h.response),a=h.getResponseHeader("Content-Disposition");if(a){var s=a.match(/filename=([\'\"'])([^\1]+)\1/);s&&(m=s[2])}return n.name=m,n.type||(n.type=i.getFileMime(m)),n;case"json":return c.can("return_response_type","json")?h.response:200===h.status&&window.JSON?JSON.parse(h.responseText):null;case"document":return l(h);default:return""!==h.responseText?h.responseText:null}}catch(t){return null}},getAllResponseHeaders:function(){try{return h.getAllResponseHeaders()}catch(t){}return""},abort:function(){h&&h.abort()},destroy:function(){f=m=null}})}return t.XMLHttpRequest=u}),n("moxie/runtime/html5/utils/BinaryReader",[],function(){return function(){function t(t,e){var i,n=a?0:-8*(e-1),s=0;for(i=0;i<e;i++)s|=r.charCodeAt(t+i)<<Math.abs(n+8*i);return s}function i(t,e,i){i=3===arguments.length?i:r.length-e-1,r=r.substr(0,e)+t+r.substr(i+e)}function n(t,e,n){var r,s="",o=a?0:-8*(n-1);for(r=0;r<n;r++)s+=String.fromCharCode(e>>Math.abs(o+8*r)&255);i(s,t,n)}var r,a=!1;return{II:function(t){if(t===e)return a;a=t},init:function(t){a=!1,r=t},SEGMENT:function(t,e,n){switch(arguments.length){case 1:return r.substr(t,r.length-t-1);case 2:return r.substr(t,e);case 3:i(n,t,e);break;default:return r}},BYTE:function(e){return t(e,1)},SHORT:function(e){return t(e,2)},LONG:function(i,r){if(r===e)return t(i,4);n(i,r,4)},SLONG:function(e){var i=t(e,4);return i>2147483647?i-4294967296:i},STRING:function(e,i){var n="";for(i+=e;e<i;e++)n+=String.fromCharCode(t(e,1));return n}}}}),n("moxie/runtime/html5/image/JPEGHeaders",["moxie/runtime/html5/utils/BinaryReader"],function(t){return function e(i){var n,r,a,s=[],o=0;if(n=new t,n.init(i),65496===n.SHORT(0)){for(r=2;r<=i.length;)if((a=n.SHORT(r))>=65488&&a<=65495)r+=2;else{if(65498===a||65497===a)break;o=n.SHORT(r+2)+2,a>=65505&&a<=65519&&s.push({hex:a,name:"APP"+(15&a),start:r,length:o,segment:n.SEGMENT(r,o)}),r+=o}return n.init(null),{headers:s,restore:function(t){var e,i;for(n.init(t),r=65504==n.SHORT(2)?4+n.SHORT(4):2,i=0,e=s.length;i<e;i++)n.SEGMENT(r,0,s[i].segment),r+=s[i].length;return t=n.SEGMENT(),n.init(null),t},strip:function(t){var i,r,a;for(r=new e(t),i=r.headers,r.purge(),n.init(t),a=i.length;a--;)n.SEGMENT(i[a].start,i[a].length,"");return t=n.SEGMENT(),n.init(null),t},get:function(t){for(var e=[],i=0,n=s.length;i<n;i++)s[i].name===t.toUpperCase()&&e.push(s[i].segment);return e},set:function(t,e){var i,n,r,a=[];for("string"==typeof e?a.push(e):a=e,i=n=0,r=s.length;i<r&&(s[i].name===t.toUpperCase()&&(s[i].segment=a[n],s[i].length=a[n].length,n++),!(n>=a.length));i++);},purge:function(){s=[],n.init(null),n=null}}}}}),n("moxie/runtime/html5/image/ExifParser",["moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader"],function(t,i){return function(){function n(t,i){var n,r,a,o,c,d,h,m=s.SHORT(t),f=[],p={};for(n=0;n<m;n++)if(d=t+12*n+2,(a=i[s.SHORT(d)])!==e){switch(o=s.SHORT(d+=2),c=s.LONG(d+=2),d+=4,f=[],o){case 1:case 7:for(c>4&&(d=s.LONG(d)+l.tiffHeader),r=0;r<c;r++)f[r]=s.BYTE(d+r);break;case 2:c>4&&(d=s.LONG(d)+l.tiffHeader),p[a]=s.STRING(d,c-1);continue;case 3:for(c>2&&(d=s.LONG(d)+l.tiffHeader),r=0;r<c;r++)f[r]=s.SHORT(d+2*r);break;case 4:for(c>1&&(d=s.LONG(d)+l.tiffHeader),r=0;r<c;r++)f[r]=s.LONG(d+4*r);break;case 5:for(d=s.LONG(d)+l.tiffHeader,r=0;r<c;r++)f[r]=s.LONG(d+4*r)/s.LONG(d+4*r+4);break;case 9:for(d=s.LONG(d)+l.tiffHeader,r=0;r<c;r++)f[r]=s.SLONG(d+4*r);break;case 10:for(d=s.LONG(d)+l.tiffHeader,r=0;r<c;r++)f[r]=s.SLONG(d+4*r)/s.SLONG(d+4*r+4);break;default:continue}h=1==c?f[0]:f,u.hasOwnProperty(a)&&"object"!=typeof h?p[a]=u[a][h]:p[a]=h}return p}function r(){var t=l.tiffHeader;return s.II(18761==s.SHORT(t)),42===s.SHORT(t+=2)&&(l.IFD0=l.tiffHeader+s.LONG(t+=2),c=n(l.IFD0,o.tiff),"ExifIFDPointer"in c&&(l.exifIFD=l.tiffHeader+c.ExifIFDPointer,delete c.ExifIFDPointer),"GPSInfoIFDPointer"in c&&(l.gpsIFD=l.tiffHeader+c.GPSInfoIFDPointer,delete c.GPSInfoIFDPointer),!0)}function a(t,e,i){var n,r,a,c=0;if("string"==typeof e){var u=o[t.toLowerCase()];for(var d in u)if(u[d]===e){e=d;break}}n=l[t.toLowerCase()+"IFD"],r=s.SHORT(n);for(var h=0;h<r;h++)if(a=n+12*h+2,s.SHORT(a)==e){c=a+8;break}return!!c&&(s.LONG(c,i),!0)}var s,o,c,u,l={};return s=new i,o={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},u={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(t){return l={tiffHeader:10},!(t===e||!t.length)&&(s.init(t),65505===s.SHORT(0)&&"EXIF\0"===s.STRING(4,5).toUpperCase()&&r())},TIFF:function(){return c},EXIF:function(){var e;if(e=n(l.exifIFD,o.exif),e.ExifVersion&&"array"===t.typeOf(e.ExifVersion)){for(var i=0,r="";i<e.ExifVersion.length;i++)r+=String.fromCharCode(e.ExifVersion[i]);e.ExifVersion=r}return e},GPS:function(){var e;return e=n(l.gpsIFD,o.gps),e.GPSVersionID&&"array"===t.typeOf(e.GPSVersionID)&&(e.GPSVersionID=e.GPSVersionID.join(".")),e},setExif:function(t,e){return("PixelXDimension"===t||"PixelYDimension"===t)&&a("exif",t,e)},getBinary:function(){return s.SEGMENT()},purge:function(){s.init(null),s=c=null,l={}}}}}),n("moxie/runtime/html5/image/JPEG",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEGHeaders","moxie/runtime/html5/utils/BinaryReader","moxie/runtime/html5/image/ExifParser"],function(t,e,i,n,r){function a(a){function s(){for(var t,e,i=0;i<=c.length;){if((t=u.SHORT(i+=2))>=65472&&t<=65475)return i+=5,{height:u.SHORT(i),width:u.SHORT(i+=2)};e=u.SHORT(i+=2),i+=e-2}return null}function o(){d&&l&&u&&(d.purge(),l.purge(),u.init(null),c=h=l=d=u=null)}var c,u,l,d,h,m;if(c=a,u=new n,u.init(c),65496!==u.SHORT(0))throw new e.ImageError(e.ImageError.WRONG_FORMAT);l=new i(a),d=new r,m=!!d.init(l.get("app1")[0]),h=s.call(this),t.extend(this,{type:"image/jpeg",size:c.length,width:h&&h.width||0,height:h&&h.height||0,setExif:function(e,i){if(!m)return!1;"object"===t.typeOf(e)?t.each(e,function(t,e){d.setExif(e,t)}):d.setExif(e,i),l.set("app1",d.getBinary())},writeHeaders:function(){return arguments.length?l.restore(arguments[0]):c=l.restore(c)},stripHeaders:function(t){return l.strip(t)},purge:function(){o.call(this)}}),m&&(this.meta={tiff:d.TIFF(),exif:d.EXIF(),gps:d.GPS()})}return a}),n("moxie/runtime/html5/image/PNG",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader"],function(t,e,i){function n(n){function r(){var t,e;return t=s.call(this,8),"IHDR"==t.type?(e=t.start,{width:c.LONG(e),height:c.LONG(e+=4)}):null}function a(){c&&(c.init(null),o=d=u=l=c=null)}function s(t){var e,i,n,r;return e=c.LONG(t),i=c.STRING(t+=4,4),n=t+=4,r=c.LONG(t+e),{length:e,type:i,start:n,CRC:r}}var o,c,u,l,d;o=n,c=new i,c.init(o),function(){var e=0,i=0,n=[35152,20039,3338,6666];for(i=0;i<n.length;i++,e+=2)if(n[i]!=c.SHORT(e))throw new t.ImageError(t.ImageError.WRONG_FORMAT)}(),d=r.call(this),e.extend(this,{type:"image/png",size:o.length,width:d.width,height:d.height,purge:function(){a.call(this)}}),a.call(this)}return n}),n("moxie/runtime/html5/image/ImageInfo",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEG","moxie/runtime/html5/image/PNG"],function(t,e,i,n){return function(r){var a,s=[i,n];a=function(){for(var t=0;t<s.length;t++)try{return new s[t](r)}catch(t){}throw new e.ImageError(e.ImageError.WRONG_FORMAT)}(),t.extend(this,{type:"",size:0,width:0,height:0,setExif:function(){},writeHeaders:function(t){return t},stripHeaders:function(t){return t},purge:function(){}}),t.extend(this,a),this.purge=function(){a.purge(),a=null}}}),n("moxie/runtime/html5/image/MegaPixel",[],function(){function t(t,n,r){var a=t.naturalWidth,s=t.naturalHeight,o=r.width,c=r.height,u=r.x||0,l=r.y||0,d=n.getContext("2d");e(t)&&(a/=2,s/=2);var h=1024,m=document.createElement("canvas");m.width=m.height=h;for(var f=m.getContext("2d"),p=i(t,a,s),g=0;g<s;){for(var _=g+h>s?s-g:h,v=0;v<a;){var b=v+h>a?a-v:h;f.clearRect(0,0,h,h),f.drawImage(t,-v,-g);var x=v*o/a+u<<0,y=Math.ceil(b*o/a),w=g*c/s/p+l<<0,C=Math.ceil(_*c/s/p);d.drawImage(m,0,0,b,_,x,w,y,C),v+=h}g+=h}m=f=null}function e(t){var e=t.naturalWidth;if(e*t.naturalHeight>1048576){var i=document.createElement("canvas");i.width=i.height=1;var n=i.getContext("2d");return n.drawImage(t,1-e,0),0===n.getImageData(0,0,1,1).data[3]}return!1}function i(t,e,i){var n=document.createElement("canvas");n.width=1,n.height=i;var r=n.getContext("2d");r.drawImage(t,0,0);for(var a=r.getImageData(0,0,1,i).data,s=0,o=i,c=i;c>s;){0===a[4*(c-1)+3]?o=c:s=c,c=o+s>>1}n=null;var u=c/i;return 0===u?1:u}return{isSubsampled:e,renderTo:t}}),n("moxie/runtime/html5/image/Image",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/utils/Encode","moxie/file/File","moxie/runtime/html5/image/ImageInfo","moxie/runtime/html5/image/MegaPixel","moxie/core/utils/Mime","moxie/core/utils/Env"],function(t,e,i,n,r,a,s,o,c){function u(){function t(){if(!b&&!_)throw new i.ImageError(i.DOMException.INVALID_STATE_ERR);return b||_}function u(t){return n.atob(t.substring(t.indexOf("base64,")+7))}function l(t,e){return"data:"+(e||"")+";base64,"+n.btoa(t)}function d(t){var e=this;_=new Image,_.onerror=function(){g.call(this),e.trigger("error",i.ImageError.WRONG_FORMAT)},_.onload=function(){e.trigger("load")},_.src=/^data:[^;]*;base64,/.test(t)?t:l(t,y.type)}function h(t,e){var n,r=this;if(!window.FileReader)return e(t.getAsDataURL());n=new FileReader,n.onload=function(){e(this.result)},n.onerror=function(){r.trigger("error",i.ImageError.WRONG_FORMAT)},n.readAsDataURL(t)}function m(i,n,r,a){var s,o,c,u,l,d=this,h=0,m=0;if(E=a,l=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1,-1!==e.inArray(l,[5,6,7,8])){var g=i;i=n,n=g}if(o=t(),r?(i=Math.min(i,o.width),n=Math.min(n,o.height),s=Math.max(i/o.width,n/o.height)):s=Math.min(i/o.width,n/o.height),s>1&&!r&&a)return void this.trigger("Resize");b||(b=document.createElement("canvas")),c=Math.round(o.width*s),u=Math.round(o.height*s),r?(b.width=i,b.height=n,c>i&&(h=Math.round((c-i)/2)),u>n&&(m=Math.round((u-n)/2))):(b.width=c,b.height=u),E||p(b.width,b.height,l),f.call(this,o,b,-h,-m,c,u),this.width=b.width,this.height=b.height,C=!0,d.trigger("Resize")}function f(t,e,i,n,r,a){if("iOS"===c.OS)s.renderTo(t,e,{width:r,height:a,x:i,y:n});else{e.getContext("2d").drawImage(t,i,n,r,a)}}function p(t,e,i){switch(i){case 5:case 6:case 7:case 8:b.width=e,b.height=t;break;default:b.width=t,b.height=e}var n=b.getContext("2d");switch(i){case 2:n.translate(t,0),n.scale(-1,1);break;case 3:n.translate(t,e),n.rotate(Math.PI);break;case 4:n.translate(0,e),n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI),n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI),n.translate(0,-e);break;case 7:n.rotate(.5*Math.PI),n.translate(t,-e),n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI),n.translate(-t,0)}}function g(){v&&(v.purge(),v=null),x=_=b=y=null,C=!1}var _,v,b,x,y,w=this,C=!1,E=!0;e.extend(this,{loadFromBlob:function(t){var e=this,n=e.getRuntime(),r=!(arguments.length>1)||arguments[1];if(!n.can("access_binary"))throw new i.RuntimeError(i.RuntimeError.NOT_SUPPORTED_ERR);if(y=t,t.isDetached())return x=t.getSource(),void d.call(this,x);h.call(this,t.getSource(),function(t){r&&(x=u(t)),d.call(e,t)})},loadFromImage:function(t,e){this.meta=t.meta,y=new r(null,{name:t.name,size:t.size,type:t.type}),d.call(this,e?x=t.getAsBinaryString():t.getAsDataURL())},getInfo:function(){var e=this.getRuntime();return!v&&x&&e.can("access_image_binary")&&(v=new a(x)),{width:t().width||0,height:t().height||0,type:y.type||o.getFileMime(y.name),size:x&&x.length||y.size||0,name:y.name||"",meta:v&&v.meta||this.meta||{}}},downsize:function(){m.apply(this,arguments)},getAsCanvas:function(){return b&&(b.id=this.uid+"_canvas"),b},getAsBlob:function(t,e){return t!==this.type&&m.call(this,this.width,this.height,!1),new r(null,{name:y.name||"",type:t,data:w.getAsBinaryString.call(this,t,e)})},getAsDataURL:function(t){var e=arguments[1]||90;if(!C)return _.src;if("image/jpeg"!==t)return b.toDataURL("image/png");try{return b.toDataURL("image/jpeg",e/100)}catch(t){return b.toDataURL("image/jpeg")}},getAsBinaryString:function(t,e){if(!C)return x||(x=u(w.getAsDataURL(t,e))),x;if("image/jpeg"!==t)x=u(w.getAsDataURL(t,e));else{var i;e||(e=90);try{i=b.toDataURL("image/jpeg",e/100)}catch(t){i=b.toDataURL("image/jpeg")}x=u(i),v&&(x=v.stripHeaders(x),E&&(v.meta&&v.meta.exif&&v.setExif({PixelXDimension:this.width,PixelYDimension:this.height}),x=v.writeHeaders(x)),v.purge(),v=null)}return C=!1,x},destroy:function(){w=null,g.call(this),this.getRuntime().getShim().removeInstance(this.uid)}})}return t.Image=u}),n("moxie/runtime/flash/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(t,e,i,n,r){function a(){var t;try{t=navigator.plugins["Shockwave Flash"],t=t.description}catch(e){try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(e){t="0.0"}}return t=t.match(/\d+/g),parseFloat(t[0]+"."+t[1])}function s(s){var u,l=this;s=t.extend({swf_url:e.swf_url},s),r.call(this,s,o,{access_binary:function(t){return t&&"browser"===l.mode},access_image_binary:function(t){return t&&"browser"===l.mode},display_media:r.capTrue,do_cors:r.capTrue,drag_and_drop:!1,report_upload_progress:function(){return"client"===l.mode},resize_image:r.capTrue,return_response_headers:!1,return_response_type:function(e){return!("json"!==e||!window.JSON)||(!t.arrayDiff(e,["","text","document"])||"browser"===l.mode)},return_status_code:function(e){return"browser"===l.mode||!t.arrayDiff(e,[200,404])},select_file:r.capTrue,select_multiple:r.capTrue,send_binary_string:function(t){return t&&"browser"===l.mode},send_browser_cookies:function(t){return t&&"browser"===l.mode},send_custom_headers:function(t){return t&&"browser"===l.mode},send_multipart:r.capTrue,slice_blob:function(t){return t&&"browser"===l.mode},stream_upload:function(t){return t&&"browser"===l.mode},summon_file_dialog:!1,upload_filesize:function(e){return t.parseSizeStr(e)<=2097152||"client"===l.mode},use_http_method:function(e){return!t.arrayDiff(e,["GET","POST"])}},{access_binary:function(t){return t?"browser":"client"},access_image_binary:function(t){return t?"browser":"client"},report_upload_progress:function(t){return t?"browser":"client"},return_response_type:function(e){return t.arrayDiff(e,["","text","json","document"])?"browser":["client","browser"]},return_status_code:function(e){return t.arrayDiff(e,[200,404])?"browser":["client","browser"]},send_binary_string:function(t){return t?"browser":"client"},send_browser_cookies:function(t){return t?"browser":"client"},send_custom_headers:function(t){return t?"browser":"client"},stream_upload:function(t){return t?"client":"browser"},upload_filesize:function(e){return t.parseSizeStr(e)>=2097152?"client":"browser"}},"client"),a()<10&&(this.mode=!1),t.extend(this,{getShim:function(){return i.get(this.uid)},shimExec:function(t,e){var i=[].slice.call(arguments,2);return l.getShim().exec(this.uid,t,e,i)},init:function(){var i,r,a;a=this.getShimContainer(),t.extend(a.style,{position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),i='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+s.swf_url+'" ',"IE"===e.browser&&(i+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),i+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+s.swf_url+'" /><param name="flashvars" value="uid='+escape(this.uid)+"&target="+e.global_event_dispatcher+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',"IE"===e.browser?(r=document.createElement("div"),a.appendChild(r),r.outerHTML=i,r=a=null):a.innerHTML=i,u=setTimeout(function(){l&&!l.initialized&&l.trigger("Error",new n.RuntimeError(n.RuntimeError.NOT_INIT_ERR))},5e3)},destroy:function(t){return function(){t.call(l),clearTimeout(u),s=u=t=l=null}}(this.destroy)},c)}var o="flash",c={};return r.addConstructor(o,s),c}),n("moxie/runtime/flash/file/Blob",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(t,e){var i={slice:function(t,i,n,r){var a=this.getRuntime();return i<0?i=Math.max(t.size+i,0):i>0&&(i=Math.min(i,t.size)),n<0?n=Math.max(t.size+n,0):n>0&&(n=Math.min(n,t.size)),t=a.shimExec.call(this,"Blob","slice",i,n,r||""),t&&(t=new e(a.uid,t)),t}};return t.Blob=i}),n("moxie/runtime/flash/file/FileInput",["moxie/runtime/flash/Runtime"],function(t){var e={init:function(t){this.getRuntime().shimExec.call(this,"FileInput","init",{name:t.name,accept:t.accept,multiple:t.multiple}),this.trigger("ready")}};return t.FileInput=e}),n("moxie/runtime/flash/file/FileReader",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(t,e){function i(t,i){switch(i){case"readAsText":return e.atob(t,"utf8");case"readAsBinaryString":return e.atob(t);case"readAsDataURL":return t}return null}var n="",r={read:function(t,e){var r=this,a=r.getRuntime();return"readAsDataURL"===t&&(n="data:"+(e.type||"")+";base64,"),r.bind("Progress",function(e,r){r&&(n+=i(r,t))}),a.shimExec.call(this,"FileReader","readAsBase64",e.uid)},getResult:function(){return n},destroy:function(){n=null}};return t.FileReader=r}),n("moxie/runtime/flash/file/FileReaderSync",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(t,e){function i(t,i){switch(i){case"readAsText":return e.atob(t,"utf8");case"readAsBinaryString":return e.atob(t);case"readAsDataURL":return t}return null}var n={read:function(t,e){var n;return(n=this.getRuntime().shimExec.call(this,"FileReaderSync","readAsBase64",e.uid))?("readAsDataURL"===t&&(n="data:"+(e.type||"")+";base64,"+n),i(n,t,e.type)):null}};return t.FileReaderSync=n}),n("moxie/runtime/flash/xhr/XMLHttpRequest",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/file/Blob","moxie/file/File","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/runtime/Transporter"],function(t,e,i,n,r,a,s){var o={send:function(t,n){function r(){t.transport=l.mode,l.shimExec.call(u,"XMLHttpRequest","send",t,n)}function o(t,e){l.shimExec.call(u,"XMLHttpRequest","appendBlob",t,e.uid),n=null,r()}function c(t,e){var i=new s;i.bind("TransportingComplete",function(){e(this.result)}),i.transport(t.getSource(),t.type,{ruid:l.uid})}var u=this,l=u.getRuntime();if(e.isEmptyObj(t.headers)||e.each(t.headers,function(t,e){l.shimExec.call(u,"XMLHttpRequest","setRequestHeader",e,t.toString())}),n instanceof a){var d;if(n.each(function(t,e){t instanceof i?d=e:l.shimExec.call(u,"XMLHttpRequest","append",e,t)}),n.hasBlob()){var h=n.getBlob();h.isDetached()?c(h,function(t){h.destroy(),o(d,t)}):o(d,h)}else n=null,r()}else n instanceof i?n.isDetached()?c(n,function(t){n.destroy(),n=t.uid,r()}):(n=n.uid,r()):r()},getResponse:function(t){var i,a,s=this.getRuntime();if(a=s.shimExec.call(this,"XMLHttpRequest","getResponseAsBlob")){if(a=new n(s.uid,a),"blob"===t)return a;try{if(i=new r,~e.inArray(t,["","text"]))return i.readAsText(a);if("json"===t&&window.JSON)return JSON.parse(i.readAsText(a))}finally{a.destroy()}}return null},abort:function(t){this.getRuntime().shimExec.call(this,"XMLHttpRequest","abort"),this.dispatchEvent("readystatechange"),this.dispatchEvent("abort")}};return t.XMLHttpRequest=o}),n("moxie/runtime/flash/runtime/Transporter",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(t,e){var i={getAsBlob:function(t){var i=this.getRuntime(),n=i.shimExec.call(this,"Transporter","getAsBlob",t);return n?new e(i.uid,n):null}};return t.Transporter=i}),n("moxie/runtime/flash/image/Image",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/runtime/Transporter","moxie/file/Blob","moxie/file/FileReaderSync"],function(t,e,i,n,r){var a={loadFromBlob:function(t){function e(t){r.shimExec.call(n,"Image","loadFromBlob",t.uid),n=r=null}var n=this,r=n.getRuntime();if(t.isDetached()){var a=new i;a.bind("TransportingComplete",function(){e(a.result.getSource())}),a.transport(t.getSource(),t.type,{ruid:r.uid})}else e(t.getSource())},loadFromImage:function(t){return this.getRuntime().shimExec.call(this,"Image","loadFromImage",t.uid)},getAsBlob:function(t,e){var i=this.getRuntime(),r=i.shimExec.call(this,"Image","getAsBlob",t,e);return r?new n(i.uid,r):null},getAsDataURL:function(){var t,e=this.getRuntime(),i=e.Image.getAsBlob.apply(this,arguments);return i?(t=new r,t.readAsDataURL(i)):null}};return t.Image=a}),n("moxie/runtime/silverlight/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(t,e,i,n,r){function a(t){var e,i,n,r,a,s=!1,o=null,c=0;try{try{o=new ActiveXObject("AgControl.AgControl"),o.IsVersionSupported(t)&&(s=!0),o=null}catch(o){var u=navigator.plugins["Silverlight Plug-In"];if(u){for(e=u.description,"1.0.30226.2"===e&&(e="2.0.30226.2"),i=e.split(".");i.length>3;)i.pop();for(;i.length<4;)i.push(0);for(n=t.split(".");n.length>4;)n.pop();do{r=parseInt(n[c],10),a=parseInt(i[c],10),c++}while(c<n.length&&r===a);r<=a&&!isNaN(r)&&(s=!0)}}}catch(t){s=!1}return s}function s(s){var u,l=this;s=t.extend({xap_url:e.xap_url},s),r.call(this,s,o,{access_binary:r.capTrue,access_image_binary:r.capTrue,display_media:r.capTrue,do_cors:r.capTrue,drag_and_drop:!1,report_upload_progress:r.capTrue,resize_image:r.capTrue,return_response_headers:function(t){return t&&"client"===l.mode},return_response_type:function(t){return"json"!==t||!!window.JSON},return_status_code:function(e){return"client"===l.mode||!t.arrayDiff(e,[200,404])},select_file:r.capTrue,select_multiple:r.capTrue,send_binary_string:r.capTrue,send_browser_cookies:function(t){return t&&"browser"===l.mode},send_custom_headers:function(t){return t&&"client"===l.mode},send_multipart:r.capTrue,slice_blob:r.capTrue,stream_upload:!0,summon_file_dialog:!1,upload_filesize:r.capTrue,use_http_method:function(e){return"client"===l.mode||!t.arrayDiff(e,["GET","POST"])}},{return_response_headers:function(t){return t?"client":"browser"},return_status_code:function(e){return t.arrayDiff(e,[200,404])?"client":["client","browser"]},send_browser_cookies:function(t){return t?"browser":"client"},send_custom_headers:function(t){return t?"client":"browser"},use_http_method:function(e){return t.arrayDiff(e,["GET","POST"])?"client":["client","browser"]}}),a("2.0.31005.0")&&"Opera"!==e.browser||(this.mode=!1),t.extend(this,{getShim:function(){return i.get(this.uid).content.Moxie},shimExec:function(t,e){var i=[].slice.call(arguments,2);return l.getShim().exec(this.uid,t,e,i)},init:function(){var t;t=this.getShimContainer(),t.innerHTML='<object id="'+this.uid+'" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;"><param name="source" value="'+s.xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="uid='+this.uid+",target="+e.global_event_dispatcher+'"/></object>',u=setTimeout(function(){l&&!l.initialized&&l.trigger("Error",new n.RuntimeError(n.RuntimeError.NOT_INIT_ERR))},"Windows"!==e.OS?1e4:5e3)},destroy:function(t){return function(){t.call(l),clearTimeout(u),s=u=t=l=null}}(this.destroy)},c)}var o="silverlight",c={};return r.addConstructor(o,s),c}),n("moxie/runtime/silverlight/file/Blob",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/Blob"],function(t,e,i){return t.Blob=e.extend({},i)}),n("moxie/runtime/silverlight/file/FileInput",["moxie/runtime/silverlight/Runtime"],function(t){var e={init:function(t){this.getRuntime().shimExec.call(this,"FileInput","init",function(t){for(var e="",i=0;i<t.length;i++)e+=(""!==e?"|":"")+t[i].title+" | *."+t[i].extensions.replace(/,/g,";*.");return e}(t.accept),t.name,t.multiple),this.trigger("ready")}};return t.FileInput=e}),n("moxie/runtime/silverlight/file/FileDrop",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Dom","moxie/core/utils/Events"],function(t,e,i){var n={init:function(){var t,n=this,r=n.getRuntime();return t=r.getShimContainer(),i.addEvent(t,"dragover",function(t){t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect="copy"},n.uid),i.addEvent(t,"dragenter",function(t){t.preventDefault(),e.get(r.uid).dragEnter(t)&&t.stopPropagation()},n.uid),i.addEvent(t,"drop",function(t){t.preventDefault(),e.get(r.uid).dragDrop(t)&&t.stopPropagation()},n.uid),r.shimExec.call(this,"FileDrop","init")}};return t.FileDrop=n}),n("moxie/runtime/silverlight/file/FileReader",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReader"],function(t,e,i){return t.FileReader=e.extend({},i)}),n("moxie/runtime/silverlight/file/FileReaderSync",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReaderSync"],function(t,e,i){return t.FileReaderSync=e.extend({},i)}),n("moxie/runtime/silverlight/xhr/XMLHttpRequest",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/xhr/XMLHttpRequest"],function(t,e,i){return t.XMLHttpRequest=e.extend({},i)}),n("moxie/runtime/silverlight/runtime/Transporter",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/runtime/Transporter"],function(t,e,i){return t.Transporter=e.extend({},i)}),n("moxie/runtime/silverlight/image/Image",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/image/Image"],function(t,e,i){return t.Image=e.extend({},i,{getInfo:function(){var t=this.getRuntime(),i=["tiff","exif","gps"],n={meta:{}},r=t.shimExec.call(this,"Image","getInfo");return r.meta&&e.each(i,function(t){var e,i,a,s,o=r.meta[t];if(o&&o.keys)for(n.meta[t]={},i=0,a=o.keys.length;i<a;i++)e=o.keys[i],(s=o[e])&&(/^(\d|[1-9]\d+)$/.test(s)?s=parseInt(s,10):/^\d*\.\d+$/.test(s)&&(s=parseFloat(s)),n.meta[t][e]=s)}),n.width=parseInt(r.width,10),n.height=parseInt(r.height,10),n.size=parseInt(r.size,10),n.type=r.type,n.name=r.name,n}})}),n("moxie/runtime/html4/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(t,e,i,n){function r(e){var r=this,o=i.capTest,c=i.capTrue;i.call(this,e,a,{access_binary:o(window.FileReader||window.File&&File.getAsDataURL),access_image_binary:!1,display_media:o(s.Image&&(n.can("create_canvas")||n.can("use_data_uri_over32kb"))),do_cors:!1,drag_and_drop:!1,filter_by_extension:o(function(){return"Chrome"===n.browser&&n.version>=28||"IE"===n.browser&&n.version>=10}()),resize_image:function(){return s.Image&&r.can("access_binary")&&n.can("create_canvas")},report_upload_progress:!1,return_response_headers:!1,return_response_type:function(e){return!("json"!==e||!window.JSON)||!!~t.inArray(e,["text","document",""])},return_status_code:function(e){return!t.arrayDiff(e,[200,404])},select_file:function(){return n.can("use_fileinput")},select_multiple:!1,send_binary_string:!1,send_custom_headers:!1,send_multipart:!0,slice_blob:!1,stream_upload:function(){return r.can("select_file")},summon_file_dialog:o(function(){return"Firefox"===n.browser&&n.version>=4||"Opera"===n.browser&&n.version>=12||!!~t.inArray(n.browser,["Chrome","Safari"])}()),upload_filesize:c,use_http_method:function(e){return!t.arrayDiff(e,["GET","POST"])}}),t.extend(this,{init:function(){this.trigger("Init")},destroy:function(t){return function(){t.call(r),t=r=null}}(this.destroy)}),t.extend(this.getShim(),s)}var a="html4",s={};return i.addConstructor(a,r),s}),n("moxie/runtime/html4/file/FileInput",["moxie/runtime/html4/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(t,e,i,n,r,a){function s(){function t(){var r,l,d,h,m,f,p=this,g=p.getRuntime();f=e.guid("uid_"),r=g.getShimContainer(),s&&(d=i.get(s+"_form"))&&e.extend(d.style,{top:"100%"}),h=document.createElement("form"),h.setAttribute("id",f+"_form"),h.setAttribute("method","post"),h.setAttribute("enctype","multipart/form-data"),h.setAttribute("encoding","multipart/form-data"),e.extend(h.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",height:"100%"}),m=document.createElement("input"),m.setAttribute("id",f),m.setAttribute("type","file"),m.setAttribute("name",o.name||"Filedata"),m.setAttribute("accept",u.join(",")),e.extend(m.style,{fontSize:"999px",opacity:0}),h.appendChild(m),r.appendChild(h),e.extend(m.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),"IE"===a.browser&&a.version<10&&e.extend(m.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"}),m.onchange=function(){var e;this.value&&(e=this.files?this.files[0]:{name:this.value},c=[e],this.onchange=function(){},t.call(p),p.bind("change",function t(){var e,n=i.get(f),r=i.get(f+"_form");p.unbind("change",t),p.files.length&&n&&r&&(e=p.files[0],n.setAttribute("id",e.uid),r.setAttribute("id",e.uid+"_form"),r.setAttribute("target",e.uid+"_iframe")),n=r=null},998),m=h=null,p.trigger("change"))},g.can("summon_file_dialog")&&(l=i.get(o.browse_button),n.removeEvent(l,"click",p.uid),n.addEvent(l,"click",function(t){m&&!m.disabled&&m.click(),t.preventDefault()},p.uid)),s=f,r=d=l=null}var s,o,c=[],u=[];e.extend(this,{init:function(e){var a,s=this,c=s.getRuntime();o=e,u=e.accept.mimes||r.extList2mimes(e.accept,c.can("filter_by_extension")),a=c.getShimContainer(),function(){var t,r,o;t=i.get(e.browse_button),c.can("summon_file_dialog")&&("static"===i.getStyle(t,"position")&&(t.style.position="relative"),r=parseInt(i.getStyle(t,"z-index"),10)||1,t.style.zIndex=r,a.style.zIndex=r-1),o=c.can("summon_file_dialog")?t:a,n.addEvent(o,"mouseover",function(){s.trigger("mouseenter")},s.uid),n.addEvent(o,"mouseout",function(){s.trigger("mouseleave")},s.uid),n.addEvent(o,"mousedown",function(){s.trigger("mousedown")},s.uid),n.addEvent(i.get(e.container),"mouseup",function(){s.trigger("mouseup")},s.uid),t=null}(),t.call(this),a=null,s.trigger({type:"ready",async:!0})},getFiles:function(){return c},disable:function(t){var e;(e=i.get(s))&&(e.disabled=!!t)},destroy:function(){var t=this.getRuntime(),e=t.getShim(),r=t.getShimContainer();n.removeAllEvents(r,this.uid),n.removeAllEvents(o&&i.get(o.container),this.uid),n.removeAllEvents(o&&i.get(o.browse_button),this.uid),r&&(r.innerHTML=""),e.removeInstance(this.uid),s=c=u=o=r=e=null}})}return t.FileInput=s}),n("moxie/runtime/html4/file/FileReader",["moxie/runtime/html4/Runtime","moxie/runtime/html5/file/FileReader"],function(t,e){return t.FileReader=e}),n("moxie/runtime/html4/xhr/XMLHttpRequest",["moxie/runtime/html4/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Url","moxie/core/Exceptions","moxie/core/utils/Events","moxie/file/Blob","moxie/xhr/FormData"],function(t,e,i,n,r,a,s,o){function c(){function t(t){var e,n,r,s,o=this,c=!1;if(l){if(e=l.id.replace(/_iframe$/,""),n=i.get(e+"_form")){for(r=n.getElementsByTagName("input"),s=r.length;s--;)switch(r[s].getAttribute("type")){case"hidden":r[s].parentNode.removeChild(r[s]);break;case"file":c=!0}r=[],c||n.parentNode.removeChild(n),n=null}setTimeout(function(){a.removeEvent(l,"load",o.uid),l.parentNode&&l.parentNode.removeChild(l);var e=o.getRuntime().getShimContainer();e.children.length||e.parentNode.removeChild(e),e=l=null,t()},1)}}var c,u,l;e.extend(this,{send:function(d,h){var m,f,p,g,_=this,v=_.getRuntime();if(c=u=null,h instanceof o&&h.hasBlob()){if(g=h.getBlob(),m=g.uid,p=i.get(m),!(f=i.get(m+"_form")))throw new r.DOMException(r.DOMException.NOT_FOUND_ERR)}else m=e.guid("uid_"),f=document.createElement("form"),f.setAttribute("id",m+"_form"),f.setAttribute("method",d.method),f.setAttribute("enctype","multipart/form-data"),f.setAttribute("encoding","multipart/form-data"),f.setAttribute("target",m+"_iframe"),v.getShimContainer().appendChild(f);h instanceof o&&h.each(function(t,i){if(t instanceof s)p&&p.setAttribute("name",i);else{var n=document.createElement("input");e.extend(n,{type:"hidden",name:i,value:t}),p?f.insertBefore(n,p):f.appendChild(n)}}),f.setAttribute("action",d.url),function(){var i=v.getShimContainer()||document.body,r=document.createElement("div");r.innerHTML='<iframe id="'+m+'_iframe" name="'+m+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',l=r.firstChild,i.appendChild(l),a.addEvent(l,"load",function(){var i;try{i=l.contentWindow.document||l.contentDocument||window.frames[l.id].document,/^4(0[0-9]|1[0-7]|2[2346])\s/.test(i.title)?c=i.title.replace(/^(\d+).*$/,"$1"):(c=200,u=e.trim(i.body.innerHTML),_.trigger({type:"progress",loaded:u.length,total:u.length}),g&&_.trigger({type:"uploadprogress",loaded:g.size||1025,total:g.size||1025}))}catch(e){if(!n.hasSameOrigin(d.url))return void t.call(_,function(){_.trigger("error")});c=404}t.call(_,function(){_.trigger("load")})},_.uid)}(),f.submit(),_.trigger("loadstart")},getStatus:function(){return c},getResponse:function(t){if("json"===t&&"string"===e.typeOf(u)&&window.JSON)try{return JSON.parse(u.replace(/^\s*<pre[^>]*>/,"").replace(/<\/pre>\s*$/,""))}catch(t){return null}return u},abort:function(){var e=this;l&&l.contentWindow&&(l.contentWindow.stop?l.contentWindow.stop():l.contentWindow.document.execCommand?l.contentWindow.document.execCommand("Stop"):l.src="about:blank"),t.call(this,function(){e.dispatchEvent("abort")})}})}return t.XMLHttpRequest=c}),n("moxie/runtime/html4/image/Image",["moxie/runtime/html4/Runtime","moxie/runtime/html5/image/Image"],function(t,e){return t.Image=e}),function(i){for(var n=0;n<i.length;n++){for(var r=t,s=i[n],o=s.split(/[.\/]/),c=0;c<o.length-1;++c)r[o[c]]===e&&(r[o[c]]={}),r=r[o[c]];r[o[o.length-1]]=a[s]}}(["moxie/core/utils/Basic","moxie/core/I18n","moxie/core/utils/Mime","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/utils/Encode","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/file/Blob","moxie/file/File","moxie/file/FileInput","moxie/file/FileDrop","moxie/runtime/RuntimeTarget","moxie/file/FileReader","moxie/core/utils/Url","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/xhr/XMLHttpRequest","moxie/runtime/Transporter","moxie/image/Image","moxie/core/utils/Events"])}(window),function(t){var e={},i=t.moxie.core.utils.Basic.inArray;(function t(n){var r,a;for(r in n)a=typeof n[r],"object"!==a||~i(r,["Exceptions","Env","Mime"])?"function"===a&&(e[r]=n[r]):t(n[r])})(t.moxie),e.Env=t.moxie.core.utils.Env,e.Mime=t.moxie.core.utils.Mime,e.Exceptions=t.moxie.core.Exceptions,t.mOxie=e,t.o||(t.o=e)}(window);mOxie},L5uX:function(t,e){},LFXr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"uploadImg",data:function(){return{accessid:"",host:"",policyBase64:"",signature:"",key:"",expire:0,uploadfilename:{}}},props:["type","select","container"],methods:{getParam:function(t){var e=this;this.$store.dispatch("common_getPolicyAndAccess",{type:this.type||1}).then(function(i){e.host=i.host,e.policyBase64=i.policy,e.accessid=i.accessid,e.signature=i.signature,e.expire=parseInt(i.expire),e.key=i.dir,t&&t(),e.$store.dispatch("bubble_success",i)}).catch(function(t){e.$store.dispatch("bubble_fail",t)})},random_string:function(t){for(var t=t||32,e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",i=e.length,n="",r=0;r<t;r++)n+=e.charAt(Math.floor(Math.random()*i));return n},upload:function(t){var e;try{try{e=t.getAsDataURL()}catch(i){e=window.URL.createObjectURL(t)}}catch(n){var i=new FileReader;i.onload=function(t){e=t.target.result},i.readAsDataURL(t)}return e},send_request:function(t){var e=t.lastIndexOf("."),i=t.substring(e),n=this.key+this.random_string(10)+i;this.uploadfilename[t]={src:this.host+"/"+n,load:0},this.uploader.setOption({url:this.host,multipart_params:{key:n,policy:this.policyBase64,OSSAccessKeyId:this.accessid,signature:this.signature,success_action_status:"200"}}),this.uploader.start()}},mounted:function(){var t=this,e=this;this.getParam(),this.uploader=new this.$plupload.Uploader({runtimes:"html5, flash, silverlight, html4",browse_button:this.select,container:document.getElementById(this.container),flash_swf_url:"lib/plupload-2.1.2/js/Moxie.swf",silverlight_xap_url:"lib/plupload-2.1.2/js/Moxie.xap",url:"https://oss.aliyuncs.com",filters:{mime_types:[{title:"Image files",extensions:"jpg,gif,png,bmp"}],max_file_size:"10mb",prevent_duplicates:!0},init:{PostInit:function(){},FilesAdded:function(e,i){var n=Date.parse(new Date)/1e3;t.expire<n+3?t.getParam(function(e){t.uploader.start()}):t.uploader.start()},BeforeUpload:function(t,i){e.send_request(i.name)},UploadProgress:function(t,e){},FileUploaded:function(e,i,n){var r=t.uploadfilename[i.name].src;t.uploadfilename[i.name].load=1,t.$emit("uploadImg_uploaded",r)},Error:function(e,i){if(-602==i.code){var n=t.uploadfilename[i.file.name].src;t.$emit("uploadImg_uploaded",n)}else t.$emit("uploadImg_error",i)}}}),this.uploader.init()}}},"LJ/l":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=i("NYxO"),r=i("cSj+"),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={data:function(){return{show:!1,tagsshow:!1,create:!1,image:a.default,articlename:"",control:"翻译授权",control_id:-1,oldname:"",oldimg:"",oldurl:"",oldauthor:"",share:"允许转载",share_id:-1,articletype:"类型",status:"状态",level:"等级",category_id:-1,audit_status:-1,level_id:-1,tags:[],tagsVal:"",intro:"",agree:!0,reg_img:!0,reg_name:!0,reg_type:!0,reg_control:!0,reg_old_name:!0,reg_old_url:!0,reg_old_author:!0,reg_old_img:!0,reg_share:!0,reg_status:!0,reg_level:!0,reg_tag:!0,reg_intro:!0,reg_img_con:"",reg_name_con:"",reg_control_con:"",reg_old_name_con:"",reg_old_url_con:"",reg_old_img_con:"",reg_old_author_con:"",reg_share_con:"",reg_type_con:"",reg_status_con:"",reg_level_con:"",reg_tag_con:"",reg_intro_con:"",count:8}},props:["resType"],computed:(0,n.mapState)({catalog:function(t){return t.opus.catalog},category:function(t){return t.opus.category}}),methods:{focus:function(e){t(e.currentTarget).parents(".create-top-item").addClass("z-active")},blur:function(e){t(e.currentTarget).parents(".create-top-item").removeClass("z-active")},cancel:function(){this.show=!1},agreeSwitch:function(t){this.agree=!this.agree},selctEnter:function(e){t(e.currentTarget).addClass("z-active")},selctOut:function(e){t(e.currentTarget).removeClass("z-active")},typeShowValue:function(e){this.articletype=t(e.currentTarget).text(),this.category_id=t(e.currentTarget).attr("data-id"),t(e.currentTarget).parents(".create-top-select").removeClass("z-active")},statusShowValue:function(e){this.status=t(e.currentTarget).text(),this.audit_status=t(e.currentTarget).attr("data-audit_status"),t(e.currentTarget).parents(".create-top-select").removeClass("z-active")},levelShowValue:function(e){this.level=t(e.currentTarget).text(),this.level_id=t(e.currentTarget).attr("data-level_id"),t(e.currentTarget).parents(".create-top-select").removeClass("z-active")},controlShowValue:function(e){this.control=t(e.currentTarget).text(),this.control_id=Number(t(e.currentTarget).attr("data-control_id")),t(e.currentTarget).parents(".create-top-select").removeClass("z-active")},shareShowValue:function(e){this.share=t(e.currentTarget).text(),this.share_id=Number(t(e.currentTarget).attr("data-share_id")),t(e.currentTarget).parents(".create-top-select").removeClass("z-active")},tagsshowOpen:function(e){this.tagsshow=!0;var i=e.currentTarget;i=t(i),i.find("input").focus(),setTimeout(function(){i.find("input").focus()},20)},deleteTag:function(t){var e=t.currentTarget.dataset.index;return e=Number(e),this.tags.splice(e,1),!1},enter:function(e){if(this.tags.length>=3)return!1;this.tagsVal=t.trim(this.tagsVal);var i=this.tagsVal;return""==t.trim(i)?(this.$store.dispatch("bubble_showBubble",{show:!0,type:"top",top:{status:"z-warn",msg:"标签内容不能为空"}}),!1):t.trim(i).length>5?(this.$store.dispatch("bubble_showBubble",{show:!0,type:"top",top:{status:"z-warn",msg:"标签内容不能超出5个字"}}),!1):(this.tags.push(i),void(this.tagsVal=""))},tagsSelect:function(e){var i=t(e.currentTarget);if(i.hasClass("z-select"))return!1;if(this.tags.length>=3)return!1;var n=i.text();this.tags.push(n)},uploaded:function(t){this.image=t},old_uploaded:function(t){this.oldimg=t},save:function(){if(this.reg_img=!0,this.reg_name=!0,this.reg_type=!0,this.reg_control=!0,this.reg_old_name=!0,this.reg_old_url=!0,this.reg_old_author=!0,this.reg_old_img=!0,this.reg_share=!0,this.reg_status=!0,this.reg_level=!0,this.reg_tag=!0,this.reg_intro=!0,!this.image||this.image==a.default)return this.reg_img=!1,this.reg_img_con="添加封面",!1;if(this.reg_img=!0,this.reg_img_con="",!t.trim(this.articlename))return this.reg_name=!1,this.reg_name_con="填写30字中文以内故事名字",!1;if(t.trim(this.articlename).length>30)return this.reg_name=!1,this.reg_name_con="超出最大30个字数",!1;if(this.reg_name=!0,this.reg_name_con="",-1==t.trim(this.control_id))return this.reg_control=!1,this.reg_control_con="是否为翻译授权作品",!1;if(this.reg_control=!0,this.reg_control_con="",""==t.trim(this.oldname)&&1==this.control_id)return this.reg_old_name=!1,this.reg_old_name_con="填写原作品故事名",!1;if(this.reg_old_name=!0,this.reg_old_name_con="",""==t.trim(this.oldauthor)&&1==this.control_id)return this.reg_old_author=!1,this.reg_old_author_con="填写原作者",!1;if(this.reg_old_author=!0,this.reg_old_author_con="",""==t.trim(this.oldurl)&&1==this.control_id)return this.reg_old_url=!1,this.reg_old_url_con="填写原作品连接",!1;if(this.reg_old_url=!0,this.reg_old_url_con="",""==t.trim(this.oldimg)&&1==this.control_id)return this.reg_old_img=!1,this.reg_old_img_con="上传翻译授权截图证明",!1;if(this.reg_old_img=!0,this.reg_old_img_con="",-1==t.trim(this.share_id))return this.reg_share=!1,this.reg_share_con="是否允许他人复制和转载",!1;if(this.reg_share=!0,this.reg_share_con="",-1==t.trim(this.category_id))return this.reg_type=!1,this.reg_type_con="类型选定不可更改",!1;if(this.reg_type=!0,this.reg_type_con="",-1==t.trim(this.audit_status))return this.reg_status=!1,this.reg_status_con="连载完请及时更改便于推荐",!1;if(this.reg_status=!0,this.reg_status_con="",-1==t.trim(this.level_id))return this.reg_level=!1,this.reg_level_con="关系到推荐强度选定不可更改",!1;if(this.reg_level=!0,this.reg_level_con="",!this.tags.length)return this.reg_tag=!1,this.reg_tag_con="填写3个以内标签于推荐",!1;if(this.tags.length>3)return this.reg_tag=!1,this.reg_tag_con="超出3个标签个数",!1;if(this.reg_tag=!0,this.reg_tag_con="",!t.trim(this.intro))return this.reg_intro=!1,this.reg_intro_con="填写1000字中文以内简介",!1;if(t.trim(this.intro).length>1e3)return this.reg_intro=!1,this.reg_intro_con="超出最大1000个字数",!1;if(this.reg_intro=!0,this.reg_intro_con="",!this.agree)return this.$store.dispatch("bubble_showBubble",{show:!0,type:"top",top:{status:"z-warn",msg:"请同意协议"}}),!1;var e=this;this.$store.dispatch("bubble_showBubble",{show:!0,type:"warn",warn:{title:"再次确定创建故事?",html:'<p>为了不被相关部门请喝茶，以及本着挖掘内容更加有深度、而不是单纯靠视觉博人眼球的作品的原则</p><p>请确保你的封面和即将发布的章节中，没有涉及血腥、暴力、色情、政治等违规情节，否则不予推送首页，严重者删除内容或封号处理</p><a href="javascript:void(0);">《耳语之森原创声明及相关功能使用协议》 </a>',comfireFn:function(){e.addCatalog()}}})},addCatalog:function(){var t=this,e={level:this.level_id,translate:this.control_id,reprint:this.share_id,category_id:this.category_id,catalog_id:this.catalog_id,catalog_title:this.articlename,catalog_desc:this.intro,catalog_cover_url:this.image,catalog_status:this.audit_status,catalog_label:this.tags.join(",")};1==this.control_id&&(e.authorize={original_title:this.oldname,original_url:this.oldurl,original_img_url:this.oldimg,original_author:this.oldauthor}),this.$store.dispatch(this.create?"opus_updateCatalog":"opus_addCatalog",e).then(function(i){var n;n=t.create?"更新成功!":"创建故事成功！块更新章节吧！",t.$eventHub.$emit("updateCatalog_success"),t.show=!1,t.$store.dispatch("opus_setCatalog_info",e),t.$store.dispatch("bubble_success",{ret:0,type:"top",msg:n}),"author"==t.resType&&t.refreshCatalog()}).catch(function(e){t.$store.dispatch("bubble_fail",e)})},getCategoryList:function(){var t=this;this.$store.dispatch("opus_getCategoryList",{}).then(function(e){t.$store.dispatch("bubble_success",e)}).catch(function(e){t.$store.dispatch("bubble_fail",e)})},getLabelList:function(t){var e=this;this.$store.dispatch("opus_getLabelList",{count:t||this.count}).then(function(t){e.$store.dispatch("bubble_success",t)}).catch(function(t){e.$store.dispatch("bubble_fail",t)})},refresh:function(){this.getLabelList()},refreshCatalog:function(){this.$eventHub.$emit("author_chapter_list_refresh")}},watch:{show:function(t){t&&(this.getCategoryList(),this.getLabelList())}},updated:function(){var e=0;t(".tag-item").each(function(){e+=t(this).width()+10}),t(".tag-edit").css("padding-left",e+20)},mounted:function(){var e=this;this.$eventHub.$on("getLabelList",function(t){e.getLabelList(t.number)}),this.$eventHub.$on("header_article_setShow",function(t){if(e.show=t.show,t.catalog){e.create=!0,e.image=t.catalog.catalog_cover_url,e.articlename=t.catalog.catalog_title,e.category_id=t.catalog.category_id,e.catalog_id=t.catalog.catalog_id,e.articletype=t.catalog.category_title,e.audit_status=t.catalog.audit_status,e.level_id=t.catalog.level,e.intro=t.catalog.catalog_desc,e.share_id=t.catalog.reprint,e.share=1==t.catalog.reprint?"是":"否",e.control_id=t.catalog.translate,e.control=1==t.catalog.translate?"是":"否",t.catalog.authorize&&(e.oldname=t.catalog.authorize.original_title,e.oldauthor=t.catalog.authorize.original_author,e.oldimg=t.catalog.authorize.original_img_url,e.oldurl=t.catalog.authorize.original_url),e.tags=[],t.catalog.labels.map(function(t,i){e.tags.push(t)});for(var i=0,n=e.catalog.statusArr.length;i<n;i++){var r=e.catalog.statusArr[i];e.audit_status==r.audit_status&&(e.status=r.text)}for(var i=0,n=e.catalog.levelArr.length;i<n;i++){var r=e.catalog.levelArr[i];e.level_id==r.level_id&&(e.level=r.text)}}else e.create=!1,e.image=a.default,e.articlename="",e.category_id=-1,e.audit_status=-1,e.level_id=-1,e.intro="",e.articletype="类型",e.status="状态",e.level="等级",e.tags=[],e.control="翻译授权",e.control_id=-1,e.oldname="",e.oldimg="",e.oldurl="",e.oldauthor="",e.share="允许转载",e.share_id=-1}),t("body").on("click",function(i){var n=t(i.target);n.hasClass("j-close-1")||0!=n.parents(".j-close-1").length||(e.typeShow=!1,e.statusShow=!1),n.hasClass("j-close-2")||0!=n.parents(".j-close-2").length||(e.tagsshow=!1,0==e.tags.length?t(".j-close-2").find(".tag-edit").text("填写标签便于推荐，多个标签用空格区分"):t(".j-close-2").find(".tag-edit").text(""))})}}}).call(e,i("7t+N"))},"My/L":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",{staticClass:"c-artice-edit"},[i("div",{staticClass:"c-artice-edit-mask"},[i("div",{staticClass:"c-artice-edit-wrap"},[i("div",{staticClass:"c-artice-edit__create"},[i("div",{staticClass:"create-top"},[i("div",{staticClass:"create-top-left"},[i("div",{staticClass:"create-top-left-img"},[t.reg_img?t._e():i("div",{staticClass:"c-dialog__tip"},[i("div",{staticClass:"tip-arrow"}),t._v(" "),i("div",{staticClass:"tip-text"},[t._v(t._s(t.reg_img_con))])]),t._v(" "),i("div",{staticClass:"img"},[i("div",{staticClass:"mask",attrs:{id:"article_upload_image_select"}},[t._v("添加封面")]),t._v(" "),t.image?i("img",{attrs:{src:t.image}}):t._e()]),t._v(" "),i("UploadImg",{attrs:{type:"2",select:"article_upload_image_select",container:"article_container"},on:{uploadImg_uploaded:t.uploaded}})],1),t._v(" "),i("div",{staticClass:"create-top-left-text"},[t._v("添加封面：建议360X480以上")])]),t._v(" "),i("div",{staticClass:"create-top-right"},[i("div",{staticClass:"create-top-item create-top-input create-top-name cpm_form_input",class:{"z-limit":t.articlename.length>30}},[t.reg_name?t._e():i("div",{staticClass:"c-dialog__tip z-right"},[i("div",{staticClass:"tip-arrow"}),t._v(" "),i("div",{staticClass:"tip-text"},[t._v(t._s(t.reg_name_con))])]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.articlename,expression:"articlename"}],attrs:{type:"text",placeholder:"作品名称"},domProps:{value:t.articlename},on:{focus:t.focus,blur:t.blur,input:function(e){e.target.composing||(t.articlename=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"create-top-item z-mini"},[i("div",{staticClass:"create-top-select create-top-control z-width j-close-1",on:{mouseover:t.selctEnter,mouseout:t.selctOut}},[t.reg_control?t._e():i("div",{staticClass:"c-dialog__tip"},[i("div",{staticClass:"tip-arrow"}),t._v(" "),i("div",{staticClass:"tip-text"},[t._v(t._s(t.reg_control_con))])]),t._v(" "),i("span",[t._v(t._s(t.control))]),t._v(" "),i("div",{staticClass:"c-sub-more cpm_sub_more"},[i("div",{staticClass:"item",attrs:{"data-control_id":"1"},on:{click:t.controlShowValue}},[t._v("是")]),t._v(" "),i("div",{staticClass:"item",attrs:{"data-control_id":"0"},on:{click:t.controlShowValue}},[t._v("否")])])]),t._v(" "),i("div",{staticClass:"create-top-select create-top-share z-width j-close-1",on:{mouseover:t.selctEnter,mouseout:t.selctOut}},[t.reg_share?t._e():i("div",{staticClass:"c-dialog__tip z-right"},[i("div",{staticClass:"tip-arrow"}),t._v(" "),i("div",{staticClass:"tip-text"},[t._v(t._s(t.reg_share_con))])]),t._v(" "),i("span",[t._v(t._s(t.share))]),t._v(" "),i("div",{staticClass:"c-sub-more cpm_sub_more"},[i("div",{staticClass:"item",attrs:{"data-share_id":"1"},on:{click:t.shareShowValue}},[t._v("是")]),t._v(" "),i("div",{staticClass:"item",attrs:{"data-share_id":"0"},on:{click:t.shareShowValue}},[t._v("否")])])])]),t._v(" "),1==t.control_id?i("div",{staticClass:"create-top-item create-top-input create-top-old create-top-oldname cpm_form_input"},[t.reg_old_name?t._e():i("div",{staticClass:"c-dialog__tip z-right"},[i("div",{staticClass:"tip-arrow"}),t._v(" "),i("div",{staticClass:"tip-text"},[t._v(t._s(t.reg_old_name_con))])]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.oldname,expression:"oldname"}],attrs:{type:"text",placeholder:"原作品故事名字"},domProps:{value:t.oldname},on:{focus:t.focus,blur:t.blur,input:function(e){e.target.composing||(t.oldname=e.target.value)}}})]):t._e(),t._v(" "),1==t.control_id?i("div",{staticClass:"create-top-item create-top-input create-top-old create-top-oldauthor cpm_form_input"},[t.reg_old_author?t._e():i("div",{staticClass:"c-dialog__tip z-right"},[i("div",{staticClass:"tip-arrow"}),t._v(" "),i("div",{staticClass:"tip-text"},[t._v(t._s(t.reg_old_author_con))])]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.oldauthor,expression:"oldauthor"}],attrs:{type:"text",placeholder:"原作者"},domProps:{value:t.oldauthor},on:{focus:t.focus,blur:t.blur,input:function(e){e.target.composing||(t.oldauthor=e.target.value)}}})]):t._e(),t._v(" "),1==t.control_id?i("div",{staticClass:"create-top-item create-top-input create-top-old create-top-oldurl cpm_form_input"},[t.reg_old_url?t._e():i("div",{staticClass:"c-dialog__tip z-right"},[i("div",{staticClass:"tip-arrow"}),t._v(" "),i("div",{staticClass:"tip-text"},[t._v(t._s(t.reg_old_url_con))])]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.oldurl,expression:"oldurl"}],attrs:{type:"text",placeholder:"原作品连接"},domProps:{value:t.oldurl},on:{focus:t.focus,blur:t.blur,input:function(e){e.target.composing||(t.oldurl=e.target.value)}}})]):t._e(),t._v(" "),1==t.control_id?i("div",{staticClass:"create-top-item create-top-input create-top-old create-top-oldimg"},[t.reg_old_img?t._e():i("div",{staticClass:"c-dialog__tip z-right"},[i("div",{staticClass:"tip-arrow"}),t._v(" "),i("div",{staticClass:"tip-text"},[t._v(t._s(t.reg_old_img_con))])]),t._v(" "),i("span",{attrs:{id:"old_upload_image_select"}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.oldimg,expression:"oldimg"}],attrs:{type:"text",disabled:"",placeholder:"上传翻译授权截图证明"},domProps:{value:t.oldimg},on:{input:function(e){e.target.composing||(t.oldimg=e.target.value)}}}),t._v(" "),i("UploadImg",{attrs:{type:"2",select:"old_upload_image_select",container:"old_container"},on:{uploadImg_uploaded:t.old_uploaded}})],1):t._e(),t._v(" "),i("div",{staticClass:"create-top-item z-mini"},[i("div",{staticClass:"create-top-select create-top-type j-close-1",on:{mouseover:t.selctEnter,mouseout:t.selctOut}},[t.reg_type?t._e():i("div",{staticClass:"c-dialog__tip"},[i("div",{staticClass:"tip-arrow"}),t._v(" "),i("div",{staticClass:"tip-text"},[t._v(t._s(t.reg_type_con))])]),t._v(" "),i("span",[t._v(t._s(t.articletype))]),t._v(" "),i("div",{staticClass:"c-sub-more cpm_sub_more"},t._l(t.category.laberSubnode,function(e){return i("div",{staticClass:"item",attrs:{"data-id":e.category_id},on:{click:t.typeShowValue}},[t._v(t._s(e.category_title))])}))]),t._v(" "),i("div",{staticClass:"create-top-select create-top-status j-close-1",on:{mouseover:t.selctEnter,mouseout:t.selctOut}},[t.reg_status?t._e():i("div",{staticClass:"c-dialog__tip z-top"},[i("div",{staticClass:"tip-arrow"}),t._v(" "),i("div",{staticClass:"tip-text"},[t._v(t._s(t.reg_status_con))])]),t._v(" "),i("span",[t._v(t._s(t.status))]),t._v(" "),t.catalog.statusArr.length?i("div",{staticClass:"c-sub-more cpm_sub_more"},t._l(t.catalog.statusArr,function(e){return i("div",{staticClass:"item",attrs:{"data-audit_status":e.audit_status},on:{click:t.statusShowValue}},[t._v(t._s(e.text))])})):t._e()]),t._v(" "),i("div",{staticClass:"create-top-select create-top-level j-close-1",on:{mouseover:t.selctEnter,mouseout:t.selctOut}},[t.reg_level?t._e():i("div",{staticClass:"c-dialog__tip z-right"},[i("div",{staticClass:"tip-arrow"}),t._v(" "),i("div",{staticClass:"tip-text"},[t._v(t._s(t.reg_level_con))])]),t._v(" "),i("span",[t._v(t._s(t.level))]),t._v(" "),t.catalog.levelArr.length?i("div",{staticClass:"c-sub-more cpm_sub_more"},t._l(t.catalog.levelArr,function(e){return i("div",{staticClass:"item",attrs:{"data-level_id":e.level_id},on:{click:t.levelShowValue}},[t._v(t._s(e.text))])})):t._e()])]),t._v(" "),i("div",{staticClass:"create-top-item create-top-tagsInput j-close-2",on:{click:t.tagsshowOpen}},[t.reg_tag?t._e():i("div",{staticClass:"c-dialog__tip z-right"},[i("div",{staticClass:"tip-arrow"}),t._v(" "),i("div",{staticClass:"tip-text"},[t._v(t._s(t.reg_tag_con))])]),t._v(" "),i("div",{staticClass:"tag-wrap cpm_form_input",class:{"z-limit":t.tags.length>3,"z-error":t.tagsshow}},[i("div",{staticClass:"tag-list"},t._l(t.tags,function(e,n){return i("div",{staticClass:"tag-item"},[i("div",{staticClass:"tag-item-text"},[t._v(t._s(e))]),i("em",{attrs:{"data-index":n},on:{click:function(e){e.stopPropagation(),t.deleteTag(e)}}})])})),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.tagsVal,expression:"tagsVal"}],staticClass:"tag-edit",attrs:{type:"text",placeholder:t.tags.length?"":"多个标签用空格区分"},domProps:{value:t.tagsVal},on:{keyup:[function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;e.stopPropagation(),e.preventDefault(),t.enter(e)},function(e){if(!("button"in e)&&t._k(e.keyCode,"space",32))return null;e.stopPropagation(),e.preventDefault(),t.enter(e)}],input:function(e){e.target.composing||(t.tagsVal=e.target.value)}}})]),t._v(" "),t.tagsshow?i("div",{staticClass:"create-tags-select"},[i("div",{staticClass:"create-tags-select-title"},[i("span",[t._v("热门标签")]),t._v(" "),i("em",{on:{click:t.refresh}})]),t._v(" "),i("div",{staticClass:"create-tags-select-body"},t._l(t.category.tags,function(e){return i("div",{staticClass:"body-item",class:{"z-select":t.tags.indexOf(e)>-1},on:{click:t.tagsSelect}},[t._v(t._s(e))])}))]):t._e()]),t._v(" "),i("div",{staticClass:"create-top-item create-top-form cpm_form_textarea",class:{"z-limit":t.intro.length>1e3}},[t.reg_intro?t._e():i("div",{staticClass:"c-dialog__tip z-right"},[i("div",{staticClass:"tip-arrow"}),t._v(" "),i("div",{staticClass:"tip-text"},[t._v(t._s(t.reg_intro_con))])]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.intro,expression:"intro"}],attrs:{placeholder:"填写作品简介..."},domProps:{value:t.intro},on:{focus:t.focus,blur:t.blur,input:function(e){e.target.composing||(t.intro=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"cpm_clear"}),t._v(" "),i("div",{staticClass:"create-top-agree",class:{"z-on":t.agree},on:{click:t.agreeSwitch}},[i("em"),t._v(" "),t._m(0)])]),t._v(" "),i("div",{staticClass:"create-bottom"},[i("div",{staticClass:"create-bottom-btn z-on"},[i("div",{staticClass:"create-bottom-item create-bottom-cancel",on:{click:t.cancel}},[t._v("取消")]),t._v(" "),i("div",{staticClass:"create-bottom-item create-bottom-commit",on:{click:t.save}},[i("span",[t._v(t._s(t.create?"更新作品":"创建新作品"))])])])])])])])]):t._e()},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[t._v("我已阅读并同意遵守 "),i("a",{attrs:{href:"./about.html"}},[t._v("《耳语之森原创声明及相关功能使用协议》 ")])])}]}},NEzH:function(t,e,i){i("rgvm");var n=i("VU/8")(i("vvc1"),i("2mP8"),null,null);t.exports=n.exports},Nza8:function(t,e,i){i("B0wf");var n=i("VU/8")(i("4k6S"),i("prCX"),null,null);t.exports=n.exports},OTwL:function(t,e){},PCXR:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("NYxO");e.default={data:function(){return{subMoreShow:!1,data:{},index:0,pageSize:5,pageIndex:1}},computed:(0,n.mapState)({chapter:function(t){return t.opus.chapter}}),methods:{subMoreSwitch:function(){this.subMoreShow=!this.subMoreShow},pageSwitch:function(t){if(t==this.pageIndex)return!1;this.pageIndex=t,this.getChapterList()},getChapterList:function(){var t=this;this.$store.dispatch("opus_getChapterList",{catalogId:this.catalog_id,pagination:"1",page:this.pageIndex,pageSize:this.pageSize}).then(function(e){t.$store.dispatch("bubble_success",e)}).catch(function(e){t.$store.dispatch("bubble_fail",e)})},remove:function(t){var e=this;this.$store.dispatch("bubble_showBubble",{show:!0,type:"warn",warn:{title:"确定要删除",content:"删除后将无法恢复，请谨慎处理",comfireFn:function(){e.deleteChapter(t)}}})},deleteChapter:function(t){var e=this;this.$store.dispatch("opus_deleteChapter",{chapterId:t}).then(function(t){e.getChapterList(),e.$store.dispatch("bubble_success",t)}).catch(function(t){e.$store.dispatch("bubble_fail",t)})}},mounted:function(){this.catalog_id=this.$url.getUrlParam("catalog_id"),this.getChapterList()}}},POwH:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=i("NYxO"),r=i("mOGY"),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={data:function(){return{avatar:a.default,pageIndex:1,pageSize:5,commentIndex:1,commentSize:5,comment_con:""}},computed:(0,n.mapState)({userInfo:function(t){return t.user.info},comment:function(t){return t.opus.comment},catalog:function(t){return t.opus.catalog.info}}),props:["type"],methods:{replayCommit:function(t,e){this.$store.dispatch("opus_setCommentList",{index:t,replayIndex:e})},pageSwitch:function(t){if(this.pageIndex==t)return!1;this.pageIndex=t,this.getCommentList()},getCommentList:function(){var t=this;this.$store.dispatch("opus_getCommentList",{page:this.pageIndex,pageSize:this.pageSize,pagination:1,catalogId:this.catalog_id,type:this.type||2,chapterId:this.chapter_id,subPageSize:this.commentSize}).then(function(e){t.$store.dispatch("bubble_success",e)}).catch(function(e){t.$store.dispatch("bubble_fail",e)})},addComment:function(t){var e=this;if(!this.userInfo.isLogin)return this.$store.dispatch("bubble_fail",{ret:-11,msg:"未登录，请登陆后操作"});this.$store.dispatch("opus_addComment",{to_comment_id:t.to_comment_id,to_reply_comment_id:t.to_reply_comment_id,comment:t.comment,catalog_id:this.catalog_id,chapter_id:t.chapter_id}).then(function(t){e.$eventHub.$emit("article.comment.refresh"),e.comment_con="",e.replayIndex=-2,e.getCommentList(),e.$store.dispatch("bubble_success",t)}).catch(function(t){e.$store.dispatch("bubble_fail",t)})},addCommentPraise:function(e){var i=this;if(!this.userInfo.isLogin)return this.$store.dispatch("bubble_fail",{ret:-11,msg:"未登录，请登陆后操作"});var n=t(e.currentTarget).parents(".c-artice-comment-list").attr("data-comment_id");this.$store.dispatch("opus_addCommentPraise",{commentId:n}).then(function(t){i.$store.dispatch("bubble_success",t)}).catch(function(t){i.$store.dispatch("bubble_fail",t)})},addReport:function(e){if(!this.userInfo.isLogin)return this.$store.dispatch("bubble_fail",{ret:-11,msg:"未登录，请登陆后操作"});var i;i=t(e.currentTarget).parents(".record__item").length>0?t(e.currentTarget).parents(".record__item").data("comment_id"):t(e.currentTarget).parents(".c-artice-comment-list").data("comment_id"),this.$store.dispatch("bubble_showBubble",{show:!0,type:"report",report:{content_id:i,content_type:2}})},sendComment:function(t){this.addComment({comment:this.comment_con,to_comment_id:t})},sendReplyComment:function(t,e){this.addComment({comment:this.comment_con,to_comment_id:t,to_reply_comment_id:e})},getSubCommentMore:function(t){var e=this;this.commentIndex++,this.$store.dispatch("opus_getReplyCommentList",{page:this.commentIndex,pageSize:this.commentSize,pagination:1,commentId:t.comment_id}).then(function(t){e.$store.dispatch("bubble_success",t)}).catch(function(t){e.$store.dispatch("bubble_fail",t)})}},created:function(){var t=this;this.$eventHub.$on("article.comment.addComment",function(e){t.addComment(e)})},mounted:function(){this.catalog_id=this.$url.getUrlParam("catalog_id"),this.chapter_id=this.$url.getUrlParam("chapter_id"),this.getCommentList()}}}).call(e,i("7t+N"))},PSXG:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("AEPM");e.default={name:"footer",data:function(){return{url:{about:n.distUrl+"about.html",contact:n.distUrl+"contact.html"}}},methods:{}}},PoJi:function(t,e,i){"use strict";function n(t){if(r)return void console.error("[cache] already installed. Vue.use(cache) should be called only once.");r=t,r.prototype.$version=a}Object.defineProperty(e,"__esModule",{value:!0});var r,a={banner:{key:"eryuzhisen_indexBanner",version:"1.0",time:6e5},history:{key:"eryuzhisen_catalog_history",version:"1.0",time:31104e6},userInfo:{key:"eryuzhisen_userInfo",version:"1.0",time:36e5},chapaterEdit:{key:"eryuzhisen_chapaterEdit",version:"1.0",time:6e4},chapaterEdit_edit:{key:"eryuzhisen_chapaterEdit_edit",version:"1.0",time:3e5}};e.default={install:n}},PwTI:function(t,e,i){i("+GE4");var n=i("VU/8")(i("9a/S"),i("r28Z"),null,null);t.exports=n.exports},QZz9:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-comment-info"},[i("div",{staticClass:"c-comment-info-wrap"},[t._l(t.message.list,function(e,n){return i("div",{staticClass:"c-comment-info-list",class:{"z-unread":0==e.read}},[i("div",{staticClass:"c-comment-info__top"},[i("div",{staticClass:"top__img"},[t._v("\n                "+t._s(e.message.sender.avatar_utl)+"\n            ")]),t._v(" "),i("div",{staticClass:"top__name"},[t._v(t._s(e.message.sender.nick_name))])]),t._v(" "),i("div",{staticClass:"c-comment-info__comment"},[i("div",{staticClass:"comment__top",domProps:{innerHTML:t._s(e.message.content.title)}}),t._v(" "),i("div",{staticClass:"comment__body"},[t._v(t._s(e.message.content.content))]),t._v(" "),e.message.content.cite?i("div",{staticClass:"comment__bottom"},[t._v(t._s(e.message.content.cite))]):t._e()]),t._v(" "),i("div",{staticClass:"c-comment-info__form"},[i("div",{staticClass:"form__top"},[i("div",{staticClass:"form__top__jubao",on:{click:function(i){t.addReport(e.message.sender.user_id)}}},[t._v("举报")]),t._v(" "),i("div",{staticClass:"form__top__record",on:{click:function(i){t.recordSwitch(n,e.msg_id,e.read)}}},[t._v(t._s(t.recordIndex==n?"收起回复":"回复"))])]),t._v(" "),t.recordIndex==n?i("div",{staticClass:"form__body"},[i("div",{staticClass:"form__body__write"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{type:"text",placeholder:"回复TA..."},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"form_body__commit",on:{click:function(i){t.emitComment(e.message.arguments)}}},[t._v("提交")])]):t._e()])])}),t._v(" "),t.message.count<=0?i("Empty",{staticClass:"content-empty"}):t._e()],2),t._v(" "),i("Page",{attrs:{count:t.message.count,length:t.pageSize,index:t.pageIndex},on:{page_switch:t.pageSwitch}})],1)},staticRenderFns:[]}},RS2Z:function(t,e,i){i("Bhe8");var n=i("VU/8")(i("BCRs"),i("xyAH"),null,null);t.exports=n.exports},V9fN:function(t,e,i){i("CPmu");var n=i("VU/8")(i("mxKd"),i("euaV"),null,null);t.exports=n.exports},VANs:function(t,e,i){i("lqD5");var n=i("VU/8")(i("m127"),i("gnCm"),null,null);t.exports=n.exports},VHTH:function(t,e){},VVx8:function(t,e,i){i("siit");var n=i("VU/8")(i("LJ/l"),i("My/L"),null,null);t.exports=n.exports},W0Us:function(t,e,i){i("OTwL");var n=i("VU/8")(i("FhuJ"),i("2Gq5"),null,null);t.exports=n.exports},Wbri:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=I.baseUrl+"opus/getLabelList";return(0,j.default)({method:"GET",url:e,params:t}).then(function(t){return 0!=t.data.ret?(0,I._reject)(t.data):t.data}).catch(function(t){return(0,I._rejectObj)(t)})}function a(t){var e=I.baseUrl+"opus/getCategoryList";return(0,j.default)({method:"GET",url:e,params:t}).then(function(t){return 0!=t.data.ret?(0,I._reject)(t.data):t.data}).catch(function(t){return(0,I._rejectObj)(t)})}function s(t){var e=I.baseUrl+"opus/getCatalogList";return(0,j.default)({method:"POST",url:e,params:t.params,data:t.body,headers:{token:M}}).then(function(t){return 0!=t.data.ret?(0,I._reject)(t.data):t.data}).catch(function(t){return(0,I._rejectObj)(t)})}function o(t){var e=I.baseUrl+"opus/getFavoritesList";return M?(0,j.default)({method:"GET",url:e,params:t,headers:{token:M}}).then(function(t){return 0!=t.data.ret?(0,I._reject)(t.data):t.data}).catch(function(t){return(0,I._rejectObj)(t)}):(0,I._rejectObj)({ret:-10,msg:"未登录"})}function c(t){var e=I.baseUrl+"opus/delFavorites/"+t.catalogId;return(0,j.default)({method:"DELETE",url:e,headers:{token:M}}).then(function(t){return 0!=t.data.ret?(0,I._reject)(t.data):t.data}).catch(function(t){return(0,I._rejectObj)(t)})}function u(t){var e=I.baseUrl+"opus/addFavorites/"+t.catalogId;return(0,j.default)({method:"PUT",url:e,headers:{token:M}}).then(function(t){return 0!=t.data.ret?(0,I._reject)(t.data):t.data}).catch(function(t){return(0,I._rejectObj)(t)})}function l(t){var e=I.baseUrl+"opus/getCatalogDetail";return(0,j.default)({method:"GET",url:e,params:t,headers:{token:M}}).then(function(t){return 0!=t.data.ret?(0,I._reject)(t.data):t.data}).catch(function(t){return(0,I._rejectObj)(t)})}function d(t){var e=I.baseUrl+"opus/getChapterDetail";return(0,j.default)({method:"GET",url:e,params:t,headers:{token:M}}).then(function(t){return 0!=t.data.ret?(0,I._reject)(t.data):t.data}).catch(function(t){return(0,I._rejectObj)(t)})}function h(t){var e=I.baseUrl+"opus/getChapterList";return(0,j.default)({method:"GET",url:e,params:t,headers:{token:M}}).then(function(t){return 0!=t.data.ret?(0,I._reject)(t.data):t.data}).catch(function(t){return(0,I._rejectObj)(t)})}function m(t){var e=I.baseUrl+"opus/getCommentList";return(0,j.default)({method:"GET",url:e,params:t,headers:{token:M}}).then(function(t){return 0!=t.data.ret?(0,I._reject)(t.data):t.data}).catch(function(t){return(0,I._rejectObj)(t)})}function f(t){var e=I.baseUrl+"opus/getReplyCommentList";return(0,j.default)({method:"GET",url:e,params:t,headers:{token:M}}).then(function(t){return 0!=t.data.ret?(0,I._reject)(t.data):t.data}).catch(function(t){return(0,I._rejectObj)(t)})}function p(t){var e=I.baseUrl+"opus/addComment";return M?(0,j.default)({method:"POST",url:e,data:t,headers:{token:M}}).then(function(t){return 0!=t.data.ret?(0,I._reject)(t.data):t.data}).catch(function(t){return(0,I._rejectObj)(t)}):(0,I._rejectObj)({ret:-10,msg:"未登录"})}function g(t){var e=I.baseUrl+"opus/addCatalog";t._header;return delete t._header,(0,j.default)({method:"POST",url:e,data:(0,S.default)(t),headers:{token:M}}).then(function(t){return 0!=t.data.ret?(0,I._reject)(t.data):t.data}).catch(function(t){return(0,I._rejectObj)(t)})}function _(t){var e=I.baseUrl+"opus/addChapter";t._header;return delete t._header,(0,j.default)({method:"POST",url:e,data:(0,S.default)(t),headers:{token:M}}).then(function(t){return 0!=t.data.ret?(0,I._reject)(t.data):t.data}).catch(function(t){return(0,I._rejectObj)(t)})}function v(t){var e=I.baseUrl+"opus/addCommentPraise/"+t.commentId;t._header;return delete t._header,(0,j.default)({method:"PUT",url:e,headers:{token:M}}).then(function(t){return 0!=t.data.ret?(0,I._reject)(t.data):t.data}).catch(function(t){return(0,I._rejectObj)(t)})}function b(t){var e=I.baseUrl+"opus/addPraise/"+t.catalogId+"/"+t.chapterId;t._header;return delete t._header,(0,j.default)({method:"PUT",url:e,headers:{token:M}}).then(function(t){return 0!=t.data.ret?(0,I._reject)(t.data):t.data}).catch(function(t){return(0,I._rejectObj)(t)})}function x(t){var e=I.baseUrl+"opus/updateCatalog";t._header;return delete t._header,(0,j.default)({method:"POST",url:e,data:(0,S.default)(t),headers:{token:M}}).then(function(t){return 0!=t.data.ret?(0,I._reject)(t.data):t.data}).catch(function(t){return(0,I._rejectObj)(t)})}function y(t){var e=I.baseUrl+"opus/updateChapter";return(0,j.default)({method:"POST",url:e,data:t,headers:{token:M}}).then(function(t){return 0!=t.data.ret?(0,I._reject)(t.data):t.data}).catch(function(t){return(0,I._rejectObj)(t)})}function w(t){var e=I.baseUrl+"opus/delChapter/"+t.chapterId;return(0,j.default)({method:"DELETE",url:e,headers:{token:M}}).then(function(t){return 0!=t.data.ret?(0,I._reject)(t.data):t.data}).catch(function(t){return(0,I._rejectObj)(t)})}function C(t){var e=I.baseUrl+"opus/delCatalog/"+t.catalogId;return(0,j.default)({method:"DELETE",url:e,headers:{token:M}}).then(function(t){return 0!=t.data.ret?(0,I._reject)(t.data):t.data}).catch(function(t){return(0,I._rejectObj)(t)})}function E(t){var e=I.baseUrl+"opus/getMyCatalogList";return M?(0,j.default)({method:"GET",url:e,params:t,headers:{token:M}}).then(function(t){return 0!=t.data.ret?(0,I._reject)(t.data):t.data}).catch(function(t){return(0,I._rejectObj)(t)}):(0,I._rejectObj)({ret:-10,msg:"未登录"})}Object.defineProperty(e,"__esModule",{value:!0}),e._rejectObj=e._reject=e.getMyCatalogList=e.delCatalog=e.delChapter=e.updateChapter=e.updateCatalog=e.addPraise=e.addCommentPraise=e.addChapter=e.addCatalog=e.addComment=e.getReplyCommentList=e.getCommentList=e.getChapterList=e.getChapterDetail=e.getCatalogDetail=e.addFavorites=e.delFavorites=e.getFavoritesList=e.getCatalogList=e.getCategoryList=e.getLabelList=void 0;var R=i("mvHQ"),S=n(R),I=i("AEPM"),T=i("lbHh"),O=n(T),L=i("mtWM"),j=n(L);j.default.defaults.headers.get["Content-Type"]="application/x-www-form-urlencoded",j.default.defaults.headers.get["X-Requested-With"]="XMLHttpRequest";var M=O.default.get("token");e.getLabelList=r,e.getCategoryList=a,e.getCatalogList=s,e.getFavoritesList=o,e.delFavorites=c,e.addFavorites=u,e.getCatalogDetail=l,e.getChapterDetail=d,e.getChapterList=h,e.getCommentList=m,e.getReplyCommentList=f,e.addComment=p,e.addCatalog=g,e.addChapter=_,e.addCommentPraise=v,e.addPraise=b,e.updateCatalog=x,e.updateChapter=y,e.delChapter=w,e.delCatalog=C,e.getMyCatalogList=E,e._reject=I._reject,e._rejectObj=I._rejectObj},YW4o:function(t,e,i){(function(e){!function(i){"function"==typeof window.define?window.define.amd?window.define("wangEditor",["jquery"],i):window.define.cmd?window.define(function(t,e,n){return i}):i(window.jQuery):"object"==typeof t&&"object"==typeof t.exports?t.exports=i(e):i(e)}(function(t){"use strict";var e=function(e){var i=window.wangEditor;i&&e(i,t)};return function(t,e){if(t.wangEditor)return void alert("一个页面不能重复引用 wangEditor.js 或 wangEditor.min.js ！！！");var i=function(t){"string"==typeof t&&(t="#"+t);var i=e(t);if(1===i.length){var n=i[0].nodeName;"TEXTAREA"!==n&&"DIV"!==n||(this.valueNodeName=n.toLowerCase(),this.$valueContainer=i,this.$prev=i.prev(),this.$parent=i.parent(),this.init())}};i.fn=i.prototype,i.$body=e("body"),i.$document=e(document),i.$window=e(t),i.userAgent=navigator.userAgent,i.getComputedStyle=t.getComputedStyle,i.w3cRange="function"==typeof document.createRange,i.hostname=location.hostname.toLowerCase(),i.websiteHost="wangeditor.github.io|www.wangeditor.com|wangeditor.coding.me",i.isOnWebsite=i.websiteHost.indexOf(i.hostname)>=0,i.docsite="http://www.kancloud.cn/wangfupeng/wangeditor2/113961",t.wangEditor=i,i.plugin=function(t){i._plugins||(i._plugins=[]),"function"==typeof t&&i._plugins.push(t)}}(window,t),e(function(t,e){t.fn.init=function(){this.initDefaultConfig(),this.addEditorContainer(),this.addTxt(),this.addMenuContainer(),this.menus={},this.commandHooks()}}),e(function(t,e){t.fn.ready=function(t){this.readyFns||(this.readyFns=[]),this.readyFns.push(t)},t.fn.readyHeadler=function(){for(var t=this.readyFns;t.length;)t.shift().call(this)},t.fn.updateValue=function(){var t=this,e=t.$valueContainer,i=t.txt.$txt;if(e!==i){var n=i.html();e.val(n)}},t.fn.getInitValue=function(){var t=this,e=t.$valueContainer,i="",n=t.valueNodeName;return"div"===n?i=e.html():"textarea"===n&&(i=e.val()),i},t.fn.updateMenuStyle=function(){var t=this.menus;e.each(t,function(t,e){e.updateSelected()})},t.fn.enableMenusExcept=function(t){this._disabled||(t=t||[],"string"==typeof t&&(t=[t]),e.each(this.menus,function(e,i){t.indexOf(e)>=0||i.disabled(!1)}))},t.fn.disableMenusExcept=function(t){this._disabled||(t=t||[],"string"==typeof t&&(t=[t]),e.each(this.menus,function(e,i){t.indexOf(e)>=0||i.disabled(!0)}))},t.fn.hideDropPanelAndModal=function(){var t=this.menus;e.each(t,function(t,e){var i=e.dropPanel||e.dropList||e.modal;i&&i.hide&&i.hide()})}}),e(function(t,e){function i(){}var n=!t.w3cRange;t.fn.currentRange=function(t){if(!t)return this._rangeData;this._rangeData=t},t.fn.collapseRange=function(t,e){e=e||"end",e="start"===e,(t=t||this.currentRange())&&(t.collapse(e),this.currentRange(t))},t.fn.getRangeText=n?i:function(t){if(t=t||this.currentRange())return t.toString()},t.fn.getRangeElem=n?i:function(t){t=t||this.currentRange();var e=t.commonAncestorContainer;return 1===e.nodeType?e:e.parentNode},t.fn.isRangeEmpty=n?i:function(t){return!(!(t=t||this.currentRange())||!t.startContainer||t.startContainer!==t.endContainer||t.startOffset!==t.endOffset)},t.fn.saveSelection=n?i:function(t){var i,n,r=this,a=r.txt.$txt.get(0);t?i=t.commonAncestorContainer:(n=document.getSelection(),n.getRangeAt&&n.rangeCount&&(t=document.getSelection().getRangeAt(0),i=t.commonAncestorContainer)),i&&(e.contains(a,i)||a===i)&&r.currentRange(t)},t.fn.restoreSelection=n?i:function(e){var i;if(e=e||this.currentRange())try{i=document.getSelection(),i.removeAllRanges(),i.addRange(e)}catch(e){t.error("执行 editor.restoreSelection 时，IE可能会有异常，不影响使用")}},t.fn.restoreSelectionByElem=n?i:function(t,e){t&&(e=e||"end",this.setRangeByElem(t),"start"===e&&this.collapseRange(this.currentRange(),"start"),"end"===e&&this.collapseRange(this.currentRange(),"end"),this.restoreSelection())},t.fn.initSelection=n?i:function(){var t=this;if(!t.currentRange()){var e=t.txt.$txt,i=e.children().first();i.length&&t.restoreSelectionByElem(i.get(0))}},t.fn.setRangeByElem=n?i:function(t){var i=this,n=i.txt.$txt.get(0);if(t&&e.contains(n,t)){for(var r=t.firstChild;r&&3!==r.nodeType;)r=r.firstChild;for(var a=t.lastChild;a&&3!==a.nodeType;)a=a.lastChild;var s=document.createRange();r&&a?(s.setStart(r,0),s.setEnd(a,a.textContent.length)):(s.setStart(t,0),s.setEnd(t,0)),i.saveSelection(s)}}}),e(function(t,e){t.w3cRange||(t.fn.getRangeText=function(t){if(t=t||this.currentRange())return t.text},t.fn.getRangeElem=function(t){if(t=t||this.currentRange()){var e=t.parentElement();return 1===e.nodeType?e:e.parentNode}},t.fn.isRangeEmpty=function(t){return!(t=t||this.currentRange())||!t.text},t.fn.saveSelection=function(t){var i,n=this,r=n.txt.$txt.get(0);t?i=t.parentElement():(t=document.selection.createRange(),i=void 0===t.parentElement?null:t.parentElement()),i&&(e.contains(r,i)||r===i)&&n.currentRange(t)},t.fn.restoreSelection=function(t){var e,i=this;if(t=t||i.currentRange()){e=document.selection.createRange();try{e.setEndPoint("EndToEnd",t)}catch(t){}if(0===t.text.length)try{e.collapse(!1)}catch(t){}else e.setEndPoint("StartToStart",t);e.select()}})}),e(function(t,e){t.fn.commandHooks=function(){var t=this,i={};i.insertHtml=function(i){var n,r=e(i),a=t.getRangeElem();(n=t.getLegalTags(a))&&e(n).after(r)},t.commandHooks=i}}),e(function(t,e){t.fn.command=function(t,e,i,n){function r(){e&&(s.queryCommandSupported(e)?document.execCommand(e,!1,i):(a=s.commandHooks,e in a&&a[e](i)))}var a,s=this;this.customCommand(t,r,n)},t.fn.commandForElem=function(t,e,i,n,r){var a,s;"string"==typeof t?a=t:(a=t.selector,s=t.check);var o=this.getRangeElem();o=this.getSelfOrParentByName(o,a,s),o&&this.setRangeByElem(o),this.command(e,i,n,r)},t.fn.customCommand=function(t,e,i){function n(){r.hideDropPanelAndModal()}var r=this,a=r.currentRange();if(!a)return void(t&&t.preventDefault());r.undoRecord(),this.restoreSelection(a),e.call(r),this.saveSelection(),this.restoreSelection(),i&&"function"==typeof i&&i.call(r),r.txt.insertEmptyP(),r.txt.wrapImgAndText(),r.updateValue(),r.updateMenuStyle(),setTimeout(n,200),t&&t.preventDefault()},t.fn.queryCommandValue=function(t){var e="";try{e=document.queryCommandValue(t)}catch(t){}return e},t.fn.queryCommandState=function(t){var e=!1;try{e=document.queryCommandState(t)}catch(t){}return e},t.fn.queryCommandSupported=function(t){var e=!1;try{e=document.queryCommandSupported(t)}catch(t){}return e}}),e(function(t,e){function i(t){var i=this,n=e(t),r=!1;return n.each(function(){if(this===i)return r=!0,!1}),r}var n;t.fn.getLegalTags=function(e){var i=this.config.legalTags;return i?this.getSelfOrParentByName(e,i):void t.error("配置项中缺少 legalTags 的配置")},t.fn.getSelfOrParentByName=function(t,r,a){if(t&&r){n||(n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector),n||(n=i);for(var s=this.txt.$txt.get(0);t&&s!==t&&e.contains(s,t);){if(n.call(t,r)){if(!a)return t;if(a(t))return t}t=t.parentNode}}}}),e(function(t,e){function i(t){return null==t._redoList&&(t._redoList=[]),t._redoList}function n(t){return null==t._undoList&&(t._undoList=[]),t._undoList}function r(t,e,i){var n=e.val,r=t.txt.$txt.html();if(null!=n){if(n===r)return"redo"===i?void t.redo():"undo"===i?void t.undo():void 0;t.txt.$txt.html(n),t.updateValue(),t.onchange&&"function"==typeof t.onchange&&t.onchange.call(t)}}t.fn.undoRecord=function(){var t=this,e=t.txt.$txt,r=e.html(),a=n(t),s=i(t);r!==(a.length?a[0]:"").val&&(s.length&&(s=[]),a.unshift({range:t.currentRange(),val:r}),a.length>20&&a.pop())},t.fn.undo=function(){var t=this,e=n(t),a=i(t);if(e.length){var s=e.shift();a.unshift(s),r(this,s,"undo")}},t.fn.redo=function(){var t=this,e=n(t),a=i(t);if(a.length){var s=a.shift();e.unshift(s),r(this,s,"redo")}}}),e(function(t,e){t.fn.create=function(){var i=this;t.$body&&0!==t.$body.length||(t.$body=e("body"),t.$document=e(document),t.$window=e(window)),i.addMenus(),i.renderMenus(),i.renderMenuContainer(),i.renderTxt(),i.renderEditorContainer(),i.eventMenus(),i.eventMenuContainer(),i.eventTxt(),i.readyHeadler(),i.initSelection(),i.$txt=i.txt.$txt;var n=t._plugins;n&&n.length&&e.each(n,function(t,e){e.call(i)})},t.fn.disable=function(){this.txt.$txt.removeAttr("contenteditable"),this.disableMenusExcept(),this._disabled=!0},t.fn.enable=function(){this._disabled=!1,this.txt.$txt.attr("contenteditable","true"),this.enableMenusExcept()},t.fn.destroy=function(){var t=this,e=t.$valueContainer,i=t.$editorContainer;"div"===t.valueNodeName?(e.removeAttr("contenteditable"),i.after(e),i.hide()):(e.show(),i.hide())},t.fn.undestroy=function(){var t=this,e=t.$valueContainer,i=t.$editorContainer,n=t.menuContainer.$menuContainer;"div"===t.valueNodeName?(e.attr("contenteditable","true"),n.after(e),i.show()):(e.hide(),i.show())},t.fn.clear=function(){var t=this,e=t.txt.$txt;e.html("<p><br></p>"),t.restoreSelectionByElem(e.find("p").get(0))}}),e(function(t,e){var i=function(t){this.editor=t,this.init()};i.fn=i.prototype,t.MenuContainer=i}),e(function(t,e){var i=t.MenuContainer;i.fn.init=function(){var t=this,i=e('<div class="wangEditor-menu-container clearfix"></div>');t.$menuContainer=i,t.changeShadow()},i.fn.changeShadow=function(){var t=this.$menuContainer,e=this.editor,i=e.txt.$txt;i.on("scroll",function(){i.scrollTop()>10?t.addClass("wangEditor-menu-shadow"):t.removeClass("wangEditor-menu-shadow")})}}),e(function(t,e){var i=t.MenuContainer;i.fn.render=function(){var t=this.$menuContainer;this.editor.$editorContainer.append(t)},i.fn.height=function(){return this.$menuContainer.height()},i.fn.appendMenu=function(t,e){return this._addGroup(t),this._addOneMenu(e)},i.fn._addGroup=function(t){var i,n=this.$menuContainer;this.$currentGroup&&this.currentGroupIdx===t||(i=e('<div class="menu-group clearfix"></div>'),n.append(i),this.$currentGroup=i,this.currentGroupIdx=t)},i.fn._addOneMenu=function(t){var i=t.$domNormal,n=t.$domSelected,r=this.$currentGroup,a=e('<div class="menu-item clearfix"></div>');return a.attr("id",t._id),n.hide(),a.append(i).append(n),r.append(a),a}}),e(function(t,e){var i=function(t){this.editor=t.editor,this.id=t.id,this._id=t._id,this.title=t.title,this.$domNormal=t.$domNormal,this.$domSelected=t.$domSelected||t.$domNormal,this.commandName=t.commandName,this.commandValue=t.commandValue,this.commandNameSelected=t.commandNameSelected||t.commandName,this.commandValueSelected=t.commandValueSelected||t.commandValue};i.fn=i.prototype,t.Menu=i}),e(function(t,e){t.Menu.fn.initUI=function(){var i=this.editor,n=i.UI.menus,r=this.id,a=n[r];this.$domNormal&&this.$domSelected||(null==a&&(t.warn('editor.UI配置中，没有菜单 "'+r+'" 的UI配置，只能取默认值'),a=n.default),this.$domNormal=e(a.normal),/^\./.test(a.selected)?this.$domSelected=this.$domNormal.clone().addClass(a.selected.slice(1)):this.$domSelected=e(a.selected))}}),e(function(t,e){var i=t.Menu;i.fn.render=function(t){this.initUI();var e=this.editor,i=e.menuContainer,n=i.appendMenu(t,this),r=this.onRender;this._renderTip(n),r&&"function"==typeof r&&r.call(this)},i.fn._renderTip=function(i){function n(){u.show()}function r(){u.hide()}var a,s=this,o=s.editor,c=s.title,u=e('<div class="menu-tip"></div>'),l=e('<i class="tip-triangle"></i>');s.tipWidth||(a=e('<p style="opacity:0; filter:Alpha(opacity=0); position:absolute;top:-10000px;">'+c+"</p>"),t.$body.append(a),o.ready(function(){var t=a.outerWidth()+5,e=u.outerWidth(),i=parseFloat(u.css("margin-left"),10);a.remove(),a=null,u.css({width:t,"margin-left":i+(e-t)/2}),s.tipWidth=t})),u.append(l),u.append(c),i.append(u);var d;i.find("a").on("mouseenter",function(t){s.active()||s.disabled()||(d=setTimeout(n,200))}).on("mouseleave",function(t){d&&clearTimeout(d),r()}).on("click",r)},i.fn.bindEvent=function(){var e=this,i=e.$domNormal,n=e.$domSelected,r=e.clickEvent;if(e.clickEventCustom)return void e.clickEventCustom();r||(r=function(i){var n=e.dropPanel||e.dropList||e.modal;if(n&&n.show)return void(n.isShowing?n.hide():n.show());var r,a,s=e.editor;e.selected?(r=e.commandNameSelected,a=e.commandValueSelected):(r=e.commandName,a=e.commandValue),r?s.command(i,r,a):(t.warn('菜单 "'+e.id+'" 未定义click事件'),i.preventDefault())});var a=e.clickEventSelected||r;i.click(function(t){e.disabled()||(r.call(e,t),e.updateSelected()),t.preventDefault()}),n.click(function(t){e.disabled()||(a.call(e,t),e.updateSelected()),t.preventDefault()})},i.fn.updateSelected=function(){var t=this,e=(t.editor,t.updateSelectedEvent);e||(e=function(){var t=this,e=t.editor,i=t.commandName,n=t.commandValue;if(n){if(e.queryCommandValue(i).toLowerCase()===n.toLowerCase())return!0}else if(e.queryCommandState(i))return!0;return!1});var i=e.call(t);i=!!i,t.changeSelectedState(i)},i.fn.changeSelectedState=function(t){var e=this,i=e.selected;if(null!=t&&"boolean"==typeof t){if(i===t)return;e.selected=t,t?(e.$domNormal.hide(),e.$domSelected.show()):(e.$domNormal.show(),e.$domSelected.hide())}},i.fn.active=function(t){if(null==t)return this._activeState;this._activeState=t},i.fn.activeStyle=function(t){var e=(this.selected,this.$domNormal),i=this.$domSelected;t?(e.addClass("active"),i.addClass("active")):(e.removeClass("active"),i.removeClass("active")),this.active(t)},i.fn.disabled=function(t){if(null==t)return!!this._disabled;if(this._disabled!==t){var e=this.$domNormal,i=this.$domSelected;t?(e.addClass("disable"),i.addClass("disable")):(e.removeClass("disable"),i.removeClass("disable")),this._disabled=t}}}),e(function(t,e){var i=function(t,e,i){this.editor=t,this.menu=e,this.data=i.data,this.tpl=i.tpl,this.selectorForELemCommand=i.selectorForELemCommand,this.beforeEvent=i.beforeEvent,this.afterEvent=i.afterEvent,this.init()};i.fn=i.prototype,t.DropList=i}),e(function(t,e){var i=t.DropList;i.fn.init=function(){var t=this;t.initDOM(),t.bindEvent(),t.initHideEvent()},i.fn.initDOM=function(){var t,i,n=this,r=n.data,a=n.tpl||"<span>{#title}</span>",s=e('<div class="wangEditor-drop-list clearfix"></div>');e.each(r,function(n,r){t=a.replace(/{#commandValue}/gi,n).replace(/{#title}/gi,r),i=e('<a href="#" commandValue="'+n+'"></a>'),i.append(t),s.append(i)}),n.$list=s},i.fn.bindEvent=function(){var t=this,i=t.editor,n=t.menu,r=n.commandName,a=t.selectorForELemCommand,s=t.$list,o=t.beforeEvent,c=t.afterEvent;s.on("click","a[commandValue]",function(t){o&&"function"==typeof o&&o.call(t);var s=e(t.currentTarget).attr("commandValue");n.selected&&i.isRangeEmpty()&&a?i.commandForElem(a,t,r,s):i.command(t,r,s),c&&"function"==typeof c&&c.call(t)})},i.fn.initHideEvent=function(){var i=this,n=i.$list.get(0);t.$body.on("click",function(t){if(i.isShowing){var r,a=t.target,s=i.menu;r=s.selected?s.$domSelected.get(0):s.$domNormal.get(0),r===a||e.contains(r,a)||n===a||e.contains(n,a)||i.hide()}}),t.$window.scroll(function(){i.hide()}),t.$window.on("resize",function(){i.hide()})}}),e(function(t,e){var i=t.DropList;i.fn._render=function(){var t=this,e=t.editor,i=t.$list;e.$editorContainer.append(i),t.rendered=!0},i.fn._position=function(){var t=this,e=t.$list,i=t.editor,n=t.menu,r=i.menuContainer.$menuContainer,a=n.selected?n.$domSelected:n.$domNormal,s=a.offsetParent().position(),o=s.top,c=s.left,u=a.offsetParent().height(),l=a.offsetParent().width(),d=e.outerWidth(),h=i.txt.$txt.outerWidth(),m=o+u,f=c+l/2,p=0-l/2,g=f+d-h;g>-10&&(p=p-g-10),e.css({top:m,left:f,"margin-left":p}),i._isMenufixed&&(m+=r.offset().top+r.outerHeight()-e.offset().top,e.css({top:m}))},i.fn.show=function(){var t=this,e=t.menu;if(t.rendered||t._render(),!t.isShowing){t.$list.show(),t._position(),t.isShowing=!0,e.activeStyle(!0)}},i.fn.hide=function(){var t=this,e=t.menu;if(t.isShowing){t.$list.hide(),t.isShowing=!1,e.activeStyle(!1)}}}),e(function(t,e){var i=function(t,e,i){this.editor=t,this.menu=e,this.$content=i.$content,this.width=i.width||200,this.height=i.height,this.onRender=i.onRender,this.init()};i.fn=i.prototype,t.DropPanel=i}),e(function(t,e){var i=t.DropPanel;i.fn.init=function(){var t=this;t.initDOM(),t.initHideEvent()},i.fn.initDOM=function(){var t=this,i=t.$content,n=t.width,r=t.height,a=e('<div class="wangEditor-drop-panel clearfix"></div>'),s=e('<div class="tip-triangle"></div>');a.css({width:n,height:r||"auto"}),a.append(s),a.append(i),t.$panel=a,t.$triangle=s},i.fn.initHideEvent=function(){var i=this,n=i.$panel.get(0);t.$body.on("click",function(t){if(i.isShowing){var r,a=t.target,s=i.menu;r=s.selected?s.$domSelected.get(0):s.$domNormal.get(0),r===a||e.contains(r,a)||n===a||e.contains(n,a)||i.hide()}}),t.$window.scroll(function(t){i.hide()}),t.$window.on("resize",function(){i.hide()})}}),e(function(t,e){var i=t.DropPanel;i.fn._render=function(){var t=this,e=t.onRender,i=t.editor,n=t.$panel;i.$editorContainer.append(n),e&&e.call(t),t.rendered=!0},i.fn._position=function(){var t=this,e=t.$panel,i=t.$triangle,n=t.editor,r=n.menuContainer.$menuContainer,a=t.menu,s=a.selected?a.$domSelected:a.$domNormal,o=s.offsetParent().position(),c=o.top,u=o.left,l=s.offsetParent().height(),d=s.offsetParent().width(),h=e.outerWidth(),m=n.txt.$txt.outerWidth(),f=c+l,p=u+d/2,g=0-h/2,_=g;0-g>p-10&&(g=0-(p-10));var v=p+h+g-m;v>-10&&(g=g-v-10),e.css({top:f,left:p,"margin-left":g}),n._isMenufixed&&(f+=r.offset().top+r.outerHeight()-e.offset().top,e.css({top:f})),i.css({"margin-left":_-g-5})},i.fn.focusFirstInput=function(){this.$panel.find("input[type=text],textarea").each(function(){var t=e(this);if(null==t.attr("disabled"))return t.focus(),!1})},i.fn.show=function(){var e=this,i=e.menu;if(e.rendered||e._render(),!e.isShowing){var n=e.$panel;n.show(),e._position(),e.isShowing=!0,i.activeStyle(!0),t.w3cRange?e.focusFirstInput():t.placeholderForIE8(n)}},i.fn.hide=function(){var t=this,e=t.menu;if(t.isShowing){t.$panel.hide(),t.isShowing=!1,e.activeStyle(!1)}}}),e(function(t,e){var i=function(t,e,i){this.editor=t,this.menu=e,this.$content=i.$content,this.init()};i.fn=i.prototype,t.Modal=i}),e(function(t,e){var i=t.Modal;i.fn.init=function(){var t=this;t.initDom(),t.initHideEvent()},i.fn.initDom=function(){var t=this,i=t.$content,n=e('<div class="wangEditor-modal"></div>'),r=e('<div class="wangEditor-modal-close"><i class="wangeditor-menu-img-cancel-circle"></i></div>');n.append(r),n.append(i),t.$modal=n,t.$close=r},i.fn.initHideEvent=function(){var i=this,n=i.$close,r=i.$modal.get(0);n.click(function(){i.hide()}),t.$body.on("click",function(t){if(i.isShowing){var n,a=t.target,s=i.menu;s&&((n=s.selected?s.$domSelected.get(0):s.$domNormal.get(0))===a||e.contains(n,a))||r===a||e.contains(r,a)||i.hide()}})}}),e(function(t,e){var i=t.Modal;i.fn._render=function(){var e=this,i=e.editor,n=e.$modal;n.css("z-index",i.config.zindex+10+""),t.$body.append(n),e.rendered=!0},i.fn._position=function(){var e=this,i=e.$modal,n=i.offset().top,r=i.outerWidth(),a=i.outerHeight(),s=0-r/2,o=0-a/2,c=t.$window.scrollTop();a/2>n&&(o=0-n),i.css({"margin-left":s+"px","margin-top":o+c+"px"})},i.fn.show=function(){var t=this,e=t.menu;if(t.rendered||t._render(),!t.isShowing){t.isShowing=!0;t.$modal.show(),t._position(),e&&e.activeStyle(!0)}},i.fn.hide=function(){var t=this,e=t.menu;if(t.isShowing){t.isShowing=!1;t.$modal.hide(),e&&e.activeStyle(!1)}}}),e(function(t,e){var i=function(t){this.editor=t,this.init()};i.fn=i.prototype,t.Txt=i}),e(function(t,e){var i=t.Txt;i.fn.init=function(){var t,i=this,n=i.editor,r=n.$valueContainer,a=n.getInitValue();"DIV"===r.get(0).nodeName?(t=r,t.addClass("wangEditor-txt"),t.attr("contentEditable","true")):t=e('<div class="wangEditor-txt" contentEditable="true">'+a+"</div>"),n.ready(function(){i.insertEmptyP()}),i.$txt=t,i.contentEmptyHandle(),i.bindEnterForDiv(),i.bindEnterForText(),i.bindTabEvent(),i.bindPasteFilter(),i.bindFormatText(),i.bindHtml()},i.fn.contentEmptyHandle=function(){var t,i=this,n=i.editor,r=i.$txt;r.on("keydown",function(t){if(8===t.keyCode){return"<p><br></p>"===e.trim(r.html().toLowerCase())?void t.preventDefault():void 0}}),r.on("keyup",function(i){if(8===i.keyCode){var a=e.trim(r.html().toLowerCase());a&&"<br>"!==a||(t=e("<p><br/></p>"),r.html(""),r.append(t),n.restoreSelectionByElem(t.get(0)))}})},i.fn.bindEnterForDiv=function(){function i(){if(n){var t=e("<p>"+n.html()+"</p>");n.after(t),n.remove()}}var n,r=(t.config.legalTags,this),a=r.editor,s=r.$txt;s.on("keydown keyup",function(t){if(13===t.keyCode){var r,s,o=a.getRangeElem(),c=a.getLegalTags(o);if(!c){if(!(c=a.getSelfOrParentByName(o,"div")))return;r=e(c),"keydown"===t.type&&(n=r,setTimeout(i,0)),"keyup"===t.type&&(s=e("<p>"+r.html()+"</p>"),r.after(s),r.remove(),a.restoreSelectionByElem(s.get(0),"start"))}}})},i.fn.bindEnterForText=function(){var t,e=this,i=e.$txt;i.on("keyup",function(i){13===i.keyCode&&(t||(t=function(){e.wrapImgAndText()}),setTimeout(t))})},i.fn.bindTabEvent=function(){var t=this,e=t.editor;t.$txt.on("keydown",function(t){9===t.keyCode&&e.queryCommandSupported("insertHtml")&&e.command(t,"insertHtml","&nbsp;&nbsp;&nbsp;&nbsp;")})},i.fn.bindPasteFilter=function(){function t(r){if(r&&r.nodeType&&r.nodeName){var a,o,c=r.nodeName.toLowerCase(),l=r.nodeType;if(3===l||1===l){if(a=e(r),"div"===c)return o=[],e.each(r.childNodes,function(t,e){o.push(e)}),void e.each(o,function(){t(this)});if(u.indexOf(c)>=0)s+=i(r);else if(3===l)s+="<p>"+r.textContent+"</p>";else if("br"===c)s+="<br/>";else{if(["meta","style","script","object","form","iframe","hr"].indexOf(c)>=0)return;a=e(n(r)),s+=e("<div>").append(a.clone()).html()}}}}function i(t){var i,r=t.nodeName.toLowerCase(),a="",s="";return["blockquote"].indexOf(r)>=0?(i=e(t),"<"+r+">"+i.text()+"</"+r+">"):["p","h1","h2","h3","h4","h5"].indexOf(r)>=0?(t=n(t),i=e(t),a=i.html(),a=a.replace(/<.*?>/gi,function(t){return"</a>"===t||0===t.indexOf("<a ")||0===t.indexOf("<img ")?t:""}),"<"+r+">"+a+"</"+r+">"):["ul","ol"].indexOf(r)>=0?(i=e(t),i.children().each(function(){var t=e(n(this)),i=t.html();i=i.replace(/<.*?>/gi,function(t){return"</a>"===t||0===t.indexOf("<a ")||0===t.indexOf("<img ")?t:""}),s+="<li>"+i+"</li>"}),"<"+r+">"+s+"</"+r+">"):(i=e(n(t)),e("<div>").append(i).html())}function n(t){var i=t.attributes||[],r=[],a=["href","target","src","alt","rowspan","colspan"];e.each(i,function(t,e){e&&2===e.nodeType&&r.push(e.nodeName)}),e.each(r,function(e,i){a.indexOf(i)<0&&t.removeAttribute(i)});var s=t.childNodes;return s.length&&e.each(s,function(t,e){n(e)}),t}var r=this,a=r.editor,s="",o=r.$txt,c=a.config.legalTags,u=c.split(",");o.on("paste",function(i){if(a.config.pasteFilter){var n=a.getRangeElem().nodeName;if("TD"!==n&&"TH"!==n){s="";var o,c,u,l=i.clipboardData||i.originalEvent.clipboardData,d=window.clipboardData;if(a.config.pasteText){if(l&&l.getData)o=l.getData("text/plain");else{if(!d||!d.getData)return;o=d.getData("text")}o&&(s="<p>"+o+"</p>")}else if(l&&l.getData)o=l.getData("text/html"),u=o.split("</html>"),2===u.length&&(o=u[0]),o?(c=e("<div>"+o+"</div>"),t(c.get(0))):(o=l.getData("text/plain"))&&(o=o.replace(/[ ]/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"</p><p>"),s="<p>"+o+"</p>",s=s.replace(/<p>(https?:\/\/.*?)<\/p>/gi,function(t,e){return'<p><a href="'+e+'" target="_blank">'+e+"</p>"}));else{if(!d||!d.getData)return;if(!(s=d.getData("text")))return;s="<p>"+s+"</p>",s=s.replace(new RegExp("\n","g"),"</p><p>")}s&&(a.command(i,"insertHtml",s),r.clearEmptyOrNestP())}}})},i.fn.bindFormatText=function(){var i=this,n=(i.editor,i.$txt),r=t.config.legalTags,a=r.split(","),s=(a.length,[]);e.each(a,function(t,e){var i=">\\s*<("+e+")>";s.push(new RegExp(i,"ig"))}),s.push(new RegExp(">\\s*<(li)>","ig")),s.push(new RegExp(">\\s*<(tr)>","ig")),s.push(new RegExp(">\\s*<(code)>","ig")),n.formatText=function(){var t=e("<div>"),i=n.html();return i=i.replace(/\s*</gi,"<"),e.each(s,function(t,e){e.test(i)&&(i=i.replace(e,function(t,e){return">\n<"+e+">"}))}),t.html(i),t.text()}},i.fn.bindHtml=function(){var t=this,i=t.editor,n=t.$txt,r=i.$valueContainer,a=i.valueNodeName;n.html=function(t){var i;if("div"===a&&(i=e.fn.html.call(n,t)),void 0===t?(i=e.fn.html.call(n),i=i.replace(/(href|src)\=\"(.*)\"/gim,function(t,e,i){return e+'="'+i.replace("&amp;","&")+'"'})):(i=e.fn.html.call(n,t),r.val(t)),void 0===t)return i;n.change()}}}),e(function(t,e){var i=t.Txt,n="propertychange change click keyup input paste";i.fn.render=function(){var t=this.$txt;this.editor.$editorContainer.append(t)},i.fn.initHeight=function(){var t=this.editor,e=this.$txt,i=t.$valueContainer.height(),n=t.menuContainer.height(),r=i-n;r=r<50?50:r,e.height(r),t.valueContainerHeight=i,this.initMaxHeight(r,n)},i.fn.initMaxHeight=function(i,n){var r=this.editor,a=r.menuContainer.$menuContainer,s=this.$txt,o=e("<div>");if(window.getComputedStyle&&"max-height"in window.getComputedStyle(s.get(0))){var c=parseInt(r.$valueContainer.css("max-height"));if(isNaN(c))return;if(r.menus.fullscreen)return void t.warn("max-height和『全屏』菜单一起使用时，会有一些问题尚未解决，请暂时不要两个同时使用");r.useMaxHeight=!0,o.css({"max-height":c-n+"px","overflow-y":"auto"}),s.css({height:"auto","overflow-y":"visible","min-height":i+"px"}),o.on("scroll",function(){s.parent().scrollTop()>10?a.addClass("wangEditor-menu-shadow"):a.removeClass("wangEditor-menu-shadow")}),s.wrap(o)}},i.fn.saveSelectionEvent=function(){function t(){s.saveSelection()}function e(){Date.now()-o<100||(o=Date.now(),t())}function i(){r&&clearTimeout(r),r=setTimeout(t,300)}var r,a=this.$txt,s=this.editor,o=Date.now();a.on(n+" focus blur",function(t){e(),i()}),a.on("mousedown",function(){a.on("mouseleave.saveSelection",function(t){e(),i(),s.updateMenuStyle()})}).on("mouseup",function(){a.off("mouseleave.saveSelection")})},i.fn.updateValueEvent=function(){function t(){var t=r.html();i!==t&&(a.onchange&&"function"==typeof a.onchange&&a.onchange.call(a),a.updateValue(),i=t)}var e,i,r=this.$txt,a=this.editor;r.on(n,function(n){null==i&&(i=r.html()),e&&clearTimeout(e),e=setTimeout(t,100)})},i.fn.updateMenuStyleEvent=function(){var t=this.$txt,e=this.editor;t.on(n,function(t){e.updateMenuStyle()})},i.fn.insertEmptyP=function(){var t=this.$txt,i=t.children();if(0===i.length)return void t.append(e("<p><br></p>"));"<br>"!==e.trim(i.last().html()).toLowerCase()&&t.append(e("<p><br></p>"))},i.fn.wrapImgAndText=function(){var t,i,n=this.$txt,r=n.children("img"),a=n[0],s=a.childNodes,o=s.length;for(r.length&&r.each(function(){e(this).wrap("<p>")}),t=0;t<o;t++)i=s[t],3===i.nodeType&&i.textContent&&e.trim(i.textContent)&&e(i).wrap("<p>")},i.fn.clearEmptyOrNestP=function(){this.$txt.find("p").each(function(){var t,i=e(this),n=i.children(),r=n.length;if(!e.trim(i.html()))return void i.remove();1===r&&(t=n.first(),t.get(0)&&"P"===t.get(0).nodeName&&i.html(t.html()))})},i.fn.scrollTop=function(t){var e=this,i=e.editor,n=e.$txt;return i.useMaxHeight?n.parent().scrollTop(t):n.scrollTop(t)},i.fn.showHeightOnHover=function(){function t(t){c||(r.append(o),c=!0);var e=(s.position().top,s.outerHeight(),t.height()),i=t.position().top,n=parseInt(t.css("margin-top"),10),u=parseInt(t.css("padding-top"),10),l=parseInt(t.css("margin-bottom"),10),d=parseInt(t.css("padding-bottom"),10);a.height();o.css({height:e+u+n+d+l,top:i+a.height()})}function i(){c&&(o.remove(),c=!1)}var n=this.editor,r=n.$editorContainer,a=n.menuContainer,s=this.$txt,o=e('<i class="height-tip"><i>'),c=!1;s.on("mouseenter","ul,ol,blockquote,p,h1,h2,h3,h4,h5,table,pre",function(i){t(e(i.currentTarget))}).on("mouseleave",function(){i()})}}),e(function(t,e){Array.prototype.indexOf||(Array.prototype.indexOf=function(t){for(var e=0,i=this.length;e<i;e++)if(this[e]===t)return e;return-1},Array.prototype.lastIndexOf=function(t){var e=this.length;for(e-=1;e>=0;e--)if(this[e]===t)return e;return-1}),Date.now||(Date.now=function(){return(new Date).valueOf()});var i=window.console,n=function(){};e.each(["info","log","warn","error"],function(e,r){t[r]=null==i?n:function(e){t.config&&t.config.printLog&&i[r]("wangEditor提示: "+e)}}),t.random=function(){return Math.random().toString().slice(2)},t.placeholder="placeholder"in document.createElement("input"),t.placeholderForIE8=function(i){t.placeholder||i.find("input[placeholder]").each(function(){var t=e(this),i=t.attr("placeholder");""===t.val()&&(t.css("color","#666"),t.val(i),t.on("focus.placeholder click.placeholder",function(){t.val(""),t.css("color","#333"),t.off("focus.placeholder click.placeholder")}))})}}),e(function(t,e){t.langs={},t.langs["zh-cn"]={bold:"粗体",underline:"下划线",italic:"斜体",forecolor:"文字颜色",bgcolor:"背景色",strikethrough:"删除线",eraser:"清空格式",source:"源码",quote:"引用",fontfamily:"字体",fontsize:"字号",head:"标题",orderlist:"有序列表",unorderlist:"无序列表",alignleft:"左对齐",aligncenter:"居中",alignright:"右对齐",link:"链接",text:"文本",submit:"提交",cancel:"取消",unlink:"取消链接",table:"表格",emotion:"表情",img:"图片",uploadImg:"上传图片",linkImg:"网络图片",video:"视频",width:"宽",height:"高",location:"位置",loading:"加载中",searchlocation:"搜索位置",dynamicMap:"动态地图",clearLocation:"清除位置",langDynamicOneLocation:"动态地图只能显示一个位置",insertcode:"插入代码",undo:"撤销",redo:"重复",fullscreen:"全屏",openLink:"打开链接"},t.langs.en={bold:"Bold",underline:"Underline",italic:"Italic",forecolor:"Color",bgcolor:"Backcolor",strikethrough:"Strikethrough",eraser:"Eraser",source:"Codeview",quote:"Quote",fontfamily:"Font family",fontsize:"Font size",head:"Head",orderlist:"Ordered list",unorderlist:"Unordered list",alignleft:"Align left",aligncenter:"Align center",alignright:"Align right",link:"Insert link",text:"Text",submit:"Submit",cancel:"Cancel",unlink:"Unlink",table:"Table",emotion:"Emotions",img:"Image",uploadImg:"Upload",linkImg:"Link",video:"Video",width:"width",height:"height",location:"Location",loading:"Loading",searchlocation:"search",dynamicMap:"Dynamic",clearLocation:"Clear",langDynamicOneLocation:"Only one location in dynamic map",insertcode:"Insert Code",undo:"Undo",redo:"Redo",fullscreen:"Full screnn",openLink:"open link"}}),e(function(t,e){t.config={},t.config.zindex=1e4,t.config.printLog=!0,t.config.menuFixed=0,t.config.jsFilter=!0,t.config.legalTags="p,h1,h2,h3,h4,h5,h6,blockquote,table,ul,ol,pre",t.config.lang=t.langs["zh-cn"],t.config.menus=["indent","bold","italic","strikethrough","img"],t.config.colors={"#880000":"暗红色","#800080":"紫色","#ff0000":"红色","#ff00ff":"鲜粉色","#000080":"深蓝色","#0000ff":"蓝色","#00ffff":"湖蓝色","#008080":"蓝绿色","#008000":"绿色","#808000":"橄榄色","#00ff00":"浅绿色","#ffcc00":"橙黄色","#808080":"灰色","#c0c0c0":"银色","#000000":"黑色","#ffffff":"白色"},t.config.familys=["宋体","黑体","楷体","微软雅黑","Arial","Verdana","Georgia","Times New Roman","Microsoft JhengHei","Trebuchet MS","Courier New","Impact","Comic Sans MS","Consolas"],t.config.fontsizes={1:"12px",2:"13px",3:"16px",4:"18px",5:"24px",6:"32px",7:"48px"},t.config.emotionsShow="icon",t.config.emotions={weibo:{title:"微博表情",data:[{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7a/shenshou_thumb.gif",value:"[草泥马]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/60/horse2_thumb.gif",value:"[神马]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/fuyun_thumb.gif",value:"[浮云]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c9/geili_thumb.gif",value:"[给力]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/f2/wg_thumb.gif",value:"[围观]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/70/vw_thumb.gif",value:"[威武]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6e/panda_thumb.gif",value:"[熊猫]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/81/rabbit_thumb.gif",value:"[兔子]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/otm_thumb.gif",value:"[奥特曼]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/15/j_thumb.gif",value:"[囧]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/89/hufen_thumb.gif",value:"[互粉]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c4/liwu_thumb.gif",value:"[礼物]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/ac/smilea_thumb.gif",value:"[呵呵]"},{icon:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/0b/tootha_thumb.gif",value:"[哈哈]"}]}},t.config.mapAk="TVhjYjq1ICT2qqL5LdS8mwas",t.config.uploadImgUrl=!0,t.config.uploadTimeout=2e4,t.config.uploadImgFns={},t.config.customUpload=!0,t.config.uploadParams={},t.config.uploadHeaders={},t.config.withCredentials=!0,t.config.hideLinkImg=!1,t.config.pasteFilter=!0,t.config.pasteText=!1,t.config.codeDefaultLang="javascript"}),e(function(t,e){t.UI={},t.UI.menus={default:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-command"></i></a>',selected:".selected"},bold:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-bold"></i></a>',selected:".selected"},underline:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-underline"></i></a>',selected:".selected"},italic:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-italic"></i></a>',selected:".selected"},forecolor:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-pencil"></i></a>',selected:".selected"},bgcolor:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-brush"></i></a>',selected:".selected"},strikethrough:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-strikethrough"></i></a>',selected:".selected"},eraser:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-eraser"></i></a>',selected:".selected"},quote:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-quotes-left"></i></a>',selected:".selected"},source:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-code"></i></a>',selected:".selected"},fontfamily:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-font2"></i></a>',selected:".selected"},fontsize:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-text-height"></i></a>',selected:".selected"},head:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-header"></i></a>',selected:".selected"},orderlist:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-list-numbered"></i></a>',selected:".selected"},unorderlist:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-list-bullet"></i></a>',selected:".selected"},alignleft:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-align-left"></i></a>',selected:".selected"},aligncenter:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-align-center"></i></a>',selected:".selected"},alignright:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-align-right"></i></a>',selected:".selected"},link:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-link"></i></a>',selected:".selected"},unlink:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-unlink"></i></a>',selected:".selected"},table:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-table"></i></a>',selected:".selected"},emotion:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-happy"></i></a>',selected:".selected"},img:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-picture"></i></a>',selected:".selected"},video:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-play"></i></a>',selected:".selected"},location:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-location"></i></a>',selected:".selected"},insertcode:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-terminal"></i></a>',selected:".selected"},undo:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-ccw"></i></a>',selected:".selected"},redo:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-cw"></i></a>',selected:".selected"},fullscreen:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-enlarge2"></i></a>',selected:'<a href="#" tabindex="-1" class="selected"><i class="wangeditor-menu-img-shrink2"></i></a>'}}}),e(function(t,e){t.fn.initDefaultConfig=function(){var i=this;i.config=e.extend({},t.config),i.UI=e.extend({},t.UI)}}),e(function(t,e){t.fn.addEditorContainer=function(){this.$editorContainer=e('<div class="wangEditor-container"></div>')}}),e(function(t,e){t.fn.addTxt=function(){var e=this,i=new t.Txt(e);e.txt=i}}),e(function(t,e){t.fn.addMenuContainer=function(){var e=this;e.menuContainer=new t.MenuContainer(e)}}),e(function(t,e){t.createMenuFns=[],t.createMenu=function(e){t.createMenuFns.push(e)},t.fn.addMenus=function(){function i(t){return r.indexOf(t)>=0}var n=this,r=n.config.menus;e.each(t.createMenuFns,function(t,e){e.call(n,i)})}}),e(function(t,e){t.createMenu(function(e){if(e("bold")){var i=this,n=i.config.lang,r=new t.Menu({editor:i,id:"bold",title:n.bold,commandName:"Bold"});r.clickEventSelected=function(t){i.isRangeEmpty()?i.commandForElem("b,strong,h1,h2,h3,h4,h5",t,"Bold"):i.command(t,"Bold")},i.menus.bold=r}})}),e(function(t,e){t.createMenu(function(e){if(e("italic")){var i=this,n=i.config.lang,r=new t.Menu({editor:i,id:"italic",title:n.italic,commandName:"Italic"});r.clickEventSelected=function(t){i.isRangeEmpty()?i.commandForElem("i",t,"Italic"):i.command(t,"Italic")},i.menus.italic=r}})}),e(function(t,e){t.createMenu(function(e){var i="strikethrough";if(e(i)){var n=this,r=n.config.lang,a=new t.Menu({editor:n,id:i,title:r.strikethrough,commandName:"StrikeThrough"});a.clickEventSelected=function(t){n.isRangeEmpty()?n.commandForElem("strike",t,"StrikeThrough"):n.command(t,"StrikeThrough")},n.menus[i]=a}})}),e(function(t,e){t.createMenu(function(i){function n(){var t=o.$codeTextarea,i=a.txt.$txt,n=e.trim(t.val());n||(n="<p><br></p>"),a.config.jsFilter&&(n=n.replace(/<script[\s\S]*?<\/script>/gi,""));try{i.html(n)}catch(t){}}if(i("source")){var r,a=this,s=a.config.lang,o=new t.Menu({editor:a,id:"source",title:s.source});o.isShowCode=!1,o.clickEvent=function(t){var i=this,a=i.editor,s=a.txt.$txt,c=s.outerHeight(),u=s.height();i.$codeTextarea||(i.$codeTextarea=e('<textarea class="code-textarea"></textarea>'));var l=i.$codeTextarea;l.css({height:u,"margin-top":c-u}),l.val(s.html()),l.on("change",function(t){n()}),s.after(l).hide(),l.show(),o.isShowCode=!0,this.updateSelected(),a.disableMenusExcept("source"),r=s.html()},o.clickEventSelected=function(t){var e=this,i=e.editor,a=i.txt.$txt,s=e.$codeTextarea;s&&(n(),s.after(a).hide(),a.show(),o.isShowCode=!1,this.updateSelected(),i.enableMenusExcept("source"),a.html()!==r&&i.onchange&&"function"==typeof i.onchange&&i.onchange.call(i))},o.updateSelectedEvent=function(){return this.isShowCode},a.menus.source=o}})}),e(function(t,e){t.createMenu(function(e){if(e("img")){var i=this,n=i.config.lang,r=new t.Menu({editor:i,id:"img",title:n.img,_id:"edit_upload_image_select"});i.menus.img=r}})}),e(function(t,e){t.fn.renderMenus=function(){var t,i=this,n=i.menus,r=i.config.menus,a=(i.menuContainer,0);e.each(r,function(e,i){if("|"===i)return void a++;(t=n[i])&&t.render(a)})},t.fn.renderMenuContainer=function(){var t=this,e=t.menuContainer;t.$editorContainer;e.render()}}),e(function(t,e){t.fn.renderTxt=function(){var t=this,e=t.txt;e.render(),t.ready(function(){e.initHeight()})}}),e(function(t,e){t.fn.renderEditorContainer=function(){var t,e,i=this,n=i.$valueContainer,r=i.$editorContainer,a=i.txt.$txt;n===a?(t=i.$prev,e=i.$parent,t&&t.length?t.after(r):e.prepend(r)):(n.after(r),n.hide())}}),e(function(t,e){t.fn.eventMenus=function(){var t=this.menus;e.each(t,function(t,e){e.bindEvent()})}}),e(function(t,e){t.fn.eventMenuContainer=function(){}}),e(function(t,e){t.fn.eventTxt=function(){var t=this.txt;t.saveSelectionEvent(),t.updateValueEvent(),t.updateMenuStyleEvent()}}),e(function(t,e){t.createMenu(function(i){if(i("indent")){var n=this,r=new t.Menu({editor:n,id:"indent",title:"缩进",$domNormal:e('<a href="#" tabindex="-1"><i class="wangeditor-menu-img-indent-left"></i></a>'),$domSelected:e('<a href="#" tabindex="-1" class="selected"><i class="wangeditor-menu-img-indent-left"></i></a>')});r.clickEvent=function(t){function i(){r.css("text-indent","2em")}var r,a=n.getRangeElem(),s=n.getSelfOrParentByName(a,"p");if(!s)return t.preventDefault();r=e(s),n.customCommand(t,i)},r.clickEventSelected=function(t){function i(){r.css("text-indent","0")}var r,a=n.getRangeElem(),s=n.getSelfOrParentByName(a,"p");if(!s)return t.preventDefault();r=e(s),n.customCommand(t,i)},r.updateSelectedEvent=function(){var t,i,r=n.getRangeElem(),a=n.getSelfOrParentByName(r,"p");return!!a&&(t=e(a),!(!(i=t.css("text-indent"))||"0px"===i))},n.menus.indent=r}})}),function(){function t(t){if(e)return void console.error("[edit] already installed. Vue.use(edit) should be called only once.");e=t,e.prototype.$edit=window.wangEditor}var e;return{install:t,version:"1.0.0"}}()})}).call(e,i("7t+N"))},Yh7g:function(t,e,i){i("BGNd");var n=i("VU/8")(i("+1mQ"),i("+l+3"),null,null);t.exports=n.exports},YmXF:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("NYxO"),r=i("mOGY"),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={data:function(){return{avatar:a.default,pageIndex:1,pageSize:5,messageType:0}},computed:(0,n.mapState)({message:function(t){return t.message.message}}),methods:{getMessageList:function(){var t=this;this.$store.dispatch("message_getMessageList",{page:this.pageIndex,pageSize:this.pageSize,pagination:1,messageType:this.messageType}).then(function(e){t.$store.dispatch("bubble_success",e)}).catch(function(e){t.$store.dispatch("bubble_fail",e)})},pageSwitch:function(t){if(this.pageIndex==t)return!1;this.pageIndex=t,this.getMessageList()}},mounted:function(){this.getMessageList()}}},dibP:function(t,e,i){i("88zL");var n=i("VU/8")(i("4IqS"),i("iK2G"),null,null);t.exports=n.exports},e1CJ:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{hasScroll:!1}},mounted:function(){var e=this;t(window).scroll(function(i){t(window).scrollTop()>t(window).height()/2?e.hasScroll=!0:e.hasScroll=!1})},methods:{top:function(){t(window).scrollTop(0)}}}}).call(e,i("7t+N"))},e4Z7:function(t,e,i){i("ztWJ");var n=i("VU/8")(i("PSXG"),i("ApeN"),null,null);t.exports=n.exports},eBru:function(t,e,i){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i("//Fk"),a=n(r),s=i("pFYg"),o=n(s),c=i("zlOF"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(c),l=i("lbHh"),d=n(l),h=d.default.get("token");e.default={state:{invite_code:"",password:"",repasswrd:"",newpassword:"",renewpassword:"",pwd_err_times:0,phone:"",time:0,info:{avatar_url:"",black:"",c_age:"",fans_count:"",nick_name:"",opus_count:"",relation:"",signature:"",uid:"",gender:-1,isLogin:!!h},code:{pic_code:"",pic_vid:"",pic_vcode:"",phone_vcode:""},isCodeCan:!1,isPhoneCan:!1,isReset:!0,isLogin:!0,isUpdate:!0,isRegister:!0,isUnboundPhone:!0,isreBindPhone:!0},mutations:{user_setState:function(t,e){for(var i in e)if(e.hasOwnProperty(i))if("object"===(0,o.default)(e[i]))for(var n in e[i])t[i][n]=e[i][n];else t[i]=e[i]},user_setTime:function(t){t.time--},user_setUserInfo:function(t,e){for(var i in e)t.info[i]=e[i]}},actions:{user_setState:function(t,e){t.commit("user_setState",e)},user_setUserInfo:function(t,e){return t.commit("user_setUserInfo",e),a.default.resolve(1)},user_getPicVerifyCode:function(t,e){return e.init||t.state.isCodeCan?(t.commit("user_setState",{isCodeCan:!1}),u.getPicVerifyCode(e).then(function(e){return t.commit("user_setState",{isCodeCan:!0,isPhoneCan:!0,code:{pic_vcode:String(e.pic_vcode),pic_vid:e.pic_vid}}),a.default.resolve(e)}).catch(function(e){return t.commit("user_setState",{isCodeCan:!0}),a.default.reject(e)})):a.default.reject({ret:-21,msg:"加载中"})},user_getPhoneVerifyCode:function(t,e){return t.state.isPhoneCan?u.getPhoneVerifyCode({verifyType:e.verifyType,phoneNum:t.state.phone,picVcode:t.state.code.pic_code,picVid:t.state.code.pic_vid}).then(function(e){t.commit("user_setState",{isPhoneCan:!1,time:60});var i=setInterval(function(){if(t.state.time<=0)return t.commit("user_setState",{isPhoneCan:!0}),clearInterval(i),!1;t.commit("user_setTime")},1e3);return a.default.resolve(e)}).catch(function(t){return a.default.reject(t)}):a.default.reject({ret:-21,msg:"加载中"})},user_sigin:function(t,e){return t.state.isLogin?u.sigin({phone_num:t.state.phone,password:t.state.password,pic_vid:t.state.code.pic_vid,pic_vcode:t.state.code.pic_code,device_no:e.device_no}).then(function(i){return t.commit("user_setState",{isLogin:!0}),d.default.set("token",i.token,{path:"/",expires:e.isSave?7:""}),a.default.resolve(i)}).catch(function(e){return(e.pwd_err_times>=5||20020==e.errcode)&&(e.pwd_err_times=5,t.dispatch("user_getPicVerifyCode",{init:!0})),t.commit("user_setState",{pwd_err_times:e.pwd_err_times||t.state.pwd_err_times,isLogin:!0}),a.default.reject(e)}):a.default.reject({ret:-21,msg:"加载中"})},user_sigup:function(t,e){return t.state.isRegister?(t.commit("user_setState",{isRegister:!1}),u.sigup({invite_code:t.state.invite_code,phone_num:t.state.phone,password:t.state.password,pic_vid:t.state.code.pic_vid,pic_vcode:t.state.code.pic_code,phone_vcode:t.state.code.phone_vcode,device_no:e.device_no,_header:e._header}).then(function(e){return t.commit("user_setState",{isRegister:!0}),d.default.set("token",e.token,{path:"/",expires:7}),a.default.resolve(e)}).catch(function(e){return t.commit("user_setState",{isRegister:!0}),a.default.reject(e)})):a.default.reject({ret:-21,msg:"加载中"})},user_backPwd:function(t,e){return!!t.state.isReset&&(t.commit("user_setState",{isReset:!1}),u.resetPwd({phone_num:t.state.phone,password:t.state.password,phone_vcode:t.state.code.phone_vcode,device_no:e.device_no,_header:e._header}).then(function(e){return t.commit("user_setState",{isReset:!0}),a.default.resolve(e)}).catch(function(e){return t.commit("user_setState",{isReset:!0}),a.default.reject(e)}))},user_resetPwd:function(e,i){return e.state.isReset?!t.trim(e.state.password)||e.state.password.length<6||e.state.password.length>12?a.default.reject({ret:-2,msg:"输入旧密码"}):!t.trim(e.state.newpassword)||e.state.newpassword.length<6||e.state.newpassword.length>12?a.default.reject({ret:-2,msg:"输入新密码"}):e.state.newpassword!=e.state.renewpassword?a.default.reject({ret:-2,msg:"密码不一致"}):t.trim(e.state.code.phone_vcode)?(e.commit("user_setState",{isReset:!1}),u.resetPwd({phone_num:e.state.phone,password:e.state.password,phone_vcode:e.state.code.phone_vcode,device_no:i.device_no,_header:i._header}).then(function(t){return e.commit("user_setState",{isReset:!0}),a.default.resolve(t)}).catch(function(t){return e.commit("user_setState",{isReset:!0}),a.default.reject(t)})):a.default.reject({ret:-2,msg:"输入验证码"}):a.default.reject({ret:-21,msg:"加载中"})},user_updateUserInfo:function(e,i){return e.state.isUpdate?t.trim(e.state.info.gender)||t.trim(e.state.info.nick_name)||t.trim(e.state.info.avatar_url)||t.trim(e.state.info.signature)?(e.commit("user_setState",{isUpdate:!1}),u.updateUserInfo({gender:e.state.info.gender,nick_name:e.state.info.nick_name,avatar_url:e.state.info.avatar_url,signature:e.state.info.signature}).then(function(t){return e.commit("user_setState",{isUpdate:!0}),a.default.resolve(t)}).catch(function(t){return e.commit("user_setState",{isUpdate:!0}),a.default.reject(t)})):a.default.reject({ret:-2,msg:"参数错误！"}):a.default.reject({ret:-21,msg:"加载中"})},user_getUserInfo:function(t,e){return e.userId==t.state.info.uid?a.default.resolve(t.state.info):u.getUserInfo(e).then(function(i){return e.userId||t.commit("user_setUserInfo",i.info),a.default.resolve(i.info)}).catch(function(t){return a.default.reject(t)})},user_ourlogin:function(t,e){t.commit("user_setUserInfo",{avatar_url:"",black:"",c_age:"",fans_count:"",nick_name:"",opus_count:"",relation:"",signature:"",uid:"",isLogin:""}),d.default.remove("token",{})},user_unboundPhone:function(t,e){return t.state.isUnboundPhone?(t.commit("user_setState",{isUnboundPhone:!1}),u.unboundPhone({phone_num:t.state.phone,phone_vcode:t.state.code.phone_vcode}).then(function(e){return t.commit("user_setState",{phone:"",code:{pic_code:"",pic_vid:"",pic_vcode:"",phone_vcode:""},isUnboundPhone:!0}),a.default.resolve(e)}).catch(function(e){return t.commit("user_setState",{isUnboundPhone:!0}),a.default.reject(e)})):a.default.reject({ret:-21,msg:"加载中"})},user_reBindPhone:function(t,e){return t.state.isreBindPhone?(t.commit("user_setState",{isreBindPhone:!1}),u.reBindPhone({phone_num:t.state.phone,phone_vcode:t.state.code.phone_vcode}).then(function(e){return t.commit("user_setState",{phone:"",code:{pic_code:"",pic_vid:"",pic_vcode:"",phone_vcode:""},isreBindPhone:!0}),a.default.resolve(e)}).catch(function(e){return t.commit("user_setState",{isreBindPhone:!0}),a.default.reject(e)})):a.default.reject({ret:-21,msg:"加载中"})}}}}).call(e,i("7t+N"))},eemp:function(t,e){},euaV:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-edit"},[i("div",{staticClass:"c-edit-content",attrs:{id:"edit"},on:{click:t.click}}),t._v(" "),t.edit_init?i("keep-alive",[i("UploadImg",{attrs:{type:"2",select:"edit_upload_image_select",container:"edit_container"},on:{uploadImg_uploaded:t.uploaded,uploadImg_error:t.error}})],1):t._e()],1)},staticRenderFns:[]}},gnCm:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-article-header"},[i("div",{staticClass:"c-article-header-wrap"},[i("div",{staticClass:"c-article-header_left"},[i("div",{staticClass:"left-img"},[i("img",{attrs:{src:t.catalog.catalog_cover_url}})]),t._v(" "),i("div",{staticClass:"left-tag",class:{"z-man":"漫画"==t.catalog.category_title,"z-wen":"文字"==t.catalog.category_title}})]),t._v(" "),i("div",{staticClass:"c-article-header_right"},[i("div",{staticClass:"name"},[i("div",{staticClass:"name-text"},[t._v(t._s(t.catalog.catalog_title))]),t._v(" "),i("div",{staticClass:"name-tag"},[t._v(t._s(t.level["level"+t.catalog.level]))])]),t._v(" "),i("div",{staticClass:"btn"},[i("div",{staticClass:"btn-item btn-mark",attrs:{"data-catalog_id":t.catalog.catalog_id}},[1!=t.catalog.owner?i("span",{on:{click:function(e){t.mark(t.catalog.catalog_id)}}},[t._v(t._s(1==t.catalog.is_collected?"取消收藏":"加入收藏"))]):i("span",{on:{click:t.updateCatalog}},[t._v("修改目录信息")])]),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"btn-item btn-more"},[i("div",{staticClass:"cpm_sub_more z-left"},[i("div",{staticClass:"item",on:{click:t.addReport}},[i("div",{staticClass:"item-icon z-report"}),t._v(" "),i("div",{staticClass:"item-text"},[t._v("举报")])])])])]),t._v(" "),i("div",{staticClass:"text"},[i("div",{staticClass:"text-intro"},[t._v(t._s(t.catalog.catalog_desc))]),t._v(" "),i("div",{staticClass:"text-tag"},t._l(t.catalog.labels,function(e){return i("p",[t._v(t._s(e))])})),t._v(" "),i("div",{staticClass:"text-number"},[i("div",{staticClass:"text-number-item text-zan"},[i("span"),t._v(" "),i("strong",[t._v(t._s(t.catalog.praise_count))])]),t._v(" "),i("div",{staticClass:"text-number-item text-comment"},[i("span"),t._v(" "),i("strong",[t._v(t._s(t.catalog.comment_count))])])]),t._v(" "),i("div",{staticClass:"text-author"},[i("div",{staticClass:"text-author__img"},[i("img",{attrs:{src:t.catalog.user&&t.catalog.user.avatar_url||t.avatar}})]),t._v(" "),i("div",{staticClass:"text-author__name"},[t._v(t._s(t.catalog.user&&t.catalog.user.nick_name))])])])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"btn-item btn-share"},[i("div",{staticClass:"cpm_sub_more z-left"},[i("div",{staticClass:"item"},[i("div",{staticClass:"item-icon z-wx"}),t._v(" "),i("div",{staticClass:"item-text"},[t._v("微信")])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"item-icon z-peng"}),t._v(" "),i("div",{staticClass:"item-text"},[t._v("朋友圈")])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"item-icon z-wb"}),t._v(" "),i("div",{staticClass:"item-text"},[t._v("微博")])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"item-icon z-qq"}),t._v(" "),i("div",{staticClass:"item-text"},[t._v("QQ 好友")])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"item-icon z-kong"}),t._v(" "),i("div",{staticClass:"item-text"},[t._v("QQ 空间")])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"item-icon z-more"}),t._v(" "),i("div",{staticClass:"item-text"},[t._v("更多")])])])])}]}},hyrZ:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i("//Fk"),a=n(r),s=i("pFYg"),o=n(s),c=i("lI/H"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(c);e.default={state:{count:0,lists:[],code:""},mutations:{auth_setState:function(t,e){for(var i in e)if(e.hasOwnProperty(i))if("object"===(0,o.default)(e[i]))for(var n in e[i])t[i][n]=e[i][n];else t[i]=e[i]},auth_setLists:function(t,e){t.count=e.count,t.lists=e.lists},auth_setCode:function(t,e){t.code=e.code}},actions:{auth_setState:function(t,e){t.commit("auth_setState",e)},auth_getFollowList:function(t,e){return u.getFollowList(e).then(function(e){return e.list.map(function(t){t.relation=1}),t.commit("auth_setLists",{lists:e.list,count:e.page_info.total_count}),a.default.resolve(e)}).catch(function(t){return a.default.reject(t)})},auth_getFansList:function(t,e){return u.getFansList(e).then(function(e){return t.commit("auth_setLists",{lists:e.list,count:e.page_info.total_count}),a.default.resolve(e)}).catch(function(t){return a.default.reject(t)})},auth_getUserList:function(t,e){return u.getUserList(e).then(function(e){return t.commit("auth_setLists",{lists:e.list,count:e.page_info.total_count}),a.default.resolve(e)}).catch(function(t){return a.default.reject(t)})},auth_getBlackList:function(t,e){return u.getBlackList({pagination:1,page:e.pageIndex,pageSize:e.pageSize}).then(function(e){return e.list.map(function(t){t.relation=3}),t.commit("auth_setLists",{lists:e.list,count:e.page_info.total_count}),a.default.resolve(e)}).catch(function(t){return a.default.reject(t)})},auth_delBlack:function(t,e){return u.delBlack({userId:e.userId}).then(function(t){return a.default.resolve(t)}).catch(function(t){return a.default.reject(t)})},auth_addBlack:function(t,e){return u.addBlack({userId:e.userId}).then(function(t){return a.default.resolve(t)}).catch(function(t){return a.default.reject(t)})},auth_addFollow:function(t,e){return u.addFollow({userId:e.userId}).then(function(t){return a.default.resolve(t)}).catch(function(t){return a.default.reject(t)})},auth_delFollow:function(t,e){return u.delFollow({userId:e.userId}).then(function(t){return a.default.resolve(t)}).catch(function(t){return a.default.reject(t)})},auth_getRecommendUserList:function(t,e){return u.getRecommendUserList(e).then(function(e){return t.commit("auth_setLists",{lists:e.list,count:e.list.length}),a.default.resolve(e)}).catch(function(t){return a.default.reject(t)})},auth_getActiveUserList:function(t,e){return u.getActiveUserList(e).then(function(e){return t.commit("auth_setLists",{lists:e.list,count:e.list.length}),a.default.resolve(e)}).catch(function(t){return a.default.reject(t)})},auth_getInviteCode:function(t,e){return u.getInviteCode(e).then(function(e){return t.commit("auth_setCode",{code:e.invite_code}),a.default.resolve(e)}).catch(function(t){return a.default.reject(t)})}}}},iK2G:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-author-header"},[i("div",{staticClass:"c-author-header-wrap"},[i("div",{staticClass:"c-author-header_left"},[i("div",{staticClass:"img"},[i("img",{attrs:{src:t.user.avatar_url||t.avatar}})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.userInfo.uid==t.user_id,expression:"userInfo.uid == user_id"}],staticClass:"icon",attrs:{id:"author_upload_image_select"}}),t._v(" "),i("UploadImg",{attrs:{type:"1",select:"author_upload_image_select",container:"author_container"},on:{uploadImg_uploaded:t.uploaded}})],1),t._v(" "),i("div",{staticClass:"c-author-header_right"},[i("div",{staticClass:"name"},[i("div",{staticClass:"name-text"},[t._v(t._s(t.user.nick_name))]),t._v(" "),i("div",{staticClass:"name-time"},[t._v("社区年龄："),i("span",[t._v(t._s(t.user.c_age))])])]),t._v(" "),i("div",{staticClass:"btn"},[i("div",{staticClass:"btn-item btn-mark",class:[{"z-width":-1==t.user.relation}],on:{click:t.follow}},[t.userInfo.uid!=t.user_id?i("span",[t._v(t._s(1==t.user.relation||3==t.user.relation?"已关注":"添加关注"))]):i("a",{attrs:{href:"setting.userinfo.html"}},[t._v("个人设置")])]),t._v(" "),t._m(0),t._v(" "),t.userInfo.uid!=t.user_id?i("div",{staticClass:"btn-item btn-more"},[i("div",{staticClass:"cpm_sub_more z-left"},[i("div",{staticClass:"item",on:{click:t.addBlackDialog}},[i("div",{staticClass:"item-icon z-black"}),t._v(" "),i("div",{staticClass:"item-text"},[t._v("加入黑名单")])]),t._v(" "),i("div",{staticClass:"item",on:{click:t.addReport}},[i("div",{staticClass:"item-icon z-report"}),t._v(" "),i("div",{staticClass:"item-text"},[t._v("举报")])])])]):t._e()]),t._v(" "),i("div",{staticClass:"text"},[t._v(t._s(t.user.signature))])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"btn-item btn-share"},[i("div",{staticClass:"cpm_sub_more z-left"},[i("div",{staticClass:"item"},[i("div",{staticClass:"item-icon z-wx"}),t._v(" "),i("div",{staticClass:"item-text"},[t._v("微信")])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"item-icon z-peng"}),t._v(" "),i("div",{staticClass:"item-text"},[t._v("朋友圈")])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"item-icon z-wb"}),t._v(" "),i("div",{staticClass:"item-text"},[t._v("微博")])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"item-icon z-qq"}),t._v(" "),i("div",{staticClass:"item-text"},[t._v("QQ 好友")])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"item-icon z-kong"}),t._v(" "),i("div",{staticClass:"item-text"},[t._v("QQ 空间")])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"item-icon z-more"}),t._v(" "),i("div",{staticClass:"item-text"},[t._v("更多")])])])])}]}},iyE5:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-bubble",class:{cpm_hide:!t.data.show},attrs:{id:"bubble"}},[i("div",{staticClass:"c-bubble-mask",on:{click:t.close}}),t._v(" "),"top"==t.data.type?i("div",{staticClass:"c-bubble-top",class:t.data.top.status},[t._v("\n\n    \t"+t._s(t.data.top.msg)+"\n    ")]):t._e(),t._v(" "),"report"==t.data.type?i("div",{staticClass:"c-bubble-report"},[i("div",{staticClass:"report-title"},[t._v("\n    \t\t选择举报类型\n    \t")]),t._v(" "),i("div",{staticClass:"report-content"},[i("div",{staticClass:"select-item z-on",attrs:{"data-type":"adv"},on:{click:t.radioSwitch}},[t._m(0),t._v(" "),i("span",{staticClass:"select-item-text"},[t._v("广告或者垃圾信息")])]),t._v(" "),i("div",{staticClass:"select-item",attrs:{"data-type":"copy"},on:{click:t.radioSwitch}},[t._m(1),t._v(" "),i("span",{staticClass:"select-item-text"},[t._v("抄袭或未授权转载")])]),t._v(" "),i("div",{staticClass:"select-item",attrs:{"data-type":"other"},on:{click:t.radioSwitch}},[t._m(2),t._v(" "),i("span",{staticClass:"select-item-text"},[t._v("其他原因")])]),t._v(" "),i("div",{staticClass:"textare-item"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{placeholder:"请输入举报原因"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"report-bottom"},[i("div",{staticClass:"report-bottom-item report-bottom-cancel",on:{click:t.close}},[t._v("取消")]),t._v(" "),i("div",{staticClass:"report-bottom-item report-bottom-comfire",on:{click:t.addReport}},[t._v("确认")])])]):t._e(),t._v(" "),"declaration"==t.data.type?i("div",{staticClass:"c-bubble-declaration"},[i("div",{staticClass:"declaration-title"},[t._v("原创声明")]),t._v(" "),t._m(3),t._v(" "),t._m(4)]):t._e(),t._v(" "),"warn"==t.data.type?i("div",{staticClass:"c-bubble-warn"},[i("div",{staticClass:"warn-title"},[t._v(t._s(t.data.warn.title))]),t._v(" "),t.data.warn.html?i("div",{staticClass:"warn-content",domProps:{innerHTML:t._s(t.data.warn.html)}}):i("div",{staticClass:"warn-content"},[t._v(t._s(t.data.warn.content))]),t._v(" "),i("div",{staticClass:"warn-bottom"},[i("div",{staticClass:"warn-bottom-item warn-bottom-cancel",on:{click:t.close}},[t._v("取消")]),t._v(" "),i("div",{staticClass:"warn-bottom-item warn-bottom-comfire",on:{click:t.comfire}},[t._v("确认")])])]):t._e(),t._v(" "),"complete"==t.data.type?i("div",{staticClass:"c-bubble-complete"},[i("div",{staticClass:"complete-title"},[t._v(t._s(t.data.complete.title))]),t._v(" "),t._m(5),t._v(" "),i("div",{staticClass:"complete-bottom"},[i("div",{staticClass:"complete-bottom-item complete-bottom-cancel",on:{click:t.close}},[t._v("继续创作")]),t._v(" "),i("div",{staticClass:"complete-bottom-item complete-bottom-comfire",on:{click:t.comfireAll}},[t._v("查看作品")])])]):t._e()])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"select-item-radio"},[i("em")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"select-item-radio"},[i("em")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"select-item-radio"},[i("em")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"declaration-content"},[i("h3",[t._v("原创特指自己独立完成创作的作品。歪曲、篡改他人创作或者抄袭、剽窃他人创作而产生的作品，改编、翻译、注释、整理他人已有创作而产生的作品均不能说是原创。")]),t._v(" "),i("p",[t._v("如下情形不得对作品进行原创声明，一经发现将对作品永久收回原创声明功能使用权限，导致严重影响的还将对违规帐号予以一定期限内封号处理；")]),t._v(" "),i("p",[t._v("1. 未取得合法授权发布的作品；")]),t._v(" "),i("p",[t._v("2. 作品主要篇幅为诸如“法律、法规，国家机关的决议、决定、命令和其他具有立法、行政、司法性质的文件、时事新闻、历法、通用数表、通用表格和公式”等公共内容；")]),t._v(" "),i("p",[t._v("3. 大篇幅引用他人内容或作品主要内容为他人作品，如书摘、文摘、报摘等；")]),t._v(" "),i("p",[t._v("4. 营销性质的内容；")]),t._v(" "),i("p",[t._v("5. 整合的内容；")]),t._v(" "),i("p",[t._v("6. 对非独家代理的作品声明原创等；")]),t._v(" "),i("p",[t._v("7. 色情低俗内容、暴力内容、等内容；")]),t._v(" "),i("p",[t._v("8. 违反法律法规、政策及公序良俗、社会公德，违反《耳语作品规则》、《耳语版权声明》，或干扰耳语平台正常运营和侵犯其他用户或第三方合法权益内容的信息。")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"declaration-bottom"},[i("div",{staticClass:"declaration-bottom-cancel cpm_button_weak z-disline"},[t._v("取消")]),t._v(" "),i("div",{staticClass:"declaration-bottom-comfire cpm_button_default z-disline"},[t._v("确认")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"complete-content"},[i("p",[t._v("发布成功")]),t._v(" "),i("p",[t._v("我们审核后会推送至首页，但你可以先分享好友阅读")]),t._v(" "),i("div",{staticClass:"complete-share"},[i("div",{staticClass:"share-item share-py"}),t._v(" "),i("div",{staticClass:"share-item share-line"}),t._v(" "),i("div",{staticClass:"share-item share-qq"}),t._v(" "),i("div",{staticClass:"share-item share-kong"}),t._v(" "),i("div",{staticClass:"share-item share-wb"}),t._v(" "),i("div",{staticClass:"share-item share-more"})])])}]}},jZOH:function(t,e){},jz42:function(t,e,i){i("EB0Y");var n=i("VU/8")(i("PCXR"),i("1na0"),null,null);t.exports=n.exports},kZEp:function(t,e,i){/**
 * eventHub 1.0.0
 * @license MIT
 */
!function(e,i){t.exports=i()}(0,function(){"use strict";function t(t){if(i)return void console.error("[eventHub] already installed. Vue.use(eventHub) should be called only once.");i=t,i.prototype.$eventHub=new e}function e(){this._vm=new i}var i;return e.prototype={$on:function(t,e){return this._vm.$on(t,e),this},$emit:function(t,e){return this._vm.$emit(t,e),this}},{install:t,version:"1.0.0"}})},kfRd:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["count","length","index","ext"],computed:{pages:function(){return Math.ceil(this.count/this.length)}},methods:{pageSwitch:function(t){var e,i=t.target,n=i.dataset.index;e="prev"==n?this.index-1:"next"==n?this.index+1:parseInt(n),this.$emit("page_switch",e,this.ext)}},render:function(t){for(var e=this,i=this.index,n=this.pages,r=[],a=!1,s=0,o=0,c=0;c<n;c++)r[c]=c;return 0==n?"":(1!=i&&i!=n||(a=!0),i-1<3&&(o=a?5-i:4-i),n-i<3&&(s=a?4-(n-i):3-(n-i)),t("div",{class:"c-page-fenye"},[1!=i?t("div",{class:"item z-prev",attrs:{"data-index":"prev"},on:{click:e.pageSwitch}},[]):"",r.map(function(n,r){var c=r+1;return c+3+s<i?"":i+3+o<c?"":(a--,t("div",{class:"item "+(c==i?"z-on":""),attrs:{"data-index":c},on:{click:e.pageSwitch}},[c]))}),i!=n?t("div",{class:"item z-next",attrs:{"data-index":"next"},on:{click:e.pageSwitch}},[]):"",t("div",{class:"text"},["共页",t("span",null,[n]),"，跳转"]),t("div",{class:"input cpm_form_input"},[t("input",{attrs:{type:"text"}},[])]),t("div",{class:"btn cpm_button_default"},["GO"])]))}}},"lI/H":function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=p.baseUrl+"user/getBlackList";return x?(delete t._header,(0,b.default)({method:"GET",url:e,params:t,headers:{token:x}}).then(function(t){return 0!=t.data.ret?(0,p._reject)(t.data):t.data}).catch(function(t){return(0,p._rejectObj)(t)})):(0,p._rejectObj)({ret:-10,msg:"未登录"})}function a(t){var e=p.baseUrl+"user/delBlack/"+t.userId;return x?(delete t._header,(0,b.default)({method:"DELETE",url:e,headers:{token:x}}).then(function(t){return 0!=t.data.ret?(0,p._reject)(t.data):t.data}).catch(function(t){return(0,p._rejectObj)(t)})):(0,p._rejectObj)({ret:-10,msg:"未登录"})}function s(t){var e=p.baseUrl+"user/addBlack/"+t.userId;return x?(delete t._header,(0,b.default)({method:"PUT",url:e,headers:{token:x}}).then(function(t){return 0!=t.data.ret?(0,p._reject)(t.data):t.data}).catch(function(t){return(0,p._rejectObj)(t)})):(0,p._rejectObj)({ret:-10,msg:"未登录"})}function o(t){var e=p.baseUrl+"user/addFollow/"+t.userId;return x?(delete t._header,(0,b.default)({method:"PUT",url:e,headers:{token:x}}).then(function(t){return 0!=t.data.ret?(0,p._reject)(t.data):t.data}).catch(function(t){return(0,p._rejectObj)(t)})):(0,p._rejectObj)({ret:-10,msg:"未登录"})}function c(t){var e=p.baseUrl+"user/delFollow/"+t.userId;return x?(delete t._header,(0,b.default)({method:"DELETE",url:e,headers:{token:x}}).then(function(t){return 0!=t.data.ret?(0,p._reject)(t.data):t.data}).catch(function(t){return(0,p._rejectObj)(t)})):(0,p._rejectObj)({ret:-10,msg:"未登录"})}function u(t){var e=p.baseUrl+"user/getUserList";return(0,b.default)({method:"GET",url:e,params:t,headers:{token:x}}).then(function(t){return 0!=t.data.ret?(0,p._reject)(t.data):t.data}).catch(function(t){return(0,p._rejectObj)(t)})}function l(t){var e=p.baseUrl+"user/getFollowList";return(0,b.default)({method:"GET",url:e,params:t,headers:{token:x}}).then(function(t){return 0!=t.data.ret?(0,p._reject)(t.data):t.data}).catch(function(t){return(0,p._rejectObj)(t)})}function d(t){var e=p.baseUrl+"user/getFansList";return(0,b.default)({method:"GET",url:e,params:t,headers:{token:x}}).then(function(t){return 0!=t.data.ret?(0,p._reject)(t.data):t.data}).catch(function(t){return(0,p._rejectObj)(t)})}function h(t){var e=p.baseUrl+"user/getRecommendUserList";return delete t._header,(0,b.default)({method:"GET",url:e,params:t,headers:{token:x}}).then(function(t){return 0!=t.data.ret?(0,p._reject)(t.data):t.data}).catch(function(t){return(0,p._rejectObj)(t)})}function m(t){var e=p.baseUrl+"user/getActiveUserList";return delete t._header,(0,b.default)({method:"GET",url:e,params:t,headers:{token:x}}).then(function(t){return 0!=t.data.ret?(0,p._reject)(t.data):t.data}).catch(function(t){return(0,p._rejectObj)(t)})}function f(t){var e=p.baseUrl+"user/getInviteCode";return x?(delete t._header,(0,b.default)({method:"GET",url:e,params:t,headers:{token:x}}).then(function(t){return 0!=t.data.ret?(0,p._reject)(t.data):t.data}).catch(function(t){return(0,p._rejectObj)(t)})):(0,p._rejectObj)({ret:-10,msg:"未登录"})}Object.defineProperty(e,"__esModule",{value:!0}),e._reject=e.getInviteCode=e.getActiveUserList=e.getRecommendUserList=e.getUserList=e.delFollow=e.addFollow=e.addBlack=e.delBlack=e.getBlackList=e.getFollowList=e.getFansList=void 0;var p=i("AEPM"),g=i("lbHh"),_=n(g),v=i("mtWM"),b=n(v);b.default.defaults.headers.get["Content-Type"]="application/x-www-form-urlencoded",b.default.defaults.headers.get["X-Requested-With"]="XMLHttpRequest";var x=_.default.get("token");e.getFansList=d,e.getFollowList=l,e.getBlackList=r,e.delBlack=a,e.addBlack=s,e.addFollow=o,e.delFollow=c,e.getUserList=u,e.getRecommendUserList=h,e.getActiveUserList=m,e.getInviteCode=f,e._reject=p._reject},lqD5:function(t,e){},m127:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("NYxO"),r=i("mOGY"),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={data:function(){return{avatar:a.default,level:{level0:"普通",level1:"首发",level2:"独家"},catalog_id:""}},computed:(0,n.mapState)({userInfo:function(t){return t.user.info},catalog:function(t){return t.opus.catalog.info}}),methods:{updateCatalog:function(){this.$eventHub.$emit("header_article_setShow",{show:!0,catalog:this.catalog})},getCatalogDetail:function(){var t=this;this.$store.dispatch("opus_getCatalogDetail",{catalogId:this.catalog_id}).then(function(e){for(var i=!1,n=t.$version.history,r=t.$cache.getStore(n.key,n.version)||[],a=0,s=r.length;a<s;a++)if(r[a].catalog_id==e.info.catalog_id){i=!0;break}!i&&r.push(e.info),t.$cache.setStore(n.key,r,n.version,n.time),t.$store.dispatch("bubble_success",e)}).catch(function(e){t.$store.dispatch("bubble_fail",e)})},delFavorites:function(t){var e=this;this.$store.dispatch("opus_delFavorites",{catalogId:t}).then(function(t){e.getCatalogDetail(),e.$store.dispatch("bubble_success",t)}).catch(function(t){e.$store.dispatch("bubble_fail",t)})},addFavorites:function(t){var e=this;this.$store.dispatch("opus_addFavorites",{catalogId:t}).then(function(t){e.getCatalogDetail(),e.$store.dispatch("bubble_success",t)}).catch(function(t){e.$store.dispatch("bubble_fail",t)})},mark:function(t){if(!this.userInfo.isLogin)return this.$store.dispatch("bubble_fail",{ret:-11,msg:"未登录，请登陆后操作"});1==this.catalog.is_collected?this.delFavorites(t):this.addFavorites(t)},addReport:function(){if(!this.userInfo.isLogin)return this.$store.dispatch("bubble_fail",{ret:-11,msg:"未登录，请登陆后操作"});this.$store.dispatch("bubble_showBubble",{show:!0,type:"report",report:{content_id:this.catalog.catalog_id,content_type:1}})}},mounted:function(){this.$eventHub.$on("updateCatalog_success",function(t){}),this.catalog_id=this.$url.getUrlParam("catalog_id"),this.getCatalogDetail()}}},mxKd:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"edit",data:function(){return{edit_init:!1,editor:null}},props:["content"],methods:{click:function(){this.$emit("edit_click")},uploaded:function(t){var e='<p><img style="max-width:100%;" src="'+t+'"/></p>';this.editor.command(null,"insertHtml",e)},error:function(t){-600==t.code?this.$store.dispatch("bubble_showBubble",{show:!0,type:"top",top:{status:"z-warn",msg:"选择的文件太大了,可以根据应用情况，在upload.js 设置一下上传的最大大小"}}):-601==t.code?this.$store.dispatch("bubble_showBubble",{show:!0,type:"top",top:{status:"z-warn",msg:"选择的文件后缀不对,可以根据应用情况，在upload.js进行设置可允许的上传文件类型"}}):-602==t.code?this.$store.dispatch("bubble_showBubble",{show:!0,type:"top",top:{status:"z-warn",msg:"这个文件已经上传过一遍了"}}):this.$store.dispatch("bubble_showBubble",{show:!0,type:"top",top:{status:"z-warn",msg:t.response}})},update:function(){var t=this.editor.$txt.html();this.$emit("update",t)},publish:function(){var t=this.editor.$txt.html();this.$emit("publish",t)},scan:function(){var t=this.editor.$txt.html();this.$emit("scan",t)}},watch:{content:function(){this.editor.$txt.html(this.content)}},mounted:function(){var e=this;this.editor=new this.$edit("edit"),this.editor.create(),this.editor.$txt.html(this.content);var i=t('<div class="menu-item menu-item-save clearfix j-save-btn"><a href="javascript:void(0);">保存</a></div>'),n=t('<div class="menu-item menu-item-scan clearfix j-scan-btn"><a href="javascript:void(0);"></a></div>'),r=t('<div class="menu-item clearfix"><a href="javascript:void(0);">发布</a></div>'),a=t('<div class="menu-group"></div>').css("float","right");a.append(i).append(n).append(r),t(".wangEditor-menu-container").append(a),i.on("click",function(t){e.update()}),r.on("click",function(t){e.publish()}),n.on("click",function(t){e.scan()}),this.edit_init=!0,this.$emit("edit_init",this.editor),t(".c-edit-content").height(t(window).height()-120),t(window).on("resize",function(){t(".c-edit-content").height(t(window).height()-120)})}}}).call(e,i("7t+N"))},nFjh:function(t,e){},nL7d:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-artice-list"},[i("div",{staticClass:"c-artice-list-wrap"},[t._l(t.article.lists,function(e){return i("div",{staticClass:"c-artice-item"},[i("div",{staticClass:"c-artice-item-wrap",attrs:{"data-catalog_id":e.catalog_id}},[i("a",{staticClass:"c-artice-item-wrap-link",attrs:{href:"./article.html?catalog_id="+e.catalog_id}},[i("div",{staticClass:"item-left"},[i("div",{staticClass:"item-left__img"},[i("img",{attrs:{src:e.catalog_cover_url}})]),t._v(" "),i("div",{staticClass:"item-left__text"},[t._v(t._s(e.category_title))])]),t._v(" "),i("div",{staticClass:"item-right"},[i("div",{staticClass:"item-right__titile"},[t._v(t._s(e.catalog_title))]),t._v(" "),i("div",{staticClass:"item-right__content"},[t._v(t._s(e.catalog_desc.length>60?e.catalog_desc.substr(0,60)+"...":e.catalog_desc))]),t._v(" "),i("div",{staticClass:"item-right__tags"},t._l(e.labels,function(e){return i("a",{class:{"z-active":t.labelTag==e},attrs:{href:"./page.html?labelTag="+e}},[t._v(t._s(e))])})),t._v(" "),i("div",{staticClass:"item-right__bottom"},["author"!=t.resType?i("a",{staticClass:"item-right__btn",attrs:{href:"author.work.html?user_id="+e.user.uid}},[i("div",{staticClass:"item-right__img"},[i("img",{attrs:{src:e.user.avatar_url||t.avatar}})]),t._v(" "),i("div",{staticClass:"item-right__name"},[t._v(t._s(e.user.nick_name))])]):t._e(),t._v(" "),"history"==t.resType?i("div",{staticClass:"item-right__btn item-right__unmark",on:{click:function(i){i.preventDefault(),t.delHistory(e.catalog_id)}}},[t._v("删除记录")]):t._e(),t._v(" "),"mark"==t.resType&&1!=e.owner&&1==e.is_collected?i("div",{staticClass:"item-right__btn item-right__unmark",on:{click:function(e){e.preventDefault(),t.delFavorites(e)}}},[t._v("取消收藏")]):t._e(),t._v(" "),"search"==t.resType&&1!=e.owner&&1!=e.is_collected?i("div",{staticClass:"item-right__btn item-right__mark"},[t._v("加入收藏")]):t._e(),t._v(" "),"author"==t.resType&&1==e.owner?i("a",{staticClass:"item-right__btn item-right__add",attrs:{href:"./article.edit.html?catalog_id="+e.catalog_id+"&chapter_id=-1"}},[t._v("添加章节")]):t._e(),t._v(" "),"author"==t.resType&&1==e.owner?i("div",{staticClass:"item-right__btn item-right__del",on:{click:function(i){i.stopPropagation(),i.preventDefault(),t.remove(e.catalog_id)}}},[t._v("删除作品")]):t._e()])])])])])}),t._v(" "),t.article.count<=0?i("Empty"):t._e()],2),t._v(" "),"more"==t.loadType&&0!=t.article.count?i("div",{staticClass:"list-more"},[1!=t.article.more||t.article.load?1==t.article.more?i("div",{staticClass:"btn-more-loading"},[i("em"),i("span",[t._v("加载中...")])]):i("div",{staticClass:"btn-more-end"},[i("em"),i("span",[t._v("没有更多")])]):i("div",{staticClass:"btn-more-before"},[t._v(t._s(t.user.isLogin?"加载更多":"登录查看更多"))])]):t._e(),t._v(" "),"more"!=t.loadType?i("Page",{staticClass:"list-pages",attrs:{count:t.article.count,length:t.pageSize,index:t.pageIndex},on:{page_switch:t.pageSwitch}}):t._e()],1)},staticRenderFns:[]}},nTmf:function(t,e,i){i("nFjh");var n=i("VU/8")(i("kfRd"),null,null,null);t.exports=n.exports},oIMG:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=h.baseUrl+"getHomeBanner";return(0,d.default)({method:"GET",url:e,params:t}).then(function(t){return 0!=t.data.ret?(0,h._reject)(t.data):t.data}).catch(function(t){return(0,h._rejectObj)(t)})}function a(t){var e=h.baseUrl+"upload/getPolicyAndAccess";return p?(0,d.default)({method:"GET",url:e,params:t,headers:{token:p}}).then(function(t){return t.data}).catch(function(t){return(0,h._rejectObj)(t)}):(0,h._rejectObj)({ret:-10,msg:"未登录"})}function s(t){var e=h.baseUrl+"report/addFeedback";return p?(0,d.default)({method:"POST",url:e,data:(0,u.default)(t),headers:{token:p}}).then(function(t){return 0!=t.data.ret?(0,h._reject)(t.data):t.data}).catch(function(t){return(0,h._rejectObj)(t)}):(0,h._rejectObj)({ret:-10,msg:"未登录"})}function o(t){var e=h.baseUrl+"report/addReport";return p?(0,d.default)({method:"POST",url:e,data:(0,u.default)(t),headers:{token:p}}).then(function(t){return 0!=t.data.ret?(0,h._reject)(t.data):t.data}).catch(function(t){return(0,h._rejectObj)(t)}):(0,h._rejectObj)({ret:-10,msg:"未登录"})}Object.defineProperty(e,"__esModule",{value:!0}),e._rejectObj=e._reject=e.addReport=e.addFeedback=e.getPolicyAndAccess=e.getHomeBanner=void 0;var c=i("mvHQ"),u=n(c),l=i("mtWM"),d=n(l),h=i("AEPM"),m=i("lbHh"),f=n(m),p=f.default.get("token");e.getHomeBanner=r,e.getPolicyAndAccess=a,e.addFeedback=s,e.addReport=o,e._reject=h._reject,e._rejectObj=h._rejectObj},oZeH:function(t,e){},"or+c":function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i("7+uW"),a=n(r),s=i("NYxO"),o=n(s),c=i("rGUt"),u=n(c),l=i("eBru"),d=n(l),h=i("hyrZ"),m=n(h),f=i("3Tyq"),p=n(f),g=i("xbkL"),_=n(g),v=i("3jmG"),b=n(v);a.default.use(o.default);var x=new o.default.Store({modules:{bubble:u.default,user:d.default,auth:m.default,opus:p.default,common:_.default,message:b.default},strict:!0});e.default=x},prCX:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-artice-hot"},[i("div",{staticClass:"c-artice-hot-wrap"},[i("div",{staticClass:"hot-top"},[i("div",{staticClass:"hot-top-right"},[i("div",{staticClass:"item item-number"},[t._v(t._s(t.pageIndex)+"/"+t._s(t.hot_number))]),t._v(" "),i("div",{staticClass:"item item-btn item-left",on:{click:function(e){t.hotSwitch("left")}}},[i("span"),t._v(" "),i("span")]),t._v(" "),i("div",{staticClass:"item item-btn item-right",on:{click:function(e){t.hotSwitch("right")}}},[i("span"),t._v(" "),i("span")])])]),t._v(" "),i("div",{staticClass:"hot-list",style:{width:150*t.hot.lists.length+10+"px",transform:"translate(-"+t.move+"px, 0)"}},t._l(t.hot.lists,function(e){return i("div",{staticClass:"hot-list-item"},[i("a",{attrs:{href:"article.html?catalog_id="+e.catalog_id}},[i("div",{staticClass:"hot-list__hd"},[i("div",{staticClass:"hot-list__hd-img"},[i("img",{attrs:{src:e.catalog_cover_url}})]),t._v(" "),i("div",{staticClass:"hot-list__hd-text"},[t._v(t._s(e.category_title))])]),t._v(" "),i("div",{staticClass:"hot-list__bd"},[i("div",{staticClass:"hot-list__title"},[t._v(t._s(e.catalog_title))]),t._v(" "),i("div",{staticClass:"hot-list__tag"},t._l(e.labels,function(e){return i("a",{attrs:{href:"./page.html?labelTag="+e}},[t._v("\n                            "+t._s(e)+"\n                        ")])}))]),t._v(" "),i("div",{staticClass:"hot-list__ft"},[i("div",{staticClass:"hot-list__ft-img"},[i("img",{attrs:{src:e.user.avatar_url||t.avatar}})]),t._v(" "),i("div",{staticClass:"hot-list__ft-name"},[t._v(t._s(e.user.nick_name))])])])])}))])])},staticRenderFns:[]}},r28Z:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-author-list",class:"z-"+t.resType},[i("div",{staticClass:"c-author-list-wrap"},[t._l(t.lists,function(e){return i("a",{staticClass:"list-author__item",attrs:{href:"author.work.html?user_id="+e.uid}},[i("div",{staticClass:"list-author__img"},[i("div",{staticClass:"list-author__avatar"},[i("img",{attrs:{src:e.avatar_url||t.avatar}})])]),t._v(" "),i("div",{staticClass:"list-author__content"},[i("div",{staticClass:"list-author__name"},[t._v(t._s(e.nick_name))]),t._v(" "),i("div",{staticClass:"list-author__text"},[i("div",{staticClass:"list-author__work"},[t._v("作品："+t._s(e.opus_count))]),t._v(" "),i("div",{staticClass:"list-author__fans"},[t._v("粉丝："+t._s(e.fans_count))]),t._v(" "),0==e.relation?i("div",{staticClass:"list-author__btn list-author__btn-1",on:{click:function(i){i.stopPropagation(),i.preventDefault(),t.addFollow(e.uid)}}},[t._v("关注")]):t._e(),t._v(" "),1==e.relation||3==e.relation?i("div",{staticClass:"list-author__btn list-author__btn-2",on:{click:function(i){i.stopPropagation(),i.preventDefault(),t.delFollow(e.uid)}}},[t._v("已关注")]):t._e(),t._v(" "),2==e.relation?i("div",{staticClass:"list-author__btn list-author__btn-3",on:{click:function(i){i.stopPropagation(),i.preventDefault(),t.addFollow(e.uid)}}},[t._v("相互关注")]):t._e(),t._v(" "),1==e.black?i("div",{staticClass:"list-author__btn list-author__btn-3",on:{click:function(i){i.stopPropagation(),i.preventDefault(),t.delBlack(e.uid)}}},[t._v("取消拉黑")]):t._e()])])])}),t._v(" "),t.count<=0?i("Empty"):t._e()],2),t._v(" "),i("Page",{attrs:{count:t.count,length:t.pageSize,index:t.pageIndex},on:{page_switch:t.pageSwitch}})],1)},staticRenderFns:[]}},rGUt:function(t,e,i){"use strict";function n(){return{type:"",show:!1,top:{status:"",msg:"",timeClose:2e3},dialog:{title:{text:"",align:""},content:{title:"",text:"",html:""},btn:{cancel:{text:"取消",callback:function(){}},comfire:{text:"确认",callback:function(){}}}},report:{type:"adv",content:"",map:{adv:"广告或者垃圾细腻",copy:"抄袭或未授权转载",other:"其他原因"}},warn:{title:"",content:"",comfireFn:function(){}},complete:{title:""},methods:{},outlogin:!1}}Object.defineProperty(e,"__esModule",{value:!0});var r=i("pFYg"),a=function(t){return t&&t.__esModule?t:{default:t}}(r),s=i("AEPM");e.default={state:n(),mutations:{bubble_setState:function(t,e){for(var i in e)if(e.hasOwnProperty(i))if("object"===(0,a.default)(e[i]))for(var n in e[i])t[i][n]=e[i][n];else t[i]=e[i]}},actions:{bubble_setState:function(t,e){t.commit("bubble_setState",e)},bubble_showBubble:function(t,e){t.commit("bubble_setState",e),setTimeout(function(){if("top"!=t.state.type)return!1;t.dispatch("bubble_closeBubble")},t.state.top.timeClose)},bubble_closeBubble:function(t,e){t.commit("bubble_setState",n())},bubble_success:function(t,e){s.isdebug&&console.log("----success----",e),0==e.ret&&"top"==e.type?t.commit("bubble_setState",{type:"top",show:!0,top:{status:"z-default",msg:e.msg}}):e.ret&&0!=e.ret&&t.commit("bubble_setState",{type:"top",show:!0,top:{status:"z-warn",msg:"系统异常"}}),setTimeout(function(){if("top"!=t.state.type)return!1;t.dispatch("bubble_closeBubble")},t.state.top.timeClose)},bubble_fail:function(t,e){if(s.isdebug&&console.log("---error----",e),-10==e.ret)return t.commit("bubble_setState",{outlogin:!0}),!1;if(-11==e.ret)return window.location.href="./login.html?from="+encodeURIComponent(location.href);if(-21==e.ret)return!1;if(-20==e.ret&&t.commit("bubble_setState",{type:"top",show:!0,top:{status:"z-warn",msg:"参数错误，系统异常"}}),e.ret>0){if("30001"==e.errcode)return t.commit("bubble_setState",{outlogin:!0}),!1;var i=e.attach&&e.attach.popup?e.attach.popup.text:"系统异常";t.commit("bubble_setState",{type:"top",show:!0,top:{status:"z-warn",msg:i}})}setTimeout(function(){if("top"!=t.state.type)return!1;t.dispatch("bubble_closeBubble")},t.state.top.timeClose)}}}},rgvm:function(t,e){},"s/ku":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-author-hot"},[i("div",{staticClass:"list-author__title"},[i("div",{staticClass:"text"},[t._v("推荐作者")]),t._v(" "),i("div",{staticClass:"list-author__page"},[i("div",{staticClass:"item item-number"},[t._v(t._s(t.index)+"/"+t._s(t.count))]),t._v(" "),i("div",{staticClass:"item item-btn item-left",on:{click:function(e){t.authorSwitch("left")}}},[i("span"),t._v(" "),i("span")]),t._v(" "),i("div",{staticClass:"item item-btn item-right",on:{click:function(e){t.authorSwitch("right")}}},[i("span"),t._v(" "),i("span")])])]),t._v(" "),i("div",{staticClass:"list-author__body"},t._l(t.lists.slice(5*(t.index-1),5*(t.index-1)+5),function(e){return i("div",{staticClass:"list-author__item"},[i("div",{staticClass:"list-author__img"},[i("div",{staticClass:"list-author__avatar"},[i("img",{attrs:{src:e.avatar_url||t.avatar}})])]),t._v(" "),i("div",{staticClass:"list-author__content"},[i("a",{attrs:{href:"author.work.html?user_id="+e.uid}},[i("div",{staticClass:"list-author__name"},[t._v(t._s(e.nick_name))]),t._v(" "),i("div",{staticClass:"list-author__text"},[i("div",{staticClass:"list-author__work"},[t._v("作品："+t._s(e.opus_count))]),t._v(" "),i("div",{staticClass:"list-author__fans"},[t._v("粉丝："+t._s(e.fans_count))]),t._v(" "),0==e.relation?i("div",{staticClass:"list-author__btn",on:{click:function(i){i.stopPropagation(),t.addFollow(e.uid)}}},[t._v("关注")]):t._e(),t._v(" "),1==e.relation||3==e.relation?i("div",{staticClass:"list-author__btn z-active"},[t._v("已关注")]):t._e()])])])])}))])},staticRenderFns:[]}},sEEq:function(t,e){},sUpd:function(t,e){},siit:function(t,e){},"t/6I":function(t,e,i){i("VHTH");var n=i("VU/8")(i("e1CJ"),i("DMxe"),null,null);t.exports=n.exports},tftU:function(t,e){},vvc1:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["data"]}},whrU:function(t,e,i){(function(e){/**
 * url 1.0.0
 * @license MIT
 */
!function(e,i){t.exports=i()}(0,function(){"use strict";function i(t){if(r)return void console.error("[url] already installed. Vue.use(url) should be called only once.");r=t,r.prototype.$url=new n}function n(){}var r;return n.prototype={setHash:function(t){setTimeout(function(){location.hash=t},0)},getHash:function(t){var e=t||location.hash;return e?e.replace(/.*#/,""):""},getHashModelName:function(){var t=this.getHash();return t?t.split("&")[0].split("=")[0]:[]},getHashActionName:function(){var t=this.getHash();return""==t?"":(t?t.split("&"):[])[0].split("=")[1]},getHashParam:function(t){var e=this.getHash().match(new RegExp("(^|&)"+t+"=([^&]*)(&|$)"));return null!=e?e[2]:""},getUrlParam:function(t,e){var i=arguments[1]||window.location.search,n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),r=i.substr(i.indexOf("?")+1).match(n);return null!=r?r[2]:""},getParams:function(){var t=[],e=this.getHash();paramArr=e?e.split("&"):[];for(var i=1,n=paramArr.length;i<n;i++)t.push(paramArr[i]);return t},decodeUrl:function(t){t=decodeURIComponent(t);var i=this.parseUrl(t),n=[];return e.each(i.params,function(t,e){e=decodeURIComponent(e),n.push(t+"="+e)}),t.split("?")[0]+"?"+n.join("&")},parseUrl:function(t){var e=document.createElement("a");return e.href=t,{source:t,protocol:e.protocol.replace(":",""),host:e.hostname,port:e.port,query:e.search,params:function(){for(var t,i={},n=e.search.replace(/^\?/,"").split("&"),r=n.length,a=0;a<r;a++)n[a]&&(t=n[a].split("="),i[t[0]]=t[1]);return i}(),file:(e.pathname.match(/([^\/?#]+)$/i)||[,""])[1],hash:e.hash.replace("#",""),path:e.pathname.replace(/^([^\/])/,"/$1"),relative:(e.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:e.pathname.replace(/^\//,"").split("/")}},replaceParam:function(t,e,i,n){i=i||location.href;var r=new RegExp("([\\?&]"+t+"=)[^&#]*");return i.match(r)?n?i.replace(r,function(t,i){return i+e}):i:-1==i.indexOf("?")?i+"?"+t+"="+e:i+"&"+t+"="+e},replaceParams:function(t,e){var i=t;if("string"==typeof e)var n=e.split("&");else if("object"==typeof e&&!e.slice){var n=[];for(var r in e)n.push(r+"="+e[r])}for(var a=0;a<n.length;a++){var s=n[a].split("=");i=this.replaceParam(s[0],s[1]||"",i,!0)}return i},getHashObj:function(t){var e=(t||location.href,{}),i=0,n=this.getHash(),r=[];if(n){r=n.split("&");for(var a=0,i=r.length;a<i;a++)e[r[a].split("=")[0]]=unescape(r[a].split("=")[1])}return e},getParamsObj:function(t){var t=t||location.href,e={},i="",n="",r="",a=[];if(-1!=t.indexOf("?")){r=t.substr(t.indexOf("?")+1),r.indexOf("#")>-1?(i=r.substr(r.indexOf("#")),n=r.substr(0,r.indexOf("#"))):n=r,a=n.split("&");for(var s=0;s<a.length;s++)e[a[s].split("=")[0]]=unescape(a[s].split("=")[1]);i.length}return e},getUrlObj:function(t){var t=t||location.href;return{param:this.getParamsObj(t),hash:this.getHashObj(t)}},makeUrl:function(t,e,i){var n="",r="",a=null,s=null,o=null,c=null;if("boolean"==typeof arguments[1]&&(i=arguments[1]),"object"==typeof arguments[0]&&(e=arguments[0])&&(t=location.href),t=t||location.href,s=this.getUrlObj(t),e=e||s,e.param||e.hash?(o=e.param?e.param:{},c=e.hash?e.hash:{}):(o=e,c={}),void 0===i&&(i=!0),i){for(a in o)void 0===o[a]?delete s.param[a]:s.param[a]=o[a];for(a in c)void 0===c[a]?delete s.hash[a]:s.hash[a]=c[a];o=s.param,c=s.hash}for(a in o)n+=a+"="+encodeURIComponent(o[a])+"&";for(a in c)r+=a+"="+encodeURIComponent(c[a])+"&";return n.length&&(n=n.substring(0,n.length-1)),r.length&&(r=r.substring(0,r.length-1)),t=t.replace(/\?.*/i,"").replace(/\#.*/i,""),n&&(t+="?"+n),r&&(t+="#"+r),t},addUrlParam:function(t,e,i){var n,r=document.createElement("a"),a=/(?:\?|&amp;|&)+([^=]+)(?:=([^&]*))*/gi,s=[];for(r.href=t;n=a.exec(r.search);)encodeURIComponent(e)!=n[1]&&s.push(n[1]+(n[2]?"="+n[2]:""));return s.push(encodeURIComponent(e)+(i?"="+encodeURIComponent(i):"")),r.search=s.join("&"),r.href},addDebugParam:function(e){var i=t.exports.getUrlParam("mdebug");return i&&(e=t.exports.addUrlParam(e,"mdebug",i)),e}},{install:i,version:"1.0.0"}})}).call(e,i("7t+N"))},xTQR:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("NYxO"),r=i("mOGY"),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={data:function(){return{avatar:a.default,index:0}},props:["resType"],computed:(0,n.mapState)({lists:function(t){return t.auth.lists},count:function(t){return Math.ceil(t.auth.count/5)}}),methods:{getActiveUserList:function(){var t=this;this.$store.dispatch("auth_getActiveUserList",{label:decodeURIComponent(this.labelTag),pageSize:"30"}).then(function(e){e.list.length>0&&(t.index=1),t.$store.dispatch("bubble_success",e)}).catch(function(e){t.$store.dispatch("bubble_fail",e)})},getRecommendUserList:function(){var t=this;this.$store.dispatch("auth_getRecommendUserList",{pageSize:"30"}).then(function(e){e.list.length>0&&(t.index=1),t.$store.dispatch("bubble_success",e)}).catch(function(e){t.$store.dispatch("bubble_fail",e)})},authorSwitch:function(t){return("left"!=t||1!=this.index)&&(("right"!=t||this.index!=this.count)&&void("left"==t?this.index--:this.index++))},addFollow:function(t){var e=this;this.$store.dispatch("auth_addFollow",{userId:t}).then(function(t){e.getRecommendUserList(),e.$store.dispatch("bubble_success",t)}).catch(function(t){e.$store.dispatch("bubble_fail",err)})}},mounted:function(){if(this.labelTag=this.$url.getUrlParam("labelTag"),"active"==this.resType&&!this.labelTag)return this.$store.dispatch("bubble_showBubble",{show:!0,type:"top",top:{status:"z-warn",msg:"系统繁忙"}}),!1;"active"==this.resType?this.getActiveUserList():this.getRecommendUserList()}}},xbkL:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("//Fk"),r=function(t){return t&&t.__esModule?t:{default:t}}(n),a=i("oIMG"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a);e.default={state:function(){return{show:!1,banner_images:[],access:{}}}(),mutations:{common_setBannerList:function(t,e){t.banner_images=e.list},common_switch:function(t,e){t.show=e},common_access:function(t,e){for(var i in e)t.access[i]=e[i]}},actions:{common_setBannerList:function(t,e){return t.commit("common_setBannerList",{list:e}),r.default.resolve(1)},common_getHomeBanner:function(t,e){return s.getHomeBanner().then(function(e){return t.commit("common_setBannerList",{list:e.list}),r.default.resolve(e)}).catch(function(t){return r.default.reject(res)})},common_getPolicyAndAccess:function(t,e){return e.type?s.getPolicyAndAccess({type:e.type}).then(function(i){var n={};return n[e.type]=i,t.commit("common_access",n),r.default.resolve(i)}).catch(function(t){return r.default.reject(res)}):r.default.reject({ret:-20,msg:"请求参数错误"})},common_switch:function(t,e){t.commit("common_switch",e)},common_addFeedback:function(t,e){return s.addFeedback({content:e.content,img_url:"",contact_info:e.contact_info}).then(function(t){return r.default.resolve(t)}).catch(function(t){return r.default.reject(t)})},common_addReport:function(t,e){return s.addReport({content_id:e.content_id,report_reason:e.report_reason,content_type:e.content_type,add_reason:e.add_reason}).then(function(t){return r.default.resolve(t)}).catch(function(t){return r.default.reject(t)})}}}},xyAH:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-artice-better"},[i("div",{staticClass:"c-artice-better-wrap"},[t._l(t.lists,function(e){return i("div",{staticClass:"c-artice-better-item"},[i("div",{staticClass:"c-artice-better_content"},[i("div",{staticClass:"content__title"},[t._v(t._s(e.title))]),t._v(" "),i("div",{staticClass:"content__time"},[t._v(t._s(e.time))]),t._v(" "),i("div",{staticClass:"content__img"},[i("img",{attrs:{src:e.img}})]),t._v(" "),i("div",{staticClass:"content__text"},[t._v(t._s(e.text))])]),t._v(" "),t._m(0,!0)])}),t._v(" "),t.count<=0?i("Empty"):t._e()],2),t._v(" "),i("Page",{attrs:{count:t.count,length:t.pageSize,index:t.pageIndex},on:{page_switch:t.pageSwitch}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-artice-better_bottom"},[i("a",{staticClass:"bottom__link",attrs:{href:"#none"}},[t._v("阅读全文")])])}]}},yStd:function(t,e,i){i("oZeH");var n=i("VU/8")(i("POwH"),i("FG6U"),null,null);t.exports=n.exports},yfst:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=i("NYxO");e.default={data:function(){return{content:""}},computed:(0,n.mapState)({data:function(t){return t.bubble}}),methods:{close:function(){this.data.methods.cancel&&this.data.methods.cancel(),this.$store.dispatch("bubble_closeBubble")},radioSwitch:function(e){t(".c-bubble-report .report-content .select-item").removeClass("z-on"),t(e.currentTarget).addClass("z-on"),this.$store.dispatch("bubble_setState",{report:{type:e.currentTarget.dataset.type}})},addReport:function(){var t=this;this.$store.dispatch("bubble_setState",{report:{content:this.content}}).then(function(e){return t.$store.dispatch("common_addReport",{content_id:t.data.report.content_id,report_reason:t.data.report.map[t.data.report.type],content_type:t.data.report.content_type,add_reason:t.data.report.content}).then(function(e){t.$store.dispatch("bubble_showBubble",{show:!1}),t.$store.dispatch("bubble_success",e)})}).catch(function(e){t.$store.dispatch("bubble_fail",e)})},comfire:function(){this.data.warn.comfireFn(),this.$store.dispatch("bubble_setState",{show:!1})},comfireAll:function(){this.data.methods.comfire(),this.$store.dispatch("bubble_setState",{show:!1})}},mounted:function(){var t=this;this.$watch("data.outlogin",function(e){e&&(console.log("-----error-----no login, clear user info"),t.$cache.removeStore(t.$version.userInfo.key),t.$store.dispatch("user_ourlogin"))})}}}).call(e,i("7t+N"))},zgUS:function(t,e){},zlOF:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=p.baseUrl+"auth/getPicVerifyCode";return(0,b.default)({method:"GET",url:e}).then(function(t){return 0!=t.data.ret?(0,p._reject)(t.data):t.data}).catch(function(t){return(0,p._rejectObj)(t)})}function a(t){var e=p.baseUrl+"auth/getPhoneVerifyCode";return(0,b.default)({method:"GET",url:e,params:t}).then(function(t){return 0!=t.data.ret?(0,p._reject)(t.data):t.data}).catch(function(t){return(0,p._rejectObj)(t)})}function s(t){var e=p.baseUrl+"auth/sigin";t._header;return delete t._header,(0,b.default)({method:"POST",url:e,data:(0,f.default)(t)}).then(function(t){return 0!=t.data.ret?(0,p._reject)(t.data):t.data}).catch(function(t){return(0,p._rejectObj)(t)})}function o(t){var e=p.baseUrl+"auth/sigup",i=t._header||{};return delete t._header,(0,b.default)({method:"POST",url:e,data:(0,f.default)(t),headers:i}).then(function(t){return 0!=t.data.ret?(0,p._reject)(t.data):t.data}).catch(function(t){return(0,p._rejectObj)(t)})}function c(t){var e=p.baseUrl+"auth/resetPwd",i=t._header||{};return delete t._header,(0,b.default)({method:"POST",url:e,data:(0,f.default)(t),headers:i}).then(function(t){return 0!=t.data.ret?(0,p._reject)(t.data):t.data}).catch(function(t){return(0,p._rejectObj)(t)})}function u(t){var e=p.baseUrl+"auth/unboundPhone";return x?(delete t._header,(0,b.default)({method:"POST",url:e,data:(0,f.default)(t),headers:{token:x}}).then(function(t){return 0!=t.data.ret?(0,p._reject)(t.data):t.data}).catch(function(t){return(0,p._rejectObj)(t)})):(0,p._rejectObj)({ret:-10,msg:"未登录"})}function l(t){var e=p.baseUrl+"auth/reBindPhone";return x?(delete t._header,(0,b.default)({method:"POST",url:e,data:(0,f.default)(t),headers:{token:x}}).then(function(t){return 0!=t.data.ret?(0,p._reject)(t.data):t.data}).catch(function(t){return(0,p._rejectObj)(t)})):(0,p._rejectObj)({ret:-10,msg:"未登录"})}function d(t){var e=p.baseUrl+"user/updateUserInfo";t._header;return x?(delete t._header,(0,b.default)({method:"POST",url:e,data:(0,f.default)(t),headers:{token:x}}).then(function(t){return 0!=t.data.ret?(0,p._reject)(t.data):t.data}).catch(function(t){return(0,p._rejectObj)(t)})):(0,p._rejectObj)({ret:-10,msg:"未登录"})}function h(t){var e=p.baseUrl+"user/getUserInfo";t._header;return x||t.userId?(delete t._header,(0,b.default)({method:"GET",url:e,params:t,headers:{token:x}}).then(function(t){return 0!=t.data.ret?(0,p._reject)(t.data):t.data}).catch(function(t){return(0,p._rejectObj)(t)})):(0,p._rejectObj)({ret:-10,msg:"未登录"})}Object.defineProperty(e,"__esModule",{value:!0}),e._reject=e.getUserInfo=e.updateUserInfo=e.reBindPhone=e.unboundPhone=e.resetPwd=e.sigup=e.sigin=e.getPhoneVerifyCode=e.getPicVerifyCode=void 0;var m=i("mvHQ"),f=n(m),p=i("AEPM"),g=i("lbHh"),_=n(g),v=i("mtWM"),b=n(v),x=_.default.get("token");b.default.defaults.headers.get["Content-Type"]="application/x-www-form-urlencoded",b.default.defaults.headers.get["X-Requested-With"]="XMLHttpRequest",e.getPicVerifyCode=r,e.getPhoneVerifyCode=a,e.sigin=s,e.sigup=o,e.resetPwd=c,e.unboundPhone=u,e.reBindPhone=l,e.updateUserInfo=d,e.getUserInfo=h,e._reject=p._reject},ztWJ:function(t,e){}});
//# sourceMappingURL=vendor-business.a0a9fdc055b2193fd70d.js.map